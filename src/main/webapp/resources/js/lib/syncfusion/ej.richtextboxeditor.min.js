/*!
*  filename: ej.richtextboxeditor.min.js
*  version : 15.4.0.17
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
var __extends,ejTooltip,documentManager,clipboardCleaner;window.ej=window.Syncfusion=window.Syncfusion||{},function(n,t,i){"use strict";var o,u,f,e;t.version="15.4.0.17";t.consts={NamespaceJoin:"-"};t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"};t.Orientation={Horizontal:"horizontal",Vertical:"vertical"};t.serverTimezoneOffset=0;t.persistStateVersion=null;t.locales=t.locales||[];Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(n,t){return n[t]!==i});Date.prototype.toISOString||function(){function n(n){var t=String(n);return t.length===1&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}();String.format=function(){for(var t=arguments[0],n=0;n<arguments.length-1;n++)t=t.replace(new RegExp("\\{"+n+"\\}","gm"),arguments[n+1]);return t.replace(/\{[0-9]\}/g,"")};jQuery.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}};t.defineClass=function(n,r,u,f){if(!n||!u)return i;for(var o=n.split("."),s=window,e=0;e<o.length-1;e++)t.isNullOrUndefined(s[o[e]])&&(s[o[e]]={}),s=s[o[e]];return(f||t.isNullOrUndefined(s[o[e]]))&&(r=typeof r=="function"?r:function(){},s[o[e]]=r,s[o[e]].prototype=u),s[o[e]]};t.util={getNameSpace:function(n){var i=n.toLowerCase().split(".");return i[0]==="ej"&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(n,r){var u,e,f;if(!r||!n)return i;for(typeof n!="string"&&(n=JSON.stringify(n)),u=r,e=n.split("."),f=0;f<e.length;f++){if(t.util.isNullOrUndefined(u))break;u=u[e[f]]}return u},createObject:function(n,i,r){for(var o=n.split("."),s=r||window,u=s,e,h=o.length,f=0;f<h;f++)e=o[f],f+1==h?u[e]=i:t.isNullOrUndefined(u[e])&&(u[e]={}),u=u[e];return s},isNullOrUndefined:function(n){return n===i||n===null},print:function(i,r){var f=t.buildTag("div"),o=i.clone(),r,e,u;f.append(o);r||(r=window.open("","print","height=452,width=1024,tabbar=no"));r.document.write("<!DOCTYPE html>");e=n("head").find("link").add("style");t.browserInfo().name==="msie"?(u="",e.each(function(t,i){i.tagName=="LINK"&&n(i).attr("href",i.href);u+=i.outerHTML}),r.document.write("<html><head><\/head><body>"+u+f[0].innerHTML+"<\/body><\/html>")):(u="",r.document.write("<html><head>"),e.each(function(t,i){i.tagName=="LINK"&&n(i).attr("href",i.href);u+=i.outerHTML}),r.document.writeln(u+"<\/head><body>"),r.document.writeln(f[0].innerHTML+"<\/body><\/html>"));r.document.close();r.focus();setTimeout(function(){t.isNullOrUndefined(r.window)||(r.print(),setTimeout(function(){r.close()},1e3))},1e3)},ieClearRemover:function(t){var i=n(t).height();t.style.paddingTop=parseFloat(i/2)+"px";t.style.paddingBottom=parseFloat(i/2)+"px";t.style.height="1px";t.style.lineHeight="1px"},sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,r,u,f){var s=/^[a-z]*[0-9a-z]+/ig.exec(t)[0],e=/#([_a-z]+[-_0-9a-z]+)/ig.exec(t),o;return e=e?e[e.length-1]:i,o=/\.([a-z]+[-_0-9a-z ]+)/ig.exec(t),o=o?o[o.length-1]:i,n(document.createElement(s)).attr(e?{id:e}:{}).addClass(o||"").css(u||{}).attr(f||{}).html(r||"")},_preventDefaultException:function(n,t){if(n)for(var i in t)if(t[i].test(n[i]))return!0;return!1},getMaxZindex:function(){var t=1;return t=Math.max.apply(null,n.map(n("body *"),function(t){if(n(t).css("position")=="absolute"||n(t).css("position")=="fixed")return parseInt(n(t).css("z-index"))||1})),(t==i||t==null)&&(t=1),t},blockDefaultActions:function(n){n.cancelBubble=!0;n.returnValue=!1;n.preventDefault&&n.preventDefault();n.stopPropagation&&n.stopPropagation()},getDimension:function(t,i){var e,u=n(t).parents().andSelf().filter(":hidden"),r,f;return u&&(r={visibility:"hidden",display:"block"},f=[],u.each(function(){var t={};for(var n in r)t[n]=this.style[n],this.style[n]=r[n];f.push(t)}),e=/(outer)/g.test(i)?n(t)[i](!0):n(t)[i](),u.each(function(n){var i=f[n];for(var t in r)this.style[t]=i[t]})),e},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||n.support.hasPointer?n.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(n("head"),"data-ej-forceset",!1)?t.getBooleanVal(n("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var n=document.documentElement;return n&&n.clientWidth/n.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!(typeof Android=="undefined")},isWindowsWebView:function(){return location.href.indexOf("x-wmapp")!=-1},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||t.getBooleanVal(n("head"),"data-ej-mobile",!1)===!0},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||t.getBooleanVal(n("head"),"data-ej-tablet",!1)===!0||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return n.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,r){var u=n(t).attr(i);return u!=null?u.toLowerCase()=="true":r},_getSkewClass:function(n,t,i){var h=n.width(),c=n.height(),f=n.offset().left,e=n.offset().left+h,o=n.offset().top,s=n.offset().top+c,r=h*.3,u=c*.3;return t<f+r&&i<o+u?"e-m-skew-topleft":t>e-r&&i<o+u?"e-m-skew-topright":t>e-r&&i>s-u?"e-m-skew-bottomright":t<f+r&&i>s-u?"e-m-skew-bottomleft":t>f+r&&i<o+u&&t<e-r?"e-m-skew-top":t<f+r?"e-m-skew-left":t>e-r?"e-m-skew-right":i>s-u?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){n(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(n){var t,i=[];if(n=Object.prototype.toString.call(n)===Object.prototype.toString()?n:{},!Object.keys){for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(n)},_touchStartPoints:function(n,t){if(n){var i=n.touches?n.touches[0]:n;t._distX=0;t._distY=0;t._moved=!1;t._pointX=i.pageX;t._pointY=i.pageY}},_isTouchMoved:function(n,t){if(n){var i=n.touches?n.touches[0]:n,f=i.pageX-t._pointX,e=i.pageY-t._pointY,o=Date.now(),r,u;return t._pointX=i.pageX,t._pointY=i.pageY,t._distX+=f,t._distY+=e,r=Math.abs(t._distX),u=Math.abs(t._distY),!(r<5&&u<5)}},listenEvents:function(n,i,r,u,f,e){for(var o=0;o<n.length;o++)t.listenTouchEvent(n[o],i[o],r[o],u,f,e)},listenTouchEvent:function(i,r,u,f,e,o){for(var s,h=f?"removeEventListener":"addEventListener",a=f?"off":"on",l=n(i),c=0;c<l.length;c++){s=l[c];switch(r){case"touchstart":t._bindEvent(s,h,r,u,"mousedown","MSPointerDown","pointerdown",o);break;case"touchmove":t._bindEvent(s,h,r,u,"mousemove","MSPointerMove","pointermove",o);break;case"touchend":t._bindEvent(s,h,r,u,"mouseup","MSPointerUp","pointerup",o);break;case"touchcancel":t._bindEvent(s,h,r,u,"mousecancel","MSPointerCancel","pointercancel",o);break;case"tap":case"taphold":case"ejtouchmove":case"click":n(s)[a](r,u);break;default:t.browserInfo().name=="msie"&&t.browserInfo().version<9?e._on(n(s),r,u):s[h](r,u,!0)}}},_bindEvent:function(t,i,r,u,f,e,o){n.support.hasPointer?t[i](window.navigator.pointerEnabled?o:e,u,!0):t[i](r,u,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var i="webkitT,t,MozT,msT,OT".split(","),r,n=0,u=i.length;n<u;n++)if(r=i[n]+"ransform",r in t.styles)return i[n].substr(0,i[n].length-1);return!1},addPrefix:function(n){return t.userAgent()===""?n:(n=n.charAt(0).toUpperCase()+n.substr(1),t.userAgent()+n)},destroyWidgets:function(t){var i=n(t).find("[data-role *= ejm]");i.each(function(t,i){var r=n(i),u=r.data("ejWidgets");u&&r[u]("destroy")})},getAttrVal:function(t,i,r){var u=n(t).attr(i);return u!=null?u:r},getOffset:function(t){var i={},u=t.offset()||{left:0,top:0},r;return n.extend(!0,i,u),n("body").css("position")!="static"&&(r=n("body").offset(),i.left-=r.left,i.top-=r.top),i},getZindexPartial:function(i,r){var e,f,u;if(!t.isNullOrUndefined(i)&&i.length>0)return e=i.parents(),f=n("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&f.splice(f.index(r),1),n(f).each(function(n,t){e.push(t)}),u=Math.max.apply(u,n.map(e,function(t){if(n(t).css("position")!="static")return parseInt(n(t).css("z-index"))||1})),!u||u<1e4?u=1e4:u+=1,u},isValidAttr:function(t,i){var t=n(t)[0],r;return typeof t[i]!="undefined"?!0:(r=!1,n.each(t,function(n){if(n.toLowerCase()==i.toLowerCase())return r=!0,!1}),r)}};n.extend(t,t.util);t.widgetBase={droppables:{"default":[]},resizables:{"default":[]},_renderEjTemplate:function(i,r,u,f,e){var o=null;if((typeof i=="object"||i.startsWith("#")||i.startsWith("."))&&(o=n(i).attr("type")),o){if(o=o.toLowerCase(),t.template[o])return t.template[o](this,i,r,u,f)}else if(!t.isNullOrUndefined(e))return t.template["text/x-"+e](this,i,r,u,f);return t.template.render(this,i,r,u,f)},destroy:function(){var u,r,f,i;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),n(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(u=this.element.data("ejWidgets")||[],i=0;i<u.length;i++)u[i]==this.pluginName&&u.splice(i,1);for(u.length||this.element.removeData("ejWidgets");this._events;){if(r=this._events.pop(),f=[],!r)break;for(i=0;i<r[1].length;i++)n.isPlainObject(r[1][i])||f.push(r[1][i]);n.fn.off.apply(r[0],f)}this._events=null;this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName);this.element=null;this.model=null}},_on:function(i){this._events||(this._events=[]);for(var r=[].splice.call(arguments,1,arguments.length-1),u={},f=r.length;u&&typeof u!="function";)u=r[--f];return r[f]=t.proxy(r[f],this),this._events.push([i,r,u,r[f]]),n.fn.on.apply(i,r),this},_off:function(t,i,r,u){var e=this._events,s,h,o,f,c;if(!e||!e.length)return this;for(typeof r=="function"&&(s=u,u=r,r=s),h=i.match(/\S+/g)||[""],o=0;o<e.length;o++)if(f=e[o],c=f[0].length&&(!u||f[2]===u)&&(f[1][0]===i||h[0])&&(!r||f[1][1]===r)&&n.inArray(t[0],f[0])>-1,c){n.fn.off.apply(t,u?[i,r,f[3]]:[i,r]);e.splice(o,1);break}return this},_trigger:function(i,r){var f=null,e,u,s={},o,h;return(n.extend(s,r),i in this.model&&(f=this.model[i]),f&&(typeof f=="string"&&(f=t.util.getObject(f,window)),n.isFunction(f)&&(u=t.event(i,this.model,r),o=this.model._applyScope,e=f.call(this,u),o&&o.call(),r&&n.extend(r,u),u.cancel||!t.isNullOrUndefined(e))))?e===!1||u.cancel:(h=Boolean(r),r=r||{},r.originalEventType=i,r.type=this.pluginName+i,u=n.Event(r.type,t.event(r.type,this.model,r)),this.element&&this.element.trigger(u),h&&n.extend(r,u),t.isOnWebForms&&u.cancel==!1&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,r,s),u.cancel)},setModel:function(t,i){var r,f,e,u;if(!this._trigger("modelChange",{changes:t})){for(r in t){if(!i){if(this.model[r]===t[r]){delete t[r];continue}if(n.isPlainObject(t[r])&&(o(this.model[r],t[r]),n.isEmptyObject(t[r]))){delete t[r];continue}}if(this.dataTypes&&(f=this._isValidModelValue(r,this.dataTypes,t),f!==!0))throw"setModel - Invalid input for property :"+r+" - "+f;this.model.notifyOnEachPropertyChanges&&this.model[r]!==t[r]&&(e={oldValue:this.model[r],newValue:t[r]},t[r]=this._trigger(r+"Change",e)?this.model[r]:e.newValue)}n.isEmptyObject(t)||(this._setFirst?(u=t.dataSource,u&&delete t.dataSource,n.extend(!0,this.model,t),u&&(this.model.dataSource=u instanceof Array?u.slice():u,t.dataSource=this.model.dataSource),this._setModel&&this._setModel(t)):this._setModel&&this._setModel(t)===!1||n.extend(!0,this.model,t),"enablePersistence"in t&&this._setState(t.enablePersistence))}},option:function(r,u,f){if(!r)return this.model;if(n.isPlainObject(r))return this.setModel(r,f);if(typeof r=="string"){r=r.replace(/^model\./,"");var e=t.getObject(r,this.model);if(u===i&&!f)return e;if(r==="enablePersistence")return this._setState(u);if(f&&u===t.extensions.modelGUID)return this._setModel(t.createObject(r,t.getObject(r,this.model),{}));if(f||t.getObject(r,this.model)!==u)return this.setModel(t.createObject(r,u,{}),f)}return i},_isValidModelValue:function(n,t,i){var r=t[n],u=i[n],f,e,o;if(!r)return!0;if(typeof r=="string"){if(r=="enum"&&(i[n]=u?u.toString().toLowerCase():u,r="string"),r==="array"){if(Object.prototype.toString.call(u)==="[object Array]")return!0}else if(r==="data"||r==="parent"||typeof u===r)return!0;return"Expected type - "+r}if(u instanceof Array){for(e=0;e<u.length;e++)if(f=this._isValidModelValue(n,t,u[e]),f!==!0)return" ["+e+"] - "+f;return!0}for(o in u)if(f=this._isValidModelValue(o,r,u),f!==!0)return o+" : "+f;return!0},_returnFn:function(n,t){t.indexOf(".")!=-1?this._returnFn(n[t.split(".")[0]],t.split(".").slice(1).join(".")):n[t]=n[t].call(n.propName)},_removeCircularRef:function(n){function i(n,r,u){if(typeof n=="object"){if(Array.prototype.indexOf||(Array.prototype.indexOf=function(n){return jQuery.inArray(n,this)}),t.indexOf(n)>=0){delete u[r];return}t.push(n);for(var f in n)n.hasOwnProperty(f)&&i(n[f],f,n);t.pop();return}}var t=[];return i(n,"obj",null),n},stringify:function(n,i){for(var f,u=this.observables,r=0;r<u.length;r++)f=t.getObject(u[r],n),t.isNullOrUndefined(f)||typeof f!="function"||this._returnFn(n,u[r]);return i&&(n=this._removeCircularRef(n)),JSON.stringify(n)},_setState:function(i){if(i===!0){this._persistHandler=t.proxy(this.persistState,this);n(window).on("unload",this._persistHandler)}else this.deleteState(),n(window).off("unload",this._persistHandler)},_removeProp:function(n,i){t.isNullOrUndefined(n)||(i.indexOf(".")!=-1?this._removeProp(n[i.split(".")[0]],i.split(".").slice(1).join(".")):delete n[i])},persistState:function(){var n,i;if(this._ignoreOnPersist){for(n=r({},this.model),i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(n,this._ignoreOnPersist[i]);n.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(n={},i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),n);n.addToPersist=this._addToPersist}else n=r({},this.model);this._persistState&&(n.customPersists={},this._persistState(n.customPersists));window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||window.localStorage.getItem("persistKey")!=null||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(n))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||t.cookie.get("persistKey")!=null||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,n))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(i){var f=null,r,u;if(window.localStorage?f=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(f=t.cookie.get("$ej$"+this.pluginName+this._id)),f&&(r=JSON.parse(f),this._restoreState&&(this._restoreState(r.customPersists),delete r.customPersists),t.isNullOrUndefined(r)===!1&&(t.isNullOrUndefined(r.ignoreOnPersist)?t.isNullOrUndefined(r.addToPersist)||(this._addToPersist=r.addToPersist,delete r.addToPersist):(this._ignoreOnPersist=r.ignoreOnPersist,delete r.ignoreOnPersist))),t.isNullOrUndefined(r)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=n.extend(!0,this.model,r);else{for(u in this._ignoreOnPersist)this._ignoreOnPersist[u].indexOf(".")!==-1?t.createObject(this._ignoreOnPersist[u],t.getObject(this._ignoreOnPersist[u],this.model),r):r[this._ignoreOnPersist[u]]=this.model[this._ignoreOnPersist[u]];this.model=r}!i&&f&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(n){var r=[],t,u;if(typeof n=="object"?r=n:typeof n=="string"&&r.push(n),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<r.length;t++)this._ignoreOnPersist.push(r[t]);else for(t=0;t<r.length;t++)u=this._addToPersist.indexOf(r[t]),this._addToPersist.splice(u,1)},addToPersist:function(t){var u=[],f,r;if(typeof t=="object"?u=t:typeof t=="string"&&u.push(t),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],r=0;r<u.length;r++)f=this._ignoreOnPersist.indexOf(u[r]),this._ignoreOnPersist.splice(f,1);else for(r=0;r<u.length;r++)n.inArray(u[r],this._addToPersist)===-1&&this._addToPersist.push(u[r])},formatting:function(i,r,u){var f,l,h,c,a,v,s,e,y;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),u=t.preferredCulture(u)?u:"en-US",f=i,l=i.split("{0:"),a=i.split("}"),h=l[0],c=a[1],typeof r=="string"&&n.isNumeric(r)&&(r=Number(r)),i.indexOf("{0:")!=-1)return v=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),s=v.exec(i),s!=null&&r!=null?h!=null&&c!=null?h+t.format(r,s[2],u)+c:t.format(r,s[2],u):r!=null?r:"";if(f.startsWith("{")&&!f.startsWith("{0:")){var o=f.split(""),r=(r||"")+"",p=r.split(""),w=/[0aA\*CN<>\?]/gm;for(e=0,y=0;e<o.length;e++)o[e]=w.test(o[e])?"{"+y+++"}":o[e];return String.format.apply(String,[o.join("")].concat(p)).replace("{","").replace("}","")}return this.data!=null&&this.data.Value==null?(n.each(this.data,function(n,t){f=f.replace(new RegExp("\\{"+n+"\\}","gm"),t)}),f):this.data.Value}};t.WidgetBase=function(){};o=function(t,i){for(var r in t)t[r]===i[r]&&delete i[r],n.isPlainObject(i[r])&&n.isPlainObject(t[r])&&o(t[r],i[r])};t.widget=function(f,o,h){var a,l,v;if(typeof f=="object"){h=o;for(a in f)l=f[a],l instanceof Array&&(h._rootCSS=l[1],l=l[0]),t.widget(a,l,h),f[a]instanceof Array&&(h._rootCSS="");return}v=h._rootCSS||t.getNameSpace(o);h=t.defineClass(o,function(i,e){var y,p,w,b,c,g,k,d,nt,l,a;if(this.sfType=o,this.pluginName=f,this.instance=s,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},n.extend(this,t.widgetBase),this.dataTypes)for(y in e)if(p=this._isValidModelValue(y,this.dataTypes,e),p!==!0)throw"setModel - Invalid input for property :"+y+" - "+p;for(w=i.data("ejWidgets")||[],w.push(f),i.data("ejWidgets",w),c=0;t.widget.observables&&this.observables&&c<this.observables.length;c++)b=t.getObject(this.observables[c],e),b&&t.createObject(this.observables[c],t.widget.observables.register(b,this.observables[c],this,i),e);if(this.element=i.jquery?i:n(i),this.model=r(!0,{},h.prototype.defaults,e),this.model.keyConfigs=r(this.keyConfigs),this.element.addClass(v+" e-js").data(f,this),this._id=i[0].id,this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(c in window.localStorage)c.indexOf("$ej$")!=-1&&(window.localStorage.removeItem(c),window.localStorage.setItem("persistKey",t.persistStateVersion));else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion){g=document.cookie.split(/; */);for(k in g)k.indexOf("$ej$")!=-1&&(t.cookie.set(k.split("=")[0],model,new Date),t.cookie.set("persistKey",t.persistStateVersion))}this._persistHandler=t.proxy(this.persistState,this);n(window).on("unload",this._persistHandler);this.restoreState(!0)}if(this._init(e),typeof this.model.keyConfigs=="object"&&!(this.model.keyConfigs instanceof Array)){d=!1;this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus);for(nt in this.model.keyConfigs)if(nt!=="focus"){d=!0;break}d&&this._keyPressed&&(l=i,a="keydown",this.keySettings&&(l=this.keySettings.getElement?this.keySettings.getElement()||l:l,a=this.keySettings.event||a),this._on(l,a,function(n){if(this.model.keyConfigs){var t=u.getActionFromCode(this.model.keyConfigs,n.which,n.ctrlKey,n.shiftKey,n.altKey),i={code:n.which,ctrl:n.ctrlKey,alt:n.altKey,shift:n.shiftKey};t&&this._keyPressed(t,n.target,i,n)===!1&&n.preventDefault()}}))}this._trigger("create")},h);n.fn[f]=function(r){for(var w,p=r,u,y=0;y<this.length;y++){var s=n(this[y]),l=s.data(f),b=l&&s.hasClass(v),a=null;if(this.length>0&&n.isPlainObject(p)&&(r=t.copyObject({},p)),!b){h.prototype._requiresID!==!0||n(this[y]).attr("id")||s.attr("id",c("ejControl_"));r&&typeof r!="object"?e(f+": methods/properties can be accessed only after plugin creation"):(h.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in h.prototype.defaults&&f!="ejChart"&&(!r||"locale"in r?t.isNullOrUndefined(r)&&(r={},r.locale=t.setCulture().name):r.locale=t.setCulture().name),new h(s,r));continue}if(r)if(u=[].slice.call(arguments,1),this.length>0&&u[0]&&p==="option"&&n.isPlainObject(u[0])&&(u[0]=t.copyObject({},u[0])),n.isPlainObject(r))l.setModel(r);else if((r.indexOf("_")===0||t.isNullOrUndefined(a=t.getObject(r,l)))&&r.indexOf("model.")!==0)e(o+": function/property - "+r+" does not exist");else{if(!a||!n.isFunction(a)){if(arguments.length==1)return a;l.option(r,arguments[1]);continue}if(w=a.apply(l,u),w!==i)return w}}return f.indexOf("ejm")!=-1&&t.widget.registerInstance(s,f,o,h.prototype),this};t.widget.register(f,o,h.prototype);t.loadLocale(f)};t.loadLocale=function(i){for(var f=t.locales,r=0,u=f.length;r<u;r++)n.fn["Locale_"+f[r]](i)};n.extend(t.widget,function(){var n={},i=[],r=function(i,r,u){t.isNullOrUndefined(n[i])||e("ej.widget : The widget named "+i+" is trying to register twice.");n[i]={name:i,className:r,proto:u};t.widget.extensions&&t.widget.extensions.registerWidget(i)},u=function(n,t,r,u){i.push({element:n,pluginName:t,className:r,proto:u})};return{register:r,registerInstance:u,registeredWidgets:n,registeredInstances:i}}());t.widget.destroyAll=function(n){var u,r,t,i;if(n&&n.length)for(u=0;u<n.length;u++)if(r=n.eq(u).data(),t=r.ejWidgets,t&&t.length)for(i=0;i<t.length;i++)r[t[i]]&&r[t[i]].destroy&&r[t[i]].destroy()};t.cookie={get:function(n){var t=RegExp(n+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:i},set:function(n,t,i){typeof t=="object"&&(t=JSON.stringify(t));t=escape(t)+(i==null?"":"; expires="+i.toUTCString());document.cookie=n+"="+t}};u={getActionFromCode:function(n,t,i,r,f){var s,o,e;i=i||!1;r=r||!1;f=f||!1;for(s in n)if(s!=="focus")for(o=u.getKeyObject(n[s]),e=0;e<o.length;e++)if(t===o[e].code&&i==o[e].isCtrl&&r==o[e].isShift&&f==o[e].isAlt)return s;return null},getKeyObject:function(t){for(var f,o,e,s={isCtrl:!1,isShift:!1,isAlt:!1},c=n.extend(!0,{},s),r=t.split(","),h=[],i=0;i<r.length;i++){if(f=null,r[i].indexOf("+")!=-1)for(o=r[i].split("+"),e=0;e<o.length;e++)f=u.getResult(n.trim(o[e]),s);else f=u.getResult(n.trim(r[i]),n.extend(!0,{},c));h.push(f)}return h},getResult:function(n,t){return n==="ctrl"?t.isCtrl=!0:n==="shift"?t.isShift=!0:n==="alt"?t.isAlt=!0:t.code=parseInt(n,10),t}};t.getScrollableParents=function(t){return n(t).parentsUntil("html").filter(function(){return n(this).css("overflow")!="visible"}).add(n(window))};t.browserInfo=function(){var i={},r=[],e={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i},o,s,f,u;for(o in e)if(e.hasOwnProperty(o)&&(r=navigator.userAgent.match(e[o]),r)){if(i.name=r[1].toLowerCase()=="opr"?"opera":r[1].toLowerCase(),i.version=r[2],i.culture={},i.culture.name=i.culture.language=navigator.language||navigator.userLanguage,typeof t.globalize!="undefined"){for(s=t.preferredCulture().name,f=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),u=0;navigator.languages&&u<navigator.languages.length;u++)if(f=t.preferredCulture(navigator.languages[u]),f.language==navigator.languages[u])break;t.preferredCulture(s);n.extend(!0,i.culture,f)}!navigator.userAgent.match(/Trident\/7\./)||(i.name="msie");break}return i.isMSPointerEnabled=i.name=="msie"&&i.version>9&&window.navigator.msPointerEnabled,i.pointerEnabled=window.navigator.pointerEnabled,i};t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"};t.event=function(t,i,r){return n.extend(r||{},{type:t,model:i,cancel:!1})};t.proxy=function(n,t,i){return!n||typeof n!="function"?null:"on"in n&&t?i?n.on(t,i):n.on(t):function(){var r=i?[i]:[];return r.push.apply(r,arguments),n.apply(t||this,r)}};t.hasStyle=function(n){var r=document.documentElement.style,i,t;if(n in r)return!0;for(i=["ms","Moz","Webkit","O","Khtml"],n=n[0].toUpperCase()+n.slice(1),t=0;t<i.length;t++)if(i[t]+n in r)return!0;return!1};Array.prototype.indexOf=Array.prototype.indexOf||function(n){var i=this.length,t;if(i===0)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===n)return t;return-1};String.prototype.startsWith=String.prototype.startsWith||function(n){return this.slice(0,n.length)===n};var r=t.copyObject=function(n,u){var h=2,c,f,s,o,e,l;for(typeof n!="boolean"&&(h=1),s=[].slice.call(arguments,h),h===1&&(u=n,n=i),o=0;o<s.length;o++)for(e in s[o])if(c=u[e],f=s[o][e],f!==i&&c!==f&&s[o]!==f&&u!==f)if(f instanceof Array)if(o===0&&n)for(u[e]=[],l=0;l<f.length;l++)r(!0,u[e],f);else u[e]=f.slice();else t.isPlainObject(f)?(u[e]=c||{},n?r(n,u[e],f):r(u[e],f)):u[e]=f;return u},s=function(){return this},h=0,c=function(n){return n+h++};t.template={};t.template.render=t.template["text/x-jsrender"]=function(t,i,r,u,f){i.slice(0,1)!=="#"&&(i=["<div>",i,"<\/div>"].join(""));var e={prop:f,index:u};return n(i).render(r,e)};t.isPlainObject=function(n){if(!n||t.DataManager!==i&&n instanceof t.DataManager||typeof n!="object"||n.nodeType||jQuery.isWindow(n))return!1;try{if(n.constructor&&!n.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(f){return!1}var r,u=t.support.isOwnLast;for(r in n)if(u)break;return r===i||n.hasOwnProperty(r)};f=!1;t.util.valueFunction=function(n){return function(r,u){var e=t.getObject(n,this.model);if(f===!1&&(f=t.getObject("observables.getValue",t.widget)),r===i)return t.isNullOrUndefined(f)?typeof e=="function"?e.call(this):e:f(e,u);typeof e=="function"?(this["ob.values"][n]=r,e.call(this,r)):t.createObject(n,r,this.model)}};t.util.getVal=function(n){return typeof n=="function"?n():n};t.support={isOwnLast:function(){var n=function(){this.a=1},t;n.prototype.b=1;for(t in new n)return t==="b"}(),outerHTML:function(){return document.createElement("div").outerHTML!==i}()};e=t.throwError=function(n){try{throw new Error(n);}catch(t){throw t.message+"\n"+t.stack;}};t.getRandomValue=function(n,r){var u,f;return n===i||r===i?t.throwError("Min and Max values are required for generating a random number"):("crypto"in window&&"getRandomValues"in crypto?(f=new Uint16Array(1),window.crypto.getRandomValues(f),u=f[0]%(r-n)+n):u=Math.random()*(r-n)+n,u|0)};t.extensions={};t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(n){var t=$(this);$.each(n,function(n,i){i&&i.specified&&t.attr(i.name,i.value)})};$.fn.removeEleAttrs=function(n){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,r){r&&r.specified&&n.test(r.name)&&t.removeAttr(r.name)})})};$.fn.attrNotStartsWith=function(n){var u=this,r=[],t;for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++)if(t[i]&&t[i].specified&&n.test(t[i].name))continue;else r.push(t[i]);return r};$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var n=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&i.value===""&&n.removeAttr(i.name)})})};$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:ej.userAgent()!==!1,pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles});$.extend($.expr[":"],{attrNotStartsWith:function(n,t,i){for(var u=n.attributes,r=0;r<u.length;r++)if(u[r].nodeName.indexOf(i[3])===0)return!1;return!0}});var n=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return n.apply(this,arguments)}}(),function(n){function e(n,t){return n.indexOf(t)===0}function s(n,t){return n.substr(n.length-t.length)===t}function u(n){return(n+"").replace(b,"")}function nt(n){return isNaN(n)?NaN:Math[n<0?"ceil":"floor"](n)}function o(n,t,i){for(var r=n.length;r<t;r++)n=i?"0"+n:n+"0";return n}function h(n,t,i){var r=t["-"],u=t["+"],f;switch(i){case"n -":r=" "+r;u=" "+u;case"n-":s(n,r)?f=["-",n.substr(0,n.length-r.length)]:s(n,u)&&(f=["+",n.substr(0,n.length-u.length)]);break;case"- n":r+=" ";u+=" ";case"-n":e(n,r)?f=["-",n.substr(r.length)]:e(n,u)&&(f=["+",n.substr(u.length)]);break;case"(n)":e(n,"(")&&s(n,")")&&(f=["-",n.substr(1,n.length-2)])}return f||["",n]}function tt(n,t,i){var l=i.groupSizes||[3],c=l[0],a=1,p=Math.pow(10,t),v=Math.round(n*p)/p,w;isFinite(v)||(v=n);n=v;var r=n+"",u="",e=r.split(/e/i),f=e.length>1?parseInt(e[1],10):0;r=e[0];e=r.split(".");r=e[0];u=e.length>1?e[1]:"";f>0?(u=o(u,f,!1),r+=u.slice(0,f),u=u.substr(f)):f<0&&(f=-f,r=o(r,f+1,!0),u=r.slice(-f,r.length)+u,r=r.slice(0,-f));w=i["."]||".";u=t>0?w+(u.length>t?u.slice(0,t):o(u,t)):"";for(var s=r.length-1,y=i[","]||",",h="";s>=0;){if(c===0||c>s)return r.slice(0,s+1)+(h.length?y+h+u:u);h=r.slice(s-c+1,s+1)+(h.length?y+h:"");s-=c;a<l.length&&(c=l[a],a++)}return r.slice(0,s+1)+y+h+u}function it(n,t,i){var s,r;if(!t||t==="i")return i.name.length?n.toLocaleString():n.toString();t=t||"D";var e=i.numberFormat,u=Math.abs(n),f=-1,h;t.length>1&&(f=parseInt(t.slice(1),10));s=t.charAt(0).toUpperCase();switch(s){case"D":h="n";u=nt(u);f!==-1&&(u=o(""+u,f,!0));n<0&&(u=-u);break;case"N":r=e;r.pattern=r.pattern||["-n"];case"C":r=r||e.currency;r.pattern=r.pattern||["-$n","$n"];case"P":r=r||e.percent;r.pattern=r.pattern||["-n %","n %"];h=n<0?r.pattern[0]||"-n":r.pattern[1]||"n";f===-1&&(f=r.decimals);u=tt(u*(s==="P"?100:1),f,r);break;default:throw"Bad number format specifier: "+s;}return rt(u,h,e)}function rt(n,t,i){for(var f=/n|\$|-|%/g,r="",e,u;;){if(e=f.lastIndex,u=f.exec(t),r+=t.slice(e,u?u.index:t.length),!u)break;switch(u[0]){case"n":r+=n;break;case"$":r+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(n)&&(r+=i["-"]||"-");break;case"%":r+=i.percent.symbol||"%"}}return r}function a(n,t,i){var p,o,s,r,w,tt,b,nt,it,c,rt;typeof i=="string"&&(t=i,i=10);t=ej.globalize.findCulture(t);var l=NaN,f=t.numberFormat,y=t.numberFormat.pattern[0];if(n=n.replace(/ /g,""),n.indexOf(t.numberFormat.currency.symbol)>-1?(n=n.replace(t.numberFormat.currency.symbol||"$",""),n=n.replace(t.numberFormat.currency["."]||".",t.numberFormat["."]||"."),y=u(t.numberFormat.currency.pattern[0].replace("$",""))):n.indexOf(t.numberFormat.percent.symbol)>-1&&(n=n.replace(t.numberFormat.percent.symbol||"%",""),n=n.replace(t.numberFormat.percent["."]||".",t.numberFormat["."]||"."),y=u(t.numberFormat.percent.pattern[0].replace("%",""))),n=u(n),k.test(n))l=parseFloat(n,"",i);else if(d.test(n))l=parseInt(n,16);else{var a=h(n,f,y),v=a[0],e=a[1];v===""&&f.pattern[0]!=="-n"&&(a=h(n,f,"-n"),v=a[0],e=a[1]);v=v||"+";s=e.indexOf("e");s<0&&(s=e.indexOf("E"));s<0?(o=e,p=null):(o=e.substr(0,s),p=e.substr(s+1));tt=f["."]||".";b=o.indexOf(tt);b<0?(r=o,w=null):(r=o.substr(0,b),w=o.substr(b+tt.length));nt=f[","]||",";r=r.split(nt).join("");it=nt.replace(/\u00A0/g," ");nt!==it&&(r=r.split(it).join(""));c=v+r;w!==null&&(c+="."+w);p!==null&&(rt=h(p,f,y),c+="e"+(rt[0]||"+")+rt[1]);!i&&g.test(c)?l=parseFloat(c):i&&(l=parseInt(c,i))}return l}function i(n,t,i){return n<t||n>i}function ut(n,t){var u=new Date,i,r;return t<100&&(i=n.twoDigitYearMax,i=typeof i=="string"?(new Date).getFullYear()%100+parseInt(i,10):i,r=u.getFullYear(),t+=r-r%100,t>i&&(t-=100)),t}function f(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1}function c(n){return n.split("Â ").join(" ").toUpperCase()}function r(n){for(var i=[],t=0,r=n.length;t<r;t++)i[t]=c(n[t]);return i}function ft(n,t,i){var u,o=n.days,e=n._upperDays;return e||(n._upperDays=e=[r(o.names),r(o.namesAbbr),r(o.namesShort)]),t=c(t),i?(u=f(e[1],t),u===-1&&(u=f(e[2],t))):u=f(e[0],t),u}function et(n,t,i){var s=n.months,h=n.monthsGenitive||n.months,u=n._upperMonths,o=n._upperMonthsGen,e;return u||(n._upperMonths=u=[r(s.names),r(s.namesAbbr)],n._upperMonthsGen=o=[r(h.names),r(h.namesAbbr)]),t=c(t),e=f(i?u[1]:u[0],t),e<0&&(e=f(i?o[1]:o[0],t)),e}function l(n,t){for(var r,f=0,i=!1,u=0,e=n.length;u<e;u++)r=n.charAt(u),r=="'"?(i?t.push("'"):f++,i=!1):r=="\\"?(i&&t.push("\\"),i=!i):(t.push(r),i=!1);return f}function ot(n,t,i,r){if(!n)return null;var u=0,f=0,e=null;t=t.split("");length=t.length;for(var o=function(n){for(var i=0;t[u]===n;)i++,u++;return i>0&&(u-=1),i},s=function(t){var r=new RegExp("^\\d{1,"+t+"}"),i=n.substr(f,t).match(r);return i?(i=i[0],f+=i.length,parseInt(i,10)):null},h=function(t,i){for(var r=0,s=t.length,e,o,u;r<s;r++)if(e=t[r],o=e.length,u=n.substr(f,o),i&&(u=u.toLowerCase()),u==e)return f+=o,r+1;return null},c=function(n){for(var t=0,r=n.length,i=[];t<r;t++)i[t]=(n[t]+"").toLowerCase();return i},l=function(n){var t={};for(var i in n)t[i]=c(n[i]);return t};u<length;u++)ch=t[u],ch==="d"&&(count=o("d"),r._lowerDays||(r._lowerDays=l(r.days)),e=count<3?s(2):h(r._lowerDays[count==3?"namesAbbr":"names"],!0));return e}function v(n,t){t=t||"F";var i,u=n.patterns,r=t.length;if(r===1){if(i=u[t],!i)throw"Invalid date format string '"+t+"'.";t=i}else r===2&&t.charAt(0)==="%"&&(t=t.charAt(1));return t}function y(n,r,f){var w,yt,h,g,nt,s,wt,b,ct;n=u(n);r=u(r);var o=f.calendar,lt=ej.globalize._getDateParseRegExp(o,r),at=new RegExp(lt.regExp).exec(n);if(at===null)return null;var vt=lt.groups,y=null,a=null,v=null,tt=null,l=0,p,it=0,rt=0,st=0,k=null,ht=!1;for(w=0,yt=vt.length;w<yt;w++)if(h=at[w+1],h){var pt=vt[w],d=pt.length,c=parseInt(h,10);switch(pt){case t.DAY_OF_MONTH_DOUBLE_DIGIT:case t.DAY_OF_MONTH_SINGLE_DIGIT:if(v=c,i(v,1,31))return null;break;case t.MONTH_THREE_LETTER:case t.MONTH_FULL_NAME:if(a=et(o,h,d===3),i(a,0,11))return null;break;case t.MONTH_SINGLE_DIGIT:case t.MONTH_DOUBLE_DIGIT:if(a=c-1,i(a,0,11))return null;break;case t.YEAR_SINGLE_DIGIT:case t.YEAR_DOUBLE_DIGIT:case t.YEAR_FULL:if(y=d<4?ut(o,c):c,i(y,0,9999))return null;break;case t.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case t.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(l=c,l===12&&(l=0),i(l,0,11))return null;break;case t.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case t.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(l=c,i(l,0,23))return null;break;case t.MINUTES_SINGLE_DIGIT:case t.MINUTES_DOUBLE_DIGIT:if(it=c,i(it,0,59))return null;break;case t.SECONDS_SINGLE_DIGIT:case t.SECONDS_DOUBLE_DIGIT:if(rt=c,i(rt,0,59))return null;break;case t.MERIDIAN_INDICATOR_FULL:case t.MERIDIAN_INDICATOR_SINGLE:if(ht=o.PM&&(h===o.PM[0]||h===o.PM[1]||h===o.PM[2]),!ht&&(!o.AM||h!==o.AM[0]&&h!==o.AM[1]&&h!==o.AM[2]))return null;break;case t.DECISECONDS:case t.CENTISECONDS:case t.MILLISECONDS:if(st=c*Math.pow(10,3-d),i(st,0,999))return null;break;case t.DAY_OF_WEEK_THREE_LETTER:v=ot(n,r,f,o);break;case t.DAY_OF_WEEK_FULL_NAME:if(ft(o,h,d===3),i(tt,0,6))return null;break;case t.TIME_ZONE_OFFSET_FULL:if((g=h.split(/:/),g.length!==2)||(p=parseInt(g[0],10),i(p,-12,13))||(nt=parseInt(g[1],10),i(nt,0,59)))return null;k=p*60+(e(h,"-")?-nt:nt);break;case t.TIME_ZONE_OFFSET_SINGLE_DIGIT:case t.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(p=c,i(p,-12,13))return null;k=p*60}}if(s=new Date,b=o.convert,wt=b?b.fromGregorian(s)[0]:s.getFullYear(),y===null&&(y=wt),a===null&&(a=0),v===null&&(v=1),b){if(s=b.toGregorian(y,a,v),s===null)return null}else if((s.setFullYear(y,a,v),s.getDate()!==v)||tt!==null&&s.getDay()!==tt)return null;return ht&&l<12&&(l+=12),s.setHours(l,it,rt,st),k!==null&&(ct=s.getMinutes()-(k+s.getTimezoneOffset()),s.setHours(s.getHours()+parseInt(ct/60,10),ct%60)),s}function p(n,i,r){function o(n,t){var i,r=n+"";return t>1&&r.length<t?(i=it[t-2]+r,i.substr(i.length-t,t)):r}function ut(){return a||d?a:(a=rt.test(i),d=!0,a)}var e=r.calendar,b=e.convert,u,k,w,f,tt,h;if(!i||!i.length||i==="i")return r&&r.name.length?b?p(n,e.patterns.F,r):n.toLocaleString():n.toString();k=i==="s";i=v(e,i);u=[];var s,it=["0","00","000"],a,d,rt=/([^d]|^)(d|dd)([^d]|$)/g,g=0,nt=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g,c;for(!k&&b&&(c=b.fromGregorian(n));;){var ft=nt.lastIndex,y=nt.exec(i),et=i.slice(ft,y?y.index:i.length);if(g+=l(et,u),!y)break;if(g%2){u.push(y[0]);continue}w=y[0];f=w.length;switch(w){case t.DAY_OF_WEEK_THREE_LETTER:case t.DAY_OF_WEEK_FULL_NAME:tt=f===3?e.days.namesAbbr:e.days.names;u.push(tt[n.getDay()]);break;case t.DAY_OF_MONTH_SINGLE_DIGIT:case t.DAY_OF_MONTH_DOUBLE_DIGIT:a=!0;u.push(o(c?c[2]:n.getDate(),f));break;case t.MONTH_THREE_LETTER:case t.MONTH_FULL_NAME:h=c?c[1]:n.getMonth();u.push(e.monthsGenitive&&ut()?e.monthsGenitive[f===3?"namesAbbr":"names"][h]:e.months[f===3?"namesAbbr":"names"][h]);break;case t.MONTH_SINGLE_DIGIT:case t.MONTH_DOUBLE_DIGIT:u.push(o((c?c[1]:n.getMonth())+1,f));break;case t.YEAR_SINGLE_DIGIT:case t.YEAR_DOUBLE_DIGIT:case t.YEAR_FULL:h=c?c[0]:n.getFullYear();f<4&&(h=h%100);u.push(o(h,f));break;case t.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case t.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:s=n.getHours()%12;s===0&&(s=12);u.push(o(s,f));break;case t.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case t.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:u.push(o(n.getHours(),f));break;case t.MINUTES_SINGLE_DIGIT:case t.MINUTES_DOUBLE_DIGIT:u.push(o(n.getMinutes(),f));break;case t.SECONDS_SINGLE_DIGIT:case t.SECONDS_DOUBLE_DIGIT:u.push(o(n.getSeconds(),f));break;case t.MERIDIAN_INDICATOR_SINGLE:case t.MERIDIAN_INDICATOR_FULL:h=n.getHours()<12?e.AM?e.AM[0]:" ":e.PM?e.PM[0]:" ";u.push(f===1?h.charAt(0):h);break;case t.DECISECONDS:case t.CENTISECONDS:case t.MILLISECONDS:u.push(o(n.getMilliseconds(),3).substr(0,f));break;case t.TIME_ZONE_OFFSET_SINGLE_DIGIT:case t.TIME_ZONE_OFFSET_DOUBLE_DIGIT:s=n.getTimezoneOffset()/60;u.push((s<=0?"+":"-")+o(Math.floor(Math.abs(s)),f));break;case t.TIME_ZONE_OFFSET_FULL:s=n.getTimezoneOffset()/60;u.push((s<=0?"+":"-")+o(Math.floor(Math.abs(s)),2)+":"+o(Math.abs(n.getTimezoneOffset()%60),2));break;case t.DATE_SEPARATOR:u.push(e["/"]||"/");break;default:throw"Invalid date format pattern '"+w+"'.";}}return u.join("")}function w(n,t){return t.length?w(n[t[0]],t.slice(1)):n}var t;ej.globalize={};ej.cultures={};ej.cultures["default"]=ej.cultures["en-US"]=n.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,week:{name:"Week",nameAbbr:"Wek",nameShort:"Wk"},days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]);ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var b=/^\s+|\s+$/g,k=/^[+-]?infinity$/i,d=/^0x[a-f0-9]+$/i,g=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/;t={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"};ej.globalize._getDateParseRegExp=function(n,i){var e=n._parseRegExp,s,w,o,b,r,k,d;if(e){if(s=e[i],s)return s}else n._parseRegExp=e={};for(var h=v(n,i).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),u=["^"],a=[],c=0,y=0,p=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g,f;(f=p.exec(h))!==null;){if(w=h.slice(c,f.index),c=p.lastIndex,y+=l(w,u),y%2){u.push(f[0]);continue}o=f[0];b=o.length;switch(o){case t.DAY_OF_WEEK_THREE_LETTER:case t.DAY_OF_WEEK_FULL_NAME:case t.MONTH_FULL_NAME:case t.MONTH_THREE_LETTER:r="(\\D+)";break;case t.MERIDIAN_INDICATOR_FULL:case t.MERIDIAN_INDICATOR_SINGLE:r="(\\D*)";break;case t.YEAR_FULL:case t.MILLISECONDS:case t.CENTISECONDS:case t.DECISECONDS:r="(\\d{"+b+"})";break;case t.DAY_OF_MONTH_DOUBLE_DIGIT:case t.DAY_OF_MONTH_SINGLE_DIGIT:case t.MONTH_DOUBLE_DIGIT:case t.MONTH_SINGLE_DIGIT:case t.YEAR_DOUBLE_DIGIT:case t.YEAR_SINGLE_DIGIT:case t.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case t.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case t.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case t.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case t.MINUTES_DOUBLE_DIGIT:case t.MINUTES_SINGLE_DIGIT:case t.SECONDS_DOUBLE_DIGIT:case t.SECONDS_SINGLE_DIGIT:r="(\\d\\d?)";break;case t.TIME_ZONE_OFFSET_FULL:r="([+-]?\\d\\d?:\\d{2})";break;case t.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case t.TIME_ZONE_OFFSET_SINGLE_DIGIT:r="([+-]?\\d\\d?)";break;case t.DATE_SEPARATOR:r="(\\"+n["/"]+")";break;default:throw"Invalid date format pattern '"+o+"'.";}r&&u.push(r);a.push(f[0])}return l(h.slice(c),u),u.push("$"),k=u.join("").replace(/\s+/g,"\\s+"),d={regExp:k,groups:a},e[i]=d};ej.globalize.addCulture=function(t,i){ej.cultures[t]=n.extend(!0,n.extend(!0,{},ej.cultures["default"],i),ej.cultures[t]);ej.cultures[t].calendar=ej.cultures[t].calendars.standard};ej.globalize.preferredCulture=function(n){return n=typeof n!="undefined"&&typeof n==typeof this.cultureObject?n.name:n,this.cultureObject=ej.globalize.findCulture(n),this.cultureObject};ej.globalize.setCulture=function(n){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(n)),n=typeof n!="undefined"&&typeof n==typeof this.globalCultureObject?n.name:n,n&&(this.globalCultureObject=ej.globalize.findCulture(n)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject};ej.globalize.culture=function(n){ej.cultures.current=ej.globalize.findCulture(n)};ej.globalize.findCulture=function(t){var f,i,e,u,r,o;if(t){if(n.isPlainObject(t)&&t.numberFormat&&(f=t),typeof t=="string"){if(i=ej.cultures,i[t])return i[t];if(t.indexOf("-")>-1){if(e=t.split("-")[0],i[e])return i[e]}else for(u=n.map(i,function(n){return n}),r=0;r<u.length;r++)if(o=u[r].name.split("-")[0],o===t)return u[r];return ej.cultures["default"]}}else f=ej.cultures.current||ej.cultures["default"];return f};ej.globalize.format=function(n,t,i){var r=ej.globalize.findCulture(i);return typeof n=="number"?n=it(n,t,r):n instanceof Date&&(n=p(n,t,r)),n};ej.globalize.parseInt=function(n,t,i){return t||(t=10),Math.floor(a(n,i,t))};ej.globalize.getISODate=function(n){if(n instanceof Date)return n.toISOString()};ej.globalize.parseFloat=function(n,t,i){return typeof t=="string"&&(i=t,t=10),a(n,i)};ej.globalize.parseDate=function(n,t,i){var r,o,f,u,s,e;if(i=ej.globalize.findCulture(i),t){if(typeof t=="string"&&(t=[t]),t.length)for(u=0,s=t.length;u<s;u++)if(e=t[u],e&&(r=y(n,e,i),r))break}else{f=i.calendar.patterns;for(o in f)if(r=y(n,f[o],i),r)break}return r||null};ej.globalize.getLocalizedConstants=function(t,i){var r,u=t.replace("ej.","").split(".");return r=w(ej,u),n.extend(!0,{},r.Locale["default"],r.Locale[i?i:this.cultureObject.name])};n.extend(ej,ej.globalize)}(jQuery);window.ej=window.Syncfusion=window.Syncfusion||{},function(n,t,i,r){"use strict";var e,nt,tt,y,d,w,h,c,f;t.DataManager=function(i,u,f){if(!(this instanceof t.DataManager))return new t.DataManager(i,u,f);i||(i=[]);f=f||i.adaptor;typeof f=="string"&&(f=new t[f]);var e=[],o=this;return i instanceof Array?e={json:i,offline:!0}:typeof i=="object"?n.isPlainObject(i)?(i.json||(i.json=[]),i.table&&(i.json=this._getJsonFromElement(i.table,i.headerOption)),e={url:i.url,insertUrl:i.insertUrl,removeUrl:i.removeUrl,updateUrl:i.updateUrl,crudUrl:i.crudUrl,batchUrl:i.batchUrl,json:i.json,headers:i.headers,accept:i.accept,data:i.data,async:i.async,timeTillExpiration:i.timeTillExpiration,cachingPageSize:i.cachingPageSize,enableCaching:i.enableCaching,requestType:i.requestType,key:i.key,crossDomain:i.crossDomain,antiForgery:i.antiForgery,jsonp:i.jsonp,dataType:i.dataType,offline:i.offline!==r?i.offline:i.adaptor=="remoteSaveAdaptor"||i.adaptor instanceof t.remoteSaveAdaptor?!1:i.url?!1:!0,requiresFormat:i.requiresFormat}):(i.jquery||pt(i))&&(e={json:this._getJsonFromElement(i),offline:!0,table:i}):typeof i=="string"&&(e={url:i,offline:!1,dataType:"json",json:[]}),e.requiresFormat!==r||t.support.cors||(e.requiresFormat=c(e.crossDomain)?!0:e.crossDomain),e.antiForgery&&this.antiForgeryToken(),e.dataType===r&&(e.dataType="json"),this.dataSource=e,this.defaultQuery=u,e.url&&e.offline&&!e.json.length?(this.isDataAvailable=!1,this.adaptor=f||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(u||t.Query()).done(function(n){o.dataSource.offline=!0;o.isDataAvailable=!0;e.json=n.result;o.adaptor=new t.JsonAdaptor})):this.adaptor=e.offline?new t.JsonAdaptor:new t.ODataAdaptor,!e.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(e.jsonp="callback"),this.adaptor=f||this.adaptor,e.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,e.timeTillExpiration,e.cachingPageSize)),this};t.DataManager.prototype={setDefaultQuery:function(n){this.defaultQuery=n},executeQuery:function(i,u,e,o){var s,h,c;return typeof i=="function"&&(o=e,e=u,u=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||f("DataManager - executeQuery() : A query is required to execute"),s=n.Deferred(),s.then(u,e,o),h={query:i},this.dataSource.offline||this.dataSource.url==r?t.isNullOrUndefined(this.dataSource.async)||this.dataSource.async!=!1?d(function(){this._localQueryProcess(i,h,s)},this):this._localQueryProcess(i,h,s):(c=this.adaptor.processQuery(this,i),t.isNullOrUndefined(c.url)?d(function(){h=this._getDeferedArgs(i,c,h);s.resolveWith(this,[h])},this):this._makeRequest(c,s,h,i)),s.promise()},_localQueryProcess:function(n,t,i){var r=this.executeLocal(n);t=this._getDeferedArgs(n,r,t);i.resolveWith(this,[t])},_getDeferedArgs:function(n,t,i){return n._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=rt(n._fromTable,i.result,this),i.getKnockoutModel=ut(i.result),i},executeLocal:function(i){var e,r;if(this.defaultQuery||i instanceof t.Query||f("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||f("DataManager - executeLocal() : Json data is required to execute"),i=i||this.defaultQuery,e=this.adaptor.processQuery(this,i),i._subQuery){var o=i._subQuery._fromTable,s=i._subQuery._lookup,u=i._requiresCount?e.result:e;for(s&&s instanceof Array&&k(i._subQuery._fKey,o,u,s,i._subQuery._key),r=0;r<u.length;r++)u[r][o]instanceof Array&&(u[r]=n.extend({},u[r]),u[r][o]=this.adaptor.processResponse(i._subQuery.using(t.DataManager(u[r][o].slice(0))).executeLocal(),this,i))}return this.adaptor.processResponse(e,this,i)},_makeRequest:function(i,r,u,f){var o=!!f._subQuerySelector,c=h(function(n){u.error=n;r.rejectWith(this,[u])},this),l=h(function(n,t,i,e,s,h,c){o||(u.xhr=i,u.count=parseInt(t,10),u.result=n,u.request=e,u.aggregates=h,u.getTableModel=rt(f._fromTable,n,this),u.getKnockoutModel=ut(n),u.actual=s,u.virtualSelectRecords=c,r.resolveWith(this,[u]))},this),a=h(function(t,i){var r=n.Deferred(),h={parent:u},e,s;return f._subQuery._isChild=!0,e=this.adaptor.processQuery(this,f._subQuery,t?this.adaptor.processResponse(t):i),s=this._makeRequest(e,r,h,f._subQuery),o||r.then(function(n){t&&(k(f._subQuery._fKey,f._subQuery._fromTable,t,n,f._subQuery._key),l(t))},c),s},this),v=w(function(n,i,r,u){r.getResponseHeader("Content-Type").indexOf("xml")==-1&&t.dateParse&&(n=t.parseJSON(n));var e=this.adaptor.processResponse(n,this,f,r,u),s=0,h=null,c=n.virtualSelectRecords;if(f._requiresCount&&(s=e.count,h=e.aggregates,e=e.result),!f._subQuery){l(e,s,r,u,n,h,c);return}o||a(e)},this),e=n.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,beforeSend:h(this._beforeSend,this),processData:!1,success:v,error:c},i),s;return"async"in this.dataSource&&(e.async=this.dataSource.async),e=n.ajax(e),o&&(s=f._subQuerySelector.call(this,{query:f._subQuery,parent:f}),s&&s.length?(e=n.when(e,a(null,s)),e.then(w(function(n,t,i){var r=this.adaptor.processResponse(n[0],this,f,n[2],i[0]),e=0,u;f._requiresCount&&(e=r.count,r=r.result);u=this.adaptor.processResponse(t[0],this,f._subQuery,t[2],i[1]);e=0;f._subQuery._requiresCount&&(e=u.count,u=u.result);k(f._subQuery._fKey,f._subQuery._fromTable,r,u,f._subQuery._key);o=!1;l(r,e,n[2])},this),c)):o=!1),e},_beforeSend:function(n,t){var i,f,r,u;for(this.adaptor.beforeSend(this,n,t),i=this.dataSource.headers,r=0;i&&r<i.length;r++){f=[];for(u in i[r])f.push(u),n.setRequestHeader(u,i[r][u])}},saveChanges:function(i,r,u,f){var s,o,e;return(u instanceof t.Query&&(f=u,u=null),s={url:u,key:r||this.dataSource.key},o=this.adaptor.batchRequest(this,i,s,f),this.dataSource.offline)?o:(e=n.Deferred(),n.ajax(n.extend({beforeSend:h(this._beforeSend,this),success:w(function(n,t,u,f){e.resolveWith(this,[this.adaptor.processResponse(n,this,null,u,f,i,r)])},this),error:function(n){e.rejectWith(this,[{error:n}])}},o)),e.promise())},insert:function(i,r,f){var o,e;return(i=u.replacer(i),r instanceof t.Query&&(f=r,r=null),o=this.adaptor.insert(this,i,r,f),this.dataSource.offline)?o:(e=n.Deferred(),n.ajax(n.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:h(this._beforeSend,this),success:w(function(n,i,r,f){try{t.isNullOrUndefined(n)?n=[]:u.parseJson(n)}catch(o){n=[]}n=this.adaptor.processResponse(u.parseJson(n),this,null,r,f);e.resolveWith(this,[{record:n,dataManager:this}])},this),error:function(n){e.rejectWith(this,[{error:n,dataManager:this}])}},o)),e.promise())},antiForgeryToken:function(){var i;return t.isNullOrUndefined(n("input[name='_ejRequestVerifyToken']").val())?i=t.buildTag("input","","",{type:"hidden",name:"_ejRequestVerifyToken",value:t.getGuid()}).appendTo("body"):n("input[name='_ejRequestVerifyToken']").val(t.getGuid()),t.cookie.set("_ejRequestVerifyToken",n("input[name='_ejRequestVerifyToken']").val()),{name:"_ejRequestVerifyToken",value:n("input[name='_ejRequestVerifyToken']").val()}},remove:function(i,r,f,e){var s,o;return(typeof r=="object"&&(r=r[i]),f instanceof t.Query&&(e=f,f=null),s=this.adaptor.remove(this,i,r,f,e),this.dataSource.offline)?s:(o=n.Deferred(),n.ajax(n.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:w(function(n,i,r,f){try{t.isNullOrUndefined(n)?n=[]:u.parseJson(n)}catch(e){n=[]}n=this.adaptor.processResponse(u.parseJson(n),this,null,r,f);o.resolveWith(this,[{record:n,dataManager:this}])},this),error:function(n){o.rejectWith(this,[{error:n,dataManager:this}])}},s)),o.promise())},update:function(i,r,f,e){var s,o;return(r=u.replacer(r),f instanceof t.Query&&(e=f,f=null),s=this.adaptor.update(this,i,r,f,e),this.dataSource.offline)?s:(o=n.Deferred(),n.ajax(n.extend({contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:w(function(n,i,r,f){try{t.isNullOrUndefined(n)?n=[]:u.parseJson(n)}catch(e){n=[]}n=this.adaptor.processResponse(u.parseJson(n),this,null,r,f);o.resolveWith(this,[{record:n,dataManager:this}])},this),error:function(n){o.rejectWith(this,[{error:n,dataManager:this}])}},s)),o.promise())},_getJsonFromElement:function(i){typeof i=="string"&&(i=n(n(i).html()));i=i.jquery?i[0]:i;var r=i.tagName.toLowerCase();return r!=="table"&&f("ej.DataManager : Unsupported htmlElement : "+r),t.parseTable(i)}};var k=function(n,i,r,u,e){var o,s={},c,h;for(u.result&&(u=u.result),u.GROUPGUID&&f("ej.DataManager: Do not have support Grouping in hierarchy"),o=0;o<u.length;o++)h=t.getObject(n,u[o]),c=s[h]||(s[h]=[]),c.push(u[o]);for(o=0;o<r.length;o++)r[o][i]=s[t.getObject(e||n,r[o])]},l={accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},u={parseJson:function(n){var t=typeof n;return t==="string"?n=JSON.parse(n,u.jsonReviver):n instanceof Array?u.iterateAndReviveArray(n):t==="object"&&u.iterateAndReviveJson(n),n},iterateAndReviveArray:function(n){for(var t=0;t<n.length;t++)typeof n[t]=="object"?u.iterateAndReviveJson(n[t]):n[t]=typeof n[t]!="string"||/^[\s]*\[|^[\s]*\{|\"/g.test(n[t])?u.parseJson(n[t]):u.jsonReviver("",n[t])},iterateAndReviveJson:function(n){var t;for(var i in n)i.startsWith("__")||(t=n[i],typeof t=="object"?t instanceof Array?u.iterateAndReviveArray(t):u.iterateAndReviveJson(t):n[i]=u.jsonReviver(i,t))},jsonReviver:function(n,t){var f=t,r,i;if(typeof t=="string"){if(r=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t),r)return u.replacer(new Date(parseInt(r[1])));/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)&&(t=u.replacer(new Date(t)),isNaN(t)&&(i=f.split(/[^0-9]/),t=u.replacer(new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5]))))}return t},isJson:function(n){return typeof n[0]=="string"?n:t.parseJSON(n)},isGuid:function(n){var t=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(n);return t!=null},replacer:function(n){return t.isPlainObject(n)?u.jsonReplacer(n):n instanceof Array?u.arrayReplacer(n):n instanceof Date?u.jsonReplacer({val:n}).val:n},jsonReplacer:function(n){var i;for(var r in n)(i=n[r],i instanceof Date)&&(n[r]=new Date(+i+t.serverTimezoneOffset*36e5));return n},arrayReplacer:function(n){for(var i=0;i<n.length;i++)t.isPlainObject(n[i])?n[i]=u.jsonReplacer(n[i]):n[i]instanceof Date&&(n[i]=u.jsonReplacer({date:n[i]}).date);return n}};t.isJSON=u.isJson;t.parseJSON=u.parseJson;t.dateParse=!0;t.isGUID=u.isGuid;t.Query=function(n){return(this instanceof t.Query)?(this.queries=[],this._key="",this._fKey="",typeof n=="string"?this._fromTable=n||"":n&&n instanceof Array&&(this._lookup=n),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(n)};t.Query.prototype={key:function(n){return typeof n=="string"&&(this._key=n),this},using:function(n){return n instanceof t.DataManager?(this.dataManagar=n,this):f("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(n,i,r,u){return(n=n||this.dataManagar,n&&n instanceof t.DataManager)?n.executeQuery(this,i,r,u):f("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(n){return(n=n||this.dataManagar,n&&n instanceof t.DataManager)?n.executeLocal(this):f("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var n=new t.Query;return n.queries=this.queries.slice(0),n._key=this._key,n._isChild=this._isChild,n.dataManagar=this.dataManager,n._fromTable=this._fromTable,n._params=this._params.slice(0),n._expands=this._expands.slice(0),n._sortedColumns=this._sortedColumns.slice(0),n._groupedColumns=this._groupedColumns.slice(0),n._subQuerySelector=this._subQuerySelector,n._subQuery=this._subQuery,n._fKey=this._fKey,n._requiresCount=this._requiresCount,n},from:function(n){return typeof n=="string"&&(this._fromTable=n),this},addParams:function(n,i){return typeof i=="function"||t.isPlainObject(i)?typeof i=="function"&&this._params.push({key:n,fn:i}):this._params.push({key:n,value:i}),this},expand:function(n){return this._expands=typeof n=="string"?[].slice.call(arguments,0):n.slice(0),this},where:function(n,i,r,u){i=(i||t.FilterOperators.equal).toLowerCase();var e=null;return typeof n=="string"?e=new t.Predicate(n,i,r,u):n instanceof t.Predicate?e=n:f("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:e}),this},search:function(n,i,r,u){i&&typeof i!="boolean"?typeof i=="string"&&(i=[i]):(i=[],u=i);typeof r=="boolean"&&(u=r,r=null);r=r||t.FilterOperators.contains;r.length<3&&(r=t.data.operatorSymbols[r]);var f=t.data.fnOperators[r]||t.data.fnOperators.processSymbols(r);return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:r,searchKey:n,ignoreCase:u,comparer:f}}),this},sortBy:function(n,i,r){var o=t.sortOrder.Ascending,s,f,u,e;if(typeof n=="string"&&n.toLowerCase().endsWith(" desc")&&(n=n.replace(/ desc$/i,""),i=t.sortOrder.Descending),n instanceof Array){for(u=0;u<n.length;u++)this.sortBy(n[u],i,r);return this}if(typeof i=="boolean"?i=i?t.sortOrder.Descending:t.sortOrder.Ascending:typeof i=="function"&&(o="custom"),i&&typeof i!="string"||(o=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),r)for(s=a(this.queries,"onSortBy"),u=0;u<s.length;u++)if(f=s[u].e.fieldName,typeof f=="string"){if(f===n)return this}else if(f instanceof Array)for(e=0;e<f.length;e++)if(f[e]===n||n.toLowerCase()===f[e]+" desc")return this;return this.queries.push({fn:"onSortBy",e:{fieldName:n,comparer:i,direction:o}}),this},sortByDesc:function(n){return this.sortBy(n,t.sortOrder.Descending)},group:function(n,t){return this.sortBy(n,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:n,fn:t}}),this},page:function(n,t){return this.queries.push({fn:"onPage",e:{pageIndex:n,pageSize:t}}),this},range:function(n,t){return(typeof n!="number"||typeof t!="number")&&f("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:n,end:t}}),this},take:function(n){return typeof n!="number"&&f("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:n}}),this},skip:function(n){return typeof n!="number"&&f("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:n}}),this},select:function(n){return typeof n=="string"&&(n=[].slice.call(arguments,0)),n instanceof Array||f("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:n}}),this},hierarchy:function(n,i){return n&&n instanceof t.Query||f("Query() - hierarchy : query must be instance of ej.Query"),typeof i=="function"&&(this._subQuerySelector=i),this._subQuery=n,this},foreignKey:function(n){return typeof n=="string"&&(this._fKey=n),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(n,t){this.queries.push({fn:"onAggregates",e:{field:t,type:n}})}};t.Adaptor=function(n){this.dataSource=n;this.pvt={};this.init.apply(this,[].slice.call(arguments,1))};t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",antiForgery:"antiForgery"},init:function(){},extend:function(t){var i=function(t){this.dataSource=t;this.options&&(this.options=n.extend({},this.options));this.init.apply(this,[].slice.call(arguments,0));this.pvt={}},u,r;i.prototype=new this.type;i.prototype.type=i;u=i.prototype.base={};for(r in t)i.prototype[r]&&(u[r]=i.prototype[r]);return n.extend(!0,i.prototype,t),i},processQuery:function(){},processResponse:function(n){return n.d?n.d:n},convertToQueryString:function(t){return n.param(t)},type:t.Adaptor};t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(n,t,i){var w=a(t.queries,"onSortBy"),d=a(t.queries,"onGroup"),nt=a(t.queries,"onWhere"),tt=a(t.queries,"onSearch"),it=a(t.queries,"onAggregates"),l=g(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),rt=t._params,b=n.dataSource.url,u,y,p=null,h=this.options,s={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]},f,r,v,k;for(l.onPage?(u=l.onPage,y=e(u.pageIndex,t),p=e(u.pageSize,t),y=(y-1)*p):l.onRange&&(u=l.onRange,y=u.start,p=u.end-u.start),f=0;f<w.length;f++)u=e(w[f].e.fieldName,t),s.sorted.push(o(this,"onEachSort",{name:u,direction:w[f].e.direction},t));for(i&&(u=this.getFiltersFrom(i,t),u&&s.filters.push(o(this,"onEachWhere",u.toJSON(),t))),f=0;f<nt.length;f++){s.filters.push(o(this,"onEachWhere",nt[f].e.toJSON(),t));for(v in s.filters[f])c(s[v])&&delete s[v]}for(f=0;f<tt.length;f++)u=tt[f].e,s.searches.push(o(this,"onEachSearch",{fields:u.fieldNames,operator:u.operator,key:u.searchKey,ignoreCase:u.ignoreCase},t));for(f=0;f<d.length;f++)s.grouped.push(e(d[f].e.fieldName,t));for(f=0;f<it.length;f++)u=it[f].e,s.aggregates.push({type:u.type,field:e(u.field,t)});r={};r[h.from]=t._fromTable;h.expand&&(r[h.expand]=t._expands);r[h.select]=l.onSelect?o(this,"onSelect",e(l.onSelect.fieldNames,t),t):"";r[h.count]=t._requiresCount?o(this,"onCount",t._requiresCount,t):"";r[h.search]=s.searches.length?o(this,"onSearch",s.searches,t):"";r[h.skip]=l.onSkip?o(this,"onSkip",e(l.onSkip.nos,t),t):"";r[h.take]=l.onTake?o(this,"onTake",e(l.onTake.nos,t),t):"";r[h.antiForgery]=n.dataSource.antiForgery?n.antiForgeryToken().value:"";r[h.where]=s.filters.length||s.searches.length?o(this,"onWhere",s.filters,t):"";r[h.sortBy]=s.sorted.length?o(this,"onSortBy",s.sorted,t):"";r[h.group]=s.grouped.length?o(this,"onGroup",s.grouped,t):"";r[h.aggregates]=s.aggregates.length?o(this,"onAggregates",s.aggregates,t):"";r.param=[];o(this,"addParams",{dm:n,query:t,params:rt,reqParams:r});for(v in r)(c(r[v])||r[v]===""||r[v].length===0||v==="params")&&delete r[v];return(h.skip in r&&h.take in r||p===null||(r[h.skip]=o(this,"onSkip",y,t),r[h.take]=o(this,"onTake",p,t)),k=this.pvt,this.pvt={},this.options.requestType==="json")?{data:JSON.stringify(r),url:b,ejPvtData:k,type:"POST",contentType:"application/json; charset=utf-8"}:(u=this.convertToQueryString(r,t,n),u=(n.dataSource.url.indexOf("?")!==-1?"&":"/")+u,{type:"GET",url:u.length?b.replace(/\/*$/,u):b,ejPvtData:k})},convertToQueryString:function(t,i,r){return r.dataSource.url&&r.dataSource.url.indexOf("?")!==-1?n.param(t):"?"+n.param(t)},processResponse:function(n,i,u,f,e,o){var c=e.ejPvtData||{},v=n.groupDs,y,a,h,s,d,w;if(f&&f.getResponseHeader("Content-Type")&&f.getResponseHeader("Content-Type").indexOf("xml")!=-1&&n.nodeType==9)return u._requiresCount?{result:[],count:0}:[];if(y=JSON.parse(e.data),y&&y.action==="batch"&&n.added)return o.added=n.added,o;if(n.d&&(n=n.d),c&&c.aggregates&&c.aggregates.length){var l=c.aggregates,h={},p,k={};for(("count"in n)&&(h.count=n.count),n.result&&(h.result=n.result),n.aggregate&&(n=n.aggregate),s=0;s<l.length;s++)p=t.aggregates[l[s].type],p&&(k[l[s].field+" - "+l[s].type]=p(n,l[s].field));h.aggregates=k;n=h}if(c&&c.groups&&c.groups.length){for(a=c.groups,h={},("count"in n)&&(h.count=n.count),n.aggregates&&(h.aggregates=n.aggregates),n.result&&(n=n.result),s=0;s<a.length;s++)d=null,w=b(a[s],u.queries),t.isNullOrUndefined(v)||(v=t.group(v,a[s],null,w)),n=t.group(n,a[s],c.aggregates,w,d,v);return h.count!=r?h.result=n:h=n,h}return n},onGroup:function(n){this.pvt.groups=n},onAggregates:function(n){this.pvt.aggregates=n},batchRequest:function(n,t,i,r){var u={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""};return r&&this.addParams({dm:n,query:r,params:r._params,reqParams:u}),{type:"POST",url:n.dataSource.batchUrl||n.dataSource.crudUrl||n.dataSource.removeUrl||n.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(u)}},beforeSend:function(){},insert:function(n,t,i,r){var u={value:t,table:i,action:"insert",antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""};return r&&this.addParams({dm:n,query:r,params:r._params,reqParams:u}),{url:n.dataSource.insertUrl||n.dataSource.crudUrl||n.dataSource.url,data:JSON.stringify(u)}},remove:function(n,t,i,r,u){var f={key:i,keyColumn:t,table:r,action:"remove",antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""};return u&&this.addParams({dm:n,query:u,params:u._params,reqParams:f}),{type:"POST",url:n.dataSource.removeUrl||n.dataSource.crudUrl||n.dataSource.url,data:JSON.stringify(f)}},update:function(n,t,i,r,u){var f={value:i,action:"update",keyColumn:t,key:i[t],table:r,antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""};return u&&this.addParams({dm:n,query:u,params:u._params,reqParams:f}),{type:"POST",url:n.dataSource.updateUrl||n.dataSource.crudUrl||n.dataSource.url,data:JSON.stringify(f)}},getFiltersFrom:function(n,i){var r;n instanceof Array&&n.length||f("ej.SubQuery: Array of key values required");var u=i._fKey,e,o=u,h=i._key,s=[],c=typeof n[0]!="object";for(typeof n[0]!="object"&&(o=null),r=0;r<n.length;r++)e=c?n[r]:t.pvt.getObject(h||o,n[r]),s.push(new t.Predicate(u,"==",e));return t.Predicate.or(s)},addParams:function(n){var e=n.dm,u=n.query,o=n.params,i=n.reqParams,r,t;for(i.params={},r=0;t=o[r];r++)i[t.key]&&f("ej.Query: Custom Param is conflicting other request arguments"),i[t.key]=t.value,t.fn&&(i[t.key]=t.fn.call(u,t.key,u,e)),i.params[t.key]=i[t.key]}});t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(n,i,r){var u=t.UrlAdaptor.prototype.processQuery(n,i,r),e=t.parseJSON(u.data),f={};return f.value=e,o(this,"addParams",{dm:n,query:i,params:i._params,reqParams:f}),{data:JSON.stringify(f),url:u.url,ejPvtData:u.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(n){var s=n.dm,o=n.query,h=n.params,i=n.reqParams,u,t,r,e;for(i.params={},u=0;t=h[u];u++)i[t.key]&&f("ej.Query: Custom Param is conflicting other request arguments"),r=t.key,e=t.value,t.fn&&(e=t.fn.call(o,t.key,o,s)),i[r]=e,i.params[r]=i[r]}});t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(n,i,r){var f,u;t.isNullOrUndefined(n)||(this.cacheAdaptor=n);this.pageSize=r;this.guidId=t.getGuid("cacheAdaptor");f={keys:[],results:[]};window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(f));u=this.guidId;t.isNullOrUndefined(i)||setInterval(function(){for(var e,r=t.parseJSON(window.localStorage.getItem(u)),f=[],n=0;n<r.results.length;n++)r.results[n].timeStamp=new Date-new Date(r.results[n].timeStamp),new Date-new Date(r.results[n].timeStamp)>i&&f.push(n);for(e=f,n=0;n<f.length;n++)r.results.splice(f[n],1),r.keys.splice(f[n],1);window.localStorage.removeItem(u);window.localStorage.setItem(u,JSON.stringify(r))},i)},generateKey:function(n,t){var h=a(t.queries,"onSortBy"),c=a(t.queries,"onGroup"),o=a(t.queries,"onWhere"),l=a(t.queries,"onSearch"),v=a(t.queries,"onPage"),s=g(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),y=t._params,r=n,u,i,f,e;for(s.onPage&&(r+=s.onPage.pageIndex),h.forEach(function(n){r+=n.e.direction+n.e.fieldName}),c.forEach(function(n){r+=n.e.fieldName}),l.forEach(function(n){r+=n.e.searchKey}),u=0;u<o.length;u++)if(i=o[u],i.e.isComplex){for(f=t.clone(),f.queries=[],e=0;e<i.e.predicates.length;e++)f.queries.push({fn:"onWhere",e:i.e.predicates[e],filter:t.queries.filter});r+=i.e.condition+this.generateKey(n,f)}else r+=i.e.field+i.e.operator+i.e.value;return r},processQuery:function(n,i){var f=this.generateKey(n.dataSource.url,i),r,u;return(window.localStorage&&(r=t.parseJSON(window.localStorage.getItem(this.guidId))),u=r?r.results[r.keys.indexOf(f)]:null,u!=null&&!this._crudAction&&!this._insertAction)?u:(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0)))},processResponse:function(i,r,u,f,e,o){var h;if(this._insertAction||e&&this.cacheAdaptor.options.batch&&e.url.endsWith(this.cacheAdaptor.options.batch)&&e.type.toLowerCase()==="post")return this.cacheAdaptor.processResponse(i,r,u,f,e,o);var i=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),c=this.generateKey(r.dataSource.url,u),s={};for(window.localStorage&&(s=t.parseJSON(window.localStorage.getItem(this.guidId))),h=n.inArray(c,s.keys),h!=-1&&(s.results.splice(h,1),s.keys.splice(h,1)),s.results[s.keys.push(c)-1]={keys:c,result:i.result,timeStamp:new Date,count:i.count};s.results.length>this.pageSize;)s.results.splice(0,1),s.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(s)),i},update:function(n,t,i,r){return this._crudAction=!0,this.cacheAdaptor.update(n,t,i,r)},insert:function(n,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(n,t,i)},remove:function(n,t,i,r){return this._crudAction=!0,this.cacheAdaptor.remove(n,t,i,r)},batchRequest:function(n,t,i){return this.cacheAdaptor.batchRequest(n,t,i)}});var a=function(n,t){return n.filter(function(n){return n.fn===t})||[]},g=function(n,t){for(var r=n.filter(function(n){return t.indexOf(n.fn)!==-1}),u={},i=0;i<r.length;i++)u[r[i].fn]||(u[r[i].fn]=r[i].e);return u},o=function(n,t,i,r){if(n[t]){var u=n[t](i,r);c(u)||(i=u)}return i};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(n,t){return n.isComplex?this.onComplexPredicate(n,t):this.onPredicate(n,t)},_typeStringQuery:function(n,i,r,u,f){return r.indexOf("'")!=-1&&(r=r.replace(new RegExp(/'/g),"''")),r="'"+r+"'",i&&(u="cast("+u+", 'Edm.String')"),t.isGUID(r)&&(f="guid"),n.ignoreCase&&(f?u:u="tolower("+u+")",r=r.toLowerCase()),{val:r,guid:f,field:u}},onPredicate:function(n,i,r){var f="",o,h,e=n.value,v=typeof e,s=this._p(n.field),l,c,y,a;if(e instanceof Date&&(e="datetime'"+u.replacer(e).toJSON()+"'"),v==="string"&&(c=this._typeStringQuery(n,r,e,s,h),e=c.val,s=c.field,h=c.guid),o=t.data.odBiOperator[n.operator],n.anyCondition!=""&&o)return f+=e.table,f+="/"+n.anyCondition,f+="(d:d/",f+=s,f+=o,f+=e.value,f+")";if(n.operator=="in"||n.operator=="notin"){for(l=0;l<e.length;l++)c=this._typeStringQuery(n,r,e[l],s,h),e[l]=c.val,s=c.field,f+=s,f+=o,f+=e[l],l!=e.length-1&&(f+=n.operator=="in"?" or ":" and ");return f}return o?(f+=s,f+=o,h&&(f+=h),f+e):(o=t.data.odUniOperator[n.operator],!o||v!=="string")?"":(o==="substringof"&&(y=e,e=s,s=y),f+=o+"(",f+=s+",",h&&(f+=h),f+=e+")",n.operator=="notcontains"&&(f+=" eq false"),n.anyCondition!=""&&o)?(a+=e.table,a+="/"+n.anyCondition,a+="(d:d/",f+=f,a+")"):f},onComplexPredicate:function(n,t){for(var r=[],i=0;i<n.predicates.length;i++)r.push("("+this.onEachWhere(n.predicates[i],t)+")");return r.join(" "+n.condition+" ")},onWhere:function(n){return this.pvt.searches&&n.push(this.onEachWhere(this.pvt.searches,null,!0)),n.join(" and ")},onEachSearch:function(n){var r,i;for(n.fields.length===0&&f("Query() - Search : oData search requires list of field names to search"),r=this.pvt.searches||[],i=0;i<n.fields.length;i++)r.push(new t.Predicate(n.fields[i],n.operator,n.key,n.ignoreCase));this.pvt.searches=r},onSearch:function(){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(n){var i=[],t;if(n.name instanceof Array)for(t=0;t<n.name.length;t++)i.push(this._p(n.name[t]));else i.push(this._p(n.name)+(n.direction==="descending"?" desc":""));return i.join(",")},onSortBy:function(n){return n.reverse().join(",")},onGroup:function(n){return this.pvt.groups=n,""},onSelect:function(n){for(var t=0;t<n.length;t++)n[t]=this._p(n[t]);return n.join(",")},onAggregates:function(n){return this.pvt.aggregates=n,""},onCount:function(n){return n===!0?"allpages":""},beforeSend:function(n,t,i){i.url.endsWith(this.options.batch)&&i.type.toLowerCase()==="post"&&(t.setRequestHeader("Accept",l.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined"));n.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(i,r,f,e,o,s){var a,l,v,d,tt,g,it,k,h,ft;if(!t.isNullOrUndefined(i.d)&&(a=f&&f._requiresCount?i.d.results:i.d,!t.isNullOrUndefined(a)))for(h=0;h<a.length;h++)t.isNullOrUndefined(a[h].__metadata)||delete a[h].__metadata;if(l=o&&o.ejPvtData,e&&e.getResponseHeader("Content-Type")&&e.getResponseHeader("Content-Type").indexOf("xml")!=-1&&i.nodeType==9)return f._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&o.type.toLowerCase()==="post"){if(v=e.getResponseHeader("Content-Type"),v=v.substring(v.indexOf("=batchresponse")+1),i=i.split(v),i.length<2)return;for(i=i[1],g=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(g[0],""),it=g[1],i=i.split(it),h=i.length;h>-1;h--)/\bContent-ID:/i.test(i[h])&&/\bHTTP.+201/.test(i[h])&&(d=parseInt(/\bContent-ID: (\d+)/i.exec(i[h])[1]),s.added[d]&&(tt=u.parseJson(/^\{.+\}/m.exec(i[h])[0]),n.extend(s.added[d],this.processResponse(tt))));return s}var y=e&&e.getResponseHeader("DataServiceVersion"),w=null,rt={};if(y=y&&parseInt(y,10)||2,f&&f._requiresCount&&((i.__count||i["odata.count"])&&(w=i.__count||i["odata.count"]),i.d&&(i=i.d),(i.__count||i["odata.count"])&&(w=i.__count||i["odata.count"])),y===3&&i.value&&(i=i.value),i.d&&(i=i.d),y<3&&i.results&&(i=i.results),l&&l.aggregates&&l.aggregates.length){var p=l.aggregates,nt,ut={};for(h=0;h<p.length;h++)nt=t.aggregates[p[h].type],nt&&(ut[p[h].field+" - "+p[h].type]=nt(i,p[h].field));rt=ut}if(l&&l.groups&&l.groups.length)for(k=l.groups,h=0;h<k.length;h++)ft=b(k[h],f.queries),i=t.group(i,k[h],l.aggregates,ft);return c(w)?i:{result:i,count:w,aggregates:rt}},convertToQueryString:function(n,t,i){var r=[],u=n.table||"",f;delete n.table;i.dataSource.requiresFormat&&(n.$format="json");for(f in n)r.push(f+"="+n[f]);return(r=r.join("&"),i.dataSource.url&&i.dataSource.url.indexOf("?")!==-1&&!u)?r:r.length?u+"?"+r:u||""},insert:function(n,t,i){return{url:n.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(n,t,i,r){return{type:"DELETE",url:n.dataSource.url.replace(/\/*$/,r?"/"+r:"")+"("+i+")"}},update:function(n,t,i,r){return{type:"PUT",url:n.dataSource.url.replace(/\/*$/,r?"/"+r:"")+"("+i[t]+")",data:JSON.stringify(i),accept:this.options.accept}},batchRequest:function(n,i,r){var e=r.guid=t.getGuid(l.batchPre),o=n.dataSource.url.replace(/\/*$/,"/"+this.options.batch),f={url:r.url,key:r.key,cid:1,cSet:t.getGuid(l.changeSet)},u="--"+e+"\n";return u+="Content-Type: multipart/mixed; boundary="+f.cSet.replace("--","")+"\n",this.pvt.changeSet=0,u+=this.generateInsertRequest(i.added,f),u+=this.generateUpdateRequest(i.changed,f),u+=this.generateDeleteRequest(i.deleted,f),u+=f.cSet+"--\n",u+="--"+e+"--",{type:"POST",url:o,contentType:"multipart/mixed; charset=UTF-8;boundary="+e,data:u}},generateDeleteRequest:function(n,t){var i,r;if(!n)return"";for(i="",r=0;r<n.length;r++)i+="\n"+t.cSet+"\n",i+=l.changeSetContent+"\n\n",i+="DELETE ",i+=t.url+"("+n[r][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+l.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=l.batchChangeSetContentType+"\n";return i+"\n"},generateInsertRequest:function(n,t){var i,r;if(!n)return"";for(i="",r=0;r<n.length;r++)i+="\n"+t.cSet+"\n",i+=l.changeSetContent+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+l.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=l.batchChangeSetContentType+"\n\n",i+=JSON.stringify(n[r])+"\n";return i},generateUpdateRequest:function(n,t){var i,r;if(!n)return"";for(i="",r=0;r<n.length;r++)i+="\n"+t.cSet+"\n",i+=l.changeSetContent+"\n\n",i+="PUT ",i+=t.url+"("+n[r][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+l.accept+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=l.batchChangeSetContentType+"\n\n",i+=JSON.stringify(n[r])+"\n\n";return i},_p:function(n){return n.replace(/\./g,"/")}});t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(n){return n===!0?"true":""},onPredicate:function(n,i,r){var u="",f=n.value,e=f instanceof Date;return t.data.odUniOperator.contains="contains",u=t.ODataAdaptor.prototype.onPredicate.call(this,n,i,r),t.data.odUniOperator.contains="substringof",e&&(u=u.replace(/datetime'(.*)'$/,"$1")),u},onEachSearch:function(n){var t=this.pvt.search||[];t.push(n.key);this.pvt.search=t},onSearch:function(){return this.pvt.search.join(" OR ")},beforeSend:function(){},processQuery:function(n,i){for(var f,o,e=/\/[\d*\/]*/g,u="",r=i._expands.length-1;r>0;r--)if(u.indexOf(i._expands[r])>=0)i._expands.pop();else if(e.test(i._expands[r])){for(u=i._expands.pop(),f=u.replace(e,"($expand="),o=0;o<u.split(e).length-1;o++)f=f+")";i._expands.unshift(f);r++}return t.ODataAdaptor.prototype.processQuery.apply(this,[n,i])},processResponse:function(i,r,f,e,o,s){var l=o&&o.ejPvtData,a,w,nt,k,tt,y,d,p,h,rt;if(e&&e.getResponseHeader("Content-Type")&&e.getResponseHeader("Content-Type").indexOf("xml")!=-1&&i.nodeType==9)return f._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&o.type.toLowerCase()==="post"){if(a=e.getResponseHeader("Content-Type"),a=a.substring(a.indexOf("=batchresponse")+1),i=i.split(a),i.length<2)return;for(i=i[1],k=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(k[0],""),tt=k[1],i=i.split(tt),h=i.length;h>-1;h--)/\bContent-ID:/i.test(i[h])&&/\bHTTP.+201/.test(i[h])&&(w=parseInt(/\bContent-ID: (\d+)/i.exec(i[h])[1]),s.added[w]&&(nt=u.parseJson(/^\{.+\}/m.exec(i[h])[0]),n.extend(s.added[w],this.processResponse(nt))));return s}if(y=null,d={},f&&f._requiresCount&&"@odata.count"in i&&(y=i["@odata.count"]),i=t.isNullOrUndefined(i.value)?i:i.value,l&&l.aggregates&&l.aggregates.length){var v=l.aggregates,g,it={};for(h=0;h<v.length;h++)g=t.aggregates[v[h].type],g&&(it[v[h].field+" - "+v[h].type]=g(i,v[h].field));d=it}if(l&&l.groups&&l.groups.length)for(p=l.groups,h=0;h<p.length;h++)rt=b(p[h],f.queries),i=t.group(i,p[h],l.aggregates,rt);return c(y)?i:{result:i,count:y,aggregates:d}}});t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(n,t){for(var u=n.dataSource.json.slice(0),o=u.length,s=!0,f,i,h={},e=0;e<t.queries.length;e++)i=t.queries[e],f=this[i.fn].call(this,u,i.e,t),i.fn=="onAggregates"?h[i.e.field+" - "+i.e.type]=f:u=f!==r?f:u,(i.fn==="onPage"||i.fn==="onSkip"||i.fn==="onTake"||i.fn==="onRange")&&(s=!1),s&&(o=u.length);return t._requiresCount&&(u={result:u,count:o,aggregates:h}),u},batchRequest:function(n,t,i){for(var r=0;r<t.added.length;r++)this.insert(n,t.added[r]);for(r=0;r<t.changed.length;r++)this.update(n,i.key,t.changed[r]);for(r=0;r<t.deleted.length;r++)this.remove(n,i.key,t.deleted[r]);return t},onWhere:function(n,t){return n?n.filter(function(n){return t.validate(n)}):n},onAggregates:function(n,i){var r=t.aggregates[i.type];return!n||!r||n.length==0?null:r(n,i.field)},onSearch:function(n,i){return!n||!n.length?n:(i.fieldNames.length===0&&t.pvt.getFieldList(n[0],i.fieldNames),n.filter(function(n){for(var r=0;r<i.fieldNames.length;r++)if(i.comparer.call(n,t.pvt.getObject(i.fieldNames[r],n),i.searchKey,i.ignoreCase))return!0;return!1}))},onSortBy:function(n,i,r){var o,u,f;if(!n)return n;if(u=e(i.fieldName,r),!u)return n.sort(i.comparer);if(u instanceof Array){for(u=u.slice(0),f=u.length-1;f>=0;f--)u[f]&&(o=i.comparer,u[f].endsWith(" desc")&&(o=t.pvt.fnSort(t.sortOrder.Descending),u[f]=u[f].replace(" desc","")),n=it(n,u[f],o,[]));return n}return it(n,u,i.comparer,r?r.queries:[])},onGroup:function(n,i,r){var u,o,s,f,h;if(!n)return n;if(u=a(r.queries,"onAggregates"),o=[],u.length)for(f=0;f<u.length;f++)s=u[f].e,o.push({type:s.type,field:e(s.field,r)});return h=b(i.fieldName,r.queries),t.group(n,e(i.fieldName,r),o,h)},onPage:function(n,t,i){var r=e(t.pageSize,i),u=(e(t.pageIndex,i)-1)*r,f=u+r;return n?n.slice(u,f):n},onRange:function(n,t){return n?n.slice(e(t.start),e(t.end)):n},onTake:function(n,t){return n?n.slice(0,e(t.nos)):n},onSkip:function(n,t){return n?n.slice(e(t.nos)):n},onSelect:function(n,i){return n?t.select(n,e(i.fieldNames)):n},insert:function(n,t){return n.dataSource.json.push(t)},remove:function(n,i,r){var f=n.dataSource.json,u;for(typeof r=="object"&&(r=t.getObject(i,r)),u=0;u<f.length;u++)if(t.getObject(i,f[u])===r)break;return u!==f.length?f.splice(u,1):null},update:function(i,r,u){for(var e=i.dataSource.json,o=t.getObject(r,u),f=0;f<e.length;f++)if(t.getObject(r,e[f])===o)break;return f<e.length?n.extend(e[f],u):null}});t.ForeignKeyAdaptor=function(i,u){var f=(new t[u||"JsonAdaptor"]).extend({init:function(){var r,n;for(this.foreignData=[],this.key=[],this.adaptorType=u,this.value=[],this.fValue=[],this.keyField=[],r=i,n=0;n<r.length;n++)this.foreignData[n]=r[n].dataSource,this.key[n]=r[n].foreignKeyField,this.fValue[n]=t.isNullOrUndefined(r[n].field)?r[n].foreignKeyValue:r[n].field+"_"+r[n].foreignKeyValue,this.value[n]=r[n].foreignKeyValue,this.keyField[n]=r[n].field||r[n].foreignKeyField,this.initial=!0},processQuery:function(n,i){var e=n.dataSource.json,u,f,r;if(this.initial){for(u=0;u<e.length;u++)for(f=this,r=0;r<this.foreignData.length;r++)this.foreignData[r].filter(function(n){t.getObject(f.key[r],n)==t.getObject(f.keyField[r],e[u])&&(e[u][f.fValue[r]]=t.getObject(f.value[r],n))});this.initial=!1}return this.base.processQuery.apply(this,[n,i])},setValue:function(i){for(var o,f,e,u=0;u<this.foreignData.length;u++)o=this,f=i[this.fValue[u]],typeof f!="string"||isNaN(f)||(f=t.parseFloat(f)),e=n.grep(o.foreignData[u],function(n){return n[o.value[u]]==f})[0],t.isNullOrUndefined(e)&&(e=n.grep(o.foreignData[u],function(n){return n[o.key[u]]==f})[0],t.getObject(this.value[u],e)!=r&&t.createObject(o.value[u],t.getObject(this.value[u],e),i)),t.getObject(this.value[u],e)!=r&&t.createObject(this.keyField[u],t.getObject(this.key[u],e),i)},insert:function(n,t,i){return this.setValue(t),{url:n.dataSource.insertUrl||n.dataSource.crudUrl||n.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert",antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""})}},update:function(n,i,r,u){return this.setValue(r),t.JsonAdaptor.prototype.update(n,i,r,u),{type:"POST",url:n.dataSource.updateUrl||n.dataSource.crudUrl||n.dataSource.url,data:JSON.stringify({value:r,action:"update",keyColumn:i,key:r[i],table:u,antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""})}}});return n.extend(this,new f),this};t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,addParams:t.UrlAdaptor.prototype.addParams,batchRequest:function(n,t,i,r){var u={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:n.dataSource.antiForgery?n.antiForgeryToken().value:""};return r&&this.addParams({dm:n,query:r,params:r._params,reqParams:u}),{type:"POST",url:n.dataSource.batchUrl||n.dataSource.crudUrl||n.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(u)}},processResponse:function(n,i,r,u,f,e,o){if(t.isNullOrUndefined(e))return n.d?n.d:n;for(var s=0;s<e.added.length;s++)t.JsonAdaptor.prototype.insert(i,e.added[s]);for(s=0;s<e.changed.length;s++)t.JsonAdaptor.prototype.update(i,o,e.changed[s]);for(s=0;s<e.deleted.length;s++)t.JsonAdaptor.prototype.remove(i,o,e.deleted[s]);return this.base.processResponse.apply(this,[n,i,r,u,f,e])}});t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(n,t){return{type:"POST",url:n.dataSource.url,data:JSON.stringify(t)}},remove:function(n,t,i){return{type:"DELETE",url:n.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(n,t,i){return{type:"PUT",url:n.dataSource.url,data:JSON.stringify(i)}},batchRequest:function(i,r,u){var e=u.guid=t.getGuid(l.batchPre),f=[];return n.each(r.added,function(n,t){f.push("--"+e);f.push("Content-Type: application/http; msgtype=request","");f.push("POST "+i.dataSource.insertUrl+" HTTP/1.1");f.push("Content-Type: application/json; charset=utf-8");f.push("Host: "+location.host);f.push("",t?JSON.stringify(t):"")}),n.each(r.changed,function(n,t){f.push("--"+e);f.push("Content-Type: application/http; msgtype=request","");f.push("PUT "+i.dataSource.updateUrl+" HTTP/1.1");f.push("Content-Type: application/json; charset=utf-8");f.push("Host: "+location.host);f.push("",t?JSON.stringify(t):"")}),n.each(r.deleted,function(n,t){f.push("--"+e);f.push("Content-Type: application/http; msgtype=request","");f.push("DELETE "+i.dataSource.removeUrl+"/"+t[u.key]+" HTTP/1.1");f.push("Content-Type: application/json; charset=utf-8");f.push("Host: "+location.host);f.push("",t?JSON.stringify(t):"")}),f.push("--"+e+"--",""),{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,data:f.join("\r\n"),contentType:'multipart/mixed; boundary="'+e+'"'}},processResponse:function(n,i,r,u,f){var o=f&&f.ejPvtData,l,e,w;if(f&&f.type.toLowerCase()!="post"){var h=u&&u.getResponseHeader("DataServiceVersion"),a=null,y={};if(h=h&&parseInt(h,10)||2,r&&r._requiresCount&&(c(n.Count)||(a=n.Count)),h<3&&n.Items&&(n=n.Items),o&&o.aggregates&&o.aggregates.length){var s=o.aggregates,v,p={};for(e=0;e<s.length;e++)v=t.aggregates[s[e].type],v&&(p[s[e].field+" - "+s[e].type]=v(n,s[e].field));y=p}if(o&&o.groups&&o.groups.length)for(l=o.groups,e=0;e<l.length;e++)w=b(l[e],r.queries),n=t.group(n,l[e],o.aggregates,w);return c(a)?n:{result:n,count:a,aggregates:y}}}});e=function(n,t){return typeof n=="function"?n.call(t||{}):n};t.TableModel=function(i,r,u,e){var c,o,l,s;if(!p(this,t.TableModel))return new t.TableModel(r);for(p(r,Array)||f("ej.TableModel - Json Array is required"),c=[],l=h(ht,this),s=0;s<r.length;s++){o=new t.Model(r[s],this);o.state="unchanged";o.on("stateChange",l);e&&o.computes(e);c.push(o)}return this.name=i||"table1",this.rows=t.NotifierArray(c),this._deleted=[],this._events=n({}),this.dataManager=u,this._isDirty=!1,this};t.TableModel.prototype={on:function(n,t){this._events.on(n,t)},off:function(n,t){this._events.off(n,t)},setDataManager:function(n){this.dataManagar=n},saveChanges:function(){if(this.dataManager&&p(this.dataManager,t.DataManager)||f("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var n=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);n.done(h(function(n){for(var t=this.toArray(),i=0;i<t.length;i++)t.state==="added"&&t.set(this.key,n.added.filter(function(n){return n[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this));n.fail(h(function(n){this.rejectChanges();this._events.triggerHandler({type:"reject",table:this,error:n})},this));this._isDirty=!1}},rejectChanges:function(){for(var t=this.toArray(),n=0;n<t.length;n++)t[n].revert(!0);this._isDirty=!1;this._events.triggerHandler({type:"reject",table:this})},insert:function(n){var i=new t.Model(n);i._isDirty=this._isDirty=!0;this.rows.push(i);this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(n){var r;this.key||f("TableModel - update : Primary key should be assigned to TableModel.key");var i=n,t,u=this.key,e=i[u];t=this.rows.array.filter(function(n){return n.get(u)===e});t=t[0];for(r in i)t.set(r,i[r]);this._isDirty=!0;this._events.triggerHandler({type:"update",model:t,table:this})},remove:function(n){var t,i,e,u;for(this.key||f("TableModel - update : Primary key should be assigned to TableModel.key"),t=this.key,i=-1,n&&typeof n=="object"&&(n=n[t]!==r?n[t]:n.get(t)),u=0;u<this.rows.length();u++)if(this.rows.array[u].get(t)===n){i=u;break}i>-1&&(e=this.rows.removeAt(i),e.markDelete(),this._deleted.push({model:e,position:i}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:e,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var i={added:[],changed:[]},r=this.toArray(),n=0;n<r.length;n++)i[r[n].state]&&i[r[n].state].push(r[n].json);return i.deleted=t.select(this._deleted,["model"]),i},toArray:function(){return this.rows.toArray()},setDirty:function(n,t){this._isDirty!==!!n&&(this._isDirty=!!n,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(n){return this.rows.array[n]},length:function(){return this.rows.array.length},bindTo:function(t){var i=nt,e=n(t.html()),f=this.toArray(),u,r;for(n.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(i=tt),i.insertBefore(t),t.detach().empty(),r=0;r<f.length;r++)u=e.clone(),f[r].bindTo(u),t.append(u);t.insertAfter(i);i.remove()}};nt=i?n(document.createElement("div")):{};tt=i?n(document.createElement("tr")):{};t.Model=function(i,r,u){typeof r=="string"&&(u=r,r=null);this.$id=et("m");this.json=i;this.table=r instanceof t.TableModel?r:null;this.name=u||this.table&&this.table.name;this.dataManager=r instanceof t.DataManager?r:r.dataManagar;this.actual={};this._events=n({});this.isDirty=!1;this.state="added";this._props=[];this._computeEls={};this._fields={};this._attrEls={};this._updates={};this.computed={}};t.Model.prototype={computes:function(t){n.extend(this.computed,t)},on:function(n,t){this._events.on(n,t)},off:function(n,t){this._events.off(n,t)},set:function(n,t){var i=this.json,e=n,f,u;for(n=n.split("."),u=0;u<n.length-1;u++)n=n[0],i=i[n[0]];this.isDirty=!0;this.changeState("changed",{from:"set"});f=i[n];this.actual[n]!==r||n in this.actual||(this.actual[n]=t);i[n]=t;this._updateValues(n,t);this._events.triggerHandler({type:e,current:t,previous:f,model:this})},get:function(n){return t.pvt.getObject(n,this.json)},revert:function(n){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1;n?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(i,r){return(i=i||this.dataManagar,r=r||i.dataSource.key,i||f("ej.Model - DataManager is required to commit the changes"),this.state==="added")?i.insert(this.json,this.name).done(t.proxy(function(t){n.extend(this.json,t.record)},this)):this.state==="changed"?i.update(r,this.json,this.name):this.state==="deleted"?i.remove(r,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1;this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if(this.state==="added")if(t==="deleted")t="unchanged";else return;var r=t;i=i||{};this.state=t;this._events.triggerHandler(n.extend({type:"stateChange",current:t,previous:r,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var n in this.json)this._props.push(n),this._updates[n]={read:[],input:[]};return this._props},bindTo:function(t){var e=n(t),r,i,o=e.find("[ej-observe], [ej-computed], [ej-prop]"),s=o.length,u,f;for(e.data("ejModel",this),u={fields:[],props:[],computes:[]},f=0;f<s;f++){if(r=o.eq(f),i=r.attr("ej-prop"),i&&this._processAttrib(i,r,u),i=r.attr("ej-observe"),i&&this._props.indexOf(i)!==-1){this._processField(r,i,u);continue}if(i=r.attr("ej-computed"),i){this._processComputed(i,r,u);continue}}e.data("ejModelBinding"+this.$id,u)},unbind:function(t){var u,r={props:this._attrEls,computes:this._computeEls},f=!1,i,c,e,s,h,o;t&&(r=n(t).removeData("ejModel").data("ejModelBinding"+this.$id)||r,f=!0);for(i in this.computed)u=r.computes[i],i=this.computed[i],u&&i.deps&&(this.off(i.deps.join(" "),u.handle),f&&delete this._computeEls[i]);f||(this._computeEls={});for(i in r.props)u=r.props[i],u&&(this.off(u.deps.join(" "),u.handle),delete r.props[i],f&&delete this._attrEls[i]);if(f||(this._attrEls={}),r.fields&&r.fields.length)for(c=r.fields.length,o=0;o<c;o++)e=r.fields[o],n(e).off("change",null,this._changeHandler),h=this.formElements.indexOf(e.tagName.toLowerCase())!==-1?"input":"read",s=this._updates[h].indexOf(e),s!==-1&&this._updates[h].splice(s,1)},_processComputed:function(n,t,i){if(n){var r,u,f=st(n),e=this.formElements.indexOf(t[0].tagName.toLowerCase())!==-1?"val":"html";this.computed[n]&&this.computed[f]||(this.computed[f]={value:new Function("var e = this; return "+n),deps:this._generateDeps(n)},n=f);r=this.computed[n];r.get||(r.get=function(){r.value.call(this.json)});u=r.deps;r=r.value;this._updateDeps(u);this._updateElement(t,e,r);r={el:t,handle:h(this._computeHandle,this,{value:n,type:e})};this._computeEls[n]=r;i.computes[n]=r;this.on(u.join(" "),r.handle)}},_computeHandle:function(n){var t=this._computeEls[n.value];t&&this.computed[n.value]&&this._updateElement(t.el,n.type,this.computed[n.value].value)},_updateElement:function(t,i,r){t[i](r.call(n.extend({},this.json,this.computed)))},_updateDeps:function(n){for(var i=0;i<n.length;i++)!(n[i]in this.json)&&n[i]in this.computed&&t.merge(n,this.computed[n[i]].deps)},_generateDeps:function(n){for(var r=n.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),t,u=[],i=0;i<r.length;i++)r[i].startsWith("#ej.#")&&(t=r[i].replace("#ej.#","").split(" ")[0],t&&this._props.indexOf(t)!==-1&&u.push(t));return u},_processAttrib:function(n,t,i){var e,o,u={},r,f;for(n=n.replace(/^ +| +$/g,"").split(";"),r=0;r<n.length;r++)(n[r]=n[r].split(":"),n[r].length<2)||(e=n[r][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""),u[e]=n[r][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));n=u;f=[];for(e in n)f.push(n[e]);this._updateDeps(f);this._updateProps(t,n);u=et("emak");o={el:t,handle:h(this._attrHandle,this,u),value:n,deps:f};t.prop("ejmodelattrkey",u);i.props[u]=o;this._attrEls[u]=o;this.on(f.join(" "),o.handle)},_attrHandle:function(n){var t=this._attrEls[n];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,i){var f=this.json,r,u=this.computed;for(var e in i)r=i[e],r in f?r=f[r]:r in u&&(r=u[r],r&&(r=r.value.call(n.extend({},this.json,u)))),c(r)||t.prop(e,r)},_updateValues:function(n,t){var i=this._updates[n];i&&(i.read||i.input)&&(this._ensureItems(i.read,"html",t),this._ensureItems(i.input,"val",t))},_ensureItems:function(t,i,r){if(t)for(var u=t.length-1;u>-1;u--){if(!t[u].offsetParent){t.splice(u,1);continue}n(t[u])[i](r)}},_changeHandler:function(t){t.data.self.set(t.data.prop,n(this).val())},_processField:function(n,t,i){var u={self:this,prop:t},r=this.get(t);if(i.fields.push(n[0]),this.formElements.indexOf(n[0].tagName.toLowerCase())===-1)return n.html(r),this._updates[t].read.push(n[0]);n.val(r).off("change",null,this._changeHandler).on("change",null,u,this._changeHandler);return this._updates[t].input.push(n[0])},formElements:["input","select","textarea"]};var ot=/[^\w]+/g,st=function(n){return n.replace(ot,"_")},ht=function(n){this.setDirty(!0,n.model)};if(t.Predicate=function(n,i,r,u){if(!(this instanceof t.Predicate))return new t.Predicate(n,i,r,u);if(typeof n=="string"){var f="";i.toLowerCase().indexOf(" any")!=-1?(i=i.replace(" any",""),f="any"):i.toLowerCase().indexOf(" all")!=-1&&(i=i.replace(" all",""),f="all");this.field=n;this.operator=i;this.value=r;this.ignoreCase=u;this.isComplex=!1;this.anyCondition=f;this._comparer=t.data.fnOperators.processOperator(f!=""?f:this.operator)}else(n instanceof t.Predicate&&r instanceof t.Predicate||r instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[n],r instanceof Array?[].push.apply(this.predicates,r):this.predicates.push(r));return this},t.Predicate.and=function(){return y._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return y._combinePredicates([].slice.call(arguments,0),"or")},t.Predicate.fromJSON=function(n){var i,t,r;if(p(n,Array)){for(i=[],t=0,r=n.length;t<r;t++)i.push(y._fromJSON(n[t]));return i}return y._fromJSON(n)},y={_combinePredicates:function(n,i){if(!n.length)return r;if(n.length===1){if(!p(n[0],Array))return n[0];n=n[0]}return new t.Predicate(n[0],i,n.slice(1))},_combine:function(n,i,r,u,e,o){return i instanceof t.Predicate?t.Predicate[e](n,i):typeof i=="string"?t.Predicate[e](n,new t.Predicate(i,r,u,o)):f("Predicate - "+e+" : invalid arguments")},_fromJSON:function(n){var i;if(!n||p(n,t.Predicate))return n;var u=n.predicates||[],f=u.length,r=[];for(i=0;i<f;i++)r.push(y._fromJSON(u[i]));return n.isComplex?new t.Predicate(r[0],n.condition,r.slice(1)):new t.Predicate(n.field,n.operator,t.parseJSON({val:n.value}).val,n.ignoreCase)}},t.Predicate.prototype={and:function(n,t,i,r){return y._combine(this,n,t,i,"and",r)},or:function(n,t,i,r){return y._combine(this,n,t,i,"or",r)},validate:function(n){var f=this.predicates,r,u,i;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,n),this.value,this.ignoreCase);for(r=this.condition==="and",i=0;i<f.length;i++)if(u=f[i].validate(n),r){if(!u)return!1}else if(u)return!0;return r},toJSON:function(){var t,i,n;if(this.isComplex)for(t=[],i=this.predicates,n=0;n<i.length;n++)t.push(i[n].toJSON());return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,condition:this.condition,predicates:t,anyCondition:this.anyCondition}}},t.dataUtil={swap:function(n,t,i){if(t!=i){var r=n[t];n[t]=n[i];n[i]=r}},mergeSort:function(n,i,r){return r&&typeof r!="string"||(r=t.pvt.fnSort(r,!0)),typeof i=="function"&&(r=i,i=null),t.pvt.mergeSort(n,i,r)},max:function(n,i,r){return typeof i=="function"&&(r=i,i=null),t.pvt.getItemFromComparer(n,i,r||t.pvt.fnDescending)},min:function(n,i,r){return typeof i=="function"&&(r=i,i=null),t.pvt.getItemFromComparer(n,i,r||t.pvt.fnAscending)},distinct:function(n,t,i){for(var f=[],r,e={},u=0;u<n.length;u++)r=v(n,t,u),r in e||(f.push(i?n[u]:r),e[r]=1);return f},sum:function(n,t){for(var u=0,i,f=typeof v(n,t,0)!="number",r=0;r<n.length;r++)i=v(n,t,r),isNaN(i)||i===null||(f&&(i=+i),u+=i);return u},avg:function(n,i){return t.sum(n,i)/n.length},select:function(n,i){for(var u=[],r=0;r<n.length;r++)u.push(t.pvt.extractFields(n[r],i));return u},group:function(i,r,u,f,e,o){var p,a,c,h,k,l,b,y,s,w;if(e=e||1,i.GROUPGUID==t.pvt.consts.GROUPGUID){for(s=0;s<i.length;s++)t.isNullOrUndefined(o)?(i[s].items=t.group(i[s].items,r,u,f,i.level+1),i[s].count=i[s].items.length):(p=-1,w=n.grep(o,function(n){return n.key==i[s].key}),p=o.indexOf(w[0]),i[s].items=t.group(i[s].items,r,u,f,i.level+1,o[p].items),i[s].count=o[p].count);return i.childLevels+=1,i}for(a={},c=[],c.GROUPGUID=t.pvt.consts.GROUPGUID,c.level=e,c.childLevels=0,c.records=i,l=0;l<i.length;l++)h=v(i,r,l),t.isNullOrUndefined(f)||(h=f(h,r)),a[h]||(a[h]={key:h,count:0,items:[],aggregates:{},field:r},c.push(a[h]),t.isNullOrUndefined(o)||(k=n.grep(o,function(n){return n.key==a[h].key}),a[h].count=k[0].count)),a[h].count=t.isNullOrUndefined(o)?a[h].count+=1:a[h].count,a[h].items.push(i[l]);if(u&&u.length)for(l=0;l<c.length;l++){for(b={},s=0;s<u.length;s++)y=t.aggregates[u[s].type],t.isNullOrUndefined(o)?y&&(b[u[s].field+" - "+u[s].type]=y(c[l].items,u[s].field)):(w=n.grep(o,function(n){return n.key==c[l].key}),y&&(b[u[s].field+" - "+u[s].type]=y(w[0].items,u[s].field)));c[l].aggregates=b}return c},parseTable:function(i,r,u){var s=i.rows,h,v=[],y=[],f,c,l,a,e,o;if(!s.length)return[];u=u||0;switch((r||"").toLowerCase()){case t.headerOption.tHead:h=i.tHead.rows[u];break;case t.headerOption.row:default:h=i.rows[u]}for(c=h.cells,f=0;f<c.length;f++)v.push(n.trim(c[f].innerHTML));for(f=u+1;f<s.length;f++){for(l={},a=s[f].cells,e=0;e<a.length;e++)o=a[e].innerHTML,l[v[e]]=typeof o=="string"&&n.isNumeric(o)?Number(o):o;y.push(l)}return y}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(n,i){return t.sum(n,i)},average:function(n,i){return t.avg(n,i)},minimum:function(n,i){return t.getObject(i,t.min(n,i))},maximum:function(n,i){return t.getObject(i,t.max(n,i))},truecount:function(n,i){var r=t.Predicate(i,"equal",!0);return t.DataManager(n).executeLocal(t.Query().where(r)).length},falsecount:function(n,i){var r=t.Predicate(i,"equal",!1);return t.DataManager(n).executeLocal(t.Query().where(r)).length},count:function(n){return n.length}},t.pvt={filterQueries:a,mergeSort:function(n,i,r){if(n.length<=1)return n;var e=parseInt(n.length/2,10),u=n.slice(0,e),f=n.slice(e);return u=t.pvt.mergeSort(u,i,r),f=t.pvt.mergeSort(f,i,r),t.pvt.merge(u,f,i,r)},getItemFromComparer:function(n,i,r){var f,e,o,u=0,s=typeof v(n,i,0)=="string";if(n.length)while(t.isNullOrUndefined(f)&&u<n.length)f=v(n,i,u),o=n[u++];for(;u<n.length;u++)(e=v(n,i,u),t.isNullOrUndefined(e))||(s&&(f=+f,e=+e),r(f,e)>0&&(f=e,o=n[u]));return o},quickSelect:function(n,i,r,u,f,e){if(r==u)return n[r];var o=t.pvt.partition(n,i,r,u,e),s=o-r+1;return s==f?n[o]:f<s?t.pvt.quickSelect(n,i,r,o-1,f,e):t.pvt.quickSelect(n,i,o+1,u,f-s,e)},extractFields:function(n,i){var u={},r;if(i.length==1)return t.pvt.getObject(i[0],n);for(r=0;r<i.length;r++)u[i[r].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[r],n);return u},partition:function(n,i,r,u,f){var e=parseInt((r+u)/2,10),s=v(n,i,e),o;for(t.swap(n,e,u),e=r,o=r;o<u;o++)f(v(n,i,o),s)&&(t.swap(n,o,e),e++);return t.swap(n,e,u),e},fnSort:function(n){return(n=n?n.toLowerCase():t.sortOrder.Ascending,n==t.sortOrder.Ascending)?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(n,i){return function(r,u){return i(t.pvt.getObject(n,r),t.pvt.getObject(n,u))}},fnAscending:function(n,t){return t===null||t===r?-1:typeof n=="string"?n.localeCompare(t):n===null||n===r?1:n-t},fnDescending:function(n,t){return t===null||t===r?1:typeof n=="string"?n.localeCompare(t)*-1:n===null||n===r?-1:t-n},merge:function(n,t,i,r){for(var u=[],f;n.length>0||t.length>0;)f=n.length>0&&t.length>0?r?r(v(n,i,0),v(t,i,0))<=0?n:t:n[0][i]<n[0][i]?n:t:n.length>0?n:t,u.push(f.shift());return u},getObject:function(n,t){var i,f,u;if(!t)return r;if(!n)return t;if(n.indexOf(".")===-1)return t[n];for(i=t,f=n.split("."),u=0;u<f.length;u++){if(i==null)break;i=i[f[u]]}return i},createObject:function(n,t,i){for(var f=n.split("."),o=i||window,e=o,u=0;u<f.length;u++)u+1==f.length?e[f[u]]=t===r?{}:t:e[f[u]]==null&&(e[f[u]]={}),e=e[f[u]];return o},getFieldList:function(n,i,u){if(u===r&&(u=""),i===r||i===null)return t.pvt.getFieldList(n,[],u);for(var f in n)typeof n[f]!="object"||n[f]instanceof Array?i.push(u+f):t.pvt.getFieldList(n[f],i,u+f+".");return i}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne ","in":" eq ",notin:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",notcontains:"substringof"},t.data.fnOperators={equal:function(n,t,i){return i?s(n)==s(t):n==t},notequal:function(n,i,r){return!t.data.fnOperators.equal(n,i,r)},notin:function(n,i,r){for(var u=0;u<i.length;u++)if(t.data.fnOperators.notequal(n,i[u],r)==!1)return!1;return!0},lessthan:function(n,t,i){return i?s(n)<s(t):n<t},greaterthan:function(n,t,i){return i?s(n)>s(t):n>t},lessthanorequal:function(n,t,i){return i?s(n)<=s(t):n<=t},greaterthanorequal:function(n,t,i){return i?s(n)>=s(t):n>=t},contains:function(n,t,i){return i?!c(n)&&!c(t)&&s(n).indexOf(s(t))!=-1:!c(n)&&!c(t)&&n.toString().indexOf(t)!=-1},notcontains:function(n,i,r){return!t.data.fnOperators.contains(n,i,r)},notnull:function(n){return n!==null},isnull:function(n){return n===null},startswith:function(n,t,i){return i?n&&t&&s(n).startsWith(s(t)):n&&t&&n.startsWith(t)},endswith:function(n,t,i){return i?n&&t&&s(n).endsWith(s(t)):n&&t&&n.endsWith(t)},all:function(n,i,r){for(var u=0;u<i.length;u++)if(t.data.fnOperators[this.operator](n,i[u],r)==!1)return!1;return!0},any:function(n,i,r){for(var u=0;u<i.length;u++)if(t.data.fnOperators[this.operator](n,i[u],r)==!0)return!0;return!1},processSymbols:function(n){var r=t.data.operatorSymbols[n],i;return r&&(i=t.data.fnOperators[r],i)?i:f("Query - Process Operator : Invalid operator")},processOperator:function(n){var i=t.data.fnOperators[n];return i?i:t.data.fnOperators.processSymbols(n)}},t.data.fnOperators["in"]=function(n,i,r){for(var u=0;u<i.length;u++)if(t.data.fnOperators.equal(n,i[u],r)==!0)return!0;return!1},t.NotifierArray=function(i){return p(this,t.NotifierArray)?(this.array=i,this._events=n({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(n,t){this._events.on(n,t)},off:function(n,t){this._events.off(n,t)},push:function(n){var t;return t=p(n,Array)?[].push.apply(this.array,n):this.array.push(n),this._raise("add",{item:n,index:this.length()-1}),t},pop:function(){var n=this.array.pop();return this._raise("remove",{item:n,index:this.length()-1}),n},addAt:function(n,t){return this.array.splice(n,0,t),this._raise("add",{item:t,index:n}),t},removeAt:function(n){var t=this.array.splice(n,1)[0];return this._raise("remove",{item:t,index:n}),t},remove:function(n){var t=this.array.indexOf(n);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:n,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(n.extend({type:t},i));this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},n.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(n,t){for(var i=0,r=this.length;i<r;++i)n.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(n){var i=this.length,t;if(i===0)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===n)return t;return-1},Array.prototype.filter=Array.prototype.filter||function(n){var i,u,t,r;if(typeof n!="function")throw new TypeError;for(i=[],u=arguments[1]||this,t=0;t<this.length;t++)r=this[t],n.call(u,r,t,this)&&i.push(r);return i},String.prototype.endsWith=String.prototype.endsWith||function(n){return this.slice(-n.length)===n},String.prototype.startsWith=String.prototype.startsWith||function(n){return this.slice(0,n.length)===n},t.support||(t.support={}),t.support.stableSort=function(){for(var t=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),n=0;n<17;n++)if(n!==t[n])return!1;return!0}(),t.support.cors=n.support.cors,!n.support.cors&&window.XDomainRequest){var ct=/^https?:\/\//i,lt=/^get|post$/i,at=new RegExp("^"+location.protocol,"i"),vt=/\/xml/i;n.ajaxTransport("text html xml json",function(n,t){if(n.crossDomain&&n.async&&lt.test(n.type)&&ct.test(t.url)&&at.test(t.url)){var i=null,u=(t.dataType||"").toLowerCase();return{send:function(f,e){i=new XDomainRequest;/^\d+$/.test(t.timeout)&&(i.timeout=t.timeout);i.ontimeout=function(){e(500,"timeout")};i.onload=function(){var o="Content-Length: "+i.responseText.length+"\r\nContent-Type: "+i.contentType,t={code:200,message:"success"},f={text:i.responseText},n;try{if(u==="json")try{f.json=JSON.parse(i.responseText)}catch(h){t.code=500;t.message="parseerror"}else if(u==="xml"||u!=="text"&&vt.test(i.contentType)){n=new ActiveXObject("Microsoft.XMLDOM");n.async=!1;try{n.loadXML(i.responseText)}catch(h){n=r}if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length){t.code=500;t.message="parseerror";throw"Invalid XML: "+i.responseText;}f.xml=n}}catch(s){throw s;}finally{e(t.code,t.message,f,o)}};i.onerror=function(){e(500,"error",{text:i.responseText})};navigator.userAgent.indexOf("MSIE 9.0")!=-1&&(i.onprogress=function(){});i.open(n.type,n.url);i.send(t.data)},abort:function(){i&&i.abort()}}}})}n.support.cors=!0;t.sortOrder={Ascending:"ascending",Descending:"descending"};t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};d=function(n,t){t&&(n=h(n,t));(window.setImmediate||window.setTimeout)(n,0)};t.support.enableLocalizedSort=!1;var it=function(n,i,r,u){return t.support.stableSort?!t.support.enableLocalizedSort&&typeof t.pvt.getObject(i,n[0]||{})=="string"&&(r===t.pvt.fnAscending||r===t.pvt.fnDescending)&&u.filter(function(n){return n.fn==="onSortBy"}).length===1?yt(n,i,r===t.pvt.fnDescending):n.sort(t.pvt.fnGetComparer(i,r)):t.mergeSort(n,i,r)},b=function(i,r){for(var f=n.grep(r,function(n){return n.fn=="onGroup"}),u=0;u<f.length;u++)if(t.getObject("fieldName",f[u].e)==i)return t.getObject("fn",f[u].e)},yt=function(n,i,r){var u=Object.prototype.toString;Object.prototype.toString=i.indexOf(".")===-1?function(){return this[i]}:function(){return t.pvt.getObject(i,this)};n=n.sort();Object.prototype.toString=u;r&&n.reverse()},s=function(n){return n?n.toLowerCase?n.toLowerCase():n.toString().toLowerCase():n===0||n===!1?n.toString():""},v=function(n,i,r){return i?t.pvt.getObject(i,n[r]):n[r]},pt=function(n){return typeof HTMLElement=="object"?n instanceof HTMLElement:n&&n.nodeType===1&&typeof n=="object"&&typeof n.nodeName=="string"},p=function(n,t){return n instanceof t},rt=function(n,i,r,u){return function(f){return typeof f=="object"&&(u=f,f=null),new t.TableModel(f||n,i,r,u)}},ut=function(t){return function(i,r){var o,h,e,u,s;for(r=r||window.ko,r||f("Knockout is undefined"),h=[],s=0;s<t.length;s++){o={};for(e in t[s])e.startsWith("_")||(o[e]=r.observable(t[s][e]));for(e in i)u=i[e],n.isPlainObject(u)?(u.owner||(u.owner=o),u=r.computed(u)):u=r.computed(u,o),o[e]=u;h.push(o)}return r.observableArray(h)}},ft=0,et=function(n){return ft+=1,n+ft};t.getGuid=function(n){var i="0123456789abcdef",t;return(n||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(n,r){if("crypto"in window&&"getRandomValues"in crypto){var u=new Uint8Array(1);window.crypto.getRandomValues(u);t=u[0]%16|0}else t=Math.random()*16|0;return i[r===19?t&3|8:t]})};w=function(n,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),n.apply(t||this,i)}};h=function(n,t,i){return"bind"in n?i?n.bind(t,i):n.bind(t):function(){var r=i?[i]:[];return r.push.apply(r,arguments),n.apply(t||this,r)}};t.merge=function(n,t){n&&t&&Array.prototype.push.apply(n,t)};c=function(n){return n===r||n===null};f=function(n){try{throw new Error(n);}catch(t){throw t.message+"\n"+t.stack;}}}(window.jQuery,window.Syncfusion,window.document),function(n,t,i){t.widget("ejMaskEdit","ej.MaskEdit",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{maskFormat:"",value:null,watermarkText:"",name:null,height:"",width:"",showError:!1,htmlAttributes:{},cssClass:"",customCharacter:null,inputMode:"text",readOnly:!1,textAlign:t.TextAlign.Left,hidePromptOnLeave:!1,showRoundedCorner:!1,enablePersistence:!1,enabled:!0,locale:"en-US",showPromptChar:!0,validationRules:null,validationMessage:null,keydown:null,keyup:null,keyPress:null,change:null,mouseover:null,mouseout:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{maskFormat:"string",showError:"boolean",enabled:"boolean",customCharacter:"string",cssClass:"string",watermarkText:"string",showRoundedCorner:"boolean",showPromptChar:"boolean",inputMode:"enum",textAlign:"enum",hidePromptOnLeave:"boolean",readOnly:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(n){for(var i in n)switch(i){case"value":t.isPlainObject(n[i])&&(n[i]=null);this._setValue(n[i]);this._initObjects();n[i]=this.get_UnstrippedValue();this._raiseEvents("change",!0);break;case"width":this._setWidth(n[i]);break;case"height":this._setHeight(n[i]);break;case"watermarkText":this.model.watermarkText=n[i];this._changeWatermark(n[i]);break;case"showRoundedCorner":this._roundedCorner(n[i]);break;case"showPromptChar":this._setShowPrompt(n[i]);break;case"validationRules":this.model.validationRules!=null&&(this._hiddenInput.rules("remove"),this.model.validationMessage=null);this.model.validationRules=n[i];this.model.validationRules!=null&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=n[i];this.model.validationRules!=null&&this.model.validationMessage!=null&&(this._initValidator(),this._setValidation());break;case"textAlign":this._setTextAlign(n[i]);break;case"inputMode":this._setInputMode(n[i]);break;case"maskFormat":this.model.maskFormat=n[i];this._valueMapper();this._maskModel=this.model.maskFormat;this._setMask(n[i]);this._initObjects();n[i]=this.model.maskFormat;break;case"locale":this.model.value=this.get_StrippedValue();this.model.locale=n[i];this._setValue(this.model.value);this._initObjects();break;case"cssClass":this._setSkin(n[i]);break;case"readOnly":this._setReadOnly(n[i]);break;case"enabled":this.model.enabled=n[i];this._controlStatus(n[i]);break;case"htmlAttributes":this._addAttr(n[i]);break;case"hidePromptOnLeave":this.model.hidePromptOnLeave=n[i];this._textbox.value!=""&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=this._textbox.value.replace(/[ ]/g,"_"),this.model.value=this._textbox.value)}},observables:["value"],_destroy:function(){t.isNullOrUndefined(this._hiddenInput)||this.element.attr("name",this._hiddenInput.attr("name"));this._isWatermark&&this.element.removeAttr("placeholder");this.element.insertAfter(this.wrapper);t.isNullOrUndefined(this.wrapper)||this.wrapper.remove();this.model.textAlign&&this.element.css("text-align","");this.element.val("").removeClass(" e-mask e-input e-disable").empty();this.element.removeAttr("aria-invalid aria-disabled")},_init:function(n){if(this._options=n,this._tempMask=this.model.maskFormat,this.element.is("input")&&(this.element.is("input[type=text]")||this.element.is("input[type=password]")||!this.element.attr("type")))this._isWatermark="placeholder"in document.createElement("input"),this._setValues(),this._valueMapper(),this._renderControl(),this._initObjects(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),this.model.validationRules!=null&&(this._initValidator(),this._setValidation());else return this._destroy(),!1;n&&n.value!=i&&this.model.value!==n.value&&this._trigger("_change",{value:this.get_UnstrippedValue(),unmaskedValue:this.get_StrippedValue()})},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_addAttr:function(i){var r=this;n.map(i,function(n,i){var u=i.toLowerCase();u=="class"?r.wrapper.addClass(n):u=="name"?r._hiddenInput.attr(i,n):u=="disabled"&&n=="disabled"?r.disable():u=="readonly"&&n=="readOnly"?r._setReadOnly(!0):u=="style"||u=="id"?r.wrapper.attr(i,n):t.isValidAttr(r.element[0],i)?r.element.attr(i,n):r.wrapper.attr(i,n)})},_setValidation:function(){var r,i,u,f;this._hiddenInput.rules("add",this.model.validationRules);r=this.element.closest("form").data("validator");r=r?r:this.element.closest("form").validate();name=this._hiddenInput.attr("name");r.settings.messages[name]={};for(i in this.model.validationRules)if(u=null,!t.isNullOrUndefined(this.model.validationRules[i])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){r.settings.messages[name][i]=n.validator.messages[i];for(f in this.model.validationMessage)i==f?u=this.model.validationMessage[i]:""}else u=this.model.validationRules.messages[i];r.settings.messages[name][i]=u!=null?u:n.validator.messages[i]}},_setShowPrompt:function(n){this.model.showPromptChar=n;this._textbox.value=this.model.showPromptChar?this._unStrippedMask:this.get_UnstrippedValue()},_controlStatus:function(n){n!=!0?this.disable():this.enable()},_setValues:function(){this._unStrippedMask=null;this._charMap={"9":"[0-9 ]",a:"[A-Za-z0-9 ]",A:"[A-Za-z0-9]",N:"[0-9]","#":"[0-9]","&":"[^]+","<":"",">":"",C:this.model.customCharacter!=null?"["+this.model.customCharacter+"]":"[A-Za-z ]","?":"[A-Za-z]"}},_renderControl:function(){if(this.model.name=this.element.attr("name")!=null?this.element.attr("name"):this.model.name!=null?this.model.name:this.element[0].id,this.element.attr("name")!=null&&this.element.removeAttr("name"),this.wrapper=t.buildTag("span.e-mask e-widget "+this.model.cssClass),this.innerWrapper=t.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this._hiddenInput=t.buildTag("input#"+this._id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element),this._isWatermark||this.model.inputMode=="password"||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this.model.watermarkText),this._hiddenSpan.css("display","none"),this._hiddenSpan.bind("mousedown",n.proxy(this._OnFocusHandler,this))),t.isNullOrUndefined(this.model.value)&&this.element[0].value!=""&&(this.model.value=this.element[0].value),t.isNullOrUndefined(this.model.value)||(this.wrapper.addClass("e-valid"),typeof this.model.value=="number"&&(this.model.value=this.model.value.toString())),this._hiddenInput.attr({name:this.model.name,value:this.model.value}),this.element.attr({"aria-invalid":!1}).addClass("e-input"),this.model.maskFormat==""&&this.model.value==null){var i=this;setTimeout(function(){i.element.val()!=""&&(i.option("value",i.element.val()),i.previousValue=i.model.value,i._initObjects())},500)}else this.element.attr({value:this.model.value});t.isNullOrUndefined(this._options.inputMode)&&!t.isNullOrUndefined(this.element.attr("type"))?this.model.inputMode=this.element.attr("type"):this._setInputMode(this.model.inputMode);this._setWidth(this.model.width);this._setHeight(this.model.height);this._roundedCorner(this.model.showRoundedCorner);this._setTextAlign(this.model.textAlign);this._setReadOnly(this.model.readOnly);this._controlStatus(this.model.enabled);this.previousValue=this.model.value},_initObjects:function(){var t,n;if(this._textbox=this.element[0],this._keypressFlag=0,this._selectedTextKeyDown=0,this._keydownFlag=0,this.model.maskFormat.indexOf("\\")>=0){for(t=0,n=0;n<this.model.maskFormat.length;n++)this.model.maskFormat[n]=="\\"&&(t+=1);this._maskLength=this.model.maskFormat.length-t}else this._maskLength=this.model.maskFormat.length;this._maskModel=this.model.maskFormat.indexOf("\\")>=0?this.model.maskFormat:this.model.maskFormat.replace(/[9?CANa#&]/g,"_");this._changeMask(this.model.locale);(this._maskModel.indexOf("<")>=0||this._maskModel.indexOf(">")>=0)&&(this._maskModel=this._maskModel.replace(/[<>]/g,""),this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,""),this._valueMapper());this._validatedValue=this._maskModel;this.model.inputMode!="password"&&(this._setValue(this.model.value),this._setWaterMark());this.model.showError&&this.element.addClass("e-error").attr("aria-invalid","true")},_setWidth:function(n){this.wrapper.width(n)},_setHeight:function(n){this.wrapper.height(n)},_roundedCorner:function(n){n&&!this.innerWrapper.hasClass("e-corner")?this.innerWrapper.addClass("e-corner"):this.innerWrapper.hasClass("e-corner")&&this.innerWrapper.removeClass("e-corner")},_setTextAlign:function(n){n=="right"?(this.element.css("text-align",""),this.wrapper.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.element.css("text-align",n))},_setInputMode:function(n){this.element.attr("type",n)},_setReadOnly:function(n){this.model.readOnly=n;n?this.element.attr("readonly",!0):this.element.removeAttr("readonly")},_setSkin:function(n){this.wrapper.removeClass(this.model.cssClass);this.wrapper.addClass(n)},_setWaterMark:function(){var i=this.model.showPromptChar?this._maskModel:this._maskModel!=""&&this._maskModel!=null?this._maskModel.replace(/[_]/g," "):this._maskModel;this._maskModel=this.model.maskFormat.indexOf("\\")>=0?this.model.maskFormat===""?null:this.model.maskFormat:n.trim(this.model.maskFormat.replace(/[9?CANa#&]/g,"_"))===""?null:this.model.maskFormat.replace(/[9?CANa#&]/g,"_");(this._maskModel!=""&&this._maskModel!=null&&this._textbox.value==i||i==""&&this._textbox.value==""&&this.model.inputMode!="password")&&(this._textbox.value="");this.model.watermarkText.length!=0||t.isNullOrUndefined(this.element.attr("placeholder"))||(this.model.watermarkText=this.element.attr("placeholder"));this.model.watermarkText&&(this._isWatermark?this.element.attr("placeholder",this.model.watermarkText):this._textbox.value?this._hiddenSpan.css("display","none").text(this.model.watermarkText):this._hiddenSpan.css("display","block").text(this.model.watermarkText));this.model.watermarkText||this._textbox.value||!this.model.maskFormat||(this.model.hidePromptOnLeave?(this._unStrippedMask=this._maskModel,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=i)},_changeWatermark:function(t){if(!this.model.enabled)return!1;var i=this.model.showPromptChar?this._maskModel:this._maskModel!=""&&this._maskModel!=null?this._maskModel.replace(/[_]/g," "):this._maskModel;(this._textbox.value==i||this._textbox.value==""||n.trim(this.get_StrippedValue())=="")&&this.model.inputMode!="password"&&(this._textbox.value="");this._isWatermark?this.element.attr("placeholder",t):this._hiddenSpan.text(t);!this.model.watermarkText&&n.trim(this.get_StrippedValue())==""&&this.model.maskFormat&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._maskModel,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=i)},_showAlert:function(){var t=this;this.element.addClass("e-error").attr("aria-invalid","true").animate({Opacity:1},700,null,function(){n(t._textbox).removeClass("e-error").attr("aria-invalid","false")})},_unMask:function(){for(var f="",n=0,t=0,r,o="_",s,h=this.model.value.toString(),u=h.replace(/[\(\)-]/g,""),e;n<this._rules.length;){if(r=u[t],s=this._rules[n],r==i)break;if(r===s||r===o?(f+=r===o?o:"",t+=1,n+=1):this._rules[n].rule!=i&&r.match(this._rules[n].rule)?(e=u.charCodeAt(t),this._validateChars(e,n)?(f+=u.charAt(t),n++,t++):n++):typeof s!="string"?r.match(this._rules[n].rule)?(e=u.charCodeAt(t),this._validateChars(e,n)&&(f+=u.charAt(t),n++,t++)):(t++,n++):n++,t>u.length)break}return f},_validateValue:function(){var b,v,o,e,w,c,n,f,y;if(!t.isNullOrUndefined(this.model.value)){var h=this.model.value,u=this._maskModel,r=f=0,s,a="_",p,l=this._unMask();if(this._isWatermark||this.model.inputMode=="password"||this._hiddenSpan.css("display","none"),this._maskLength==0)return this._textbox.value=h,this._setWaterMark(),!0;for(b=this.model.value.toString(),h=this.model.maskFormat.indexOf("\\")>=0||this.model.customCharacter!=null?this.model.value:this.model.value=b.replace(/[\(\)-]/g,"");r<this._rules.length;){if(s=l[f],p=this._rules[r],s==i)break;if(s===p||s===a?(s===a?a:"",o=u.substring(0,r),e=u.substring(r),u=o+s+e.substr(1,e.length),f+=1,r+=1):this._rules[r].rule!=i?(v=l.charCodeAt(f),this._validateChars(v,r)?(o=u.substring(0,r),e=u.substring(r),u=o+l.charAt(f)+e.substr(1,e.length),r++,f++):r++):typeof p!="string"?s.match(this._rules[r].rule)?(v=l.charCodeAt(f),this._validateChars(v,r)?(o=u.substring(0,r),e=u.substring(r),u=o+l.charAt(f)+e.substr(1,e.length),r++,f++):r++):(o=u.substring(0,r),e=u.substring(r),u=o+a+e.substr(1,e.length),f++,r++):r++,f>h.length)break}if(this.model.value)if(this._textbox.value=u,this.model.value=this.get_UnstrippedValue(),this.model.maskFormat.indexOf("\\")>=0||this.model.maskFormat.indexOf("&")>=0){for(this._textbox.value="",w=0,_pos=0;_pos<this.model.maskFormat.length;_pos++)this.model.maskFormat[_pos]=="\\"&&(w+=1);if(c=0,this.model.value.length==u.length-w)for(n=0;n<this.model.maskFormat.length;++n)this.model.maskFormat[n]=="\\"?c=c+1:this.model.maskFormat[n-1]=="\\"?this._textbox.value+=h[n-c]:this.model.maskFormat[n]=="\\"||(this._textbox.value+=h.length<=n-c?u[n].replace(/[9?CANa#&]/g,"_"):h[n-c].replace(/[9?CANa#&]/g,"_"));else for(this._textbox.value="",n=0;n<this.model.maskFormat.length;++n)this.model.maskFormat[n-1]=="\\"?this._textbox.value+=u[n]:this.model.maskFormat[n]=="\\"||(this._textbox.value+=u[n].replace(/[9?CANa#&]/g,"_"))}else this.model.hidePromptOnLeave?(this._unStrippedMask=u.replace(/[ ]/g,"_"),this._textbox.value=u):this._textbox.value=u;else if(this.model.maskFormat.indexOf("\\")>=0)for(n=0;n<this.model.maskFormat.length;++n)this.model.maskFormat[n-1]=="\\"?this._textbox.value+=this.model.maskFormat[n]:this.model.maskFormat[n]=="\\"||(this._textbox.value+=this.model.maskFormat[n].replace(/[9?CANa#&]/g,"_"));else this._textbox.value=this.model.maskFormat.replace(/[9?CANa#&]/g,"_");if(this._textbox.value!=i&&this.model.hidePromptOnLeave&&(this._unStrippedMask=this._textbox.value.replace(/[ ]/g,"_"),this._textbox.value=this.get_UnstrippedValue()),this._maskModel!=null&&(this._textbox.value.indexOf(">")>=0||this._textbox.value.indexOf("<")>=0)&&(this._textbox.value=this._textbox.value.replace(/[<>]/g,""),this._tempMask=this.model.maskFormat,this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,"")),this.model.showPromptChar||(this._textbox.value=this.get_UnstrippedValue()),this._tempMask!=null)for(f=0;f<this._textbox.value.length;f++)y=this._updateCasing(this._textbox.value[f],f),t.isNullOrUndefined(y)||(this._textbox.value=this._textbox.value.substring(0,f)+y+this._textbox.value.substring(f+y.length));this._setWaterMark()}},_selectionText:function(n,i){var r=t.isNullOrUndefined(this._maskModel)?"":this._maskModel.substring(n,i);return(this._textbox.value=this._textbox.value.substring(0,n)+r+this._textbox.value.substring(i),this._keydownFlag==1)?(this._setCaretPosition(n),n):this._keydownFlag==2?(this._setCaretPosition(i),i):n},_caretPosition:function(n){var t=0,i,r;return document.selection?(i=document.selection.createRange(),r=i.text.length,i.moveStart("character",-n.value.length),t=i.text.length-r,r!=0&&(t=this._selectionText(t,i.text.length),this._selectedTextKeyDown=1)):(n.selectionStart||n.selectionStart=="0")&&(t=n.selectionStart,n.selectionStart!=n.selectionEnd&&(this._keydownFlag&&(t=this._selectionText(n.selectionStart,n.selectionEnd)),this._selectedTextKeyDown=1)),t},_setCaretPosition:function(n){var t=this._textbox,i;window.navigator.appName=="Microsoft Internet Explorer"?t.createTextRange&&(i=t.createTextRange(),i.move("character",n),i.select()):t.selectionStart||t.selectionStart=="0"?(t.focus(),t.setSelectionRange(n,n)):t.focus()},_validateChars:function(t,i){var o=this._charMap,u=!1,f,r,e;return this.model.maskFormat.indexOf("\\")>=0?(_position=this._getCunrrentPos(i),f=this.model.maskFormat.substr(i+_position,1)):f=this.model.maskFormat.substr(i,1),r=this.model.customCharacter,e=String.fromCharCode(t),n.each(o,function(n,t){f==n&&(r!=null&&(n=="C"?t="["+r+"]":(n=="A"||n=="N"||n=="#")&&(t=t.replace("]","")+r+"]")),u=e.match(new RegExp(t))?!0:!1)}),u},_seekNext:function(){for(var n=this._caretPosition(this._textbox),r=n,u=!0,t,i;u;){if(n>=0&&n<this._maskLength){for(t=0,i=0;i<=n;i++)this.model.maskFormat[i]=="\\"&&(t+=1);if(this.model.maskFormat.charAt(n)!="C"&&(this.model.maskFormat.indexOf("\\")>=0?this.model.maskFormat.charAt(n+t)!="\\"&&this.model.maskFormat.charAt(n+t-1)!="\\"&&(this._charMap[this.model.maskFormat.charAt(n+t)]||(this._setCaretPosition(n),n++)):this._charMap[this.model.maskFormat.charAt(n)]||(this._setCaretPosition(n),n++),n!=r)){r=n;continue}}u=!1}return n},_seekBefore:function(){var n=this._caretPosition(this._textbox),i=--n,t=!0;for(this._selectedTextKeyDown==1&&(t=!1);t;){if(n>=0&&n<this._maskLength&&(this.model.maskFormat.charAt(n)!="C"&&(this._charMap[this.model.maskFormat.charAt(n)]||this._setCaretPosition(--n)),n!=i)){i=n;continue}t=!1}return n},_writeBuffer:function(n,t){var u,o,f,r,s,e;if(t<=this._maskLength){if(u=this._textbox.value,this._tempMask!=null&&(o=this._updateCasing(n,t)),n=o==i?n:o,f=u.substring(0,t),r=u.substring(t),this.model.maskFormat.indexOf("\\")>=0){for(s=0,e=0;e<=t;e++)this.model.maskFormat[e].indexOf("\\")>=0&&t!=0&&(s+=1);this._textbox.value=this.model.maskFormat[t+s].indexOf("\\")>=0?f+u[t]+r.substr(1,r.length):f+n+r.substr(1,r.length)}else this._textbox.value=f+n+r.substr(1,r.length);this._setCaretPosition(t+1)}},_updateCasing:function(n,t){for(var r,i=0;i<t+1;i++)(this._tempMask.substr(i,1)=="<"||this._tempMask.substr(i,1)==">")&&t++;for(r=t;r>-1;r--){if(this._tempMask.substr(r,1)=="<")return n.toLowerCase();if(this._tempMask.substr(r,1)==">")return n.toUpperCase()}},get_StrippedValue:function(){var u,o=this.model.maskFormat,f=null,e,i,t,r;if(u=this._textbox.value==""&&this.model.inputMode!="password"?this._maskModel:this._textbox.value,o.length==0)return u;for(e=0,i=0;i<o.length;i++)f=n.trim(f),this.model.maskFormat.indexOf("\\")>=0?this.model.maskFormat[i]=="\\"?e+=1:this.model.maskFormat[i-1]=="\\"?f+=this._textbox.value[i-e]:(t=o[i],r=null,"9?$a*".indexOf(t)!=-1?r=this._charMap[t]:t=="A"||t=="N"||t=="#"?r=this._charMap[t].replace("]","")+this.model.customCharacter+"]":t=="C"?r="["+this.model.customCharacter+"]":t=="&"&&(f+=u[i-e]),r&&u[i-e]&&u[i-e].match(new RegExp(r))&&(f+=u[i-e])):(t=o[i],r=null,"9?$a*".indexOf(t)!=-1?r=this._charMap[t]:t=="A"||t=="N"||t=="#"?r=this._charMap[t].replace("]","")+this.model.customCharacter+"]":t=="C"?r="["+this.model.customCharacter+"]":t=="&"&&(f+=u[i-e]),r&&u[i]&&u[i].match(new RegExp(r))&&(f+=u[i]));return f},get_UnstrippedValue:function(){var t=this._textbox.value==""&&this.model.inputMode!="password"?this._maskModel:this._textbox.value,r=null;return this.model.maskFormat.length==0?t:(t!=i&&(r=n.trim(t.replace(/[_]/g," "))==""?null:t.replace(/[_]/g," ")),r)},_setValue:function(i){(t.isNullOrUndefined(i)||n.trim(i)=="")&&(i=null);this.model.value=i;this._isWatermark||this.model.inputMode=="password"||this._hiddenSpan.css("display","none");t.isNullOrUndefined(this.model.maskFormat)||this.model.maskFormat==""?(this._textbox.value=t.isNullOrUndefined(i)?"":i,this._unStrippedMask=this._textbox.value):(this._validateValue(),t.isNullOrUndefined(this.model.value)&&(this._textbox.value=t.isNullOrUndefined(i)?"":i,this._unStrippedMask=this._maskModel));this._setWaterMark()},_valueMapper:function(){for(var u=[],i=0,o=this.model.maskFormat||"",s=o.split(""),f=0,n,r="",e,h=this._charMap,t;f<o.length;f++)if(n=s[f],e=h[n],e)u[i]={rule:e},r+="_",i+=1;else for(n==="\\"&&(idx+=1,n=s[idx]),n=n.split(""),t=0;t<n.length;t++)u[i]=n[t],r+=n[t],i+=1;this._rules=u;this._emptyMask=r;this._maskLength=r.length},_changeMask:function(n){var r,f,e,o,u,i;if(this._maskModel.length!=0){for(r=t.preferredCulture(n),u="",f=r.numberFormat[","],e=r.numberFormat.currency.symbol,o=r.numberFormat["."],i=0;i<this._maskModel.length;i++)u+=this._maskModel[i]==","?f:this._maskModel[i]=="."?o:this._maskModel[i]=="$"?e:this._maskModel[i];this._maskModel=u}},_setMask:function(i){this._maskLength=i.length;this.model.maskFormat=i;this._tempMask=this.model.maskFormat;this._maskModel=i.replace(/[9?CANa]/g,"_");(this._maskModel.indexOf("<")>=0||this._maskModel.indexOf(">")>=0)&&(this._maskModel=this._maskModel.replace(/[<>]/g,""),this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,""));t.isNullOrUndefined(this.model.maskFormat)||this.model.maskFormat==""?this.model.watermarkText||this._textbox.value==this._maskModel||(this.model.maskFormat?this.model.hidePromptOnLeave?(this._textbox.value=this._maskModel,this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=this._maskModel:(unstripVal=this._unStrippedMask.replace(/[_]/g," "),this._textbox.value=this.model.customCharacter==null?n.trim(unstripVal.replace(/[\(\)-]/g,"")):n.trim(unstripVal),this._unStrippedMask=this._textbox.value)):this._validateValue()},enable:function(){this.element.disabled=!1;this.element.removeAttr("disabled").removeClass("e-disable").attr({"aria-disabled":!1});this.wrapper.find(".e-placeholder").length>0&&this.wrapper.find(".e-placeholder").removeAttr("disabled","disabled");this.wrapper.removeClass("e-disable-wrap");this.model.enabled=!0},disable:function(){this.element.disabled=!0;this.element.attr("disabled","disabled").addClass("e-disable").attr({"aria-disabled":!0});this.wrapper.find(".e-placeholder").length>0&&this.wrapper.find(".e-placeholder").attr("disabled","disabled");this.wrapper.addClass("e-disable-wrap");this.model.enabled=!1},clear:function(){this._textbox.value=this.model.maskFormat.replace(/[9?aCAN]/g,"_");this.model.value=this.get_StrippedValue()},_wireEvents:function(){this._on(this.element,"focus",this._OnFocusHandler);this._on(this.element,"blur",this._OnBlurHandler);this._on(this.element,"keydown",this._OnKeyDownHandler);this._on(this.element,"keypress",this._OnKeyPressHandler);this._on(this.element,"keyup",this._OnKeyUpHandler);this._on(this.element,"mouseover",this._OnMouseOverHandler);this._on(this.element,"mouseout",this._OnMouseOutHandler);this._on(this.element,"paste",this._OnPasteHandler);this._on(this.element,"cut",this._OnCutHandler)},_OnCutHandler:function(){var i=t.isNullOrUndefined(this._maskModel)?"":this._maskModel.substring(this._textbox.selectionStart,this._textbox.selectionEnd),r=this._textbox.value.substring(0,this._textbox.selectionStart),u=this._textbox.value.substring(this._textbox.selectionEnd),f=this._textbox.selectionStart,n=this;setTimeout(function(){n._textbox.value=r+i+u;n._setCaretPosition(f);n._raiseEvents("change")},0)},_OnPasteHandler:function(){var t=this;return setTimeout(function(){var i=n(t._textbox).val();t._setValue(i);t._raiseEvents("change")},0),!0},_OnFocusHandler:function(){this.wrapper.addClass("e-focus");var i=this.model.showPromptChar?this._maskModel:this._maskModel!=""&&this._maskModel!=null?this._maskModel.replace(/[_]/g," "):this._maskModel;this.model.readOnly||(this._focusValue=this.model.value,this._isWatermark||this.model.inputMode=="password"||this._hiddenSpan.css("display","none"),this._textbox.value==""&&this._maskModel!=""&&this.model.inputMode!="password"&&(this._textbox.value=this.model.maskFormat.indexOf("\\")>=0?this.model.watermarkText:t.isNullOrUndefined(this._maskModel)?"":i),this._maskModel!=null&&(this._textbox.value.indexOf("<")>=0||this._textbox.value.indexOf(">")>=0)&&(this._textbox.value=this._textbox.value.replace(/[<>]/g,""),this._maskModel=this._textbox.value,this._tempMask=this.model.maskFormat,this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,"")),this._textbox.value!=i&&this._unStrippedMask!=null&&this.model.hidePromptOnLeave&&(this._textbox.value=this._unStrippedMask),this.model.showPromptChar||(this._textbox.value=this.get_UnstrippedValue()),n.fn.selectRange=function(n,t){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(n,t);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",n);i.select()}})},this.model.maskFormat&&n(this.element).selectRange(0,0),this._raiseEvents("focusIn"))},_OnBlurHandler:function(){var f,r,n,u;if(this.wrapper.removeClass("e-focus"),this.model.value=this.get_StrippedValue(),f=[],r=[],(this._textbox.value.indexOf("_")!=-1||this._textbox.value.indexOf(" ")!=-1)&&!t.isNullOrUndefined(this.model.value)){for(n=0;n<this.model.maskFormat.length;n++)this.model.maskFormat[n]=="A"||this.model.maskFormat[n]=="?"?f.push(n):(this.model.maskFormat[n]=="9"||this.model.maskFormat[n]=="a"||this.model.maskFormat[n]=="C")&&r.push(n);for(n=0;n<f.length;n++)this._textbox.value[f[n]]==="_"&&(this._showAlert(),this.model.value=this._textbox.value);for(n=0;n<r.length;n++)if(this.model.value[r[n]]=="_"||this.model.value[r[n]]==" ")for(this.model.value=this.model.value.substr(0,r[n])+this.model.value.substr(r[n]+1,this.model.value.length),u=n;u<r.length;u++)r[u]=r[u]-1}this.model.value=this.model.value!=null?this.model.value.replace(/\s+/g,""):this.model.value;this._textbox.value!=i&&(this.model.watermarkText==""||this.model.watermarkText!=""&&this.model.value!="")&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._unStrippedMask=this._textbox.value);this.model.inputMode!="password"&&this._setWaterMark();this._raiseEvents("change");this._raiseEvents("focusOut")},_OnKeyDownHandler:function(n){var r,e,i;if(!this.model.readOnly){if(this._keypressFlag=0,this._raiseEvents("onKeyDown",null,{keyCode:n.keyCode,altKey:n.altKey,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,originalArgs:n}),this.element.removeClass("error"),this._maskLength==0)return!0;var u=n.keyCode?n.keyCode:n.charCode,o=String.fromCharCode(u),i=this._seekNext(),f=this.model.showPromptChar?"_":" ",e=t.browserInfo().name;if(e=="msie"&&this._textbox.value==""){if(this.model.maskFormat.indexOf("\\")>=0)for(r=0;r<this.model.maskFormat.length;++r)this.model.maskFormat[r-1]=="\\"?this._textbox.value+=this.model.maskFormat[r]:this.model.maskFormat[r]=="\\"||(this._textbox.value+=this.model.maskFormat[r].replace(/[9?CANa#&]/g,"_"));else this._textbox.value=this.model.maskFormat.replace(/[9?CANa#&]/g,"_");this._setCaretPosition(i)}if(u>=35&&u<=41&&(window.navigator.appCodeName=="Mozilla"||window.navigator.appCodeName=="opera")&&(this._keypressFlag=1),n.shiftKey&&(n.keyCode==35||n.keyCode==36||n.keyCode==37||n.keyCode==39||n.keyCode==46||n.keyCode==127)||n.ctrlKey&&(n.keyCode==86||n.keyCode==65||n.keyCode==67||n.keyCode==88)){this._keypressFlag=1;return}return u==8?this.model.inputMode!="password"?(this._keydownFlag=1,i=this._seekBefore(),this._selectedTextKeyDown?!this.model.showPromptChar&&this._selectedTextKeyDown&&(this._textbox.value=this.get_UnstrippedValue(),this._setCaretPosition(i+1)):(i>=0&&i<this._maskLength&&this._writeBuffer(f,i),this._setCaretPosition(i)),this._keydownFlag=0,this._selectedTextKeyDown=0,n.preventDefault(),!1):(this._keypressFlag=1,!0):n.keyCode==46||n.keyCode==127?this.model.inputMode!="password"?(this._keydownFlag=2,i=this._seekNext(),this._selectedTextKeyDown?!this.model.showPromptChar&&this._selectedTextKeyDown&&(this._textbox.value=this.get_UnstrippedValue(),this._setCaretPosition(i)):i>=0&&i<this._maskLength&&(_position=this._getCunrrentPos(i),this.model.maskFormat[i+_position]=="&"||this._writeBuffer(f,i)),this._keydownFlag=0,this._selectedTextKeyDown=0,n.preventDefault(),!1):(this._keypressFlag=1,!0):void 0}},_ErrorHandler:function(n){var t=this.model.showPromptChar?"_":" ";this._textbox.value==""&&(this._textbox.value=this.model.maskFormat.replace(/[9?$CANa*]/g,t));this._setCaretPosition(n);this._showAlert()},_getCunrrentPos:function(n){for(var t=0,i=0;i<=n+t;i++)this.model.maskFormat[i]=="\\"&&(t+=1);return t},_OnKeyPressHandler:function(n){if(!this.model.readOnly){if(this._raiseEvents("keyPress",null,{keyCode:n.keyCode,altKey:n.altKey,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,originalArgs:n}),this._maskLength==0)return!0;var r=n.keyCode?n.keyCode:n.charCode,f=String.fromCharCode(r),e=this.model.showPromptChar?"_":" ",i=this._seekNext(),u=t.browserInfo().name;if(this._validateChars(r,i)?(u=="mozilla"||u=="opera")&&(n.keyCode==35||n.keyCode==36||n.keyCode==37||n.keyCode==39)||(u=="mozilla"||u=="opera")&&n.ctrlKey&&(r==97||r==99||r==118||r==120)||(this._textbox.value==""&&(this._textbox.value=this.model.maskFormat.replace(/[9?$CANa*]/g,e)),this.model.maskFormat.indexOf("\\")>=0?i<this._maskLength&&this._writeBuffer(f,i):this._writeBuffer(f,i)):(u=="mozilla"||u=="opera")&&(n.keyCode==35||n.keyCode==36||n.keyCode==37||n.keyCode==39)||(u=="mozilla"||u=="opera")&&n.ctrlKey&&(r==97||r==99||r==118||r==120)||(this.model.maskFormat.indexOf("&")>=0||this.model.maskFormat.indexOf("\\")>=0?(_position=this._getCunrrentPos(i),this.model.maskFormat[i+_position]=="&"&&r==127||(this.model.maskFormat.indexOf("\\")>=0?i<this._maskLength&&(this._validateChars(r,i+_position)||this.model.maskFormat[i+_position-1]=="\\"?this._writeBuffer(f,i):this._ErrorHandler(i)):this._validateChars(r,i+_position)?this._writeBuffer(f,i):this._ErrorHandler(i))):this._ErrorHandler(i)),!this._keypressFlag&&r!=9)return this._keypressFlag=0,n.preventDefault(),!1;this._keypressFlag=0}},_OnKeyUpHandler:function(n){this._maskLength==0&&this._raiseEvents("change");this._raiseEvents("keyUp",null,{keyCode:n.keyCode,altKey:n.altKey,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,originalArgs:n});t.isNullOrUndefined(this.model.validationRules)||this._hiddenInput.valid()},_OnMouseOverHandler:function(){this._raiseEvents("mouseOver")},_OnMouseOutHandler:function(){this._raiseEvents("mouseOut")},_raiseEvents:function(i,r,u){var f,o=this.get_StrippedValue(),e=this.get_UnstrippedValue();if(this.model.value=e!==null?this.model.customCharacter==null&&n.trim(e.replace(/[\(\)-]/g,""))==""?null:e:null,i=="change")if(this.previousValue!=this.model.value)this.previousValue=this.model.value;else if(this._focusValue==this.model.value)return!1;f={value:e,unmaskedValue:o};i=="change"&&(f.isInteraction=!r);i=="change"&&(this._trigger("_change",f),t.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid"));u&&n.extend(!0,f,u);this._trigger(i,f);this._hiddenInput.val(o)},_OnValueChange:function(){this._textbox.value==""&&this._maskModel!=""&&(this._textbox.value=this._maskModel);this._setValue(this._textbox.value)}});t.InputMode={Password:"password",Text:"text"}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejRTE","ej.RTE",{element:null,model:null,_rootCSS:"e-rte",validTags:["textarea"],_addOnPersist:["value","height","width"],_setFirst:!1,_requiresID:!0,_operationHandler:null,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{allowEditing:!0,isResponsive:!1,allowKeyboardNavigation:!0,enableTabKeyNavigation:!0,cssClass:"",height:"370",width:"786",enabled:!0,htmlAttributes:null,externalCSS:null,enableXHTML:!1,importSettings:{url:""},exportToPdfSettings:{url:"",fileName:"PdfExport"},exportToWordSettings:{url:"",fileName:"WordExport"},validationRules:null,validationMessage:null,maxLength:7e3,minWidth:"400",maxWidth:null,minHeight:"280",maxHeight:null,showToolbar:!0,showFooter:!1,showHtmlSource:!1,showWordCount:!0,showCharCount:!0,showHtmlTagInfo:!0,showClearAll:!1,iframeAttributes:null,showClearFormat:!0,showContextMenu:!0,showFontOption:!0,autoFocus:!1,enableHtmlEncode:!1,showDimensions:!1,showRoundedCorner:!1,locale:"en-US",name:"",pasteCleanupSettings:{listConversion:!1,cleanCSS:!1,removeStyles:!1,cleanElements:!1},toolbarOverflowMode:"popup",tools:{formatStyle:["format"],edit:[],style:["bold","italic","underline","strikethrough"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],lists:["unorderedList","orderedList"],indenting:["outdent","indent"],doAction:["undo","redo"],links:["createLink","removeLink"],images:["image"],media:["video"],tables:["createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn","deleteTable"],view:["fullScreen"],customTools:[],print:[],customOrderList:[],customUnOrderList:[],font:[],clipboard:[],clear:[],effects:[],casing:[],importExport:[]},tooltipSettings:{associate:"mouseenter",showShadow:!0,position:{stem:{horizontal:"left",vertical:"top"}},tip:{size:{width:5,height:5}},isBalloon:!1},toolsList:["formatStyle","font","style","effects","alignment","lists","indenting","clipboard","doAction","clear","links","images","media","tables","casing","customTools","view","print","edit","importExport"],colorCode:["000000","FFFFFF","C4C4C4","ADADAD","595959","262626","4f81bd","dbe5f1","b8cce4","95b3d7","366092","244061","c0504d","f2dcdb","e5b9b7","d99694","953734","632423","9bbb59","ebf1dd","d7e3bc","c3d69b","76923c","4f6128","8064a2","e5e0ec","ccc1d9","b2a2c7","5f497a","3f3151","f79646","fdeada","fbd5b5","fac08f","e36c09","974806"],format:[{text:"Paragraph",value:"<p>",spriteCssClass:"e-paragraph"},{text:"Quotation",value:"<blockquote>",spriteCssClass:"e-quotation"},{text:"Heading 1",value:"<h1>",spriteCssClass:"e-h1"},{text:"Heading 2",value:"<h2>",spriteCssClass:"e-h2"},{text:"Heading 3",value:"<h3>",spriteCssClass:"e-h3"},{text:"Heading 4",value:"<h4>",spriteCssClass:"e-h4"},{text:"Heading 5",value:"<h5>",spriteCssClass:"e-h5"},{text:"Heading 6",value:"<h6>",spriteCssClass:"e-h6"}],fontName:[{text:"Segoe UI",value:"Segoe UI"},{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"Courier New,Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"Lucida Console,Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"Times New Roman,Times,serif"},{text:"Trebuchet MS",value:"Trebuchet MS,Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"8pt"},{text:"2 (10pt)",value:"10pt"},{text:"3 (12pt)",value:"12pt"},{text:"4 (14pt)",value:"14pt"},{text:"5 (18pt)",value:"18pt"},{text:"6 (24pt)",value:"24pt"},{text:"7 (36pt)",value:"36pt"}],tableRows:8,tableColumns:10,colorPaletteRows:6,colorPaletteColumns:6,showCustomTable:!0,value:null,undoStackLimit:50,enableResize:!0,enablePersistence:!1,enableRTL:!1,autoHeight:!1,zoomStep:"0.05",imageBrowser:{filePath:"",extensionAllow:"*.png,*.gif,*.jpg,*.jpeg",ajaxAction:"",ajaxSettings:""},fileBrowser:{filePath:"",extensionAllow:"*.doc,*.docx,*.pdf,*.txt",ajaxAction:""},change:null,execute:null,keydown:null,keyup:null,create:null,destroy:null,contextMenuClick:null,preRender:null,select:null},dataTypes:{enabled:"boolean",autoFocus:"boolean",enableHtmlEncode:"boolean",autoHeight:"boolean",enableXHTML:"boolean",isResponsive:"boolean",enablePersistence:"boolean",showRoundedCorner:"boolean",showCustomTable:"boolean",enableResize:"boolean",importSettings:{url:"string"},exportToPdfSettings:{url:"string",fileName:"string"},exportToWordSettings:{url:"string",fileName:"string"},pasteCleanupSettings:{listConversion:"boolean",cleanCSS:"boolean",removeStyles:"boolean",cleanElements:"boolean"},showDimensions:"boolean",showFontOption:"boolean",showClearFormat:"boolean",showClearAll:"boolean",showHtmlTagInfo:"boolean",showWordCount:"boolean",showCharCount:"boolean",showHtmlSource:"boolean",allowKeyboardNavigation:"boolean",enableTabKeyNavigation:"boolean",allowEditing:"boolean",showToolbar:"boolean",showFooter:"boolean",showContextMenu:"boolean",enableRTL:"boolean",toolsList:"array",colorCode:"array",toolbarOverflowMode:"enum",format:"data",fontName:"data",fontSize:"data",htmlAttributes:"data",iframeAttributes:"data",tools:{formatStyle:"array",font:"array",edit:"array",style:"array",effects:"array",alignment:"array",lists:"array",indenting:"array",clipboard:"array",doAction:"array",clear:"array",links:"array",media:"array",images:"array",tables:"array",casing:"array",customTools:"array",view:"array",print:"array",importExport:"array",customOrderList:"array",customUnOrderList:"array"}},_rteIconsList:{format:"format",bold:"e-bold_01",italic:"e-italic_01",underline:"e-underline_01",strikethrough:"e-strikethrough_01",justifyLeft:"e-align-left_01",justifyCenter:"e-align-center_01",justifyRight:"e-align-right_01",justifyFull:"e-align-justify_01",unorderedList:"e-bullets_01",orderedList:"orderedList",outdent:"outdent",indent:"indent",undo:"undo",redo:"redo",createLink:"e-link_01",removeLink:"e-unlink_01",image:"e-image",video:"e-video",createTable:"e-table_02",addRowAbove:"e-insert-row-above_02",addRowBelow:"e-insert-row-below_02",addColumnLeft:"e-insert-column-left_02",addColumnRight:"e-insert-column-right_02",deleteRow:"e-delete-row_01",deleteColumn:"e-delete-column_01",deleteTable:"deleteTable",fullScreen:"fullScreen",superscript:"e-superscript_01",subscript:"e-subscript_01",upperCase:"e-uppercase_01",lowerCase:"e-lowercase_01",zoomIn:"e-zoom-in",zoomOut:"e-zoom-out",print:"print","import":"e-upload",wordExport:"e-icon e-word-export",pdfExport:"e-icon e-pdf-export",findAndReplace:"findAndReplace",cut:"e-cut_01",copy:"e-copy_02",paste:"e-paste_01",clearFormat:"clearFormat",clearAll:"e-delete_05",fontName:"fontName",fontSize:"fontSize",fontColor:"e-font",backgroundColor:"e-background-color",rteResize:"e-resize-handle",rteSource:"e-file-code",customTableImage:"e-table",resize:"e-full-screen-collapse_01",maximize:"e-full-screen-expand_01",openLink:"",deleteTables:"",insertTable:"",tableProperties:"",imageProperties:""},observables:["value"],value:t.util.valueFunction("value"),_setModel:function(i){var r,f,e,h,o,c,u,s;this._isInteraction=!1;for(r in i){switch(r){case"allowEditing":this._enableEdit(i[r]);break;case"autoFocus ":this.model.autoFocus=i[r];i[r]&&this._focus();break;case"showToolbar":i[r]?t.isNullOrUndefined(this._rteToolbar)?this._renderToolBar():(this._rteToolbar.show(),this.model.isResponsive&&this._toolBarObj._reSizeHandler()):this._rteToolbar.hide();break;case"showFooter":this.model.showFooter=i[r];i[r]?t.isNullOrUndefined(this._rteFooter)?this._renderFooter():this._rteFooter.show():this._rteFooter.hide();break;case"pasteCleanupSettings":this.model.pasteCleanupSettings=i[r];t.clipboardCleaner&&(this._pasteCleaner||this._enableContentCleaner(),this._pasteCleaner&&(this._pasteCleaner.filterOptions=i[r]));case"isResponsive":this.model.isResponsive=i[r];this._renderToolBarList();f=n(this._rteIframe).outerHeight();e=n(this._rteToolbar).outerHeight();n(this._rteWapper).height(f+e);t.isNullOrUndefined(n(this._rteFooter))||(h=n(this._rteFooter).outerHeight(),n(this._rteWapper).height(f+h+e));break;case"enabled":this._disabled(i[r]);break;case"height":this.model.height=i[r];this._rteWapper.height(i[r]);break;case"width":this.model.height=i[r];this._rteWapper.css("width",i[r]);break;case"cssClass":this._changeSkin(i[r]);break;case"showHtmlSource":this._footerElement("div.e-rte-source",i[r]);break;case"showHtmlTagInfo":this._footerElement("div.e-rte-htmltaginfo",i[r]);break;case"showWordCount":this.model.showWordCount=i[r];this._createCountElement(i[r],this._wordCount);break;case"showCharCount":this.model.showCharCount=i[r];this._createCountElement(i[r],this._charCount);break;case"tooltipSettings":this.model.tooltipSettings=n.extend(!0,this.model.tooltipSettings,i[r]);this.model.showToolbar&&this._toolBarItems.ejToolbar("option","tooltipSettings",i[r]);this._renderTooltip(this.model.tooltipSettings);break;case"showClearAll":this._footerElement("div.clearAll",i[r]);break;case"showClearFormat":this._footerElement("div.clearFormat",i[r]);break;case"enableResize":this._footerElement("div.e-rte-resize",i[r]);break;case"fontName":this._fontStyleDDL.ejDropDownList({dataSource:i[r]});break;case"fontSize":this._fontSizeDDL.ejDropDownList({dataSource:i[r]});break;case"format":this._formatDDL.ejDropDownList({dataSource:i[r]});break;case"value":t.isPlainObject(i[r])&&(i[r]=null);o=t.util.getVal(i[r]);o!=this._getDocument().body.innerHTML&&(this._getDocument().body.innerHTML=o,c={text:this._getText(),htmlText:this.getHtml()},this._onChange());break;case"showDimensions":this._renderImageDialog();i[r]?(this._imgDialog.find("div.e-rte-imgdimensions").show(),this._imgDialog.find("div.e-rte-videoDimensions").show()):(this._imgDialog.find("div.e-rte-imgdimensions").hide(),this._imgDialog.find("div.e-rte-videoDimensions").hide());break;case"showFontOption":i[r]?this._rteWapper.find("ul.e-rte-fontgroup").show():this._rteWapper.find("ul.e-rte-fontgroup").hide();break;case"locale":this.model.locale=i[r];this._updateLocalConstant();this._setLocale();break;case"importSettings":this.model.importSettings=n.extend(!0,this.model.importSettings,i[r]);break;case"exportToPdfSettings":this.model.exportToPdfSettings=n.extend(!0,this.model.exportToPdfSettings,i[r]);break;case"exportToWordSettings":this.model.exportToWordSettings=n.extend(!0,this.model.exportToWordSettings,i[r]);break;case"tableRows":this.model.tableRows=i[r];u=this._createTable.find("div.e-rte-table").html("");this._drawTable(u);break;case"iframeAttributes":this._updateIframeSkin(i[r]);break;case"tableColumns":this.model.tableColumns=i[r];u=this._createTable.find("div.e-rte-table").html("");this._drawTable(u);break;case"showCustomTable":this._createCustomTable();s=this._createTable.find("div.customtable-group");i[r]?t.isNullOrUndefined(this._customTableDialog)?this._createCustomTable():s.show():s.hide();break;case"colorPaletteRows":this.model.colorPaletteRows=i[r];this._updateColorPalette();break;case"colorPaletteColumns":this.model.colorPaletteColumns=i[r];this._updateColorPalette();break;case"colorCode":this.model.colorCode=i[r];this._updateColorPalette();break;case"name":this.model.name=i[r];this._checkNameAttr();break;case"showContextMenu":this.model.showContextMenu=i[r];this._showHideContextMenu();break;case"enableRTL":this._enableRTL(i[r]);break;case"htmlAttributes":this._addAttr(i[r]);break;case"showRoundedCorner":this._roundedCorner(i[r]);break;case"validationRules":this.element.closest("form").length!=0&&(this.model.validationRules!=null&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[r],this.model.validationRules!=null&&(this._initValidator(),this._setValidation()));break;case"validationMessage":this.element.closest("form").length!=0&&(this.model.validationMessage=i[r],this.model.validationRules!=null&&this.model.validationMessage!=null&&(this._initValidator(),this._setValidation()));break;case"autoHeight":this.model.autoHeight=i[r];this._setAutoHeight()}r!="locale"&&this._setIframeHeight()}this._updateCount()},_updateLocalConstant:function(){this._localizedLabels=t.getLocalizedConstants("ej.RTE",this.model.locale)},_enableContentCleaner:function(){t.clipboardCleaner&&!this._isIE8()&&(this._pasteCleaner||(this._pasteCleaner=new t.clipboardCleaner(this._getDocument(),this._iframePaste,this)),this._pasteCleaner.filterOptions=this.model.pasteCleanupSettings)},_init:function(){t.isNullOrUndefined(this.element)||this.element[0].type!="textarea"||(this._updateLocalConstant(),this.element.hide(),this._initialize()._render(),this.model.allowEditing&&this._wireEvents(),this.model.pasteCleanupSettings&&(this.model.pasteCleanupSettings.cleanElements||this.model.pasteCleanupSettings.removeStyles||this.model.pasteCleanupSettings.cleanCSS||this.model.pasteCleanupSettings.listConversion)&&this._enableContentCleaner(),this.model.iframeAttributes!=null&&this._updateIframeSkin(this.model.iframeAttributes),this.model.enabled==!1&&this._disabled(this.model.enabled),this.model.htmlAttributes!=null&&this._addAttr(this.model.htmlAttributes),this.model.autoFocus&&(this._focus(),this._updateToolbarStatus(),this._updateFontOptionStatus(),this._updateFormat()),this.model.enableHtmlEncode&&this.value(this._encode(this._decode(this.value()))),this.model.showToolbar&&(this.disableToolbarItem("removeLink"),t.isNullOrUndefined(this._getWindow())||this._updateIndentStatus()),this.model.enableRTL&&this._enableRTL(!0),this.model.externalCSS&&this._addCssToIframe(this.model.externalCSS),this.wrapper=this._rteWapper,this.model.validationRules!=null&&(this._initValidator(),this._setValidation()),this.model.showContextMenu&&this._showHideContextMenu(),this._isInteraction=!0)},_hideContextMenuByItem:function(t){for(var i=0;i<n(this._textMenuObj.element).children("li").length;i++)n.inArray(n(this._textMenuObj.element.children("li")[i]).attr("id"),t)!=-1?n(this._textMenuObj.element.children("li")[i]).show():n(this._textMenuObj.element.children("li")[i]).hide()},_filterMenuItems:function(i){var r=this._isIE()?this._currentSelNode:this._getSelectedNode(),u=this._saveSelection().commonAncestorContainer;t.isNullOrUndefined(r)||t.isNullOrUndefined(r.tagName)||r.tagName.toLowerCase()!=="img"&&i.target.tagName.toLowerCase()!="img"?!t.isNullOrUndefined(r)&&n(r).closest("table").length?(this._hideContextMenuByItem(n(r).closest("a").length?this._contextType.table_hyper:this._contextType.table),this._contextValidation(u,i)):!t.isNullOrUndefined(r)&&n(r).closest("a").length?(this._hideContextMenuByItem(this._contextType.hyperlink),this._contextValidation(u,i)):this._isIE8()?(this._hideContextMenuByItem(this._contextType.text),this._updateContextMenuItemState(this._getRange().text!=="")):(this._hideContextMenuByItem(this._contextType.text),this._contextValidation(u,i)):(this._hideContextMenuByItem(this._contextType.image),this._updateContextMenuItemState(!0));this._rteIframe.contents().find("body").addClass("e-cursor")},_contextmenuPosition:function(t){var u=(t.clientX==i?0:t.clientX)+this._rteWapper.offset().left,r=(t.clientY==i?0:t.clientY)+this._rteWapper.offset().top+(this._rteToolbar?this._rteToolbar.outerHeight():0),f=this._textMenuObj.element.attr("style","visibility: visible;display:block;").height(),e=this._textMenuObj.element.width();r=r+f<n(document).scrollTop()+n(window).height()?r:r-f<0?r:r-f;u=u+e<n(document).scrollLeft()+n(window).width()?u:u-e;this._textMenuObj.element.attr("style","width:auto;left:"+u+"px;top:"+r+"px;z-index:"+(this._onGetMaxZindex()+1)).focus()},_contextValidation:function(n){var t;this._updateContextMenuItemState(n&&(t=n.nodeValue?n.nodeValue:n.textContent)&&(this._saveSelection().endContainer==this._saveSelection().startContainer?t.substring(this._saveSelection().startOffset,this._saveSelection().endOffset)!=="":!0))},_updateContextMenuItemState:function(n){n?(this._textMenuObj.enableItemByID("cut"),this._textMenuObj.enableItemByID("copy")):(this._textMenuObj.disableItemByID("cut"),this._textMenuObj.disableItemByID("copy"))},_contextMenuClick:function(r){var f=this._rteIframe.data("ejSpellCheck"),e=r.ID?r.ID.toLowerCase():n(r.element).attr("id").toLowerCase(),u,o,s,h,c;this._isIE()&&this._ieSelectionRange&&this.selectRange(this._ieSelectionRange);switch(e){case"cut":!this._isIE()&&this._getValidbrowser(t.browserInfo().name)?this._openAlert(this._getLocalizedLabels("cutAlert")):this._getDocument().execCommand(e,!1,i);this._imgOrg&&this._imgDupDiv&&this._imgBoxMouseMove&&(n(this._imgOrg).css("outline",""),n(this._imgDupDiv).remove(),this._off(n(this._getDocument()),"mousemove",this._imgBoxMouseMove));this._updateCursor();break;case"copy":!this._isIE()&&this._getValidbrowser(t.browserInfo().name)?this._openAlert(this._getLocalizedLabels("copyAlert")):this._getDocument().execCommand(e,!1,i);this.selectRange(this._getRange());break;case"paste":this._isIE()?this._getDocument().execCommand(e,!1,i):this._openAlert(this._getLocalizedLabels("pasteAlert"));break;case"openlink":this._onOpen();break;case"createlink":this._renderLinkDialog();this._linkDialog||this._renderLinkDialog();this._hyperLinkManager(!1);break;case"imageproperties":this._renderImageDialog();this._imgDialog||this._renderImageDialog();this._imageManager();break;case"addcolumnleft":u=this.insertColumn(!0,this._currentSelNode);this._updateCursor(u);break;case"addcolumnright":u=this.insertColumn(!1,this._currentSelNode);this._updateCursor(u);break;case"addrowabove":u=this.insertRow(!0,this._currentSelNode);this._updateCursor(u);break;case"addrowbelow":u=this.insertRow(!1,this._currentSelNode);this._updateCursor(u);break;case"deleterow":this.removeRow(this._currentSelNode);break;case"deletecolumn":this.removeColumn(this._currentSelNode);break;case"deletetable":this.removeTable(n(this._currentSelNode).closest("table"));break;case"tableproperties":this._renderEditTableDialog();this._eTblDialog||this._renderEditTableDialog();this._eTblManager();this._eTblDialog.ejDialog("open");break;case"removelink":this._onUnlink();break;case"add to dictionary":o=this._currentSelNode.innerText.trim();f._currentElement=n("#"+f._id);f.addToDictionary(o);this._ieCursorMaintainance();break;case"ignoreall":s=this._currentSelNode.innerText.trim();h=f.ignoreAll(s,this.getHtml());this.setHtml(h.resultHTML);this._ieCursorMaintainance();break;default:t.isNullOrUndefined(f)||(c=document.createTextNode(r.text),this._currentSelNode.parentNode.insertBefore(c,this._currentSelNode),n(this._currentSelNode).remove())}this._trigger("contextMenuClick",{event:r});this._onChange()},_updateCursor:function(n,t){if(!this._isIE8()){var i=this._getDocument().createRange(),r=this._getRange();n?this._setRange(n,r,!0):t?(i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset),this.selectRange(i)):(i.setStart(r.startContainer,r.startOffset),i.setEnd(r.startContainer,r.startOffset),this.selectRange(i))}},_loadRules:function(){var t=this.element.data("ejRTE");jQuery.validator.addMethod("contentRequired",function(){return n.trim(t._getText())},"Please specify the value.");jQuery.validator.addMethod("maxWordCount",function(i,r,u){return n.trim(t._getText()).split(/\W+/).length<=u},"Please enter the content with in max word count.");jQuery.validator.addMethod("minWordCount",function(i,r,u){return n.trim(t._getText()).split(/\W+/).length>=u},"Please enter the content with min word count.");jQuery.validator.addMethod("minCharCount",function(n,i,r){return t._getText().length>=r},"Please enter the content with min length.");jQuery.validator.addMethod("maxCharCount",function(n,i,r){return t._getText().length<=r},"Please enter the content with in  max length.");this._customRules={required:"contentRequired",maxWordCount:"maxWordCount",minWordCount:"minWordCount",maxlength:"maxCharCount",minlength:"minCharCount",equalTo:"equalTo"}},_initValidator:function(){this._loadRules();this.element.closest("form").data("validator")||this.element.closest("form").validate()},_getRuleData:function(n,t){var i=null;switch(n){case"contentRequired":i={contentRequired:t};break;case"minCharCount":i={minCharCount:t};break;case"maxCharCount":i={maxCharCount:t};break;case"maxWordCount":i={maxWordCount:t};break;case"minWordCount":i={minWordCount:t};break;case"equalTo":i={equalTo:t}}return i},_setValidation:function(){var f,i,o,e,r,u,s;if(this.element.closest("form").length!=0){f=this.element.closest("form").validate();e=this.element.attr("name");f.settings.messages[e]={};for(r in this.model.validationRules)if(u=null,!t.isNullOrUndefined(this.model.validationRules[r])&&this._customRules[r]){if(i=this._customRules[r],o=this.model.validationRules[r],this.element.rules("add",this._getRuleData(i,o)),t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){f.settings.messages[e][i]=n.validator.messages[i];for(s in this.model.validationMessage)r==s?u=this.model.validationMessage[r]:""}else u=this.model.validationRules.messages[i];f.settings.messages[e][i]=u!=null?u:n.validator.messages[i]}}},_addAttr:function(t){if(t!=null){var i=this;n.map(t,function(n,t){t=="class"?i._rteWapper.addClass(n):t=="name"?i.element.attr(t,n):t=="required"?i.element.attr(t,n):t=="disabled"&&n=="disabled"?i.disable():t=="readOnly"&&n=="readOnly"?i._enableEdit(!1):i._rteWapper.attr(t,n)})}},_addCssToIframe:function(t){for(var i,u=n.isArray(t)?t:t.split(","),r=0;r<u.length;r++)i=document.createElement("link"),i.href=u[r],i.rel="stylesheet",i.type="text/css",this._rteIframe.contents().find("head").append(i)},_disabled:function(n){n!=!0?this.disable():this.enable()},_destroy:function(){this.element.insertBefore(this._rteWapper);t.isNullOrUndefined(this._tooltip)||n(this._rteFooter).ejTooltip("destroy");t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList("destroy");t.isNullOrUndefined(this._fontColorSplit)||this._fontColorSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._bgColorSplit)||this._bgColorSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._unOrderSplit)||this._unOrderSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._orderSplit)||this._orderSplit.ejSplitButton("destroy");t.isNullOrUndefined(this._customTableDialog)||(t.isNullOrUndefined(this._customTableDialog.find(".e-rte-ddlAlignment"))||this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("destroy"),t.isNullOrUndefined(this._customTableDialog.find(".e-rte-txtBorder"))||this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("destroy"));t.isNullOrUndefined(this._linkDialog)||n(this._linkDialog).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._imgDialog)||(this._imgDialog.find(".e-rte-imgBorderStyle").ejDropDownList("destroy"),n(this._imgDialog).closest("div.e-rte.e-dialog-wrap").remove());t.isNullOrUndefined(this._videoDialog)||n(this._videoDialog).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._createTable)||n(this._createTable).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._sourceDialog)||n(this._sourceDialog).closest("div.e-dialog-wrap").remove();t.isNullOrUndefined(this._customColor)||n(this._customColor).closest("div.e-dialog-wrap").remove();t.isNullOrUndefined(this._customTableDialog)||n(this._customTableDialog).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._customTableDialog)||n(this._customTableDialog).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._alertWindow)||n(this._alertWindow).closest("div.e-rte.e-dialog-wrap").remove();t.isNullOrUndefined(this._eTblDialog)||(this._eTblDialog.find(".e-rte-dropdown").ejDropDownList("destroy"),n(this._eTblDialog).closest("div.e-rte.e-dialog-wrap").remove());t.isNullOrUndefined(this._explorerObj)||this._explorerObj.destroy();t.isNullOrUndefined(this._imgPicker)||this._imgPicker.destroy();t.isNullOrUndefined(this._tblborderPicker)||this._tblborderPicker.destroy();t.isNullOrUndefined(this._fileDialog)||n(this._fileDialog).closest("div.e-rte.e-dialog-wrap").remove();this._textMenuObj&&this._textMenuObj.destroy();this._toolBarObj&&this._toolBarObj.destroy();this._rteWapper.remove();n("#"+this._rteId+"customcolor_popup").length>0&&n("#"+this._rteId+"customcolor_popup").remove();n("#"+this._rteId+"customcolor_Presets").length>0&&n("#"+this._rteId+"customcolor_Presets").remove();this.element.show();this.element.focus();this._createTable=null;this._unwireEvents()},_initialize:function(){return this._toolsList=this.model.toolsList,this._rteId=this.element[0].id,this._rteId=this._rteId?this._rteId:"",this._backupArray=[],this._undoRedoPosition=0,this._fontColor="#000000",this._bgColor="#ffffff",this._imgWidth=0,this._imgHeight=0,this._videoWidth=0,this._videoHeight=0,this._keypressFlag=!0,this._styleItems=t.isNullOrUndefined(this.model.tools.style)?[]:this.model.tools.style,this._alignItems=t.isNullOrUndefined(this.model.tools.alignment)?[]:this.model.tools.alignment,this._listItems=t.isNullOrUndefined(this.model.tools.lists)?[]:this.model.tools.lists,this._scriptsItems=t.isNullOrUndefined(this.model.tools.effects)?[]:this.model.tools.effects,this._contextMenu=["cut","copy","paste","|","insertTable",["addColumnLeft","addColumnRight","addRowAbove","addRowBelow"],"|","deleteTables",["deleteRow","deleteColumn","deleteTable"],"|","tableProperties","|","createLink","openLink","removeLink","imageProperties"],this._contextType={text:["cut","copy","paste","createLink"],image:["cut","copy","paste","imageProperties"],hyperlink:["cut","copy","paste","createLink","openLink","removeLink"],table:["cut","copy","paste","insertTable","deleteTables","tableProperties","createLink"],table_hyper:["cut","copy","paste","insertTable","deleteTables","tableProperties","createLink","openLink","removeLink"]},this},_render:function(){this._renderWrapper()._checkNameAttr();this.model.showToolbar&&this._renderToolBar();this._trigger("preRender",this.element);this._renderEditArea();this.model.showFooter&&this._renderFooter();this._setIframeHeight();this._rteWidth=this.model.width;this._rteHeight=this.model.height;this._renderAlertDialog();this._roundedCorner(this.model.showRoundedCorner)},_initContextMenu:function(){for(var r,t,i=[],n=0;n<this._contextMenu.length;n++)if(this._contextMenu[n]!="|")if(typeof this._contextMenu[n]=="object")for(r=n+1,t=0;t<this._contextMenu[n].length;t++)this._contextMenu[n][t]!="|"&&i.push({id:this._contextMenu[n][t],parentId:this._contextMenu[n-1],text:this._getLocalizedLabels(this._contextMenu[n][t]),sprite:"e-rte-toolbar-icon "+this._contextMenu[n][t]+" "+this._rteIconsList[this._contextMenu[n][t]],htmlAttr:this._contextMenu[n+1][t+1]=="|"?{"class":"e-rte-separator",id:this._contextMenu[n][t]}:{id:this._contextMenu[n][t]}});else i.push({id:this._contextMenu[n],parentId:null,text:this._getLocalizedLabels(this._contextMenu[n]),sprite:"e-rte-toolbar-icon "+this._contextMenu[n]+" "+this._rteIconsList[this._contextMenu[n]],htmlAttr:this._contextMenu[n+1]=="|"?{"class":"e-rte-separator",id:this._contextMenu[n]}:{id:this._contextMenu[n]}});return i},_createContextMenu:function(){var u=t.buildTag("ul.e-rte-context-menu #"+this._id+"_contextmenu"),i=this,r;return u.ejMenu({menuType:t.MenuType.ContextMenu,enableSeparator:!0,width:"auto",enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,contextMenuTarget:this._getDocument(),click:n.proxy(this._contextMenuClick,this),fields:{dataSource:this._initContextMenu(),id:"id",parentId:"parentId",text:"text",htmlAttribute:"htmlAttr",spriteCssClass:"sprite"},beforeOpen:function(r){var u,f;this._spellObj=i._rteIframe.data("ejSpellCheck");n(r.target).hasClass("errorspan")&&!t.isNullOrUndefined(this._spellObj)?(this._spellObj._selectedTarget=r.target,this._spellObj._selectedValue=r.target.innerText,u=this._spellObj._filterSuggestions(this._spellObj,this._spellObj._selectedValue),u.length>0?this._spellObj._suggestedWords=u[0].SuggestedWords:this._spellObj.getSuggestionWords(r.target.innerText),i._spellcheckContextMenu(r,this._spellObj)):(f=n("#"+i._textMenuObj._id).find("span.e-spellsuggestions"),f.length>0&&n("#"+i._textMenuObj._id).find("span.e-spellsuggestions").parent().parent().remove());i._isIE()&&i._ieSelectionRange&&i.selectRange(i._ieSelectionRange);i.model.enabled?this.enable():this.disable();i._filterMenuItems(i._contextMenuEventArgs=r.events);n(this.element).parent().hide();n("#"+i._textMenuObj._id).find("span.e-spellsuggestions").parents("li").css("display","block")},open:function(){this.element.attr("style","visibility:visible;width:auto;display:block;left:0px;top:0px;");this.element.parent().show();i._contextmenuPosition(i._contextMenuEventArgs);this._showAnimation(this.element,this._showAnim);n(this.element).focus()},close:function(){n(i._getDocument()).find("body").removeClass("e-cursor")}}),r=u.data("ejMenu"),r._isContextMenuOpen&&(document.addEventListener?document.addEventListener("scroll",function(n){r.hideContextMenu(n)},!0):document.attachEvent("scroll",function(n){r.hideContextMenu(n)},!0)),u},_spellcheckContextMenu:function(t,i){var u=this,o=t.events.target,e=n("#"+u._textMenuObj._id).find("span.e-spellsuggestions"),f,r;for(e.length>0&&n("#"+u._textMenuObj._id).find("span.e-spellsuggestions").parent().parent().remove(),f=[this._getLocalizedLabels("addtodictionary"),this._getLocalizedLabels("ignoreall")].concat(i._suggestedWords),r=0;r<f.length;r++)u.insertMenuOption({newItem:f[r],targetItem:this._getLocalizedLabels("paste"),insertType:"insertAfter",menuType:{text:!0,image:!1,hyperlink:!0,table:!1},spriteCssClass:"e-spellsuggestions"})},_showHideContextMenu:function(){this.model.allowEditing&&this.model.enabled&&this.model.showContextMenu&&this._getDocument()?(this._textMenuObj=this._createContextMenu().data("ejMenu"),this._textMenuObj._off(n(this._textMenuObj.model.contextMenuTarget),"mouseup taphold",this._textMenuObj._ContextMenuHandler),this._textMenuObj._on(n(this._textMenuObj.model.contextMenuTarget),"mouseup",this._textMenuObj._ContextMenuHandler)):this._textMenuObj&&this._textMenuObj.destroy()},_checkNameAttr:function(){this.model.name?this.element.attr({name:this.model.name}):t.isNullOrUndefined(this.element.attr("name"))&&this.element.attr({name:this.element[0].id})},_enableEdit:function(n){this.model.allowEditing=n;n?(this._wireEvents(),this.model.showToolbar&&this._toolBarItems.ejToolbar("option","click",this._toolBarClick),this._rteIframe.contents().find("body").attr("contenteditable",!0)):(this._unwireEvents(),this.model.showToolbar&&this._toolBarItems.ejToolbar("option","click",null),this._rteIframe.contents().find("body").attr("contenteditable",!1));this._showHideContextMenu();this._disableResizeObj(n)},_disableResizeObj:function(i){i?this.model.enableRTL||this._on(n(this._getDocument()).find("table.e-rte-table"),"mouseover",this._tableMouseOver):(t.browserInfo().name==="mozilla"&&(this._getDocument().designMode="off"),this._off(n(this._getDocument()).find("table.e-rte-table"),"mouseover",this._tableMouseOver),this._removeResizeObject())},_changeSkin:function(n){this._rteWapper.removeClass(this.model.cssClass).addClass(n);this._subControlsSetModel("cssClass",n)},_updateIframeSkin:function(t){try{var i=this._rteIframe.contents().find("body");t&&(proxy=this,n.map(t,function(n,t){t=="class"?i.addClass(n):t=="required"?i.attr(t,n):t=="disabled"&&n=="disabled"?proxy.disable():t=="readOnly"&&n=="readOnly"?proxy._enableEdit(!1):i.attr(t,n)}))}catch(r){return!1}},_renderWrapper:function(){return this.model.minHeight.toString().indexOf("%")>0&&(this.model.minHeight=parseInt(this.model.height)*parseInt(this.model.minHeight)/100),!t.isNullOrUndefined(this.model.maxHeight)&&this.model.maxHeight.toString().indexOf("%")>0&&(this.model.maxHeight=parseInt(this.model.height)+parseInt(this.model.height)*parseInt(this.model.maxHeight)/100),this.model.minWidth.toString().indexOf("%")>0&&(this.model.minWidth=parseInt(this.model.width)*parseInt(this.model.minWidth)/100),!t.isNullOrUndefined(this.model.maxWidth)&&this.model.maxWidth.toString().indexOf("%")>0&&(this.model.maxWidth=parseInt(this.model.width)+parseInt(this.model.width)*parseInt(this.model.maxWidth)/100),this._rteWapper=t.buildTag("div.e-rte e-rte-wrapper e-widget e-box "+this.model.cssClass+"#"+this._rteId+"_wrapper","",{},{role:"presentation"}).insertBefore(this.element),this._rteWapper.css("height",this.model.height).css("width",this.model.width).css("min-height",this.model.minHeight).css("min-width",this.model.minWidth).css("max-height",this.model.maxHeight).css("max-width",this.model.maxWidth),this._rteWapper.append(this.element.hide()),this},_renderToolBar:function(){this._rteToolbar=t.buildTag("div.e-rte-toolbar #"+this._rteId+"_tools").insertAfter(this.element);this._crateToolbarTemplate()._initToolBarItems()._renderToolBarList();this._renderToolBarItems();t.browserInfo().name==="msie"&&t.browserInfo().version==="8.0"&&this._toolBarObj.disableItemByID(this._rteId+"_video")},_renderToolBarList:function(){var t={};t.click=this.model.allowEditing?this._toolBarClick:null;t.cssClass=this.model.cssClass;t.enableRTL=this.model.enableRTL;t.enableSeparator=!0;this.model.toolbarOverflowMode=="inline"&&(t.responsiveType="inline");t.isResponsive=this.model.isResponsive;t.height=t.isResponsive?"":"auto";t.showRoundedCorner=this.model.showRoundedCorner;t.tooltipSettings=this.model.tooltipSettings;t.create=function(){var t=n(this.element).find(".e-ddl.e-widget .e-dropdownlist"),i=n(this.element).find(".e-split.e-widget .e-splitbutton");t.length&&t.ejDropDownList({height:"30px"});i.length&&i.ejSplitButton({height:"30px"})};this._toolBarItems.ejToolbar(t);this._disableTabkeyNavigation(this._toolBarItems)._disableTabkeyNavigation(this._toolBarItems.find("[tabindex],.e-split-btn"));this._toolBarObj=this._toolBarItems.ejToolbar("instance");this.model.toolbarOverflowMode=="inline"&&(this._rteinline=this._toolBarObj._spantag,this._on(this._rteinline,"click",this._rteinlineClick));this._on(n(document),"mouseup touchend",this._zoomUp);this._on(n(this._toolBarObj.itemsContainer).find(".e-rteItem-zoomIn , .e-rteItem-zoomOut"),"mousedown touchstart",this._zoomDown)},_disableTabkeyNavigation:function(t){return n(t).attr("tabindex","-1"),this},_crateToolbarTemplate:function(){var i,r,u;this._toolBarItems=t.buildTag("div#"+this._rteId+"_toolbar").appendTo(this._rteToolbar).height(30);for(i in this._toolsList)i=this._toolsList[i],t.isNullOrUndefined(this.model.tools[i])||(i=="customTools"?t.isNullOrUndefined(this.model.tools[i])||this._customTools(this.model.tools[i]):this.model.tools[i].length>0&&this._createToolsItems(this.model.tools[i],i));return this.model.fileBrowser.filePath!=""&&(r=t.buildTag("ul#"+this._rteId+"-file-exporer"),u=n("<li id='"+this._rteId+"_fileBrowser' class='e-rte-explorer e-rteItem-fileBrowser' title='"+this._getLocalizedLabels("fileBrowser")+"' ><div class='e-rte-toolbar-icon fileBrowser e-fileBrowser' unselectable = 'on'><\/div><\/li>"),u.appendTo(r),r.appendTo(this._toolBarItems)),this},_createToolsItems:function(i,r){var f=t.buildTag("ul#"+(this._rteId+"_"+r)),e,u;for(r=="font"&&f.addClass("e-rte-fontgroup"),r=="formatStyle"&&f.addClass("e-rte-format"),r=="lists"&&f.addClass("e-rte-lists"),u=0;u<i.length;u++)e=n("<li id='"+(this._rteId+"_"+i[u].replace(/ /g,""))+"' class='e-rteItem-"+i[u]+"' ><div class='e-rte-toolbar-icon "+i[u]+" "+this._rteIconsList[i[u]]+"' unselectable = 'on'><\/div><\/li>"),i[u]==="video"&&t.browserInfo().name==="msie"&&t.browserInfo().version==="8.0"?e.attr("title",this._getLocalizedLabels("html5Support")):e.attr("title",this._getLocalizedLabels(i[u].replace(/ /g,""))),i[u]==="fullScreen"?e.attr("data-content",this._getLocalizedLabels("maximize")).children(".e-rte-toolbar-icon").addClass(this._rteIconsList.maximize):i[u]==="findAndReplace"&&e.attr("title",this._getLocalizedLabels("FindAndReplace")),e.appendTo(f);f.appendTo(this._toolBarItems);r!="font"||this.model.showFontOption||f.hide()},_customTools:function(i){for(var e,f,u,r=0;r<i.length;r++)e=t.buildTag("ul"),f=n("<li id='"+i[r].name+"' title='"+i[r].tooltip+"' ><div class='"+(t.isNullOrUndefined(i[r].css)?"":i[r].css)+"'>"+(t.isNullOrUndefined(i[r].text)?"":i[r].text)+"<\/div><\/li>"),u=i[r].action,typeof u=="string"&&(u=t.util.getObject(u,window)),t.isNullOrUndefined(i[r].action)||this._on(f,"click",u),n(i[r].template).appendTo(f.find("div")),f.appendTo(e),e.appendTo(this._toolBarItems)},_initToolBarItems:function(){return this._rteToolbar.find("li.e-rteItem-format").length>0&&this._renderFormat(),this._rteToolbar.find("li.e-rteItem-createTable").length>0&&this._renderTableDialog(),this._rteToolbar.find("li.e-rteItem-fontName").length>0&&this._renderFontStyle(),this._rteToolbar.find("li.e-rteItem-fontSize").length>0&&this._renderFontSize(),this._rteToolbar.find("li.e-rteItem-fontColor").length>0&&this._renderFontColor(),this._rteToolbar.find("li.e-rteItem-backgroundColor").length>0&&this._renderBGColor(),this._rteToolbar.find("li.e-rteItem-unorderedList").length>0&&this._renderUnOrderList(),this._rteToolbar.find("li.e-rteItem-orderedList").length>0&&this._renderOrderList(),this._rteToolbar.find("li.e-rteItem-import").length>0&&this._renderimport(),this.model.showClearAll||this._rteToolbar.find("li.e-rteItem-clearAll").hide(),this},_renderToolBarItems:function(){this._toolBarObj.disableItemByID(this._rteId+"_undo");this._toolBarObj.disableItemByID(this._rteId+"_redo");this.model.enableRTL?this._toolBarObj.selectItemByID(this._rteId+"_justifyRight"):this._toolBarObj.selectItemByID(this._rteId+"_justifyLeft");var n=this._rteToolbar.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable");return this.model.isResponsive&&n.length==0?this._toolBarObj._liTemplte.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable").hide():this._rteToolbar.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable").hide(),this},_renderEditArea:function(){this._rteEditor=t.buildTag("div.editarea #"+this._rteId+"_editor").appendTo(this._rteWapper);this._rteIframe=t.buildTag("iframe.content-iframe #"+this._rteId+"_Iframe","",{}).appendTo(this._rteEditor);this._rteIframe.css({border:"0"});this._setIFrames();navigator.userAgent.match(/(iPhone|iPod|iPad)/i)!=null&&(this._rteEditor.addClass("e-ipadscroll"),this._rteEditor.css("height",this._rteWapper.outerHeight()-this._rteToolbar.height()))},_xhtmlTagValidation:function(){var n,o,s,e,u,i;if(this.value()!=null){if(n=this.value(),n=n.replace(/\r/gi," ").replace(/\n/gi,"<br/> ").replace(/\r\n/gi," ").replace(/( )+/gi," ").replace(/&nbsp;/gi," ").replace(/&bull;/gi,"*").replace(/&ltquo;/gi,"<").replace(/&rtquo;/gi,">").replace(/&trze;/gi,"(tm)").replace(/&copy;/gi,"(c)").replace(/&reg;/gi,"(r)"),n.indexOf("<body>")!=-1&&(o=n.indexOf("<body>"),s=n.slice(0,o+6),n=n.replace(s,"").replace("<\/body><\/html>","")),n=n.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>"),n=this._imageXhtml(n),n=this._styleXhtml(n),n=this._startXhtml(n),n.indexOf("alt=")!=-1){for(var v=/alt=\"(.*?)\"/ig,f=[],h,c=0;(h=v.exec(n))!=null;)f[c]=h[0],c++;for(i=0;i<f.length;i++)n=n.replace(f[i],'alt=""')}if(!t.isNullOrUndefined(this._fontXhtml(n))){if(n=this._fontXhtml(n),n.indexOf("ol")!=-1){for(var y=/<ol(.*)<\/ol>/ig,l,a=0,r=[];(l=y.exec(n))!==null;)r[a]=l[0].toString(),a++;for(e=[],u=0;u<r.length;u++)e[u]=r[u];for(i=0;i<r.length;i++)r[i]=r[i].replace(/<br\/>/gi,"");for(i=0;i<r.length;i++)n=n.replace(e[i],r[i])}n=n.replace(/<o:p>/gi,"").replace(/<\/o:p>/gi,"")}this.value(n)}},_setIFrames:function(){var r=null,f,u,i;this.value()!=null&&this.value()!=""&&(r=this.value().replace(/'/g,'"'));r==null&&this.value(n.trim(this.element[0].value));f=t.browserInfo().name=="msie"&&parseInt(t.browserInfo().version)==8;u="<!DOCTYPE html> <html> <head> <meta charset='utf-8' /> <style>html, body{height: 100%;margin: 0;}body.e-cursor{cursor:default} span.e-selected-node\t{background-color: #939393;color: white;}span.e-selected-node.e-highlight{background-color: #1d9dd8;}body{font-family:Times New Roman,Times,serif;color:#5C5C5C;word-wrap:break-word;padding: 8px;box-sizing: border-box;}.e-rte-table caption{border: 1px solid;border-bottom:none}td{word-wrap:break-word;word-break:break-all;}.e-rteColumnResizer{position: absolute;bottom:0;overflow: visible;cursor: col-resize;background-repeat:repeat;background-color:transparent}.e-rteRowResizer{position: absolute;bottom:0;overflow: visible;margin-left: -4px;cursor: row-resize;background-repeat:repeat;background-color:transparent} span.e-rte-imageboxmark{width:5px;height:5px;position:absolute;display:block;background:#fff;border:1px solid #000;}<\/style><\/head><body spellcheck='false' autocorrect='off' contenteditable="+(this.model.allowEditing?"true":"false")+">"+(this.value()!=""&&this.value()!="<br>"?n.trim(this.value()):"<p><span>&#65279;<\/span><\/p>")+"<\/body><\/html>";this._rteIframe.css({width:"100%"});(this.element[0].value=="<div><\/div>"||this.element[0].value=="")&&(this.element[0].innerHTML=this.value());this._setContent(u);this._isIE8()&&this.value(this._getDocument().body.innerHTML);i=n(this._getDocument()).find("table");!this.model.enableRTL&&i.length>0&&this._on(i,"mouseover",this._tableMouseOver);this.model.enableXHTML&&this._updateValue();this._setAutoHeight();(!t.isNullOrUndefined(this.model.undoStackLimit)||this.model.undoStackLimit!==""||this.model.undoStackLimit>0)&&(this._backupArray[0]=this.getHtml())},_setIframeHeight:function(){var i=(!t.isNullOrUndefined(this._rteToolbar)&&this._rteToolbar.is(":visible")?this._rteToolbar.outerHeight():6)+(!t.isNullOrUndefined(this._rteFooter)&&this._rteFooter.is(":visible")?this._rteFooter.outerHeight():0);this._rteIframe.css("height",i==0?this.model.height:this._rteWapper.outerHeight()-i-(parseInt(this._rteEditor.css("padding-top"))+parseInt(n(".e-rte-wrapper").css("border-bottom-width"))+parseInt(this.model.showFooter?n(".e-rte-footer").css("margin-top"):0)))},_renderFooter:function(){var r=this.model,i,n;this._rteFooter=t.buildTag("div.e-rte-footer #"+this._rteId+"_footer").appendTo(this._rteWapper);i=t.buildTag("div.e-rte-footer-left");this._htmlSource=t.buildTag("div.e-rte-icons e-rte-footeritems e-rte-footericon e-rte-source "+this._rteIconsList.rteSource,"",{},{title:this._getLocalizedLabels("viewHtml")}).appendTo(i);this._htmlInfo=t.buildTag("div.e-rte-htmltaginfo e-rte-footeritems").appendTo(i);i.appendTo(this._rteFooter);n=t.buildTag("div.e-rte-footer-right");this._wordCount=t.buildTag("div.e-rte-wordcount e-rte-footeritems").appendTo(n);this._charCount=t.buildTag("div.e-rte-charcount e-rte-footeritems").appendTo(n);this._clearFormat=t.buildTag("div.e-rte-icons "+this._rteIconsList.clearFormat+" e-rte-footericon e-rte-footeritems","",{},{title:this._getLocalizedLabels("clearFormat"),unselectable:"on"}).appendTo(n);this._clearAll=t.buildTag("div.e-rte-icons clearAll "+this._rteIconsList.clearAll+" e-rte-footericon e-rte-footeritems","",{},{title:this._getLocalizedLabels("clearAll")}).appendTo(n);this._resize=t.buildTag("div.e-icons e-rte-resize "+this._rteIconsList.rteResize+" e-rte-footeritems").appendTo(n);n.appendTo(this._rteFooter);this._footerEvents("_on");this.model.showHtmlSource||this._htmlSource.hide().removeClass("e-rte-footeritems");this.model.showHtmlTagInfo||this._htmlInfo.hide().removeClass("e-rte-footeritems");this.model.showWordCount||this._wordCount.hide().removeClass("e-rte-footeritems");this.model.showCharCount||this._charCount.hide().removeClass("e-rte-footeritems");this.model.showClearAll||this._clearAll.hide().removeClass("e-rte-footeritems");this.model.showClearFormat||this._clearFormat.hide().removeClass("e-rte-footeritems");r.enableResize?this._enableResize():this._resize.hide().removeClass("e-rte-footeritems");this._updateCount();this.model.showWordCount&&this._on(this._wordCount,"click",this._wordCharClick);this.model.showCharCount&&this._on(this._charCount,"click",this._wordCharClick);this._renderTooltip(this.model.tooltipSettings)},_renderTooltip:function(i){var r=n.extend(!0,{},i);r.cssClass=t.isNullOrUndefined(r.cssClass)?"e-rteTooltip "+this.model.cssClass:r.cssClass+" e-rteTooltip "+this.model.cssClass;r.enableRTL=this.model.enableRTL;r.showRoundedCorner=this.model.showRoundedCorner;r.target=".e-rte-icons";this.model.showFooter&&(this._tooltip=n(this._rteFooter).ejTooltip(r).data("ejTooltip"))},_hideTooltip:function(){t.isNullOrUndefined(this._tooltip)||this._tooltip.hide()},_footerElement:function(n,t){if(this.model.showFooter){var i=this._rteFooter.find(n);t?i.show().addClass("e-rte-footeritems"):i.hide().addClass("e-rte-footeritems")}},_wordCharClick:function(){this._alertWindow.ejDialog("option",{showHeader:!0,title:"<span style='padding-left:0.4em;'>"+this._getLocalizedLabels("wordCount")+"<\/span>"});this.model.enableRTL&&this._alertWindow.find(".e-alert-ok").removeClass("e-rte-alertBtnRTL");this._alertWindow.find(".e-rte-button").removeClass("e-fieldseparate").css({"text-align":"center","padding-bottom":"1em","padding-top":"0.5em"});this._alertWindow.ejDialog("instance").refresh();this._openAlert("<div style='padding-left:0.3em;padding-right:0.3em;'><div style='"+(this.model.enableRTL?"float:right":"float:left")+"'>"+this._getLocalizedLabels("words")+"<p style='margin:0.875em 0em;'>"+this._getLocalizedLabels("charSpace")+"<\/p><p style='margin:0.875em 0em;'>"+this._getLocalizedLabels("charNoSpace")+"<\/p><\/div><div style='"+(this.model.enableRTL?"float:left;padding-right:2em;":"float:right;padding-left:2em;")+"'>"+(n.trim(this._getText())!=""?n.trim(this._getText()).split(/\W+/).length:0)+"<p style='margin:0.875em 0em;'>"+this._getText().length+"<\/p><p style='margin:0.875em 0em;'>"+this._getText().replace(/\s/g,"").length+"<\/p><\/div><\/div><br/>")},_updateColorPalette:function(){var t=n("ul#"+this._rteId+"_colorTable"),i=n("ul#"+this._rteId+"_colorBGTable");t.find("div.e-rte-table").remove();t.find("li").append(this._colorTable());i.find("div.e-rte-table").remove();i.find("li").append(this._colorTable())},_enableRTL:function(n){try{n?this._rteIframe.contents().find("body").css("direction","rtl"):this._rteIframe.contents().find("body").css("direction","ltr")}catch(t){}this._subControlsSetModel("enableRTL",n)},_roundedCorner:function(n){n&&this._rteWapper.toggleClass("e-corner-all");this._subControlsSetModel("showRoundedCorner",n)},_subControlsSetModel:function(i,r){t.isNullOrUndefined(this._tooltip)||(i=="cssClass"?n(this._rteFooter).ejTooltip("option",i,"e-rteTooltip "+r):n(this._rteFooter).ejTooltip("option",i,r));t.isNullOrUndefined(this._formatDDL)||this._formatDDL.ejDropDownList("option",i,r);t.isNullOrUndefined(this._fontStyleDDL)||this._fontStyleDDL.ejDropDownList("option",i,r);t.isNullOrUndefined(this._fontSizeDDL)||this._fontSizeDDL.ejDropDownList("option",i,r);t.isNullOrUndefined(this._fontColorSplit)||this._fontColorSplit.ejSplitButton("option",i,r);t.isNullOrUndefined(this._bgColorSplit)||this._bgColorSplit.ejSplitButton("option",i,r);t.isNullOrUndefined(this._toolBarItems)||(i=="showRoundedCorner"&&this._toolBarItems.hasClass("e-corner-top")&&this._toolBarItems.removeClass("e-corner-top").addClass("e-corner-all"),this._toolBarItems.ejToolbar("option",i,r),i=="showRoundedCorner"&&this._toolBarItems.hasClass("e-corner-all")&&this._toolBarItems.removeClass("e-corner-all").addClass("e-corner-top"));t.isNullOrUndefined(this._linkDialog)||(this._linkDialog.ejDialog("option",i,r),this._linkDialog.find(".e-rte-btn").ejButton("option",i,r),this._chkTarget.ejCheckBox("option",i,r),i=="showRoundedCorner"&&(r==!0?this._linkDialog.find(".e-inputtext").addClass("e-corner-all"):this._linkDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._imgDialog)||(this._imgDialog.ejDialog("option",i,r),this._imgDialog.find("div.e-rte-imageTab").ejTab("option",i,r),this._imgDialog.find(".e-rte-imgBorderPx").ejNumericTextbox("option",i,r),this._imgDialog.find(".e-rte-imgBorderStyle").ejDropDownList("option",i,r),this._chkImgDimensions.ejCheckBox("option",i,r),this._dialogchkTarget.ejCheckBox("option",i,r),this._imgDialog.find(".e-rte-btn").ejButton("option",i,r),i=="showRoundedCorner"&&(r==!0?this._imgDialog.find(".e-inputtext").addClass("e-corner-all"):this._imgDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._videoDialog)||(this._videoDialog.ejDialog("option",i,r),this._videoDialog.find(".e-rte-btn").ejButton("option",i,r),this._chkvideoDimensions.ejCheckBox("option",i,r),i=="showRoundedCorner"&&(r==!0?this._videoDialog.find(".e-inputtext").addClass("e-corner-all"):this._videoDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._createTable)||this._createTable.ejDialog("option",i,r);t.isNullOrUndefined(this._sourceDialog)||(this._sourceDialog.ejDialog("option",i,r),this._sourceDialog.find(".e-rte-btn").ejButton("option",i,r),i=="showRoundedCorner"&&(r==!0?this._sourceDialog.find(".e-inputtext").addClass("e-corner-all"):this._sourceDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._alertWindow)||(this._alertWindow.ejDialog("option",i,r),this._alertWindow.find(".e-rte-btn").ejButton("option",i,r));t.isNullOrUndefined(this._customTableDialog)||(this._customTableDialog.ejDialog("option",i,r),this._customTableDialog.find(".e-rte-btn").ejButton("option",i,r),this._customTableDialog.find(".numerictextbox").ejNumericTextbox("option",i,r),this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox("option",i,r),this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("option",i,r),this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("option",i,r),this._chkTblCaption.ejCheckBox("option",i,r),i=="showRoundedCorner"&&(r==!0?this._customTableDialog.find(".e-inputtext").addClass("e-corner-all"):this._customTableDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._eTblDialog)||(this._eTblDialog.ejDialog("option",i,r),this._eTblDialog.find(".e-numerictextbox").ejNumericTextbox("option",i,r),this._eTblDialog.find(".e-rte-dropdown").ejDropDownList("option",i,r),this._getTableObj("_Tab").ejTab("option",i,r),this._eTblDialog.find(".e-rte-btn").ejButton("option",i,r),this._eTblCaption.ejCheckBox("option",i,r),i=="showRoundedCorner"&&(r==!0?this._eTblDialog.find(".e-inputtext").addClass("e-corner-all"):this._eTblDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._fileDialog)||(this._fileDialog.ejDialog("option",i,r),this._fileDialog.find(".e-rte-btn").ejButton("option",i,r),this._chkFileTarget.ejCheckBox("option",i,r),i=="showRoundedCorner"&&(r==!0?this._fileDialog.find(".e-inputtext").addClass("e-corner-all"):this._fileDialog.find(".e-inputtext").removeClass("e-corner-all")));t.isNullOrUndefined(this._explorerObj)||this._explorerObj.option(i,r);t.isNullOrUndefined(this._fileBrowserObj)||this._fileBrowserObj.option(i,r)},_createCountElement:function(n,t){n?t.show():t.hide();t.toggleClass("e-rte-footeritems")},_enableResize:function(){this.model.enableResize&&this.model.enabled&&(this._rteWapper.addClass("e-resizable"),this._resizeRTE())},_resizeRTE:function(){var i=this;this._overlayElement=t.buildTag("div.e-rte-overlay");this._rteEditor.css("position","relative");this._rteWapper.find("div.e-rte-resize").ejResizable({minHeight:parseInt(i.model.minHeight),minWidth:parseInt(i.model.minWidth),maxHeight:parseInt(i.model.maxHeight),maxWidth:parseInt(i.model.maxWidth),resizeStart:function(n){i._rteEditor.append(i._overlayElement);i._trigger("resizeStart",{event:n})},resize:function(n){i._updateCount();i._resizeHeight(n.element);i._trigger("resize",{event:n});i.model.isResponsive&&i.model.showToolbar&&i._toolBarObj._reSizeHandler()},resizeStop:function(n){i._overlayElement.remove();i._trigger("resizeStop",{event:n})},helper:function(t){return i._resizeHeight(t.element),n(i._rteWapper)}})},_getDocumentHandler:function(){return this._operationHandler||(this._operationHandler=new t.editorManager(this.getDocument(),this._getWindow())),this._operationHandler},_resizeHeight:function(n){var t=n.parents("div.e-rte-wrapper");this._rteWidth=t.width();this._rteHeight=t.height();this._rteWapper.height(this._rteHeight);this._rteWapper.width(this._rteWidth);this._setIframeHeight()},_getDialogModel:function(){var n=this._rteWapper;return{enableResize:!1,showOnInit:!1,enableModal:!0,cssClass:this.model.cssClass,target:n,isResponsive:!0,enableRTL:this.model.enableRTL}},_labelFor:function(n){return this._rteId?" for="+this._rteId+n+" ":""},_TagId:function(n){return this._rteId?" id="+this._rteId+n+" ":""},_renderLinkDialog:function(){var f=this,i=this.model.enableRTL?"e-rtlrte":"",u=this._linkDialog=t.buildTag("div#"+this._rteId+"_link"),e=n("<div class='e-rte-label "+i+"'><label "+this._labelFor("_link_url")+">"+this._getLocalizedLabels("linkWebUrl")+"<\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-linkUrl' "+this._TagId("_link_url")+"/><\/div><div class='e-rte-label "+i+"'><label "+this._labelFor("_link_text")+">"+this._getLocalizedLabels("linkText")+"<\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none' class='e-inputtext e-rte-linkText' "+this._TagId("_link_text")+"><\/div><div class='e-rte-label "+i+"'><label "+this._labelFor("_link_title")+">"+this._getLocalizedLabels("linkTooltipLabel")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none' class='e-inputtext e-rte-linkTitle' "+this._TagId("_link_title")+"><\/div><div class='e-rte-label "+i+"'><\/div><div class='e-rte-field "+i+"'><input type='checkbox' class='e-rte-linkTarget'  data-role ='none' "+this._TagId("_link_target")+"><label "+this._labelFor("_link_target")+" style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn "+i+"' type='button' data-role ='none' id='link_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+i+"'type='button' data-role ='none' id='link_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>"),r;e.appendTo(u);u.appendTo(this._rteWapper);r=this._getDialogModel();r.minWidth="340px";r.width="auto";r.title=this._getLocalizedLabels("createLink");r.target=null;r.closeIconTooltip=this._getLocalizedLabels("closeIcon");r.showRoundedCorner=this.model.showRoundedCorner;r.close=function(){f._ieCursorMaintainance()};u.ejDialog(r);u.closest(".e-dialog-wrap").addClass("e-rte");this.model.showRoundedCorner&&u.find(".e-inputtext").addClass("e-corner-all");this._chkTarget=u.find(".e-rte-linkTarget");this._chkTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});u.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(u.find(".e-rte-btn"),"click",this._linkBtnClick)._on(this._linkDialog.find(".e-rte-linkUrl"),"keypress",this._urlValidation);this.model.showRoundedCorner&&this._subControlsSetModel()},_renderImageDialog:function(){var u=this,o="",i,f,r,e;this._imgDialog=t.buildTag("div#"+this._rteId+"_Image");i=this.model.enableRTL?"e-rtlrte":"";f="<div "+this._TagId("_img_Tab")+" class='e-rte-imageTab'><ul><li class='e-first'><a href='#"+this._rteId+"_general'>"+this._getLocalizedLabels("general")+" <\/a><\/li><li class='e-nofirst'><a href='#"+this._rteId+"_advanced'>"+this._getLocalizedLabels("advanced")+" <\/a><\/li><\/ul><div id='"+this._rteId+"_general'><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_url")+">"+this._getLocalizedLabels("imageWebUrl")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-imgUrl' "+this._TagId("_img_url")+"><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_text")+">"+this._getLocalizedLabels("imageAltText")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none'  class='e-inputtext e-rte-imgText' "+this._TagId("_img_text")+"><\/div><\/div><div class='e-rte-imgdimensions' "+this._TagId("_imgdimensions")+"><div class='e-rte-label "+i+"'><label>"+this._getLocalizedLabels("dimensions")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("dimensions")+"'  data-role ='none' class='e-inputtext e-dimensions e-rte-imgX' maxlength='3' "+this._TagId("_imgX")+"><label style='padding: 5px;'>X<\/label><input type='text'  data-role ='none'  title='"+this._getLocalizedLabels("dimensions")+"' style='margin-right: 5px;' class='e-inputtext e-dimensions e-rte-imgY' maxlength='3' "+this._TagId("_imgY")+"><\/div><input type='checkbox' class='e-rte-imgConsrn' data-role ='none'"+this._TagId("_img_consrn")+"<label "+this._labelFor("_img_consrn")+"  style='padding: 5px;'>"+this._getLocalizedLabels("constrainProportions")+"<\/label><\/div><\/div><div id='"+this._rteId+"_advanced'><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_link")+">"+this._getLocalizedLabels("imageLink")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-imgLink' "+this._TagId("_img_link")+"><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_border_px")+">"+this._getLocalizedLabels("imageBorder")+"<\/label><\/div><div class='e-rte-field "+i+"'><div class='e-img-border-field'><input type='text' data-role ='none' title='"+this._getLocalizedLabels("imageBorder")+"' class='e-rte-imgBorderPx' maxlength='3' "+this._TagId("_img_border_px")+"><\/div><div class='e-img-border-field'><select class='e-rte-imgBorderStyle'  data-role ='none' "+this._TagId("_img_border_style")+"><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-img-border-field'><input  data-role ='none' type='text' title='"+this._getLocalizedLabels("imageBorder")+"' class='e-inputtext e-rte-imgBorderColor' "+this._TagId("_img_border_color")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><label "+this._labelFor("_img_style")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-field "+i+"'><input type='text' data-role ='none'  class='e-inputtext e-rte-imgStyle' "+this._TagId("_img_style")+"><\/div><\/div><div class='e-img-field-group'><div class='e-rte-label "+i+"'><\/div><div class='e-rte-field "+i+"'><input type='checkbox' class='e-rte-imgLinkTarget' data-role ='none' "+this._TagId("_img_link_target")+"><label "+this._labelFor("_img_link_target")+" style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><\/div><\/div><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn "+i+"' data-role ='none'  type='button' id='"+this._rteId+"_img_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+i+"' type='button' data-role ='none' id='"+this._rteId+"_img_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>";this.model.imageBrowser.filePath!=""&&(o="<div "+this._TagId("_img_explorer")+" class='e-rte-explorer e-rte-imgBrowser'><\/div>");f=n(o+f);f.appendTo(this._imgDialog);this._imgDialog.appendTo(this._rteWapper);this.model.showDimensions||this._rteWapper.find("div.e-rte-imgdimensions").hide();r=this._getDialogModel();r.maxWidth=this.model.imageBrowser.filePath==""?"470px":"720px";r.width="auto";r.title=this._getLocalizedLabels("image");r.target=null;r.closeIconTooltip=this._getLocalizedLabels("closeIcon");r.showRoundedCorner=this.model.showRoundedCorner;r.open=function(){u._explorerObj&&u._explorerObj.adjustSize();t.isNullOrUndefined(u._imgSplitObj)||u._imgSplitObj.option("enableAutoResize",!0)};r.close=function(){u._ieCursorMaintainance();t.isNullOrUndefined(u._imgSplitObj)||u._imgSplitObj.option("enableAutoResize",!1)};this._imgDialog.ejDialog(r);this._imgDialog.closest(".e-dialog-wrap").css({visibility:"hidden",display:"block"}).addClass("e-rte");this.model.imageBrowser.filePath!=""&&(e={upload:{url:this.model.imageBrowser.uploadAction}},this.model.imageBrowser.ajaxSettings&&n.extend(!0,e,this.model.imageBrowser.ajaxSettings),this._explorerObj=this._imgDialog.find("div.e-rte-imgBrowser").ejFileExplorer({allowMultiSelection:!1,showFooter:!1,showTreeview:!1,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,cssClass:this.model.cssClass,maxWidth:"690px",isResponsive:!0,minWidth:"330px",height:"300px",path:this.model.imageBrowser.filePath,fileTypes:this.model.imageBrowser.extensionAllow,layout:t.FileExplorer.layoutType.LargeIcons,select:function(n){u._UpdateImgDetails(n)},tools:{creation:["NewFolder","Open"],navigation:["Back","Forward"],addressBar:["Addressbar"],editing:["Refresh","Upload","Delete"],searchBar:["Searchbar"]},toolsList:["creation","navigation","addressBar","editing","searchBar"],enableResize:!1,showContextMenu:!1,ajaxAction:this.model.imageBrowser.ajaxAction,locale:this.model.locale,ajaxSettings:e}).data("ejFileExplorer"),this._imgSplitObj=this._imgDialog.find(".e-splitter").data("ejSplitter"),this._imgSplitObj.option("enableAutoResize",!1));this.model.showRoundedCorner&&this._imgDialog.find(".e-inputtext").addClass("e-corner-all");this._imgDialog.find("div.e-rte-imageTab").ejTab({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._imgDialog.find(".e-rte-imgBorderPx").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:0,value:0,showRoundedCorner:this.model.showRoundedCorner});this._imgDialog.find(".e-rte-imgBorderStyle").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._chkImgDimensions=this._imgDialog.find(".e-rte-imgConsrn");this._chkImgDimensions.ejCheckBox({check:!0,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._imgDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._imgPicker=this._imgDialog.find(".e-rte-imgBorderColor").ejColorPicker({cssClass:this.model.cssClass,modelType:"palette",buttonText:{apply:this._getLocalizedLabels("buttonApply"),cancel:this._getLocalizedLabels("buttonCancel"),swatches:this._getLocalizedLabels("swatches")}}).data("ejColorPicker");this._imgDialog.parents("#"+this._rteId+"_Image_wrapper").css({visibility:"visible",display:"none"});this._dialogchkTarget=this._imgDialog.find(".e-rte-imgLinkTarget");this._dialogchkTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._imgDialog.find(".e-rte-btn"),"click",this._imageBtnClick);this._on(this._imgDialog.find(".e-rte-imgUrl , .e-rte-imgLink"),"keypress",this._urlValidation);this._on(this._imgDialog.find("input.e-dimensions"),"change",this._recalcImgSize);this.model.showRoundedCorner&&this._subControlsSetModel()},_renderFileBrowserDialog:function(){var r=this,o="",u=this.model.enableRTL?"e-rtlrte":"",f,i,e;this._fileDialog=t.buildTag("div#"+this._rteId+"_fileDialog");f="<div class='e-rte-elements'><div class='e-rte-label "+u+"'><label "+this._labelFor("_file_url")+">"+this._getLocalizedLabels("linkWebUrl")+"<\/label><\/div><div class='e-rte-field "+u+"'><input type='text'  data-role ='none' class='e-inputtext e-rte-fileUrl' "+this._TagId("_file_url")+"/><\/div><div class='e-rte-label "+u+"'><label "+this._labelFor("_file_text")+">"+this._getLocalizedLabels("linkText")+"<\/label><\/div><div class='e-rte-field "+u+"'><input type='text' data-role ='none' class='e-inputtext e-rte-fileText' "+this._TagId("_file_text")+"><\/div> <\/div><div class='e-rte-field'><input type='checkbox' class='e-rte-fileTarget'  data-role ='none' "+this._TagId("_file_target")+"><label "+this._labelFor("_link_target")+" style='padding: 5px;'>"+this._getLocalizedLabels("linkOpenInNewWindow")+"<\/label><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn "+u+"' type='button' data-role ='none' id='"+this._rteId+"_file_insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+u+"'type='button' data-role ='none' id='"+this._rteId+"_file_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>";o="<div "+this._TagId("_file_explorer")+" class='e-rte-explorer e-rte-fileBrowser'><\/div>";f=n(o+f);f.appendTo(this._fileDialog);this._fileDialog.appendTo(this._rteWapper);i=this._getDialogModel();i.width="auto";i.title=this._getLocalizedLabels("fileBrowser");i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.open=function(){r._fileBrowserObj.adjustSize();t.isNullOrUndefined(r._fileSplitObj)||r._fileSplitObj.option("enableAutoResize",!0)};i.close=function(){r._ieCursorMaintainance();t.isNullOrUndefined(r._fileSplitObj)||r._fileSplitObj.option("enableAutoResize",!1)};this._fileDialog.ejDialog(i);this._fileDialog.closest(".e-dialog-wrap").css({visibility:"hidden",display:"block"}).addClass("e-rte");e={upload:{url:this.model.fileBrowser.uploadAction}};this.model.fileBrowser.ajaxSettings&&n.extend(!0,e,this.model.fileBrowser.ajaxSettings);this._fileBrowserObj=this._fileDialog.find("div.e-rte-fileBrowser").ejFileExplorer({allowMultiSelection:!1,showFooter:!1,showTreeview:!1,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,cssClass:this.model.cssClass,maxWidth:"690px",height:"300px",isResponsive:!0,minWidth:"330px",path:this.model.fileBrowser.filePath,fileTypes:this.model.fileBrowser.extensionAllow,layout:"list",select:function(n){r._UpdateFileDetails(n)},tools:{creation:["NewFolder","Open"],navigation:["Back","Forward"],addressBar:["Addressbar"],editing:["Refresh","Upload","Delete"],searchBar:["Searchbar"]},toolsList:["creation","navigation","addressBar","editing","searchBar"],enableResize:!1,showContextMenu:!1,ajaxAction:this.model.fileBrowser.ajaxAction,locale:this.model.locale,ajaxSettings:e}).data("ejFileExplorer");this._fileSplitObj=this._fileDialog.find(".e-splitter").data("ejSplitter");this._fileSplitObj.option("enableAutoResize",!1);this.model.showRoundedCorner&&this._fileDialog.find(".e-inputtext").addClass("e-corner-all");this._fileDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._fileDialog.parents("#"+this._rteId+"_fileDialog_wrapper").css({visibility:"visible",display:"none"});this._chkFileTarget=f.find(".e-rte-fileTarget");this._chkFileTarget.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._fileDialog.find(".e-rte-btn"),"click",this._fileBtnClick);this.model.showRoundedCorner&&this._subControlsSetModel()},_UpdateImgDetails:function(t){n(this._imgURL).hasClass("e-error")&&this._imgURL.removeClass("e-error");t.path===""?this._imgURL.val("http://"):this._imgDialog.find("div.e-rte-imageTab").find(".e-rte-imgUrl").val(t.path+(t.name[0]?t.name[0]:""))},_UpdateFileDetails:function(t){n(this._fileURL).hasClass("e-error")&&this._fileURL.removeClass("e-error");t.path===""?this._fileURL.val("http://"):this._fileDialog.find(".e-rte-fileUrl").val(t.path+(t.name[0]?t.name[0]:""))},_fileBtnClick:function(n){this._renderLinkDialog();n.target.id===this._rteId+"_file_cancel"?(this._clearFileFields(),this._fileDialog.ejDialog("close"),this._ieCursorMaintainance()):n.target.id===this._rteId+"_file_insert"&&(this._isIE()&&!this._isIE8()&&this._ieLinkRange(),this._restoreSelection(this._selectionRange),this._fileDialog.find("e-rte-fileUrl").val()!=""?this._onInsertFileLink():this._linkDialog.ejDialog("close"),this._trigger("execute",{commandName:"hyperlink"}),this._onChange(),this._setBackupData())},_clearFileFields:function(){this._fileURL=this._fileDialog.find(".e-rte-fileUrl");this._fileURL.val("http://");this._fileLinkText=this._fileDialog.find(".e-rte-fileText");this._fileLinkText.val("");this._chkFileTarget.ejCheckBox({check:!1})},_onGetInsertFileContent:function(n){this._selectedHTML=this._fileLinkText.val()===""?n:this._fileLinkText.val()},_onInsertFileLink:function(){var i,f,o=this._fileURL.val().match(/(ftp:|http:|https:)\/\//g),u=this._fileURL.val().startsWith("~")?this._fileURL.val().replace(this._fileURL.val().substr("0","1"),".."):this._fileURL.val(),r,e;if(t.isNullOrUndefined(o)&&u!==""||!t.isNullOrUndefined(o)&&o[0].length<u.length)r=this._isIE()&&n(this._currentSelNode).parents("body").length>0?this._currentSelNode:this._getSelectedNode(),t.isNullOrUndefined(r)||r.tagName.toUpperCase()!="A"?t.isNullOrUndefined(r)||r.tagName.toUpperCase()!="IMG"?(i=t.buildTag("a","",{},{href:u}),i[0].target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self",this._focus(),this._isIE()?(t.isNullOrUndefined(this._selectedHTML)?this._onGetInsertFileContent(u):this._selectedHTML.length==0&&this._onGetInsertFileContent(u),i[0].innerHTML=this._selectedHTML,f=i[0].outerHTML):(this._fileLinkText.val()===""?i.html(u):i.html(this._fileLinkText.val()),f=n("<div>").append(n(i).clone()).html()),f&&this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length&&(this._isIE()?this._pasteHtml(f):this._getDocument().execCommand("inserthtml",!1,f),this._focus())):(e=n(r).parent("a")[0],t.isNullOrUndefined(e)?(i=t.buildTag("a","",{},{href:u}),n(r.outerHTML).appendTo(n(i)),n(r).replaceWith(n(i)),i[0].target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self"):(e.href=u,e.target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self")):(r.href=u,r.innerHTML=this._fileLinkText.val(),r.target=this._chkFileTarget.ejCheckBox("isChecked")?"_blank":"_self"),this._fileDialog.ejDialog("close");else return this._fileURL.addClass("e-error"),!1;this.enableToolbarItem("removeLink");this._updateCount()},_renderVideoDialog:function(){var f=this,r,u,i;this._videoDialog=t.buildTag("div#"+this._rteId+"_video");r=this.model.enableRTL?"e-rtlrte":"";u=n("<div><label>"+this._getLocalizedLabels("embedVideo")+"<\/label><\/div><textarea class='e-rte-video e-inputtext'  aria-label="+this._getLocalizedLabels("embedVideo")+"><\/textarea><div class='e-rte-videoDimensions'"+this._TagId("_videodimensions")+" style='margin-top:7px'><div class='e-rte-label'><label>"+this._getLocalizedLabels("dimensions")+" <\/label><\/div><div><input type='text'  data-role ='none' title='"+this._getLocalizedLabels("dimensions")+"' class='e-inputtext e-dimensions e-rte-videoX' maxlength='3' "+this._TagId("_videoX")+"><label style='padding: 5px;'>X<\/label><input type='text'  data-role ='none'  title='"+this._getLocalizedLabels("dimensions")+"' style='margin-right: 5px;' class='e-inputtext e-dimensions e-rte-videoY' maxlength='3'"+this._TagId("_videoY")+"><input type='checkbox' class='e-rte-videoConsrn' data-role ='none'"+this._TagId("_video_consrn")+"<label "+this._labelFor("_video_consrn")+"style='padding: 5px;'>"+this._getLocalizedLabels("constrainProportions")+"<\/label><\/div><\/div><div class='e-rte-button e-fieldseparate'><button id='video_insert'type='button' data-role ='none' class='e-rte-btn "+r+"'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button id='video_cancel' type='button' data-role ='none' class='e-rte-btn "+r+"'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");u.appendTo(this._videoDialog);this._videoDialog.appendTo(this._rteWapper);this.model.showDimensions||this._rteWapper.find(".e-rte-videoDimensions").hide();i=this._getDialogModel();i.width="auto";i.closeIconTooltip=this._getLocalizedLabels("closeIcon");i.title=this._getLocalizedLabels("video");i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.close=function(){f._ieCursorMaintainance()};this._videoDialog.ejDialog(i);this._videoDialog.closest(".e-dialog-wrap").addClass("e-rte");this.model.showRoundedCorner&&this._videoDialog.find(".e-inputtext").addClass("e-corner-all");this._chkvideoDimensions=this._videoDialog.find(".e-rte-videoConsrn");this._chkvideoDimensions.ejCheckBox({checked:!0,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._videoDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._videoDialog.find(".e-rte-btn"),"click",this._insertVideo);this._on(this._videoDialog.find("input.e-dimensions"),"change",this._recalcVideoSize);this.model.showRoundedCorner&&this._subControlsSetModel()},_renderTableDialog:function(){var u=this,r,i;this._createTable=t.buildTag("div.e-rte-table-picker#"+this._rteId+"_table");this._customTable=n("<div class='customtable-group e-rte-createCustomTableLink' "+this._TagId("_createCustomTableLink")+"><span class='e-rte-toolbar-icon "+this._rteIconsList.customTableImage+"'><\/span><a class='customtable-link' role='button' title='"+this._getLocalizedLabels("customTable")+"'>"+this._getLocalizedLabels("customTable")+"<\/a><\/div><div class='customtable-group e-rte-eTblProperties e-disable' "+this._TagId("_eTblProperties")+"><span class='e-rte-toolbar-icon "+this._rteIconsList.customTableImage+"'><\/span><a class='customtable-link' role='button' title='"+this._getLocalizedLabels("editTable")+"'>"+this._getLocalizedLabels("editTable")+"<\/a><\/div>");this._tblheaderDiv=t.buildTag("div.e-rte-tableheader");this._tblheaderDiv.html(this._getLocalizedLabels("createTable"));this._tblheaderDiv.appendTo(this._createTable);r=t.buildTag("div.e-rte-table");this._drawTable(r);r.appendTo(this._createTable);this._createTable.appendTo(this._rteWapper);i=this._getDialogModel();i.enableModal=!1;i.showHeader=!1;i.width="auto";i.minWidth="270px";i.maxWidth="270px";i.showRoundedCorner=this.model.showRoundedCorner;i.close=function(n){n.event&&n.event.clickAction&&u._ieCursorMaintainance()};this._createTable.ejDialog(i);this._on(this._customTable,"click",this._openCustomTable);this._customTable.appendTo(this._createTable)},_createCustomTable:function(){var r,u,i;this.model.showCustomTable||this._createTable.find("#"+this._rteId+"_createCustomTableLink").hide();r=this.model.enableRTL?"e-rtlrte":"";this._customTableDialog=t.buildTag("div.e-rte-customtable#"+this._rteId+"_customTable");u=n("<div class='e-fieldgroup'><div class='e-rte-tablefields'><label "+this._labelFor("_txtColumns")+">"+this._getLocalizedLabels("tableColumns")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='numerictextbox e-rte-txtColumns' "+this._TagId("_txtColumns")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtRows")+">"+this._getLocalizedLabels("tableRows")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='numerictextbox e-rte-txtRows' "+this._TagId("_txtRows")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtWidth")+">"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtWidth'"+this._TagId("_txtWidth")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtHeight")+">"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtHeight'"+this._TagId("_txtHeight")+"><\/div><\/div><div class='e-fieldseparate'><div class='e-rte-tablefields'><label "+this._labelFor("_txtSpacing")+">"+this._getLocalizedLabels("tableCellSpacing")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtSpacing' "+this._TagId("_txtSpacing")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtPadding")+">"+this._getLocalizedLabels("tableCellPadding")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-rte-txtPadding'"+this._TagId("_txtPadding")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_txtBorder")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-tablefields'><select class='e-rte-txtBorder' data-role ='none' "+this._TagId("_txtBorder")+"><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_chkCaption")+">"+this._getLocalizedLabels("tableCaption")+"<\/label><\/div><div class='e-rte-tablefields'><input type='checkbox' class='e-rte-chkCaption'  data-role ='none'"+this._TagId("_chkCaption")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_ddlAlignment")+">"+this._getLocalizedLabels("tableAlignment")+"<\/label><\/div><div class='e-rte-tablefields'><select class='e-rte-ddlAlignment' data-role ='none' "+this._TagId("_ddlAlignment")+"><option value='left'>"+this._getLocalizedLabels("left")+"<\/option><option value='right'>"+this._getLocalizedLabels("right")+"<\/option><option value='center'>"+this._getLocalizedLabels("center")+"<\/option><\/select><\/div><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn "+r+"' data-role ='none' id='insert'>"+this._getLocalizedLabels("dialogInsert")+"<\/button><button class='e-rte-btn "+r+"' data-role ='none' id='cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");u.appendTo(this._customTableDialog);i=this._getDialogModel();i.width="auto";i.maxWidth="480px";i.title=this._getLocalizedLabels("customTable");i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.closeIconTooltip=this._getLocalizedLabels("closeIcon");this._customTableDialog.ejDialog(i);this._customTableDialog.closest(".e-dialog-wrap").addClass("e-rte");this.model.showRoundedCorner&&this._customTableDialog.find(".e-inputtext").addClass("e-corner-all");this._createTable.find("div.e-rte-eTblProperties");this._customTableDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".numerictextbox").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:1,value:3,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox({maxValue:63,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!1,showRoundedCorner:this.model.showRoundedCorner});this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._chkTblCaption=this._customTableDialog.find(".e-rte-chkCaption");this._chkTblCaption.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._customTableDialog.find(".e-rte-btn"),"click",this._insertCustomTable);this._on(this._customTableDialog.find(".e-rte-txtWidth"),"focusout",this._widthFocusOut)},_renderEditTableDialog:function(){var f=this,i;this._eTblDialog=t.buildTag("div.e-rte-edittable#"+this._rteId+"_eTbl");var r=this._rteId,u=this.model.enableRTL?"e-rtlrte":"",e=n("<div id='"+this._rteId+"_eTbl_Tab'><ul><li class='e-first'><a href='#"+this._rteId+"_eTblTable'>"+this._getLocalizedLabels("table")+" <\/a><\/li><li class='e-nofirst'><a href='#"+this._rteId+"_eTblRow'>"+this._getLocalizedLabels("row")+" <\/a><\/li><li class='e-nofirst'><a href='#"+this._rteId+"_eTblCell'>"+this._getLocalizedLabels("cell")+" <\/a><\/li><\/ul><div id='"+this._rteId+"_eTblTable'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblWidth")+">"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblWidth")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblHeight")+">"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblHeight")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCellSpace")+">"+this._getLocalizedLabels("tableCellSpacing")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-numerictextbox' "+this._TagId("_eTblCellSpace")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCellPad")+">"+this._getLocalizedLabels("tableCellPadding")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext e-numerictextbox' "+this._TagId("_eTblCellPad")+"><\/div><div class='e-rte-tablefields'><label  "+this._labelFor("_eTblAlign")+">"+this._getLocalizedLabels("tableAlignment")+"<\/label><\/div><div class='e-rte-tablefields'><select id='"+r+"_eTblAlign' data-role ='none'  class='e-rte-dropdown'><option value='left'>"+this._getLocalizedLabels("left")+"<\/option><option value='right'>"+this._getLocalizedLabels("right")+"<\/option><option value='center'>"+this._getLocalizedLabels("center")+"<\/option><\/select><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblCaption")+">"+this._getLocalizedLabels("tableCaption")+"<\/label><\/div><div class='e-rte-tablefields'><input type='checkbox' data-role ='none' "+this._TagId("_eTblCaption")+"><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblBrdrPx")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-stylefield'><div class='e-img-border-field'><input  data-role ='none' type='text' title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext e-numerictextbox' maxlength='3'  "+this._TagId("_eTblBrdrPx")+"><\/div><div class='e-img-border-field'><select "+this._TagId("_eTbl_border_style")+" class='e-rte-dropdown' data-role ='none' ><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext' "+this._TagId("_eTbl_border_color")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblStyle")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-stylefield'><input  data-role ='none' type='text' class='e-inputtext' "+this._TagId("_eTblStyle")+"><\/div><\/div><\/div><div id='"+r+"_eTblRow'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRHeight")+">"+this._getLocalizedLabels("tableHeight")+"<\/label><\/div><div class='e-rte-tablefields'><input  data-role ='none' type='text' class='e-inputtext' "+this._TagId("_eTblRHeight")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRAlign")+">"+this._getLocalizedLabels("textAlign")+"<\/label><\/div><div class='e-rte-tablefields'><select "+this._TagId("_eTblRAlign")+" data-role ='none'  class='e-rte-dropdown'><option value='left'>"+this._getLocalizedLabels("left")+"<\/option><option value='right'>"+this._getLocalizedLabels("right")+"<\/option><option value='center'>"+this._getLocalizedLabels("center")+"<\/option><\/select><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRBrdrPx")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-stylefield'><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext e-numerictextbox' maxlength='3'  "+this._TagId("_eTblRBrdrPx")+"><\/div><div class='e-img-border-field'><select "+this._TagId("_eTblRBrdrStyle")+" data-role ='none' class='e-rte-dropdown'><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext' "+this._TagId("_eTblRBrdrColor")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblRStyle")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-stylefield'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblRStyle")+"><\/div><\/div><\/div><div id='"+r+"_eTblCell'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClWidth")+">"+this._getLocalizedLabels("tableWidth")+"<\/label><\/div><div class='e-rte-tablefields'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblClWidth")+"><\/div><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClAlign")+">"+this._getLocalizedLabels("textAlign")+"<\/label><\/div><div class='e-rte-tablefields'><select "+this._TagId("_eTblClAlign")+" data-role ='none'  class='e-rte-dropdown'><option value='left'>"+this._getLocalizedLabels("left")+"<\/option><option value='right'>"+this._getLocalizedLabels("right")+"<\/option><option value='center'>"+this._getLocalizedLabels("center")+"<\/option><\/select><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClBrdrPx")+">"+this._getLocalizedLabels("tableBorder")+"<\/label><\/div><div class='e-rte-stylefield'><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext e-numerictextbox' maxlength='3' "+this._TagId("_eTblClBrdrPx")+" ><\/div><div class='e-img-border-field'><select "+this._TagId("_eTblClBrdrStyle")+" data-role ='none' class='e-rte-dropdown'><option value='solid'>"+this._getLocalizedLabels("solid")+"<\/option><option value='dotted'>"+this._getLocalizedLabels("dotted")+"<\/option><option value='dashed'>"+this._getLocalizedLabels("dashed")+"<\/option><option value='double'>"+this._getLocalizedLabels("doubled")+"<\/option><\/select><\/div><div class='e-img-border-field'><input type='text' data-role ='none'  title='"+this._getLocalizedLabels("tableBorder")+"' class='e-inputtext' "+this._TagId("_eTblClBrdrColor")+"><\/div><\/div><\/div><div class='e-img-field-group'><div class='e-rte-tablefields'><label "+this._labelFor("_eTblClStyle")+">"+this._getLocalizedLabels("imageStyle")+" <\/label><\/div><div class='e-rte-stylefield'><input type='text' data-role ='none'  class='e-inputtext' "+this._TagId("_eTblClStyle")+"><\/div><\/div><\/div><\/div><div class='e-rte-button e-fieldseparate'><button class='e-rte-btn "+u+"' data-role ='none' id='"+r+"_eTbl_apply'>"+this._getLocalizedLabels("dialogApply")+"<\/button><button class='e-rte-btn "+u+"' data-role ='none' id='"+r+"_eTbl_cancel'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");e.appendTo(this._eTblDialog);this._tblborderPicker=this._eTblDialog.find("#"+this._rteId+"_eTbl_border_color").ejColorPicker({cssClass:this.model.cssClass,modelType:"palette",buttonText:{apply:this._getLocalizedLabels("buttonApply"),cancel:this._getLocalizedLabels("buttonCancel"),swatches:this._getLocalizedLabels("swatches")}}).data("ejColorPicker");this._eTblDialog.appendTo(this._rteWapper);i=this._getDialogModel();i.width="auto";i.title=this._getLocalizedLabels("editTable");i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.closeIconTooltip=this._getLocalizedLabels("closeIcon");i.close=function(){f._ieCursorMaintainance()};this._eTblDialog.ejDialog(i);this._eTblDialog.closest(".e-dialog-wrap").addClass("e-rte e-edittable");this.model.showRoundedCorner&&this._eTblDialog.find(".e-inputtext").addClass("e-corner-all");this._eTblDialog.find(".e-numerictextbox").ejNumericTextbox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",minValue:0,value:0,showRoundedCorner:this.model.showRoundedCorner});this._eTblDialog.find(".e-rte-dropdown").ejDropDownList({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",showRoundedCorner:this.model.showRoundedCorner});this._eTblAlign=this._getTableObj("Align").data("ejDropDownList");this._eTblAlign.option("enabled",!1);this._getTableObj("_Tab").ejTab({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,width:"100%",enabled:!0,showRoundedCorner:this.model.showRoundedCorner});this._eTblCaption=this._getTableObj("Caption");this._eTblCaption.ejCheckBox({enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._eTblDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._eTblDialog.find(".e-rte-btn"),"click",this._eTblBtnClick);this.model.showRoundedCorner&&this._subControlsSetModel()},_drawTable:function(n){for(var r,i,u,f=0;f<this.model.tableRows;f++){for(i=t.buildTag("div.e-rtetablerow"),r=0;r<this.model.tableColumns;r++)u=t.buildTag("div.e-rte-tablecell e-default"),u.appendTo(i);i.appendTo(n)}},_renderSourceDialog:function(){var f=this,r,u,i;this._sourceDialog=t.buildTag("div.e-rte-source#"+this._rteId+"_Source");r=this.model.enableRTL?"e-rtlrte":"";u=n("<textarea class='e-rte-srctextarea e-inputtext'><\/textarea><div class='e-rte-button e-fieldseparate'><button id='src_update' data-role ='none' class='e-rte-btn "+r+"'>"+this._getLocalizedLabels("dialogUpdate")+"<\/button><button id='src_cancel' class='e-rte-btn "+r+"'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");u.appendTo(this._sourceDialog);i=this._getDialogModel();i.title=this._getLocalizedLabels("viewHtml");i.width="auto";i.minWidth="330px";i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.close=function(){f._ieCursorMaintainance()};i.closeIconTooltip=this._getLocalizedLabels("closeIcon");this._sourceDialog.ejDialog(i);this._sourceDialog.closest(".e-dialog-wrap").addClass("e-rte e-sourcedialog");this.model.showRoundedCorner&&this._sourceDialog.find(".e-inputtext").addClass("e-corner-all");this._sourceDialog.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._sourceDialog.find(".e-rte-btn"),"click",this._srcBtnClick)},_renderAlertDialog:function(){var u=this,r,i;this._alertWindow=t.buildTag("div#"+this._rteId+"_Alert");r=n("<p class='e-alerttext' style='margin:0.875em 0em;'><\/p><div class='e-rte-button e-fieldseparate'><button data-role ='none' class='e-rte-btn e-alert-ok' type='button'>"+this._getLocalizedLabels("dialogOk")+"<\/button><button class='e-rte-btn e-alert-cancel' data-role='none'>"+this._getLocalizedLabels("dialogCancel")+"<\/button><\/div>");r.appendTo(this._alertWindow);i=this._getDialogModel();i.showHeader=!1;i.width="auto";i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.close=function(){u._ieCursorMaintainance()};i.minHeight="50px";this._alertWindow.ejDialog(i);this._alertWindow.closest(".e-dialog-wrap").addClass("e-rte");this._alertWindow.find(".e-rte-btn").ejButton({enableRTL:this.model.enableRTL,type:"button",cssClass:this.model.cssClass,showRoundedCorner:this.model.showRoundedCorner});this._on(this._alertWindow.find(".e-rte-btn"),"click",this._alertBtnClick);this._alertWindow.find(".e-alert-cancel").hide()},_alertBtnClick:function(t){if(n.trim(this._alertWindow.find(".e-alerttext").html())==this._getLocalizedLabels("deleteAlert")&&n(t.target).hasClass("e-alert-ok")){this._getDocument().body.innerHTML=" ";this._emptyContent();this.model.showToolbar&&this._toolBarObj.selectItemByID(this._rteId+"_justifyLeft");this._setBackupData();this._updateCount();var i=this._isIE()?this._currentSelNode:this._getSelectedNode();this._updateTagInfo(i);this._onChange()}this._alertWindow.ejDialog("close");this._alertWindow.find(".e-alert-cancel").hide()},_emptyContent:function(){var u,t=document.createElement("span"),i,r;t.innerHTML="&#65279;";i=this._getDocument().createRange();r=this._getDocument().getSelection();this._getDocument().body.firstChild&&this._getDocument().body.firstChild.remove();this._getDocument().body.appendChild(u=this._getDocument().createElement("p"));u.appendChild(t);r.removeAllRanges();i.setStart(t.firstChild,0);i.setEnd(t.firstChild,0);r.addRange(i);n(this._getDocument().body).find("p span").remove()},_openAlert:function(t){this._alertWindow.find(".e-alerttext").html(t);this._alertWindow.ejDialog("instance")._centerPosition();n("#"+this._rteId+"_Alert_wrapper").css({"z-index":this._onGetMaxZindex()});this._alertWindow.ejDialog("open")},_renderFormat:function(){this._formatDDL=t.buildTag("input#"+this._rteId+"_formatDDL","","",{type:"text",title:this._getLocalizedLabels("format"),"data-role":"none"});var n={};n.dataSource=this._formatText(this.model.format,[{text:"paragraph",value:"<p>"},{text:"quotation",value:"<blockquote>"},{text:"heading1",value:"<h1>"},{text:"heading2",value:"<h2>"},{text:"heading3",value:"<h3>"},{text:"heading4",value:"<h4>"},{text:"heading5",value:"<h5>"},{text:"heading6",value:"<h6>"}]);n.width="105px";n.enableRTL=this.model.enableRTL;n.popupWidth="175px";n.popupHeight="auto";n.selectedItemIndex=0;n.select=this._formatChange;n.cssClass="e-rte-format-ddl";n.showRoundedCorner=this.model.showRoundedCorner;n.fields={text:"text",value:"value",spriteCssClass:"spriteCssClass"};this._formatDDL.appendTo(this._rteToolbar.find("li.e-rteItem-format").html(""));this._formatDDL.ejDropDownList(n);this._formatPopupStyle()},_formatText:function(n,t){for(var r,i=0;i<n.length;i++)for(r=0;r<t.length;r++)if(n[i].value==t[r].value){n[i].text=this._getLocalizedLabels(t[r].text)?this._getLocalizedLabels(t[r].text):n[i].text;break}return n},_formatPopupStyle:function(){for(var i=this._formatDDL.data("ejDropDownList").popupPanelWrapper.find("li"),t=0;t<i.length;t++)n(i[t]).addClass(this.model.format[t].spriteCssClass)},_renderFontStyle:function(){this._fontStyleDDL=t.buildTag("input#"+this._rteId+"_fontNameDDL","","",{type:"text",title:this._getLocalizedLabels("fontName"),"data-role":"none"});var n={};n.dataSource=this._formatText(this.model.fontName,[{text:"timesnewroman",value:"Times New Roman,Times,serif"},{text:"segoeui",value:"Segoe UI"},{text:"arial",value:"Arial,Helvetica,sans-serif"},{text:"couriernew",value:"Courier New,Courier,monospace"},{text:"georgia",value:"Georgia,serif"},{text:"impact",value:"Impact,Charcoal,sans-serif"},{text:"lucidaconsole",value:"Lucida Console,Monaco,monospace"},{text:"tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"trebuchetms",value:"Trebuchet MS,Helvetica,sans-serif"},{text:"verdana",value:"Verdana,Geneva,sans-serif"}]);n.enableRTL=this.model.enableRTL;n.selectedItemIndex=0;n.htmlAttributes={datafontid:""+this._rteId};n.select=this._fontStyleChange;n.showRoundedCorner=this.model.showRoundedCorner;n.fields={text:"text",value:"value"};this._fontStyleDDL.appendTo(this._rteToolbar.find("li.e-rteItem-fontName").html(""));this._fontStyleDDL.ejDropDownList(n)},_renderFontSize:function(){this._fontSizeDDL=t.buildTag("input#"+this._rteId+"_fontSizeDDL","","",{type:"text",title:this._getLocalizedLabels("fontSize"),"data-role":"none"});var n={};n.dataSource=this.model.fontSize;n.width="100px";n.enableRTL=this.model.enableRTL;n.selectedItemIndex=2;n.htmlAttributes={datafontid:""+this._rteId};n.select=this._fontSizeChange;n.showRoundedCorner=this.model.showRoundedCorner;n.fields={text:"text",value:"value"};this._fontSizeDDL.appendTo(this._rteToolbar.find("li.e-rteItem-fontSize").html(""));this._fontSizeDDL.ejDropDownList(n)},_renderFontColor:function(){var e=this,u,i,r,f;this._fontColorSplit=t.buildTag("button#"+this._rteId+"_fontColorbtn","",{},{type:"button","data-role":"none"});u=n("<ul id='"+this._rteId+"_colorTable' class='e-rte-colorpalette'><li><\/li><\/ul>");u.find("li").append(this._colorTable());i={};i.width="42px";i.contentType="textandimage";i.targetID=this._rteId+"_colorTable";i.enableRTL=this.model.enableRTL;i.prefixIcon=this._rteIconsList.fontColor;i.showRoundedCorner=this.model.showRoundedCorner;this._fontColorSplit.appendTo(this._rteToolbar.find("li.e-rteItem-fontColor").html(""));r=n("#"+this._rteId+"_colorTable").get(0);r&&(n(r).parent().hasClass("e-menu-wrap")?n(r).parent().remove():n(r).remove());f=n("<div class='customcolor e-rte-customcolor' "+this._TagId("_customcolor")+"><a class='customcolor-link' role='button' title='"+this._getLocalizedLabels("customColor")+"'>"+this._getLocalizedLabels("customFontColor")+"<\/a><\/div>");u.append(f);u.appendTo(this._rteToolbar.find("li.e-rteItem-fontColor"));this._on(f,"click",this._openColorpalette);this._fontColorSplit.ejSplitButton(i);this._splitObj=this._fontColorSplit.ejSplitButton("instance");this._splitObj.option("beforeOpen",function(){e._bindClickOperation("FontColor")});this._on(this._fontColorSplit,"click",this._fontColorClick);this._fontColorSplit.find("span."+this._rteIconsList.fontColor).removeClass("e-icon");this._fontColorSplit.find("span.e-btntxt").css("background-color",this._fontColor)},_renderUnOrderList:function(){var u=this,i,r;this._unOrderSplit=t.buildTag("button#"+this._rteId+"_unorder","",{},{type:"button","data-role":"none"});this._unorderLiTemplate=t.buildTag("ul#"+this._rteId+"_unorderlist","",{height:"auto",width:"84px"},{"class":"e-rte-unorderlistname"});n("<li id='none' title='"+this._getLocalizedLabels("none")+"' style='float:left;width:50%;'><span class='e-rte-toolbar-icon e-rte-unlistitems e-nonelist-icon'><\/span><\/li><li id='disc' title='"+this._getLocalizedLabels("disc")+"' style='float:left;width:50%;'><span class='e-rte-toolbar-icon e-rte-unlistitems e-disclist-icon'><\/span><\/li><li id='square' title='"+this._getLocalizedLabels("square")+"' class='square' style='float:left;width:50%;'><span class='e-rte-toolbar-icon e-rte-unlistitems e-squarelist-icon'><\/span><\/li><li id='circle' title='"+this._getLocalizedLabels("circle")+"' style='float:left;width:50%;'><span class='e-rte-toolbar-icon e-rte-unlistitems e-circlelist-icon'><\/span><\/li>").appendTo(this._unorderLiTemplate);t.isNullOrUndefined(u.model.tools.customUnorderedList)||n.each(u.model.tools.customUnorderedList,function(t,i){t==0&&n(u._unorderLiTemplate).find("#circle,#square").attr("class","e-liseparator");n("<li id='"+(i.name?i.name:"ulcustom"+t)+"' class='"+(i.css?i.css:"")+"' title='"+(i.tooltip?i.tooltip:"")+"' style='float:left;width:100%;'>"+(i.text?i.text:"")+"<\/li>").appendTo(u._unorderLiTemplate)});i={};i.width="42px";i.contentType="imageonly";i.targetID=this._rteId+"_unorderlist";i.enableRTL=this.model.enableRTL;i.prefixIcon="e-icon e-rte-toolbar-icon "+this._rteIconsList.unorderedList;i.showRoundedCorner=this.model.showRoundedCorner;i.itemSelected=n.proxy(this._onUnorderList,this);this._unOrderSplit.appendTo(this._rteToolbar.find("li.e-rteItem-unorderedList").html(""));r=n("#"+this._rteId+"_unorderlist").get(0);r&&(n(r).parent().hasClass("e-menu-wrap")?n(r).parent().remove():n(r).remove());this._unorderLiTemplate.appendTo(this._rteToolbar.parents("body").length>0?this._rteToolbar.find("li.e-rteItem-unorderedList"):n("body"));this._unOrderSplit.ejSplitButton(i);this._unOrderSplitObj=this._unOrderSplit.ejSplitButton("instance");this._unOrderSplit.find("span.e-unorderedList-icon").removeClass("e-icon");this._on(this._unOrderSplit,"click",this._onUnorderList)},_renderOrderList:function(){var u=this,i,r;this._orderSplit=t.buildTag("button#"+this._rteId+"_order","",{},{type:"button","data-role":"none"});this._orderLiTemplate=t.buildTag("ul#"+this._rteId+"_orderlist","",{height:"auto",width:"124.05px"},{"class":"e-rte-orderlistname"});n("<li id='none' title='"+this._getLocalizedLabels("none")+"' style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-nonelist-icon'><\/span><\/li><li id='decimal' title='"+this._getLocalizedLabels("number")+"' style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-numbering-icon'><\/span><\/li><li id='lower-alpha' title='"+this._getLocalizedLabels("loweralpha")+"'  style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-loweralpha-icon'><\/span><\/li><li id='lower-roman' title='"+this._getLocalizedLabels("lowerroman")+"' style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-lowerroman-icon'><\/span><\/li><li id='upper-alpha' title='"+this._getLocalizedLabels("upperalpha")+"' style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-upperalpha-icon'><\/span><\/li><li id='upper-roman' title='"+this._getLocalizedLabels("upperroman")+"' style='float:left;width:33.33%;'><span class='e-rte-toolbar-icon e-rte-listitems e-upperroman-icon'><\/span><\/li>").appendTo(this._orderLiTemplate);t.isNullOrUndefined(u.model.tools.customOrderedList)||n.each(u.model.tools.customOrderedList,function(t,i){t==0&&n(u._orderLiTemplate).find("#upper-roman,#upper-alpha,#lower-roman").attr("class","e-liseparator");n("<li id='"+(i.name?i.name:"olcustom"+t)+"' class='"+(i.css?i.css:"")+"' title='"+(i.tooltip?i.tooltip:"")+"' style='float:left;width:100%;'>"+(i.text?i.text:"")+"<\/li>").appendTo(u._orderLiTemplate)});i={};i.width="42px";i.contentType="imageonly";i.enableRTL=this.model.enableRTL;i.showRoundedCorner=this.model.showRoundedCorner;i.targetID=this._rteId+"_orderlist";i.prefixIcon="e-icon e-rte-toolbar-icon "+this._rteIconsList.orderedList;i.itemSelected=n.proxy(this._onOrderList,this);this._orderSplit.appendTo(this._rteToolbar.find("li.e-rteItem-orderedList").html(""));r=n("#"+this._rteId+"_orderlist").get(0);r&&(n(r).parent().hasClass("e-menu-wrap")?n(r).parent().remove():n(r).remove());this._orderLiTemplate.appendTo(this._rteToolbar.parents("body").length>0?this._rteToolbar.find("li.e-rteItem-orderedList"):n("body"));this._orderSplit.ejSplitButton(i);this._orderSplitObj=this._orderSplit.ejSplitButton("instance");this._on(this._orderSplit,"click",this._onOrderList)},_renderBGColor:function(){var e=this,r,i,f,u;this._bgColorSplit=t.buildTag("button#"+this._rteId+"_backgroundColorbtn","",{},{type:"button","data-role":"none"});r=n("<ul id='"+this._rteId+"_colorBGTable' class='e-rte-colorpalette'><li><\/li><\/ul>");r.find("li").append(this._colorTable());this._bgTransparent=n("<button id='"+this._rteId+"_backgroundtransparentbtn'class='e-rte-transbtn' role='button' title='"+this._getLocalizedLabels("TransBGColor")+"'>"+this._getLocalizedLabels("TransBGColor")+"<\/button>");i={};i.width="42px";i.contentType="textandimage";i.targetID=this._rteId+"_colorBGTable";i.enableRTL=this.model.enableRTL;i.prefixIcon=this._rteIconsList.backgroundColor;i.showRoundedCorner=this.model.showRoundedCorner;f=n("<div class='customBGcolor e-rte-customcolor' "+this._TagId("_customBGcolor")+"><a class='customcolor-link ' role='button' title='"+this._getLocalizedLabels("customBGColor")+"'>"+this._getLocalizedLabels("customBGColor")+"<\/a><\/div>");r.append(f);this._on(f,"click",this._openColorpalette);this._bgTransparent.prependTo(r);this._bgColorSplit.appendTo(this._rteToolbar.find("li.e-rteItem-backgroundColor").html(""));u=n("#"+this._rteId+"_colorBGTable").get(0);u&&(n(u).parent().hasClass("e-menu-wrap")?n(u).parent().remove():n(u).remove());r.appendTo(this._rteToolbar.find("li.e-rteItem-backgroundColor"));this._bgColorSplit.ejSplitButton(i);this._bgTransparent.ejButton({width:"100%",contentType:"text",targetID:this._rteId+"_colorBGTable",showRoundercorner:this.model.showRounderCorner});this._bgObj=this._bgTransparent.ejButton("instance");this._on(this._bgTransparent,"click",this._bgTransClick);this._bgSplitObj=this._bgColorSplit.ejSplitButton("instance");this._bgSplitObj.option("beforeOpen",function(){e._bindClickOperation("BGColor")});this._on(this._bgColorSplit,"click",this._bgColorClick);this._bgColorSplit.find("span."+this._rteIconsList.backgroundColor).removeClass("e-icon");this._bgColorSplit.find("span.e-btntxt").css("background-color",this._bgColor)},_bindClickOperation:function(t){var i=this,r,f=t=="BGColor"?i._bgSplitObj:i._splitObj,e=t=="BGColor"?"_backgroundColorbtn":"_fontColorbtn",u=t=="BGColor"?"_colorBGTable":"_colorTable";r=n("#"+i._rteId+e).ejSplitButton("instance");t=="BGColor"?i._bgSplitMenu=r:i._splitMenu=r;r.model.close=function(){f.contstatus=!1;i._off(n("#"+i._rteId+u).find("div.e-rte-palettetable"),"click",t=="BGColor"?i._bgColorPaletteClick:i._colorPaletteClick)};i._on(n("#"+i._rteId+u).find("div.e-rte-palettetable"),"click",t=="BGColor"?i._bgColorPaletteClick:i._colorPaletteClick)},_colorTable:function(){for(var u,f=t.buildTag("div.e-rte-table"),i=0,n,r,e,o=0;o<this.model.colorPaletteRows;o++){for(r=t.buildTag("div.e-rtetablerow"),u=0;u<this.model.colorPaletteColumns;u++)i<this.model.colorCode.length&&(n="#"+this.model.colorCode[i],e=t.buildTag("div.e-rte-palettetable","",{"background-color":n},{title:n,"color-code":n}),e.appendTo(r),i++);r.appendTo(f)}return f},_recalcVideoSize:function(n){var r,u,t,i;r=this._videoDialog.find(".e-rte-videoX");u=this._videoDialog.find(".e-rte-videoY");t=r.val();i=u.val();!this._chkvideoDimensions.ejCheckBox("isChecked")||!this._videoWidth||!this._videoHeight||!t||!i||(n.target.id==r[0].id?(i=Math.round(t/this._videoWidth*i),u.val(i)):(t=Math.round(i/this._videoHeight*t),r.val(t)));this._videoWidth=t;this._videoHeight=i},_recalcImgSize:function(n){var r,u,t,i;r=this._imgDialog.find(".e-rte-imgX");u=this._imgDialog.find(".e-rte-imgY");t=r.val();i=u.val();!this._chkImgDimensions.ejCheckBox("isChecked")||!this._imgWidth||!this._imgHeight||!t||!i||(n.target.id==r[0].id?(i=Math.round(t/this._imgWidth*i),u.val(i)):(t=Math.round(i/this._imgHeight*t),r.val(t)));this._imgWidth=t;this._imgHeight=i},_urlValidation:function(t){var i=n(t.target);i.hasClass("e-error")&&i.removeClass("e-error")},_ieLinkRange:function(){var n=this._getRange();this._isIE()||this._isIE8()?(t.isNullOrUndefined(this._currentSelNode)||this._currentSelNode.nodeName.toLowerCase()=="html"||n.setStart(this._currentSelNode,this._currentSelNode.childNodes.length),this._selectionRange=n):(t.isNullOrUndefined(this._currentSelNode)||this._currentSelNode.nodeName.toLowerCase()!="html",this._selectionRange=n)},_ieCursorMaintainance:function(){this._isIE8()?this._setRange(this._currentSelNode,this._getDocument().body.createTextRange(),!0):(this._ieLinkRange(),this._focus())},_linkBtnClick:function(n){n.target.id==="link_cancel"?(this._clearLinkFields(),this._linkDialog.ejDialog("close"),this._ieCursorMaintainance()):n.target.id==="link_insert"&&(this._isIE()&&!this._isIE8()&&this._ieLinkRange(),this._restoreSelection(this._selectionRange),this._txtURL.val()!=""?this._onInsertLink():(this._onUnlink(),this._linkDialog.ejDialog("close")),this._trigger("execute",{commandName:"hyperlink"}),this._onChange(),this._setBackupData())},_imageBtnClick:function(i){if(i.target.id===this._rteId+"_img_cancel")this._imgDialog.ejDialog("close"),this._ieCursorMaintainance();else if(i.target.id===this._rteId+"_img_insert"){var r=this._imgURL.val().match(/(ftp:|http:|https:)\/\//g);if(t.isNullOrUndefined(r)&&this._imgURL.val()!==""||!t.isNullOrUndefined(r)&&r[0].length<this._imgURL.val().length)this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length?this._onInsertImage():this._imgDialog.ejDialog("close"),this._onChange(),this._setBackupData();else return this._imgURL.addClass("e-error"),this._isUrl(n.trim(this._imageLink.val()))||this._imageLink.addClass("e-error"),!1}},_srcBtnClick:function(i){var r,u,f;if(i.target.id==="src_update"){r=n.trim(this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value);this.model.enableHtmlEncode&&(r=this._decode(r));try{this._getDocument().documentElement.innerHTML=r.replace("<html>","").replace("<\/html>","");this.model.enableXHTML&&(this._getDocument().documentElement.innerHTML=this._updateXhtml())}catch(e){u=/<body[^>]*>((.|[\n\r])*)<\/body>/i;t.isNullOrUndefined(u.exec(r))||(r=u.exec(r)[1],this._getDocument().body.innerHTML=r)}this._onChange();this._updateCount()}this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value="";f=n(this._getDocument()).find("table.e-rte-table");this.model.enableRTL||this._on(f,"mouseover",this._tableMouseOver);this._sourceDialog.ejDialog("close");this._showHideContextMenu()},_eTblBtnClick:function(n){n.target.id===this._rteId+"_eTbl_cancel"?(this._eTblDialog.ejDialog("close"),this._ieCursorMaintainance()):n.target.id===this._rteId+"_eTbl_apply"&&(this._isIE()&&!this._isIE8()&&this._ieLinkRange(),this._oneditTable(),this._onChange(),this._setBackupData())},_insertCustomTable:function(i){var f,r,u;if(this._customTableValidation=!1,i.target.id==="insert"){var e=this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox("getValue"),o=this._customTableDialog.find(".e-rte-txtRows").ejNumericTextbox("getValue"),s=this._customInputValidation(this._customTableDialog.find(".e-rte-txtHeight")),h=this._customInputValidation(this._customTableDialog.find(".e-rte-txtWidth")),c=this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("getSelectedValue"),l=this._customInputValidation(this._customTableDialog.find(".e-rte-txtSpacing")),a=this._customInputValidation(this._customTableDialog.find(".e-rte-txtPadding")),v=this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("getSelectedValue"),y=this._chkTblCaption.ejCheckBox("isChecked");this._customTableValidation||(t.isNullOrUndefined(this._tableInsertAt)||t.isNullOrUndefined(this._tableInsertAt.startContainer)||this._restoreSelection(this._tableInsertAt),f=this._tableGenerator(o,e,!1,h,s,l,a,c,v,y),this.executeCommand("inserthtml",f),r=n(this._getDocument()).find("table.e-rte-table"),u=this._customTableDialog.find(".e-rte-ddlAlignment").data("ejDropDownList"),u.option("value")=="Center"&&r.attr("style","margin: 0 auto"),this.model.enableRTL||this._on(r,"mouseover",this._tableMouseOver),this._onChange(),u.option({value:"",enabled:!1}));this._on(this._customTableDialog.find(".e-rte-txtHeight"),"keypress",this._urlValidation)._on(this._customTableDialog.find(".e-rte-txtWidth"),"keypress",this._urlValidation)._on(this._customTableDialog.find(".e-rte-txtSpacing"),"keypress",this._urlValidation)._on(this._customTableDialog.find(".e-rte-txtPadding"),"keypress",this._urlValidation)}this._customTableValidation||(this._customTableDialog.ejDialog("close"),this._clearTableFields(),this._ieCursorMaintainance())},_customInputValidation:function(n){var t=n.val().toLowerCase(),i=t.substr(t.length-2,2),r=t.match(/[!@#$%^&*()_+\-=\[\]{};':"\\|,<>\/?]/gi),u=t.match(/[a-z]/gi);return!isNaN(t)&&(r==null||r.length==0)||t.length>1&&t.substr(t.length-1,1)=="%"&&r.length==1&&(u==null||u.length==0)||t.length>2&&(r==null||r.length==0)&&u!=null&&u.length==2&&(i=="px"||i=="in"||i=="cm"||i=="mm"||i=="em"||i=="ex"||i=="pt"||i=="pc")?t:(n.addClass("e-error"),this._customTableValidation=!0,0)},_clearTableFields:function(){this._customTableDialog.find(".e-rte-txtColumns").ejNumericTextbox("option","value",3);this._customTableDialog.find(".e-rte-txtRows").ejNumericTextbox("option","value",3);this._customTableDialog.find(".e-rte-txtHeight").val("");this._customTableDialog.find(".e-rte-txtWidth").val("");this._customTableDialog.find(".e-rte-ddlAlignment").ejDropDownList("clearText");this._customTableDialog.find(".e-rte-txtSpacing").val("");this._customTableDialog.find(".e-rte-txtPadding").val("");var n=this._customTableDialog.find(".e-rte-txtBorder").ejDropDownList("clearText"),t=this._chkTblCaption.ejCheckBox({check:!1})},_clearEditTableFields:function(){this._eTblHeight=this._eTblDialog.find("input").val("");this._eTblDialog.find(".e-numerictextbox").data("ejNumericTextbox").option("value","");this._eTblDialog.find(".e-rte-dropdown").data("ejDropDownList").option("value","");this._eTblAlign.disable();this._eTblCaption.ejCheckBox({check:!1})},_clearLinkFields:function(){this._txtURL=this._linkDialog.find(".e-rte-linkUrl");this._txtURL.removeClass("e-error");this._txtURL.val("http://");this._txtLinkText=this._linkDialog.find(".e-rte-linkText");this._txtLinkText.val("");this._txtLinkTitle=this._linkDialog.find(".e-rte-linkTitle");this._txtLinkTitle.val("");this._chkTarget.ejCheckBox({check:!1});this._txtURL.focus()},_textFieldFocus:function(n,t,i){if(this._isIE8()){var r=n.createTextRange();r.collapse(!0);r.moveEnd("character",t);r.moveStart("character",i);r.select()}else n.setSelectionRange(t,i)},_clearImgFields:function(){this._imgURL=this._imgDialog.find(".e-rte-imgUrl").val("http://").removeClass("e-error");this._imgDialog.find(".e-rte-imgText").val("");this._chkImgDimensions.ejCheckBox({checked:!0});this._imageLink=this._imgDialog.find(".e-rte-imgLink");this._imageLink.removeClass("e-error");this._imageLink.val("");this._imageBorderPx=this._imgDialog.find(".e-rte-imgBorderPx").data("ejNumericTextbox");this._imageBorderPx.option("value",0);this._imageBorderStyle=this._imgDialog.find(".e-rte-imgBorderStyle").data("ejDropDownList");this._imageBorderStyle.option("value","");this._imgPicker.option("value",null);this._imgDialog.find(".e-selected-color").removeAttr("style");this._imageStyle=this._imgDialog.find(".e-rte-imgStyle");this._imageStyle.val("");this._dialogchkTarget.ejCheckBox({check:!1})},_videoManager:function(){this._renderVideoDialog();var i=this._getSelectedNode();this._editVideo=null;this._getPasteRangeVal();i&&!t.isNullOrUndefined(i.tagName)&&(this._editVideo=i,this._videoWidth=parseInt(n(i).width()),this._videoHeight=parseInt(n(i).width()),this.model.showDimensions&&(this._videoDialog.find(".e-rte-videoX").val(this._videoWidth),this._videoDialog.find(".e-rte-videoY").val(this._videoHeight)));n("#"+this._rteId+"_video_wrapper").css({"z-index":this._onGetMaxZindex()});this._videoDialog.ejDialog("open");this._videoDialog.find("textarea.e-rte-video").focus()},_sourceCodeManager:function(){t.isNullOrUndefined(this._sourceDialog)&&this._renderSourceDialog();this._updateTagInfo("body");this._hideTooltip();t.isNullOrUndefined(this._getDocument().documentElement)?this._htmlSource.addClass("e-disable"):(this._sourceDialog.find("textarea.e-rte-srctextarea")[0].value=this.model.enableHtmlEncode?this._encode(this._getDocument().documentElement.outerHTML):this._getDocument().documentElement.outerHTML,n("#"+this._rteId+"_Source_wrapper").css({"z-index":this._onGetMaxZindex()}),this._sourceDialog.ejDialog("open"),this._sourceDialog.find("textarea.e-rte-srctextarea").focus())},_getPasteRangeVal:function(){this._isIE()&&(this._pasteRangeVal=this._getRange(),this._pasteFlag=!0)},_hyperLinkManager:function(i){this._renderLinkDialog();i&&this._renderFileBrowserDialog();this._getPasteRangeVal();var r=this._isIE()?this._currentSelNode:this._getSelectedNode();this._selectedHTML=t.browserInfo().name==="msie"&&t.browserInfo().version==="11.0"?this._pasteRangeVal.toString():this._getSelText();i?(this._clearFileFields(),!t.isNullOrUndefined(r)&&r.tagName.toUpperCase()=="A"?this._fileLinkText.val(n(r).html()):this._fileLinkText.val(this._selectedHTML),n("#"+this._rteId+"_fileDialog_wrapper").css({"z-index":this._onGetMaxZindex()}),this._fileDialog.ejDialog("open")):(this._clearLinkFields(),!t.isNullOrUndefined(r)&&r.tagName.toUpperCase()=="A"?this._txtLinkText.val(n(r).html()):this._txtLinkText.val(this._selectedHTML),n("#"+this._rteId+"_link_wrapper").css({"z-index":this._onGetMaxZindex()}),this._linkDialog.ejDialog("open"),this._textFieldFocus(this._txtURL[0],this._txtURL.val().length,this._txtURL.val().length));r&&!/^(A)$/.test(r.nodeName)&&r.tagName.toUpperCase()=="IMG"&&(r=n(r).parent("a")[0]);i?r&&/^(A)$/.test(r.nodeName)&&this._fileURL.val(r.href):r&&/^(A)$/.test(r.nodeName)&&(this._txtURL.val(r.href),this._txtLinkTitle.val(r.title))},_tableManager:function(){var r=this._rteToolbar.find("li.e-rteItem-createTable"),i,u,o,f,e;this._getPasteRangeVal();this._getSelectedNode().nodeName.toLowerCase()=="td"&&this._createTable.find("div.e-rte-eTblProperties").removeClass("e-disable");this.model.isResponsive&&r.length==0?(o=n(this._toolBarObj._liTemplte).outerHeight()-n(this._toolBarObj._liTemplte).height(),r=this._toolBarObj._liTemplte.find("li.e-rteItem-createTable"),n("#"+this._rteId+"_table_wrapper").css({visibility:"hidden",display:"block"}),u=n(this._toolBarObj._liTemplte).offset().top+n(this._toolBarObj._liTemplte).outerHeight()+o-n("#"+this._rteId+"_table_wrapper").offsetParent().offset().top,i=n(r).offset().left>230?n(r).offset().left-n("#"+this._rteId+"_table_wrapper").offsetParent().offset().left:n("#"+this._rteId+"_table_wrapper").offsetParent().offset().left,n("#"+this._rteId+"_table_wrapper").css({visibility:"visible"})):(i=n(r).position().left,u=n(r).position().top+r.height()+7);(parseInt(i)+parseInt(n("#"+this._id+"_table_wrapper").css("width"))>document.body.clientWidth||parseInt(i)+parseInt(n("#"+this._id+"_table_wrapper").css("width"))>parseInt(n("#"+this._id+"_wrapper").css("width"))+n("#"+this._id+"_wrapper").position().left)&&(i=parseInt(i)-(parseInt(n("#"+this._id+"_table_wrapper").css("width"))-n(r).width())+"px");f=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop;f<u&&n(window).height()<u-f+parseInt(n("#"+this._id+"_table_wrapper").css("height"))&&(u=parseInt(n("#"+this._id+"_table_wrapper").css("height"))>n(window).height()?f:n(window).height()-parseInt(n("#"+this._id+"_table_wrapper").css("height"))>0?n(window).height()-parseInt(n("#"+this._id+"_table_wrapper").css("height"))+f:f);e=this._rteWapper.offset();i=parseInt(i)-parseInt(e.left);u=parseInt(u)-parseInt(e.top);this._createTable.ejDialog("option","position",{X:i,Y:u});this._createTable.ejDialog("open");this._on(t.getScrollableParents(this._createTable),"scroll",function(){this._createTable.ejDialog("close")})},_eTblManager:function(){var i,e,s,f,u;this._renderEditTableDialog();this._clearEditTableFields();var h=this._rteId,o=n(this._getSelectedNode()).closest("td"),r=o.length>0?o[0]:this._currentSelNode;t.isNullOrUndefined(r)||r.tagName.toLowerCase()!=="td"||(i=n(r).closest("tbody").closest("table"),this._getTableObj("Height").val(n(i).height()),this._getTableObj("Width").val(n(i).width()),t.isNullOrUndefined(i[0])||(this._getTableObj("CellSpace").data("ejNumericTextbox").option("value",i[0].cellSpacing),this._getTableObj("CellPad").data("ejNumericTextbox").option("value",i[0].cellPadding),e=i[0].align),t.isNullOrUndefined(e)||e==""||(this._eTblAlign.enable(),this._eTblAlign.option("value",e)),s=n(n(r).closest("tbody")).prev("caption"),s.length>0&&this._eTblCaption.ejCheckBox({checked:!0}),t.isNullOrUndefined(i[0])||i[0].style==""||(this._getTableObj("BrdrPx").data("ejNumericTextbox").option("value",i[0].style.borderWidth.split("px")[0]),u=this._getTableObj("_border_style").data("ejDropDownList"),i[0].style.borderStyle!=""?u.selectItemByValue(i[0].style.borderStyle):u.option({selectedItemIndex:0}),this._getTableObj("_border_color").val(i[0].style.borderColor)),this._getTableObj("Style").val(i.attr("style")),f=n(r).closest("tr"),this._getTableObj("RHeight").val(n(f).height()),this._getTableObj("RAlign").data("ejDropDownList").option("value",f[0].style.textAlign),f[0].style!=""&&(this._getTableObj("RBrdrPx").data("ejNumericTextbox").option("value",f[0].style.borderWidth.split("px")[0]),u=this._getTableObj("RBrdrStyle").data("ejDropDownList"),f[0].style.borderStyle!=""?u.selectItemByValue(f[0].style.borderStyle):u.option({selectedItemIndex:0}),this._getTableObj("RBrdrColor").val(f[0].style.borderColor)),this._getTableObj("RStyle").val(f.attr("style")),this._getTableObj("ClWidth").val(n(r).width()),this._getTableObj("ClAlign").data("ejDropDownList").option("value",r.style.textAlign),r.style!=""&&(this._getTableObj("ClBrdrPx").data("ejNumericTextbox").option("value",r.style.borderLeftWidth.split("px")[0]),u=this._getTableObj("ClBrdrStyle").data("ejDropDownList"),r.style.borderStyle!=""?u.selectItemByValue(r.style.borderStyle):u.option({selectedItemIndex:0}),this._getTableObj("ClBrdrColor").val(r.style.borderColor)),this._getTableObj("ClStyle").val(n(r).attr("style")))},_getTableObj:function(n){return this._eTblDialog.find("#"+this._rteId+"_eTbl"+n)},_imageManager:function(){var i,u,r;this._renderImageDialog();this._clearImgFields();i=this._isIE()?this._currentSelNode:this._getSelectedNode();this._getPasteRangeVal();i&&!t.isNullOrUndefined(i)&&(this._imgWidth=parseInt(n(i).width()),this._imgHeight=parseInt(n(i).height()),this.model.showDimensions&&(this._imgDialog.find(".e-rte-imgX").val(this._imgWidth),this._imgDialog.find(".e-rte-imgY").val(this._imgHeight)),u=n(i).parent("a"),u.length>0&&this._imageLink.val(u.attr("href")),i.tagName.toLowerCase()==="img"&&(this._imgDialog.find(".e-rte-imgUrl").val(i.src),this._imgDialog.find(".e-rte-imgText").val(i.alt),i.style!=""&&(this._imageBorderPx.option("value",i.style.borderWidth.split("px")[0]),this._imageBorderStyle.option("value",i.style.borderStyle),i.style.borderColor.length>0&&(t.browserInfo().name==="msie"&&t.browserInfo().version==="8.0"?this._imgPicker.option("value",i.style.borderColor):(r=i.style.borderColor.split("(")[1].split(")")[0],r=r.split(","),r={r:n.trim(r[0]),g:n.trim(r[1]),b:n.trim(r[2])},this._imgPicker.option("value",this._imgPicker.RGBToHEX(r))))),this._imageStyle.val(n(i).attr("style"))));n("#"+this._rteId+"_Image_wrapper").css({"z-index":this._onGetMaxZindex()});this._imgDialog.ejDialog("open");this._textFieldFocus(this._imgURL[0],this._imgURL.val().length,this._imgURL.val().length);t.isNullOrUndefined(this._explorerObj)&&this._imgDialog.find(".e-rte-imgUrl").focus()},_getValidbrowser:function(n){switch(n){case"chrome":return t.browserInfo().version<42;case"mozilla":return t.browserInfo().version<41;case"opera":return t.browserInfo().version<29;default:return!0}},_alertHeader:function(n){n._alertWindow.ejDialog("option","showHeader",!1);this.model.enableRTL&&!this._alertWindow.find(".e-alert-ok").hasClass("e-rte-alertBtnRTL")&&this._alertWindow.find(".e-alert-ok").addClass("e-rte-alertBtnRTL");n._alertWindow.find(".e-rte-button").css({"text-align":"","padding-bottom":"","padding-top":""}).addClass("e-fieldseparate");n._alertWindow.ejDialog("instance").refresh()},_toolBarClick:function(i){var o,s,f;if(!i.event||!(i.event.which&&i.event.which==3||i.event.button&&i.event.button==2)){var h=n(this.itemsContainer).closest("div.e-rte").find("textarea.e-rte"),r=h.ejRTE("instance"),e=h.attr("id"),u=t.isNullOrUndefined(e)?i.currentTarget.id.replace("_",""):i.currentTarget.id.replace(e+"_","");if(r._alertHeader(r),t.browserInfo().name==="mozilla"&&(r._getDocument().designMode="off"),n(i.currentTarget).hasClass("e-rteItem-copy")&&!r._isIE()&&r._getValidbrowser(t.browserInfo().name)?r._openAlert(r._getLocalizedLabels("copyAlert")):n(i.currentTarget).hasClass("e-rteItem-cut")&&!r._isIE()&&r._getValidbrowser(t.browserInfo().name)?r._openAlert(r._getLocalizedLabels("cutAlert")):n(i.currentTarget).hasClass("e-rteItem-paste")&&!r._isIE()?r._openAlert(r._getLocalizedLabels("pasteAlert")):(t.browserInfo().name!="chrome"&&(f=r._scriptsItems.indexOf(u),r._scriptsItems.indexOf(u)>=0&&n("#"+e+"_"+r._scriptsItems[f==0?1:0]).hasClass("e-active")&&r._selectCommand(e+"_"+r._scriptsItems[f==0?1:0])),o=n.grep(i.currentTarget.children[0].className.split(/\s+/),function(n){return!/^e-(rteItem|rte-toolbar-icon)$/i.test(n)}),(o.indexOf("e-split")>=0||o.indexOf("e-ddl")>=0)&&(o[0]=u),r._selectCommand(o[0])),r._styleItems.indexOf(u)>=0||r._scriptsItems.indexOf(u)>=0)n(i.currentTarget).hasClass("e-isactive")?this.deselectItemByID(i.currentTarget.id):this.selectItemByID(i.currentTarget.id),n(i.currentTarget).hasClass("e-isactive")?n(i.currentTarget).removeClass("e-isactive"):n(i.currentTarget).addClass("e-isactive"),r._scriptsItems.indexOf(u)>=0&&(f=r._scriptsItems.indexOf(u),n("#"+e+"_"+r._scriptsItems[f==0?1:0]).removeClass("e-isactive"),this.deselectItemByID(e+"_"+r._scriptsItems[f==0?1:0]));else if(r._alignItems.indexOf(u)>=0)for(this.selectItemByID(i.currentTarget.id),f=r._alignItems.indexOf(u),s=0;s<r._alignItems.length;s++)s!=f&&this.deselectItemByID(e+"_"+r._alignItems[s]);else r._listItems.indexOf(u)>=0&&(n(i.currentTarget).hasClass("e-isactive")?this.deselectItemByID(i.currentTarget.id):this.selectItemByID(i.currentTarget.id),n(i.currentTarget).hasClass("e-isactive")?n(i.currentTarget).removeClass("e-isactive"):n(i.currentTarget).addClass("e-isactive"),f=r._listItems.indexOf(u),n("#"+e+"_"+r._listItems[f==0?1:0]).removeClass("e-isactive"),f==0?this.deselectItemByID(e+"_"+r._listItems[1]):this.deselectItemByID(e+"_"+r._listItems[0]))}},_toggleEditTable:function(){var r,i,u,f;if(this._isIE8()&&this._getRange().parentElement&&(this._currentSelNode=this._getRange().parentElement()),r=n(this._getSelectedNode()).closest("table"),i=r.length>0?r[0]:this._getSelectedNode(),t.isNullOrUndefined(i))return!1;t.isNullOrUndefined(this._toolBarItems)||(f=this._rteToolbar.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable"),u=this.model.isResponsive&&f.length==0?this._toolBarObj._liTemplte.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable"):this._toolBarItems.find("li.e-rteItem-addColumnLeft,li.e-rteItem-addColumnRight,li.e-rteItem-addRowAbove,li.e-rteItem-addRowBelow,li.e-rteItem-deleteRow,li.e-rteItem-deleteColumn,li.e-rteItem-deleteTable"),t.isNullOrUndefined(i.tagName)||(i&&i.tagName&&i.tagName.toLowerCase()=="td"||i.tagName.toLowerCase()=="table"||i.tagName.toLowerCase()=="tr"?(u.show(),this._createTable&&this._createTable.find("div.e-rte-eTblProperties").removeClass("e-disable")):t.isNullOrUndefined(this._createTable)||(u.hide(),this._createTable.find("div.e-rte-eTblProperties").addClass("e-disable"))));this.model.isResponsive&&this.model.showToolbar&&this._toolBarObj._reSizeHandler();(!this.model.autoHeight||this._toolBarObj&&n(this._toolBarObj.itemsContainer.find("."+this._rteIconsList.resize)).length)&&this._setIframeHeight()},_formatChange:function(t){if(t.isInteraction){var r=n(this.element).closest("div.e-rte").find("textarea.e-rte"),i=r.ejRTE("instance"),u=r.attr("id");t.value!==""&&i._onFormatBlock(t.value);i._isIE()&&i._focus();i._onChange();i._setBackupData()}},_fontStyleChange:function(t){var r,i,u;t.isInteraction&&(r=this.element.closest("div").hasClass("e-normal")?n("textarea#"+t.model.htmlAttributes.datafontid):this.element.closest("div.e-rte").find("textarea.e-rte"),i=r.ejRTE("instance"),u=r.attr("id"),i._focus(),t.value!==""&&i._onFontName(t.value),i._onChange(),i._setBackupData())},_fontSizeChange:function(t){var r,i,u;t.isInteraction&&(r=this.element.closest("div").hasClass("e-normal")?n("textarea#"+t.model.htmlAttributes.datafontid):this.element.closest("div.e-rte").find("textarea.e-rte"),i=r.ejRTE("instance"),u=r.attr("id"),i._focus(),t.value!==""&&i._onFontSize(t.value),i._onChange(),i._setBackupData())},_colorPaletteClick:function(n){var t;(t=n.target.getAttribute("color-code"))&&(this._focus(),this._onFontColor(t),this._splitMenu.hide(n),this._fontColor=t,this._fontColorSplit.find("span.e-btntxt").css("background-color",t),this._onChange(),this._setBackupData())},_bgColorPaletteClick:function(n){var t;(t=n.target.getAttribute("color-code"))&&(this._focus(),this._onBGColor(t),this._bgSplitMenu.hide(n),this._bgColor=t,this._bgColorSplit.find("span.e-btntxt").css("background-color",t),this._onChange(),this._setBackupData())},_fontColorClick:function(n){if(this._onFontColor(this._fontColor),t.isNullOrUndefined(this._splitMenu))return!1;this._splitMenu.hide(n)},_bgTransClick:function(n){this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.backcolor,"transparent");this._trigger("execute",{commandName:"backColor"});this._bgColorSplit.find("span.e-btntxt").css("background-color","transparent");!t.isNullOrUndefined(this._bgSplitMenu);this._bgSplitMenu.hide(n);this._bgColor="transparent"},_bgColorClick:function(n){if(this._onBGColor(this._bgColor),t.isNullOrUndefined(this._bgSplitMenu))return!1;this._bgSplitMenu.hide(n)},_selectCommand:function(i){n(this._imgDupDiv).remove();n(this._imgOrg).css("outline","");t.browserInfo().name=="edge"||i=="format"||i=="fontName"||i=="fontSize"||i=="fontColor"||i=="backgroundColor"||i=="createTable"||this._focus();switch(i){case"fullScreen":this._onFullScreen();break;case"print":this._onPrint();break;case"import":this._onImport();break;case"wordExport":this._onExportToWord();break;case"pdfExport":this._onExportToPdf();break;case"findAndReplace":t.RTE.FindAndReplace&&this._showFindAndReplace();break;case"bold":this._onBold();break;case"italic":this._onItalics();break;case"underline":this._onUnderLine();break;case"strikethrough":this._onStrikeThrough();break;case"justifyLeft":this._onJustifyLeft();break;case"justifyRight":this._onJustifyRight();break;case"justifyCenter":this._onJustifyCenter();break;case"justifyFull":this._onJustifyFull();break;case"cut":this._onCut();break;case"copy":this._onCopy();break;case"paste":this._onPaste();break;case"clearFormat":this._onClearFormat();break;case"clearAll":this._clearAllManager();break;case"orderedList":case"unorderedList":this._getPasteRangeVal();break;case"undo":this._undo();break;case"redo":this._redo();break;case"indent":this._onIndent();this._indentdepth++;break;case"outdent":this._onOutdent();this._indentdepth>0&&this._indentdepth--;break;case"createLink":this._hyperLinkManager(!1);break;case"removeLink":this._onUnlink();break;case"image":this._imageManager();break;case"createTable":this._createTable.ejDialog("isOpen")?this._createTable.ejDialog("close"):this._tableManager();break;case"addRowAbove":this.insertRow(!0);break;case"addRowBelow":this.insertRow(!1);break;case"addColumnLeft":this.insertColumn(!0);break;case"addColumnRight":this.insertColumn(!1);break;case"deleteRow":this.removeRow();break;case"deleteColumn":this.removeColumn();break;case"deleteTable":this.removeTable();break;case"superscript":this._onSuperScript();break;case"subscript":this._onSubScript();break;case"upperCase":this._onUpperCase();break;case"lowerCase":this._onLowerCase();break;case"video":this._videoManager();break;case"fileBrowser":this._hyperLinkManager(!0);break;default:this._onChange()}i!="createLink"&&i!="image"&&i!="video"&&i!="createTable"&&this._onChange();i!="undo"&&i!="redo"&&this._setBackupData();var r=this._isIE()?this._currentSelNode:this._getSelectedNode();this._updateTagInfo(r)},_focus:function(){var n=t.browserInfo();n.name=="webkit"?this._getWindow().focus():this._getWindow().document.body.focus();this._restoreSelection(this._selectionRange)},_getWindow:function(){return n(n(this._rteWapper.find(".content-iframe"))[0].contentWindow)[0]},_getDocument:function(){var n=this._rteWapper.find(".content-iframe");try{return n.contents()[0]}catch(t){return""}},_onFullScreen:function(){n(this._toolBarObj.itemsContainer.find("."+this._rteIconsList.resize)).length?(n(this._rteWapper).css({top:this._rteOffset.top,left:this._rteOffset.left,width:this._rteWidth,height:this._rteHeight,position:this._rtePosition,"z-index":""}),n("body").css("overflow",""),n(this._toolBarObj.itemsContainer.find("."+this._rteIconsList.resize)).addClass(this._rteIconsList.maximize).removeClass(this._rteIconsList.resize).parent("li").attr("data-content",this._getLocalizedLabels("maximize"))):(this._rteOffset=n(this._rteWapper).position(),this._rtePosition=n(this._rteWapper).css("position"),n(this._rteWapper).css({top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed","z-index":this._onGetMaxZindex()}),n("body").css("overflow","hidden"),n(this._toolBarObj.itemsContainer.find("."+this._rteIconsList.maximize)).removeClass(this._rteIconsList.maximize).addClass(this._rteIconsList.resize).parent("li").attr("data-content",this._getLocalizedLabels("resize")));n(this._getDocument()).find("table.e-rte-table").length>0&&this._removeResizeObject();this._setAutoHeight();this.model.showToolbar&&this.model.isResponsive&&this._toolBarObj._reSizeHandler();this._setIframeHeight();t.isNullOrUndefined(this._createTable)||this._createTableClose()},_onGetMaxZindex:function(){return Math.max.apply(null,n.map(n("body *"),function(t){return parseInt(n(t).css("z-index"))+1||1}))},_onZooming:function(i){i._zoomValue=0;var r=Number(i.getDocument().body.style.zoom==""||t.isNullOrUndefined(i.getDocument().body.style.zoom)?1:i.getDocument().body.style.zoom),u=isNaN(i.model.zoomStep)&&i.model.zoomStep.indexOf("%")!=-1?parseInt(i.model.zoomStep)/100:Number(i.model.zoomStep);return i._zoomValue=i._zoomArgs=="IN"?r+u:r-u>.1?r-u:.1,n(i.getDocument().body).css({zoom:i._zoomValue,transform:"scale("+i._zoomValue+")","transform-origin":"0 0","-o-transform":"scale("+i._zoomValue+")","-o-transform-origin":"0 0","-webkit-transform":"scale("+i._zoomValue+")","-webkit-transform-origin":"0 0"}),n(i._toolBarObj.itemsContainer.find(".e-rteItem-zoomIn")).attr("title",i._getLocalizedLabels("zoomIn")+" "+Math.round(i._zoomValue*100)+"%"),n(i._toolBarObj.itemsContainer.find(".e-rteItem-zoomOut")).attr("title",i._getLocalizedLabels("zoomOut")+" "+Math.round(i._zoomValue*100)+"%"),i._isIE()?i:void 0},_onKeyZoom:function(n){var t=this;this._mouseStillDown=!0;this._zoomArgs=n;this._setInterval=setInterval(t._onZooming(t),100)},_onPrint:function(){var i=this;this._isIE()||t.browserInfo().name==="mozilla"?this._getWindow().onafterprint=function(){n(i.getDocument().body).css({zoom:i._zoomValue?i._zoomValue:1,transform:"scale("+(i._zoomValue?i._zoomValue:1)+")","transform-origin":"0 0","-o-transform":"scale("+(i._zoomValue?i._zoomValue:1)+")","-o-transform-origin":"0 0","-webkit-transform":"scale("+(i._zoomValue?i._zoomValue:1)+")","-webkit-transform-origin":"0 0"})}:i._getWindow().matchMedia("print").addListener(function(t){t.matches||n(i.getDocument().body).css({zoom:i._zoomValue?i._zoomValue:1,transform:"scale("+(i._zoomValue?i._zoomValue:1)+")","transform-origin":"0 0","-o-transform":"scale("+(i._zoomValue?i._zoomValue:1)+")","-o-transform-origin":"0 0","-webkit-transform":"scale("+(i._zoomValue?i._zoomValue:1)+")","-webkit-transform-origin":"0 0"})});n(i.getDocument().body).css({zoom:"",transform:"","-o-transform":"","-webkit-transform":""});this._getWindow().print()},_renderimport:function(){var i=t.buildTag("div#"+this._id+"_importUpload","","",""),r=this.model.importSettings.url+"?rteid="+this._id;this._rteToolbar.find("li.e-rteItem-import").append(i);i.ejUploadbox({multipleFilesSelection:!1,width:"0px",height:"0px",autoUpload:!0,extensionsAllow:".docx,.doc",showBrowseButton:!1,buttonText:{browse:this._id},showFileDetails:!1,saveUrl:r,success:function(t){var u=t.model.buttonText.browse,f=n("#"+u).data("ejRTE"),i=t.responseText,r=n(f._getDocument().body);i=i.replace('<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">',"").replace("<\/string>","").replace(/"/gi,"");r.children().remove();r.append(n.parseHTML(i))}});i.addClass("e-browse-hide")},_onImport:function(){this._toolBarItems.find("div#"+this._id+"_importUpload").find("input[type=file]").trigger("click");this.model.isResponsive&&n("div#"+this._id+"_toolbar_hiddenlist").find("div#"+this._id+"_importUpload").find("input[type=file]").trigger("click")},_onExportToWord:function(){var r=this._getDocument().body,u=this.model.exportToWordSettings.url,f=r.innerHTML,e={action:u+"?rteid="+this._id,method:"post"},i=t.buildTag("form","",null,e),o={name:this._id+"_inputVal",type:"hidden",value:f},s=t.buildTag("input","",null,o),h={name:this._id+"_inputFile",type:"hidden",value:this.model.exportToWordSettings.fileName},c=t.buildTag("input","",null,h);n("body").append(i.append(s).append(c));i.submit();i.remove()},_onExportToPdf:function(){var r=this._getDocument().body,u=this.model.exportToPdfSettings.url,f=r.innerHTML,e={action:u+"?rteid="+this._id,method:"post"},i=t.buildTag("form","",null,e),o={name:this._id+"_inputVal",type:"hidden",value:f},s=t.buildTag("input","",null,o),h={name:this._id+"_inputFile",type:"hidden",value:this.model.exportToPdfSettings.fileName},c=t.buildTag("input","",null,h);n("body").append(i.append(s).append(c));i.submit();i.remove()},_zoomUp:function(n){n&&(n.which&&n.which==3||n.button&&n.button==2)||this._setInterval&&(this._mouseStillDown=!1,clearInterval(this._setInterval),this._setInterval=null)},_zoomDown:function(t){if(!t||!(t.which&&t.which==3||t.button&&t.button==2)){var i=this;i._mouseStillDown=!0;i._zoomArgs=n(t.target).hasClass("e-rte-toolbar-icon zoomIn "+this._rteIconsList.zoomIn)||n(t.target).hasClass("e-rteItem-zoomIn")?"IN":"OUT";i._setInterval=t.type=="mousedown"?setInterval(function(){i._onZooming(i)},100):setInterval(i._onZooming(i),100)}},_onBold:function(){var n;this._isIE8()?this.executeCommand("bold",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.bold,null),this._trigger("execute",{commandName:"bold"}))},_onItalics:function(){var n;this._isIE8()?this.executeCommand("italic",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.italic,null),this._trigger("execute",{commandName:"italic"}))},_onStrikeThrough:function(){var n;this._isIE8()?this.executeCommand("strikethrough",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.strikethrough,null),this._trigger("execute",{commandName:"strikethrough"}))},_onUnderLine:function(){var n;this._isIE8()?this.executeCommand("underline",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.underline,null),this._trigger("execute",{commandName:"underline"}))},_onJustifyLeft:function(){var n;this._isIE8()?this.executeCommand("JustifyLeft",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.justifyleft,null),this._trigger("execute",{commandName:"JustifyLeft"}))},_onJustifyRight:function(){var n;this._isIE8()?this.executeCommand("JustifyRight",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.justifyright,null),this._trigger("execute",{commandName:"JustifyRight"}))},_onJustifyCenter:function(){var n;this._isIE8()?this.executeCommand("JustifyCenter",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.justifycenter,null),this._trigger("execute",{commandName:"JustifyCenter"}))},_onJustifyFull:function(){this._alignFlag=!0;this._isIE8()?this.executeCommand("justifyfull"):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.justifyfull,null),this._trigger("execute",{commandName:"justifyfull"}))},_onCut:function(){var n;this.executeCommand("cut",n)},_onCopy:function(){var n;this.executeCommand("copy",n)},_onOpen:function(){var t=this._isIE()?this._currentSelNode:this._getSelectedNode();window.open(n(t).attr("href"))},_onPaste:function(){var n;this.executeCommand("paste",n)},_onOrderList:function(i){var r=this._isIE()?this._isIE8()?this._pasteRangeVal.parentElement():this._pasteRangeVal.startContainer.parentNode:this._getSelectedNode(),u;(n(r).prop("tagName")=="OL"||n(r).parents("ol").length!=0||i.ID=="none")&&i.type!="click"&&(!(n(r).prop("tagName")=="OL"||n(r).parents("ol").length>0)||i.ID!="none")||t.isNullOrUndefined(i.ID)&&this._listOrderType=="none"||this.executeCommand("insertorderedlist","listItem");r=this._isIE()?this._isIE8()?this._pasteRangeVal.parentElement():this._pasteRangeVal.startContainer.parentNode:this._getSelectedNode();i.type=="click"&&n(r).parents("ol").length>=0&&(i.ID=this._listOrderType);t.isNullOrUndefined(i.ID)||(u=n(r).prop("tagName")=="OL"?r:n(r).parents("ol"));this._generateListItems(i,u,t.isNullOrUndefined(this.model.tools.customOrderedList)?[]:this.model.tools.customOrderedList);this._listOrderType=i.ID;this._updateIndent(r)},_onUnorderList:function(i){var r=this._isIE()?this._isIE8()?this._pasteRangeVal.parentElement():this._pasteRangeVal.startContainer.parentNode:this._getSelectedNode(),u;(n(r).prop("tagName")=="UL"||n(r).parents("ul").length!=0||i.ID=="none")&&i.type!="click"&&(!(n(r).prop("tagName")=="UL"||n(r).parents("ul").length>0)||i.ID!="none")||t.isNullOrUndefined(i.ID)&&this._listType=="none"||this.executeCommand("insertunorderedlist","listItem");r=this._isIE()?this._isIE8()?this._pasteRangeVal.parentElement():this._pasteRangeVal.startContainer.parentNode:this._getSelectedNode();i.type=="click"&&n(r).parents("ul").length>=0&&(i.ID=this._listType);t.isNullOrUndefined(i.ID)||(u=n(r).prop("tagName")=="UL"?r:n(r).parents("ul"));this._generateListItems(i,u,t.isNullOrUndefined(this.model.tools.customUnorderedList)?[]:this.model.tools.customUnorderedList);this._listType=i.ID;this._updateIndent(r)},_generateListItems:function(t,i,r){n(i).css({"list-style-type":t.ID,"list-style-image":""});var u=this;["none","disc","circle","square","decimal","upper-roman","lower-roman","upper-alpha","lower-alpha"].indexOf(t.ID)==-1&&n.each(r,function(r,u){u.name==t.ID&&n(i).css({"list-style-type":u.listStyle,"list-style-image":u.listImage})});this._setBackupData();this._isIE()?this.selectRange(this._pasteRangeVal):this.selectRange(this._getRange());this._updateTagInfo(this._isIE()?this._currentSelNode:this._getSelectedNode())},_onUndo:function(){this._isIE8()?this.executeCommand("undo",null):this._undo()},_onDelete:function(){this.executeCommand("delete",null)},_onRedo:function(){this._isIE8()?this.executeCommand("redo",null):this._redo()},_onClearFormat:function(){var n;this.executeCommand("removeformat",n);this._hideTooltip();this._setBackupData();this._onChange();this._updateIframeSkin(this.model.iframeAttributes);this._updateToolbarStatus()},_onFormatBlock:function(n){if(this._focus(),this._isIE8()){var i;i=document.getSelection?this._getSelectedNode():this._getWindow().document.selection.createRange().parentElement();this._onClearFormat();this.executeCommand("formatBlock",n)}else this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.formatblock,n),this._trigger("execute",{commandName:"formatBlock"});this._updateToolbarStatus();this._updateFontOptionStatus()},_onFontName:function(n){this._isIE8()?this.executeCommand("fontName",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.fontname,n),this._trigger("execute",{commandName:"fontName"}))},_onFontSize:function(n){this._isIE8()?this.executeCommand("fontSize",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.fontsize,n),this._trigger("execute",{commandName:"fontSize"}))},_onFontColor:function(n){this._fontColorSplit.find("span.e-btntxt").css("background-color",n);this._customDialogobj&&this._customDialogobj.isOpen()&&this._customColor.ejDialog("close");this._isIE8()?this.executeCommand("foreColor",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.forecolor,n),this._trigger("execute",{commandName:"foreColor"}));this._onChange();this._updateIframeSkin(this.model.iframeAttributes)},_onBGColor:function(n){this._bgColorSplit.find("span.e-btntxt").css("background-color",n);this._customDialogobj&&this._customDialogobj.isOpen()&&this._customColor.ejDialog("close");this._isIE8()?this.executeCommand("backColor",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.backcolor,n),this._trigger("execute",{commandName:"backColor"}));this._onChange()},_onIndent:function(){if(this._isIE8()){this._getWindow().document.body.style.wordWrap="break-word";var i=document.getSelection?this._getWindow().document.getSelection().focusNode:this._getWindow().document.selection.createRange().parentElement();i&&/^(OL|UL|LI)$/.test(i.nodeName)?this._listIndent(i):i&&/^(#text)$/.test(i.nodeName)&&/^(OL|UL|LI)$/.test(n(i).parent()[0].nodeName)?this._listIndent(n(i).parents("li")[0],i):this.executeCommand("indent",!1);i&&n(i).focus()}else this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.indent,null),this._trigger("execute",{commandName:"indent"});this._updateIframeSkin(this.model.iframeAttributes);this._updateIndentStatus()},_onOutdent:function(){if(this._isIE8()){var i=document.getSelection?this._getWindow().document.getSelection().focusNode:this._getWindow().document.selection.createRange().parentElement();i&&/^(OL|UL|LI)$/.test(i.nodeName)?this._listOutdent(i):i&&/^(#text)$/.test(i.nodeName)&&/^(OL|UL|LI)$/.test(n(i).parent()[0].nodeName)?this._listOutdent(n(i).parents("li")[0],i):this.executeCommand("outdent",!1)}else this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.outdent,null),this._trigger("execute",{commandName:"outdent"});this._updateIndentStatus()},_onSelectAll:function(){this.executeCommand("selectall")},selectAll:function(){this._onSelectAll()},_onHyperLink:function(n){this.executeCommand("createlink",n)},_onInsertLink:function(){var r,u,i,f;if(!this._isUrl(n.trim(this._txtURL.val())))return this._txtURL.addClass("e-error"),!1;i=(t.browserInfo().name=="msie"||t.browserInfo().name=="chrome")&&n(this._currentSelNode).parents("body").length>0?this._currentSelNode:this._getSelectedNode();t.isNullOrUndefined(i)||i.tagName.toUpperCase()!="A"?t.isNullOrUndefined(i)||i.tagName.toUpperCase()!="IMG"?(r=t.buildTag("a","",{},{href:this._txtURL.val(),title:this._txtLinkTitle.val()==""?this._txtURL.val()+"\n"+this._getLocalizedLabels("linkTooltip"):this._txtLinkTitle.val()}),r[0].target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"",this._focus(),this._isIE()?(this._selectedHTML.length==0&&(this._selectedHTML=this._txtLinkText.val()===""?this._txtURL.val():this._txtLinkText.val()),r[0].innerHTML=this._selectedHTML,u=r[0].outerHTML):(this._txtLinkText.val()===""?r.html(this._txtURL.val()):r.html(this._txtLinkText.val()),u=n("<div>").append(n(r).clone()).html()),u&&this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length&&(this._isIE()?this._pasteHtml(u):this._getDocument().execCommand("inserthtml",!1,u),this.selectRange(this._getRange()))):(f=n(i).parent("a")[0],t.isNullOrUndefined(f)?(r=t.buildTag("a","",{},{href:this._txtURL.val(),title:this._txtLinkTitle.val()==""?this._txtURL.val()+"\n"+this._getLocalizedLabels("linkTooltip"):this._txtLinkTitle.val()}),r[0].target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"",n(i.outerHTML).appendTo(n(r)),n(i).replaceWith(n(r))):(f.href=this._txtURL.val(),f.title=this._txtLinkTitle.val(),f.target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"")):(i.href=this._txtURL.val(),i.title=this._txtLinkTitle.val(),i.innerHTML=this._txtLinkText.val(),i.target=this._chkTarget.ejCheckBox("isChecked")?"_blank":"");this._linkDialog.ejDialog("close");this.enableToolbarItem("removeLink");this._updateCount()},_setImageProperties:function(i,r,u,f,e,o,s){this.model.showDimensions&&(r!=""&&(i[0].width=r),u!=""&&(i[0].height=u));i=n(i).attr("style",f);var h=e+"px ";h+=!t.isNullOrUndefined(o)&&o!=""?o+" ":"solid ";h+=!t.isNullOrUndefined(s)&&s!=""?s:"#000000";i=i.css("border",h)},_onInsertImage:function(){var o=this._imgDialog.find(".e-rte-imgUrl"),h=this._imgDialog.find(".e-rte-imgText"),c=this._imgDialog.find(".e-rte-imgX").val(),l=this._imgDialog.find(".e-rte-imgY").val(),i=this,s,w,r;this._restoreSelection(this._selectionRange);var a="",f=i._imageLink.val(),v=i._imageBorderPx.getValue(),y=i._imageBorderStyle.getSelectedValue(),e=i._imgPicker.getValue(),p=i._imageStyle.val(),u=i._isIE()?i._currentSelNode:i._getSelectedNode();if(t.isNullOrUndefined(u)||(a=u.nodeName.toUpperCase()),e=!t.isNullOrUndefined(e)&&e.length>0?e:"",s=o.val().startsWith("~")?o.val().replace(o.val().substr("0","1"),".."):o.val(),a!="IMG")w=n("<img>",{src:s,error:function(){o.addClass("e-error")},success:function(){var r=t.buildTag("img","",{},{alt:h.val(),src:s}),u,o;if(i._setImageProperties(r,c,l,p,v,y,e),f!="")if(i._isUrl(n.trim(f)))u=t.buildTag("a","",{},{href:f}),u[0].target=i._dialogchkTarget.ejCheckBox("isChecked")?"_blank":"_self",n(r[0].outerHTML).appendTo(u),r=u;else return i._imageLink.addClass("e-error"),!1;o=r[0].outerHTML;i.executeCommand("inserthtml",o)}});else{if(u.src=s,u.alt=h.val(),i._setImageProperties(n(u),c,l,p,v,y,e),r=n(u).parent("a"),f!="")if(i._isUrl(n.trim(f)))r.length>0?r.attr("href",f):(r=t.buildTag("a","",{},{href:f}),n(u.outerHTML).appendTo(r),n(u).replaceWith(r));else return i._imageLink.addClass("e-error"),!1;else r.length>0&&r.attr("href","");!t.isNullOrUndefined(r)&&r.length>0&&(r[0].target=this._dialogchkTarget.ejCheckBox("isChecked")?"_blank":"_self")}i._setAutoHeight();i._imageLink.hasClass("e-error")||i._imgDialog.ejDialog("close");i._on(i._imageLink,"keypress",i._urlValidation)._on(i._imageLink,"blur",i._urlValidation)},_insertVideo:function(i){var u=n.trim(this._videoDialog.find("textarea.e-rte-video")[0].value),f=this._videoDialog.find(".e-rte-videoX").val(),e=this._videoDialog.find(".e-rte-videoY").val(),r;this._restoreSelection(this._selectionRange);this._alertHeader(this);i.target.id==="video_insert"&&u!==""?(this._isIE()&&!this._isIE8()&&this._ieLinkRange(),r=n(u)[0],this.model.showDimensions&&!t.isNullOrUndefined(r)&&(f!=""&&(r.width=f),e!=""&&(r.height=e)),!t.isNullOrUndefined(r)&&this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length&&this.executeCommand("inserthtml",r.outerHTML+"<br/>"),this._onChange(),this._setBackupData(),this._videoDialog.ejDialog("close")):i.target.id==="video_cancel"?(this._videoDialog.ejDialog("close"),this._ieCursorMaintainance()):this._openAlert(this._getLocalizedLabels("videoError"));this._videoDialog.find("textarea.e-rte-video")[0].value="";this._videoDialog.find(".e-rte-videoX").val("");this._videoDialog.find(".e-rte-videoY").val("");this._chkvideoDimensions.ejCheckBox({check:!0});this._setAutoHeight()},_oneditTable:function(){var a=n(this._getSelectedNode()).closest("td"),u=a.length>0?a[0]:this._currentSelNode,e=n(u).closest("tbody").closest("table"),o=n(n(u).closest("tbody")).prev("caption"),f,i,v;this._eTblCaption.ejCheckBox("isChecked")?o.length==0&&t.buildTag("caption").append(n('<br type="_moz">')).insertBefore(n(n(u).closest("tbody"))):o.length>0&&o.remove();f=this._eTblAlign.getSelectedValue();i=this._getTableObj("Style").val();i=i.replace(f=="center"?/float(.*?);/ig:/margin(.*?);/ig,"");f=="center"&&(i+=";margin: 0 auto;");i&&e.attr("style",i);this._customTableValidation=!1;var r=this._customInputValidation(this._getTableObj("Width")),y=this._customInputValidation(this._getTableObj("Height")),s=this._customInputValidation(this._getTableObj("RHeight")),h=this._customInputValidation(this._getTableObj("ClWidth")),c=this._getTableObj("CellSpace").data("ejNumericTextbox").getValue(),l=this._getTableObj("CellPad").data("ejNumericTextbox").getValue();this._customTableValidation||(e.css({width:isNaN(Number(r))?r:r+"px",height:isNaN(Number(r))?r:r+"px","border-spacing":isNaN(Number(c))?c:c+"px",float:f,"border-width":this._getTableObj("BrdrPx").data("ejNumericTextbox").getValue()+"px","border-style":this._getTableObj("_border_style").data("ejDropDownList").getSelectedValue(),"border-color":this._getTableObj("_border_color").val()}),e.find("td,th").css("padding",isNaN(Number(l))?l:l+"px"),v=n(u).closest("tr"),v.attr({style:this._getTableObj("RStyle").val()}).css({height:isNaN(Number(s))?s:s+"px","text-align":this._getTableObj("RAlign").data("ejDropDownList").getSelectedValue(),"border-width":this._getTableObj("RBrdrPx").data("ejNumericTextbox").getValue()+"px","border-style":this._getTableObj("RBrdrStyle").data("ejDropDownList").getSelectedValue(),"border-color":this._getTableObj("RBrdrColor").val()}),n(u).attr({style:this._getTableObj("ClStyle").val()}).css({width:isNaN(Number(h))?h:h+"px","text-align":this._getTableObj("ClAlign").data("ejDropDownList").getSelectedValue(),"border-width":this._getTableObj("ClBrdrPx").data("ejNumericTextbox").getValue()+"px","border-style":this._getTableObj("ClBrdrStyle").data("ejDropDownList").getSelectedValue(),"border-color":this._getTableObj("ClBrdrColor").val()}),this._eTblDialog.ejDialog("close"));this._on(this._getTableObj("Width"),"keypress",this._urlValidation)._on(this._getTableObj("Height"),"keypress",this._urlValidation)._on(this._getTableObj("RHeight"),"keypress",this._urlValidation)._on(this._getTableObj("ClWidth"),"keypress",this._urlValidation)},_clearAllManager:function(){this._hideTooltip();this._alertWindow.find(".e-alert-cancel").show();this._alertHeader(this);this._openAlert(this._getLocalizedLabels("deleteAlert"))},_onUnlink:function(){var n;this.executeCommand("unlink",n);this.disableToolbarItem("removeLink")},_onSuperScript:function(){var n;this._isIE8()?this.executeCommand("SuperScript",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.superscript,null),this._trigger("execute",{commandName:"SuperScript"}))},_onSubScript:function(){var n;this._isIE8()?this.executeCommand("SubScript",n):(this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.subscript,null),this._trigger("execute",{commandName:"SubScript"}))},_onInsertTable:function(i,r,u){if(this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length){n(this._getDocument().body).css("display","inline-block");var f=this._tableGenerator(i,r,u);this.executeCommand("inserthtml",f);(t.isNullOrUndefined(n(this._getDocument().body).find("table:last")[0].nextSibling)||n(this._getDocument().body).find("table:last")[0].nextSibling.nodeName.toLowerCase()=="#text"&&n.trim(n(this._getDocument().body).find("table:last")[0].nextSibling.nodeValue)=="\n")&&n("<p><br/><\/p>").insertAfter(n(this._getDocument().body).find("table"));n(this._getDocument().body).css("display","");this._setAutoHeight()}},_onUpperCase:function(){if(this._isIE8())if(document.getSelection){var a=this._getWindow().getSelection(),i=this._saveSelection(),r=i.commonAncestorContainer,f=i.commonAncestorContainer.children;if(f!=null){var e=i.cloneContents(),o=this._changeCase(e,"Upper"),s=n(o).clone(),u=document.createElement("div");n(u).append(n(s));u.innerHTML!=null&&u.innerHTML!=""&&this._getWindow().document.execCommand("inserthtml",!1,u.innerHTML)}else{var h=r.nodeValue.substring(i.startOffset,i.endOffset).toUpperCase(),c=r.nodeValue.substr(0,i.startOffset),l=r.nodeValue.substring(i.endOffset);r.nodeValue=c+h+l}}else{if(this._getWindow().document.selection.type.toLowerCase()=="control")return;this._seleText=t.isNullOrUndefined(this._seleText)?"":this._seleText;this._getDocument().selection.createRange().pasteHTML(this._seleText.toUpperCase())}else this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.uppercase,null);this._trigger("execute",{commandName:"uppercase"})},_changeCase:function(n,t){var i=n.childNodes,r;if(i.length>0)for(r=0;r<i.length;r++)i[r].nodeType==3?i[r].nodeValue=t=="Upper"?i[r].nodeValue.toUpperCase():i[r].nodeValue.toLowerCase():i[r].nodeType==1&&i[r].tagName.toUpperCase()!="FONT"&&this._changeCase(i[r],t);return i},_onLowerCase:function(){if(this._isIE8())if(document.getSelection){var a=this._getWindow().getSelection(),i=this._saveSelection(),r=i.commonAncestorContainer,f=i.commonAncestorContainer.children;if(f!=null){var e=i.cloneContents(),o=this._changeCase(e,"Lower"),s=n(o).clone(),u=document.createElement("div");n(u).append(n(s));u.innerHTML!=null&&u.innerHTML!=""&&this._getWindow().document.execCommand("inserthtml",!1,u.innerHTML)}else{var h=r.nodeValue.substring(i.startOffset,i.endOffset).toLowerCase(),c=r.nodeValue.substr(0,i.startOffset),l=r.nodeValue.substring(i.endOffset);r.nodeValue=c+h+l}}else{if(this._getWindow().document.selection.type.toUpperCase()=="control")return;this._seleText=t.isNullOrUndefined(this._seleText)?"":this._seleText;this._getDocument().selection.createRange().pasteHTML(this._seleText.toLowerCase())}else this._getDocumentHandler()&&this._operationHandler.execCommand(t.execCommand.lowercase,null);this._trigger("execute",{commandName:"lowercase"})},_listIndent:function(n){var i,r;return(i=n.previousSibling,i&&this._isListNode(i))?(i.appendChild(n),!0):i&&i.nodeName=="LI"&&this._isListNode(i.lastChild)?(i.lastChild.appendChild(n),this._combineLists(n.lastChild,i.lastChild,n),!0):(i=n.nextSibling,i&&this._isListNode(i))?(i.insertBefore(n,i.firstChild),!0):i&&i.nodeName=="LI"&&this._isListNode(n.lastChild)?!1:(i=n.previousSibling,i&&i.nodeName=="LI")?(r=t.buildTag(n.parentNode.nodeName)[0],i.appendChild(r),r.appendChild(n),this._combineLists(n.lastChild,r,n),!0):!0},_combineLists:function(t,i,r){var u;if(this._isListNode(t)){while(u=r.lastChild.firstChild)i.appendChild(u);n(t).remove()}},_isListNode:function(n){return n&&/^(OL|UL)$/.test(n.nodeName)},_isFirstChild:function(n){return n.parentNode.firstChild==n},_isLastChild:function(n){return n.parentNode.lastChild==n},_removeEmptyList:function(t){t&&n(t).children().length===0&&n(t).remove()},_listOutdent:function(t){var r=n(t.parentNode),i=r[0].parentNode;return(t=n(t),this._isFirstChild(t[0])&&this._isLastChild(t[0]))?(i.nodeName=="LI"?(t.insertAfter(i),this._removeEmptyList(i),r.remove()):this._isListNode(i)?r.remove():this.executeCommand("outdent",!1),!0):this._isFirstChild(t[0])?(i.nodeName=="LI"?(t.insertAfter(i),t[0].appendChild(r[0]),this._removeEmptyList(i)):this._isListNode(i)?i.insertBefore(t[0],r[0]):this.executeCommand("outdent",!1),!0):this._isLastChild(t[0])?(i.nodeName=="LI"?t.insertAfter(i):this._isListNode(i)?t.insertAfter(r[0]):this.executeCommand("outdent",!1),!0):(this.executeCommand("outdent",!1),!1)},_updateIndent:function(i){t.isNullOrUndefined(this._toolBarObj)||(n("#"+this._rteId+"_indent").hasClass("e-disable")&&this._toolBarObj.enableItemByID(this._rteId+"_indent"),i&&/^(LI)$/.test(i.nodeName)&&n(i).parents(i.parentNode.nodeName).last().find("li").index(i)===0&&this._toolBarObj.disableItemByID(this._rteId+"_indent"))},_updateCount:function(){t.isNullOrUndefined(this.model)||(this.model.showFooter&&this.model.showWordCount&&(this._wordCount.html(this._getLocalizedLabels("words")+" : "+(n.trim(this._getText())!=""?n.trim(this._getText()).split(/\W+/).length:0)),this._rteFooter.width()<400&&this._wordCount.html(this._getLocalizedLabels("w")+" : "+(n.trim(this._getText())!=""?n.trim(this._getText()).split(/\W+/).length:0))),this.model.showFooter&&this.model.showCharCount&&(this._charCount.html(this._getLocalizedLabels("characters")+" : "+this._getText().length),this._rteFooter.width()<400&&this._charCount.html(this._getLocalizedLabels("c")+" : "+this._getText().length)))},_updateTagInfo:function(i){var f="",e,o=1,r,u;if(t.isNullOrUndefined(i)||(i.localName=="body"||i.localName=="html")&&(i=this._getSelectedNode()),this._curNode=t.isNullOrUndefined(i)?"":i.tagName?i.tagName.toLowerCase():"html",this.model.showFooter&&this.model.showHtmlTagInfo){if(this._curNode!="html"&&this._curNode!==""){for(r=n(i).parents(),u=r.length-1;u>=0;u--)e=r[u].tagName.toLowerCase(),e!="html"?f+=" Â» "+e:o++;f+=" Â» "+this._curNode;n(i).parents().length>0&&(t.isNullOrUndefined(r[r.length-o])||(this._pTag=r[r.length-o].tagName.toLowerCase()))}this._tags=f;this._responsiveTagList()}},_responsiveTagList:function(){n(this._htmlInfo).html(this._tags);n(this._rteWapper).outerWidth()<n(this._rteWapper).find(".e-rte-footer-left").outerWidth()+n(this._rteWapper).find(".e-rte-footer-right").outerWidth()?n(this._htmlInfo).html(" Â» "+this._pTag+" Â» ... ...  Â» "+this._curNode):n(this._htmlInfo).html(this._tags)},_removeNoSpaceChar:function(n){return n&&(n=n.replace(/[\uFEFF]/g,"")),n},_updateValue:function(){var t=this._removeNoSpaceChar(this._updateXhtml());this.model.enableHtmlEncode&&(t=this._encode(this._decode(t)));(this._getCommandStatus("bold")||this._getCommandStatus("italic")||this._getCommandStatus("underline"))&&n.trim(this.value())===this._removeNoSpaceChar(this.getText())||this.value(t);this.element.val(t)},_imageXhtml:function(n){for(var v=/<img(.*?)>/ig,c,u=0,i=[],o,r,f;(c=v.exec(n))!==null;)i.push(c[0].toString());for(o=[],o=i.slice(0),r=0;r<i.length;r++)i[r].indexOf("/")==-1?i[r]=i[r].substr(0,i[r].length)+"/"+i[r].substr(i[r].length-1,i[r].length):i[r].lastIndexOf("/")!=i[r].length-2&&(i[r]=i[r].substr(0,i[r].length-1)+"/"+i[r].substr(i[r].length-1,i[r].length));var l=/(alt)=("[^"]*")/i,e=/(src)=("[^"]*")/g,a=/(src)=('[^"]*')/g;for(r=0;r<i.length;r++){var y=t.isNullOrUndefined(l.exec(i[r]))?/(alt)=('[^"]*')/i.exec(i[r]):l.exec(i[r]),p=t.isNullOrUndefined(e.exec(i[r]))?a.exec(i[r]):e.exec(i[r]),s=t.isNullOrUndefined(i[r].match(e))?i[r].match(a):i[r].match(e),h=t.isNullOrUndefined(i[r].match(/(alt)=("[^"]*")/g))?i[r].match(/(alt)=('[^"]*')/g):i[r].match(/(alt)=("[^"]*")/g);if(y==null&&h==null)i[r]=i[r].substr(0,i[r].length-2)+' alt=""'+i[r].substr(i[r].length-2,i[r].length);else for(u=h.length-1;u>0;u--)i[r]=i[r].replace(h[u],"");if(p==null&&s==null)i[r]=i[r].substr(0,i[r].length-2)+' src=""'+i[r].substr(i[r].length-2,i[r].length);else for(u=s.length-1;u>0;u--)i[r]=i[r].replace(s[u],"")}for(f=0;f<i.length;f++)n=n.replace(o[f],i[f]);return n},_tagCssReplace:function(n,i,r){var f=/(style)=("[^"]*")/i.exec(i),u;if(f!=null)return u=f[0],n!=""&&(u=u.substr(0,u.length-1)+n+';"'),t.isNullOrUndefined(n)||(i=i.replace(r[0],"").replace(f[0],u)),i},_updateIndentStatus:function(){this._isIE8()?n(this._getSelectedNode()).closest("BLOCKQUOTE").length>0?this.enableToolbarItem("outdent"):this.disableToolbarItem("outdent"):this._getDocumentHandler()&&this._operationHandler._validateIndent(this._getRange().startContainer)?this.enableToolbarItem("outdent"):this.disableToolbarItem("outdent")},_replaceHeightWidth:function(n,i){var u=n.exec(i),r;return t.isNullOrUndefined(u)||(r=u[0],r=r.replace(/\"/gi,"").replace("=",":")),this._tagCssReplace(r,i,u)},_typeXhtmlValidation:function(){var n=styleRegval[0];n=n=='type="a"'?n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("a","lower-alpha"):n=='type="A"'?n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("A","upper-alpha"):n=='type="1"'?n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("1","decimal"):n=='type="i"'?n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("i","lower-roman"):n=='type="I"'?n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type").replace("I","upper-roman"):n.replace(/\"/gi,"").replace("=",":").replace("type","list-style-type")},_getCssXhtml:function(n,i){var u=n.exec(i),r;return t.isNullOrUndefined(u)||(r=u[0],r=r.replace(/\"/gi,"").replace("=",":").replace("valign","text-align").replace("align","text-align"),i=i.replace(u[0],'style="'+r+';"')),i},_styleXhtml:function(n){for(var v=/<((?:(?!\/)).)*?>/ig,a,r=[],c,u,f,e,o,s,l,h,i;(a=v.exec(n))!==null;)r.push(a[0].toString());for(c=[],c=r.slice(0),i=0;i<r.length;i++){if(r[i].indexOf("style=")!=-1){if(r[i].indexOf("height=")!=-1&&(e=/( height)=("[^"]*")/i,r[i]=this._replaceHeightWidth(e,r[i])),r[i].indexOf("width=")!=-1&&(o=/( width)=("[^"]*")/i,r[i]=this._replaceHeightWidth(o,r[i])),r[i].indexOf("type=")!=-1&&(s=/( type)=("[^"]*")/i,u=s.exec(r[i]),t.isNullOrUndefined(u)||(f=this._typeXhtmlValidation(r[i])),r[i]=this._tagCssReplace(f,r[i],u)),r[i].indexOf("valign=")!=-1){var l=/( valign)=("[^"]*")/i,u=l.exec(r[i]),f=u[0];f=r[i].indexOf("vertical-align:")!=-1?"":f.replace(/\"/gi,"").replace("=",":").replace("valign","vertical-align");r[i]=this._tagCssReplace(f,r[i],u)}r[i].indexOf("align=")!=-1&&(h=/( align)=("[^"]*")/i,u=h.exec(r[i]),t.isNullOrUndefined(u)||(f=u[0],f=r[i].indexOf("text-align:")!=-1?"":f.replace(/\"/gi,"").replace("=",":").replace("align","text-align")),r[i]=this._tagCssReplace(f,r[i],u))}r[i].indexOf("style=")==-1&&(r[i].indexOf("height=")!=-1&&(e=/(height)=("[^"]*")/i,r[i]=this._getCssXhtml(e,r[i])),r[i].indexOf("width=")!=-1&&(o=/(width)=("[^"]*")/i,r[i]=this._getCssXhtml(o,r[i])),r[i].indexOf("type=")!=-1&&(s=/( type)=("[^"]*")/i,r[i]=this._getCssXhtml(s,r[i])),r[i].indexOf("valign=")!=-1&&(l=/(valign)=("[^"]*")/i,r[i]=this._getCssXhtml(l,r[i])),r[i].indexOf("align=")!=-1&&(h=/(align)=("[^"]*")/i,r[i]=this._getCssXhtml(h,r[i])))}for(i=0;i<r.length;i++)n=n.replace(c[i],r[i]);return n},_getFormatXhtml:function(n,t){for(var r=[],u,i;(u=n.exec(t))!=null;)r.push(u[0]);for(i=0;i<r.length;i++)t=t.replace(r[i],"")},_startXhtml:function(n){if(n.indexOf("start=")!=-1)n=this._getFormatXhtml(/start=\"(.*?)\"/ig,n);return n},_fontXhtml:function(n){if(n.indexOf("<font")!=-1)n=this._getFormatXhtml(/<font(.*?)>/ig,n);return n},_filerXhtmlNode:function(n,t){for(var i=[],r;(r=n.exec(t))!=null;)i.push(r[0]);return i},_replaceXhtmlNode:function(n,t,i){for(var r=0;r<n.length;r++)t=t.replace(i[r],n[r]);return t},_tdXhtml:function(n){var t=[],r,i,u;for(t=this._filerXhtmlNode(/<td((?:(?!<\/td>).))*?<td/ig,n),r=[],r=t.slice(0),i=0;i<t.length;i++)u=t[i].lastIndexOf("<td"),t[i]=t[i].substr(0,u)+"<\/td>"+t[i].substr(u,t[i].length);return this._replaceXhtmlNode(t,n,r)},_ptagXhtml:function(n){var f=/<\/p>((?:(?!<p).))*<\/p>/ig,r,i=[],u,t;if((r=f.exec(n))!=null)while((r=f.exec(n))!=null)i.push(r[0]);for(u=[],u=i.slice(0),t=0;t<i.length;t++)i[t].indexOf("<p")==-1&&(i[t]=i[t].substr(0,i[t].length-4));for(t=0;t<i.length;t++)n=n.replace(u[t],i[t]);return n},_getUpdaeNodeXhtml:function(n,t,i){for(var r;(r=n.exec(t))!=null;)i.push(r[0]);return i},_replaceUpdateXhtml:function(n,t,i){for(var r=[],r=this._getUpdaeNodeXhtml(n,t,r),u=0;u<r.length;u++)t=t.replace(r[u],i);return t},_replaceXhtmlVal:function(n,t,i){for(var r=0;r<n.length;r++)t=t.replace(i[r],n[r]);return t},_replaceTagUpdateXhtml:function(n,t,i,r){var u=[],f;return u=this._getUpdaeNodeXhtml(n,t,u),f=[],f=u.slice(0),u[0]=i+u[0]+r,t.replace(f[0],u[0])},_replaceTagXHTML:function(n,t){var i=[],u,r;for(i=this._getUpdaeNodeXhtml(n,t,i),u=[],u=i.slice(0),r=0;r<i.length;r++)i[r]=i[r].replace(/<br\/>/gi,"");return this._replaceXhtmlVal(i,t,u)},_replaceInputParams:function(n,t){var i=[],u,r,f;for(i=this._getUpdaeNodeXhtml(n,t,i),u=[],u=i.slice(0),r=0;r<i.length;r++)f=i[r].indexOf(">"),i[r]=i[r].substr(0,f)+"/"+i[r].substr(f,i[r].length-1);return this._replaceXhtmlVal(i,t,u)},_updateXhtml:function(){var w=this._getDocument().body.innerHTML,n,b,et,ct,pt,p,lt,ft,u,d,st,wt,g,at,rt,i,s,l,ot,nt,v,ht,tt,o,h,bt,kt,a,vt,dt,c,gt,f,y,it,e,k,yt,r;if(this.model.enableXHTML){if(w=w.replace(/hhh/g,"").replace(/<br>/g,"<br/>").replace(/contenteditable="false"/g,"").replace(/contenteditable="true"/g,"").replace(/&nbsp;/g," ").replace(/<hr>/g,"<hr/>").replace(/cellspacing =[0-9]/g,"").replace(/cellpadding  =[0-9]/g,""),this.value(w),this._xhtmlTagValidation(),w=this.value(),n=w.replace(/\s+/g," ").replace(/> </gi,"><"),n.indexOf("<?xml")!=-1)for(var ni=/<?xml:(.*?)>/ig,ut=[],b=0;(xmlTemp=ni.exec(n))!=null;)f=n.indexOf("<?xml"),ut[b]=xmlTemp[0],ut[b]=n.substr(f,ut[b].length+2),n=n.replace(ut[b],""),b++;if(n.indexOf("<table")!=-1){for(ft=/<table(.*?)<\/table>/ig,u=[],u=this._getUpdaeNodeXhtml(ft,n,u),d=[],d=u.slice(0),r=0;r<u.length;r++)if(u[r]=u[r].replace(/<p>/gi,"").replace(/<\/p>/gi,""),u[r].indexOf("<p")!=-1)for(b=0;b<u[r].length;b++)if(et=u[r].indexOf("<p"),ct=0,et!=-1)for(f=et+4;f<u[r].length-7;f++)u[r].charAt(f)==">"&&ct==0&&(u[r]=u[r].substr(0,et)+u[r].substr(f+1,u[r].length-1),ct++);n=this._replaceXhtmlVal(u,n,d)}if(n.indexOf("<td")!=-1)for(r=0;r<2;r++)n=this._tdXhtml(n);if(n.indexOf("<tr")!=-1){for(pt=/<tr(.*?)>(?!<\/td>)/ig,p=[],p=this._getUpdaeNodeXhtml(pt,n,p),lt=[],lt=p.slice(0),r=0;r<p.length;r++)p[r].indexOf("<\/td>")!=-1&&(p[r]=p[r].replace("<\/td>",""));for(n=this._replaceXhtmlVal(p,n,lt),ft=/<tr(.*?)<\/tr>/ig,u=[],u=this._getUpdaeNodeXhtml(ft,n,u),d=[],d=u.slice(0),r=0;r<u.length;r++)h=u[r].lastIndexOf("<\/tr>"),ot=u[r].charAt(h-5)+u[r].charAt(h-4)+u[r].charAt(h-3)+u[r].charAt(h-2)+u[r].charAt(h-1),ot!="<\/td>"&&(u[r]=u[r].substr(0,h)+"<\/td>"+u[r].substr(h,u[r].length));n=this._replaceXhtmlVal(u,n,d)}if(n.indexOf("<input")!=-1&&(st=/<input((?:(?!\/).))*?>/ig,n=this._replaceInputParams(st,n),n=n.replace(/<\/input>/gi,"")),n.indexOf("<param")!=-1&&(st=/<param((?:(?!\/).))*?>/ig,n=this._replaceInputParams(st,n),n=n.replace(/<\/param>/gi,"")),n.indexOf("<p ")!=-1||n.indexOf("<p>")!=-1){if(wt=/<p(.*)<\/p>/ig,g=[],g=this._getUpdaeNodeXhtml(wt,n,g),at=[],at.slice(0),rt=g[0].length-1,i=g[0],i.indexOf("<p")!=-1)for(s=i.indexOf("<p");s<=rt;s++)if(h="",r=0,s<rt-3&&(h=i.charAt(s)+i.charAt(s+1)),h=="<p")for(l=s+1;l<=rt;l++)if((ot=i.charAt(l)+i.charAt(l+1)+i.charAt(l+2)+i.charAt(l+3))=="<\/p>"&&r++,(ot=i.charAt(l)+i.charAt(l+1))=="<p"){if(r==0&&i.indexOf("<div")!=-1&&(nt=i.substr(s,l-s),nt.indexOf("<div")!=-1)){for(v=nt.indexOf("<div"),ht=0,o=s+v+1;o<i.length-1;o++)h=i.charAt(o)+i.charAt(o+1)+i.charAt(o+2)+i.charAt(o+3)+i.charAt(o+4)+i.charAt(o+5),h=="<\/div>"&&ht==0&&(tt=o);i=i.substr(0,s+v)+"<\/span><\/p>"+i.substr(s+v,-(s+v)+tt+6)+"<p><span>"+i.substr(tt+6,i.length-1);r++}if(r==0){if(i.indexOf("<table")!=-1&&(nt=i.substr(s,l-s),nt.indexOf("<table")!=-1)){for(v=nt.indexOf("<table"),ht=0,o=s+v+1;o<i.length-1;o++)h=i.charAt(o)+i.charAt(o+1)+i.charAt(o+2)+i.charAt(o+3)+i.charAt(o+4)+i.charAt(o+5)+i.charAt(o+6)+i.charAt(o+7),h=="<\/table>"&&ht==0&&(tt=o);i=i.substr(0,s+v)+"<\/span><\/p>"+i.substr(s+v,-(s+v)+tt+8)+"<p><span>"+i.substr(tt+8,i.length-1);r++}r==0&&(i=i.substr(0,l-1)+"<\/p>"+i.substr(l,i.length-1),rt++,r++)}}for(i=i.replace(/<\/p><\/p>/gi,"<\/p>"),bt=[],bt=g.slice(0),r=0;r<2;r++)i=this._ptagXhtml(i);for(kt=/<p(.*?)<\/p>/ig,a=[],a=this._getUpdaeNodeXhtml(kt,i,a),vt=[],vt.slice(0),f=0;f<a.length;f++)a[f].indexOf("<table")!=-1&&(y=/<table(.*)<\/table>/ig,a[f]=this._replaceTagUpdateXhtml(y,a[f],"<\/span><\/p>","<p><span>")),a[f].indexOf("<div")!=-1&&(y=/<div(.*)<\/div>/ig,a[f]=this._replaceTagUpdateXhtml(y,a[f],"<\/span><\/p>","<p><span>"));i=this._replaceXhtmlVal(a,i,vt);n=n.replace(at[0],i)}if(n.indexOf("<span")!=-1){for(dt=/<span(.*?)<\/span>/ig,c=[],c=this._getUpdaeNodeXhtml(dt,n,c),gt=[],sapnEX=c.slice(0),f=0;f<c.length;f++)c[f].indexOf("<table")!=-1&&(y=/<table(.*)<\/table>/ig,c[f]=this._replaceTagUpdateXhtml(y,c[f],"<\/span>","<span>")),c[f].indexOf("<div")!=-1&&(y=/<div(.*)<\/div>/ig,c[f]=this._replaceTagUpdateXhtml(y,c[f],"<\/span>","<span>")),c[f].indexOf("<p")!=-1&&(y=/<p(.*)<\/p>/ig,c[f]=this._replaceTagUpdateXhtml(y,c[f],"<\/span>","<span>"));n=this._replaceXhtmlVal(c,n,gt)}if(n.indexOf("<ol")!=-1&&(it=/<ol(.*?)<\/ol>/ig,n=this._replaceTagXHTML(it,n)),n.indexOf("<table")!=-1&&(it=/<table(.*?)><\/table>/ig,n=this._replaceTagXHTML(it,n)),n.indexOf("style")!=-1&&(it=/style="(.*?)"/ig,n=this._replaceTagXHTML(it,n)),t.isNullOrUndefined(this._fontXhtml(n))||(n=this._fontXhtml(n)),(n.indexOf("<br ")!=-1||n.indexOf("<br>")!=-1)&&(e=/<br(.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"<br/>")),(n.indexOf("<strong ")!=-1||n.indexOf("<strong>")!=-1)&&(e=/<strong((?:(?!r).))*?>/ig,n=this._replaceUpdateXhtml(e,n,"<b>").replace(/<\/strong>/gi,"<\/b>")),n.indexOf("<strong ")!=-1&&(e=/<strong (.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"<b>").replace(/<\/strong>/gi,"<\/b>")),n.indexOf("<u")!=-1&&(e=/<u((?:(?!l).))*?>/ig,n=this._replaceUpdateXhtml(e,n,'<span style="text-decoration: underline;">').replace(/<\/u>/gi,"<\/span>")),n.indexOf("<hr")!=-1&&(e=/<hr(.*?)>/ig,k=[],n=this._replaceUpdateXhtml(e,n,"<hr/>")),t.isNullOrUndefined(this._startXhtml(n))||(n=this._startXhtml(n)),n.indexOf("v:shapes=")!=-1&&(e=/v:shapes=\"(.*?)\"/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("v:")!=-1&&(e=/<v:(.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("/v:")!=-1&&(e=/<\/v:(.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("o:")!=-1&&(e=/<o:(.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("/o:")!=-1&&(e=/<\/o:(.*?)>/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("role=")!=-1&&(e=/role=\"(.*?)\"/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("target=")!=-1&&(e=/target=\"(.*?)\"/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("language=")!=-1&&(e=/language=\"(.*?)\"/ig,n=this._replaceUpdateXhtml(e,n,"")),n.indexOf("lang=")!=-1)for(e=/lang=\"(.*?)\"/ig,k=[],k=this._getUpdaeNodeXhtml(e,n,k),yt=[],yt=k.slice(0),r=0;r<k.length;r++)n=n.replace(yt[r],k[r].toLowerCase());n=n.replace(/<\/td><\/td>/gi,"<\/td>").replace(/<\/th><\/td>/gi,"<\/th>");n=n==""||/<div class="e-xhtml">/ig.test(n)?n:"<div class='e-xhtml'>"+n+"<\/div>";w=n.replace(/&quot;/g,"'").replace(/cellspacing=("[0-9]")/g,"").replace(/cellSpacing=("[0-9]")/g,"").replace(/cellpadding=("[0-9]")/g,"").replace(/cellPadding=("[0-9]")/g,"").replace(/border=("[^"]")/g,"").replace(/<!--(.*?)-->/gm,"").replace(/(vAlign)=("[^"]*")/g,"").replace(/(valign)=("[^"]*")/g,"").replace(/(colspan)=("[^"]*")/g,"").replace(/(colSpan)=("[^"]*")/g,"");this.value(w)}return w},_setClearFormat:function(){var n=this._rteToolbar.find(".e-active").length},_updateToolbarStatus:function(){var i,r,t,u,f,e;try{if(i=!1,this.model.showToolbar){for(t=0;t<this._styleItems.length;t++)r=document.getElementById(this._rteId+"_"+this._styleItems[t]),this._getCommandStatus(n.trim(this._styleItems[t].toLowerCase()))?(this._toolBarObj.selectItemByID(this._rteId+"_"+this._styleItems[t]),r.classList.add("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+"_"+this._styleItems[t]),r.classList.remove("e-isactive"));for(t=0;t<this._alignItems.length;t++)this._getCommandStatus(n.trim(this._alignItems[t].toLowerCase()))?(this._toolBarObj.selectItemByID(this._rteId+"_"+this._alignItems[t]),i=!0):this._toolBarObj.deselectItemByID(this._rteId+"_"+this._alignItems[t]);for(i||this._toolBarObj.selectItemByID(this._rteId+"_justifyLeft"),t=0;t<this._scriptsItems.length;t++)u=document.getElementById(this._rteId+"_"+this._scriptsItems[t]),this._getCommandStatus(n.trim(this._scriptsItems[t].toLowerCase()))?(this._toolBarObj.selectItemByID(this._rteId+"_"+this._scriptsItems[t]),u.classList.add("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+"_"+this._scriptsItems[t]),u.classList.remove("e-isactive"));f=document.getElementById(this._rteId+"_orderedList");e=document.getElementById(this._rteId+"_unorderedList");this._getCommandStatus("InsertOrderedList")?(this._toolBarObj.selectItemByID(this._rteId+"_orderedList"),f.classList.add("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+"_orderedList"),f.classList.remove("e-isactive"));this._getCommandStatus("InsertUnorderedList")?(this._toolBarObj.selectItemByID(this._rteId+"_unorderedList"),e.classList.add("e-isactive")):(this._toolBarObj.deselectItemByID(this._rteId+"_unorderedList"),e.classList.remove("e-isactive"));this._updateIndentStatus()}}catch(o){}},_updateFormat:function(){try{if(this._formatDDL&&this.model.showToolbar&&!t.isNullOrUndefined(this.model.tools.formatStyle)){var i=n.trim(this._getCommandValue("formatblock").replace(/'/g,""));this._isIE()||(i="<"+i+">");this._formatDDL.hasClass("e-dropdownlist")&&(t.isNullOrUndefined(i)||i==""?this._formatDDL.ejDropDownList({value:this._getLocalizedLabels("format")}):!n(this._formatDDL).parents("ul.e-rte-format").length==0&&this._formatDDL.ejDropDownList("setSelectedValue",i))}}catch(r){}},_updateFontOptionStatus:function(){var i,r;try{this.model.showFontOption&&this.model.showToolbar&&!t.isNullOrUndefined(this.model.tools.font)&&(i=n.trim(this._getCommandValue("fontname").replace(/"/g,"").replace(/'/g,"").replace(/, /g,",")),(t.isNullOrUndefined(i)||i=="")&&(i="Segoe UI"),!t.isNullOrUndefined(this._fontStyleDDL)&&this._fontStyleDDL.hasClass("e-dropdownlist")&&!n(this._fontStyleDDL).parents("ul.e-rte-fontgroup").length==0&&this._fontStyleDDL.ejDropDownList("setSelectedValue",i),r=this._isIE8()?this._getCommandValue("fontsize"):this._getDocumentHandler()&&this._operationHandler._validateFontSize(this._getRange().startContainer),(t.isNullOrUndefined(r)||r=="")&&(r=2),!t.isNullOrUndefined(this._fontSizeDDL)&&this._fontSizeDDL.hasClass("e-dropdownlist")&&!n(this._fontSizeDDL).parents("ul.e-rte-fontgroup").length==0&&this._fontSizeDDL.ejDropDownList("setSelectedValue",r))}catch(u){}},_getSelText:function(){var n="",r,t,i;return this._isIE()?n=this._seleText:window.getSelection?(r=this._getWindow().getSelection(),i=this._saveSelection(),t=document.createTextNode(i.toString()),n=t.nodeValue):document.getSelection&&(n=this._getWindow().document.getSelection()),n},_isIE:function(){var n=!1,i=t.browserInfo();return i.name=="msie"&&(n=!0),n},_isIE8:function(){var n=!1,i=t.browserInfo();return i.name=="msie"&&i.version=="8.0"&&(n=!0),n},_isUrl:function(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(n)},_pasteHtml:function(t,i){var e,r,l,h,o,a,c,f,v,s,u,y,p;if(this._pasteAPIFlag?this._isIE()&&this._focus():this._focus(),window.getSelection){if(e=this._getWindow().getSelection(),e.getRangeAt&&e.rangeCount){for(r=this._pasteFlag?this._pasteRangeVal:e.getRangeAt(0),l=r.commonAncestorContainer,h=l.nodeType==3?n(l).parentsUntil("body"):n(l).children(),u=h.length-1;u>=0;u--)if(h[u].textContent==r.toString()&&h[u].nodeName.toLowerCase()!="li"){r.selectNode(h[u]);break}if(r.deleteContents(),o=document.createElement("div"),o.innerHTML=t,a=this._getDocument().createDocumentFragment(),v=o.firstChild,this._pasteFlag||this._pasteAPIFlag){while(c=o.firstChild)v!=c?f=v.appendChild(c):o.removeChild(o.firstChild);f=a.appendChild(v)}else while(c=o.firstChild)f=a.appendChild(c);r.insertNode(a);f&&!i?(r=r.cloneRange(),r.setStartAfter(f),r.collapse(!0),e.removeAllRanges(),e.addRange(r)):(r=this.createRange(),r.setStart(f,f.data.length),r.setEnd(f,f.data.length),e.removeAllRanges(),e.addRange(r))}}else if(this._getDocument().selection&&this._getDocument().selection.type!="Control")if(!this._ieSelectionRange||this._ieSelectionRange.offsetLeft==0&&this._ieSelectionRange.offsetTop==0&&this._ieSelectionRange.boundingHeight==0)this._getDocument().body.insertAdjacentHTML("afterBegin",t);else if(this._pasteFlag&&this.selectRange(this._pasteRangeVal),s=this._ieParents(this._getRange()),y=!1,this._pasteAPIFlag)this._getRange().pasteHTML(t);else{for(p=this._getRange().text,u=s.length-1;u>=0;u--)if(s[u].innerText==p&&s[u].nodeName.toLowerCase()!="li"){s[u].nodeName=="BODY"?s[u].innerHTML=t:s[u].outerHTML=t;y=!0;break}y||this._getRange().pasteHTML(t)}this._pasteAPIFlag=this._pasteFlag=!1},_ieParents:function(n){var t=[];for(rangeval=this._isIE8()?n.duplicate():n.cloneRange(),n.parentElement=rangeval.parentElement();n.parentElement.nodeName!="HTML";){if(n.parentElement.nodeName=="TD"||n.parentElement.nodeName=="TH")break;t.push(n.parentElement);n=n.parentElement}return t},_getLocalizedLabels:function(n){return this._localizedLabels[n]===i?t.RTE.Locale["en-US"][n]:this._localizedLabels[n]},_setLocale:function(){var u,r,i,f,e,o,s;for(u in this._toolsList)for(u=this._toolsList[u],r=this.model.tools[u],i=0;i<r.length;i++)f=n("#"+this._rteId+"_"+r[i].replace(/ /g,"")),f.attr("data-content",this._getLocalizedLabels(r[i])),r[i]==="fullScreen"?f.attr("data-content",this._getLocalizedLabels("maximize")):r[i]==="findAndReplace"&&f.attr("data-content",this._getLocalizedLabels("FindAndReplace"));this._createTable.find(".e-rte-createCustomTableLink .customtable-link").text(this._getLocalizedLabels("customTable"));this._createTable.find(".e-rte-createCustomTableLink .customtable-link").attr("title",this._getLocalizedLabels("customTable"));this._createTable.find(".e-rte-eTblProperties .customtable-link").text(this._getLocalizedLabels("editTable"));this._createTable.find(".e-rte-eTblProperties .customtable-link").attr("title",this._getLocalizedLabels("editTable"));this._tblheaderDiv.html(this._getLocalizedLabels("createTable"));this._alertWindow.find(".e-rte-btn.e-alert-ok").text(this._getLocalizedLabels("dialogOk"));this._alertWindow.find(".e-rte-btn.e-alert-cancel").text(this._getLocalizedLabels("dialogCancel"));this._toolBarItems.find(".customBGcolor a.customcolor-link").text(this._getLocalizedLabels("customBGColor"));this._toolBarItems.find(".customcolor a.customcolor-link").text(this._getLocalizedLabels("customFontColor"));t.isNullOrUndefined(this._bgTransparent)||this._bgTransparent.text(this._getLocalizedLabels("TransBGColor"));t.isNullOrUndefined(this._htmlSource)||this._htmlSource.attr("data-content",this._getLocalizedLabels("viewHtml"));t.isNullOrUndefined(this._clearFormat)||this._clearFormat.attr("data-content",this._getLocalizedLabels("clearFormat"));t.isNullOrUndefined(this._clearAll)||this._clearAll.attr("data-content",this._getLocalizedLabels("clearAll"));this.model.showContextMenu&&(this._initContextMenu(),e=n("#"+this._rteId+"_contextmenu").data("ejMenu"),e=this._textMenuObj,e.setModel({fields:{dataSource:this._initContextMenu()}}));this._renderFormat();o=n(this.wrapper).find(".e-ddl.e-widget .e-dropdownlist");s=n(this.wrapper).find(".e-split.e-widget .e-splitbutton");o.length&&o.ejDropDownList({height:"30px"});s.length&&s.ejSplitButton({height:"30px"})},_getSelectedNode:function(){var u=this._getRange(),i,n=this._ieSelectionRange&&u.offsetLeft==0&&u.offsetTop==0&&u.boundingHeight==0?this._ieSelectionRange:u,t=n.startContainer,r=n.endContainer,f=n.startOffset,e=n.endOffset;return n?n.setStart?(i=n.commonAncestorContainer,!n.collapsed&&(t==r&&e-f<2&&t.hasChildNodes()&&(i=t.childNodes[f]),t.nodeType===3&&r.nodeType===3&&(t=t.length===f?this._skipEmptyNode(t.nextSibling,!0):t.parentNode,r=e===0?this._skipEmptyNode(r.previousSibling,!1):r.parentNode,t&&t===r)))?t:i&&i.nodeType==3?i.parentNode:i:n.item?n.item(0):n.parentElement():this._getDocument().selection},_skipEmptyNode:function(n,t){for(var i=n;n&&n.nodeType===3&&n.length===0;)n=t?n.nextSibling:n.previousSibling;return n||i},_getSelection:function(){var n;return this._isIE()?(n=this._getDocument().selection.createRange(),n.type=this._getDocument().selection.type):(n=window.getSelection(),n.rangeCount&&(sText=n.getRangeAt(0)),n.type=this._getWindow().getSelection().type),n},_saveSelection:function(){var i=this._getWindow(),r=i.document,n=i.getSelection?i.getSelection():r.selection,t,u;return n&&(n.createRange?t=n.createRange():n.rangeCount>0&&n.getRangeAt(0)?t=n.getRangeAt(0):n.anchorNode&&n.focusNode&&r.createRange?(t=r.createRange(),t.setStart(n.anchorNode,n.anchorOffset),t.setEnd(n.focusNode,n.focusOffset),t.collapsed!==n.isCollapsed&&(t.setStart(n.focusNode,n.focusOffset),t.setEnd(n.anchorNode,n.anchorOffset))):r.createRange()?(t=r.createRange(),t.setStart(i.document.body,0),t.setEnd(i.document.body,0)):(u=document.getElementsByTagName("iframe")[0],i=u.contentWindow,t=i.document.createRange(),t.setStart(i.document.body,0),t.setEnd(i.document.body,0))),t},_restoreSelection:function(n){var i=this._getWindow(),r=i.document,t=i.getSelection?i.getSelection():r.selection;t&&n&&(n.select?n.select():t.removeAllRanges&&t.addRange&&(t.removeAllRanges(),t.addRange(n)))},_getRange:function(){var i,u,f,r,n;if(this._isIE8())return i=this._saveSelection(),u=this._ieSelectionRange&&i.offsetLeft==0&&i.offsetTop==0&&i.boundingHeight==0?this._ieSelectionRange:i,u;if(this._isIE())return this._ieSelection=window.getSelection&&(t.isNullOrUndefined(this._selectionRange)?!1:this._selectionRange.length>0)?this._selectionRange:this._saveSelection();if(this._getWindow().getSelection()&&this._getWindow().getSelection().rangeCount>0)return this._getWindow().getSelection().getRangeAt(0);f=document.getElementsByTagName("iframe")[0];r=f.contentWindow;try{n=r.document.createRange();n.setStart(r.document.body,0);n.setEnd(r.document.body,0)}catch(e){n=this._getDocument().createRange();n.setStart(this._getDocument().body,0);n.setEnd(this._getDocument().body,0)}return n},_setBackupData:function(){var t=this.getHtml(),i=this._backupArray.length;i==this.model.undoStackLimit+1&&this._backupArray.splice(0,1);t!=this._backupArray[i-1]&&this.model.undoStackLimit>0&&this._backupArray.push(t);this._undoRedoPosition=this._backupArray.length-1;this.model.showToolbar&&this._rteToolbar.find("li.e-rteItem-undo")&&this._backupArray.length>1&&!n("#"+this._rteId+"_undo").hasClass("e-rteTooldisable")&&this._toolBarObj.enableItemByID(this._rteId+"_undo")},_getSelectedHtmlString:function(){var i,e,o,r,f,u,t,s;if(typeof document.selection!="undefined"&&this._isIE8()){for(i=this._ieParents(this._getRange()),e=!1,t=i.length-1;t>=0;t--)if(i[t].innerText==this._getRange().text){o=i[t].nodeName=="BODY"?i[t].innerHTML:i[t].outerHTML;e=!0;break}return e||(o=this._getRange().htmlText.substring(0,1)=="<"?this._getRange().text:this._getRange().htmlText),o}for(r=this._getRange(),f=r.commonAncestorContainer,u=f.nodeType==3?n(f).parentsUntil("body"):n(f).children(),t=u.length-1;t>=0;t--)if(u[t].textContent!=""&&u[t].textContent==r.toString()){r.selectNode(u[t]);break}return s=document.createElement("div"),s.appendChild(r.cloneContents()),s.innerHTML},_getText:function(){var n=this._getDocument().body;if(n!=null)return this._isIE()?n.innerText:n.textContent},_validateMaxLength:function(n){if(this.model.maxLength!=null){var t=this.model.maxLength,i=this._getText();t<=i.length&&(n.keyCode<47||n.ctrlKey&&n.keyCode==65||n.ctrlKey&&n.keyCode==67||n.ctrlKey&&n.keyCode==86||n.ctrlKey&&n.keyCode==88||(this._keypressFlag=!1,this._cancelEvent(n)))}},_cancelEvent:function(n){return n.returnValue=!1,n.stopPropagation(),n.preventDefault(),!1},_alignToolUpdate:function(n){for(var t=0;t<this._alignItems.length;t++)this._alignItems[t]===n?this._toolBarObj.selectItemByID(this._rteId+"_"+n):this._toolBarObj.deselectItemByID(this._rteId+"_"+this._alignItems[t])},_getCommandStatus:function(n){return this._getDocument().queryCommandState(n)},_getCommandValue:function(n){var i=this._getDocument().queryCommandValue(n),r;if(this._isIE()){if(n=="fontname"){for(r=0;r<this.model.fontName.length;r++)if(i==this.model.fontName[r].text){i=this.model.fontName[r].value;break}(t.isNullOrUndefined(i)||i=="")&&(i=this.model.fontName[0].value)}if(n=="formatblock"){for(r=2;r<this.model.format.length;r++)if(i==this.model.format[r].text){i=this.model.format[r].value;break}i=="Normal"&&(i=this.model.format[0].value)}}return i},_undo:function(){this._undoRedoPosition>0&&(this.model.enableHtmlEncode?this.setHtml(this._decode(this._backupArray[this._undoRedoPosition-1])):this.setHtml(this._backupArray[this._undoRedoPosition-1]),this._undoRedoPosition--,this._focus(),this._updateFontOptionStatus(),this._updateFormat(),this._updateCount(),this._toggleEditTable(),this.model.isResponsive&&this._toolBarObj._liTemplte.removeClass("e-display-none"),this._toolBarObj.enableItemByID(this._rteId+"_redo"));this._undoRedoPosition==0&&(this._toolBarObj.disableItemByID(this._rteId+"_undo"),this._toolBarObj.enableItemByID(this._rteId+"_redo"));this._updateToolbarStatus();this._trigger("execute",{commandName:"undo"})},_getRedoContent:function(){return this.model.enableHtmlEncode?this._decode(this._backupArray[this._undoRedoPosition+1]):this._backupArray[this._undoRedoPosition+1]},_redo:function(){var i,n;this._undoRedoPosition!=this._backupArray.length&&(this._backupArray[this._undoRedoPosition+1]!=null?(i=this._getRedoContent(),this.setHtml(i),this._undoRedoPosition++):(n=this._getRedoContent(),t.isNullOrUndefined(n)||this.setHtml(n),this._undoRedoPosition=this._backupArray.length-2),this._focus(),this._updateToolbarStatus(),this._updateFontOptionStatus(),this._updateFormat(),this._updateCount(),t.isNullOrUndefined(this._toolBarObj)||(this._backupArray.length-1>0&&this._toolBarObj.enableItemByID(this._rteId+"_undo"),this._undoRedoPosition==this._backupArray.length-1&&this._toolBarObj.disableItemByID(this._rteId+"_redo")));this._trigger("execute",{commandName:"redo"})},_setContent:function(n){var i=this._getDocument();i==""||t.isNullOrUndefined(i)||(i.open(),i.write(n),i.close(),i.EditMode=!0)},_removeResizeObject:function(){n(this._getDocument()).find(".e-rteColumnResizer , .e-rteRowResizer , .e-rteLastcolumn").remove()},_tableMouseOver:function(i){(i.target.nodeName=="TABLE"||t.browserInfo().name==="mozilla"&&i.target.nodeName=="TD")&&(this._curTable=i.target.nodeName=="TD"?n(i.target).closest("table")[0]:i.target,this._removeResizeObject(),n(this._getDocument()).find(".e-rte-tablebox").remove(),this._tableResizeObject(n(this._curTable)))},_preventDefaultResize:function(){var n=this._getDocument();t.browserInfo().name==="msie"&&t.browserInfo().version==="11.0"?n.body.addEventListener("mscontrolselect",this._ieDefaultTableHandler):this._isIE()&&n.body.attachEvent("oncontrolselect",this._ieTableHandler);t.browserInfo().name==="mozilla"&&(n.designMode="on",n.execCommand("enableObjectResizing",!1,"false"),n.execCommand("enableInlineTableEditing",!1,"false"))},_tableResizeObject:function(i){var f,r,u;for(this.model.allowEditing&&this._preventDefaultResize(),f=parseInt(n(i).attr("cellspacing")?n(i).attr("cellspacing"):0),this._newcol=i.find("tr:first td").not(":first"),this._newRow=i.find("tr td:nth-child(1)"),this._newlas=i.find("tr:first td:last"),r=0;this._newcol.length>r;r++)n(this._getDocument().body).after('<div class ="e-rteColumnResizer"  unselectable="on" contenteditable="false" data-col ='+(r+1)+' style="top:'+n(this._newcol[r]).closest("table").offset().top+"px;left:"+n(this._newcol[r]).offset().left+"px;height:"+n(this._newcol[r]).closest("table").outerHeight()+"px;width:"+(5+f)+"px;margin-left: "+(-4-f)+'px;"><\/div>');for(r=0;this._newRow.length>r;r++)n(this._getDocument().body).after('<div class ="e-rteRowResizer" unselectable="on"  contenteditable="false" data-row ='+r+' style="top:'+(n(this._newRow[r]).offset().top+n(this._newRow[r]).height())+"px;left:"+n(this._newRow[r]).offset().left+"px;width:"+n(this._newRow[r]).closest("table").width()+"px;height:"+(5+f)+'px;"><\/div>');n(this._getDocument().body).after('<div class ="e-rteColumnResizer e-rtelastcol" data-col ='+this._newcol.length+'  contenteditable="false" style="top:'+n(this._newlas).closest("table").offset().top+"px;left:"+(n(this._newlas).offset().left+n(this._newlas).width())+"px;height:"+n(this._newlas).closest("table").outerHeight()+"px;width:"+(5+f)+'px;margin-left:3px;"><\/div>');this._botRigTab=t.buildTag("span.e-rte-tablebox e-rte-botrig","",{cursor:"nwse-resize",width:"5px",height:"5px",position:"absolute",display:"block",background:"#fff",border:"1px solid #000"},{});u=i.find("tr:last td:last:not(:has(>span.e-rte-tablebox))");u.length>0&&n(this._getDocument().body).after(n(this._botRigTab).css({left:parseInt(u.closest("table").width())+u.closest("table").offset().left+"px",top:parseInt(u.closest("table").height())+u.closest("table").offset().top+"px"}))},_ieDefaultTableHandler:function(n){n.preventDefault()},_ieTableHandler:function(){return!1},_tableCellStart:function(){this._tableInsertAt=this._saveSelection()},_tableCellSelect:function(i){var r,u=n(i.target),f=u.parent().index(),e=u.index();this._createTable.find("div.e-rte-tablecell").each(function(){r=n(this);r.index()<=e&&r.parent().index()<=f?r.addClass("e-active"):r.removeClass("e-active")});this._tblheaderDiv.html(e+1+"x"+(f+1)+this._getLocalizedLabels("table"));n(this._getDocument()).find("table.e-rte-tableremove").remove();t.isNullOrUndefined(this._tableInsertAt)||this._restoreSelection(this._tableInsertAt)},_tableCellLeave:function(){this._createTable.find("div.e-rte-tablecell").removeClass("e-active");n(this._getDocument()).find("table.e-rte-tableremove").remove();this._tblheaderDiv.html(this._getLocalizedLabels("createTable"))},_tableCellDown:function(i){var r=n(i.target),f=r.parent().index()+1,e=r.index()+1,u;this._focus();n(this._getDocument()).find("table.e-rte-tableremove").remove();t.isNullOrUndefined(this._tableInsertAt)||(this._restoreSelection(this._tableInsertAt),this._onInsertTable(f,e,!1));u=n(this._getDocument()).find("table.e-rte-table");this.model.enableRTL||this._on(u,"mouseover",this._tableMouseOver);this._createTable.ejDialog("close",{clickAction:!0});this._setBackupData();this._onChange();this.model.isResponsive&&!n(this._toolBarObj._liTemplte).hasClass("e-inline")&&(this._toolBarObj._liTemplte.addClass("e-display-none"),this._toolBarObj.contstatus=!1)},_tableGenerator:function(n,i,r,u,f,e,o,s,h,c){var a="e-rte-table",l,v;r&&(a+=" e-rte-tableremove");u=t.isNullOrUndefined(u)||u==""?"width:99%;":"width:"+(isNaN(Number(u))?u:u+"px")+";";f=t.isNullOrUndefined(f)||f==""?"":"height:"+(isNaN(Number(f))?f:f+"px")+";";e=t.isNullOrUndefined(e)||e==""?"":"border-spacing:"+(isNaN(Number(e))?e:e+"px")+";";o=t.isNullOrUndefined(o)||o==""?"":" style='padding:"+(isNaN(Number(o))?o:o+"px")+";'";s=t.isNullOrUndefined(s)||s==""?"":s=="center"?" margin: 0 auto;":" float:"+s+";";v="<td"+o+"><br _moz_dirty=''/><\/td>";switch(h){case"dotted":l="dotted";break;case"double":return this._border="border:3px double #5C5C5C;",l="double","<table border='1' class='"+a+"' style='"+u+" "+f+" "+this._border+" "+e+" "+o+" "+s+"' >"+(c?"<caption><\/caption>":"")+Array(n+1).join("<tr>"+Array(i+1).join("<td"+o+"><br _moz_dirty=''/><\/td>")+"<\/tr>")+"<\/table>";case"dashed":l="dashed";break;case"solid":l="solid";break;default:l="solid"}return l!="double"?(this._border="border:1px "+l+"#5C5C5C;","<table border='1' class='"+a+"' style='"+u+f+this._border+e+s+"' >"+(c?'<caption><br type="_moz"><\/caption>':"")+Array(n+1).join("<tr>"+Array(i+1).join("<td"+o+"><br _moz_dirty=''/><\/td>")+"<\/tr>")+"<\/table>"):"<table border='1' class='"+a+"' style='border:1px solid #5C5C5C; "+u+f+e+s+"' >"+(c?'<caption><br type="_moz"><\/caption>':"")+Array(n+1).join("<tr>"+Array(i+1).join(v)+"<\/tr>")+"<\/table>"},_openCustomTable:function(t){this._createCustomTable();t.currentTarget.id==this._rteId+"_createCustomTableLink"?(n("#"+this._rteId+"_customTable_wrapper").css({"z-index":this._onGetMaxZindex()}),this._customTableDialog.ejDialog("open"),this._createTable.ejDialog("close"),this._widthFocusOut()):this._createTable.find("div.e-rte-eTblProperties").hasClass("e-disable")||(this._eTblManager(),n("#"+this._rteId+"_eTbl_wrapper").css({"z-index":this._onGetMaxZindex()}),this._eTblDialog.ejDialog("open"),this._createTable.ejDialog("close"),this._on(this._getTableObj("Width"),"focusout",this._widthFocusOut),this._widthFocusOut())},_createcustomColorpalette:function(){var f=n("#"+this._rteId).data("ejRTE"),r=t.buildTag("div.e-custom-palette"),u,i;this._customColor=t.buildTag("div.e-rte-customColor#"+this._rteId+"_customColorDialog");u=t.buildTag("input.e-custom-palette#"+this._rteId+"customcolor");u.appendTo(this._customColor);this.colorobj=this._customColor.find(".e-custom-palette").ejColorPicker({enableRTL:this.model.enableRTL,enableOpacity:!0,showRecentColors:!0,modelType:"picker",cssClass:this.model.cssClass,showSwitcher:!1,select:function(n){f._checkColor(n.value)}}).data("ejColorPicker");i=this._getDialogModel();i.width="auto";i.height="auto";i.minWidth="220px";i.htmlAttributes={"class":"e-custom-Dialog"};i.title=this._getLocalizedLabels("customFontColor");i.target=null;i.showRoundedCorner=this.model.showRoundedCorner;i.closeIconTooltip=this._getLocalizedLabels("closeIcon");this._customColor.ejDialog(i);this._customDialogobj=this._customColor.ejDialog("instance");this._customColor.closest(".e-dialog-wrap").addClass("e-rte");this.colorobj.popupContainer.appendTo(r);this.colorobj.popupContainer.css({display:"block","border-style":"none"});n("#"+this._rteId+"_customColorDialog").find("span.e-colorwidget.e-picker").remove();n("#"+this._rteId+"_customColorDialog").prepend(r);this.colorobj._hidePopup=function(){n("#"+this._rteId+"_customColorDialog").ejDialog("isOpen")&&n("#"+this._rteId+"_customColorDialog").ejDialog("close");this.colorobj.model.displayInline||this.colorobj.hide()};this._on(this.colorobj._cancelTag,"click",this.colorobj._hidePopup)},_openColorpalette:function(n){this._customColor||this._createcustomColorpalette();n.currentTarget.id==this._rteId+"_customcolor"?(this._fontclick=!0,t.isNullOrUndefined(this._splitMenu)||this._splitMenu.hide(n)):n.currentTarget.id==this._rteId+"_customBGcolor"&&(this._fontclick=!1,t.isNullOrUndefined(this._bgSplitMenu)||this._bgSplitMenu.hide(n));this._customColor.ejDialog("open")},_checkColor:function(n){this._fontclick?(this._onFontColor(n),this._fontColor=n):(this._onBGColor(n),this._bgColor=n)},_createTableClose:function(i){!t.isNullOrUndefined(this._createTable)&&(!t.isNullOrUndefined(i)&&n(i.target).parents("#"+this._rteId+"_tables").length<=0||t.isNullOrUndefined(i))?t.isNullOrUndefined(this._createTable.data("ejDialog"))||((t.isNullOrUndefined(i)||i.target!=this._createTable[0]&&n(i.target).parents(".e-rte-table-picker").length<=0)&&(this._createTable.ejDialog("isOpened")&&this._createTable.ejDialog("close"),this._createTable.find("div.e-rte-eTblProperties").addClass("e-disable")),this._createTable.ejDialog("isOpened")&&this.model.isResponsive&&!n(i.target).find("div#"+this._toolBarObj.element[0].id+"_hiddenlist").hasClass("e-inline")?this._toolBarObj._liTemplte.removeClass("e-display-none"):!this.model.isResponsive||t.isNullOrUndefined(i)||n(i.target).is(n("#"+this._toolBarObj.element[0].id+"_target"))||n(i.target).closest("div#"+this._toolBarObj.element[0].id+"_hiddenlist").length!=0||n(i.target).parents().hasClass("e-ddl-popup")||this._toolBarObj._liTemplte.addClass("e-display-none")):n(this._createTable.find("div.e-rte-eTblProperties").hasClass("e-disable")).addClass("e-disable")},_rteinlineClick:function(t){n(t.target).hasClass("e-inlinearrow")&&this._setIframeHeight()},_documentClick:function(n){if(this.model.toolbarOverflowMode!="inline"&&this._createTableClose(n),this._isIE()&&!window.getSelection){var t=n.target.id;t==""&&(t=n.target.parentNode.id);(t==this._rteId+"_fontSizeDDL"||t==this._rteId+"_fontNameDDL"||t==this._rteId+"_formatDDL"||t==this._rteId+"_fontSizeDDL_dropdown"||t==this._rteId+"_fontNameDDL_dropdown"||t==this._rteId+"_formatDDL_dropdown")&&this._restoreSelection(this._selectionRange)}},_iframeFocus:function(i){!t.isNullOrUndefined(this._createTable)&&this._createTable.ejDialog("isOpened")&&this._createTable.ejDialog("close");!n(this._fontSizeDDL).parents("ul.e-rte-fontgroup").length==0&&!t.isNullOrUndefined(this._fontSizeDDL)&&this._fontSizeDDL.hasClass("e-dropdownlist")&&this._fontSizeDDL.ejDropDownList("hidePopup");!n(this._fontStyleDDL).parents("ul.e-rte-fontgroup").length==0&&!t.isNullOrUndefined(this._fontStyleDDL)&&this._fontStyleDDL.hasClass("e-dropdownlist")&&this._fontStyleDDL.ejDropDownList("hidePopup");!n(this._formatDDL).parents("ul.e-rte-format").length==0&&!t.isNullOrUndefined(this._formatDDL)&&this._formatDDL.hasClass("e-dropdownlist")&&this._formatDDL.ejDropDownList("hidePopup");t.isNullOrUndefined(this._createTable)||this._createTable.ejDialog("close");t.isNullOrUndefined(this._splitMenu)||this._splitMenu.hide(i);t.isNullOrUndefined(this._bgSplitMenu)||this._bgSplitMenu.hide(i);t.isNullOrUndefined(this._orderSplitObj)||this._orderSplitObj.hide(i);t.isNullOrUndefined(this._unOrderSplitObj)||this._unOrderSplitObj.hide(i)},_updateKeyDownSelectStatus:function(n,t){n.hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"_"+t):this._toolBarObj.selectItemByID(this._rteId+"_"+t)},_iframeKeyDown:function(i){var u,r,f,e,o;if(this.model.showToolbar&&this.model.allowKeyboardNavigation&&i)if(i.ctrlKey){i.keyCode==65?this._contolAKeyfalg=!0:t.isNullOrUndefined(this._contolAKeyfalg)?this._contolAKeyfalg:this._contolAKeyfalg=!1;e=this;switch(i.keyCode){case 48:return i.preventDefault(),n(this.getDocument().body).css({zoom:1,transform:"scale(1)","transform-origin":"0 0","-o-transform":"scale(1)","-o-transform-origin":"0 0","-webkit-transform":"scale(1)","-webkit-transform-origin":"0 0"}),n(e._toolBarObj.itemsContainer.find(".e-rteItem-zoomIn")).attr("title",e._getLocalizedLabels("zoomIn")+" 100%"),n(e._toolBarObj.itemsContainer.find(".e-rteItem-zoomOut")).attr("title",e._getLocalizedLabels("zoomOut")+" 100%"),e._zoomValue=1,!1;case 57:return i.preventDefault(),this._onKeyZoom("IN"),!1;case 173:case 189:return i.preventDefault(),this._onKeyZoom("OUT"),!1;case 80:return i.preventDefault(),this._onPrint(),!1;case 66:if(!i.shiftKey)return i.preventDefault(),u=this._toolBarItems.find("li.e-rteItem-bold"),u.hasClass("e-disable")||(this._onBold(),this._updateKeyDownSelectStatus(u,"bold"),this._onChange(),this._setBackupData()),!1;break;case 72:if(i.shiftKey)return i.preventDefault(),this._getPasteRangeVal(),this._sourceCodeManager(),!1;break;case 73:return i.preventDefault(),i.shiftKey?this._imageManager():(u=this._toolBarItems.find("li.e-rteItem-italic"),u.hasClass("e-disable")||(this._onItalics(),this._setBackupData(),this._updateKeyDownSelectStatus(u,"italic"),this._onChange())),!1;case 85:return i.preventDefault(),i.shiftKey?this._onUpperCase():(u=this._toolBarItems.find("li.e-rteItem-underline"),u.hasClass("e-disable")||(this._onUnderLine(),this._updateKeyDownSelectStatus(u,"underline"))),this._setBackupData(),this._onChange(),!1;case 76:return i.preventDefault(),i.shiftKey?this._onLowerCase():this._toolBarItems.find("li.e-rteItem-justifyLeft").hasClass("e-disable")||(this._onJustifyLeft(),this._alignToolUpdate("justifyLeft")),this._setBackupData(),this._onChange(),!1;case 82:return i.preventDefault(),i.altKey?this.removeRow():i.shiftKey?this._onClearFormat():(u=this._toolBarItems.find("li.e-rteItem-justifyRight"),u.hasClass("e-disable")||(this._onJustifyRight(),this._alignToolUpdate("justifyRight"))),this._setBackupData(),this._onChange(),!1;case 69:if(i.shiftKey)return i.preventDefault(),this._openCustomTable(i),this._setBackupData(),this._onChange(),!1;if(!this._toolBarItems.find("li.e-rteItem-justifyCenter").hasClass("e-disable"))return i.preventDefault(),this._onJustifyCenter(),this._setBackupData(),this._alignToolUpdate("justifyCenter"),this._onChange(),!1;break;case 74:if(!this._toolBarItems.find("li.e-rteItem-justifyFull").hasClass("e-disable"))return i.preventDefault(),this._onJustifyFull(),this._alignToolUpdate("justifyFull"),this._setBackupData(),this._onChange(),!1;break;case 90:if(!this._toolBarItems.find("li.e-rteItem-undo").hasClass("e-disable"))return i.preventDefault(),this._onUndo(),!1;break;case 89:if(!this._toolBarItems.find("li.e-rteItem-redo").hasClass("e-disable"))return i.preventDefault(),this._onRedo(),!1;break;case 67:if(i.altKey)return i.preventDefault(),this.removeColumn(),!1;if(i.shiftKey)return i.preventDefault(),this._getPasteRangeVal(),this._customTableDialog&&this._renderTableDialog(),this._customTableDialog.ejDialog("open"),!1;if(this._toolBarItems.find("li.e-rteItem-copy").hasClass("e-disable"))return i.preventDefault(),this._keypressFlag=!1,!1;break;case 88:if(this._toolBarItems.find("li.e-rteItem-cut").hasClass("e-disable"))return i.preventDefault(),this._keypressFlag=!1,!1;this._onChange();break;case 86:if(this._toolBarItems.find("li.e-rteItem-paste").hasClass("e-disable")||this.model.maxLength<=n.trim(this._getText()).length&&(t.isNullOrUndefined(this._contolAKeyfalg)?!0:this._contolAKeyfalg))return i.preventDefault(),this._keypressFlag=!1,!1;if(i.shiftKey)return i.preventDefault(),this._keypressFlag=!1,this._selectCommand("video"),!1;break;case 77:return i.preventDefault(),i.shiftKey?this._toolBarItems.find("li.e-rteItem-outdent").hasClass("e-disable")||(this._onOutdent(),this._indentdepth>0&&this._indentdepth--):this._toolBarItems.find("li.e-rteItem-indent").hasClass("e-disable")||(this._onIndent(),this._indentdepth++),this._setBackupData(),this._onChange(),!1;case 75:return i.preventDefault(),i.shiftKey?this._onUnlink():this._toolBarItems.find("li.e-rteItem-createLink").hasClass("e-disable")||this._hyperLinkManager(!1),!1;case 188:if(i.shiftKey)return i.preventDefault(),this._changeFontsize(!1),this._onChange(),!1;this._setBackupData();this._onChange();break;case 190:if(i.shiftKey)return i.preventDefault(),this._changeFontsize(!0),this._onChange(),!1;this._setBackupData();break;case 61:case 187:return i.preventDefault(),i.shiftKey?this._onSuperScript():this._onSubScript(),this._onChange(),this._setBackupData(),!1;case 79:if(i.shiftKey)return i.preventDefault(),this.executeCommand("insertorderedlist","listItem"),this._onChange(),this._setBackupData(),!1;if(i.altKey)return i.preventDefault(),this.executeCommand("insertunorderedlist","listItem"),this._onChange(),this._setBackupData(),!1;break;case 83:if(i.shiftKey)return i.preventDefault(),this._onStrikeThrough(),this._onChange(),this._setBackupData(),!1;break;case 70:if(i.shiftKey)return i.preventDefault(),this._selectCommand("fullScreen"),!1;if(!i.altKey)return i.preventDefault(),t.RTE.FindAndReplace&&this._showFindAndReplace(),!1;break;case 37:if(i.shiftKey&&n(this._currentSelNode).closest("table").length)return i.preventDefault(),this.insertColumn(!0),this._onChange(),!1;break;case 39:if(i.shiftKey&&n(this._currentSelNode).closest("table").length)return i.preventDefault(),this.insertColumn(!1),this._onChange(),!1;break;case 38:if(i.shiftKey&&n(this._currentSelNode).closest("table").length)return i.preventDefault(),this.insertRow(!0),this._onChange(),!1;break;case 40:if(i.shiftKey&&n(this._currentSelNode).closest("table").length)return i.preventDefault(),this.insertRow(!1),this._onChange(),!1;break;case 65:if(i.altKey)return i.preventDefault(),this.removeTable(),!1;break;case 121:return i.preventDefault(),this._clearAllManager(),!1;case 84:if(i.altKey&&this._toolBarItems){this._toolBarItems.focus();break}}}else if(i.keyCode!=9||(this._isIE8()?this._currentSelNode.nodeName.toLowerCase()=="td":this._getSelectedNode().nodeName.toLowerCase()=="td"))i.keyCode==8&&(r=this._getSelectedNode(),n(r).find("span#RTE_imgDupDiv").length>0&&n(this._imgDupDiv).remove(),n(r).parents("BLOCKQUOTE").length>0&&(this._onOutdent(),i.preventDefault()));else return this._keypressFlag=!0,this.executeCommand("inserthtml","&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",!0),!1;else i.ctrlKey!=!0||i.keyCode!=66&&i.keyCode!=73&&i.keyCode!=85&&i.keyCode!=76&&i.keyCode!=82&&i.keyCode!=69&&i.keyCode!=74&&i.keyCode!=90&&i.keyCode!=89&&i.keyCode!=67&&i.keyCode!=88&&i.keyCode!=86&&i.keyCode!=8&&i.keyCode!=46||this.model.allowKeyboardNavigation||i.preventDefault();if(this.model.maxLength!=null&&(t.isNullOrUndefined(this._contolAKeyfalg)?!0:!this._contolAKeyfalg))try{!this._isIE8()||i.keyCode!=86||this.model.maxLength>=window.clipboardData.getData("Text").length+n.trim(this._getText()).length?this._validateMaxLength(i):i.preventDefault()}catch(s){}(this._isIE8()?this._currentSelNode&&this._currentSelNode.nodeName.toLowerCase()=="td":this._getSelectedNode().nodeName.toLowerCase()=="td")&&(r=this._isIE8()?this._currentSelNode:this._getSelectedNode(),o=n(r).parent().children().index(n(r)),i.keyCode!=9||i.shiftKey||(f=t.isNullOrUndefined(r.nextSibling)?t.isNullOrUndefined(n(r).parents("tr")[0].nextSibling)?t.isNullOrUndefined(n(r).parents("table")[0].nextSibling)?r:n(r).parents("table")[0].nextSibling.nodeName.toLowerCase()=="td"?n(r).parents("table")[0].nextSibling:r:n(r).parents("tr")[0].nextSibling.childNodes[0]:r.nextSibling,this._setTableSelection(f,i)),i.keyCode==9&&i.shiftKey?(f=t.isNullOrUndefined(r.previousSibling)?t.isNullOrUndefined(n(r).parents("tr")[0].previousSibling)?t.isNullOrUndefined(n(r).parents("table")[0].previousSibling)?r:n(r).parents("table")[0].previousSibling.nodeName.toLowerCase()=="td"?n(r).parents("table")[0].previousSibling:r:n(r).parents("tr")[0].previousSibling.childNodes[n(r).parents("tr")[0].previousSibling.childNodes.length-1]:r.previousSibling,this._setTableSelection(f,i)):i.keyCode==40?f=t.isNullOrUndefined(n(r).parents("tr")[0].nextSibling)?!t.isNullOrUndefined(n(r).parents("table")[0].nextSibling)&&!this._isIE8()?n(r).parents("table")[0].nextSibling:r:n(r).parents("tr")[0].nextSibling.children[o]:i.keyCode==38&&(f=t.isNullOrUndefined(n(r).parents("tr")[0].previousSibling)?!t.isNullOrUndefined(n(r).parents("table")[0].previousSibling)&&!this._isIE8()?n(r).parents("table")[0].previousSibling:r:n(r).parents("tr")[0].previousSibling.children[o]),i.keyCode!=9||r!=f||t.isNullOrUndefined(n(r).parents("tr")[0])?(i.keyCode==9&&this._isIE8()||i.keyCode==40||i.keyCode==38)&&(this._setRange(f,this._getRange(),!0),i.preventDefault()):(this.insertRow(!1),this._setRange(this._isIE8()?n(this._getRange().parentElement()).parents("tr").next().children().first()[0]:n(this._getRange().startContainer).parents("tr").next().children().first()[0],this._getRange(),!0),i.preventDefault()),this._isIE8()&&this._getRange().parentElement&&(this._currentSelNode=this._getRange().parentElement()));n(i.target).parents("table").length==0&&n(this._getDocument()).find(".e-rte-tablebox").remove();this._setAutoHeight();this._trigger("keydown",{keyCode:i.keyCode})},_changeFontsize:function(n){var t=parseInt(this._getCommandValue("fontsize"))?parseInt(this._getCommandValue("fontsize")):2;(!n&&t>this.model.fontSize[0].value||n&&t<this.model.fontSize[this.model.fontSize.length-1].value)&&(this._onFontSize(n?t+1:t-1),this._updateFontOptionStatus())},_iframeKeypress:function(n){if(!this._keypressFlag)return n.preventDefault(),this._keypressFlag=!0,!1},_setTableSelection:function(n,t){if(this._isIE8()||n.childNodes.length==1&&n.childNodes[0].nodeName=="BR"||n.childNodes.length==0)this._setRange(n,this._getRange(),!0);else{var i=this._getDocument().createRange();i.selectNodeContents(n);this.selectRange(i)}t.preventDefault()},_setAutoHeightValue:function(t){if(t.nodeName=="#text"){t.parentNode.nodeName=="BODY"&&(n(t).wrap("<div><\/div>"),this.selectRange(this._getRange()));var i=n(t.parentNode).position().top+parseInt(n(t.parentNode).css("height"))}return t.nodeName=="DIV"&&(i=n(t).position().top+parseInt(n(t).css("height"))),i},_setAutoHeight:function(){this.model.autoHeight?this._autoHeight():t.isNullOrUndefined(this._getDocument())||n(this._getDocument().body).css("overflow","")},_autoHeight:function(){var i=this._toolBarItems?this._toolBarItems.outerHeight():0,r,u;t.isNullOrUndefined(this._getDocument().body)||(n(this._getDocument().body).css("overflow","hidden"),r=t.isNullOrUndefined(this._getDocument().body.lastChild)?0:this._getDocument().body.lastChild.clientHeight+this._getDocument().body.lastChild.offsetTop,parseInt(n(this._rteWapper[0]).css("min-height"))-i<=r?n(this._rteIframe[0]).css("height",r+30+"px"):n(this._rteIframe[0]).css("height",parseInt(n(this._rteWapper[0]).css("min-height"))-i+"px"),u=0,u=window.getSelection&&!t.isNullOrUndefined(this._getRange().startContainer)?this._setAutoHeightValue(this._getRange().startContainer):this._getDocument().selection&&!t.isNullOrUndefined(this._ieParents(this._getRange())[0])?this._setAutoHeightValue(this._ieParents(this._getRange())[0]):0,u>=this._rteIframe.height()-30&&(this._rteIframe[0].contentDocument?n(this._rteIframe[0]).css("height",this._rteIframe[0].contentDocument.documentElement.scrollHeight+20+"px"):n(this._rteIframe[0]).css("height",this._rteIframe[0].contentWindow.document.body.scrollHeight+20+"px")),this._rteWapper.outerHeight(this._rteEditor.outerHeight()+i+parseInt(this.model.showFooter?19:0)))},_ieSelRange:function(){this._isIE()?(this._selectionRange="",this._ieSelectionRange=this._getRange(),this._seleText=t.isNullOrUndefined(this._getWindow().document.selection)?this._selectionRange.toString():this._getWindow().document.selection.createRange().text):this._ieSelectionRange=this._ieSelection},_iframeSelectionChange:function(n){this._trigger("select",{event:n,model:this.model})},_ignorekeyArray:[13,32,8,46],_iframeKeyUp:function(t){n(this._imgDupDiv).remove();n(this._imgOrg).css("outline","");(this._getSelectedNode().parentNode.localName=="td"||this._getSelectedNode().parentNode.localName=="tr")&&this._toggleEditTable();n.inArray(t.which,this._ignorekeyArray)!=-1&&this._setBackupData();t.ctrlKey&&(t.keyCode==57||t.keyCode==189)&&this._zoomUp();(t.keyCode==37||t.keyCode==39||t.keyCode==38||t.keyCode==40||t.keyCode==36||t.keyCode==35||t.keyCode==9)&&(this._updateToolbarStatus(),this._updateFontOptionStatus(),this._updateFormat());this.model.showFooter&&(this.model.showWordCount||this.model.showCharCount)&&this._updateCount();var i=this._isIE8()?this._currentSelNode:this._getSelectedNode();if(this.model.showToolbar&&(this._isIE8()?i.nodeName.toLowerCase():i.nodeName.toLowerCase()!="a"?this.disableToolbarItem("removeLink"):this.enableToolbarItem("removeLink")),this._updateTagInfo(i),this._ieSelRange(),this._trigger("keyup",{keyCode:t.keyCode}),this._iframeSelectionChange(t),t.ctrlKey)switch(t.keyCode){case 88:case 86:this._onChange()}(t.keyCode==46||t.keyCode==8)&&(this._getDocument().body.innerHTML==""||this._getDocument().body.innerHTML=="<br>")&&this._emptyContent()},_iframeMouseUp:function(i){var r,u;this._tableResizeUp(i);this._zoomUp(i);this._resizeBtnInit();!t.isNullOrUndefined(this._imgDup)&&n(this._imgOrg).parents("body").length>0&&(n(this._imgOrg).css({width:n(this._imgDup).css("width"),height:n(this._imgDup).css("height")}),n(this._imgOrg).position({left:n(this._imgDup).position().left,top:n(this._imgDup).position().top}),n(this._imgDup).css("display","none"),this._resizeImgPos(),this._setAutoHeight());i.target.nodeName=="IMG"||n(i.target).hasClass("e-rte-imageboxmark")||(n(this._imgOrg).css("outline",""),n(this._imgDupDiv).remove(),this._off(n(this._getDocument()),"mousemove",this._imgBoxMouseMove));i.target.nodeName=="IMG"&&n(i.target).parents("body").length>0&&(r=this._isIE8()?this._getDocument().body.createTextRange():this._getDocument().createRange(),this._isIE8()?r.moveToElementText(i.target):r.selectNode(i.target),this.selectRange(r));this._currentSelNode=i.target;i.currentTarget&&i.target.nodeName&&i.target.nodeName.toLowerCase()=="html"&&this._getDocument()&&this._getDocument().body&&(this._isIE8()?!0:this._getRange().startOffset==this._getRange().endOffset)&&(this._isIE()&&i.currentTarget.createRange&&this._setRange(this._isIE8()?this._getDocument().body:this._getRange().startContainer,i.currentTarget.createRange(),!0),this._getDocument().body.focus());this._toggleEditTable();this._updateToolbarStatus();i.button?u=i.button==2:i.which&&(u=i.which==3);u||(this._updateFormat(),this._updateFontOptionStatus());this._ieSelRange();this._iframeSelectionChange(i);this._fontStyleDDL&&!t.isNullOrUndefined(this._fontStyleDDL.data("ejDropDownList"))&&this._fontStyleDDL.ejDropDownList("instance")._isPopupShown()&&n(this._fontStyleDDL.ejDropDownList("instance").popupList.ejScroller("instance").element).trigger("mouseup");this._fontSizeDDL&&!t.isNullOrUndefined(this._fontSizeDDL.data("ejDropDownList"))&&this._fontSizeDDL.ejDropDownList("instance")._isPopupShown()&&n(this._fontSizeDDL.ejDropDownList("instance").popupList.ejScroller("instance").element).trigger("mouseup")},_iframeMouseDown:function(i){if(t.browserInfo().name==="mozilla"&&(this._getDocument().designMode="off"),t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"&&this._focus(),this._contolAKeyfalg=!1,this._updateTagInfo(i.target),this._updateIndent(i.target),this.model.showToolbar&&(i.target.nodeName!="A"?this.disableToolbarItem("removeLink"):this.enableToolbarItem("removeLink")),i.target.nodeName=="VIDEO"&&this.model.allowEditing&&this._preventDefaultResize(),i.target.nodeName=="IMG"&&this.model.allowEditing&&(this._preventDefaultResize(),this._imageClick(i.target)),n(i.target).hasClass("e-rte-imageboxmark"))return this._resizeBtnInit(),this._commonBoxDown=!0,n(i.target).hasClass("e-rte-rigmed")&&(this._rigMidBox=!0),n(i.target).hasClass("e-rte-toplef")&&(this._topLefBox=!0),n(i.target).hasClass("e-rte-topmed")&&(this._topMidBox=!0),n(i.target).hasClass("e-rte-toprig")&&(this._topRigBox=!0),n(i.target).hasClass("e-rte-lefmed")&&(this._lefMidBox=!0),n(i.target).hasClass("e-rte-botlef")&&(this._botLefBox=!0),n(i.target).hasClass("e-rte-botmid")&&(this._botMidBox=!0),n(i.target).hasClass("e-rte-botrig")&&(this._botRigBox=!0),!1;n(i.target).hasClass("e-rteColumnResizer")&&(this._lastCol=n(i.target).hasClass("e-rtelastcol")?!0:!1,this._columnEle=n(this._curTable).find("tr:first td").eq(parseInt(n(i.target).attr("data-col")))[0],this._columnDown=!0,this._columnIndex=this._columnEle.cellIndex,n(this._getDocument().body).after("<span class='colresizerline'style='cursor:col-resize;position:absolute;width:0px;border-left: 1px dashed #787878;height:"+n(this._columnEle).closest("table").height()+"px;left:"+i.pageX+"px;top:"+n(this._columnEle).offset().top+"px;'><\/span>"));n(i.target).hasClass("e-rteRowResizer")&&(this._rowEle=n(this._curTable).find("tr").eq(parseInt(n(i.target).attr("data-row")))[0],this._rowDown=!0);n(i.target).hasClass("e-rte-tablebox")&&(this._boxDown=!0,this._boxElement=this._curTable);(n(i.target).hasClass("e-rte-tablebox")||n(i.target).hasClass("e-rteRowResizer")||n(i.target).hasClass("e-rteColumnResizer"))&&this._on(n(this._getDocument()),"mousemove",this._imgBoxMouseMove);(t.browserInfo().name=="msie"||t.browserInfo().name=="chrome")&&i.ctrlKey==!0&&i.which==1&&(i.target.tagName.toUpperCase()!="A"||t.isNullOrUndefined(n(i.target).attr("href"))||window.open(n(i.target).attr("href"),"_blank"));this.model.isResponsive&&!t.isNullOrUndefined(this._toolBarObj)&&this._toolBarObj._liTemplte.children("ul").length>0&&!n(this._toolBarObj._liTemplte).hasClass("e-inline")&&(this._toolBarObj.contstatus=!0,this._toolBarObj._liTemplte.addClass("e-display-none"),this._toolBarObj.contstatus=!1);this._iframeFocus();this._onChange()},_iframeFocusOut:function(n){n.data&&(n.data._proxy._onChange(),n.data._proxy._selectionRange=n.data._proxy._isIE8()?n.data._proxy._getRange():n.data._proxy._saveSelection(),n.data._proxy._seleText=t.isNullOrUndefined(n.data._proxy._getWindow().document.selection)?n.data._proxy._selectionRange.toString():n.data._proxy._isIE8()?n.data._proxy._getWindow().document.selection.createRange().text:n.data._proxy._getWindow().getSelection().toString())},_widthFocusOut:function(){var i,r,u;this._customTableDialog.ejDialog("isOpen")?(i=this._customTableDialog,r="#"+this._rteId+"_ddlAlignment",u="#"+this._rteId+"_txtWidth"):(i=this._eTblDialog,r="#"+this._rteId+"_eTblAlign",u="#"+this._rteId+"_eTblWidth");var t=i.find(u).val(),f=n(r).data("ejDropDownList"),e=t&&t!=""&&!isNaN(t)||t.slice(-2)=="px"||t.slice(-2)=="em"||t.slice(-2)=="pt"||t.slice(-1)=="%"?!0:!1;f.option("enabled",e)},_windowResize:function(){this._setAutoHeight();this._setIframeHeight();this._updateCount()},_tableResizeUp:function(){n(this._getDocument()).find("table.e-rte-table").length&&(this._columnDown||this._rowDown||this._boxDown)?(this._currentTable&&this._columnDown&&this._columnDownClick&&(this._lastCol?(this._currentTable.closest("table").find("tr:first td").each(function(){this.style.width==""&&n(this).width(parseInt(n(this).closest("table").width()/(n(this).siblings().length+1)))}),this._currentTable.eq(this._columnIndex).width(this.lasColIndexWid),this._currentTable.closest("table").css({width:""}),n(this._getDocument()).find(".e-rte-tablebox").css({left:this._currentTable.eq(this._columnIndex).offset().left+this._currentTable.eq(this._columnIndex).outerWidth()+"px"})):(this._currentTable.eq(this._columnIndex-1).width(this.nexColIndexWid),this._currentTable.eq(this._columnIndex).width(this._columnIndexWid))),this._removeResizeObject(),n(this._getDocument()).find(".colresizerline").remove(),n(this._getDocument()).find(".e-rte-tablebox").css("display","none"),this._restoreSelection(this._tableSelection),this._columnDown=!1,this._rowDown=!1,this._boxDown=!1,this._columnDownClick=!1):(n(this._getDocument()).find(".e-rte-tablebox").remove(),this._tableSelection=this._getRange())},_resizeBtnInit:function(){this._commonBoxDown=!1;this._rigMidBox=!1;this._topLefBox=!1;this._topMidBox=!1;this._topRigBox=!1;this._lefMidBox=!1;this._botLefBox=!1;this._botMidBox=!1;this._botRigBox=!1},_imgSpanBox:function(i){this._resizeBtnInit();this._imgOrg=i;this._imgDupDiv=t.buildTag("span#RTE_imgDupDiv");this._imgDup=t.buildTag("img#RTE_imgdivspan","",{display:"none",position:"absolute","background-size":"100% 100%",outline:"1px dashed #000",opacity:".64"},{}).appendTo(this._imgDupDiv);this._topLef=t.buildTag("span.e-rte-imageboxmark e-rte-toplef#RTE_toplef","",{cursor:"nwse-resize"},{}).appendTo(this._imgDupDiv);this._topMid=t.buildTag("span.e-rte-imageboxmark e-rte-topmed#RTE_topmed","",{cursor:"ns-resize"},{}).appendTo(this._imgDupDiv);this._topRig=t.buildTag("span.e-rte-imageboxmark e-rte-toprig#RTE_toprig","",{cursor:"nesw-resize"},{}).appendTo(this._imgDupDiv);this._leftMid=t.buildTag("span.e-rte-imageboxmark e-rte-lefmed#RTE_lefmed","",{cursor:"ew-resize"},{}).appendTo(this._imgDupDiv);this._rigMid=t.buildTag("span.e-rte-imageboxmark e-rte-rigmed#RTE_rigmed","",{cursor:"ew-resize"},{}).appendTo(this._imgDupDiv);this._botLef=t.buildTag("span.e-rte-imageboxmark e-rte-botlef#RTE_botlef","",{cursor:"nesw-resize"},{}).appendTo(this._imgDupDiv);this._botMid=t.buildTag("span.e-rte-imageboxmark e-rte-botmid#RTE_botmid","",{cursor:"ns-resize"},{}).appendTo(this._imgDupDiv);this._botRig=t.buildTag("span.e-rte-imageboxmark e-rte-botrig#RTE_botrig","",{cursor:"nwse-resize"},{}).appendTo(this._imgDupDiv);this._resizeImgPos();this._resizeImgDupPos();n(this._getDocument().body).after(this._imgDupDiv);n(i).css({outline:"1px dashed #5C5C5C"});this._on(n(this._getDocument()),"mousemove",this._imgBoxMouseMove)},_resizeImgPos:function(){this._ltPos=n(this._imgOrg).position();this._imgWid=n(this._imgOrg).css("width");this._imgHgt=n(this._imgOrg).css("height");this._imgDup.css({width:this._imgWid,height:this._imgHgt,left:this._ltPos.left+"px",top:this._ltPos.top+"px",border:n(this._imgOrg).css("border")});this._imgDup.attr({src:n(this._imgOrg).attr("src")});var i=parseInt(n(this._imgOrg).css("width"))-2+this._ltPos.left,u=(parseInt(n(this._imgOrg).css("width"))-2)/2+this._ltPos.left,r=parseInt(n(this._imgOrg).css("height"))-2+this._ltPos.top,f=(parseInt(n(this._imgOrg).css("height"))-2)/2+this._ltPos.top,t=parseInt(n(this._imgOrg).css("border-width")==""?0:n(this._imgOrg).css("border-width"));n(this._rigMid).css({left:i+2*t+"px",top:f+"px"});n(this._botLef).css({left:this._ltPos.left-3+"px",top:r+2*t+"px"});n(this._botRig).css({left:i+2*t+"px",top:r+2*t+"px"});n(this._botMid).css({left:u+"px",top:r+2*t+"px"});n(this._topRig).css({left:i+2*t+"px",top:this._ltPos.top-3+"px"});n(this._topLef).css({left:this._ltPos.left-3+"px",top:this._ltPos.top-3+"px"});n(this._topMid).css({left:u+"px",top:this._ltPos.top-3+"px"});n(this._leftMid).css({left:this._ltPos.left-3+"px",top:f+"px"})},_resizeImgDupPos:function(){this._ltDupPos=n(this._imgOrg).position();this._imgMidWid=n(this._imgOrg).css("width");this._imgDupHgt=n(this._imgOrg).css("height")},_imgBoxMouseMove:function(i){var s,h;if(this._commonBoxDown)this._rigMidBox?this._imgDupMouseMove(parseInt(i.pageX)-this._ltDupPos.left+"px",this._imgDupHgt,i):this._lefMidBox?(this._imgDupMouseMove(parseInt(this._imgMidWid)+this._ltDupPos.left-i.pageX+"px",this._imgDupHgt,i),n(this._imgDup).offset({left:i.pageX})):this._topMidBox?(this._imgDupMouseMove(this._img_wid,parseInt(this._imgDupHgt)+this._ltDupPos.top-i.pageY+"px",i),n(this._imgDup).offset({top:i.pageY})):this._botMidBox?this._imgDupMouseMove(this._img_wid,i.pageY-this._ltDupPos.top+"px",i):this._botRigBox?this._imgDupMouseMove(i.pageX-this._ltDupPos.left+"px",i.pageY-this._ltDupPos.top+"px",i):this._botLefBox?(this._imgDupMouseMove(parseInt(this._imgMidWid)+this._ltDupPos.left-i.pageX+"px",i.pageY-this._ltDupPos.top+"px",i),n(this._imgDup).offset({left:i.pageX})):this._topRigBox?(this._imgDupMouseMove(i.pageX-this._ltDupPos.left+"px",parseInt(this._imgDupHgt)+this._ltDupPos.top-i.pageY+"px",i),n(this._imgDup).offset({top:i.pageY})):this._topLefBox&&(this._imgDupMouseMove(parseInt(this._imgMidWid)+this._ltDupPos.left-i.pageX+"px",parseInt(this._imgDupHgt)+this._ltDupPos.top-i.pageY+"px",i),n(this._imgDup).offset({top:i.pageY,left:i.pageX}));else if(this._columnDown){this._columnDownClick=!0;this._currentTable=n(this._columnEle).closest("table").find("tr:first td");var o=this._columnEle.style.width==""?n(this._columnEle).width():parseInt(this._columnEle.style.width),r=n(this._columnEle).offset().left,f=r>i.pageX?o+(r-i.pageX):o-(i.pageX-r),y=n(this._currentTable).eq(this._columnIndex-1)[0].style.width==""?n(n(this._currentTable).eq(this._columnIndex-1)).width():parseInt(n(this._currentTable).eq(this._columnIndex-1)[0].style.width),c=o+y;!this._lastCol&&f>15&&c-f>15?(this.nexColIndexWid=c-f,this._columnIndexWid=f,n(this._getDocument()).find(".colresizerline").css({left:i.pageX+"px"})):this._lastCol&&r<i.pageX&&i.pageX-r>15&&(this.lasColIndexWid=i.pageX-r,n(this._getDocument()).find(".colresizerline").css({left:i.pageX+"px"}));this._removeMouseSelection(i);n(this._columnEle).closest("table").find("tr:last td:last span.e-rte-tablebox").css({display:"none"})}else if(this._rowDown)(t.browserInfo().name==="chrome"||t.browserInfo().name==="mozilla")&&this._getDocument().getSelection().removeAllRanges(),s=this._rowEle.offsetTop,h=this._rowEle.parentElement.parentElement.offsetTop,i.pageY-(s+h)>20&&(this._rowEle.style.height=i.pageY-(s+h)+"px"),this._removeMouseSelection(i),n(this._getDocument()).find(".e-rte-tablebox").css({left:n(this._rowEle).closest("table").width()+n(this._rowEle).closest("table").offset().left+"px",top:n(this._rowEle).closest("table").height()+n(this._rowEle).closest("table").offset().top+"px"});else if(this._boxDown){var u=n(this._boxElement),l=u.parent(),e=u.offset(),a=(i.pageX-e.left)/l.width()*100,v=(i.pageY-e.top)/l.height()*100;(t.browserInfo().name==="chrome"||t.browserInfo().name==="mozilla")&&this._getDocument().getSelection().removeAllRanges();i.pageX>0&&a>10&&v>0&&(u.attr({width:a+"%",height:v+"%"}),n(this._getDocument()).find(".e-rte-tablebox").css({left:u.width()+e.left+"px",top:u.height()+e.top+"px"}),u.find("tr:first td").each(function(){var t=n(this);t.width(parseInt(t.closest("table").width()/(t.siblings().length+1)))}));this._removeMouseSelection(i)}},_removeMouseSelection:function(n){return t.browserInfo().name==="mozilla"&&this._getDocument().getSelection().removeAllRanges(),n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),n.cancelBubble=!0,n.returnValue=!1,!1},_imgDupMouseMove:function(t,i,r){n(this._imgDup).css({display:"block",width:t,height:i});this._resizeImgDupPos();this._isIE8()&&this._removeMouseSelection(r)},_imageClick:function(t){n(this._getDocument().body).find("img").css("outline","");this._imgDupDiv&&this._imgDupDiv.remove();this._imgSpanBox(t)},_iframePaste:function(i){var r=this,o=t,u,e,f;if(i)try{u=t.isNullOrUndefined(window.clipboardData)?i.originalEvent.clipboardData.getData("text/plain"):window.clipboardData.getData("Text");u.length!=0?r.model.maxLength>=u.length+n.trim(r._getText()).length||i.preventDefault():(e=i.originalEvent.clipboardData.items[0].getAsFile(),f=new FileReader,f.onload=function(n){r.executeCommand("inserthtml","<img src="+n.target.result+" alt />")},f.readAsDataURL(e))}catch(s){}setTimeout(function(){r._setBackupData();r._onChange();r._setAutoHeight();r._updateCount();r._pasteTableResize();o.browserInfo().name=="webkit"?r._getWindow().focus():r._getWindow().document.body.focus()},0)},_pasteTableResize:function(){for(var r=n(this._getDocument()).find("table").not(".e-rte-table"),t,i=0;i<r.length;i++)t=n(r[i]),t.addClass("e-rte-table").removeAttr("style cellspacing").attr({border:1,cellspacing:1,width:t.width()}).css({border:"1px solid#5C5C5C","border-collapse":"separate","border-spacing":"2px"}),t.find("table tr,td").removeAttr("style width"),this._on(t,"mouseover",this._tableMouseOver)},_wireEvents:function(){var i=n(this._getDocument());if(this._getDocument()!=""&&(t.isNullOrUndefined(this._createTable)||this._on(this._createTable,"mouseenter","div.e-rte-tablecell",this._tableCellStart)._on(this._createTable,"mousemove","div.e-rte-tablecell",this._tableCellSelect)._on(this._createTable,"mouseleave","div.e-rte-table",this._tableCellLeave)._on(this._createTable,"mousedown","div.e-rte-tablecell",this._tableCellDown)._on(n(document),"click",this._documentClick),this._on(i,"focus",this._iframeFocus)._on(i,"keydown",this._iframeKeyDown)._on(i,"keypress",this._iframeKeypress)._on(i,"keyup",this._iframeKeyUp)._on(i,"mouseup",this._iframeMouseUp)._on(i,"mousedown",this._iframeMouseDown)._on(n(window),"resize",this._windowResize),!this._isIE8()&&this.model.pasteCleanupSettings&&(this.model.pasteCleanupSettings.cleanElements||this.model.pasteCleanupSettings.removeStyles||this.model.pasteCleanupSettings.cleanCSS||this.model.pasteCleanupSettings.listConversion)||this._on(i,"paste",this._iframePaste),!t.isNullOrUndefined(document.getElementById(this._id+"_Iframe"))))n(document.getElementById(this._id+"_Iframe").contentWindow).on("blur",{_proxy:this},this._iframeFocusOut)},_unwireEvents:function(){var i=n(this._getDocument());t.isNullOrUndefined(this._createTable)||this._off(this._createTable,"mousemove","div.e-rte-tablecell")._off(this._createTable,"mouseleave","div.e-rte-table")._off(this._createTable,"mousedown","div.e-rte-tablecell")._off(n(document),"click",this._documentClick);this._off(i,"focus")._off(i,"keydown")._off(i,"keyup")._off(i,"mouseup")._off(i,"mousedown")._off(n(window),"resize",this._windowResize);n(document.getElementById(this._id+"_Iframe").contentWindow).off("blur",this._iframeFocusOut);t.isNullOrUndefined(this._customTableDialog)||this._off(this._customTableDialog.find(".e-rte-txtWidth"),"focusout")},_footerEvents:function(n){this[n](this._htmlSource,"click",this._sourceCodeManager);this[n](this._clearFormat,"click",this._onClearFormat);this[n](this._clearAll,"click",this._clearAllManager)},_onChange:function(){var i=n.trim(this.value()),t;this.model.enableXHTML&&(this._updateXhtml(),this.model.enableHtmlEncode&&this.value(this._encode(this._removeNoSpaceChar(this.value()))));i!==this._removeNoSpaceChar(this.getHtml())&&(this._updateValue(),t={value:this.value(),text:this._getText(),htmlText:this.getHtml(),isInteraction:this._isInteraction},this._trigger("change",t),this._isInteraction=!0)},_disableIframeContent:function(){try{this._rteIframe.contents().find("body,[contenteditable='true']").attr("contenteditable",!1)}catch(n){}},disable:function(){this.model.enabled=!1;this._showHideContextMenu();this.element.attr("disabled","disabled");this._unwireEvents();this.model.showToolbar&&this._toolBarObj.disable();n(this._rteFooter).ejTooltip("option","enabled",!1);this._disableIframeContent();this._rteEditor.addClass("e-disable");this.model.showFooter&&(this._rteFooter.addClass("e-disable"),this._resize.removeClass("e-resizable"),this._footerEvents("_off"));this._disableResizeObj(!1)},enable:function(){this.model.enabled=!0;this._showHideContextMenu();this.element.removeAttr("disabled");this._wireEvents();this.model.showToolbar&&this._toolBarObj.enable();n(this._rteFooter).ejTooltip("option","enabled",!0);this._rteIframe.contents().find("body,[contenteditable='false']").attr("contenteditable",!0);this._rteEditor.removeClass("e-disable");this.model.showFooter&&(this._rteFooter.removeClass("e-disable"),this._resize.addClass("e-resizable"),this._footerEvents("_on"));this._disableResizeObj(!0)},disableToolbarItem:function(i){!t.isNullOrUndefined(i)&&(n(this._toolBarObj.target).find("#"+this._rteId+"_"+i).length!=0||n(this._toolBarObj._liTemplte).find("#"+this._rteId+"_"+i).length!=0)?this._toolBarObj.disableItemByID(this._rteId+"_"+i):this._toolBarObj.disableItemByID(i);i=="undo"&&n("#"+this._rteId+"_"+i).addClass("e-rteTooldisable")},enableToolbarItem:function(i){!t.isNullOrUndefined(i)&&(n(this._toolBarObj.target).find("#"+this._rteId+"_"+i).length!=0||n(this._toolBarObj._liTemplte).find("#"+this._rteId+"_"+i).length!=0)?this._toolBarObj.enableItemByID(this._rteId+"_"+i):this._toolBarObj.enableItemByID(i);i=="undo"&&n("#"+this._rteId+"_"+i).hasClass("e-rteTooldisable");n("#"+i).removeClass("e-rteTooldisable")},removeToolbarItem:function(n){t.isNullOrUndefined(n)||this._toolBarObj.removeItemByID(this._rteId+"_"+n);this._setIframeHeight()},refresh:function(){this._unwireEvents();this._setIFrames();this._setIframeHeight();this.model.enabled?this._wireEvents():this._disableIframeContent();this.model.enableRTL&&this._rteIframe.contents().find("body").css("direction","rtl");this._showHideContextMenu()},show:function(){this._rteWapper.show();this._setIFrames()},hide:function(){this._rteWapper.hide()},setColorPickerType:function(n){n=="palette"||n==="picker"?this._imgPicker.option("modelType",n):this._imgPicker.option("modelType","default")},pasteContent:function(n){this._pasteAPIFlag=!0;this._pasteHtml(n);this._onChange()},getDocument:function(){return this._getDocument()},getHtml:function(t){if(this.model.enableXHTML)return this.model.enableHtmlEncode?t==!1?this._removeNoSpaceChar(n.trim(this._decode(this.value()))):this._removeNoSpaceChar(n.trim(this.value())):this._removeNoSpaceChar(n.trim(this.value()));try{return this.model.enableHtmlEncode?t==!1?this._removeNoSpaceChar(n.trim(this._getDocument().body.innerHTML)):this._removeNoSpaceChar(this._encode(n.trim(this._getDocument().body.innerHTML))):this._removeNoSpaceChar(n.trim(this._getDocument().body.innerHTML))}catch(i){return""}},setHtml:function(t){this._getDocument().body.innerHTML="";this._getDocument().body.innerHTML=n.trim(t);this._onChange();var i=n(this._getDocument()).find("table");!this.model.enableRTL&&i.length>0&&this._on(i,"mouseover",this._tableMouseOver)},getText:function(){return this._getText()},executeCommand:function(i,r,u){if(this._isIE8()&&t.isNullOrUndefined(this._ieSelectionRange)?this._ieSelectionRange=this._getRange():this._isIE()&&i.toLowerCase()=="inserthtml"&&!this._isIE8()&&(this._getRange().startContainer.nodeName.toLowerCase()!="body"?this._currentSelNode=this._getRange().startContainer:this._ieLinkRange()),this._trigger("execute",{commandName:i}))return!1;var f="";if(t.browserInfo().name=="chrome"&&this._getWindow().getSelection().rangeCount==0&&this._restoreSelection(this._saveSelection()),i=="underline"){if(window.getSelection&&(f=n(this._getWindow().getSelection().anchorNode).parents("a"),f.length>0)){n(f).css("text-decoration",n(f).css("text-decoration")=="none"?"underline":"none");return}}else{if(i.toLowerCase()=="inserthtml"){this._isIE()||t.browserInfo().name=="mozilla"&&/class=(.*?)e-rte-table(.*?)>/ig.test(r)?this._pasteHtml(r,u):this._getDocument().execCommand(i,!1,r);return}i.toLowerCase()=="formatblock"&&this._isIE()&&r.charAt(0)!="<"&&r.charAt(r.length-1)!=">"&&(r="<"+r+">")}t.browserInfo().name=="msie"&&this._focus();this._isIE()&&i=="fontName"&&(r=r.substring(0,r.indexOf(",")));this._getDocument().execCommand(i,!1,r);this._onChange();i=="fontName"||i=="fontSize"||i=="indent"||i=="cut"||i=="copy"||i=="paste"||i=="undo"||i=="redo"||i=="outdent"||t.isNullOrUndefined(this._toolBarObj)||(this._toolBarObj.itemsContainer.find("li#"+this._rteId+"_"+i).hasClass("e-active")?this._toolBarObj.deselectItemByID(this._rteId+"_"+i):this._toolBarObj.selectItemByID(this._rteId+"_"+i));r!="listItem"&&this._setBackupData()},focus:function(){this._focus()},getCommandStatus:function(n){if(t.isNullOrUndefined(n)||n!="")return this._getCommandStatus(n)},getSelectedHtml:function(){return this._getSelectedHtmlString()},insertMenuOption:function(t){var f;if(t.newItem&&t.targetItem&&t.insertType&&t.menuType){var r=this._textMenuObj,u,i=t.newItem,e=t.spriteCssClass?[{text:t.newItem,id:i,spriteCssClass:t.spriteCssClass}]:[{text:t.newItem,id:i}];for(f=0;f<r.element.find("li a").length;f++)if(n(r.element.find("li a")[f]).text()==t.targetItem){u=n(r.element.find("li")[f]).attr("id");break}t.insertType=="insert"?r.insert(e,u?"#"+u:u):t.insertType=="insertAfter"?r.insertAfter(e,"#"+u):t.insertType=="insertBefore"&&r.insertBefore(e,"#"+u);t.menuType.text&&this._contextType.text.push(i);t.menuType.image&&this._contextType.image.push(i);t.menuType.hyperlink&&this._contextType.hyperlink.push(i);t.menuType.table&&(this._contextType.table.push(i),this._contextType.table_hyper.push(i))}},removeMenuOption:function(t){var i=this._textMenuObj;i.remove(["#"+t]);(index=n.inArray(t,this._contextType.text))!=-1&&(this._contextType.text=this._removeContextData(index,this._contextType.text));(index=n.inArray(t,this._contextType.image))!=-1&&(this._contextType.image=this._removeContextData(index,this._contextType.image));(index=n.inArray(t,this._contextType.hyperlink))!=-1&&(this._contextType.hyperlink=this._removeContextData(index,this._contextType.hyperlink));(index=n.inArray(t,this._contextType.table))!=-1&&(this._contextType.textablet=this._removeContextData(index,this._contextType.table));(index=n.inArray(t,this._contextType.table_hyper))!=-1&&(this._contextType.textablet=this._removeContextData(index,this._contextType.table_hyper))},_removeContextData:function(t,i){var r=[];return n(i).each(function(n,i){t!=n&&r.push(i)}),r},insertRow:function(i,r){if(this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length){var f=t.isNullOrUndefined(r)?this._getSelectedNode():r,u=n(f).closest("tr").clone(),e=n(f).closest("tr"),o=u.find("td").html("<br _moz_dirty=''/>");return i?u.insertBefore(e):u.insertAfter(e),u.find("td:first").focus(),this._setAutoHeight(),f}},insertColumn:function(i,r){var s,l,f;if(this.model.maxLength!=null&&this.model.maxLength>n.trim(this._getText()).length){var h=n(this._getSelectedNode()).closest("td"),u=t.isNullOrUndefined(r)?h.length>0?h[0]:this._getSelectedNode():r,e=n(u).clone(),c=n(u).closest("tr"),o;for(e[0].innerHTML="<br _moz_dirty=''/>",s=c.closest("table").find("tr"),l=c.find("td").index(u),f=0;f<s.length;f++)o=n(s[f]).find("td")[l],i?n(e.clone()).insertBefore(o):n(e.clone()).insertAfter(o);return u}},removeRow:function(i){var r=t.isNullOrUndefined(i)?this._getSelectedNode():i,f=this._getRange(),u=null,e,o=n(r).closest("table");o.find("tr").length==1?(u=n(r).parent("tr").closest("table").next()[0]||n(r).parent("tr").closest("table").prev()[0],n(r).parent("tr").closest("table").remove()):(u=n(r).parent("tr").prev("tr").length!=0?n(r).parent("tr").prev("tr").find("td:last")[0]:n(r).parent("tr").next("tr").find("td:first")[0],e=n(r).closest("tr").remove());t.isNullOrUndefined(u)||this._setRange(u,f);this._setAutoHeight()},selectRange:function(n){this._focus();var t;this._isIE8()?n.select():(t=this._getDocument().getSelection(),t.removeAllRanges(),t.addRange(n))},_encode:function(t){return n("<div/>").text(t).html()},_decode:function(n){return n.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g)},createRange:function(){return this._isIE8()?this.getDocument().body.createTextRange():this._getRange()},_setRange:function(n,i,r){this._isIE8()?t.isNullOrUndefined(n)||(i.collapse(!0),i.moveToElementText(n),i.moveStart("character",1),i.select()):(i.setStart(n,0),i.collapse(!0),t.browserInfo().name=="msie"&&t.browserInfo().version!="11.0"&&t.isNullOrUndefined(r)?t.isNullOrUndefined(r)&&(selection=this._getDocument().body.createTextRange(),selection.moveToElementText(n)):this.selectRange(i))},removeColumn:function(i){var e=n(this._getSelectedNode()).closest("td"),r=t.isNullOrUndefined(i)?e.length>0?e[0]:this._getSelectedNode():i,h=this._getRange(),o=n(r).closest("tr"),s=o.closest("table").find("tr"),c=o.find("td").index(r),f=t.isNullOrUndefined(r.nextElementSibling)?n(r.previousSibling)[0]:n(r.nextElementSibling)[0],u;if(t.isNullOrUndefined(f))n(r).parent("tr").parents("table").remove();else for(u=0;u<s.length;u++)n(n(s[u]).find("td")[c]).remove();t.isNullOrUndefined(f)||this._setRange(f,h)},removeTable:function(i){var r=t.isNullOrUndefined(i)?n(this._getSelectedNode()).closest("table"):i,u=n(r).parent().closest("table").length<1;this._currentSelNode=n(r).parent()[0];n(r).remove();u&&this._toggleEditTable();this._setAutoHeight();this._removeResizeObject();n(this._getDocument()).find(".e-rte-tablebox").remove()}});t.RTE.Locale=t.RTE.Locale||{};t.RTE.Locale["default"]=t.RTE.Locale["en-US"]={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Align text center",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",unorderedList:"Insert unordered list",orderedList:"Insert ordered list",indent:"Increase Indent",fileBrowser:"File Browser",outdent:"Decrease Indent",cut:"Cut",copy:"Copy",paste:"Paste",paragraph:"Paragraph",undo:"Undo",redo:"Redo",upperCase:"Upper Case",lowerCase:"Lower Case",clearAll:"Clear All",clearFormat:"Clear Format",createLink:"Insert/Edit Hyperlink",removeLink:"Remove Hyperlink",tableProperties:"Table Properties",insertTable:"Insert",deleteTables:"Delete",imageProperties:"Image Properties",openLink:"Open Hyperlink",image:"Insert image",video:"Insert video",editTable:"Edit Table Properties",embedVideo:"Paste your embed code below",viewHtml:"View HTML",fontName:"Select font family",fontSize:"Select font size",fontColor:"Select color",customFontColor:"More Colors...",customBGColor:"More Colors...",format:"Format",backgroundColor:"Background color",TransBGColor:"Transparent",style:"Styles",deleteAlert:"Are you sure you want to clear all the contents?",copyAlert:"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+C keyboard shortcut instead of copy operation.",pasteAlert:"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+V keyboard shortcut instead of paste operation.",cutAlert:"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X keyboard shortcut instead of cut operation.",videoError:"The text area can not be empty",imageWebUrl:"Web Address",imageAltText:"Alternate text",dimensions:"Dimensions",constrainProportions:"Constrain Proportions",linkWebUrl:"Web Address",imageLink:"Image as Link",imageBorder:"Image Border",imageStyle:"Style",linkText:"Text",linkTooltipLabel:"Tooltip",html5Support:"This tool icon only enabled in HTML5 supported browsers",linkOpenInNewWindow:"Open link in new window",tableColumns:"No.of Columns",tableRows:"No.of Rows",tableWidth:"Width",tableHeight:"Height",tableCellSpacing:"Cell spacing",tableCellPadding:"Cell padding",tableBorder:"Border",tableCaption:"Caption",tableAlignment:"Alignment",textAlign:"Text align",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",dialogApply:"Apply",dialogOk:"Ok",createTable:"Insert Table",addColumnLeft:"Insert Columns to the Left",addColumnRight:"Insert Columns to the Right",addRowAbove:"Insert Rows Above",addRowBelow:"Insert Rows Below",deleteRow:"Delete entire row",deleteColumn:"Delete entire column",deleteTable:"Delete Table",customTable:"Create custom table...",characters:"Characters",words:"Words",w:"W",c:"C",general:"General",advanced:"Advanced",table:"Table",row:"Row",column:"Column",cell:"Cell",solid:"Solid",dotted:"Dotted",dashed:"Dashed",doubled:"Double",maximize:"Maximize",resize:"Minimize",swatches:"Swatches",quotation:"Quotation",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",segoeui:"Segoe UI",arial:"Arial",couriernew:"Courier New",georgia:"Georgia",impact:"Impact",lucidaconsole:"Lucida Console",tahoma:"Tahoma",timesnewroman:"Times New Roman",trebuchetms:"Trebuchet MS",verdana:"Verdana",disc:"Disc",circle:"Circle",square:"Square",number:"Number",loweralpha:"Lower Alpha",upperalpha:"Upper Alpha",lowerroman:"Lower Roman",upperroman:"Upper Roman",none:"None",linkTooltip:"ctrl + click to follow link",charSpace:"Characters (with spaces)",charNoSpace:"Characters (no spaces)",wordCount:"Word Count",left:"Left",right:"Right",center:"Center",zoomIn:"Zoom In",zoomOut:"Zoom Out",print:"Print","import":"Import a Document",wordExport:"Export as Word Document",pdfExport:"Export as Pdf File",FindAndReplace:"Find and Replace",Find:"Find",MatchCase:"Match Case",WholeWord:"Whole Word",ReplaceWith:"Replace with",Replace:"Replace",ReplaceAll:"Replace All",FindErrorMsg:"Couldn't find specified word.",FindOf:" of ",ReplaceCount:" occurrences were replaced.",addtodictionary:"Add to Dictionary",ignoreall:"IgnoreAll"};t.RTE.ToolbarOverflowMode={Popup:"popup",Inline:"inline"}}(jQuery,Syncfusion),function(n,t){t.widget("ejButton","ej.Button",{element:null,model:null,validTags:["button","input"],_setFirst:!1,_rootCSS:"e-button",_requiresID:!0,defaults:{size:"normal",type:"submit",height:"",width:"",enabled:!0,htmlAttributes:{},text:null,contentType:"textonly",imagePosition:"imageleft",showRoundedCorner:!1,cssClass:"",prefixIcon:null,suffixIcon:null,enableRTL:!1,repeatButton:!1,timeInterval:"150",create:null,click:null,destroy:null},dataTypes:{size:"enum",enabled:"boolean",type:"enum",showRoundedCorner:"boolean",text:"string",contentType:"enum",imagePosition:"enum",prefixIcon:"string",suffixIcon:"string",cssClass:"string",repeatButton:"boolean",enableRTL:"boolean",timeInterval:"string",htmlAttributes:"data"},disable:function(){this.element.addClass("e-disable").attr("aria-disabled",!0);this.model.enabled=!1},enable:function(){this.element.removeClass("e-disable").attr("aria-disabled",!1);this.model.enabled=!0},_init:function(){this._cloneElement=this.element.clone();this._initialize();this._render();this._controlStatus(this.model.enabled);this._wireEvents(this.model.repeatButton);this._addAttr(this.model.htmlAttributes)},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.element.addClass(n):i.element.attr(t,n);t=="disabled"&&n=="disabled"&&i.disable()})},_destroy:function(){this._off(this.element,"blur",this._btnBlur);this.element.removeClass(this.model.cssClass+"e-ntouch e-btn e-txt e-select e-disable e-corner e-widget").removeAttr("role aria-describedby aria-disabled");!this._cloneElement.attr("type")&&this.element.attr("type")&&this.element.removeAttr("type");this.element.removeClass("e-btn-"+this.model.size);this.model.contentType&&this.model.contentType!="textonly"?this.element.append(this._cloneElement.text())&&this.imgtxtwrap[0].remove():""},_setModel:function(n){for(var t in n)switch(t){case"size":this._setSize(n[t]);break;case"height":this._setHeight(n[t]);break;case"width":this._setWidth(n[t]);break;case"contentType":this._setContentType(n[t]);break;case"imagePosition":this._setImagePosition(n[t]);break;case"text":this._setText(n[t]);break;case"prefixIcon":this.element.is("input")||this._setMajorIcon(n[t]);break;case"suffixIcon":this.element.is("input")||this._setMinorIcon(n[t]);break;case"enabled":this._controlStatus(n[t]);break;case"showRoundedCorner":this._roundedCorner(n[t]);break;case"cssClass":this._setSkin(n[t]);break;case"enableRTL":this._setRTL(n[t]);break;case"timeInterval":this.model.timeInterval=n[t];break;case"htmlAttributes":this._addAttr(n[t])}},_setSize:function(n){this.element.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal");this.element.addClass("e-btn-"+n)},_setType:function(n){this.element.prop({type:n})},_setHeight:function(n){this.element.css("height",n)},_setWidth:function(n){this.element.css("width",n)},_setText:function(n){this.buttonType=="inputButton"?this.element.val(n):this.model.contentType==t.ContentType.TextOnly?this.element.html(n):this.textspan.html(n);this.model.text=n},_setMajorIcon:function(n){this.majorimgtag.removeClass(this.model.prefixIcon);this.majorimgtag.addClass(n);this.model.prefixIcon=n},_setMinorIcon:function(n){this.minorimgtag.removeClass(this.model.suffixIcon);this.minorimgtag.addClass(n);this.model.suffixIcon=n},_setContentType:function(n){n!=this.model.contentType&&(this.element.empty(),this.model.contentType=n,this.element.is("input")||this._renderButtonNormal())},_setImagePosition:function(n){this.model.contentType==t.ContentType.TextAndImage&&n!=this.model.imagePosition&&(this.element.empty(),this.model.imagePosition=n,this.element.is("input")||this._renderButtonNormal())},_setRTL:function(n){n?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_controlStatus:function(n){n?this.enable():this.disable()},_setSkin:function(n){this.model.cssClass!=n&&(this.element.removeClass(this.model.cssClass),this.element.addClass(n))},_initialize:function(){t.isTouchDevice()||this.element.addClass("e-ntouch");this.element.is("input")?this.buttonType="inputButton":this.element.is("a")||this.element.is("button")?this.buttonType="tagButton":this.element.removeClass("e-button");this.element.attr("type")?this.model.type=this.element.attr("type"):this._setType(this.model.type);this._timeout=null},_render:function(){this._setSize(this.model.size);this._setHeight(this.model.height);this._setWidth(this.model.width);this._setRTL(this.model.enableRTL);this.element.addClass(this.model.cssClass+" e-btn e-select e-widget").attr("role","button");this.buttonType=="inputButton"?(this.element.addClass("e-txt"),this.model.text!=null&&this.model.text!=""?this.element.val(this.model.text):this.model.text=this.element.val()):this._renderButtonNormal();this._roundedCorner(this.model.showRoundedCorner);this.element[0].id&&this.element.attr("aria-describedby",this.element[0].id)},_renderButtonNormal:function(){if((this.model.text==null||this.model.text=="")&&(this.model.text=this.element.html()),this.element.empty(),this.textspan=t.buildTag("span.e-btntxt",this.model.text),this.model.contentType.indexOf("image")>-1&&(this.majorimgtag=t.buildTag("span").addClass(this.model.prefixIcon),this.minorimgtag=t.buildTag("span").addClass(this.model.suffixIcon),this.imgtxtwrap=t.buildTag("span").addClass("e-btn-span")),this.model.contentType==t.ContentType.TextAndImage){switch(this.model.imagePosition){case t.ImagePosition.ImageRight:this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.majorimgtag,this.textspan);break;case t.ImagePosition.ImageBottom:this.majorimgtag.attr("style","display:inherit");this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageTop:this.majorimgtag.attr("style","display:inherit");this.imgtxtwrap.append(this.majorimgtag,this.textspan)}this.element.append(this.imgtxtwrap)}else this.model.contentType==t.ContentType.ImageTextImage?(this.imgtxtwrap.append(this.majorimgtag,this.textspan,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageBoth?(this.imgtxtwrap.append(this.majorimgtag,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageOnly?(this.imgtxtwrap.append(this.majorimgtag),this.element.append(this.imgtxtwrap)):(this.element.addClass("e-txt"),this.element.html(this.model.text))},_roundedCorner:function(n){n==!0?this.element.addClass("e-corner"):this.element.removeClass("e-corner")},_wireEvents:function(t){t&&(this._on(this.element,"mousedown",this._btnRepatMouseClickEvent),this._on(n(document),"mouseup",this._mouseUpClick),this._on(this.element,"keyup",this._btnRepatKeyUpEvent),this._on(n(document),"keypress",this._btnRepatKeyDownEvent));this._on(this.element,"click",this._btnMouseClickEvent);this._on(this.element,"blur",this._btnBlur)},_btnBlur:function(){this.element.removeClass("e-animate")},_btnMouseClickEvent:function(n){var t=this,i;if(this.element.addClass("e-animate"),!t.model.enabled)return!1;t.element.hasClass("e-disable")||(i={target:n.currentTarget,e:n,status:t.model.enabled},t._trigger("click",i))},_btnRepatMouseClickEvent:function(n){var t=this,i;if(!t.model.enabled)return!1;t.element.hasClass("e-disable")||(i={status:t.model.enabled},(n.button==0||n.which==1)&&(t._timeout=setInterval(function(){t._trigger("click",{target:n.currentTarget,status:t.model.enabled})},this.model.timeInterval)))},_mouseUpClick:function(){clearTimeout(this._timeout)},_btnRepatKeyDownEvent:function(n){var t=this,i;t.element.hasClass("e-disable")||(i={status:t.model.enabled},(n.keyCode==32||n.keyCode==13)&&t._trigger("click",i))},_btnRepatKeyUpEvent:function(n){(n.keyCode==32||n.keyCode==13)&&clearTimeout(this._timeout)}});t.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"};t.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"};t.ButtonSize={Normal:"normal",Mini:"mini",Small:"small",Medium:"medium",Large:"large"};t.ButtonType={Button:"button",Reset:"reset",Submit:"submit"}}(jQuery,Syncfusion),function(n,t){t.widget("ejToggleButton","ej.ToggleButton",{element:null,model:null,validTags:["input"],_addToPersist:["toggleState"],_setFirst:!1,_rootCSS:"e-togglebutton",defaults:{size:"normal",type:"button",width:"",height:"",enabled:!0,toggleState:!1,defaultText:null,preventToggle:!1,activeText:null,contentType:"textonly",htmlAttributes:{},imagePosition:"imageleft",showRoundedCorner:!1,enablePersistence:!1,cssClass:"",defaultPrefixIcon:null,defaultSuffixIcon:null,activePrefixIcon:null,activeSuffixIcon:null,enableRTL:!1,create:null,click:null,change:null,destroy:null},dataTypes:{size:"string",type:"enum",enabled:"boolean",showRoundedCorner:"boolean",preventToggle:"boolean",defaultText:"string",activeText:"string",contentType:"enum",imagePosition:"enum",defaultPrefixIcon:"string",defaultSuffixIcon:"string",activePrefixIcon:"string",activeSuffixIcon:"string",cssClass:"string",enableRTL:"boolean",enablePersistence:"boolean",htmlAttributes:"data"},observables:["toggleState"],toggleState:t.util.valueFunction("toggleState"),disable:function(){this.buttontag.addClass("e-disable").attr({"aria-disabled":!0});this.model.enabled=!1},enable:function(){this.buttontag.hasClass("e-disable")&&(this.buttontag.removeClass("e-disable").attr({"aria-disabled":!1}),this.model.enabled=!0)},_init:function(){this._cloneElement=this.element.clone();this._initialize();this._controlStatus(this.model.enabled);this._wireEvents();this.initialRender=!1},_destroy:function(){this._off(this.buttontag,"blur",this._tglebtnblur);this.element.unwrap();this.element.removeClass("e-chkbx-hidden e-tbtn");!this._cloneElement.attr("name")&&this.element.attr("name")&&this.element.removeAttr("name");this.labelFinder.empty();this.labelFinder.text(this.model.defaultText);this.buttontag.remove();this.element.unwrap();this.defaultLabel.insertAfter(this.element)},_setModel:function(n){for(var i in n)switch(i){case"size":this._setSize(n[i]);break;case"type":this._settype(n[i]);break;case"height":this._setHeight(n[i]);break;case"width":this._setWidth(n[i]);break;case"contentType":this._setContentType(n[i]);break;case"imagePosition":this._setImagePosition(n[i]);break;case"defaultText":this._setDefaultText(n[i]);break;case"activeText":this._setActiveText(n[i]);break;case"defaultPrefixIcon":this._setDefaultMajorIcon(n[i]);break;case"defaultSuffixIcon":this._setDefaultMinorIcon(n[i]);break;case"activePrefixIcon":this._setActiveMajorIcon(n[i]);break;case"activeSuffixIcon":this._setActiveMinorIcon(n[i]);break;case"enabled":this._controlStatus(n[i]);break;case"toggleState":this._tglevaluestatus(t.util.getVal(n[i]));break;case"showRoundedCorner":this._roundedCorner(n[i]);break;case"cssClass":this._setSkin(n[i]);break;case"enableRTL":this._setRTL(n[i]);break;case"htmlAttributes":this._addAttr(n[i])}},_setSize:function(n){this.buttontag.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal");this.buttontag.addClass("e-btn-"+n)},_settype:function(n){this.model.type=n},_setHeight:function(n){this.buttontag.css("height",n)},_setWidth:function(n){this.buttontag.css("width",n)},_setDefaultText:function(n){this.toggleState()||(this.model.contentType==t.ContentType.TextOnly?this.buttontag.html(n):this.defaulttxtspan.html(n))},_setActiveText:function(n){this.toggleState()&&(this.model.contentType==t.ContentType.TextOnly?this.buttontag.html(n):this.defaulttxtspan.html(n))},_setDefaultMajorIcon:function(n){this.defMainIcon.removeClass(this.model.defaultPrefixIcon);this.defMainIcon.addClass(n)},_setDefaultMinorIcon:function(n){this.defMiniIcon.removeClass(this.model.defaultSuffixIcon);this.defMiniIcon.addClass(n)},_setActiveMajorIcon:function(n){this.toggleState()&&(this.defMainIcon.removeClass(this.model.activePrefixIcon),this.defMainIcon.addClass(n))},_setActiveMinorIcon:function(n){this.toggleState()&&(this.defMiniIcon.removeClass(this.model.activeSuffixIcon),this.defMiniIcon.addClass(n))},_setContentType:function(n){n!=this.model.contentType&&(this.buttontag.empty(),this.model.contentType=n,this._renderButtonContent())},_setImagePosition:function(n){this.model.contentType==t.ContentType.TextAndImage&&n!=this.model.imagePosition&&(this.buttontag.empty(),this.model.imagePosition=n,this._renderButtonContent())},_setRTL:function(n){n?this.buttontag.addClass("e-rtl"):this.buttontag.removeClass("e-rtl")},_controlStatus:function(n){n?this.enable():this.disable()},_setSkin:function(n){this.model.cssClass!=n&&(this.buttontag.removeClass(this.model.cssClass),this.buttontag.addClass(n))},_initialize:function(){this.element.is('[type = "checkbox"]')?this._render():this.element.removeClass("e-togglebutton")},_render:function(){this.initialRender=!0;var i,r;this.element.addClass("e-chkbx-hidden e-tbtn");this.element.attr("name")||this.element.attr("name",this.element[0].id);i=this.element.parents().last();r="label[for='"+this.element[0].id+"']";this.labelFinder=i.find(r);this.defaultLabel=i.find(r).clone();this.labelFinder.length||(this.labelFinder=t.buildTag("label","Button",{},{"for":this.element[0].id}),this.labelFinder.insertAfter(this.element));(this.model.defaultText==null||this.model.defaultText=="")&&(this.model.defaultText=this.labelFinder.text());this.labelFinder.empty();this.wrapper=n('<span id="'+this.element[0].id+'-wrapper" class="e-tbtn-wrap e-widget"><\/span>');this.labelFinder.append(this.element);this.buttontag=t.buildTag("button.e-togglebutton e-btn e-tbtn "+this.model.cssClass+" e-select","",{},{role:"button",tabindex:0,type:this.model.type,"data-role":"none"});t.isTouchDevice()||this.buttontag.addClass("e-ntouch");n(this.labelFinder).wrap(this.wrapper);this.buttontag.insertAfter(this.labelFinder);t.util.isNullOrUndefined(this.model.activeText)&&(this.model.activeText=this.model.defaultText);t.util.isNullOrUndefined(this.model.activePrefixIcon)&&(this.model.activePrefixIcon=this.model.defaultPrefixIcon);t.util.isNullOrUndefined(this.model.activeSuffixIcon)&&(this.model.activeSuffixIcon=this.model.defaultSuffixIcon);this._setSize(this.model.size);this._setHeight(this.model.height);this._setWidth(this.model.width);this._setRTL(this.model.enableRTL);this._renderButtonContent();this.toggleState()||t.isNullOrUndefined(this.element.attr("checked"))||this.toggleState(!0);this._tglevaluestatus(this.toggleState());this._roundedCorner(this.model.showRoundedCorner);this._addAttr(this.model.htmlAttributes)},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.wrapper.addClass(n):t=="disabled"&&n=="disabled"?i.disable():t=="checked"&&n=="checked"?i._tglevaluestatus(this.toggleState()):i.wrapper.attr(t,n)})},_renderButtonContent:function(){if(this.imgtxtwrap=t.buildTag("span").addClass("e-btn-span"),this.defaulttxtspan=t.buildTag("span.e-btntxt#"+this.element[0].id+"textstatic",this.toggleState()?this.model.activeText:this.model.defaultText),this.model.contentType.indexOf("image")>-1&&(this.defMainIcon=t.buildTag("span #"+this.element[0].id+"mainiconstatic"),this.defMiniIcon=t.buildTag("span #"+this.element[0].id+"miniconstatic"),this.toggleState()?this.defMainIcon.addClass(this.model.activePrefixIcon):this.defMainIcon.addClass(this.model.defaultPrefixIcon),this.toggleState()?this.defMiniIcon.addClass(this.model.activeSuffixIcon):this.defMiniIcon.addClass(this.model.defaultSuffixIcon)),this.model.contentType==t.ContentType.TextAndImage){switch(this.model.imagePosition){case t.ImagePosition.ImageRight:this.imgtxtwrap.append(this.defaulttxtspan,this.defMainIcon);break;case t.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.defMainIcon,this.defaulttxtspan);break;case t.ImagePosition.ImageBottom:this.defMainIcon.attr("style","display:inherit");this.imgtxtwrap.append(this.defaulttxtspan,this.defMainIcon);break;case t.ImagePosition.ImageTop:this.defMainIcon.attr("style","display:inherit");this.imgtxtwrap.append(this.defMainIcon,this.defaulttxtspan)}this.buttontag.append(this.imgtxtwrap)}else this.model.contentType==t.ContentType.ImageTextImage?(this.imgtxtwrap.append(this.defMainIcon,this.defaulttxtspan,this.defMiniIcon),this.buttontag.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageOnly?(this.imgtxtwrap.append(this.defMainIcon),this.buttontag.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageBoth?(this.imgtxtwrap.append(this.defMainIcon,this.defMiniIcon),this.buttontag.append(this.imgtxtwrap)):(this.buttontag.addClass("e-txt"),this.buttontag.text(this.model.defaultText))},_tglevaluestatus:function(n){n?(this._toggleButtonStatus(n),this.element.attr("checked","checked")):(this._toggleButtonStatus(n),this.element.prop("checked",!1))},_roundedCorner:function(n){n==!0?this.buttontag.addClass("e-corner"):this.buttontag.removeClass("e-corner")},_wireEvents:function(){this._on(this.buttontag,"click",this._tglebtnclicked);this._on(this.buttontag,"blur",this._tglebtnblur)},_tglebtnblur:function(){this.buttontag.removeClass("e-animate")},_tglebtnclicked:function(i){if(this.model.preventToggle&&!this.model.enabled)return!1;this.model.preventToggle||this.buttontag.hasClass("e-disable")||(this.toggleState(this.toggleState()?!1:!0),t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"?this._tglevaluestatus(this.toggleState()):this._toggleButtonStatus(this.toggleState()),n(this.element).prop("checked",this.toggleState()),i.preventDefault(),this.buttontag.addClass("e-animate"),this._trigger("click",{isChecked:this.toggleState(),status:this.model.enabled}))},_toggleButtonStatus:function(n){n?(this.model.contentType==t.ContentType.TextOnly?this.buttontag.html(this.model.activeText):(this.defaulttxtspan.html(this.model.activeText),this.defMainIcon.removeClass(this.model.defaultPrefixIcon).addClass(this.model.activePrefixIcon),this.defMiniIcon.removeClass(this.model.defaultSuffixIcon).addClass(this.model.activeSuffixIcon)),this.buttontag.addClass("e-active").attr("aria-pressed",!0)):(this.model.contentType==t.ContentType.TextOnly?this.buttontag.html(this.model.defaultText):(this.defaulttxtspan.html(this.model.defaultText),this.defMainIcon.removeClass(this.model.activePrefixIcon).addClass(this.model.defaultPrefixIcon),this.defMiniIcon.removeClass(this.model.activeSuffixIcon).addClass(this.model.defaultSuffixIcon)),this.buttontag.removeClass("e-active").attr("aria-pressed",!1));this.toggleState(n);this.initialRender||this._trigger("change",{isChecked:this.toggleState()})}});t.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"};t.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"};t.ButtonSize={Normal:"normal",Mini:"mini",Small:"small",Medium:"medium",Large:"large"};t.ButtonType={Button:"button",Reset:"reset",Submit:"submit"}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejColorPicker","ej.ColorPicker",{_rootCSS:"e-colorpicker",element:null,model:null,validTags:["input","div"],_addToPersist:["value","opacityValue"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{enableOpacity:!0,opacityValue:100,columns:10,palette:"basicpalette",htmlAttributes:{},buttonMode:"split",custom:[],presetType:"basic",modelType:"picker",locale:"en-US",showPreview:!0,showTooltip:!1,showClearButton:!1,showSwitcher:!0,value:null,displayInline:!1,buttonText:{apply:"Apply",cancel:"Cancel",swatches:"Swatches"},tooltipText:{switcher:"Switcher",addButton:"Add Color",basic:"Basic",monoChrome:"Mono Chrome",flatColors:"Flat Colors",seaWolf:"Sea Wolf",webColors:"Web Colors",sandy:"Sandy",pinkShades:"Pink Shades",misty:"Misty",citrus:"Citrus",vintage:"Vintage",moonLight:"Moon Light",candyCrush:"Candy Crush",currentColor:"Current Color",selectedColor:"Selected Color"},showApplyCancel:!0,showRecentColors:!1,toolIcon:null,cssClass:"",enabled:!0,change:null,select:null,open:null,close:null,create:null,destroy:null},dataTypes:{modelType:"enum",palette:"enum",presetType:"enum",cssClass:"string",displayInline:"boolean",locale:"string",showSwitcher:"boolean",showRecentColors:"boolean",enabled:"boolean",showPreview:"boolean",enableOpacity:"boolean",buttonText:"data",custom:"array",htmlAttributs:"data"},observables:["value","opacityValue"],value:t.util.valueFunction("value"),opacityValue:t.util.valueFunction("opacityValue"),_setModel:function(n){for(var i in n)switch(i){case"enableOpacity":this.model.enableOpacity=n[i];this._previewSlider(this.model.enableOpacity);this._valueOperation();break;case"opacityValue":if(this.model.enableOpacity){this._tempOpacity=parseFloat(t.util.getVal(n[i]));this._opacity.option("value",this._tempOpacity);this._switch||this._changeOpacity();this._updateValue();this.opacityValue(this._tempOpacity);typeof n[i]=="function"?n[i](this.opacityValue()):n[i]=this.opacityValue();break}else return!1;case"custom":this.model.custom=n[i];this._reInitialize();break;case"palette":this.model.palette=n[i];this._reInitialize();break;case"columns":this.model.columns=parseFloat(n[i]);this._reInitialize();n[i]=this.model.columns;break;case"presetType":if(this.model.presetType=n[i],t.isNullOrUndefined(r[this.model.presetType]))return!1;this._reInitialize();break;case"buttonMode":this._unBindIconClick();this._buttonElement=t.ColorPicker.ButtonMode.Split==n[i]?this.dropdownbutton:this.wrapper;t.ColorPicker.ButtonMode.Split==n[i]?this.wrapper.addClass("e-split"):this.wrapper.removeClass("e-split");this._bindIconClick();break;case"showTooltip":this._colorSlider.option("showTooltip",n[i]);this._opacity.option("showTooltip",n[i]);break;case"value":this._setValue(t.util.getVal(n[i]),!0);typeof n[i]=="function"?n[i](this.value()):n[i]=this.value();break;case"modelType":this.model.modelType=n[i];this._reInitialize();break;case"showSwitcher":this.model.showSwitcher=n[i];this._showSwitcher();break;case"tooltipText":this._toolTipText(n[i]);break;case"locale":this.model.locale=n[i];this._localize(n[i]);break;case"showPreview":this.model.showPreview=n[i];this._previewPane(this.model.showPreview);break;case"buttonText":this._buttonText(n[i]);break;case"displayInline":this._setDisplayInline(n[i]);break;case"cssClass":this._setSkin(n[i]);this.model.cssClass=n[i];break;case"enabled":this._enabled(n[i]);break;case"showRecentColors":this.model.showRecentColors=n[i];this._previewColor(this.model.showRecentColors);break;case"htmlAttributes":this._addAttr(n[i]);break;case"showClearButton":this._showClearIcon(n[i]);break;case"showApplyCancel":this.model.showApplyCancel=n[i];this._buttonContainer()}},_setSkin:function(n){this.wrapper?this.wrapper.removeClass(this.model.cssClass).addClass(n):this.element.removeClass(this.model.cssClass).addClass(n)},_showSwitcher:function(){this.model.showSwitcher?(this._changeTag.removeClass("e-hide"),this.model.modelType=="picker"?this._switcher.addClass("e-paletteModel").removeClass("e-pickerModel"):this._switcher.addClass("e-pickerModel").removeClass("e-paletteModel")):this._changeTag.addClass("e-hide")},_pickerType:function(){this._modelType="picker";this.PaletteWrapper.removeAttr("style");this.PaletteWrapper.addClass("e-hide");this._gradient.removeClass("e-hide");this._gradient.fadeIn(200);this._presetTag.parents(".e-split.e-widget").addClass("e-hide");this._switcher.removeAttr("class");this._switcher.addClass("e-color-image e-paletteModel");this._switch=!0;this._rgbValue();this._hueGradient();this._updateUI();this._alphaGradient(this.RGBToHEX(this.rgb));this._hsva.ejButton("enable");this._switchEvents();this._unSwitchEvents();this._hideUnBindEvents();this.isPopupOpen&&this._showBindEvents();this.model.modelType=="default"?this._changeTag.removeClass("e-hide"):this._changeTag.addClass("e-hide");this.popupList.prepend(this._gradient);this._showSwitcher()},_paletteType:function(){this._gradient.removeAttr("style");this._presetTag.parents(".e-split.e-widget").removeClass("e-hide");this.PaletteWrapper.removeClass("e-hide");this.PaletteWrapper.fadeIn(200);this._switch=!1;this._disableHSVButton();this._cellSelect();this._switchEvents();this._unSwitchEvents();this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType);this.popupList.prepend(this.PaletteWrapper);this._showSwitcher()},_reInitialize:function(){this._destroyPalette(!1)},_destroyPalette:function(n){this.PaletteWrapper.remove();(n||this._columns!=this.model.columns&&this.model.palette!=="custompalette")&&(this.PaletteWrapper=this._presetType(this._presetsId));this._temp!==this.model.presetType&&(this.PaletteWrapper=this._layoutType(this.model.palette));this.model.modelType=="palette"&&(this._modelType="palette",this.PaletteWrapper=this._layoutType(this.model.palette),this._hideUnBindEvents(),this.isPopupOpen&&this._showBindEvents(),this._gradient.addClass("e-hide"),this._paletteType(),n||this.model.palette=="custompalette"?"":this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType));this.model.modelType=="picker"&&(this._pickerType(),this.model.displayInline&&!this.element.is("input")&&this._footer.addClass("e-hide"));this._temp=this.model.presetType;this._columns=this.model.columns;this._modelType=="picker"?this._presetTag.parents(".e-split.e-widget").addClass("e-hide"):this._presetTag.parents(".e-split.e-widget").removeClass("e-hide");this.refresh()},_previewColor:function(n){n?(this._swatchesArea.fadeIn(200),this._bindRecentEvent()):(this._swatchesArea.fadeOut(200),this._unBindRecentEvent())},_buttonText:function(i){n.extend(this.model.buttonText,i);t.isNullOrUndefined(this._buttonTag)||this._buttonTag.html(this.model.buttonText.apply);t.isNullOrUndefined(this._cancelTag)||this._cancelTag.html(this.model.buttonText.cancel);this._spnTag.html(this.model.buttonText.swatches)},_toolTipText:function(t){n.extend(this.model.tooltipText,t);this._addTitleText()},_previewPane:function(n){n?this._previewTag.removeClass("e-hide"):this._previewTag.addClass("e-hide")},_previewSlider:function(n){n?this._opacity.enable():this._opacity.disable()},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_localize:function(){this._localizedLabels=this._getLocalizedLabels();(this._options.locale!="en-US"||t.isNullOrUndefined(this._options.buttonText))&&t.isNullOrUndefined(this._options.tooltipText)?t.isNullOrUndefined(this._localizedLabels)||(t.isNullOrUndefined(this._localizedLabels.buttonText)||this._buttonText(this._localizedLabels.buttonText),t.isNullOrUndefined(this._localizedLabels.tooltipText)||this._toolTipText(this._localizedLabels.tooltipText)):(t.isNullOrUndefined(this._options.buttonText)||this._buttonText(this._options.buttonText),t.isNullOrUndefined(this._options.tooltipText)||this._toolTipText(this._options.tooltipText))},_destroy:function(){this.model.displayInline&&n(window).off("resize",n.proxy(this._OnWindowResize,this));this.isPopupOpen&&this.hide();this.popupContainer.remove();this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove(),this._presetContainer.parent(".e-menu-wrap").remove());this.element.removeClass("e-colorpicker e-input e-widget").removeAttr("style name").val(this.element.attr("value"))},_init:function(i){this._options=i;this._browser=t.browserInfo();this._isFocused=!1;this.isPopupOpen=!1;this._dataBind=!1;this._modelType="picker";this._id&&n("#"+this._id+"_popup").remove();"#"+this._id+"_Presets"&&n("#"+this._id+"_Presets").parent(".e-menu-wrap").remove();this.model.palette==="basicpalette"?this._presetsId="e-presets30":"";this._tempValue=t.isNullOrUndefined(this.value())&&this.element[0].value!==""?this.element[0].value:this.value();this._previousValue=this._previousColor=this._tempValue;this._renderControl();this._tempOpacity=this.opacityValue();this.model.palette==="custompalette"&&this._presetTag.parents(".e-split.e-widget").addClass("e-hide");this.popupContainer.find("button.e-presets").ejSplitButton({targetID:this._presetContainer.attr("id")});this._tempValue&&(this._setValue(this._tempValue),this._switch&&this._rgbValue());this._hsvValue();this._hueGradient();this._addTitleText();this._showClearIcon(this.model.showClearButton);this._columns=this.model.columns;this._temp=this.model.presetType;this._tempValue||(this._colorSlider.option("value",parseInt(this._hsv.h)),this._opacity.option("value",this._tempOpacity),this._alphaGradient("#fff"),this._previousValue="");this.model.enabled||this._enabled(this.model.enabled)},_renderControl:function(){this._createWrapper();this._renderPopupPanelWrapper();this._selectedButton=this._groupTag.find(".e-click");this._buttonContainer();this._renderPopupElement();this._buttonElement=t.ColorPicker.ButtonMode.Split==this.model.buttonMode?this.dropdownbutton:this.wrapper;this.model.buttonMode==t.ColorPicker.ButtonMode.Split&&this.element.is("input")&&this.wrapper.addClass("e-split");this._addAttr(this.model.htmlAttributes);this._setDisplayInline(this.model.displayInline);this._previewPane(this.model.showPreview);this._previewColor(this.model.showRecentColors);this._localize();this._switch&&this._previewSlider(this.model.enableOpacity);this._wireEvents();this._switchEvents()},_createWrapper:function(){this.element.is("input")&&(this.element.addClass("e-input e-widget"),this.spanElement=t.buildTag("span.e-selected-color"),this.wrapper=t.buildTag("span.e-colorwidget e-picker e-widget "+this.model.cssClass).attr({tabindex:"0","aria-expanded":!1,"aria-haspopup":!0,"aria-owns":"popup"}),this._id&&this.wrapper.attr("id",this._id+"Wrapper"),this.container=t.buildTag("span.e-in-wrap e-box e-splitarrowright"),this.drpbtnspan=t.buildTag("span.e-icon e-arrow-sans-down","",{},{"aria-label":"select"}),this.dropdownbutton=t.buildTag("span.e-select","",{},{role:"button"}).append(this.drpbtnspan),this.iconWrapper=t.buildTag("span.e-tool-icon "+this.model.toolIcon),this.colorContainer=t.buildTag("span.e-color-container"),this.colorContainer.append(this.spanElement),this.container.insertAfter(this.element),t.isNullOrUndefined(this.model.toolIcon)?this.container.append(this.colorContainer):(this.colorContainer.prepend(this.iconWrapper),this.container.addClass("e-tool"),this.container.append(this.colorContainer)),this.container.append(this.element,this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.element.css("display","none").val(this.value()));this._checkNameAttr()},_addTitleText:function(){this._switcher.attr("title",this.model.tooltipText.switcher);this._spanTag.attr("title",this.model.tooltipText.addButton);this._presetLi.find("#e-presets00").attr("title",this.model.tooltipText.webColors);this._presetLi.find("#e-presets01").attr("title",this.model.tooltipText.vintage);this._presetLi.find("#e-presets02").attr("title",this.model.tooltipText.seaWolf);this._presetLi.find("#e-presets10").attr("title",this.model.tooltipText.sandy);this._presetLi.find("#e-presets11").attr("title",this.model.tooltipText.pinkShades);this._presetLi.find("#e-presets12").attr("title",this.model.tooltipText.moonLight);this._presetLi.find("#e-presets20").attr("title",this.model.tooltipText.monoChrome);this._presetLi.find("#e-presets21").attr("title",this.model.tooltipText.misty);this._presetLi.find("#e-presets22").attr("title",this.model.tooltipText.flatColors);this._presetLi.find("#e-presets30").attr("title",this.model.tooltipText.basic);this._presetLi.find("#e-presets31").attr("title",this.model.tooltipText.candyCrush);this._presetLi.find("#e-presets32").attr("title",this.model.tooltipText.citrus);this._currentTag.attr("title",this.model.tooltipText.currentColor);this._previousTag.attr("title",this.model.tooltipText.selectedColor)},_renderPopupPanelWrapper:function(){var u,r,f,i;for(this.popupContainer=t.buildTag("div.e-colorpicker e-box e-popup e-widget "+this.model.cssClass,"",{},{role:"grid","aria-readonly":"true",tabindex:"0",style:"visibility:hidden"}),this._id&&this.popupContainer.attr("id",this._id+"_popup"),n("body").append(this.popupContainer),this.popupList=t.buildTag("div.e-popupWrapper"),this._gradient=t.buildTag("div.e-container"),this._colorArea=t.buildTag("div.e-hsv-color"),this._gradientArea=t.buildTag("div.e-hsv-gradient"),this._handleArea=t.buildTag("div.e-draghandle e-color-image"),this._browser=="msie"&&this._handleArea.addClass("e-pinch"),this._colorArea.append(this._gradientArea,this._handleArea),this._picker=t.buildTag("div.e-gradient"),this._hueSlider=t.buildTag("div.e-widget e-hue e-state-default"),this._alphaSlider=t.buildTag("div.e-widget e-opacity e-state-default"),this._picker.append(this._hueSlider,this._alphaSlider),this._gradient.append(this._colorArea,this._picker),this.popupList.append(this._gradient),this._footerBlock=t.buildTag("div.e-footerContainer"),this._templateWrapper=t.buildTag("div.e-buttons"),this._groupTag=t.buildTag("div.e-grpbtn"),this._formEle=t.buildTag("div.e-form"),this._rgb=t.buildTag("button.e-rgbButton e-click","",{},{type:"button"}),this._hexCode=t.buildTag("button.e-hexButton","",{},{type:"button"}),this._hsva=t.buildTag("button.e-hsvButton","",{},{type:"button"}),this._groupTag.append(this._rgb,this._hexCode,this._hsva),this._codeEditor=t.buildTag("div.e-codeeditor"),this._inputTag=t.buildTag("input.e-color-code","",{},{type:"text",tabindex:"0",maxLength:"22"}),this._codeEditor.append(this._inputTag),this._formEle.append(this._groupTag,this._codeEditor),this._previewTag=t.buildTag("div.e-preview").attr({tabindex:"0"}),this._currentTag=t.buildTag("div.e-current"),this._previousTag=t.buildTag("div.e-previous"),this._previewTag.append(this._currentTag,this._previousTag),this._templateWrapper.append(this._formEle,this._previewTag),this._swatchesArea=t.buildTag("div.e-color-labels"),u=11,this._divTag=t.buildTag("div.e-recent-color"),this._addTag=t.buildTag("div.e-colorblock e-block"),this._spanTag=t.buildTag("div.e-color e-color-image e-add"),this._addTag.append(this._spanTag),this._divTag.append(this._addTag),r=0;r<u;r++)this._liTag=t.buildTag("div.e-colorblock e-block"),f=t.buildTag("div.e-color e-color-image e-empty"),this._liTag.append(f),this._divTag.prepend(this._liTag);this._swatchesArea.append(this._divTag);this._footer=t.buildTag("div.e-footer");this._swatches=t.buildTag("div.e-element");this._changeTag=t.buildTag("div.e-switcher").attr("tabindex","0");this._switcher=t.buildTag("div.e-color-image");this._presetTag=t.buildTag("button.e-presets e-colorSplit");this._presets=t.buildTag("div");this._changeTag.append(this._switcher);this._presetTag.append(this._presets);this._swatches.append(this._changeTag,this._presetTag);this._footer.append(this._swatches);this._footerBlock.append(this._templateWrapper,this._swatchesArea,this._footer);this.PaletteWrapper=this._layoutType(this.model.palette);this.popupList.append(this.PaletteWrapper,this._footerBlock);i=n("#"+this._id+"_Presets").get(0);i&&(n(i).parent().hasClass("e-menu-wrap")?n(i).parent().remove():n(i).remove());this._presetContainer=n("<ul id='"+this._id+"_Presets' class='e-presetWrapper' style= top:87px ><\/ul>");this._presetLi=t.buildTag("li.e-item");this._presetLi.append(this._renderPresets());this._presetContainer.append(this._presetLi);this.popupList.append(this._presetContainer);this.popupContainer.append(this.popupList);(this._browser.name="msie"&&(this._browser.version=="9.0"||this._browser.version=="8.0"))?this._hueSlider.addClass("e-color-image e-filter"):this._hueSlider.addClass("e-common");this._width=this._gradientArea.width();this._height=this._gradientArea.height()},_buttonContainer:function(){this.model.showApplyCancel?(this._buttonTag=t.buildTag("button.e-applyButton","",{},{type:"button"}),this._cancelTag=t.buildTag("button.e-cancelButton","",{},{type:"button"}),this._footer.append(this._buttonTag,this._cancelTag),this._applyObj=this.popupContainer.find("button.e-applyButton").ejButton({text:this.model.buttonText.apply,type:"button",cssClass:"e-flat"}).data("ejButton"),this._cancelObj=this.popupContainer.find("button.e-cancelButton").ejButton({text:this.model.buttonText.cancel,type:"button",cssClass:"e-flat"}).data("ejButton"),this._on(this._cancelTag,"click",this._hidePopup),this._on(this._buttonTag,"click",this._buttonClick)):this._buttonTag!==i&&this._cancelTag!==i&&(this._buttonTag.remove(),this._cancelTag.remove(),this._off(this._cancelTag,"click",this._hidePopup),this._off(this._buttonTag,"click",this._buttonClick))},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.wrapper.addClass(n):t=="required"?i.element.attr(t,n):t=="disabled"&&n=="disabled"?i._enabled(!1):i.wrapper.attr(t,n)})},_showClearIcon:function(n){n?(this._clearIcon=t.buildTag("div",{},{},{"class":"e-icon e-close_01"}).hide(),this._codeEditor.append(this._clearIcon),this._on(this._clearIcon,"mousedown",this._clearColor),this._on(this._clearIcon,"click",this._clearColor)):(this._clearIcon&&this._clearIcon.remove(),this._off(this._clearIcon,"mousedown",this._clearColor),this._off(this._clearIcon,"click",this._clearColor))},_colorPresetsClick:function(t){this._presetsId=t.currentTarget.id;this._presetsId==="e-presets00"?this.model.presetType="webcolors":this._presetsId==="e-presets01"?this.model.presetType="vintage":this._presetsId==="e-presets02"?this.model.presetType="seawolf":this._presetsId==="e-presets10"?this.model.presetType="sandy":this._presetsId==="e-presets11"?this.model.presetType="pinkshades":this._presetsId==="e-presets12"?this.model.presetType="moonlight":this._presetsId==="e-presets20"?this.model.presetType="monochrome":this._presetsId==="e-presets21"?this.model.presetType="misty":this._presetsId==="e-presets22"?this.model.presetType="flatcolors":this._presetsId==="e-presets30"?this.model.presetType="basic":this._presetsId==="e-presets31"?this.model.presetType="candycrush":this._presetsId==="e-presets32"&&(this.model.presetType="citrus");this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType);n("#"+this._id+"_Presets").find("li.e-preset-row").removeClass("e-presetsactive");n("#"+this._presetsId).addClass("e-presetsactive");this.PaletteWrapper.remove();this._modelType=="palette"&&(this.PaletteWrapper=this._layoutType(this.model.palette),this._gradient.addClass("e-hide"),this._paletteType(),this._switcher.addClass("e-pickerModel").removeClass("e-paletteModel"))},_renderPresets:function(){var r=t.buildTag("div.e-presets-table"),e,u,n,i,f;for(this._spnTag=t.buildTag("span.e-presetHeader"),this._spnTag.html(this.model.buttonText.swatches),r.append(this._spnTag),e=0,n=0;n<4;n++){for(u=t.buildTag("ul.e-tablerow"),i=0;i<3;i++)f=t.buildTag("li.e-color-image e-preset-row#e-presets"+[n]+[i]),f.appendTo(u);u.appendTo(r)}return r},_renderPopupElement:function(){var i=this;this._hsv={h:360,s:0,v:100};this._rgb.ejButton({text:"RGBA",type:"button"});this._hexCode.ejButton({text:"HEX",type:"button"});this._hsva.ejButton({text:"HSVA",type:"button"});this._splitObj=this._presetTag.ejSplitButton({size:"normal",showRoundedCorner:!0,contentType:"imageonly"}).data("ejSplitButton");this._splitObj.option("beforeOpen",function(n){i._bindClickOperation(n)});this._presetTag.parents(".e-split.e-widget").css({height:"27px"});this.model.custom.length==0?this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType):"";n("#"+this._presetsId).addClass("e-presetsactive");this._splitObj._getXYpos=function(){n("#"+this.model.targetID).ejMenu({animationType:"none"});var t,i,r=this.dropbutton.offset();return t=r.left-this.dropbutton.prev().outerWidth()-1,i=r.top-n("#"+this.model.targetID).outerHeight()-1,{x:t,y:i}};this._colorSlider=this._hueSlider.ejSlider({orientation:"Vertical",showTooltip:this.model.showTooltip,minValue:0,maxValue:360,change:function(n){i._changeHue(n)},slide:function(n){i._changeHue(n)}}).data("ejSlider");this._opacity=this._alphaSlider.ejSlider({value:this.opacityValue(),showTooltip:this.model.showTooltip,orientation:"Vertical",incrementStep:5,value:100,change:function(n){i._changeAlpha(n)},slide:function(n){i._changeAlpha(n)}}).data("ejSlider");(this._browser.name="msie"&&this._browser.version=="8.0")&&(this._handleTag=t.buildTag("div.e-handle-wrapper"),this._handleTag.appendTo(this._opacity.element.find("a.e-handle")));this._colorSlider.firstHandle.css({height:"13px",width:"13px"});this._opacity.firstHandle.css({height:"13px",width:"13px"});this.popupContainer.css({visibility:"visible",display:"none"});this.model.modelType=="picker"?(this._modelType="picker",this._gradient.removeClass("e-hide"),this.PaletteWrapper.addClass("e-hide"),this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this._showSwitcher(),this._switch=!0):this.model.modelType=="palette"&&(this._modelType="palette",this._presetTag.parents(".e-split.e-widget").removeClass("e-hide"),this.PaletteWrapper.removeClass("e-hide"),this._gradient.addClass("e-hide"),this._hsva.ejButton("disable"),this._showSwitcher(),this._switch=!1)},_layoutType:function(n){return typeof n=="string"&&n=="basicpalette"?this._collection=this._paletteGenerate(r[this.model.presetType],this.model.columns):typeof n=="string"&&n=="custompalette"&&this.model.modelType=="palette"&&(this._collection=this._paletteGenerate(this.model.custom,this.model.columns)),n=="custompalette"?this._collection.addClass("e-custom"):"",this._collection},_presetType:function(n){return n==="e-presets00"?this._collection=this._paletteGenerate(r.webcolors,this.model.columns):n==="e-presets01"?this._collection=this._paletteGenerate(r.vintage,this.model.columns):n==="e-presets02"?this._collection=this._paletteGenerate(r.seawolf,this.model.columns):n==="e-presets10"?this._collection=this._paletteGenerate(r.sandy,this.model.columns):n==="e-presets11"?this._collection=this._paletteGenerate(r.pinkshades,this.model.columns):n==="e-presets12"?this._collection=this._paletteGenerate(r.moonlight,this.model.columns):n==="e-presets20"?this._collection=this._paletteGenerate(r.monochrome,this.model.columns):n==="e-presets21"?this._collection=this._paletteGenerate(r.misty,this.model.columns):n==="e-presets22"?this._collection=this._paletteGenerate(r.flatcolors,this.model.columns):n==="e-presets30"?this._collection=this._paletteGenerate(r.basic,this.model.columns):n==="e-presets31"?this._collection=this._paletteGenerate(r.candycrush,this.model.columns):n==="e-presets32"&&(this._collection=this._paletteGenerate(r.citrus,this.model.columns)),this._collection},_paletteGenerate:function(i,r){var u;for(this._PresetTable=t.buildTag("div.e-palette-color").attr({role:"presentation"}),this._tag=t.buildTag("div.e-row").attr({role:"row"}),u=0;u<i.length;u++)u&&u%r==0&&(this._tag=t.buildTag("div.e-row").attr({role:"row"})),this._td=t.buildTag("div.e-item").attr({role:"gridcell","aria-label":"#"+n.trim(i[u]),"data-value":"#"+n.trim(i[u]),style:"background-color:#"+n.trim(i[u])}),this._tag.append(this._td),this._PresetTable.append(this._tag);return this._PresetTable},_checkNameAttr:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id})},_enabled:function(n){n?this.enable():(this.model.enabled=!0,this.disable())},_setDisplayInline:function(i){this.model.displayInline=i;i&&this.element.is("input")?(this.popupContainer.insertAfter(this.wrapper),this._footer.css({display:"none"}),this._setPopupPosition()):i?(this.element.append(this.popupContainer),this.popupContainer.find("button.e-applyButton").css({display:"none"}),this.popupContainer.find("button.e-cancelButton").css({display:"none"}),this._footer.css({display:"none"})):(this.popupContainer.css("display","none"),n("body").append(this.popupContainer),this._isOpen=!1,this.element.is("input")&&(this._bindIconClick(),this.popupContainer.find("button.e-applyButton").length==0&&this._buttonContainer(),this._footer.css({display:"block"}),this.wrapper.removeClass("e-focus"),this._off(n(document),"mousedown",this._onDocumentClick)),this._isFocused=this.isPopupOpen=!1);i&&(this.show(),this.element.is("input")&&this._off(n(this._buttonElement),"mousedown",this._iconClick),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide))},_bindIconClick:function(){var i=n._data(n(this._buttonElement)[0],"events");t.isNullOrUndefined(i)||t.isNullOrUndefined(i.mousedown)?this._on(this._buttonElement,"mousedown",this._iconClick):i.mousedown.length==0&&this._on(this._buttonElement,"mousedown",this._iconClick)},_unBindIconClick:function(){this._off(this._buttonElement,"mousedown",this._iconClick)},_setPopupPosition:function(){var t=this.element.is("input")?this.wrapper:this.element,i=this._getOffset(t),e,h=n(document).scrollTop()+n(window).height()-(i.top+n(t).outerHeight()),c=i.top-n(document).scrollTop(),f=this.popupContainer.outerHeight(),u=this.popupContainer.outerWidth(),r=i.left,o=t.outerHeight(),l=(o-t.height())/2,a=this._getZindexPartial(),s=3,v=(f<h||f>c?i.top+o+s:i.top-f-s)-l;e=n(document).scrollLeft()+n(window).width()-r;u>e&&u<r+t.outerWidth()&&(r-=this.popupContainer.outerWidth()-t.outerWidth());u+t.offset().left>n(window).width()&&(r=Math.abs(u-n(window).width()));this.popupContainer.css({left:r+"px",position:"absolute",top:v+"px","z-index":a})},_getOffset:function(n){return t.util.getOffset(n)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popupContainer)},_setValue:function(n,i){(typeof n=="object"||typeof n=="number"||t.isNullOrUndefined(n.match("^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$")))&&(n=null);this.value(n);this._tempValue=n;t.isNullOrUndefined(n)?this._setEmptyValue():this._renderModelValue(n);this._changeEvent(!1,i);this._selectEvent();this.element.is("input")&&this._updateValue()},_renderModelValue:function(n){var t;n&&typeof n=="string"&&(t=this._HexToHSV(n),this._oldValue=this.rgb,this._switch&&(this._valueOperation(),this._colorSlider.option("value",parseInt(this._hsv.h))),this._inputTagValue(this._selectedButton),this._switch||(this._updateUI(),this.element.val(this.value())),this._hueGradient())},setValue:function(n){this._setValue(n)},enable:function(){if(this.model.enabled)return!1;this.wrapper&&this.wrapper.hasClass("e-disable")?(this.wrapper.removeClass("e-disable"),this.element.prop("disabled",!1),this.container.hasClass("e-disable")&&this.container.removeClass("e-disable"),this.popupList.removeClass("e-disable"),this.dropdownbutton.removeClass("e-disable")):this.model.displayInline&&this.element.removeClass("e-disable");var t=this._switch;this._switch=!0;this._cancelObj.enable();this._colorSlider.enable();this.model.enableOpacity?this._opacity.enable():this._opacity.disable();this._splitObj.enable();this._applyObj.enable();this._wireEvents();this._switchEvents();this._switch=t;n(this._inputTag).prop("readonly",!1);this._buttonElement&&this._on(this._buttonElement,"mousedown",this._iconClick);this.model.enabled=!0},disable:function(){if(!this.model.enabled)return!1;this.wrapper&&!this.wrapper.hasClass("e-disable")?(this.wrapper.addClass("e-disable"),this.element.attr("disabled","disabled"),this.container.hasClass("e-disable")||this.container.addClass("e-disable"),this.popupList.addClass("e-disable"),this.dropdownbutton.addClass("e-disable")):this.model.displayInline&&this.element.addClass("e-disable");var t=this._switch;this._switch=!1;this._cancelObj.disable();this._colorSlider.disable();this._opacity.disable();this._splitObj.disable();this._applyObj.disable();this._unWireEvents();this._unSwitchEvents();this._switch=t;this._unBindIconClick();n(this._inputTag).attr("readonly","readonly");this.isPopupOpen&&!this.model.displayInline&&this.hide();this.model.enabled=!1},getColor:function(){return this.rgb},getValue:function(){return this.value()},_alphaGradient:function(n){var i=t.browserInfo(),n=t.isNullOrUndefined(n)?"#000000":n;i.name=="mozilla"?this._alphaSlider.attr({style:"background:-moz-linear-gradient(center top,"+n+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):i.name=="msie"||i.name=="edge"?this._alphaSlider.attr({style:"background:-ms-linear-gradient(top,"+n+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):i.name=="opera"&&i.version<="11.61"?this._alphaSlider.attr({style:"background:-o-linear-gradient(top,"+n+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):(i.name=="chrome"||i.name=="safari"||i.name=="opera")&&this._alphaSlider.attr({style:"background:-webkit-linear-gradient(top,"+n+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"});i.name=="msie"&&(i.version=="8.0"||i.version=="9.0")&&this._alphaSlider.attr({style:"progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+n+", endColorstr=#ffffff)"});i.name=="msie"&&i.version=="8.0"&&this._handleTag.css({background:this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"})},_hueGradient:function(){var n=this._hsv,t={h:this._hsv.h,s:100,v:100};this._hueSlider.children(".e-handle").css({background:this._formRGB(this.HSVToRGB(t))});this._hsv=n},_updateColor:function(){(this.model.displayInline||!this.model.showApplyCancel)&&(this.value(this._tempValue),this.element.is("input")&&this._updateValue(),this._trigger("select",{value:this.value()}),this._previousColor=this._tempValue)},_changeEvent:function(n,t){this._change&&this._previousValue!==this._tempValue&&(this._alphaGradient(this._tempValue),this._previousValue=this._tempValue,this._trigger("change",{value:this._tempValue,changeFrom:n?"slider":"picker",isInteraction:!t}),this._updateColor(n))},_selectEvent:function(){(this._previousColor!==this._tempValue||this._tempOpacity!==this.opacityValue())&&(this.value(this._tempValue),this.element.is("input")&&this._updateValue(),this.element.val(this.value()),this._trigger("select",{value:this.value()}),this._previousColor=this._tempValue)},_changeHue:function(n){this._handleArea.css("visibility","visible");parseInt(this._hsv.h)!==parseInt(n.value)&&this._switch&&(this._hsv.h=Math.round(n.value),this._hueGradient(),this._hsvValue(),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!0))},_changeAlpha:function(n){this._handleArea.css("visibility","visible");this._switch&&(this.rgb.a=n.value/100,this._tempOpacity=parseInt(this.rgb.a*100),this._changeOpacity(n))},_changeOpacity:function(n){this.rgb.a=this._tempOpacity/100;(this._browser.name="msie"&&this._browser.version=="8.0")?(this._currentTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"}),this._handleTag.css({background:this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"})):(this._currentTag.css("background-color",this._formRGBA(this.rgb)),this._alphaSlider.children(".e-handle").css({background:this._formRGBA(this.rgb)}));this._inputTagValue(this._selectedButton);this.model.displayInline?(this._trigger("change",{value:this._tempValue,changeFrom:"slider",isInteraction:t.isNullOrUndefined(n)?!1:n.isInteraction}),this._trigger("select",{value:this.value()})):this._trigger("change",{value:this._tempValue,changeFrom:"slider",isInteraction:t.isNullOrUndefined(n)?!1:n.isInteraction})},_updateValue:function(){this.value()?(this._browser.name="msie"&&this._browser.version=="8.0")?this.spanElement.css({"background-color":this._formRGB(this._HexToRGB(this.value())),filter:"alpha(opacity="+this.rgb.a*100+")"}):this.spanElement.css({"background-color":this._formRGBA(this._HexToRGB(this.value()))}):this.spanElement.removeAttr("style")},_bindClickOperation:function(){var t=this,i;t._on(n("#"+this._id+"_Presets").find("li.e-preset-row"),"mousedown",t._colorPresetsClick);i=n("#"+t._presetContainer.attr("id")).ejMenu("instance");i.model.close=function(){t._splitObj.contstatus=!1;t._off(n("#"+this._id+"_Presets").find("li.e-preset-row"),"mousedown",t._colorPresetsClick)}},_wireEvents:function(){this.element.is("input")&&(this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"keydown",this._popupShown),this._on(this.colorContainer,"click",this._containerClick));this._on(this._changeTag,"click",this._switchModel);this._on(this._groupTag,"click",this._groupButton);this._on(this._addTag,"click",this._addColor);this._on(this._codeEditor,"mouseenter",this._inputEvent);this._on(this._codeEditor,"mouseleave",this._inputEvent);this._on(this._inputTag,"blur",this._inputEvent);this._on(this._inputTag,"focus",this._inputEvent);this._on(this._inputTag,"keyup",this._inputEvent);this._on(this.popupContainer,"focus",this._targetFocus);this._on(this.popupContainer,"blur",this._targetBlur)},_unWireEvents:function(){!this.model.displayInline&&this.element.is("input")&&(this._off(this.wrapper,"blur",this._targetBlur),this._off(this.wrapper,"focus",this._targetFocus),this._off(this.wrapper,"keydown",this._popupShown),this._off(this.colorContainer,"click",this._containerClick));this._off(this._changeTag,"click",this._switchModel);this._off(this._groupTag,"click",this._groupButton);this._off(this._addTag,"click",this._addColor);this._off(this._codeEditor,"mouseenter",this._inputEvent);this._off(this._codeEditor,"mouseleave",this._inputEvent);this._off(this._inputTag,"blur",this._inputEvent);this._off(this._inputTag,"focus",this._inputEvent);this._off(this._inputTag,"keyup",this._inputEvent);this._off(this.popupContainer,"focus",this._targetFocus);this._off(this.popupContainer,"blur",this._targetBlur)},_inputEvent:function(n){(n.type==="focus"&&n.target.className.indexOf("e-color-code")>-1&&this._codeEditor.addClass("e-focus"),n.type==="blur"&&n.target.className.indexOf("e-color-code")>-1&&this._codeEditor.removeClass("e-focus"),this._clearIcon)&&(n.type==="focus"&&this._off(this._codeEditor,"mouseleave",this._inputEvent),n.type==="blur"&&this._on(this._codeEditor,"mouseleave",this._inputEvent),n.type==="keyup"&&(this._inputTag.val()!==""?(this._clearIcon.show(),this._handleArea.css("visibility","visible")):(this._clearIcon.hide(),this._handleArea.css("visibility","hidden"))),n.type==="mouseleave"||n.type==="blur"||this._inputTag.val()==""?this._clearIcon.hide():this._clearIcon.show())},_clearColor:function(n){this._tempValue="";this._inputTag.val("");this._setEmptyValue();n.type=="click"&&(this._clearIcon.hide(),this._inputTag.focus())},_containerClick:function(){this.model.buttonMode=="split"&&this._trigger("select",{value:this.value()})},_popupShown:function(n){if(n.keyCode==13)return this._showHidePopup(),this.isPopupOpen||this._buttonClick(n),!1},_recentColor:function(i){var f,e,r,u;if(this._divTag.find(".e-select").removeClass("e-select").addClass("e-block"),f=i.target.attributes.getNamedItem("data-value"),r=i.target.attributes.style,t.isNullOrUndefined(f)||t.isNullOrUndefined(r))return this._change=!1,!1;n(i.target.parentNode).addClass("e-select").removeClass("e-block");u=r.value.replace(/^(background-color:rgb|background-color:rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",");t.isNullOrUndefined(u[3])?(this._browser.name="msie"&&this._browser.version=="8.0")?(e=parseInt(r.nodeValue.replace(/^(FILTER: alpha)\(/,"").split("=")[1].split(")")[0]),this._opacity.option("value",e),this.rgb.a=e/100):(this._opacity.option("value",100),this.rgb.a=1):(this._opacity.option("value",parseInt((parseFloat(u[3])*100).toFixed(2))),this.rgb.a=parseFloat(parseFloat(u[3]).toFixed(2)));this._HexToHSV(f.value);this._inputTagValue(this._selectedButton);this._tempValue=this.RGBToHEX(this.rgb);this._valueOperation();this._colorSlider.option("value",parseInt(this._hsv.h));this._hueGradient();this._changeEvent(!1);(!this.model.displayInline||this.element.is("input"))&&this.wrapper.focus()},_handleClick:function(t){t.preventDefault();this._width=this._gradientArea.width();this._height=this._gradientArea.height();this.model.displayInline&&(this._isFocused=!0);this._handleArea.css("visibility","visible");this.mouseDownPos=this._handlePos;n(document).on("mousemove touchmove",n.proxy(this._handleMovement,this));n(document).on("mouseup touchend",n.proxy(this._handleUp,this))},_handleMove:function(n){this._handleArea.css("visibility","visible");this._handleMovement(n);this._focusWrapper(n)},_handleMovement:function(n){if(!this.model.enabled)return!1;var t=n.pageX,i=n.pageY;this.element.is("input")&&this.wrapper.focus();(n.type=="touchstart"||n.type=="touchmove")&&(t=n.originalEvent.changedTouches[0].pageX,i=n.originalEvent.changedTouches[0].pageY);this._hsv.v=parseInt(100*(this._gradientArea.height()-Math.max(0,Math.min(this._gradientArea.height(),i-this._gradientArea.offset().top)))/this._gradientArea.height(),10);this._hsv.s=parseInt(100*Math.max(0,Math.min(this._gradientArea.width(),t-this._gradientArea.offset().left))/this._gradientArea.width(),10);this._hsvValue();this._tempValue=this.RGBToHEX(this.rgb);this._change=!0;this._changeEvent(!1)},_handleUp:function(t){return n(document).off("mouseup touchend",this._handleUp),n(document).off("mousemove touchmove",this._handleMovement),this._focusWrapper(t),!1},_handlePosition:function(){this._handlePos=this._handleArea?{left:parseInt(parseInt(this._width)*this._hsv.s/100,10)+"px",top:parseInt(parseInt(this._height)*(100-this._hsv.v)/100,10)+"px"}:"";this._handleArea.css({left:this._handlePos.left,top:this._handlePos.top})},_addColor:function(){var i,t=this._divTag.find("> div");i=this._selectedButton.html()!="HSVA"?this._inputTag.val():this._formRGBA(this.HSVToRGB(this._hsv));i!==""&&this._change&&this.model.showRecentColors&&t.length<=12&&(n(n(t)[t.length-2]).remove(),this._generateLi());(!this.model.displayInline||this.element.is("input"))&&this.wrapper.focus()},_buttonClick:function(){this._change=!0;var n=this._inputTag.val(),t=this._divTag.find("div");if(this._opacity.option("value",this._tempOpacity),this._tempValue=this.RGBToHEX(this.rgb),this._updatePreviewColor(),this._inputTag.val()==="")if(this._tempValue="",this.model.showClearButton)this._setValue("");else return this._inputTag.addClass("e-error"),!1;this._selectEvent();this.element.is("input")&&(this._updateValue(),this.wrapper.focus());this.model.displayInline||this.hide();this._tempOpacity!==this.opacityValue()&&this.opacityValue(this._tempOpacity)},_generateLi:function(){this._liTag=t.buildTag("div.e-colorblock e-block e-colorset").attr({"data-value":this.RGBToHEX(this.rgb),tabindex:"0"});var n=t.buildTag("div.e-color e-set").attr({"data-value":this.RGBToHEX(this.rgb),title:this.RGBToHEX(this.rgb)});(this._browser.name="msie"&&this._browser.version=="8.0")?n.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"}):n.css({"background-color":this._formRGBA(this.rgb)});this._liTag.append(n);this._divTag.prepend(this._liTag)},_colorCodeValue:function(i){var e="",c=this._inputTag.val(),u,r,f,o,s,h;if(u=n.trim(c),u.length==5?this._inputTag.removeClass("e-error"):"",this._keyPressFlag=i.shiftKey&&i.keyCode>=35&&i.keyCode<=40||i.keyCode>=65&&i.keyCode<71||i.keyCode==51||i.ctrlKey&&(i.keyCode==88||i.keyCode==86)||i.keyCode==190?1:i.crtlKey||i.shiftKey||!(i.keyCode>=65&&i.keyCode<71||i.keyCode>=35&&i.keyCode<=40||i.keyCode>=96&&i.keyCode<=105||i.keyCode>=48&&i.keyCode<=57||i.keyCode==13||i.keyCode==8||i.keyCode==46||i.type==="blur")?0:1,(this.model.enableOpacity&&(i.keyCode==188||i.keyCode==71||i.keyCode==72||i.keyCode==82||i.keyCode==83||i.keyCode==86)||i.shiftKey&&(i.keyCode==57||i.keyCode==48))&&(this._keyPressFlag=1),this._keyPressFlag==1){if(this._inputTag.removeClass("e-error"),i.keyCode===13||i.type==="blur"){if(u===""&&(this.model.showClearButton?this._setEmptyValue():this._inputTag.addClass("e-error")),o=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,r=u.match(o),t.isNullOrUndefined(r))if(s=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/,r=u.match(s),t.isNullOrUndefined(r)){if(h=/^hsva?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/,r=u.match(h),t.isNullOrUndefined(r))return u!=""&&this._inputTag.addClass("e-error"),this._change=!1,!1;this._hsvColor(r)}else this._rgbaColor(r);else{if(r[1].length===3)for(f=0;f<r[1].length;f++)e+=r[1][f]+r[1][f];else r[1].length===6&&(e=r[1]);u=this.hexCodeToRGB("#"+e);this._inputTag.val("#"+e);this.rgb=this.HSVToRGB(this.RGBToHSV(u));this._tempValue=this.RGBToHEX(this.rgb);this._change=!0}this._change&&(this._valueOperation(),this._colorSlider.option("value",parseInt(this._hsv.h)),this._hueGradient(),this._changeEvent(!1),this.element.is("input")||this._selectEvent(),this._inputTag.val()!==""&&this._inputTag.removeClass("e-error"))}}else i.keyCode!=9&&i.preventDefault(),i.shiftKey||i.ctrlKey||i.keyCode===27||i.keyCode==20||this._inputTag.addClass("e-error")},_setEmptyValue:function(){this._handleArea.css("visibility","hidden");this._currentTag.css({"background-color":""});this._removeClass();this._tempValue=null;this._inputTag.val(null);this._previousValue!==this._tempValue&&(this._trigger("change",{value:null}),this._previousValue=this._tempValue)},_rgbaColor:function(n){var i={};if(n[0].split("(")[0]!="rgba"||t.isNullOrUndefined(n[4]))if(n[0].split("(")[0]=="rgb"&&t.isNullOrUndefined(n[4]))i.r=n[1],i.g=n[2],i.b=n[3],i.a=this.rgb.a,this._inputTag.val("rgba("+i.r+","+i.g+","+i.b+","+i.a+")");else return this._inputTag.addClass("e-error"),this._change=!1,!1;else i.r=n[1],i.g=n[2],i.b=n[3],i.a=n[4];this.rgb.a=parseFloat(i.a);this._tempOpacity=this.rgb.a*100;this._opacity.option("value",this._tempOpacity);this.opacityValue(this._tempOpacity);this._tempValue=this.RGBToHEX(i);this._HexToHSV(this._tempValue);this._inputTag.removeClass("e-error");this._change=!0},_hsvColor:function(n){var i={};if(t.isNullOrUndefined(n[4]))return this._inputTag.addClass("e-error"),this._change=!1,!1;i.h=n[1];i.s=n[2];i.v=n[3];i.a=n[4];this.rgb.a=parseFloat(i.a);this._tempOpacity=this.rgb.a*100;this._opacity.option("value",this._tempOpacity);this.opacityValue(this._tempOpacity);this.rgb=this.HSVToRGB(i);this._tempValue=this.RGBToHEX(this.rgb);this._inputTag.removeClass("e-error");this._change=!0},_iconClick:function(n){n.preventDefault();this._showHidePopup();this.wrapper.focus()},_showHidePopup:function(){if(this.model.displayInline)return!1;this.isPopupOpen?(this.hide(),this.wrapper.focus()):this.show()},hide:function(){var i=this;if(!this.isPopupOpen||this.model.displayInline)return!1;this.isPopupOpen=this._dataBind=!1;this.element.is("input")&&(this.wrapper.focus(),this.wrapper.removeClass("e-active"));this._width=this._gradientArea.width();this._height=this._gradientArea.height();this.popupContainer.slideUp(200,function(){i.model&&(i._tempOpacity=i.opacityValue(),i.rgb.a=i._tempOpacity/100,i._tempValue=i.value(),i._renderModelValue(i.value()),i._opacity.option("value",parseInt(i.opacityValue())),i.model.displayInline||i._off(n(document),"mousedown",i._onDocumentClick),i._trigger("close"))});this.model.displayInline||this._off(n(document),"mousedown",this._onDocumentClick);this._off(this._inputTag,"keydown",this._colorCodeValue);this._off(this._inputTag,"blur",this._colorCodeValue);this._modelType=="palette"?this._off(n(document),"keydown",this._keyDown):this._off(n(document),"keydown",this._onKeyDown);this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide);n(window).off("resize",n.proxy(this._OnWindowResize,this))},_hidePopup:function(){this.model.displayInline||this.hide()},show:function(){if(this.element.is("input")&&(this.wrapper.focus(),this.wrapper.addClass("e-active")),this.isPopupOpen||!this.model.enabled)return!1;this.isPopupOpen=!0;this.model.modelType=="palette"&&this._cellSelect();!this.model.displayInline&&(this.value()===""||t.isNullOrUndefined(this.value()))?this._setEmptyValue():this._handleArea.css("visibility","visible");this._previousColor=this._previousValue=this.value();this.popupContainer.children().find(".e-focus").removeClass("e-focus");this.model.displayInline||this._setPopupPosition();var i=this;this.popupContainer.slideDown(200,function(){i.isFocused=!0;i._on(n(document),"mousedown",i._onDocumentClick);i._trigger("open")});this._dataBind||(this._modelType=="palette"?this._on(n(document),"keydown",this._keyDown):this._on(n(document),"keydown",this._onKeyDown));this._on(this._inputTag,"keydown",this._colorCodeValue);this._on(this._inputTag,"blur",this._colorCodeValue);this._dataBind=!0;n(window).on("resize",n.proxy(this._OnWindowResize,this));this.model.displayInline||this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide);this._prevSize!==n(window).width()&&this.refresh()},_showBindEvents:function(){this._modelType=="palette"?this._on(n(document),"keydown",this._keyDown):this._on(n(document),"keydown",this._onKeyDown)},_hideUnBindEvents:function(){this._modelType=="palette"?this._off(n(document),"keydown",this._onKeyDown):this._off(n(document),"keydown",this._keyDown)},_switchEvents:function(){this._switch?(this._on(this._gradientArea,"mousedown touchstart",this._handleMove),this._on(this._handleArea,"mousedown touchstart",this._handleClick),this._on(this._gradientArea,"mousedown touchstart",this._handleClick)):this._on(this._collection,"mousedown",this._onSelect)},_unSwitchEvents:function(){this._switch?this._off(this._collection,"mousedown",this._onSelect):(this._off(this._gradientArea,"mousedown touchstart",this._handleMove),this._off(this._handleArea,"mousedown touchstart",this._handleClick),this._off(this._gradientArea,"mousedown touchstart",this._handleClick))},_groupButton:function(t){if(n(t.target).hasClass("e-disable"))return!1;if(n(t.target).hasClass("e-button")){var i=this._groupTag.find(".e-btn.e-select");this._inputTag.val()!==""?this._inputTagValue(n(t.target)):this._selectedButton=n(t.target);this._selectedButton.html()!=="HEX"?this._inputTag.attr("maxLength","22"):this._inputTag.attr("maxLength","7");this._groupTag.find(".e-click").removeClass("e-click");n(t.target).addClass("e-click");this._inputTag.removeClass("e-error")}},_inputTagValue:function(n){n.html()=="RGBA"?this._inputTag.val(this._formRGBA(this.rgb)):n.html()=="HEX"?this._inputTag.val(this.RGBToHEX(this.rgb)):n.html()=="HSVA"&&this._modelType!="palette"&&this._inputTag.val("hsva("+Math.round(this._hsv.h)+","+Math.round(this._hsv.s)+","+Math.round(this._hsv.v)+","+this.rgb.a+")");this._selectedButton=n},_bindRecentEvent:function(){this._on(this._divTag,"click",this._recentColor)},_unBindRecentEvent:function(){this._off(this._divTag,"click",this._recentColor)},_handlePlacement:function(n,t,i){this._handleArea.css("visibility","visible");var r=this._hsv;r[n]+=t*(i?1:3);r[n]<0&&(r[n]=0);n==="s"?this._hsv.s=r[n]:this._hsv.v=r[n];this._hsvValue();this._tempValue=this.RGBToHEX(this.rgb);this._changeEvent(!1)},_onKeyDown:function(t){var i=t.keyCode;if(this.model.enabled&&(t.shiftKey&&i==9&&n(this._hueSlider).find(".e-handle").hasClass("e-focus")&&this._focusWrapper(t),this._isFocused||i!=9||i===27)&&(this._change=!0,!t.altKey&&!t.shiftKey))switch(i){case 39:this.element.is("input")&&n(t.target).is(this.wrapper)&&(t.preventDefault(),this._handlePlacement("s",1,t.ctrlKey));break;case 38:this.element.is("input")&&n(t.target).is(this.wrapper)&&(t.preventDefault(),this._handlePlacement("v",1,t.ctrlKey));break;case 37:this.element.is("input")&&n(t.target).is(this.wrapper)&&(t.preventDefault(),this._handlePlacement("s",-1,t.ctrlKey));break;case 40:this.element.is("input")&&n(t.target).is(this.wrapper)&&(t.preventDefault(),this._handlePlacement("v",-1,t.ctrlKey));break;case 13:t.preventDefault();n(t.target).hasClass("e-switcher")?(this._switchModel(),n(t.target).focus()):n(t.target).hasClass("e-applyButton")&&this._buttonClick(t);break;case 27:t.preventDefault();this.model.displayInline||this.hide();this._tempValue=this.value();break;case 9:active=document.activeElement;n(active).is(this.wrapper)&&this._focusPopup(t)}},_focusPopup:function(t){n(this._hueSlider).find(".e-handle").focus();t.preventDefault()},_focusWrapper:function(t){this.element.is("input")&&n(this.wrapper).focus();t.preventDefault()},_onDocumentClick:function(t){n(t.target).is(this.popupContainer)||n(t.target).parents(".e-colorpicker").is(this.popupContainer)||n(t.target).is(this.wrapper)||n(t.target).parents(".e-colorpickerwidget").is(this.wrapper)||n(t.target).parents(".e-presetWrapper").is("#"+this._id+"_Presets")||(this.model.displayInline||(this.hide(),this.element.is("input")&&this.wrapper.removeClass("e-focus")),this._isFocused=!1)},_OnWindowResize:function(){this.element.is("input")&&this._setPopupPosition();this.refresh()},refresh:function(){var t=n(this._PresetTable.find(".e-item")[1]),i=10,u,r;this.isPopupOpen?this._modelType=="picker"&&this.PaletteWrapper.css({display:"block",visibility:"hidden"}):(this.popupContainer.css({display:"block",visibility:"hidden"}),this._modelType=="palette"&&this.PaletteWrapper.css({display:"block",visibility:"hidden"}));(parseFloat(this._tag.outerHeight())>t.outerHeight(!0)||n(this._tag).outerWidth()-n(t).outerWidth(!0)*i>t.outerWidth()||n(this._tag).outerWidth()==0)&&(u=parseFloat(n(this._tag).outerWidth())-36,r=u/i-(t.outerWidth()-t.width()),this._PresetTable.find(".e-item").css("width",r),t.outerWidth(!0)*i>this._tag.outerWidth()&&this._PresetTable.find(".e-item").css("width",r-1));this.isPopupOpen?this._modelType=="picker"&&this.PaletteWrapper.css({display:"none",visibility:"visible"}):(this.popupContainer.css({display:"none",visibility:"visible"}),this._modelType=="palette"&&this.PaletteWrapper.css({visibility:"visible"}));this._prevSize=n(window).width();this._width=this._gradientArea.width();this._height=this._gradientArea.height()},_range:function(n,t){return t===""?0:t>n?n:t},_hsvValue:function(){this._change=!0;this._hsv.v=this._hsv.v>=100?100:this._hsv.v;this._hsv.s=this._hsv.s>=100?100:this._hsv.s;this.hsv=this._hsv;this.rgb=this.HSVToRGB(this.hsv);this._valueOperation();this._inputTagValue(this._selectedButton)},_formRGB:function(n){if(!t.isNullOrUndefined(n))return"rgb("+n.r+","+n.g+","+n.b+")"},_formRGBA:function(n){if(!t.isNullOrUndefined(n))return"rgba("+n.r+","+n.g+","+n.b+","+n.a+")"},_rgbValue:function(){var n;n=this._HexToRGB(this._tempValue);t.isNullOrUndefined(n)||(this.rgb=n,this._change=!0,this.HSVToRGB(this.RGBToHSV(this.rgb)),this._colorSlider.option("value",parseInt(this._hsv.h)),this._opacity.option("value",this.rgb.a*100));this._valueOperation();this._inputTagValue(this._selectedButton)},_valueOperation:function(){this._handlePosition();this._alphaGradient(this._tempValue);this._inputTag.removeClass("e-error");this._updateUI()},_HexToHSV:function(n){return this.HSVToRGB(this.RGBToHSV(this._HexToRGB(n)))},_HexToRGB:function(n){var r,n,i,u;if(!t.isNullOrUndefined(n))return(r="^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",i=n.match(r),t.isNullOrUndefined(i))?(this._change=!1,!1):(i[1].length==3&&(n="#"+i[1][0]+i[1][0]+i[1][1]+i[1][1]+i[1][2]+i[1][2]),this._change=!0,n=parseInt(n.indexOf("#")>-1?n.substring(1):n,16),u=t.isNullOrUndefined(this.rgb)?parseFloat(this._tempOpacity)/100:this.rgb.a,this.rgb={r:n>>16,g:(n&65280)>>8,b:n&255,a:u})},RGBToHSV:function(n){var t={h:0,s:0,v:0},u=Math.min(n.r,n.g,n.b),i=Math.max(n.r,n.g,n.b),r=i-u;return(t.v=i,t.v*=100/255,r===0)?(this._hsv=t,t):(t.s=i!=0?255*r/i:0,t.h=t.s!=0?n.r==i?(n.g-n.b)/r:n.g==i?2+(n.b-n.r)/r:4+(n.r-n.g)/r:-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,this._hsv=t,t)},HSVToRGB:function(n){var i={},f=Math.round(n.h),s=Math.round(n.s*255/100),o=Math.round(n.v*255/100),h;if(s==0)i.r=i.g=i.b=o;else{var r=o,u=(255-s)*o/255,e=(r-u)*(f%60)/60;f==360&&(f=0);f<60?(i.r=r,i.b=u,i.g=u+e):f<120?(i.g=r,i.b=u,i.r=r-e):f<180?(i.g=r,i.r=u,i.b=u+e):f<240?(i.b=r,i.r=u,i.g=r-e):f<300?(i.b=r,i.g=u,i.r=u+e):f<360?(i.r=r,i.g=u,i.b=r-e):(i.r=0,i.g=0,i.b=0)}return this._hsv=n,h=t.isNullOrUndefined(this.rgb)?parseFloat(this._tempOpacity)/100:this.rgb.a,{r:Math.round(i.r),g:Math.round(i.g),b:Math.round(i.b),a:h}},_HSVToHex:function(n){return this.RGBToHEX(this.HSVToRGB(n))},_toHEX:function(n){return n.indexOf("#")!==-1?n:(n=n.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+this._hex(n[1])+this._hex(n[2])+this._hex(n[3]))},RGBToHEX:function(n){if(!t.isNullOrUndefined(n))return"#"+this._hex(n.r)+this._hex(n.g)+this._hex(n.b)},_hex:function(n){return("0"+parseInt(n).toString(16)).slice(-2)},_colorValue:function(n){return this._color=n.indexOf("#")!=-1?this.hexCodeToRGB(n):"","rgb("+this._color.r+", "+this._color.g+", "+this._color.b+")"},hexCodeToRGB:function(n){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:this.rgb.a}:null},_updatePreviewColor:function(){(this._browser.name="msie"&&this._browser.version=="8.0")?this._previousTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"}):this._previousTag.css({"background-color":this._formRGBA(this.rgb)});this._oldValue=this.rgb},_updateUI:function(){var t=this._hsv,n;this._switch?(n={h:this._hsv.h,s:100,v:100},this._gradientArea.css({"background-color":this._colorValue(this._HSVToHex(n))})):this._cellSelect();(this._browser.name="msie"&&this._browser.version=="8.0")?(this._currentTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+this.rgb.a*100+")"}),this._previousTag.css({"background-color":this._formRGB(this._oldValue),filter:"alpha(opacity="+this.rgb.a*100+")"})):(this._currentTag.css({"background-color":this._formRGBA(this.rgb)}),this._previousTag.css({"background-color":this._formRGBA(this._oldValue)}),this._alphaSlider.children(".e-handle").css({background:this._formRGBA(this.rgb)}));this._hsv=t},_targetFocus:function(n){n.preventDefault();this._isFocused||(this._isFocused=!0,this.element.is("input")&&this.wrapper.addClass("e-focus"))},_targetBlur:function(){this._isFocused=!1;!this.isPopupOpen&&this.element.is("input")&&this.wrapper.removeClass("e-focus")},_switchModel:function(){this._tempValue=this.RGBToHEX(this.rgb);this.refresh();var n=this;this._off(this._changeTag,"click",this._switchModel);this._modelType=="palette"?(this._modelType="picker",this._switcher.removeClass("e-pickerModel").addClass("e-paletteModel"),this.PaletteWrapper.fadeOut(300,function(){n._presetTag.parents(".e-split.e-widget").addClass("e-hide");n._gradient.fadeIn(300);n._on(n._changeTag,"click",n._switchModel)}),this._switch=!0,this._rgbValue(),this._hueGradient(),this._hsva.ejButton("enable")):(this.PaletteWrapper.remove(),this._modelType="palette",this.PaletteWrapper=this._layoutType(this.model.palette),this._gradient.addClass("e-hide"),this._paletteType(),this._switcher.removeClass("e-paletteModel").addClass("e-pickerModel"),this._gradient.fadeOut(300,function(){n._presetTag.parents(".e-split.e-widget").removeClass("e-hide");t.isNullOrUndefined(n.PaletteWrapper)&&(n.PaletteWrapper=n._layoutType(n.model.palette),n._splitObj.option("prefixIcon","e-color-image e-"+n.model.presetType),n.popupList.prepend(n.PaletteWrapper));n.PaletteWrapper.fadeIn(300);n._on(n._changeTag,"click",n._switchModel)}),this.value()!==""&&this._cellSelect(),this._disableHSVButton());this.model.palette==="custompalette"&&this._presetTag.parents(".e-split.e-widget").addClass("e-hide");(!this.model.displayInline||this.element.is(":input"))&&this.wrapper.focus();this._switchEvents();this._unSwitchEvents();this.isPopupOpen&&(this._hideUnBindEvents(),this._showBindEvents())},_disableHSVButton:function(){n(this._groupTag.find(".e-click")).hasClass("e-hsvButton")&&(this._inputTagValue(this._rgb),this._rgb.addClass("e-click"),this._hsva.removeClass("e-click"));this._hsva.ejButton("disable")},_cellSelect:function(){var i,r,t=this;this._removeClass();this._collection.find(".e-item").each(function(){i=n(this).css("background-color");(t._browser.name="msie"&&t._browser.version=="8.0")?i&&i.replace(/ /g,"")===t.RGBToHEX(t.rgb)&&(r=this,n(r).addClass("e-filter")):i&&i.replace(/ /g,"")===t._formRGB(t.rgb)&&(r=this)});n(r).addClass("e-state-selected").attr("aria-selected",!0)},_removeClass:function(){this._collection.find(".e-item").removeClass("e-state-selected").removeClass("e-filter").removeAttr("aria-selected")},_position:function(n,t,i){n=Array.prototype.slice.call(n);var u=n.length,r=n.indexOf(t);return r<0?i<0?n[u-1]:n[0]:(r+=i,n[r<0?r+=u:r%=u])},_onSelect:function(n){if(!this.model.enabled)return!1;this._isFocused=!0;this._handleArea.css("visibility","visible");n.target.style.backgroundColor!=""&&(this._collection.find(".e-item").removeClass("e-state-selected").removeAttr("aria-selected"),this._HexToRGB(this._toHEX(n.target.style.backgroundColor)),this._updateUI(),this._inputTagValue(this._selectedButton),(!this.model.displayInline||this.element.is("input"))&&this.wrapper.focus(),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!1));n.preventDefault()},_keyDown:function(t){if(this._isFocused){if(this._change=!0,!this.model.enabled)return!1;var i="",r=t.keyCode,u=this._collection.find(".e-item"),f=u.filter(".e-state-selected").get(0),e=this.model.columns;t.altKey||r!=37&&r!=38&&r!=39&&r!=40||t.target.className==="e-color-code"||this._removeClass();switch(!t.altKey&&r){case 40:t.target.className!=="e-color-code"&&(t.preventDefault(),i=this._position(u,f,e));break;case 37:t.target.className!=="e-color-code"&&(t.preventDefault(),i=this._position(u,f,-1));break;case 38:t.target.className!=="e-color-code"&&(t.preventDefault(),i=this._position(u,f,-e));break;case 39:t.target.className!=="e-color-code"&&(t.preventDefault(),i=this._position(u,f,1));break;case 13:this._collection.find(".e-item").removeClass("e-state-selected").removeAttr("aria-selected");n(t.target).hasClass("e-switcher")?(this._switchModel(),n(t.target).focus()):n(t.target).hasClass("e-applyButton")&&(this._buttonClick(t),this._updateUI(),this.model.displayInline||this.hide(),this.element.is("input")&&this.wrapper.focus());break;case 27:this.model.displayInline||this.hide();n(this._presetContainer).hide();this.element.is("input")&&this.wrapper.focus();break;case 9:active=document.activeElement;n(active).is(this.wrapper)&&this._focusPalettePopup(t,!0)}i&&(n(i).addClass("e-state-selected").attr("aria-selected",!0),this._currentTag.css({"background-color":this._formRGB(this._HexToRGB(n(i).attr("data-value")))}),this._inputTagValue(this._selectedButton),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!1))}else t.keyCode==27&&(this.hide(),n(this._presetContainer).hide())},_focusPalettePopup:function(t){n(this.popupContainer).focus();t.preventDefault()}});t.ColorPicker.Locale=t.ColorPicker.Locale||{};t.ColorPicker.Locale["default"]=t.ColorPicker.Locale["en-US"]={buttonText:{apply:"Apply",cancel:"Cancel",swatches:"Swatches"},tooltipText:{switcher:"Switcher",addButton:"Add Color",basic:"Basic",monoChrome:"Mono Chrome",flatColors:"Flat Colors",seaWolf:"Sea Wolf",webColors:"Web Colors",sandy:"Sandy",pinkShades:"Pink Shades",misty:"Misty",citrus:"Citrus",vintage:"Vintage",moonLight:"Moon Light",candyCrush:"Candy Crush",currentColor:"Current Color",selectedColor:"Selected Color"}};t.ColorPicker.Palette={BasicPalette:"basicpalette",CustomPalette:"custompalette"};t.ColorPicker.ModelType={Palette:"palette",Picker:"picker"};t.ColorPicker.ButtonMode={Default:"dropdown",Split:"split"};t.ColorPicker.PresetType={Basic:"basic",MonoChrome:"monochrome",FlatColors:"flatcolors",SeaWolf:"seawolf",WebColors:"webcolors",Sandy:"sandy",PinkShades:"pinkshades",Misty:"misty",Citrus:"citrus",Vintage:"vintage",MoonLight:"moonlight",CandyCrush:"candycrush"};var r={basic:["ffffff","facbcb","fccb98","faf39a","fbf8cd","a6d38b","aadee8","d1ecf2","cdcae5","eecde1","cccbcb","f16667","f69668","f8ee6b","f7ec37","89c987","75cddd","8bd3e1","7f7fcc","9494c8","b3b2b3","ec2024","f7971d","ffcb67","f5ea14","74bf44","69c8c9","46c7f4","6666ad","b76cab","676767","971b1e","ca6828","ca9732","979937","0d9948","339898","4857a6","62449a","973794","000000","2f1110","973620","663433","343416","183319","023334","22205f","3b2f8d","310e31"],monochrome:["ffffff","e3e3e3","c6c6c6","aaaaaa","8e8e8e","717171","555555","393939","1c1c1c","000000","f9e6e7","f4d0d2","efbabc","e9a4a7","e48e92","df787c","da6267","d44c52","cf363c","ca2027","fff4ca","ffeb9e","fff0b4","ffefb1","ffe788","ffe272","ffd947","ffd531","ffd01b","ffcc05","e4f4eb","ccead9","b4e0c7","9cd6b5","84cca3","6dc190","55b77e","3dad6c","25a35a","0d9948","e8f4f4","d6e3eb","c4d1e3","b3c0da","a1aed1","8f9dc9","7d8bc0","6c7ab7","5a68af","4857a6"],flatcolors:["7477b8","488bca","18b1d4","1db369","78c162","acc063","ffe84e","f6b757","f79853","ed6346","E87F3D","E4C45D","B7A575","999999","67809F","002228","00A578","F9A41F","F3770B","D7401B","FFCB36","82CC2C","36B595","6370AD","D4264E","004D8E","22A04B","F3A414","C77405","F3420B","1ABC9C","3498DB","9B59B6","E67E22","E74C3C","3A738A","EBD9A7","89AD78","FF766D","C76160","BF3542","CDC5BA","EBE3D6","3C3C3C","2E2E2E","77A7FB","E57368","FBCB43","34B67A","FFFFFF"],seawolf:["0EEAFF","15A9FA","1B76FF","1C3FFD","2C1DFF","0B3C4C","0E5066","13647F","127899","1A8BB2","74B8E8","659EBB","3C9FFF","26466F","2472FF","0069A4","009BF2","004165","49A0B4","274C5F","000000","7A5848","E0A088","F9DEC6","3A2A22","DC3522","D9CB9E","374140","2A2C2B","1E1E20","CB3937","FE6B2C","654E44","6DD16F","70FE2C","275673","4681A6","FDDEC9","F22816","400101","071C2F","388494","E6A934","F3DB5F","534329","206956","47683B","E1BFA6","BF7950","903932"],webcolors:["0066aa","00bbdd","338800","77bb00","ffcc99","990c0c","0303c9","336699","669933","cccccc","EEEEEE","E7C36F","F7B230","E35B20","000033","7D7A74","BD524A","FCB200","8CFCC2","2ACD6B","666666","666553","FFFEEC","B2B2A4","AAA4B2","9CA5E3","5A668C","BBA469","CFC295","FFFFFF","DBBF56","2E94B3","808080","E96656","14A168","DE185B","D8806F","DBE186","D8CC63","DCC527","4E6C89","E2BDAD","EC6053","81BBAD","DFCDA5","453394","66398A","313E7D","336694","788E91"],sandy:["c0a986","ecd9c3","dfc79b","f6d58e","ecdaad","fff3e0","7f6b4a","ffd694","7f7a70","ccac76","E6E2AF","A79A71","EFECCA","806F4C","2F2F2E","997F1A","CCB65F","FFD291","6B674A","635F3A","7F693A","FFEBC1","FFD275","7F7561","CCA85E","D29854","4A4034","C9AD8D","4A351D","968169","E6E39F","9A9757","FFFDC9","94909A","E2E0E6","960010","EB1517","CD7C29","9A571C","1F7A94","7F6826","7F724C","FFE499","FFD04C","CCA63D","FFA669","92FFB6","FFF352","E8C269","D7E8CB"],pinkshades:["F6B1C3","F0788C","DE264C","BC0D35","A20D1E","E12256","BB1C48","7B132F","3B0917","FA2660","FFB7B5","9A423F","FF6D68","BB5855","CC5753","E88161","D66C60","C2646E","996072","705262","FFA1BD","FF8FB7","FF82AE","E9719B","CC6882","F250C7","BF1774","BF2696","AC60AA","BB90C5","BF1553","F20775","F2F2F2","e5566d","f2afc1","f43fa5","fc8c99","FF6887","7F3443","CC536C","D06AA9","E65F41","650017","BC1620","FA427E","3B1132","84476E","B83D65","E6E0E8","FF6EE8"],misty:["5C7A84","3D5372","7C9196","50748A","ADBFBF","010735","052159","194073","376B8C","FFFFFF","985999","C811CC","892EFF","FF6852","DBA211","0A0D0C","85A67C","46593E","BBD9AD","202616","BF8E63","734327","A66C4B","593A2F","BFBFBF","8DB0B6","1B778A","F46C1B","881801","192129","81808C","ABAABF","0C0E09","6A7366","37402F","5D6663","84867B","A4A66A","BABBB1","20211C","6B9695","646E8C","6B8196","61787F","648C80","8E9FBA","89A8C8","799ED1","7FAEE7","849EBD"],citrus:["FAEA41","E7F03E","E3C647","FAC541","F0AB3E","CCCA1F","FFF300","FFCB0D","FF9500","804A00","6A692A","FFFCA0","FFFFFF","CF664E","EFAC66","EFF299","F2DC6D","F29727","F2600C","592202","214001","4F7302","1A2601","BCD97E","C0D904","AAFEFF","359D6D","E5FF45","65FCCF","ABDC4B","42B200","C6FF00","F2E304","FFB200","FF8600","52EC04","04E206","94D507","ECE404","E2C904","DA321C","FF7913","FBD028","C0D725","9FC131","547312","ADBF26","DEB329","F1DB47","E08214"],vintage:["684132","fdbe30","eaac21","87783c","3e4028","ffc706","cd5648","5bafa9","828282","363636","424862","fb9a63","bfc4d5","f6fbf4","febc98","657050","FCF082","D8D98B","A2AB80","4D584A","5ADED4","4DAAAB","26596A","163342","6C98A1","010A26","28403B","557359","AEBF8A","C7D9AD","AFFCCB","CB4243","D2997E","36857E","4AC6BB","28394B","191313","AF0A18","DC373D","122438","43734A","A6A26D","D9B448","BF8C2C","734002","26010F","866F53","ACBD91","7BAB87","546859"],moonlight:["241D37","2A233D","322B45","362F49","D4BA73","261225","592040","8C3063","A64985","73345D","A3C8FF","85B6FF","000040","213190","050859","FFFFFF","6AAED9","4184BF","224573","2e4154","bcad7e","955351","c36a57","9a8556","7e6029","dbd78e","beae3b","c3a04c","58504d","967644","CFC496","B3B391","889486","61797B","366577","123340","436E73","7B8C61","D7D996","F0EBB4","341F36","D9B5E0","9889AB","4D4E66","1B2129","5CBBE3","FCF1BC","5C8182","383A47","B4F257"],candycrush:["0779f4","30da00","fb8006","f9d802","a71df7","f70200","fd49ae","682e07","9b2424","5e7693","F9AB3B","EF5627","FF0000","00A398","803C2C","DE5711","FFF026","FF0048","14A0CC","00B229","FFFFBE","F7CD99","FF77A1","9886E8","97CACB","EAEDE5","FFD127","FF870C","EC4610","9A1900","993460","CC1464","C300FF","FFFFBC","CCB914","FFFEE2","B24C5F","FF274F","0A94CC","679DB2","C2FFE6","16B271","5FFFBC","B2442F","FFA190","E89359","FFFB75","F36EFF","5999E8","73EB86"]}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejSlider","ej.Slider",{element:null,model:null,validTags:["div","span"],_addToPersist:["value","values"],_rootCSS:"e-slider",_setFirst:!1,_requiresID:!0,defaults:{orientation:"horizontal",enableAnimation:!0,animationSpeed:500,showTooltip:!0,cssClass:"",showRoundedCorner:!1,readOnly:!1,enableRTL:!1,htmlAttributes:{},minValue:0,maxValue:100,sliderType:"default",value:null,values:null,incrementStep:1,height:null,width:null,enabled:!0,showScale:!1,largeStep:10,smallStep:1,showSmallTicks:!0,showButtons:!1,enablePersistence:!1,allowMouseWheel:!1,start:null,stop:null,slide:null,change:null,create:null,destroy:null,tooltipChange:null,renderingTicks:null},dataTypes:{orientation:"enum",enableAnimation:"boolean",animationSpeed:"number",cssClass:"string",showRoundedCorner:"boolean",readOnly:"boolean",enableRTL:"boolean",minValue:"number",maxValue:"number",sliderType:"enum",incrementStep:"number",enabled:"boolean",showButtons:"boolean",showScale:"boolean",largeStep:"number",smallStep:"number",showSmallTicks:"boolean",enablePersistence:"boolean",htmlAttributes:"data",allowMouseWheel:"boolean"},observables:["value","values"],value:t.util.valueFunction("value"),values:t.util.valueFunction("values"),enable:function(){this.model.enabled||(this.model.enabled=!0,this.wrapper&&this.wrapper.removeClass("e-disable"),this.element.removeClass("e-disable"),this.model.showButtons&&this.element.siblings(".e-sliderbtn").ejButton("model.enabled",this.model.enabled),this._wireEvents())},disable:function(){this.model.enabled&&(this.model.enabled=!1,this.wrapper&&this.wrapper.addClass("e-disable"),this.element.addClass("e-disable"),this.model.showButtons&&this.element.siblings(".e-sliderbtn").ejButton("model.enabled",this.model.enabled),this._unWireEvents())},_validateValue:function(n,t){t=typeof t=="undefined"?!1:t;n==null||n===""?n=this.model.minValue:typeof n=="string"&&(n=parseFloat(n));this._isNumber(n)?(this._hidden.val(n),this.value(n)):this._isNumber(this.value())||(this._hidden.val(this.model.minValue),this.value(this.model.minValue));this.model.sliderType!="range"&&this._setValue(t)},_validateRangeValue:function(n,t){if(t=typeof t=="undefined"?!1:t,n==null)n=[this.model.minValue,this.model.maxValue];else if(typeof n=="string"){var i=n.split(",");i.length>1&&(n=[parseFloat(i[0]),parseFloat(i[1])])}typeof n=="object"&&this._isNumber(n[0])&&this._isNumber(n[1])?(this._hidden.val([n[0],n[1]]),this.values([n[0],n[1]])):typeof this.values()=="object"&&this._isNumber(this.values()[0])&&this._isNumber(this.values()[1])||(this._hidden.val([this.model.minValue,this.model.maxValue]),this.values([this.model.minValue,this.model.maxValue]));this.model.sliderType=="range"&&this._setRangeValue(t)},_validateStartEnd:function(){isNaN(this.model.minValue)&&(this.model.minValue=0);isNaN(this.model.maxValue)&&(this.model.maxValue=100)},_isNumber:function(n){return typeof n=="number"&&!isNaN(n)},_outerCorner:function(n){n?this._roundedCorner():this._sharpedCorner()},_changeSkin:function(n){this.element.removeClass(this.model.cssClass).addClass(n);this.model.showScale&&this.ul.removeClass(this.model.cssClass).addClass(n)},getValue:function(){return this._getHandleValue()},setValue:function(n,t){this.model.sliderType=="range"?this._validateRangeValue(n,t):this._validateValue(n,t)},_init:function(){this._isInteraction=!0;this._initialize();this._render()},_setModel:function(n){var r,u,f,e;this._isInteraction=!1;t.isNullOrUndefined(n.minValue)&&t.isNullOrUndefined(n.maxValue)||(this._isNumber(n.minValue)?this.model.minValue=n.minValue:n.minValue=this.model.minValue,this._isNumber(n.maxValue)?this.model.maxValue=n.maxValue:n.maxValue=this.model.maxValue,this.model.sliderType=="range"&&n.values==i?this._setRangeValue():this.model.sliderType!="range"&&n.value==i&&this._setValue());for(r in n)switch(r){case"value":this._validateValue(t.util.getVal(n[r]));n[r]=this.model.value;break;case"values":if(u=typeof n.values=="function"?n.values():n.values,!t.isNullOrUndefined(u)&&!t.isNullOrUndefined(u.length)&&typeof u!="string"&&!isNaN(u[0])&&!isNaN(u[1])&&(f=typeof this.values().join=="function"?u.join():u,f==this._hidden.val()))break;this._validateRangeValue(t.util.getVal(n[r]));n[r]=this.model.values;break;case"height":this.model.height=n[r];this._setDimension();this.model.showScale&&this._scaleAlignment();break;case"width":this.model.width=n[r];this._setDimension();this.model.showScale&&this._scaleAlignment();break;case"enabled":this._disabled(!n[r]);break;case"showRoundedCorner":this._outerCorner(n[r]);break;case"enableRTL":this.model.enableRTL=n[r];this.model.showButtons&&(this._valueChanged=!0);this._checkRTL();n[r]=this.model.enableRTL;break;case"cssClass":this._changeSkin(n[r]);this.model.showButtons&&this.element.siblings(".e-sliderbtn").ejButton("model.cssClass",n[r]);break;case"showScale":this._renderScale(n[r]);this.model.enableRTL&&this._changeVerticalScaleDir(n[r]);break;case"orientation":e=this.model.height;this.model.height=this.model.width;this.model.width=e;case"sliderType":this._sliderOptions(r,n[r]);break;case"smallStep":case"largeStep":case"showSmallTicks":case"minValue":case"maxValue":this._scaleOptions(r,n[r]);break;case"htmlAttributes":this._addAttr(n[r]);break;case"tooltipChange":this.model.tooltipChange=n[r];break;case"allowMouseWheel":this.model.allowMouseWheel=n[r];break;case"renderingTicks":this.model.renderingTicks=n[r];break;case"showButtons":this.model.showButtons=n[r];this._renderButtons()}},_destroy:function(){this.model.showScale&&this._destroyScale();this.element.insertAfter(this.wrapper);this.wrapper.remove();this.element.removeClass("e-widget e-box "+this.model.cssClass).empty();this.model.showButtons&&this.element.removeAttr("style")},_initialize:function(){this.target=this.element[0];this.horDir="left";this.verDir="bottom";this._isFocused=!1},_render:function(){this.initialRender=!0;this._isIE8=t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"?!0:!1;this.wrapper=t.buildTag("div.e-slider-wrap e-widget"+this.model.cssClass+"#"+this.target.id+"_wrapper",{tabindex:"0",role:"slider"}).insertAfter(this.element);this.model.showButtons?this._showButtons():this.wrapper.append(this.element);this.element.addClass("e-widget e-box "+this.model.cssClass);this.model.sliderType!="default"&&(this.header=t.buildTag("div.e-range"),this.element.append(this.header),this.model.sliderType=="range"&&(this.secondHandle=this._createHandle()));this.firstHandle=this._createHandle();this._setOrientation();this._setDimension();this._insertHiddenField();this._checkProperties();this.model.showScale||this._alignButtons();this._addAttr(this.model.htmlAttributes);this._setSliderValue()},_showButtons:function(){var i=this,r=t.buildTag("button.e-decreasebtn e-sliderbtn e-animate"),u=t.buildTag("button.e-increasebtn e-sliderbtn e-animate");r.ejButton({contentType:"imageonly",prefixIcon:"e-icon e-minus",type:"button",repeatButton:!0,enabled:i.model.enabled,cssClass:i.model.cssClass,click:function(n){i._clickButtons(n)}});u.ejButton({contentType:"imageonly",prefixIcon:"e-icon e-plus",type:"button",repeatButton:!0,enabled:i.model.enabled,cssClass:i.model.cssClass,click:function(n){i._clickButtons(n)}});this.model.enableRTL&&this.model.orientation=="horizontal"||this.model.orientation=="vertical"&&!this.model.enableRTL?this.wrapper.append(n(u)).append(this.element).append(n(r)).addClass("e-slider-buttons"):this.wrapper.append(n(r)).append(this.element).append(n(u)).addClass("e-slider-buttons");this.wrapper.find(".e-sliderbtn").attr("tabindex",-1)},_renderButtons:function(){this.model.showButtons?(this._showButtons(),this.model.showScale||this._alignButtons()):(this.element.siblings(".e-sliderbtn").remove(),this.element.removeAttr("style"),this.wrapper.removeClass("e-slider-buttons"));this.wrapper.find("ul").hasClass("e-scale")&&(this._destroyScale(),this._renderScale(!0))},_alignButtons:function(){if(this.model.showButtons){var n=this.wrapper.find(".e-sliderbtn");this.model.orientation=="horizontal"?n.css("top",this.element.outerHeight()/2-parseFloat(n.outerHeight()/2)+parseFloat(this.wrapper.css("padding-top"))+"px"):n.css("left",this.element.outerWidth()/2-parseFloat(n.outerWidth()/2)+parseFloat(this.wrapper.css("padding-left"))+"px")}},_clickButtons:function(i){if(n(i.target).hasClass("e-animate")&&n(i.target).removeClass("e-animate"),!this.model.readOnly&&!t.isNullOrUndefined(i.target)){var r;this.model.sliderType=="range"?(n(this.element).find(".e-handle.e-focus").is(this.firstHandle)&&!this.model.enableRTL?(this.firstHandle.focus().addClass("e-no-tab"),hVal=this.handleVal):this.model.enableRTL||(this.secondHandle.focus().addClass("e-no-tab"),hVal=this.handleVal2),n(this.element).find(".e-handle.e-focus").is(this.secondHandle)&&this.model.enableRTL?(this.secondHandle.focus().addClass("e-no-tab"),hVal=this.handleVal2):this.model.enableRTL&&(this.firstHandle.focus().addClass("e-no-tab"),hVal=this.handleVal)):(this.firstHandle.focus().addClass("e-no-tab"),hVal=this.handleVal);r=n(i.target).hasClass("e-decreasebtn")?this._add(hVal,this.model.incrementStep,!1):this._add(hVal,this.model.incrementStep,!0);this._changeHandleValue(r,!1)}},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.wrapper.addClass(n):t=="disabled"&&n=="disabled"?i._disabled(!0):i.element.attr(t,n)})},_renderScale:function(n){var e,o,s,i,h,l,a,v;if(n){this.wrapper.addClass("e-scale-wrap");e="width";o="h";this.model.orientation=="vertical"&&(e="height",o="v");i=this.model.smallStep;this.model.showSmallTicks?i<=0&&(i=this.model.incrementStep):i=this.model.largeStep>0?this.model.largeStep:this.model.maxValue-this.model.minValue;h=Math.abs(this.model.maxValue-this.model.minValue)/i;this.ul=t.buildTag("ul.e-scale e-"+o+"-scale "+this.model.cssClass);this._isIE8&&this.ul.addClass("e-ie8");this.wrapper.append(this.ul);var u,f,r=this.model.minValue,y=0,c=100/h;for(o=="v"&&(r=this.model.maxValue),l=0;l<=h;l++)u=t.buildTag("li.e-tick","",{},{title:r}),a=r%this.model.largeStep==0?!0:!1,a&&u.addClass("e-large"),u.css(e,c+"%"),this.model.renderingTicks&&(f={value:r,valueType:"tooltip",tick:u[0]},this._trigger("renderingTicks",f),u.attr("title",f.value)),a&&(this.model.renderingTicks?(f.valueType="label",f.value=r,this._trigger("renderingTicks",f),s=f.value):s=r,v=t.buildTag("span.e-tick-value",""+s),u.append(v)),this.ul.append(u),o=="h"?r+=i:r-=i,y+=i;this.ul.children().first().addClass("e-first-tick").css(e,c/2+"%");this.ul.children().last().addClass("e-last-tick").css(e,c/2+"%");this._scaleAlignment()}else this._destroyScale();this._setWrapperHeight();this._alignButtons()},_destroyScale:function(){this.wrapper.removeClass("e-scale-wrap");this.ul.remove();this.ul=null},_tickValuePosition:function(){var n=this.model.orientation=="vertical"?"height":"width",t=this.model.orientation=="vertical"?"top":"left",i=this.ul.find(".e-tick.e-first-tick"),r=i.find(".e-tick-value"),u=this.ul.find(".e-tick.e-large:not(.e-first-tick)").find(".e-tick-value"),f=i[n]()*2;r.css(t,-r[n]()/2);u.css(t,(f-u[n]())/2)},_scaleAlignment:function(){var u;this._tickValuePosition();var f=12,t=20,e=t/2,n="height",i="top",r="h";this.model.orientation=="vertical"?(n="width",i="right",r="v",this.element.width()<=15?this.wrapper.addClass("e-small-size"):this.wrapper.removeClass("e-small-size")):this.element.height()<=15?this.wrapper.addClass("e-small-size"):this.wrapper.removeClass("e-small-size");this.ul.css(i,-(this.wrapper[n]()+e));r=="v"&&this.ul.css("top",-this.wrapper.height()).css(i,e);this.ul[n](this.wrapper[n]()+t);u=-(t-f)/2;this.model.largeStep==null&&r!="v"&&(u=-u);this.ul.find(".e-tick:not(.e-large)").css(n,this.wrapper[n]()+f).css(i,u);r=="v"&&this.ul.children(".e-large").find(".e-tick-value").css("right",this.wrapper.width()+t+4)},_setWrapperHeight:function(){var i,r,n,t;this.model.orientation=="horizontal"?(i=this.ul?this.firstHandle.outerHeight()>this.ul.height()?this.firstHandle.outerHeight():this.ul.height():this.firstHandle.outerHeight(),n=(i-this.element.outerHeight())/2,n<0&&(n=0),this.wrapper.css({padding:n+"px 0px"})):(r=this.ul?this.firstHandle.outerWidth()>this.ul.width()?this.firstHandle.outerWidth():this.ul.width():this.firstHandle.outerWidth(),t=(r-this.element.outerWidth())/2,t<0&&(t=0),this.wrapper.css({padding:"0px "+t+"px"}))},_createHandle:function(){var n=t.buildTag("a.e-handle e-select","",{},{"aria-label":"drag",tabindex:0});return this.element.attr({role:"slider","aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue}),t.browserInfo().name=="msie"&&n.addClass("e-pinch"),this.element.append(n),n},_setDimension:function(){this.model.height&&this.wrapper.height(this.model.height);this.model.width&&this.wrapper.width(this.model.width);this._setHandleSize();this._handleAlignment(this.model.enableRTL);this._alignButtons()},_insertHiddenField:function(){this._hidden=t.buildTag("input","",{},{type:"hidden",name:this.element[0].id});this._hidden.val(this._getHandleValue());this.element.append(this._hidden)},_checkProperties:function(){this.model.enabled?this._wireEvents():this.wrapper?this.wrapper.addClass("e-disable"):this.element.addClass("e-disable");this.model.showScale?this._renderScale(!0):this._setWrapperHeight();this.model.enableRTL&&this._checkRTL();this.model.showRoundedCorner&&this._roundedCorner()},_roundedCorner:function(){this.element.addClass("e-corner")},_sharpedCorner:function(){this.element.removeClass("e-corner")},_handleAlignment:function(n){var t=-(this.firstHandle.outerWidth()/2)+"px",i;i=this.model.orientation!="vertical"?n?"0 "+t+" 0 0":"0 0 0 "+t:n?t+" 0 0 0":"0 0 "+t+" 0";this.element.children(".e-handle").css("margin",i)},_checkRTL:function(){var i,n,t;this.model.showButtons&&this._valueChanged&&(this.element.siblings(".e-sliderbtn").remove(),this._renderButtons());i=this.model.enableRTL;n=this.model.orientation!="vertical"?this.horDir:this.verDir;i?(this.model.orientation!="vertical"?this.wrapper.addClass("e-rtl"):this.wrapper.addClass("e-top-to-bottom"),this.horDir="right",this.verDir="top"):(this.wrapper.removeClass("e-rtl e-top-to-bottom"),this.horDir="left",this.verDir="bottom");(!this.model.showButtons||this.model.showButtons&&this.model.enableRTL)&&this._changeVerticalScaleDir(this.model.showScale);t=this.model.orientation!="vertical"?this.horDir:this.verDir;n!=t&&(this.firstHandle.css(t,this.firstHandle[0].style[n]).css(n,"auto"),this.model.sliderType!="default"&&(this.header.css(t,this.header[0].style[n]).css(n,"auto"),this.model.sliderType=="range"&&this.secondHandle.css(t,this.secondHandle[0].style[n]).css(n,"auto")));this._handleAlignment(i)},_setOrientation:function(){this.model.orientation!="vertical"?this.wrapper.addClass("e-horizontal"):(this.wrapper.addClass("e-vertical"),this.firstHandle.css(this.verDir,"0"))},_changeVerticalScaleDir:function(n){var t,i;n&&(t=this.wrapper.find(".e-v-scale li"),t.length>0&&(i=t.toArray().reverse(),t.remove(),this.wrapper.find(".e-v-scale").append(i)))},_setHandleSize:function(){if(this.model.height!=null&&this.model.orientation=="horizontal"||this.model.width!=null&&this.model.orientation=="vertical"){var n;n=this.model.orientation!="vertical"?this.wrapper.height()+2:this.wrapper.width()+2;this.element.find(".e-handle").height(n).width(n)}else this.wrapper.addClass("e-default-wrap"),this.element.find(".e-handle").addClass("e-default")},_disabled:function(n){n?this.disable():this.enable()},_sliderOptions:function(n,t){this._unWireEvents();this._destroy();this.model[n]=t;this._init()},_scaleOptions:function(n,t){this.model.showScale&&(this._destroyScale(),this.model[n]=t,this._renderScale(!0),this.model.enableRTL&&this._changeVerticalScaleDir(!0))},_showTooltip:function(){if(this.model.showTooltip){this._timeOut&&clearTimeout(this._timeOut);var i=this.tooltip?n("body .e-tooltipbox").text().replace(/\s+/g,"").replace("-",","):"";if(this.tooltip&&this.tooltip.length&&this.tooltip.css("display")!="none"&&this._getHandle()[0]==this._oldHandle&&i==this.preValue){this._getHandleValue().toString()!=this.preValue&&this._setTooltipPosition();return}this._oldHandle=this._getHandle()[0];n("body .e-tooltipbox").remove();this.tooltip=t.buildTag("div.e-tooltipbox "+this.model.cssClass+" e-corner",{role:"tooltip"}).css(this._getOffset(this._getHandle()));n("body").append(this.tooltip);this.model.orientation=="vertical"&&this.tooltip.addClass("e-vertical");this._setTooltipPosition()}},_hideTooltip:function(){if(this.model.showTooltip){var n=this;this._timeOut=setTimeout(function(){n.tooltip.fadeOut(800)},1500)}},_showhideTooltip:function(n){this.model.showTooltip&&n&&(this._showTooltip(),this._timeOut&&clearTimeout(this._timeOut),this._hideTooltip())},_setTooltipPosition:function(){var i,r,s,e,u,t,o,l,f,h,c,a;this.model.showTooltip&&(this._updateTooltipValue(),o=5,u=this._getHandle(),t=this._getOffset(u),l=this._getOffset(this.tooltip),f=n(u).outerHeight()-n(u).height(),this.model.orientation=="vertical"?(e=(this.tooltip.outerHeight()-u.outerHeight())/2,s=u.outerWidth()+o,i=t.top-e,r=t.left+s,h=n(window).height(),window.pageYOffset>0&&(h+=window.pageYOffset),i<0?i=0:h<i+this.tooltip.outerHeight()&&(i=h-this.tooltip.outerHeight()-f),n(window).width()<r+this.tooltip.outerWidth()&&(r=t.left-this.tooltip.outerWidth()-f)):(l.left+this.tooltip.outerWidth()>n(window).width()&&this.tooltip.css({left:"0px"}),s=(this.tooltip.outerWidth()-u.outerWidth())/2,e=this.tooltip.outerHeight()+o,i=t.top-e,r=t.left-s,c=n(window).width(),window.pageXOffset>0&&(c+=window.pageXOffset),r<0?r=0:c<r+this.tooltip.outerWidth()&&(r=c-this.tooltip.outerWidth()-f),(i<0||t.top<e)&&(t.top+u.outerHeight()+f+this.tooltip.outerHeight()>n(window).height()?(i=t.top,r=t.left>this.tooltip.outerWidth()+o+f?t.left-(this.tooltip.outerWidth()+f):t.left+(u.outerWidth()+o+f)):i=t.top+u.outerHeight()+f)),a=this._maxZindex(),this.tooltip.css({top:i,left:r,zIndex:a+1}))},_getOffset:function(n){return t.util.getOffset(n)},_maxZindex:function(){return t.util.getZindexPartial(this.element,this.popup)},_updateTooltipValue:function(){var t=0,i=1,n;this.model.enableRTL&&(t=1,i=0);n=this.model.tooltipChange?this._raiseEvent("tooltipChange"):this._getHandleValue();this.tooltip[0].innerHTML=this.model.sliderType!="range"?n:n[t]+" - "+n[i]},_increaseHeaderWidth:function(n){if(this.model.sliderType!="default"){var i="width",r=this.horDir,t={};this.model.orientation=="vertical"&&(i="height",r=this.verDir);this.model.sliderType=="range"?(t[i]=this.handlePos-this.handlePos2+"%",t[r]=this.handlePos2+"%"):(t[i]=this.handlePos+"%",t[r]=0);n?this.header.animate(t,this.model.animationSpeed):this.header.css(t)}},_setSliderValue:function(){this._validateStartEnd();this.model.sliderType=="range"?this._validateRangeValue(this.values()):this._validateValue(this.value());this.preValue=this.getValue().toString()},_hoverOnHandle:function(t){n(t.currentTarget).addClass("e-hover")},_leaveFromHandle:function(t){n(t.currentTarget).removeClass("e-hover")},_firstHandleClick:function(i){if(i.preventDefault(),this.firstHandle.focus().addClass("e-no-tab"),this._raiseEvent("start"))return!1;this.mouseDownPos=this.handlePos;this.model.readOnly||this._on(n(document),t.eventType.mouseMove,this._firstHandleMove);this._on(n(document),t.eventType.mouseUp,this._firstHandleUp);this._on(n(document),"mouseleave",this._firstHandleUp);this._showTooltip()},_firstHandleMove:function(n){n.preventDefault();n=n.type=="touchmove"?n.originalEvent.changedTouches[0]:n;var t={x:n.pageX,y:n.pageY};this.handlePos=this._xyToPosition(t);this.model.sliderType=="range"&&this.handlePos<this.handlePos2&&(this.handlePos=this.handlePos2);this.handlePos!=this.preHandlePos&&(this.preHandlePos=this.handlePos,this.handleVal=this._positionToValue(this.handlePos),this._increaseHeaderWidth(!1),this._setHandlePosition(!1,!1,!1),this._setTooltipPosition(),this._updateModelValue(),this._raiseEvent("slide"))},_firstHandleUp:function(i){i.preventDefault();this._off(n(document),t.eventType.mouseMove,this._firstHandleMove);this._off(n(document),t.eventType.mouseUp,this._firstHandleUp);this._off(n(document),"mouseleave",this._firstHandleUp);this._timeOut&&clearTimeout(this._timeOut);this._hideTooltip();this.mouseDownPos!=this.handlePos&&this._raiseChangeEvent()},_secondHandleClick:function(i){if(i.preventDefault(),this.secondHandle.focus().addClass("e-no-tab"),this._raiseEvent("start"))return!1;this.mouseDownPos2=this.handlePos2;this.model.readOnly||this._on(n(document),t.eventType.mouseMove,this._secondHandleMove);this._on(n(document),t.eventType.mouseUp,this._secondHandleUp);this._on(n(document),"mouseleave",this._secondHandleUp);this._showTooltip()},_secondHandleMove:function(n){n.preventDefault();n=n.type=="touchmove"?n.originalEvent.changedTouches[0]:n;var t={x:n.pageX,y:n.pageY};this.handlePos2=this._xyToPosition(t);this.handlePos2>this.handlePos&&(this.handlePos2=this.handlePos);this.handlePos2!=this.preHandlePos2&&(this.preHandlePos2=this.handlePos2,this.handleVal2=this._positionToValue(this.handlePos2),this._increaseHeaderWidth(!1),this._setHandlePosition(!1,!1,!1),this._setTooltipPosition(),this._updateModelValue(),this._raiseEvent("slide"))},_secondHandleUp:function(i){i.preventDefault();this._off(n(document),t.eventType.mouseMove,this._secondHandleMove);this._off(n(document),t.eventType.mouseUp,this._secondHandleUp);this._off(n(document),"mouseleave",this._secondHandleUp);this._timeOut&&clearTimeout(this._timeOut);this._hideTooltip();this.mouseDownPos2!=this.handlePos2&&this._raiseChangeEvent()},_focusInHandle:function(t){this._isFocused||(this._isFocused=!0,n(t.currentTarget).addClass("e-focus"),this.model.readOnly||this._on(n(document),"keydown",this._moveHandle),this.model.allowMouseWheel&&!this.model.readOnly&&this._on(this.element,"mousewheel DOMMouseScroll",this._moveHandle),this.activeHandle=n(t.currentTarget).is(this.firstHandle)?1:2,this._setZindex())},_focusOutHandle:function(i){n(i.relatedTarget).is("button")&&n(i.target).parent().siblings().is(i.relatedTarget)||t.isNullOrUndefined(i.relatedTarget)&&!t.isNullOrUndefined(i.originalEvent.toElement)&&n(i.originalEvent.toElement).is("button")&&n(i.target).parent().siblings().is(i.originalEvent.toElement)||(this._isFocused=!1,this.model.showTooltip&&this.tooltip&&this.tooltip.fadeOut(800),this.element.find(".e-no-tab").removeClass("e-no-tab"),n(i.currentTarget).removeClass("e-focus"),this._off(n(document),"keydown",this._moveHandle),this._off(this.element,"mousewheel DOMMouseScroll",this._moveHandle))},_moveHandle:function(n){var t,i,u,r,f,e;(n.type=="mousewheel"||n.type=="DOMMouseScroll")&&n.preventDefault();u=this._getHandleIndex(this.activeHandle)-1;(n.type=="mousewheel"||n.type=="DOMMouseScroll")&&(r=n.originalEvent,r.wheelDelta?delta=r.wheelDelta/120:r.detail&&(delta=-r.detail/3),t=delta>0?"add":"sub");switch(n.keyCode||n.originalEvent.wheelDelta){case-120:case 37:case 40:this._getHandle().addClass("e-no-tab");n.preventDefault();t="sub";break;case 120:case 38:case 39:this._getHandle().addClass("e-no-tab");n.preventDefault();t="add";break;case 36:if(this._getHandle().addClass("e-no-tab"),n.preventDefault(),this._raiseEvent("start"))return!1;this.model.sliderType!="range"&&this.value()!=this.model.minValue?this._changeHandleValue(this.model.minValue,this.model.enableAnimation):this.model.sliderType=="range"&&(i=this.activeHandle==2?this.model.minValue:this.handleVal2,this.values()[u]!=i&&this._changeHandleValue(i,this.model.enableAnimation));break;case 35:if(this._getHandle().addClass("e-no-tab"),n.preventDefault(),this._raiseEvent("start"))return!1;this.model.sliderType!="range"&&this.value()!=this.model.maxValue?this._changeHandleValue(this.model.maxValue,this.model.enableAnimation):this.model.sliderType=="range"&&(i=this.activeHandle==1?this.model.maxValue:this.handleVal,this.values()[u]!=i&&this._changeHandleValue(i,this.model.enableAnimation));break;case 27:this._getHandle().addClass("e-no-tab");n.preventDefault();this._getHandle().focusout()}if(t=="add"||t=="sub"){if(this._raiseEvent("start"))return!1;f=this.activeHandle==1?this.handleVal:this.handleVal2;e=t=="add"?this._add(f,this.model.incrementStep,!0):this._add(f,this.model.incrementStep,!1);this._changeHandleValue(e,!1)}},_changeHandleValue:function(n,t){var i=null;this.activeHandle==1?(this.handleVal=this._checkHandleValue(n),this.handlePos=this._checkHandlePosition(this.handleVal),this.model.sliderType=="range"&&this.handlePos<this.handlePos2&&(this.handlePos=this.handlePos2,this.handleVal=this.handleVal2),this.handlePos!=this.preHandlePos&&(i=this.preHandlePos=this.handlePos)):(this.handleVal2=this._checkHandleValue(n),this.handlePos2=this._checkHandlePosition(this.handleVal2),this.model.sliderType=="range"&&this.handlePos<this.handlePos2&&(this.handlePos2=this.handlePos,this.handleVal2=this.handleVal),this.handlePos2!=this.preHandlePos2&&(i=this.preHandlePos2=this.handlePos2));i!=null&&(this._increaseHeaderWidth(t),this._setHandlePosition(t,!0,!0))},_sliderBarClick:function(t){if(this.model.readOnly)return!1;if(t.target==this.target||this.model.sliderType!="default"&&t.target==this.header[0]||n(t.target).hasClass("e-tick")||n(t.target).hasClass("e-scale")||t.target==this.wrapper[0]){if(t.preventDefault(),this._raiseEvent("start"))return!1;var u={x:t.pageX,y:t.pageY},i=this._xyToPosition(u),r=this._positionToValue(i);this.model.sliderType=="range"&&this.handlePos-i>i-this.handlePos2?(this.handlePos2=this.preHandlePos2=i,this.handleVal2=r,this.activeHandle=2):(this.handlePos=this.preHandlePos=i,this.handleVal=r,this.activeHandle=1);this._getHandle().focus().addClass("e-no-tab");this.model.sliderType!="default"&&this._increaseHeaderWidth(this.model.enableAnimation);this._setHandlePosition(this.model.enableAnimation,!0,!0)}},_setHandlePosition:function(n,t,i){var r=this._getHandle(),e=this,u={},f,o,s;f=this.activeHandle==1?this.handlePos:this.handlePos2;o=this.activeHandle==1?this.handleVal:this.handleVal2;r.attr("aria-label",o);s=this.model.orientation=="vertical"?this.verDir:this.horDir;u[s]=f+"%";f==0?this.model.sliderType!="range"&&this._getHandle().addClass("e-handle-start"):this._getHandle().removeClass("e-handle-start");n?r.animate(u,this.model.animationSpeed,function(){e._showhideTooltip(t);i&&e._raiseChangeEvent()}):(r.css(u),this._showhideTooltip(t),i&&this._raiseChangeEvent())},_xyToPosition:function(n){if(this.model.minValue==this.model.maxValue)return 100;if(this.model.orientation!="vertical")var r=n.x-this.element.offset().left,i=this.element.width()/100,t=r/i;else var u=n.y-this.element.offset().top,i=this.element.height()/100,t=100-u/i;return(t=this._stepValueCalculation(t),t<0?t=0:t>100&&(t=100),this.model.enableRTL)?100-t:t},_updateValue:function(){this.handleVal=this._checkHandleValue(this.value());this.handlePos=this._checkHandlePosition(this.handleVal);this.preHandlePos=this.handlePos;this.activeHandle=1},_setValue:function(n){this._updateValue();this._increaseHeaderWidth(n);this._setHandlePosition(n,!1,!0)},_updateRangeValue:function(){var n=this.values();this.handleVal=this._checkHandleValue(n[1]);this.handleVal2=this._checkHandleValue(n[0]);this.handlePos=this._checkHandlePosition(this.handleVal);this.handlePos2=this._checkHandlePosition(this.handleVal2);this.handlePos<this.handlePos2&&(this.handlePos=this.handlePos2,this.handleVal=this.handleVal2);this.preHandlePos=this.handlePos;this.preHandlePos2=this.handlePos2},_setRangeValue:function(n){this._updateRangeValue();this._increaseHeaderWidth(n);this.activeHandle=1;this._setHandlePosition(n,!1,!1);this.activeHandle=2;this._setHandlePosition(n,!1,!0)},_checkHandlePosition:function(n){if(this.model.minValue==this.model.maxValue)return 100;var t=this._tempStartEnd();return n>=t.start&&n<=t.end?100*(n-this.model.minValue)/(this.model.maxValue-this.model.minValue):n<t.start?0:100},_checkHandleValue:function(n){if(this.model.minValue==this.model.maxValue)return this.model.minValue;var t=this._tempStartEnd();return n<t.start?n=t.start:n>t.end&&(n=t.end),n},_tempStartEnd:function(){return this.model.minValue>this.model.maxValue?{start:this.model.maxValue,end:this.model.minValue}:{start:this.model.minValue,end:this.model.maxValue}},_positionToValue:function(n){var t=this.model.maxValue-this.model.minValue,i=this._round(t*n/100);return this._add(i,this.model.minValue,!0)},_getHandle:function(){return this.activeHandle==1?this.firstHandle:this.secondHandle},_getHandleIndex:function(n){return this.model.sliderType=="range"&&n==1?2:1},_getHandleValue:function(){return this.model.sliderType=="range"?[this.handleVal2,this.handleVal]:this.handleVal},_updateModelValue:function(){var n=this._getHandleValue();this._hidden.val(n);this.model.sliderType=="range"?this.values(n):this.value(n)},_add:function(n,t,i,r){var u=Math.pow(10,r||3);return i?(Math.round(n*u)+Math.round(t*u))/u:(Math.round(n*u)-Math.round(t*u))/u},_round:function(n){var t=this.model.incrementStep.toString().split(".");return t[1]?parseFloat(n.toFixed(t[1].length)):Math.round(n)},_raiseChangeEvent:function(){this._updateModelValue();this.initialRender?this.initialRender=!1:this.getValue().toString()!=this.preValue.toString()&&(this._raiseEvent("change"),this._raiseEvent("stop"),this.preValue=this.getValue().toString(),this._isInteraction=!0)},_raiseEvent:function(n){var t={id:this.target.id,value:this._getHandleValue(),sliderIndex:this._getHandleIndex(this.activeHandle)},i;return(n=="change"&&(t={id:this.target.id,isInteraction:this._isInteraction,value:this._getHandleValue(),sliderIndex:this._getHandleIndex(this.activeHandle)}),n=="tooltipChange"&&(t={id:this.target.id,isInteraction:this._isInteraction,value:this._getHandleValue(),sliderIndex:this._getHandleIndex(this.activeHandle)}),i=this._trigger(n,t),n=="tooltipChange")?t.value:i},_setZindex:function(){this.model.sliderType=="range"&&(this.activeHandle==1?(this.firstHandle.css("z-index",2),this.secondHandle.css("z-index",1)):(this.firstHandle.css("z-index",1),this.secondHandle.css("z-index",2)))},_stepValueCalculation:function(n){this.model.incrementStep==0&&(this.model.incrementStep=1);var i=this.model.incrementStep/((this.model.maxValue-this.model.minValue)/100),t=n%Math.abs(i);return t!=0&&(i/2>t?n-=t:n+=Math.abs(i)-t),n},_wireEvents:function(){this._on(this.wrapper,"mousedown",this._sliderBarClick);this._on(this.firstHandle,t.eventType.mouseDown,this._firstHandleClick);this._on(this.firstHandle,"mouseenter",this._hoverOnHandle);this._on(this.firstHandle,"mouseleave",this._leaveFromHandle);this._on(this.firstHandle,"focusin",this._focusInHandle);this._on(this.firstHandle,"focusout",this._focusOutHandle);this.model.sliderType=="range"&&(this._on(this.secondHandle,t.eventType.mouseDown,this._secondHandleClick),this._on(this.secondHandle,"mouseenter",this._hoverOnHandle),this._on(this.secondHandle,"mouseleave",this._leaveFromHandle),this._on(this.secondHandle,"focusin",this._focusInHandle),this._on(this.secondHandle,"focusout",this._focusOutHandle))},_unWireEvents:function(){this._off(this.wrapper,"mousedown");this._off(this.firstHandle,t.eventType.mouseDown);this._off(this.firstHandle,"mouseenter");this._off(this.firstHandle,"mouseleave");this._off(this.firstHandle,"focusin");this._off(this.firstHandle,"focusout");this.model.sliderType=="range"&&(this._off(this.secondHandle,t.eventType.mouseDown),this._off(this.secondHandle,"mouseenter"),this._off(this.secondHandle,"mouseleave"),this._off(this.secondHandle,"focusin"),this._off(this.secondHandle,"focusout"))}});t.SliderType={Default:"default",MinRange:"minrange",Range:"range"}}(jQuery,Syncfusion),function(n,t){t.widget("ejSplitButton","ej.SplitButton",{element:null,model:null,validTags:["button"],_setFirst:!1,_rootCSS:"e-splitbutton",defaults:{size:"normal",width:"",height:"",enabled:!0,htmlAttributes:{},text:null,contentType:"textonly",imagePosition:"imageleft",buttonMode:"split",arrowPosition:"right",targetID:null,target:null,showRoundedCorner:!1,prefixIcon:null,suffixIcon:null,cssClass:"",enableRTL:!1,create:null,beforeOpen:null,click:null,itemMouseOver:null,itemMouseOut:null,itemSelected:null,open:null,close:null,destroy:null,popupPosition:"down"},dataTypes:{size:"string",enabled:"boolean",showRoundedCorner:"boolean",text:"string",contentType:"enum",imagePosition:"enum",buttonMode:"enum",arrowPosition:"enum",target:"string",targetID:"string",prefixIcon:"string",suffixIcon:"string",cssClass:"string",enableRTL:"boolean",htmlAttributes:"data"},disable:function(){this.element.addClass("e-disable");this.wrapper.addClass("e-disable");this.contstatus&&this._hidePopup();this.model.buttonMode==t.ButtonMode.Split&&this.dropbutton.addClass("e-disable").attr("aria-disabled",!0);this.model.buttonMode==t.ButtonMode.Dropdown&&this.btnimgwrap.addClass("e-disable").attr("aria-disabled",!0);this.model.enabled=!1},visible:function(n){n?(this.wrapper.removeClass("e-split-btn-hide"),this.wrapper.find(".e-icon").css("visibility","")):(this.wrapper.addClass("e-split-btn-hide"),this.wrapper.find(".e-icon").css("visibility","hidden"))},enable:function(){this.element.removeClass("e-disable");this.wrapper.removeClass("e-disable");this.model.buttonMode==t.ButtonMode.Split&&this.dropbutton.removeClass("e-disable").attr("aria-disabled",!1);this.model.buttonMode==t.ButtonMode.Dropdown&&this.btnimgwrap.removeClass("e-disable").attr("aria-disabled",!1);this.model.enabled=!0},hide:function(){this.contstatus&&this._hidePopup()},show:function(){this.contstatus||(this.model.buttonMode==t.ButtonMode.Dropdown?this.element.click():this.model.buttonMode==t.ButtonMode.Split&&this.dropbutton.click())},setPopupPosition:function(n){this._setPosition=!0;this._val=n},_init:function(){this._cloneElement=this.element.clone();this._setPosition=!1;this._initialize();this._controlStatus(this.model.enabled);this._documentClickHandler=n.proxy(this._documentClick,this);this._wireEvents()},_createElement:function(t,i){var r=document.createElement(t);return this._setAttributes(r,i),n(r)},_setAttributes:function(n,t){for(var i in t)n.setAttribute(i,t[i])},_destroy:function(){this.contstatus&&this._hide();this.splitwrap.removeClass("e-drop");this.splitwrap.removeClass("e-btn-"+this.model.size);this.innerWrap.removeClass("e-splitarrowright e-splitarrowleft e-splitarrowbottom e-splitarrowtop");this.element.removeClass(this.model.cssClass+"e-ntouch e-select e-corner e-btn e-disable e-split-btn e-droparrowright e-droparrowleft e-droparrowbottom e-droparrowtop e-left-btn e-txt").empty();this.element.append(this._cloneElement.text());this.element.insertAfter(this.wrapper);this.wrapper.remove();this._contextObj&&this._contextObj.model&&this._contextObj.destroy();this._contextObj&&(this._contextObj=null);n(this.model.target).show();n(this.model.target).insertAfter(this.element);this._off(this.element,"click",this._btnMouseClick)},_setModel:function(n){for(var t in n)switch(t){case"size":this._setSize(n[t]);break;case"width":this._splitbtnWidth(n[t]);break;case"height":this._splitbtnHeight(n[t]);break;case"contentType":this._setContentType(n[t]);break;case"imagePosition":this._setImagePosition(n[t]);break;case"buttonMode":this._setButtonMode(n[t]);break;case"arrowPosition":this._setArrowPosition(n[t]);break;case"text":this._setText(n[t]);break;case"prefixIcon":this._setMajorIcon(n[t]);break;case"suffixIcon":this._setMinorIcon(n[t]);break;case"enabled":this._controlStatus(n[t]);break;case"targetID":case"target":this._setTarget(n[t]);break;case"showRoundedCorner":this._roundedCorner(n[t]);break;case"cssClass":this._setSkin(n[t]);break;case"enableRTL":this._setRTL(n[t]);break;case"htmlAttributes":this._addAttr(n[t]);break;case"popupPosition":this._setPopupPosition(n[t])}},_setText:function(n){this.model.contentType==t.ContentType.TextOnly?this.model.buttonMode==t.ButtonMode.Split?this.element.html(n):(this.element.empty(),this.imgtxtwrap=n,this.model.arrowPosition==t.ArrowPosition.Left||this.model.arrowPosition==t.ArrowPosition.Top?this.element.append(this.btnimgwrap,this.imgtxtwrap):this.element.append(this.imgtxtwrap,this.btnimgwrap)):this.textspan.html(n)},_setMajorIcon:function(n){this.majorimgtag.removeClass(this.model.prefixIcon);this.majorimgtag.addClass(n)},_setMinorIcon:function(n){this.minorimgtag.removeClass(this.model.suffixIcon);this.minorimgtag.addClass(n)},_setTarget:function(n){n.substring(0,1)=="."||n.substring(0,1)=="#"?this.model.target=n:(this.model.targetID=n,this.model.target="#"+n);this._renderContxtMenu()},_setContentType:function(n){n!=this.model.contentType&&(this.element.empty(),this.model.contentType=n,this._renderButtonContent())},_setImagePosition:function(n){(n==t.ImagePosition.ImageRight||n==t.ImagePosition.ImageLeft||n==t.ImagePosition.ImageBottom||n==t.ImagePosition.ImageTop)&&this.model.contentType==t.ContentType.TextAndImage&&n!=this.model.imagePosition&&(this.element.empty(),this.model.imagePosition=n,this._renderButtonContent())},_setButtonMode:function(n){(n==t.ButtonMode.Split||n==t.ButtonMode.Dropdown)&&n!=this.model.buttonMode&&(this._destroy(),this.model.buttonMode=n,this._init())},_setArrowPosition:function(n){(n==t.ArrowPosition.Right||n==t.ArrowPosition.Left||n==t.ArrowPosition.Bottom||n==t.ArrowPosition.Top)&&(this.model.buttonMode==t.ButtonMode.Dropdown&&n!=this.model.arrowPosition?(this.model.arrowPosition=n,this.element.empty(),this._setSize(this.model.size),this.element.removeClass("e-droparrowright e-droparrowleft e-droparrowbottom e-droparrowtop"),this._renderButtonContent()):this.model.buttonMode==t.ButtonMode.Split&&n!=this.model.arrowPosition&&(this.model.arrowPosition=n,this._setSize(this.model.size),this.innerWrap.removeClass("e-splitarrowright e-splitarrowleft e-splitarrowbottom e-splitarrowtop"),this._setRTL(this.model.enableRTL)))},_setPopupPosition:function(n){this.model.popupPosition=n;this.model.popupPosition=="down"&&this.dropdownimg.addClass("e-arrow-sans-down").removeClass("e-arrow-sans-up");this.model.popupPosition=="up"&&this.dropdownimg.addClass("e-arrow-sans-up").removeClass("e-arrow-sans-down")},_setRTL:function(n){if(this.model.buttonMode==t.ButtonMode.Split){this.dropdownimg.removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down");switch(this.model.arrowPosition){case t.ArrowPosition.Right:this.innerWrap.addClass("e-splitarrowright");break;case t.ArrowPosition.Left:this.innerWrap.addClass("e-splitarrowleft");break;case t.ArrowPosition.Bottom:this.innerWrap.addClass("e-splitarrowbottom");break;case t.ArrowPosition.Top:this.innerWrap.addClass("e-splitarrowtop");this.dropdownimg.addClass("e-arrow-sans-up").removeClass("e-arrow-sans-down")}n==!0?(this.innerWrap.hasClass("e-splitarrowleft")?"":this.splitwrap.addClass("e-rtl e-btnrtl"))&&this._contextObj&&this._contextObj.model&&this._contextObj.element.addClass("e-rtl"):this.splitwrap.removeClass("e-rtl e-btnrtl")&&this._contextObj&&this._contextObj.model&&this._contextObj.element.removeClass("e-rtl")}else n==!0?this.splitwrap.addClass("e-rtl")&&this._contextObj&&this._contextObj.model&&this._contextObj.element.addClass("e-rtl"):this.splitwrap.removeClass("e-rtl")&&this._contextObj&&this._contextObj.model&&this._contextObj.element.removeClass("e-rtl");this.model.enableRTL=n;this._roundedCorner(this.model.showRoundedCorner)},_roundedCorner:function(t){t?(this.element.addClass("e-corner"),n(this.model.target).length>0&&n(this.model.target).addClass("e-corner")):(this.element.removeClass("e-corner"),n(this.model.target).length>0&&n(this.model.target).removeClass("e-corner"))},_controlStatus:function(n){n?this.enable():this.disable()},_setSkin:function(n){this.element.removeClass(this.model.cssClass);this.model.buttonMode==t.ButtonMode.Split&&(this.dropbutton.removeClass(this.model.cssClass),this.dropbutton.addClass(n));this.element.addClass(n);this._contextObj&&this._contextObj.model&&this._contextObj.option("cssClass",n)},_initialize:function(){this.element.is("button")||this.element.is("ej-splitbutton")?this._render():this.element.removeClass("e-splitbutton");this._timeout=null},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.wrapper.addClass(n):t=="disabled"&&n=="disabled"?i._controlStatus(!1):i.wrapper.attr(t,n)})},_render:function(){this.element.addClass(this.model.cssClass+" e-btn e-select e-split-btn "+(t.isTouchDevice()?"":"e-ntouch"));this._setAttributes(this.element[0]);this.model.text==null||this.model.text==""?this.model.text=this.element.text():this._setAttributes(this.element[0],{"aria-describedby":this.model.text});this.model.buttonMode!=t.ButtonMode.Split&&this.model.buttonMode!=t.ButtonMode.Dropdown&&(this.model.buttonMode=t.ButtonMode.Split);this.model.arrowPosition!=t.ArrowPosition.Right&&this.model.arrowPosition!=t.ArrowPosition.Left&&this.model.arrowPosition!=t.ArrowPosition.Bottom&&this.model.arrowPosition!=t.ArrowPosition.Top&&(this.model.arrowPosition=t.ArrowPosition.Right);this.element.empty();this.splitwrap=this.model.buttonMode==t.ButtonMode.Split?this._createElement("span",{"class":"e-split e-widget"}):this._createElement("span",{"class":"e-split e-drop e-widget"});this.splitwrap.insertBefore(this.element);this.innerWrap=this._createElement("span",{"class":"e-in-wrap e-box e-padding"});this.splitwrap[0].appendChild(this.innerWrap[0]);this.wrapper=this.splitwrap;this.dropdownimg=this._createElement("span",{"class":"e-icon e-arrow-sans-down"});this.dropdownimage=this._createElement("span",{"class":"e-icon e-arrow-sans-up"});this.btnimgwrap=this._createElement("span",{"class":"e-split-btn-div e-btn-span"});this.model.popupPosition=="up"?this.btnimgwrap[0].appendChild(this.dropdownimage[0]):this.btnimgwrap[0].appendChild(this.dropdownimg[0]);this.model.buttonMode==t.ButtonMode.Split&&(this.dropbutton=t.buildTag("button.e-split-btn e-btn e-select "+this.model.cssClass+" e-drp-btn"+(t.isTouchDevice()?"":" e-ntouch"),"",{},{type:"button","data-role":"none",id:this.element[0].id+"drpbtn"}),this.dropbutton[0].appendChild(this.btnimgwrap[0]),this.dropbutton.insertAfter(this.element),this.model.contentType==t.ContentType.TextOnly?this.dropbutton.addClass("e-btn-txt"):this.dropbutton.addClass("e-rht-btn"));this._setSize(this.model.size);this.element.addClass("e-left-btn");this._renderButtonContent();this.model.buttonMode==t.ButtonMode.Dropdown?this.innerWrap[0].appendChild(this.element[0]):(this.innerWrap[0].appendChild(this.element[0]),this.innerWrap[0].appendChild(this.dropbutton[0]));this.model.target==null&&this.model.targetID!=null&&(this.model.target="#"+this.model.targetID);n(this.model.target).hide();this._roundedCorner(this.model.showRoundedCorner);this._setRTL(this.model.enableRTL);this._addAttr(this.model.htmlAttributes)},_renderButtonContent:function(){if(this.textspan=t.buildTag("span.e-btntxt",this.model.text),this.majorimgtag=t.buildTag("span").addClass(this.model.prefixIcon),this.minorimgtag=t.buildTag("span").addClass(this.model.suffixIcon),this.imgtxtwrap=t.buildTag("span").addClass("e-btn-span"),this.model.contentType==t.ContentType.TextAndImage)switch(this.model.imagePosition){case t.ImagePosition.ImageRight:this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.majorimgtag,this.textspan);break;case t.ImagePosition.ImageBottom:this.majorimgtag.css("display","inline-table");this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageTop:this.majorimgtag.css("display","inline-table");this.imgtxtwrap.append(this.majorimgtag,this.textspan)}else this.model.contentType==t.ContentType.ImageTextImage?this.imgtxtwrap.append(this.majorimgtag,this.textspan,this.minorimgtag):this.model.contentType==t.ContentType.ImageBoth?this.imgtxtwrap.append(this.majorimgtag,this.minorimgtag):this.model.contentType==t.ContentType.ImageOnly?this.imgtxtwrap.append(this.majorimgtag):(this.element.addClass("e-txt"),this.imgtxtwrap=this.model.text);this.model.buttonMode==t.ButtonMode.Dropdown?this._renderDropdownArrow():this.element.append(this.imgtxtwrap)},_renderDropdownArrow:function(){this.btnimgwrap.css("position","absolute");this.dropdownimg.removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down");switch(this.model.arrowPosition){case t.ArrowPosition.Right:this.element.addClass("e-droparrowright");this.element.append(this.imgtxtwrap,this.btnimgwrap);break;case t.ArrowPosition.Left:this.element.addClass("e-droparrowleft");this.element.append(this.btnimgwrap,this.imgtxtwrap);break;case t.ArrowPosition.Bottom:this.element.addClass("e-droparrowbottom");this.element.append(this.imgtxtwrap,this.btnimgwrap);break;case t.ArrowPosition.Top:this.element.addClass("e-droparrowtop");this.dropdownimg.addClass("e-arrow-sans-up").removeClass("e-arrow-sans-down");this.element.append(this.btnimgwrap,this.imgtxtwrap)}},_setSize:function(n){this.wrapper.css({height:"",width:""});switch(n){case"mini":this._splitbtnSize(n);break;case"small":this._splitbtnSize(n);break;case"medium":this._splitbtnSize(n);break;case"large":this._splitbtnSize(n);break;default:this._splitbtnSize(n)}(this.model.arrowPosition==t.ArrowPosition.Bottom||this.model.arrowPosition==t.ArrowPosition.Top)&&this.model.height==""&&this.splitwrap.addClass("e-btn-arrowsplit-"+n);var i,r=this.model.height===""?this.wrapper.outerHeight()+"px":this.model.height;this._splitbtnHeight(r);this.model.size!=="normal"?(i=this.model.width===""?this.wrapper.outerWidth()+"px":this.model.width,this._splitbtnWidth(i)):this.model.width!==""&&(i=this.model.width,this._splitbtnWidth(i))},_splitbtnSize:function(n){this.splitwrap.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal e-btn-arrowsplit-large e-btn-arrowsplit-small e-btn-arrowsplit-mini e-btn-arrowsplit-medium e-btn-arrowsplit-normal");(this.model.arrowPosition==t.ArrowPosition.Left||this.model.arrowPosition==t.ArrowPosition.Right)&&this.splitwrap.addClass("e-btn-"+n)},_splitbtnHeight:function(n){(n==""||n==null)&&(n="30px");this.splitwrap.css("height",n)},_splitbtnWidth:function(n){this.splitwrap.css("width",n)},_renderContxtMenu:function(){this.model.target!=null&&n(this.model.target).attr("id")==null&&this.model.target.substring(0,1)=="."&&n(this.model.target).attr("id",this.element.attr("id")+"_"+this.model.target.replace(".",""));n(this.model.target).ejMenu({menuType:t.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"",fields:this.model.fields,showArrow:!0,cssClass:"e-split "+this.model.cssClass,enableRTL:this.model.enableRTL}).on("ejMenuclose",n.proxy(this._onKeyDown,this));this._contextObj=n(this.model.target).ejMenu("instance")},_onKeyDown:function(n){n.keyCode==27&&this._hide()},_itemClick:function(t){t={status:this.model.enabled,ID:t.ID,text:t.text};this._trigger("itemSelected",t);n(t.element).hasClass("e-haschild")||this._hide()},_itemMouseOver:function(n){this._trigger("itemMouseOver",n)},_itemMouseOut:function(n){this._trigger("itemMouseOut",n)},_wireEvents:function(){this._on(this.element,"click",this._btnMouseClick);this._on(this.element,"mousedown",this._btnMouseDown);this.model.buttonMode==t.ButtonMode.Split&&this._on(this.dropbutton,"click",this._btnMouseClick);this._on(n(document),"mousedown",this._docrhtclk)},_btnMouseClick:function(i){this._contextObj?!this._contextObj.model&&this._renderContxtMenu():this._renderContxtMenu();var r;if(!this.model.enabled)return!1;if(!n(i.currentTarget).hasClass("e-disable"))if(i.currentTarget.id!=this.element[0].id+"drpbtn"&&this.model.buttonMode==t.ButtonMode.Split)r={status:this.model.enabled},this._trigger("click",r);else if(this.contstatus||this._trigger("beforeOpen"),this.wrapper.addClass("e-active"),this.contstatus)this._hidecontext(i);else{this._contextPosition(i);this._trigger("open");this._on(n(window),"resize",this._OnWindowResize);this.contstatus=!0;this.element.on("click",n.proxy(this._hidecontext,this));t.listenTouchEvent(n(document),t.startEvent(),this._documentClickHandler,!1,this);this._on(t.getScrollableParents(this.wrapper),"scroll",this._hidePopup)}},_OnWindowResize:function(n){this._contextPosition(n)},_contextPosition:function(i,r,u,f){var e,o,h,s;this._contextObj.model&&(e=this._setPosition?this._val:this._getXYpos(i),h=this.model.buttonMode==t.ButtonMode.Split?this.dropbutton:this.element,s=this._contextObj,o=e.x-(n(this.model.target).outerWidth()-(this.model.buttonMode==t.ButtonMode.Split?this.dropbutton.outerWidth():this.element.outerWidth())),e.x=this.model.enableRTL?this.model.popupPosition=="left"||o<n(this.model.target).outerWidth()?e.x:o:this.model.popupPosition=="left"||e.x+n(this.model.target).outerWidth()<n(window).width()?e.x:o,this._posright<0&&this.model.popupPosition=="left"&&(e.x=n(window).outerWidth()),s.option({click:n.proxy(this._itemClick,this),mouseover:n.proxy(this._itemMouseOver,this),mouseout:n.proxy(this._itemMouseOut,this)}),r?s.show(u,f,h,i):s.show(e.x,e.y,h,i))},_getXYpos:function(){var i,e,o,r,u=1,f;return i=this._getOffset(this.model.buttonMode==t.ButtonMode.Split?this.dropbutton:this.element),r=this.model.popupPosition=="right"&&!this.model.enableRTL&&this.model.arrowPosition!=t.ArrowPosition.Left&&this.model.arrowPosition!=t.ArrowPosition.Bottom&&this.model.arrowPosition!=t.ArrowPosition.Top?this.model.buttonMode==t.ButtonMode.Split?i.left+this.dropbutton.outerWidth():i.left+this.element.outerWidth():this.model.popupPosition=="left"&&(this.model.enableRTL||this.model.arrowPosition!=t.ArrowPosition.Right)&&this.model.arrowPosition!=t.ArrowPosition.Bottom&&this.model.arrowPosition!=t.ArrowPosition.Top?i.left-n(this.model.target).outerWidth():i.left,this._posright=n(window).width()-r-n(this.model.target).outerWidth(),this._posleft=r-n(this.model.target).outerHeight(),this._posrightht=n(window).height()-i.top-n(this.model.target).outerHeight(),e=this.model.popupPosition=="right"&&this._posright<0||r<0?i.left:r,f=this.model.arrowPosition==t.ArrowPosition.Top||this.model.popupPosition=="up"?i.top-n(this.model.target).outerHeight()+1:this.model.arrowPosition!=t.ArrowPosition.Top&&this.model.arrowPosition!=t.ArrowPosition.Bottom&&((this.model.arrowPosition==t.ArrowPosition.Right!=(this.model.popupPosition=="left")||this.model.arrowPosition==t.ArrowPosition.Right&&this.model.enableRTL&&this.model.popupPosition=="left")&&this.model.arrowPosition==t.ArrowPosition.Left!=(this.model.popupPosition=="right")||this.model.arrowPosition==t.ArrowPosition.Right&&this.model.enableRTL&&this.model.popupPosition=="left")&&(!this.model.enableRTL&&this.model.popupPosition=="right"||this.model.popupPosition=="left")?i.top:(this.model.buttonMode==t.ButtonMode.Split?i.top+this.dropbutton.outerHeight():i.top+this.element.outerHeight())-u,o=this.model.popupPosition=="left"&&this._posrightht<0&&this._posright>0&&this._posleft<0?i.top-n(this.model.target).outerHeight():this.model.popupPosition=="left"&&this._posrightht<0&&this._posright>0?i.top+this.element.outerHeight()-n(this.model.target).outerHeight():(this.model.popupPosition=="right"||this.model.popupPosition=="up"||this.model.popupPosition)&&this._posrightht<0&&this._posright<0?i.top-n(this.model.target).outerHeight():(this.model.popupPosition=="right"||this.model.popupPosition=="left")&&this._posrightht<0?i.top+this.element.outerHeight()-n(this.model.target).outerHeight():this.model.popupPosition=="right"&&this._posright<0&&this._posrightht>0?i.top+this.element.outerHeight():this.model.popupPosition=="down"&&this._posrightht<0&&this._posright>0?i.top-n(this.model.target).outerHeight():r<0||this._posright<0?i.top+this.element.outerHeight():f<0?this.model.buttonMode==t.ButtonMode.Split&&this.model.popupPosition=="up"&&this.model.arrowPosition!=t.ArrowPosition.Top?i.top+this.element.outerHeight()-u:i.top+(this.model.buttonMode==t.ButtonMode.Split?this.dropbutton.outerHeight()+this.element.outerHeight():this.element.outerHeight())-u:f,{x:e,y:o}},_getOffset:function(t){var i=t.offset(),r;return n("body").css("position")!="static"&&(r=n("body").offset(),i.left-=r.left,i.top-=r.top),i},_btnMouseDown:function(t){n(t.currentTarget).hasClass("e-disable")||this._docrhtclk(t)},_hidePopup:function(n){this._contextObj&&this._contextObj.hide(n);this._hide();this._off(t.getScrollableParents(this.wrapper),"scroll",this._hidePopup)},_hide:function(){this.contstatus=!1;this.wrapper.removeClass("e-active");this.element.off("click",n.proxy(this._hidecontext,this));t.listenTouchEvent(n(document),t.startEvent(),this._documentClickHandler,!0,this);this._off(n(window),"resize",this._OnWindowResize);this._off(t.getScrollableParents(this.wrapper),"scroll",this._hide);this._closeEvent()},_closeEvent:function(){this._trigger("close")},_hidecontext:function(t){((n(t.target).is(this.element)||n(t.target).is(this.dropbutton)||n(t.target).is(this.textspan)||n(t.target).is(this.dropdownimg)||n(t.target).is(this.btnimgwrap)||!n(t.target).is(this.majorimgtag)||!n(t.target).is(this.minorimgtag))&&!n(t.target).is(this.splitwrap)&&!n(t.target).parents().is(n(this.model.target))||this.element.hasClass("e-txt")||n(t.target).is(this.imgtxtwrap))&&this._hidePopup(t)},_documentClick:function(t){n(t.target).is(this.element)||n(t.target).is(this.dropbutton)||n(t.target).is(this.textspan)||n(t.target).is(this.dropdownimg)||n(t.target).is(this.btnimgwrap)||n(t.target).is(this.majorimgtag)||n(t.target).is(this.minorimgtag)||n(t.target).is(this.splitwrap)||n(t.target).parents().is(n(this.model.target))||!this.element.hasClass("e-txt")&&n(t.target).is(this.imgtxtwrap)||this._hidePopup(t)},_docrhtclk:function(n){var t,i;t=!1;n.button?t=n.button==2:n.which&&(t=n.which==3);i=n.target;t&&n.preventDefault()}});t.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"};t.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"};t.ButtonSize={Mini:"mini",Small:"small",Medium:"medium",Large:"large"};t.ButtonMode={Split:"split",Dropdown:"dropdown"};t.ArrowPosition={Right:"right",Left:"left",Top:"top",Bottom:"bottom"}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejCheckBox","ej.CheckBox",{_rootCSS:"e-checkbox",element:null,model:null,validTags:["input"],_addToPersist:["checked","checkState"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,htmlAttributes:{},checked:!1,enabled:!0,enableTriState:!1,showRoundedCorner:!1,enablePersistence:!1,cssClass:"",text:"",enableRTL:!1,idPrefix:"ej",size:"small",checkState:"uncheck",validationRules:null,validationMessage:null,validationMessages:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",enableTriState:"boolean",size:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",validationMessages:"data",htmlAttributes:"data"},observables:["checked","checkState"],checked:t.util.valueFunction("checked"),checkState:t.util.valueFunction("checkState"),_init:function(n){this._cloneElement=this.element.clone();var i=t.browserInfo();this._isIE8=i.name=="msie"&&i.version=="8.0"?!0:!1;this._isIE9=i.name=="msie"&&i.version=="9.0"?!0:!1;this._isDevice=this._checkDevice();this._setValue();this._renderControl();this.model.enableRTL&&this._setRTL();this.model.enabled&&this._wireEvents();this._setEnabled(this.model.enabled);t.isNullOrUndefined(n)||t.isNullOrUndefined(n.validationMessage)||(this.model.validationMessages=this.model.validationMessage);this.model.validationRules!=null&&(this._initValidator(),this._setValidation());this._addAttr(this.model.htmlAttributes);(this._isIE9||this._isIE8)&&this.wrapper.addClass("e-tb-cell")},_checkDevice:function(){return t.isDevice()&&t.isTouchDevice()},_setRTL:function(){n(this.maindiv).addClass("e-rtl")},_initValidator:function(){this.wrapper.closest("form").data("validator")||this.wrapper.closest("form").validate()},_setValidation:function(){var r,i,u,f;this.wrapper.find("input").rules("add",this.model.validationRules);r=this.wrapper.closest("form").data("validator");r=r?r:this.wrapper.closest("form").validate();name=this.wrapper.find("input").attr("name");r.settings.messages[name]={};for(i in this.model.validationRules)if(u=null,!t.isNullOrUndefined(this.model.validationRules[i])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){r.settings.messages[name][i]=n.validator.messages[i];for(f in this.model.validationMessages)i==f?u=this.model.validationMessages[i]:""}else u=this.model.validationRules.messages[i];r.settings.messages[name][i]=u!=null?u:n.validator.messages[i]}},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.wrapper.addClass(n):t=="name"?i.element.attr(t,n):t=="required"?i.element.attr(t,n):t=="disabled"&&n=="disabled"?i._setEnabled(!1):t=="checked"&&n=="checked"?i.checked()instanceof Array?i._updateCheckedItem():i._checked(!0):i.wrapper.attr(t,n)})},_triggerBeforeChange:function(){var n={isChecked:this._isChecked,isInteraction:!1};if(!0==this._trigger("beforeChange",n))return!1},_triggerChange:function(){var n={isChecked:this._isChecked,checkState:this.checkState(),isInteraction:!1};this._trigger("change",n)},_setModel:function(i){var r,u,f;for(r in i)switch(r){case"checked":n(this.maindiv).removeClass("e-material-animate");this.model.beforeChange&&this._triggerBeforeChange();this.checked()instanceof Array?(u=t.util.getVal(i[r]),f=u[u.length-1],this.model.value==f&&(this._isChecked=!0)):(this._isChecked=t.util.getVal(i[r]),this.checked(this._isChecked));this._isChecked?this._checked():this._unChecked();this.model.change&&this._triggerChange();break;case"enableTriState":i[r]&&(this.model.enableTriState=i[r],this._indeterminateState=i[r]);break;case"checkState":this.model.enableTriState&&(this.model.beforeChange&&this._triggerBeforeChange(),this._isChecked=t.util.getVal(i[r]),this.checkState(this._isChecked),this._changeState(this._isChecked),this._setCheckBoxState(),this.checked(this._isChecked),this.model.checkState=="indeterminate"&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array?this._updateCheckedItem():i[r]=="check"?this._hiddenInput.removeAttribute("name"):this._hiddenInput.setAttribute("name",this.model.name),this.model.change&&(this.checked()instanceof Array||(this._isChecked=this.checkState()=="uncheck"?!1:!0),this._triggerChange()));break;case"cssClass":this._changeSkin(i[r]);break;case"enableRTL":i[r]?this._setRTL():n(this.maindiv).removeClass("e-rtl");break;case"text":this._setText(i[r]);break;case"validationRules":this.model.validationRules!=null&&(this.wrapper.find("input").rules("remove"),this.model.validationMessages=null);this.model.validationRules=i[r];this.model.validationRules!=null&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessages=i[r];this.model.validationRules!=null&&this.model.validationMessages!=null&&(this._initValidator(),this._setValidation());break;case"validationMessages":this.model.validationMessages=i[r];this.model.validationRules!=null&&this.model.validationMessages!=null&&(this._initValidator(),this._setValidation());break;case"id":this._setIdAttr(i[r]);break;case"name":this.element.attr("name",i[r]);(!this._isChecked||this.spanImg.hasClass("e-chk-indeter"))&&this._hiddenInput.setAttribute("name",i[r]);this.model.name=i[r];break;case"value":this.element.attr("value",i[r]);break;case"size":this._setSize(i[r]);break;case"showRoundedCorner":this._setRoundedCorner(i[r]);break;case"enabled":this._setEnabled(i[r]);break;case"htmlAttributes":this._addAttr(i[r])}},_destroy:function(){this.element.removeClass("e-checkbox e-input");!this._cloneElement.attr("name")&&this.element.attr("name")&&this.element.removeAttr("name");!this._cloneElement.attr("value")&&this.element.attr("value")&&this.element.removeAttr("value");this.element.insertBefore(this.wrapper);this.wrapper.remove()},_changeSkin:function(t){this.model.cssClass!=t&&(this.wrapper.removeClass(this.model.cssClass).addClass(t),n("#"+this.model.idPrefix+this.model.id+"_wrapper").removeClass(this.model.cssClass).addClass(t))},_setValue:function(){this._indeterminateState=!1;this._isChecked=!1;var i=this.element[0].getAttribute("id"),r=this.element[0].getAttribute("name"),n=this.element[0].getAttribute("value");t.isNullOrUndefined(i)||(this.model.id=i);t.isNullOrUndefined(r)||(this.model.name=r);t.isNullOrUndefined(n)||n==""||(this.model.value=n);this.checked()||t.isNullOrUndefined(this.element.attr("checked"))||(this._isChecked=!0);t.isNullOrUndefined(this.model.name)&&(this.model.name=this.model.id);this.model.enabled=this.model.enabled&&!this.element.attr("disabled")},_setSize:function(i){i==t.CheckboxSize.Medium?(n(this.innerdiv).removeClass("e-chkbox-small").addClass("e-chkbox-medium"),n(this.maindiv).removeClass("e-check-small").addClass("e-check-medium")):(n(this.innerdiv).removeClass("e-chkbox-medium").addClass("e-chkbox-small"),n(this.maindiv).removeClass("e-check-medium").addClass("e-check-small"))},_setRoundedCorner:function(n){n?this.span.addClass("e-corner"):this.span.removeClass("e-corner")},_setEnabled:function(n){n?this.enable():this.disable()},_setCheckBoxState:function(){this.model.enableTriState?this.checkState()=="indeterminate"?this._indeterminateState=!0:this.checkState()=="check"?this._isChecked=!0:this.checkState()=="uncheck"&&(this._isChecked=!1):this.checkState()=="indeterminate"&&this.checkState("uncheck")},_createElement:function(n,t){var i=document.createElement(n);return this._setAttributes(i,t),i},_setAttributes:function(n,t){for(var i in t)n.setAttribute(i,t[i])},_renderControl:function(){this._setCheckBoxState();this.maindiv=this._createElement("span",{"class":"e-chkbox-wrap e-widget "+this.model.cssClass,role:"checkbox",tabindex:0});this._isValid(this.model.id)&&(this.maindiv.setAttribute("id",this.model.idPrefix+this.model.id),this.element[0].setAttribute("id",this.model.id));this.innerdiv=document.createElement("div");this._setSize(this.model.size);this.span=document.createElement("span");this.span=n(this.span);this.spanImg=this._createElement("span",{"class":"e-chk-image e-icon",role:"presentation"});this.spanImg=n(this.spanImg);this.element.addClass("e-input");this.model.name=t.isNullOrUndefined(this.model.name)?this.model.id:this.model.name;this._setAttributes(this.element[0],{name:this.model.name,value:this.model.value});var i=n("#"+this._id+"_hidden");this._hiddenInput=i.length?i[0]:this._createElement("input",{type:"checkbox",value:!1,style:"display:none"});this._isValid(this.model.name)&&this._hiddenInput.setAttribute("id",this.model.name+"_hidden");this._setRoundedCorner(this.model.showRoundedCorner);this.checked()&&this._setCheckedItem(this.checked());this._isChecked?(this.spanImg.addClass("e-checkmark"),this.span.addClass("e-chk-act"),this.maindiv.setAttribute("aria-checked",!0),this.element.attr("checked","checked")):(this.span.addClass("e-chk-inact"),this.maindiv.setAttribute("aria-checked",!1),this._hiddenInput.setAttribute("name",this.model.name));this.checked()instanceof Array||this.checked(this._isChecked);this.span[0].appendChild(this.spanImg[0]);this.innerdiv.appendChild(this.span[0]);this.element[0].parentNode&&this.element[0].parentNode.insertBefore(this.maindiv,this.element[0]);this.maindiv.appendChild(this.element[0]);this.maindiv.appendChild(this._hiddenInput);this.maindiv.appendChild(this.innerdiv);this.wrapper=n(this.maindiv);this._setTextWrapper(this.model.text);this.chkbx=this.element;this.model.enableTriState==!0&&this._indeterminateState==!0&&this._setIndeterminate(this._indeterminateState);this.checked()instanceof Array&&this._updateCheckedItem()},_changeState:function(n){n=="indeterminate"?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checked()instanceof Array||this.checked(null)):n=="check"?(this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.span.removeClass("e-chk-act e-chk-inact e-chk-indeter").addClass("e-chk-act"),this.wrapper[0].setAttribute("aria-checked",!0)):n=="uncheck"&&(this.spanImg.removeClass("e-checkmark e-stop"),this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1))},_setIndeterminate:function(n){n?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checkState("indeterminate"),this.checked()instanceof Array||this.checked(null),this._hiddenInput.setAttribute("name",this.model.name)):(this.span.removeClass("e-chk-indeter"),this.spanImg.removeClass("e-stop"),this.wrapper.find("input").removeAttr("enableTriState"),this.wrapper.find("input").prop("enableTriState",!1),this.checked()?this._checked():this._unChecked())},_setTextWrapper:function(n){n!=""&&(this.txtSpan=t.buildTag("div.e-text",n),this.wrapper.append(this.txtSpan),this.model.enableRTL&&this._setRTL())},_setText:function(n){this.model.text==""&&n!=""?this._setTextWrapper(n):this.txtSpan.html(n)},_setIdAttr:function(t){n("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper");this.element[0].setAttribute("id",t)},_isValid:function(n){return!t.isNullOrUndefined(n)&&n!=""?!0:!1},_wireEvents:function(){this._on(this.wrapper,"click",this._checkedHandler);this._isIE8&&this._isValid(this.model.id)&&this._on(n("label[for="+this.model.id+"]"),"click",function(){this.wrapper.click()});this._on(this.wrapper,"focus",this._focusIn);this._on(this.wrapper,"focusout",this._focusOut)},_unWireEvents:function(){this._off(this.wrapper,this._isDevice&&n.isFunction(n.fn.tap)?"tap":"click");this._isIE8&&this._isValid(this.model.id)&&this._off(n("label[for="+this.model.id+"]"),"click");this._off(this.wrapper,"focus");this._off(this.wrapper,"focusout")},_focusIn:function(){n(this.wrapper).addClass("e-focus");n(this.wrapper).on("keydown",n.proxy(this._checkUnCheck,this))},_focusOut:function(){n(this.wrapper).removeClass("e-focus");n(this.wrapper).off("keydown",n.proxy(this._checkUnCheck,this))},_checkUnCheck:function(n){n.keyCode==32&&(n.preventDefault(),this._checkedHandler())},_checkedHandler:function(t){var i={isChecked:this._isChecked,isInteraction:!0,event:t};return!0==this._trigger("beforeChange",i)?!1:(this.span.hasClass("e-chk-inact")?(this._checked(),this.checked()instanceof Array||this.checked(!0),this.model.enableTriState&&(this._indeterminateState=!0,this.checkState("check"))):this.span.hasClass("e-chk-act")?this.model.enableTriState==!0&&this.model.checkState=="check"&&this.model.checked==!0?(this._setIndeterminate(!0),this.checked()instanceof Array||(this.checked(!0),this.checkState("indeterminate"))):(this._unChecked(),this.checked()instanceof Array||(this.checked(!1),this.checkState("uncheck"))):this.span.hasClass("e-chk-indeter")&&(this.checked()instanceof Array?this._isChecked=!1:this.checked(!1),this._setIndeterminate(!1),this._indeterminateState=!1),this.checked()instanceof Array?this._updateCheckedItem():this._isChecked=this.checked(),n(this.maindiv).addClass("e-material-animate"),i={isChecked:this._isChecked,checkState:this.checkState(),isInteraction:!0,event:t},this._trigger("change",i),!0)},_checked:function(){this.span.removeClass("e-chk-inact").addClass("e-chk-act");this.spanImg.removeClass("e-stop").addClass("e-checkmark");this.wrapper[0].setAttribute("aria-checked",!0);this.wrapper.find("input[type=checkbox]").prop("checked",!0);this.checkState("check");this._hiddenInput.removeAttribute("name")},_unChecked:function(){this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact");this.wrapper[0].setAttribute("aria-checked",!1);this.spanImg.removeClass("e-checkmark e-stop");this.wrapper.find("input[type=checkbox]").prop("checked",!1);this.checkState("uncheck");this._hiddenInput.setAttribute("name",this.model.name)},_setCheckedItem:function(n){if(typeof n!="boolean"||n instanceof Array){if(n instanceof Array&&!t.isNullOrUndefined(this.model.value)&&this.model.value!="")for(var i=0;i<n.length;i++)n[i]==this.model.value&&(this._isChecked=!0)}else this._isChecked=!0},_updateCheckedItem:function(){t.isNullOrUndefined(this.model.value)||this.model.value==""||this.wrapper.find("span:first").hasClass("e-chk-indeter")||(n.inArray(this.model.value,this.checked())<0&&this.wrapper.find("span:first").hasClass("e-chk-act")?(this.checked().push(this.model.value),this._isChecked=!0,this._hiddenInput.removeAttribute("name")):n.inArray(this.model.value,this.checked())>-1&&this.wrapper.find("span:first").hasClass("e-chk-inact")&&(this.checked().splice(n.inArray(this.model.value,this.checked()),1),this._isChecked=!1,this._hiddenInput.setAttribute("name",this.model.name)))},disable:function(){this.wrapper.hasClass("e-disable")||(this.wrapper.addClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!0),this.element[0].setAttribute("disabled","disabled"),this._isIE8&&this.span.addClass("e-disable"),this._unWireEvents(),this.model.enabled=!1)},enable:function(){this.wrapper.hasClass("e-disable")&&(this.wrapper.removeClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!1),this.element.prop("disabled",!1),this._isIE8&&this.span.removeClass("e-disable"),this._wireEvents(),this.model.enabled=!0)},isChecked:function(){if(this._isChecked!=null&&this._isChecked!=i)return this._isChecked}});t.CheckboxSize={Small:"small",Medium:"medium"};t.CheckState={Check:"check",Uncheck:"uncheck",Indeterminate:"indeterminate"}}(jQuery,Syncfusion),function(n,t){t.widget("ejRadioButton","ej.RadioButton",{_rootCSS:"e-radiobtn",element:null,_requiresID:!0,model:null,validTags:["input"],_addToPersist:["checked"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,checked:!1,cssClass:"",text:"",enableRTL:!1,htmlAttributes:{},enablePersistence:!1,idPrefix:"ej",size:"small",enabled:!0,validationRules:null,validationMessage:null,validationMessages:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",size:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",validationMessages:"data",htmlAttributes:"data"},observables:["checked"],checked:t.util.valueFunction("checked"),_init:function(n){var i=t.browserInfo();this._cloneElement=this.element.clone();this._isIE8=i.name=="msie"&&i.version=="8.0"?!0:!1;this._setValue();this._renderControl();this.isChecked&&this._checkedHandler();t.isNullOrUndefined(this.radbtn.attr("disabled"))||(this.model.enabled=!1);this._setEnabled(this.model.enabled);this._addAttr(this.model.htmlAttributes);t.isNullOrUndefined(n)||t.isNullOrUndefined(n.validationMessage)||(this.model.validationMessages=this.model.validationMessage);this.model.validationRules!=null&&(this._initValidator(),this._setValidation());this._wireEvents();this.initialRender=!1},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.div.addClass(n):t=="name"?i.radbtn.attr(t,n):t=="required"?i.radbtn.attr(t,n):t=="disabled"&&n=="disabled"?i.disable():t=="checked"&&n=="checked"?i._checkedChange(!0,!0):i.div.attr(t,n)})},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var r,i,u,f;this.element.find("input").rules("add",this.model.validationRules);r=this.element.closest("form").data("validator");r=r?r:this.element.closest("form").validate();name=this.element.find("input").attr("name");r.settings.messages[name]={};for(i in this.model.validationRules)if(u=null,!t.isNullOrUndefined(this.model.validationRules[i])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){r.settings.messages[name][i]=n.validator.messages[i];for(f in this.model.validationMessages)i==f?u=this.model.validationMessages[i]:""}else u=this.model.validationRules.messages[i];r.settings.messages[name][i]=u!=null?u:n.validator.messages[i]}},_setModel:function(t){for(var i in t)switch(i){case"cssClass":this._changeSkin(t[i]);break;case"enableRTL":this.model.text?t[i]?this.div.addClass("e-rtl"):this.div.removeClass("e-rtl")&&this.element.closest(".e-radiobtn-wrap").hasClass("e-rtl")?this.element.closest(".e-radiobtn-wrap").removeClass("e-rtl"):"":t[i]?this.element.closest(".e-radiobtn-wrap").addClass("e-rtl"):this.element.closest(".e-radiobtn-wrap").removeClass("e-rtl");break;case"text":this._setText(t[i]);break;case"size":this._setSize(t[i]);break;case"validationRules":this.model.validationRules!=null&&(this.element.find("input").rules("remove"),this.model.validationMessages=null);this.model.validationRules=t[i];this.model.validationRules!=null&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessages=t[i];this.model.validationRules!=null&&this.model.validationMessages!=null&&(this._initValidator(),this._setValidation());break;case"validationMessages":this.model.validationMessages=t[i];this.model.validationRules!=null&&this.model.validationMessages!=null&&(this._initValidator(),this._setValidation());break;case"checked":n(this.div).removeClass("e-material-animate");typeof this.checked()=="boolean"?(this.model.checked=t[i],this._checkedChange(this.model.checked)):t[i]()!=null&&t[i]()==this.element.find(".e-input").attr("value")&&this._checkedChange(t[i]());break;case"enabled":this._setEnabled(t[i]);break;case"id":this._setIdAttr(t[i]);break;case"name":this.radbtn.attr("name",t[i]);break;case"value":this.radbtn.attr("value",t[i]);break;case"htmlAttributes":this._addAttr(t[i])}},_destroy:function(){this.radbtn.remove();this._cloneElement.removeClass("e-js e-input e-radiobtn");this._cloneElement.insertBefore(this.element);this.element.remove()},_changeSkin:function(n){this.model.cssClass!=n&&(this.element.removeClass(this.model.cssClass).addClass(n),this.div.removeClass(this.model.cssClass).addClass(n))},_setValue:function(){t.isNullOrUndefined(this.element.attr("type"))&&this.element.attr("type","radio");t.isNullOrUndefined(this.element.attr("id"))||(this.model.id=this.element.attr("id"));t.isNullOrUndefined(this.element.attr("name"))||(this.model.name=this.element.attr("name"));t.isNullOrUndefined(this.element.attr("value"))||(this.model.value=this.element.attr("value"));this.element.attr({id:this.model.id,name:this.model.name,value:this.model.value});typeof this.checked()=="boolean"?this.model.checked=this.isChecked=this.model.checked||this.element.attr("checked")=="checked":this.isChecked=this.element.attr("value")==this.checked();this.isChecked&&this.element.attr("checked","checked");this._hiddenValue=this.element.attr("value");this._isUI=!1},_setIdAttr:function(t){n("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper");n("#"+this.model.idPrefix+this.model.id).attr("id",this.model.idPrefix+t);this.radbtn.attr("id",t)},_setSize:function(n){n==t.RadioButtonSize.Medium?(this.span.removeClass("e-radsmaller").addClass("e-radmedium"),this.div.removeClass("e-radsmall").addClass("e-radmed")):(this.span.removeClass("e-radmedium").addClass("e-radsmaller"),this.div.removeClass("e-radmed").addClass("e-radsmall"))},_setEnabled:function(n){n?this.enable():this.disable()},_renderControl:function(){this.initialRender=!0;var i=t.browserInfo();this.div=i.name=="msie"&&i.version=="8.0"?n('<div class="e-radiobtn-wrap e-widget e-rad-outer" ><\/div>'):n('<div class="e-radiobtn-wrap e-widget" ><\/div>');this.div.attr({id:this.model.idPrefix+this.model.id,role:"radio",tabindex:0,"aria-checked":!1});this.span=n("<span><\/span>");this.span.addClass("e-spanicon");this._setSize(this.model.size);this.spanImg=n('<span class="e-rad-icon e-icon e-rad-select"><\/span>',"",{},{role:"presentation"});this.element.addClass("e-input");this.div.addClass(this.model.cssClass);this.span.append(this.spanImg);this.div.insertBefore(this.element);this.div.append(this.element);this.div.append(this.span);this._setTextWrapper(this.model.text);this.radbtn=this.element;this.element=this.div},_setTextWrapper:function(n){n!=""?(this.txtSpan=t.buildTag("div.e-text",n),this.div.append(this.txtSpan),this.model.enableRTL&&this.div.addClass("e-rtl")):this.model.enableRTL&&this.element.closest(".e-radiobtn-wrap").addClass("e-rtl")},_setText:function(n){this.model.text==""&&n!=""?this._setTextWrapper(n):this.txtSpan.html(n)},_wireEvents:function(){this._on(this.element,"click",function(n){this._isUI=!0;this._checkedHandler(n)});this._on(this.element,"focus",this._focusIn);this._on(this.element,"focusout",this._focusOut)},_focusIn:function(){n(this.element).addClass("e-focus");n(this.element).on("keydown",n.proxy(this._checkUnCheck,this))},_focusOut:function(){n(this.element).removeClass("e-focus");n(this.element).off("keydown",n.proxy(this._checkUnCheck,this))},_checkUnCheck:function(n){(n.keyCode==32||n.keyCode==37||n.keyCode==38||n.keyCode==39||n.keyCode==40)&&(n.preventDefault(),this._checkedHandler())},_checkedHandler:function(t){t&&(this._interacted=!0);this.element.hasClass("e-disable")||(this.isChecked=typeof this.checked()=="boolean"?this.radbtn.attr("checked")=="checked"?!0:!1:this.checked()==this.radbtn.attr("value"),n(this.element).find(".e-rad-icon").hasClass("e-circle_01")||this._changeEvent(!0),t&&n(this.div).addClass("e-material-animate"))},_checkedChange:function(n,t){this.isChecked=n;this._changeEvent(t)},_changeEvent:function(t){var r={isChecked:this.isChecked,isInteraction:!!t};if(!this.initialRender&&!0==this._trigger("beforeChange",r))return!1;if(n(this.element).find(".e-rad-icon").hasClass("e-circle_01"))this.spanImg.removeClass("e-circle_01").addClass("e-rad-select"),this.span.removeClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!1}),this.radbtn.removeAttr("checked");else{var u=this.element.find(".e-input").attr("name"),f=n('input.e-radiobtn[name="'+u+'"]:radio'),e=this,o=this.element.find(".e-input"),i=n(o).data("ejRadioButton");r.isChecked&&(this.spanImg.addClass("e-circle_01").removeClass("e-rad-select"),this.span.addClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!0}),this.radbtn.attr("checked","checked"));n.each(f,function(t,i){e._interacted&&n(n(i).closest(".e-widget")).find("span.e-spanicon").hasClass("e-rad-active")&&n(i).closest(".e-radiobtn-wrap").addClass("e-material-animate");n(i).closest(".e-radiobtn-wrap").find(".e-rad-icon").removeClass("e-circle_01").addClass("e-rad-select");n(i).closest(".e-radiobtn-wrap").find(".e-spanicon").removeClass("e-rad-active");n(i).closest(".e-radiobtn-wrap").attr({tabindex:0,"aria-checked":!1});var r=n(i).data("ejRadioButton");r!=null&&r.checked()!=null&&typeof r.checked()=="boolean"&&(r.model.checked=!1)});i!=null&&i.checked()!=null&&typeof i.checked()=="boolean"?i.model.checked=!0:i.checked(i.radbtn.attr("value"));this.element.find(".e-rad-icon").addClass("e-circle_01").removeClass("e-rad-select");this.span.addClass("e-rad-active");this.div.attr({tabindex:0,"aria-checked":!0});this._isUI&&this.element.find(".e-input").click();this.isChecked=!0;this.isChecked==!0?this.radbtn.attr("checked","checked"):this.radbtn.removeAttr("checked")}r={isChecked:this.isChecked,isInteraction:!!t};this.initialRender||this._trigger("change",r);t&&this._trigger("_change",{value:this._hiddenValue})},disable:function(){this.element.hasClass("e-disable")||(this.element.addClass("e-disable"),this.radbtn.attr("disabled","disabled"));this._isIE8&&this.span.addClass("e-disable");this.div.attr("aria-disabled",!0);this.model.enabled=!1},enable:function(){this.element.hasClass("e-disable")&&(this.element.removeClass("e-disable"),this.radbtn.prop("disabled",!1));this._isIE8&&this.span.removeClass("e-disable");this.div.attr("aria-disabled",!1);this.model.enabled=!0}});t.RadioButtonSize={Small:"small",Medium:"medium"}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejDropDownList","ej.DropDownList",{element:null,model:null,validTags:["select","input"],_addToPersist:["value","text","selectedIndex","selectedItemIndex","selectedItems","selectedIndices","popupWidth","popupHeight","itemValue"],_setFirst:!1,_rootCSS:"e-dropdownlist",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{cssClass:"",value:null,htmlAttributes:{},text:null,itemValue:"",itemsCount:0,dataSource:null,delimiterChar:",",query:null,fields:{id:null,text:null,value:null,category:null,groupBy:null,imageUrl:null,imageAttributes:null,spriteCssClass:null,htmlAttributes:null,selected:null,tableName:null},locale:"en-US",watermarkText:null,height:"",width:"",popupHeight:"152px",popupWidth:"auto",maxPopupHeight:null,minPopupHeight:"20",maxPopupWidth:null,minPopupWidth:"0",targetID:null,template:null,headerTemplate:null,selectedItemIndex:-1,selectedIndex:-1,disableItemsByIndex:null,enableItemsByIndex:null,selectedItems:[],selectedIndices:[],cascadeTo:null,enablePopupResize:!1,allowVirtualScrolling:!1,virtualScrollMode:"normal",showRoundedCorner:!1,showPopupOnLoad:!1,enableRTL:!1,enabled:!0,filterType:"contains",sortOrder:"ascending",caseSensitiveSearch:!1,showCheckbox:!1,checkAll:!1,uncheckAll:!1,enablePersistence:!1,enableFilterSearch:!1,enableServerFiltering:!1,enableIncrementalSearch:!0,readOnly:!1,enableAnimation:!1,multiSelectMode:"none",allowGrouping:!1,enableSorting:!1,validationRules:null,validationMessage:null,actionBegin:null,actionComplete:null,actionFailure:null,actionSuccess:null,create:null,popupHide:null,popupShown:null,beforePopupShown:null,beforePopupHide:null,popupResizeStart:null,popupResize:null,popupResizeStop:null,change:null,select:null,dataBound:null,search:null,checkChange:null,cascade:null,destroy:null},dataTypes:{cssClass:"string",itemsCount:"number",watermarkText:"string",template:"string",disableItemsByIndex:"string",enableItemsByIndex:"string",enableIncrementalSearch:"boolean",cascadeTo:"string",delimiterChar:"string",showRoundedCorner:"boolean",showPopupOnLoad:"boolean",enableRTL:"boolean",enablePersistence:"boolean",allowVirtualScrolling:"boolean",virtualScrollMode:"enum",enabled:"boolean",readOnly:"boolean",multiSelectMode:"enum",dataSource:"data",query:"data",fields:"data",selectedItems:"array",enableAnimation:"boolean",allowGrouping:"boolean",enableSorting:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",locale:"string"},observables:["value","selectedItemIndex","selectedIndex"],value:t.util.valueFunction("value"),selectedItemIndex:t.util.valueFunction("selectedItemIndex"),selectedIndex:t.util.valueFunction("selectedIndex"),enable:function(){if(this._visibleInput.hasClass("e-disable")){this.target.disabled=!1;this.model.enabled=!0;this.container.removeClass("e-disable");this._visibleInput.removeClass("e-disable");this.dropdownbutton.removeClass("e-disable");this.popupListWrapper.removeClass("e-disable");this._isIE8&&this.drpbtnspan.removeClass("e-disable");this.container.on("mousedown",n.proxy(this._OnDropdownClick,this));this.model.multiSelectMode=="visualmode"&&this._ulBox.removeClass("e-disable");this.wrapper.attr("tabindex","0")}this._wireEvents()},disable:function(){this._visibleInput.hasClass("e-disable")||(this.target.disabled=!0,this.model.enabled=!1,this.container.addClass("e-disable"),this._visibleInput.addClass("e-disable"),this.popupListWrapper.addClass("e-disable"),this.dropdownbutton.addClass("e-disable"),this._isIE8&&this.drpbtnspan.addClass("e-disable"),this.model.multiSelectMode=="visualmode"&&this._ulBox.addClass("e-disable"),this.container.off("mousedown",n.proxy(this._OnDropdownClick,this)),this._unwireEvents(),this.wrapper.removeAttr("tabindex"),this._isPopupShown()&&this._hideResult())},getValue:function(){return this._visibleInput.val()},_setValue:function(n){t.isNullOrUndefined(n)||(this._raiseEvents=!1,t.isNullOrUndefined(this.model.text)||this.unselectItemByText(this.model.text),this._raiseEvents=!0,this._addValue(n),this.selectItemByValue(n))},_addValue:function(n){var r,e,i,u,f;this.model.itemsCount>0&&n!=""&&(this._checkValue=!0,r=n.split(this.model.delimiterChar),e=this.mapFld._value,this._addListItems(r,this._rawList,"local"),this._checkValue&&(i=this.model.dataSource,t.DataManager&&i instanceof t.DataManager?i.dataSource.offline&&i.dataSource.json&&i.dataSource.json.length>0?this._addListItems(r,i.dataSource.json,"remote"):(u=this,f=n,i.executeQuery(t.Query()).done(function(n){u._addListItems(r,n.result,"remote");u.selectItemByValue(f)})):this._addListItems(r,i,"remote")))},_addListItems:function(n,t,i){for(k=0;k<n.length;k++)for(var r=0;r<t.length;r++)i=="local"&&t[r][this.mapFld._value]==n[k]&&(this._checkValue=!1),i=="remote"&&t[r][this.mapFld._value]==n[k]&&this.addItem(t[r])},_setText:function(n){n&&(this._raiseEvents=!1,this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByText(n))},_setItemValue:function(n){this.model.itemValue=n},_changeWatermark:function(n){if(!this.model.enabled)return!1;this._isWatermark?this._visibleInput.attr("placeholder",n):this._hiddenSpan.text(n)},hidePopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._hideResult()},showPopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._showResult()},clearText:function(){this._clearTextboxValue();this._isWatermark||this._setWatermark()},addItem:function(t){var r,i,u,e,f,o;if(!this.model.enabled||!t||(this._mapFields(),r=n.isArray(t)?t:[t],r.length<1))return!1;for(i=this.mapFld,u={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null,_category:null},u._id=r[0][i._id]?i._id:"id",u._imageUrl=r[0][i._imageUrl]?i._imageUrl:"imageUrl",u._imageAttributes=r[0][i._imageAttributes]?i._imageAttributes:"imageAttributes",u._spriteCSS=r[0][i._spriteCSS]?i._spriteCSS:"spriteCssClass",u._text=r[0][i._text]?i._text:"text",u._value=r[0][i._value]?i._value:"value",u._htmlAttributes=r[0][i._htmlAttributes]?i._htmlAttributes:"htmlAttributes",u._selected=r[0][i._selected]?i._selected:"selected",u._category=r[0][i._category]?i._category:"groupBy",this._generateLi(r,u),e=this.dummyUl,f=0;f<r.length;f++)this._listItem(r[f],"add");this.model.showCheckbox?this._appendCheckbox(e,!0):this._isSingleSelect()||this._multiItemSelection(e,!0);this._virtualUl.append(n(this.dummyUl).clone(!0));this.ultag.append(this.dummyUl);this._isPopupShown()&&(o=this.scrollerObj?this.scrollerObj.scrollTop():0,this._refreshScroller(),this.scrollerObj&&this.scrollerObj.option("scrollTop",o))},_toArray:function(i,r){var u;return typeof i=="function"&&(i=t.util.getVal(i)),n.isArray(i)?u=i:typeof i=="string"?r&&(this.model.multiSelectMode=="visualmode"||this.model.multiSelectMode=="delimiter"||this.model.showCheckbox)?(u=i.split(this.model.delimiterChar),u.length==0&&(u=[i])):r?u=[i]:(u=i.split(this.model.delimiterChar),u.length==0&&(u=[i])):u=[i],u},_trim:function(t){return typeof t=="string"?n.trim(t):t},selectItemByIndex:function(n){this._selectItemByIndex(n)},selectItemsByIndices:function(n){this._selectItemByIndex(n)},_selectItemByIndex:function(t){var f,i,u,r;if(this.listitems=this._getLi(),this._selectedIndices=n.map(this._selectedIndices,function(n){return parseInt(n)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,parseInt(t)==-1&&this.model.selectedItems.length>0)this._clearTextboxValue(),this._trigger("change",{text:this._visibleInput[0].value,selectedText:"",selectedValue:"",value:""});else for(f=this._toArray(t,!0),u=0;u<f.length;u++)if(i=parseInt(f[u]),i!=null&&i>=0){if(n.inArray(i,this._selectedIndices)==-1)for(r=0;r<this.listitems.length;r++)n(this.listitems[r]).hasClass("e-disable")||r==i&&(this.selectedIndexValue=r,this._activeItem=i,this._enterTextBoxValue())}else!this.model.showCheckbox&&this.model.multiSelectMode=="none"&&this.model.selectedItems.length>0&&(this._clearTextboxValue(),this._trigger("change",{text:this._visibleInput[0].value,selectedText:"",selectedValue:"",value:""}))},unselectItemsByIndices:function(n){this._unselectItemByIndex(n)},unselectItemByIndex:function(n){this._unselectItemByIndex(n)},_unselectItemByIndex:function(t){var i,u,f,r;for(this._selectedIndices=n.map(this._selectedIndices,function(n){return parseInt(n)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,u=this._toArray(t,!0),this.listitems=this._getLi(),r=0;r<u.length;r++)for(f=parseInt(u[r]),i=0;i<this.listitems.length;i++)i==f&&(this.selectedIndexValue=i,this._activeItem=f,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue())},setSelectedValue:function(n){this.selectItemByValue(n)},selectItemByValue:function(i){var r,e,s,u,f,o;if(this.listitems=this._getLi(),this.inputSearch&&this.inputSearch.val()!=""&&this.model.enableServerFiltering&&!t.isNullOrUndefined(this._searchresult)){for(s=this.model.fields&&this.model.fields.value?this.model.fields.value:"value",r=0;r<this._searchresult.length;r++)for(u=0;u<this.listitems.length;u++)n(this.listitems[u]).attr("data-value")==this._searchresult[r][s]&&(this._searchresult=null);this.addItem(this._searchresult)}if(t.isNullOrUndefined(i)||i==="")this._clearTextboxValue();else for(e=this._toArray(i,!0),f=0;f<e.length;f++)for(r=0;r<this.listitems.length;r++)if(!n(this.listitems[r]).hasClass("e-disable")&&(o=this._getAttributeValue(this.listitems[r])||n(this.listitems[r]).text(),o&&(this._selectedValue=o,this._selectedValue==e[f]))){this._activeItem=r;this._aselectedItem=this._activeItem;this._enterTextBoxValue();break}},unselectItemByValue:function(n){var t,r=this._toArray(n,!0),i;for(this.listitems=this._getLi(),i=0;i<r.length;i++)for(t=0;t<this.listitems.length;t++)if(this._getAttributeValue(this.listitems[t])&&(this._selectedValue=this._getAttributeValue(this.listitems[t]),this._selectedValue==r[i])){this._activeItem=t;this._activeItem==this._aselectedItem&&(this._aselectedItem=null);this._removeTextBoxValue();break}},setSelectedText:function(n){this.selectItemByText(n)},selectItemByText:function(i){var r,f,u;if(this.listitems=this._getLi(),this._mapFields(),t.isNullOrUndefined(i)||i==="")this._clearTextboxValue();else for(f=this._toArray(i,!0),u=0;u<f.length;u++)for(r=0;r<this.listitems.length;r++)if(!n(this.listitems[r]).hasClass("e-disable")&&(this.selectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[r]:this._getField(this.popupListItems[r],this.mapFld._text),this.selectedTextValue==f[u])){this._activeItem=r;this._aselectedItem=this._activeItem;this._enterTextBoxValue();break}},unselectItemByText:function(n){var t,r=this._toArray(n,!0),i;for(this.listitems=this._getLi(),this._mapFields(),i=0;i<r.length;i++)for(t=0;t<this.listitems.length;t++)if(this.unselectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[t]:this._getField(this.popupListItems[t],this.mapFld._text),this.unselectedTextValue==r[i]){this._activeItem=t;this._activeItem==this._aselectedItem&&(this._aselectedItem=null);this._removeTextBoxValue();break}},getSelectedValue:function(){return this.element.val()},getSelectedItem:function(){var n,t=[];for(this.listitems=this._getLi(),n=0;n<this._selectedIndices.length;n++)t.push(this.listitems[this._selectedIndices[n]]);return t},getItemDataByValue:function(n){for(var f=this._toArray(n,!1),u=t.isNullOrUndefined(this.resultList)?this._rawList:this._rawList.concat(this.resultList),i,e=[],o=this.model.fields&&this.model.fields.value?this.model.fields.value:"value",r=0;r<f.length;r++)for(i=0;i<u.length;i++)u[i][o]==f[r]&&e.push(u[i]);return e},getListData:function(){return this._rawList},getSelectedItemsID:function(){return this._selectedItemsID},disableItemsByIndices:function(n){this._disableItemByIndex(n)},disableItemByIndex:function(n){this._disableItemByIndex(n)},_disableItemByIndex:function(t){var i,u,r;if(!this.model.enabled)return!1;for(i=this._toArray(t,!1),r=0;r<i.length;r++)i[r]==null||isNaN(parseInt(i[r]))||i.length>0&&!(n.inArray(parseInt(i[r]),this._disabledItems)>-1)&&(u=n.inArray(i[r],this._disabledItems),this._setClass(this._getLi()[parseInt(i[r])],"e-disable"),this._disabledItems.push(parseInt(i[r])),this.model.disableItemsByIndex=String(this._disabledItems.join(",")))},enableItemsByIndices:function(n){this._enableItemByIndex(n)},enableItemByIndex:function(n){this._enableItemByIndex(n)},_enableItemByIndex:function(t){var r=this._toArray(t,!1),u,i;for(this.model.enableItemsByIndex=t,i=0;i<r.length;i++)r.length>0&&n.inArray(parseInt(r[i]),this._disabledItems)>-1&&!isNaN(parseInt(r[i]))&&(u=n.inArray(parseInt(r[i]),this._disabledItems),this._removeClass(this._getLi()[parseInt(r[i])],"e-disable"),this._disabledItems.splice(u,1));this.model.enableItemsByIndex=null;this.model.disableItemsByIndex=this._disabledItems.join(this.model.delimiterChar)},_validateDelimiter:function(n){if(this._trim(n).length==1)if(!/^[a-zA-Z0-9]+$/.test(n))return n;return","},_removeText:function(t){var i=this.element[0].value.split(this.model.delimiterChar),u=this._visibleInput[0].value.split(this.model.delimiterChar),r=n.inArray(t,i);r>=0&&(i.splice(r,1),u.splice(r,1));this.element[0].value=i.join(this.model.delimiterChar);this._visibleInput[0].value=u.join(this.model.delimiterChar)},_addText:function(n){var i,r,t,u;if(this._checkContains(this._hiddenValue))return!1;for(i=["element","_visibleInput"],t=0;t<i.length;t++)r=i[t]=="element"?this._hiddenValue:n,this[i[t]][0].value&&this[i[t]][0].value!=""?(u=this[i[t]][0].value.split(this.model.delimiterChar),u.push(r),this[i[t]][0].value=u.join(this.model.delimiterChar)):this[i[t]][0].value=r},_checkContains:function(n){var i=this.element[0].value.split(this.model.delimiterChar),t;for(this.contains=!1,t=0;t<i.length;t++)if(this._parseValue(i[t])===this._parseValue(n)){this.contains=!0;break}return this.contains},_parseValue:function(n){return isNaN(parseInt(n))||typeof this._rawList[0][this.mapFld._value]=="string"?n:parseInt(n)},_updateLocalConstant:function(){this._localizedLabels=t.getLocalizedConstants("ej.DropDownList",this.model.locale)},_init:function(){var i=t.browserInfo();this._updateLocalConstant();this._isIE8=i.name=="msie"&&i.version=="8.0";this._textContent=this._isIE8?"innerText":"textContent";(this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))||this.element.is("select"))&&(this._isWatermark="placeholder"in n(document.createElement("input")).attr("placeholder","")[0],this._id=this.element[0].id,this._initialize(),this._render(),this._addAttr(this.model.htmlAttributes),this._enabled(this.model.enabled),this._initValue=!1,this._checkboxValue=!1,this.model.validationRules!=null&&(this._initValidator(),this._setValidation()))},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var r,f,i,u,e;if(this.element.closest("form").length!=0){this.element.rules("add",this.model.validationRules);r=this.element.closest("form").data("validator");r||(r=this.element.closest("form").validate());f=this.element.attr("name");r.settings.messages[f]={};for(i in this.model.validationRules)if(u=null,!t.isNullOrUndefined(this.model.validationRules[i])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){r.settings.messages[f][i]=n.validator.messages[i];for(e in this.model.validationMessage)i==e?u=this.model.validationMessage[i]:""}else u=this.model.validationRules.messages[i];r.settings.messages[f][i]=u!=null?u:n.validator.messages[i]}}},_setInitialPopup:function(n){this.model.enabled&&!this.model.readOnly&&(n==!1?this._hideResult():this._showResult())},_changeSkin:function(n){this.wrapper.removeClass(this.model.cssClass).addClass(n);this.popupListWrapper.removeClass(this.model.cssClass).addClass(n)},_setRTL:function(n){this.model.enableRTL!=n&&(this.model.enableRTL=n,this._RightToLeft(),this._dropbtnRTL())},_changeHeight:function(n){this.wrapper.height(n);this._setListHeight()},_changeWidth:function(n){this.wrapper.width(n);this._setListWidth()},_setModel:function(i){var r,f,o,e,u;for(r in i)switch(r){case"dataSource":this._isEqualDataSource(i[r])||this._checkModelDataBinding(i[r],this.model.query);break;case"query":this._checkModelDataBinding(this.model.dataSource,i[r]);break;case"fields":this.model.fields=n.extend(this.model.fields,i[r]);this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"itemsCount":this.model.itemsCount=i[r];this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"template":this.model.template=i[r];this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"value":f=t.util.getVal(i[r]);(t.isNullOrUndefined(f)||f==="")&&this._clearTextboxValue();t.isNullOrUndefined(f)||f===""?this._clearTextboxValue():(this._setValue(t.util.getVal(i[r])),i[r]=this.model.value);break;case"delimiterChar":o=this.model.delimiterChar;i[r]=this._validateDelimiter(i[r]);this.model.delimiterChar=i[r];this._isSingleSelect()||(this.model.text&&(this.model.text=this.model.text.split(o).join(this.model.delimiterChar),this._visibleInput.val(this.model.text)),t.isNullOrUndefined(this.value())||(this.value(this.value().split(o).join(this.model.delimiterChar)),this.element.val(this.value())));break;case"text":t.isNullOrUndefined(i[r])||i[r]===""?this._clearTextboxValue():(this._setText(i[r]),i[r]=this.model.text);break;case"itemValue":this._setItemValue(i[r]);break;case"enableRTL":this._setRTL(i[r]);break;case"enabled":this._enabled(i[r]);break;case"height":this._changeHeight(i[r]);break;case"width":this._changeWidth(i[r]);break;case"popupHeight":this.model.popupHeight=i[r];this._setListHeight(i[r]);break;case"popupWidth":this.model.popupWidth=i[r];this._setListWidth();break;case"minPopupHeight":this.model.minPopupHeight=i[r];this._setListHeight(i[r]);break;case"minPopupWidth":this.model.minPopupWidth=i[r];this._setListWidth();break;case"maxPopupHeight":this.model.maxPopupHeight=i[r];this._setListHeight(i[r]);break;case"maxPopupWidth":this.model.maxPopupWidth=i[r];this._setListWidth();break;case"cssClass":this._changeSkin(i[r]);break;case"showCheckbox":this.model.showCheckbox=i[r];e=this.model.text;u=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text;this._raiseEvents=!1;this._clearTextboxValue();this._raiseEvents=!0;this._checkboxHideShow(i[r]);this.model.showCheckbox||this.model.multiSelectMode!="none"?(this.model.multiSelectMode=="visualmode"&&this._renderBoxModel(),this._setText(e)):u&&u.length&&this._setText(u[0]);this._isPopupShown()&&this._setListPosition();break;case"checkAll":return this._setCheckAll(i[r]),!1;case"uncheckAll":return this._setUncheckAll(i[r]),!1;case"watermarkText":this._changeWatermark(i[r]);break;case"validationRules":this.element.closest("form").length!=0&&(this.model.validationRules!=null&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[r],this.model.validationRules!=null&&(this._initValidator(),this._setValidation()));break;case"locale":this.model.locale=i[r];this._updateLocalConstant();break;case"validationMessage":this.element.closest("form").length!=0&&(this.model.validationMessage=i[r],this.model.validationRules!=null&&this.model.validationMessage!=null&&(this._initValidator(),this._setValidation()));break;case"showRoundedCorner":this._roundedCorner(i[r]);this.model.showRoundedCorner=i[r];break;case"showPopupOnLoad":this._setInitialPopup(i[r]);break;case"targetID":this.model.targetID=i[r];this._showFullList();break;case"selectedItemIndex":case"selectedIndex":this._selectItemByIndex(i[r]);this.model.selectedItemIndex=this.model.selectedIndex=i[r];break;case"unselectItemByIndex":this._unselectItemByIndex(i[r]);break;case"disableItemsByIndex":this._disableItemByIndex(i[r]);break;case"enableItemsByIndex":this._enableItemByIndex(i[r]);break;case"selectedItems":case"selectedIndices":this._selectCheckedItem(i[r]);i[r]=this.model.selectedItems=this.model.selectedIndices=this._selectedIndices;break;case"multiSelectMode":this.model.multiSelectMode=="visualmode"&&(this._swapUlandInput(!1),this._ulBox.remove(),this._ulBox=null);this.model.multiSelectMode=i[r];e=this.model.text;u=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text;this._raiseEvents=!1;this._clearTextboxValue();this._raiseEvents=!0;this.model.showCheckbox||this.model.multiSelectMode!="none"?(this.model.multiSelectMode=="visualmode"&&this._renderBoxModel(),this._setText(e)):(this._setText(u[0]),this.wrapper.find("input[name="+this._name+"]").remove());this._isPopupShown()&&this._setListPosition();break;case"allowGrouping":this._setGroupingAndSorting("allowGrouping",i[r]);break;case"enableSorting":this._setGroupingAndSorting("enableSorting",i[r]);break;case"htmlAttributes":this._addAttr(i[r]);break;case"enablePopupResize":this.model.enablePopupResize=i[r];i[r]?this._enablePopupResize():this.popupListWrapper.removeClass("e-resizable").find(".e-resizebar").remove()&&this._hideResult();break;case"enableFilterSearch":if(i[r]){this.model.enableFilterSearch=!0;this._enableSearch();break}else this._removeSearch();case"enableServerFiltering":this._enableSearch()}},_clearTextboxValue:function(){this.element.val("");this._visibleInput.val("");this._updateValue("");this.selectedTextValue=this._selectedValue=this._hiddenValue=this.model.itemValue="";this._updateText();this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1;this._selectedItemsID=[];this._selectedIndices=[];this.model.selectedItems=[];this.model.selectedIndices=[];this.selectedIndex(null);this.ultag.children("li").removeClass("e-hover").removeClass("e-active");this.model.showCheckbox&&this._resetCheck();this.wrapper.find("ul.e-ul.e-boxes").length!=0&&(this._ulBox.children("li").remove(),this._name===""?this.wrapper.find("input:hidden[id^='#']").remove():this.wrapper.find("input:hidden[id^='#'][name="+this._name+"]").remove(),n(this.element).attr("name",this._name))},_destroy:function(){this.selectOptions?(!this.model.dataSource&&this.docbdy?this.docbdy.append(this.selectOptions.removeClass("e-dropdownlist e-js").show()).show():this.selectOptions.insertAfter(this.wrapper).removeClass("e-dropdownlist e-js").show(),this.element.remove()):(this.element.insertAfter(this.wrapper),this.element.width(this.element.width()+this.dropdownbutton.outerWidth()),this._visibleInput.removeClass("e-input "),this._setAttr(this.element[0],{accesskey:this.wrapper.attr("accesskey"),type:"text"}),this._isWatermark&&this._visibleInput.removeAttr("placeholder"),this.element[0].value="",this.element.removeAttr("aria-expanded aria-autocomplete aria-haspopup aria-owns accesskey role").css({width:"",display:"block"}),!this.model.dataSource&&this.docbdy&&this.ultag.find("li").removeClass("e-active")&&this.docbdy.append(this.ultag.html()).show());this.wrapper.remove();this.container.off("mousedown",n.proxy(this._OnDropdownClick,this));this._hideResult();this.popupPanelWrapper.remove();this._unwireEvents()},_finalize:function(){this.value()==""&&this._visibleInput[0].value!==""&&this._updateValue(this.element[0].value);this.value()!==this.element.val()&&this._setValue(this.value());this.model.text!=this._visibleInput.val()&&this._setText(this.model.text);this.selectedIndex(this.selectedIndex()!=-1?this.selectedIndex():this.selectedItemIndex());this.selectedIndex()!=-1?this._selectItemByIndex(this.selectedIndex()):this._selectedIndices.length>0&&this._selectCheckedItem(this._selectedIndices);this.model.disableItemsByIndex!=null&&this._disableItemByIndex(this.model.disableItemsByIndex);this.model.enableItemsByIndex!=null&&this._enableItemByIndex(this.model.enableItemsByIndex)},_initialize:function(){this._selectedIndices=this.model.selectedIndices.length>0?this.model.selectedIndices:this.model.selectedItems;this.model.selectedItems=this.model.selectedIndices=this._selectedIndices;this.model.selectedIndex=this.model.selectedIndex!=-1?this.model.selectedIndex:this.model.selectedItemIndex;this.element.is("select")&&(this.selectelement=!0,this._renderSelectToDropdown());this._selectedItemsID=[];this.target=this.element[0];this._disabledItems=[];this._queryString=null;this.suggLen=0;this._itemId=null;this.checkedStatus=!1;this._incqueryString="";this._activeItem=null;this.ddWidth=0;this._initValue=!0;this._virtualCount=0;this._raiseEvents=!0},_renderSelectToDropdown:function(){var i,f,u,r;if(this.inputElement=t.buildTag("input.e-dropdownlist#"+this._id+"_input","",{},{type:"text","data-role":"none"}),this.inputElement.insertAfter(this.element),this.element.attr("name")&&(this.inputElement.attr("name",this.element.attr("name")),this.element.removeAttr("name")),this.selectOptions=this.element,this.selectOptions.attr("id",this._id),this.model.dataSource==null){for(this.optionDiv=t.buildTag("div#"+this._id+"_list"),this.optionDiv.insertAfter(this.inputElement),this.optionUl=t.buildTag("ul"),this.optionDiv.append(this.optionUl),this.selectOptionItems=this.element.children("option"),f=this.selectOptionItems.length,this.optionDummyUl=n(),i=0;i<f;i++)r=this.selectOptionItems[i],u=n(r).attr("label")?n(r).attr("label"):r.innerHTML,u!=null&&(this.optionLi=t.buildTag("li",u,{},{"data-value":r.value,unselectable:"on"}),this.optionDummyUl.push(this.optionLi[0]),n(r).attr("selected")&&this.model.showCheckbox&&(n.inArray(i,this._selectedIndices)==-1?(this._selectedIndices.push(i),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices):t.isNullOrUndefined(this.selectedIndex())&&this.selectedIndex(i)));this.optionUl.append(this.optionDummyUl)}this.element.css("display","none");this.element=this.inputElement},_render:function(){var i,r;this._renderDropdown();this._setWatermark();this._renderPopupPanelWrapper();this._showFullList();this._roundedCorner(this.model.showRoundedCorner);i=this.model.dataSource;t.DataManager&&i instanceof t.DataManager?i.dataSource.offline&&i.dataSource.json&&i.dataSource.json.length>0&&(r=this,r._finalize()):this._finalize();t.DataManager&&this.model.dataSource instanceof t.DataManager||this._finalize();this._setCheckAll(this.model.checkAll);(this.element.attr("disabled")||n(this.selectOptions).attr("disabled"))&&this.disable()},_isEqualDataSource:function(n){var r,i,u;if(!this.model.dataSource||!n||!(this.model.dataSource.length===n.length)||t.DataManager&&n instanceof t.DataManager)return!1;for(r=!0,i=0,u=this.model.dataSource.length;i<u;i++)if(this.model.dataSource[i]!==n[i]){r=!1;break}return r},_checkModelDataBinding:function(n,t){this.element.val("");this._visibleInput.val("");this._updateValue("");this.selectedTextValue=this._selectedValue=this._hiddenValue="";this._updateText();this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1;this._selectedItemsID=[];this.model.selectedItems=this.model.selectedIndices=this._selectedIndices=[];this.model.selectedIndex=this.model.selectedItemIndex=-1;this.model.multiSelectMode=="visualmode"&&this._destroyBoxModel();this.model.dataSource=n;this.model.query=t;this.ultag.empty();this._showFullList()},_initDataSource:function(n){var i=this,r;t.DataManager&&n instanceof t.DataManager&&(i._addLoadingClass(),i._trigger("actionBegin",{requestFrom:"default"})||(r=n.executeQuery(this._getQuery()),r.done(function(n){i._trigger("actionSuccess",{e:n,requestFrom:"default"});i._totalCount=n.count;i._listItem(n.result);i._removeLoadingClass();i._renderPopupList();i._finalize()}).fail(function(n){i.model.dataSource=null;i._addLoadingClass();i._trigger("actionFailure",{e:n,requestFrom:"default"})}).always(function(n){i._trigger("actionComplete",{e:n,requestFrom:"default"})})))},_listItem:function(t,i){i=="add"?(this.popupListItems.push(t),this._rawList.push(t)):n.isArray(t)&&(this.popupListItems=t.slice(0),this._rawList=t.slice(0))},_getQuery:function(n){var i,r=this.model.fields,u=t.Query(),f,e;if(!t.isNullOrUndefined(this.model.query)||this.model.template||n)this.model.query&&(u=this.model.query.clone());else{f=[];for(e in r)e!=="tableName"&&r[e]&&f.push(r[e]);f.length>0&&u.select(f)}return this.model.allowVirtualScrolling&&u.requiresCount(),this.model.itemsCount>0&&u.take(this.model.itemsCount),i=this.model.dataSource.dataSource,r&&(i&&i.url&&!i.url.match(r.tableName+"$")||i&&!i.url||!i)&&(t.isNullOrUndefined(r.tableName)||u.from(r.tableName)),u},_addLoadingClass:function(){this._isPopupShown()?this.popupListWrapper.addClass("e-load"):(this.dropdownbutton.addClass("e-load"),this.drpbtnspan.removeClass("e-icon e-arrow-sans-down"));this._readOnly=!0},_removeLoadingClass:function(){this.dropdownbutton.removeClass("e-load");this.drpbtnspan.addClass("e-icon e-arrow-sans-down");this._readOnly=!1;this.popupListWrapper.removeClass("e-load")},_renderDropdown:function(){if(this.wrapper=t.buildTag("span.e-ddl e-widget "+this.model.cssClass+"#"+this._id+"_wrapper","",{},{tabindex:"0",accesskey:this.element.attr("accesskey")}),this.container=t.buildTag("span.e-in-wrap e-box #"+this._id+"_container"),this.element.removeAttr("accesskey"),this.model.value==null&&this.element.attr("value")!=null&&(this.model.value=this.element.attr("value")),this.element.attr("value","").val(""),this._isIE8?this._setAttr(this.element[0],{role:"combobox","aria-expanded":!1,"aria-autocomplete":"list","aria-haspopup":!0,"aria-owns":this._id+"_popup"}).element.hide():this._setAttr(this.element[0],{type:"hidden",role:"combobox","aria-expanded":!1,"aria-autocomplete":"list","aria-haspopup":!0,"aria-owns":this._id+"_popup"}).element.hide(),this.drpbtnspan=t.buildTag("span.e-icon e-arrow-sans-down","",{},{"aria-label":"select",unselectable:"on"}),this.dropdownbutton=t.buildTag("span.e-select#"+this._id+"_dropdown","",{},{role:"button",unselectable:"on"}).append(this.drpbtnspan),this.container.insertAfter(this.element),this.container.append(this.element),this.container.append(this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.selectelement&&this.selectOptions.insertBefore(this.element),this._visibleInput=t.buildTag("input#"+this._id+"_hidden","",{}).insertAfter(this.element),this._visibleInput.addClass("e-input "),this._setAttr(this._visibleInput[0],{readonly:"readonly",tabindex:-1,"data-role":"none"}),!this._isWatermark){var i=this.model.watermarkText!=null?this.model.watermarkText:this._localizedLabels.watermarkText;this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element);this._hiddenSpan.text(i);this._hiddenSpan.css("display","none");this._hiddenSpan.on("mousedown",n.proxy(this._OnDropdownClick,this))}this._checkNameAttr();this._setDimentions();this._RightToLeft();this.ddWidth=this.dropdownbutton.outerWidth()>0?this.dropdownbutton.outerWidth():24;this.container.on("mousedown",n.proxy(this._OnDropdownClick,this))},_checkNameAttr:function(){this._name=t.isNullOrUndefined(this.element.attr("name"))?this._id:this.element.attr("name");this.element.attr("name",this._name)},_addAttr:function(i){var r=this;n.map(i,function(i,u){var f=u.toLowerCase();f=="class"?r.wrapper.addClass(i):f=="disabled"&&i=="disabled"?r.disable():f=="readOnly"&&i=="readOnly"?r.model.readOnly=!0:f=="style"?r.wrapper.attr(u,i):t.isValidAttr(r._visibleInput[0],u)?n(r._visibleInput).attr(u,i):r.wrapper.attr(u,i)})},_renderBoxModel:function(){if(!t.isNullOrUndefined(this._ulBox)||this.model.multiSelectMode!="visualmode")return!1;this._ulBox=t.buildTag("ul.e-ul e-boxes");this.container.prepend(this._ulBox);this._ulBox.css("min-height","30px");this._ulBox.css("display","none");this._on(this.container,"click",function(t){if(!this.model.enabled)return!1;var i=n(t.target);i.hasClass("e-options")&&(!t.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active"));!t.ctrlKey&&i.hasClass("e-boxes")&&this._removeActive()})},_renderPopupPanelWrapper:function(){var i=n("#"+this.element[0].id+"_popup_wrapper").get(0);i&&n(i).remove();this.popupPanelWrapper=t.buildTag("div#"+this._id+"_popup_wrapper");n("body").append(this.popupPanelWrapper);this.popupListWrapper=t.buildTag("div.e-ddl-popup e-box e-widget  e-popup#"+this._id+"_popup_list_wrapper","",{display:"none",overflow:"hidden"});this.popupList=t.buildTag("div#"+this._id+"_popup",{tabIndex:0});this.popupListWrapper.addClass(this.model.cssClass);this.popup=this.popupList;this.popupScroller=t.buildTag("div");this.ultag=t.buildTag("ul.e-ul","",{},{role:"listbox"});this.popupScroller.append(this.ultag);this.popupList.append(this.popupScroller);this.model.headerTemplate&&(this.headerTemplate=n("<div>").append(this.model.headerTemplate),this.popupListWrapper.append(this.headerTemplate));this.popupListWrapper.append(this.popupList);this.popupPanelWrapper.append(this.popupListWrapper);this.ultag.on({mouseenter:n.proxy(this._OnMouseEnter,this),mouseleave:n.proxy(this._OnMouseLeave,this),click:n.proxy(this._OnMouseClick,this)},"li:not('.e-category')");if(t.isTouchDevice())this.ultag.on({tap:n.proxy(this._OnMouseEnter,this)},"li:not('.e-category')");n(window).on("resize",n.proxy(this._OnWindowResize,this))},_updateText:function(){this.model.text=this._visibleInput.val()==""?null:this._visibleInput.val()},_updateValue:function(n){this.value(n==""?null:n)},_setGroupingAndSorting:function(n,t){var i,u,r;if(this.model[n]=t,i=this.model.text,this._updateValue(""),this._selectedIndices=[],this.ultag.empty(),this._showFullList(),this.model.showCheckbox&&i)for(u=i.split(this.model.delimiterChar),r=0;r<u.length;r++)this.selectItemByText(u[r]);else this.selectItemByText(i)},_setSortingList:function(){var t=document.createElement("ul"),r,i;if(n(t).append(this.itemsContainer.children()),this.model.allowGrouping||n(t).find(">.e-category").length>0)for(this.popupListWrapper.addClass("e-atc-popup"),r=0;r<n(t).find(">.e-category").length;r++)i=n(t).find(">.e-category").eq(0).first().nextUntil(".e-category").get(),this._setSortList(t,i);else n(t).children(">.e-category").remove(),i=n(t).children("li").get(),this._setSortList(t,i);this.itemsContainer=n(t)},_setSortList:function(t,i){i.sort(function(t,i){var r=n(t).text().toUpperCase(),u=n(i).text().toUpperCase();return r<u?-1:r>u?1:0});this.model.sortOrder=="descending"&&i.reverse();(this.model.allowGrouping||n(t).find(">.e-category").length>0)&&(n(t).append(n("<li>").text(n(t).find(">.e-category").eq(0).text()).addClass("e-category")),n(t).find(">.e-category").eq(0).remove());n.each(i,function(i,r){n(t).append(r)})},_renderPopupList:function(){this._doDataBind();this._renderRemaining()},_renderRemaining:function(){var t=this;this._dropbtnRTL();this.model.enableFilterSearch&&this._enableSearch();this.model.enablePopupResize&&this._enablePopupResize();this.model.allowVirtualScrolling&&this.model.virtualScrollMode=="normal"&&this._totalCount&&this._totalCount>0&&(this._totalHeight=this._totalCount*29,this._totalPages=this._totalCount/(this.model.itemsCount*29),this._loadedItemHeight=this._getLi().length*29,this._getLi().attr("page",0),this._virtualPages=[0],this.ultag.append(n("<span>").addClass("e-virtual").css({height:this._totalHeight-this._loadedItemHeight,display:"block"})));this._virtualUl=this.ultag.clone(!0);this._setListWidth();this._setListHeight();this._isSingleSelect()||(this.model.showCheckbox?this._checkboxHideShow(this.model.showCheckbox):this._multiItemSelection(this._getLi()));this._setUncheckAll(this.model.uncheckAll);this.popupScroller.css({height:"",width:""});this.popupList.ejScroller({height:this._getPopupHeight(),width:0,scrollerSize:20,scroll:function(n){t.model.allowVirtualScrolling&&t._onScroll(n)}});this.scrollerObj=this.popupList.ejScroller("instance");this.popupList.find("div.e-scrollbar div").attr("unselectable","on");this._setListPosition();this.popupListWrapper.css({display:"none",visibility:"visible"});this._changeSkin(this.model.cssClass);this.model.showPopupOnLoad&&this._showResult()},_enableSearch:function(){if(this.model.enableFilterSearch&&!this.inputSearch){this.inputSearch=t.buildTag("input#"+this._id+"_inputSearch.e-input","",{},{type:"text","data-role":"none"});this.popupListWrapper.prepend(n("<span>").addClass("e-atc e-search").append(n("<span>").addClass("e-in-wrap ").append(this.inputSearch).append(n("<span>").addClass(" e-icon e-search"))));var i=this.model.enableServerFiltering?this._debounce(this._OnSearchEnter,200):this._OnSearchEnter;this._on(this.inputSearch,"keyup",i)._on(this.inputSearch,"keydown",function(n){var t=n.keyCode||n.which;t==9&&(n.preventDefault(),this.wrapper.focus(),this._hideResult())})}},_removeSearch:function(){this.model.enableFilterSearch=!1;this.popupListWrapper.find(".e-atc.e-search").remove();this._isPopupShown()&&this.hidePopup();this.inputSearch=null},_OnSearchEnter:function(i){var f=this,u,r;n.inArray(i.keyCode,[38,40,13])!=-1&&this.ultag.find("li.e-nosuggestion").length<=0?i.keyCode==13?this._OnKeyUp(i):this._OnKeyDown(i):(this._activeItem=-1,this._queryString=this.inputSearch.val(),this._queryString==""&&this._virtualUl?(r={searchString:this._queryString,searchQuery:null,items:this._rawList},this._trigger("search",r),this._resetList(),this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition()):(this._mapFields(),u=this._addSearchQuery(t.Query(),!this._isPlainType(this._rawList)),r={searchString:this._queryString,items:this._rawList,searchQuery:u},this.popupListWrapper.find(".e-atc.e-search .e-search").addClass("e-cross-circle").removeClass("e-search"),this._on(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch),this._trigger("search",r)||f._onActionComplete(r)))},_debounce:function(n,t){var i,r=this;return function(){var u=arguments,f=function(){return i=null,n.apply(r,u)};clearTimeout(i);i=setTimeout(f,t)}},_onActionComplete:function(n){var r=this,n,i,u;this._queryString=this.inputSearch.val();i=this._addSearchQuery(t.Query(),!this._isPlainType(this._rawList));n={searchString:this._queryString,items:this._rawList,searchQuery:i};t.DataManager&&this.model.dataSource instanceof t.DataManager&&this.model.enableServerFiltering&&(window.getSelection().type=="Caret"||t.browserInfo().name=="msie")?(i=n.searchQuery.clone(),u=r.model.dataSource.executeQuery(i),u.done(function(t){r._filterSearch(n.searchQuery,t)})):r._filterSearch(i,n)},_refreshSearch:function(){this._resetSearch();this._refreshPopup()},_filterSearch:function(n,i){var f=!1,r,u,e;this.resultList=i.result?i.result:t.DataManager(this._rawList).executeLocal(n);this.resultList.length==0&&(f=!0,this.resultList.push(this._getLocalizedLabels("emptyResultText")));this.popupListItems=this.resultList;this.ultag.empty();this._isPlainType(this.popupListItems)?this._plainArrayTypeBinding(this.resultList):this._objectArrayTypeBinding(this.resultList,"search");f&&this.ultag.find("li").length==1&&this.ultag.find("li").eq(0).addClass("e-nosuggestion");this.model.showCheckbox&&!f&&this._appendCheckbox(this._getLi());this._onSearch=!0;r=this.value();u=this._visibleInput[0].value;this._setValue(this.value());e=typeof this.model.value=="function"?this.model.value():this.model.value;e!=r&&(this.element[0].value=r,this._visibleInput[0].value=u,this.model.text=u==""?null:u,this.value()==r||this.value()==null&&r==""||this._updateValue(r));this._onSearch=!1;this._updateSelectedIndexByValue(this.value());this._refreshScroller();this._setListPosition()},_updateSelectedIndexByValue:function(n){var r,i,t;if(n&&this.model.enableFilterSearch){for(this._selectedIndices=this.model.selectedItems=this.model.selectedIndices=[],this._virtualList=this._virtualUl.children("li:not('.e-category')"),r=this._toArray(n),i=0;i<r.length;i++)for(t=0;t<this._virtualList.length;t++)if(r[i]==this._getIndexedValue(this._virtualList[t])){this._selectedIndices.push(t);break}this.model.selectedItems=this.model.selectedIndices=this._selectedIndices}},_getIndexedValue:function(n){return this._getAttributeValue(n)?this._getAttributeValue(n):n.innerText},_resetSearch:function(){this.inputSearch&&this.model&&this.model.enableFilterSearch&&this.inputSearch.val()!=""&&this._virtualUl&&(this.inputSearch.val(""),this._resetList())},_resetList:function(){var i,n;if(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").length==1&&(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").addClass("e-search").removeClass("e-cross-circle"),this._off(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch)),this.model.enableServerFiltering){for(i=this.model.fields&&this.model.fields.value?this.model.fields.value:"value",n=0;n<this._rawList.length;n++)this._rawList[n][i]==this._selectedValue&&(this._searchresult=null);t.isNullOrUndefined(this._searchresult)||this.model.allowVirtualScrolling&&this.model.virtualScrollMode=="normal"||this.addItem(this._searchresult)}this._listItem(this._rawList);this.ultag.empty().append(this._virtualUl.children().clone(!0));this._onSearch=!0;this._setValue(this.value());this._onSearch=!1;this._searchresult=[]},_addSearchQuery:function(n,t){var r="",i;return t&&(i=this.model.fields,r=i&&i.text?i.text:"text"),this._queryString&&n.where(r,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch),this.model.itemsCount>0&&n.take(this.model.itemsCount),n},_targetElementBinding:function(){var e=this.element.parents().last(),r,f,t,u,i;if(this.docbdy=this.model.targetID?e.find("#"+this.model.targetID):this.optionDiv?this.optionDiv:null,!this.docbdy)return!1;if(this.itemsContainer=this.docbdy[0].nodeName=="UL"?this.docbdy:this.docbdy.children("ol,ul"),(this.model.allowGrouping||this.itemsContainer.find(">.e-category").length>0)&&!this.model.enableSorting)for(this.popupListWrapper.addClass("e-atc-popup"),r=0;r<this.itemsContainer.find(">.e-category").length;r++)f=this.itemsContainer.find(">.e-category").eq(r),f.replaceWith(n("<li>").text(f.text()).addClass("e-category"));else this.model.enableSorting&&this._setSortingList();for(this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li"),this.items.children("img,div").addClass("e-align"),this._listItem([]),t=0;t<this.items.length;t++)u=n(this.items[t]).text(),i=this._getAttributeValue(this.items[t]),n(this.items[t]).attr("data-value")||n(this.items[t]).attr("data-value",i?i:u),this._listItem({text:u,value:i?i:u},"add");this.ultag.empty().append(this.itemsContainer.children());this.ultag.children("li").attr("role","option").attr("unselectable","on");this.docbdy.css({display:"none"}).children("ol,ul").remove()},_plainArrayTypeBinding:function(i){var r,u;if(this.dummyUl=n(),this.model.enableSorting&&(i.sort(),this.model.sortOrder=="descending"&&i.reverse()),i.length>0){for(r=0;r<i.length;r++)t.isNullOrUndefined(i[r])||(u=t.buildTag("li",i[r],{},{"data-value":i[r],unselectable:"on"}),this.dummyUl.push(u[0]));this.ultag.append(this.dummyUl);this._trigger("dataBound",{data:i})}},_mapFields:function(){this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category;var n=this.model.fields;this.mapFld={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null};this.mapFld._id=n&&n.id?n.id:"id";this.mapFld._imageUrl=n&&n.imageUrl?n.imageUrl:"imageUrl";this.mapFld._imageAttributes=n&&n.imageAttributes?n.imageAttributes:"imageAttributes";this.mapFld._spriteCSS=n&&n.spriteCssClass?n.spriteCssClass:"spriteCssClass";this.mapFld._text=n&&n.text?n.text:"text";this.mapFld._value=n&&n.value?n.value:"value";this.mapFld._htmlAttributes=n&&n.htmlAttributes?n.htmlAttributes:"htmlAttributes";this.mapFld._selected=n&&n.selected?n.selected:"selected";this.mapFld._category=n&&n.groupBy?n.groupBy:"groupBy"},_doDataBind:function(){var t=this.model.dataSource,n=this.popupListItems;!t||!n||!n.length||n.length<1?this._targetElementBinding():this._isPlainType(n)?this._plainArrayTypeBinding(n):this._objectArrayTypeBinding(n)},_isPlainType:function(n){return typeof n[0]!="object"},_objectArrayTypeBinding:function(i,r){var s,h,u,o,f,e;if(this.dummyUl=n(),this._mapFields(),this.model.enableSorting&&(s=t.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0),i=t.DataManager(i).executeLocal(s),this.popupListItems=i),this.model.allowGrouping||this.model.fields.groupBy)for(this.popupListWrapper.addClass("e-atc-popup"),h=this.mapFld._category,o=t.Query().group(h),this.model.enableSorting||o.queries.splice(0,1),u=t.DataManager(i).executeLocal(o),this._swapUnCategorized(u),r=="search"?this.popupListItems=[]:this._listItem([]),f=0;f<u.length;f++)for(u[f].key&&this.ultag.append(t.buildTag("li.e-category",u[f].key).attr("role","option")[0]),this._generateLi(u[f].items,this.mapFld),this.ultag.append(this.dummyUl),e=0;e<u[f].items.length;e++)r=="search"?this.popupListItems.push(u[f].items[e]):this._listItem(u[f].items[e],"add");else this._generateLi(i,this.mapFld),this.ultag.append(this.dummyUl);this._trigger("dataBound",{data:i})},_onScroll:function(i){var e,o,f;if(i.scrollTop){var s=i.scrollTop,r=this,u=this.model.dataSource;r.model.allowVirtualScrolling&&r.model.virtualScrollMode=="continuous"?(f=t.Query().skip(r._rawList.length).take(r.model.itemsCount).clone(),s>=Math.round(n(r.popupList).find("ul,ol").height()-n(r.popupList).height())&&r._rawList.length<r._totalCount&&(r._addLoadingClass(),t.DataManager&&r.model.dataSource instanceof t.DataManager&&!t.isNullOrUndefined(r.model.dataSource.dataSource.url)?(f=r.inputSearch&&r.inputSearch.val()!=""&&this.model.enableServerFiltering?r._addSearchQuery(t.Query(),!r._isPlainType(r._rawList)).skip(r._getLi().length).clone():r._getQuery().skip(r._rawList.length).take(r.model.itemsCount).clone(),r._trigger("actionBegin",{requestFrom:"scroll"})||(o=r.model.dataSource.executeQuery(f),o.done(function(n){!t.isNullOrUndefined(r.model.value)&&r.model.enableServerFiltering&&(n.result=r._removeSelectedValue(n.result));r.addItem(n.result);r._removeLoadingClass();r._trigger("actionSuccess",{e:n,requestFrom:"scroll"})}).fail(function(){r.model.dataSource=null;r._removeLoadingClass();r._trigger("actionFailure",{e:i,requestFrom:"scroll"})}).always(function(n){r._trigger("actionComplete",{e:n,requestFrom:"scroll"})}))):t.DataManager&&u instanceof t.DataManager&&u.dataSource.offline&&u.dataSource.json&&u.dataSource.json.length>0?(r.addItem(this._localDataVirtualScroll()),window.setTimeout(function(){r._removeLoadingClass()},100)):(e=t.DataManager(r.model.dataSource).executeLocal(f),r.addItem(r._removeSelectedValue(e)),r._removeLoadingClass()))):r.model.allowVirtualScrolling&&r.model.virtualScrollMode=="normal"&&window.setTimeout(function(){r._virtualCount==0&&r._loadList()},300)}},_localDataVirtualScroll:function(){var n=this,i=t.isNullOrUndefined(n.value())?0:n.value().split(n.model.delimiterChar).length,r=n._checkValue?n._rawList.length-i:n._rawList.length,u=t.DataManager(n.model.dataSource.dataSource.json).executeLocal(t.Query().skip(r).take(n.model.itemsCount).clone());return n._removeSelectedValue(u)},_removeSelectedValue:function(n){var u,r,i;if(t.isNullOrUndefined(this.value()))return n;for(u=this.value().split(this.model.delimiterChar),r=0;r<u.length;r++)for(i=0;i<n.length;i++)n[i][this.mapFld._value]==u[r]&&n.splice(n.indexOf(n[i]),1);return n},_loadList:function(){var r,h,c,l,a,u;this._virtualCount++;var e=this.model.dataSource,v=this.scrollerObj.scrollTop(),i=this,o=0,f,s=null;if(this._currentPage=Math.round(v/(29*this.model.itemsCount)),n.inArray(this._currentPage,this._virtualPages.sort(function(n,t){return n-t}))!=-1)if(this._currentPage==0){if(n.inArray(this._currentPage+1,this._virtualPages)!=-1)return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else if(n.inArray(this._currentPage-1,this._virtualPages)!=-1){if(n.inArray(this._currentPage+1,this._virtualPages)!=-1)return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else this._currentPage=this._currentPage-1;for(f=!(n.inArray(this._currentPage-1,this._virtualPages)!=-1),this._addLoadingClass(),r=this._virtualPages.length-1;r>=0;r--)if(this._virtualPages[r]<this._currentPage){o=this._virtualPages[r];r+1==this._virtualPages.length||(s=this._virtualPages[r+1]);break}if(h=f?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,u=t.Query().range(h,this._currentPage*this.model.itemsCount+this.model.itemsCount),t.DataManager&&i.model.dataSource instanceof t.DataManager&&!t.isNullOrUndefined(i.model.dataSource.dataSource.url)){if(a=f?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,u=this._getQuery().skip(a),f){for(r=0;r<u.queries.length;r++)if(u.queries[r].fn=="onTake"){u.queries.splice(r,1);break}u.take(2*this.model.itemsCount)}i._trigger("actionBegin",{requestFrom:"scroll"})||(i.inputSearch&&i.inputSearch.val()!=""&&this.model.enableServerFiltering&&(u=i._addSearchQuery(t.Query(),!i._isPlainType(i._rawList)).skip(i._getLi().length).clone()),c=i.model.dataSource.executeQuery(u),c.done(function(n){n.result=i._removeSelectedValue(n.result);i._appendVirtualList(n.result,o,i._currentPage,s,f);i._removeLoadingClass();i._trigger("actionSuccess",{e:n,requestFrom:"scroll"})}).fail(function(n){i._virtualCount--;i._removeLoadingClass();i._trigger("actionFailure",{e:n,requestFrom:"scroll"})}).always(function(n){i._trigger("actionComplete",{e:n,requestFrom:"scroll"})}))}else t.DataManager&&e instanceof t.DataManager&&e.dataSource.offline&&e.dataSource.json&&e.dataSource.json.length>0?(i._appendVirtualList(this._localDataVirtualScroll(),o,i._currentPage,s,f),window.setTimeout(function(){i._removeLoadingClass()},100)):(l=t.DataManager(i.model.dataSource).executeLocal(u),i._appendVirtualList(i._removeSelectedValue(l),o,i._currentPage,s,f),i._removeLoadingClass())},_appendVirtualList:function(i,r,u,f,e){var o,h,l,s,a,c;if(this._virtualCount--,this.ultag.find("span.e-virtual").remove(),t.isNullOrUndefined(this.activeItem)||this.activeItem.attr("page","0"),n.inArray(u,this._virtualPages.sort(function(n,t){return n-t}))!=-1)return!1;for(e&&n.inArray(u-1,this._virtualPages.sort())!=-1&&(i.splice(0,this.model.itemsCount),e=!1),o=this.model.itemsCount,h=n("<ul>"),l=e?(u-1)*o*29-(r*o+o)*29:u*o*29-(r*o+o)*29,l!=0&&h.append(n("<span>").addClass("e-virtual").css({display:"block",height:l})),this._mapFields(),this._generateLi(i,this.mapFld),n(this.dummyUl).attr("page",u),e&&n(this.dummyUl).slice(0,o).attr("page",u-1),this.model.showCheckbox&&this._appendCheckbox(this.dummyUl),h.append(this.dummyUl),s=(u*o+o)*29,s=f!=null?f*o*29-s:this.ultag.height()-s,s!=0&&h.append(n("<span>").addClass("e-virtual").css({display:"block",height:s})),a=this.model.itemsCount>0&&this.value()!=""&&this.model.dataSource instanceof t.DataManager&&this.model.dataSource.dataSource.offline?this.ultag.find("li").last():this.ultag.find("li[page="+r+"]").last(),a.next().remove(),h.children().insertAfter(a),this._virtualPages.push(u),e&&this._virtualPages.push(u-1),c=0;c<i.length;c++)this._listItem(i[c],"add");this._virtualUl=this.ultag.clone(!0);this._renderBoxModel()},_generateLi:function(i,r){var u,s,p,h;if(this.mapFld=r,this.dummyUl=[],!i||!i.length||i.length<1)return!1;for(u=0;u<i.length;u++){var c=this._getField(i[u],this.mapFld._id),l=this._getField(i[u],this.mapFld._imageUrl),a=this._getField(i[u],this.mapFld._imageAttributes),v=this._getField(i[u],this.mapFld._spriteCSS),e=this._getField(i[u],this.mapFld._text),o=this._getField(i[u],this.mapFld._value),y=this._getField(i[u],this.mapFld._htmlAttributes),w=this._getField(i[u],this.mapFld._selected),f=document.createElement("li");!t.isNullOrUndefined(o)&&o.toString().length>0?f.setAttribute("data-value",typeof o=="object"?JSON.stringify(o):o):f.setAttribute("data-value",e);t.isNullOrUndefined(c)||c===""||f.setAttribute("id",c);t.isNullOrUndefined(y)||y==""||this._setAttr(f,y);this.model.template?n(f).append(this._getTemplatedString(i[u])):(t.isNullOrUndefined(l)||l==""||(s=document.createElement("img"),this._setClass(s,"e-align")._setAttr(s,{src:l,alt:e}),a&&a!=""&&this._setAttr(s,a),f.appendChild(s)),t.isNullOrUndefined(v)||v==""||(p=document.createElement("div"),this._setClass(p,"div.e-align "+v+" sprite-image"),f.appendChild(p)),w&&this._setClass(f,"chkselect"),t.isNullOrUndefined(e)&&(e=String(e)),h=document.createElement("span"),h.innerHTML=e,this._setClass(h,"e-ddltxt"),f.innerHTML+=h.outerHTML);this._setAttr(f,{role:"option",unselectable:"on"});this.dummyUl.push(f)}},_setAttr:function(n,t){var r,i,u;if(typeof t=="string")r=t.replace(/['"]/g,"").split("="),r.length==2&&n.setAttribute(r[0],r[1]);else for(i in t)if((i=="styles"||i=="style")&&typeof t[i]=="object")for(u in t[i])n.style[u]=t[i][u];else n.setAttribute(i,t[i]);return this},_setClass:function(n,t){return n.className+=" "+t,this},_removeClass:function(n,t){var i=n.className.indexOf(t);return i>=0&&(n.className=i!=0&&n.className[i-1]===" "?n.className.replace(" "+t,""):n.className.replace(t,"")),this},_hasClass:function(n,t){return n.className.indexOf(t)>=0},_swapUnCategorized:function(t){n(t).each(function(n,i){if(!i.key){for(var r=n;r>0;r--)t[r]=t[r-1];return t[r]=i,!1}})},_getField:function(n,i){return t.pvt.getObject(i,n)},_getTemplatedString:function(n){for(var t=this.model.template,i=t.indexOf("${"),r=t.indexOf("}"),u,f;i!=-1&&r!=-1;)u=t.substring(i,r+1),f=u.replace("${","").replace("}",""),t=t.replace(u,this._getField(n,f)),i=t.indexOf("${"),r=t.indexOf("}");return t},_setWatermark:function(){if(this.element.val()==""&&this._trim(this._visibleInput.val())==""){var n=this.model.watermarkText!=null?this.model.watermarkText:this._localizedLabels.watermarkText;this._isWatermark?this._visibleInput.attr("placeholder",n):this._hiddenSpan.css("display","block").text(n);this.model.multiSelectMode=="visualmode"&&this._ulBox&&this._ulBox.find("li").length==0&&this._swapUlandInput(!1)}},_checkboxHideShow:function(n){if(n){this.listitems=this._getLi();var t=this.listitems.find("input[type=checkbox]");t.length==0&&this._appendCheckbox(this.listitems)}else this._removeCheck(this.popupList);this.model.showCheckbox=n;this._virtualUl=this.ultag.clone(!0)},_setCheckAll:function(n){!this._isSingleSelect()&&n?this.checkAll():this.model.checkAll=!1},_setUncheckAll:function(n){!this._isSingleSelect()&&n?this.uncheckAll():this.model.uncheckAll=!1},checkAll:function(){var e=this._selectedIndices,u=!1,i,r,f;if(this._mapFields(),this.listitems=this._getLi(),this._isWatermark||this._hiddenSpan.css("display","none"),!this._isSingleSelect()){for(i=0;i<this.listitems.length;i++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[i]:this._getField(this.popupListItems[i],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[i])||this._currentText,this._checkContains(this._hiddenValue)?u=!0:this.model.showCheckbox?(r=n(this.listitems[i]).children(".e-checkwrap")[0],r&&!this._isChecked(r)?(this._setClass(r,"e-check-act"),this._setAttr(r,{"aria-checked":!0}),r.firstChild.checked=!0,u=!1):u=!0):(u=!1,n(this.listitems[i]).addClass("e-active")),u||(this.checkedStatus=!0,this._itemID=n(this.listitems[i]).attr("id"),t.isNullOrUndefined(this._itemID)||this._itemID==""||this._selectedItemsID.push(this._itemID),this._createListHidden(this._hiddenValue),this.model.multiSelectMode=="visualmode"&&(this._ulBox.append(this._createBox(this._currentText,this._hiddenValue)),this._isPopupShown()&&this._setListPosition()),this._addText(this._currentText),n.inArray(i,e)==-1&&(this._selectedIndices.push(i),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[i])||"",this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),f={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:i,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._updateValue(this.element.val()),this._updateText(),this._initValue||this._trigger("change",f),this._activeItem=i,this.activeItem=this._getActiveItem(),this._cascadeAction());this.model.itemValue=this._selectedValue;this.model.uncheckAll=!1;this.model.checkAll=!0;this._activeItem=-1;this._setWatermark()}},_createListHidden:function(t){var i=document.createElement("input"),r=/'/;r.test(t)&&(t=t.replace(r,"&apos;"));this._setAttr(i,{type:"hidden",name:this._name,value:t,id:"#"+t});this.container.append(i);n(this.element).attr("name","hiddenEle")},_removeListHidden:function(t){var i=/'/,r;i.test(t)&&(t=t.replace(i,"&apos;"));r=this.container.find("[id='#"+t+"']");n(r).remove();this._isSingleSelect()||this.element.attr("name",this._name)},_getAttributeValue:function(n){return n?n.getAttribute("data-value")||n.getAttribute("value"):null},_selectCheckedItem:function(n){for(var t=0;t<n.length;t++)this._activeItem=n[t],this._enterTextBoxValue()},unCheckAll:function(){this.uncheckAll()},uncheckAll:function(){var u=!1,i,r,f,e;if(this.listitems=this._getLi(),this._mapFields(),!this._isSingleSelect()){for(i=0;i<this.listitems.length;i++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[i]:this._getField(this.popupListItems[i],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[i])||this._currentText,this._checkContains(this._hiddenValue)?this.model.showCheckbox?(r=n(this.listitems[i]).children(".e-checkwrap")[0],r&&this._isChecked(r)?(this._removeClass(r,"e-check-act"),this._setAttr(r,{"aria-checked":!1}),r.firstChild.checked=!1,u=!0):u=!1):(n(this.listitems[i]).removeClass("e-active"),u=!0):u=!1,u&&(this.checkedStatus=!1,this._activeItem=i,this.activeItem=this._getActiveItem(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),f=this._selectedIndices,n.inArray(i,f)>-1&&(this._selectedIndices.splice(n.inArray(i,f),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[i])||"",this._itemID=n(this.listitems[i]).attr("id"),t.isNullOrUndefined(this._itemID)||this._itemID==""||this._removeSelectedItemsID(),this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),e={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:i,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._updateValue(this.element.val()),this._updateText(),this._initValue||this._trigger("change",e),this._cascadeAction(),this.model.multiSelectMode=="visualmode"&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition()));this.model.itemValue=this._selectedValue;this.model.checkAll=!1;this.model.uncheckAll=!0;this._setWatermark();this._activeItem=-1}},_removeSelectedItemsID:function(){var n;n=this._selectedItemsID.indexOf(this._itemID);this._selectedItemsID.splice(n,1);this._itemID=""},_refreshScroller:function(){this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto"));this.popupList.find(".e-content, .e-vhandle").removeAttr("style");this.popupList.find(".e-vhandle div").removeAttr("style");this.popupList.children(".e-content").removeClass("e-content");var n=this._isPopupShown();this.popupListWrapper.css("display","block");this.popupList.css({display:"block"});this.scrollerObj.model.height=Math.ceil(this._getPopupHeight());this.scrollerObj.refresh();this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto"));this.scrollerObj.option("scrollTop",0);n||this.popupListWrapper.css("display","none")},_enablePopupResize:function(){this.model.enablePopupResize&&(this.popupListWrapper.addClass("e-resizable").append(t.buildTag("div.e-resizebar").append(t.buildTag("div.e-icon e-resize-handle"))).find(".e-resize-handle").addClass(this.model.enableRTL?"e-rtl-resize":""),this._resizePopup())},_resizePopup:function(){var t=this,i=!1;this.popupListWrapper.find("div.e-resize-handle").ejResizable({minHeight:t._validatePixelData(t.model.minPopupHeight),minWidth:t._validatePixelData(t.model.minPopupWidth),maxHeight:t._validatePixelData(t.model.maxPopupHeight),maxWidth:t._validatePixelData(t.model.maxPopupWidth),handle:"e-ddl-popup",resizeStart:function(n){if(!t.model.enabled)return!1;i||t._trigger("popupResizeStart",{event:n});i=!0},resize:function(i){var r=n(i.element).parents("div.e-ddl-popup");t._refreshPopupOnResize(n(r).outerHeight(),n(r).outerWidth());t._trigger("popupResize",{event:i})},resizeStop:function(n){i&&(t._refreshPopupOnResize(t.model.popupHeight,t.model.popupWidth),i&&t._trigger("popupResizeStop",{event:n}),i=!1)},helper:function(i){var r=n(i.element).parents("div.e-ddl-popup");return t._refreshPopupOnResize(n(r).outerHeight(),n(r).outerWidth()),n(t.popupListWrapper)}})},_refreshPopupOnResize:function(n,t){n&&(this.model.popupHeight=n);t&&(this.model.popupWidth=t);this.popupListWrapper.css({height:this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight)});this._setListWidth();this._refreshScroller()},_setListWidth:function(){var n=this.model.popupWidth;n!="auto"?this.popupListWrapper.css({width:n}):this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)});this.popupListWrapper.css({"max-width":this._validatePixelData(this.model.maxPopupWidth)})},_setListHeight:function(){this.model.enablePopupResize&&this.model.enableFilterSearch&&this.model.minPopupHeight&&this.model.minPopupHeight.toString().indexOf("%")<0&&this._validatePixelData(this.model.minPopupHeight)==20&&(this.model.minPopupHeight="65");this.model.enablePopupResize?this.popupListWrapper.css({"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight),height:this._validatePixelData(this.model.popupHeight)}):this.popupListWrapper.css({"max-height":this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight)})},_validatePixelData:function(n){return n&&!isNaN(n)?Number(n):n},_getPopupHeight:function(){var n=this.popupListWrapper.height(),t;return this.model.enablePopupResize&&(n-=this.popupListWrapper.find(">div.e-resizebar").height()),this.model.headerTemplate&&this.headerTemplate&&(n-=this.headerTemplate.height()),this.model.enableFilterSearch&&this.inputSearch&&(t=this.inputSearch.parent(".e-in-wrap"),n-=parseInt(t.css("height"))+parseInt(t.css("margin-top"))+parseInt(t.css("margin-bottom"))),n},_refreshPopup:function(){this.model.popupWidth!="auto"||this._validatePixelData(this.model.minPopupWidth)?this._validatePixelData(this.model.minPopupWidth)&&this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}):this.popupListWrapper.css({"min-width":this.wrapper.width()});this.scrollerObj!=i&&this._refreshScroller();this._setListPosition()},_setListPosition:function(){var t=this.wrapper,i=this._getOffset(t),f,h=n(document).scrollTop()+n(window).height()-(i.top+n(t).outerHeight()),c=i.top-n(document).scrollTop(),u=this.popupListWrapper.outerHeight(),e=this.popupListWrapper.outerWidth(),r=i.left,o=t.outerHeight(),l=(o-t.height())/2,a=this._getZindexPartial(),s=3,v=(u<h||u>c?i.top+o+s:i.top-u-s)-l;f=n(document).scrollLeft()+n(window).width()-r;(this.model.enableRTL||e>f&&e<r+t.outerWidth())&&(r-=this.popupListWrapper.outerWidth()-t.outerWidth());this.popupListWrapper.css({left:r+"px",top:v+"px","z-index":a})},_getOffset:function(n){return t.util.getOffset(n)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popupListWrapper)},_showResult:function(){var i=this,r={text:this._visibleInput[0].value,value:this._selectedValue,refreshPopup:!0};this._trigger("beforePopupShown",r)||(r.refreshPopup&&this._refreshPopup(),n(this.popupListWrapper).slideDown(this.model.enableAnimation?200:1,function(){n(document).on("mousedown",n.proxy(i._OnDocumentClick,i));t.isDevice()||i._on(t.getScrollableParents(i.wrapper),"scroll",i._hideResult)}),this.element[0].setAttribute("aria-expanded",!0),this._listSize=this._getLi().length,this.wrapper.addClass("e-popactive"),this._trigger("popupShown",{text:this._visibleInput[0].value,value:this._selectedValue}),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")}))},_OnWindowResize:function(){!t.isNullOrUndefined(this.model)&&this._isPopupShown()&&this._refreshPopup()},_hideResult:function(i){if(this.model&&this._isPopupShown()){if(!t.isNullOrUndefined(i)&&!t.isNullOrUndefined(this.inputSearch)&&n(this.inputSearch).is(":focus")&&i.type=="scroll"&&t.isTouchDevice())return!1;var r=this;if(this._trigger("beforePopupHide",{text:this._visibleInput[0].value,value:this._selectedValue}))return;n(this.popupListWrapper).slideUp(this.model.enableAnimation?100:0,function(){n(document).off("mousedown",n.proxy(r._OnDocumentClick,r))});this.element!=null&&this.element.attr("aria-expanded",!1);t.isDevice()||this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult);this._visibleInput!=null&&this.wrapper.removeClass("e-popactive");this._trigger("popupHide",{text:this._visibleInput[0].value,value:this._selectedValue});setTimeout(function(){r._resetSearch()},100);this._getLi().find(".e-ddl-anim").removeClass("e-ddl-anim")}},_isPopupShown:function(){return this.popupListWrapper.css("display")=="block"},_enterTextBoxValue:function(){var i,r=!0,t;if(this.removeID=!1,this.checkedStatus=!1,this._isWatermark||this._hiddenSpan.css("display","none"),this._chooseSelectionType(),(this._activeItem>=0||this._activeItem!=null)&&(this.model.showCheckbox?(t=this.activeItem.find(".e-checkwrap")[0],n(t).removeClass("e-check-inact"),this.checkedStatus=this._isChecked(t)):this.checkedStatus=this.activeItem.hasClass("e-active")),i={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},!this._initValue&&!this._onSearch&&this._raiseEvents&&this._trigger("select",i)){this._setWatermark();return}(this._activeItem>=0||this._activeItem!=null)&&(this._isSingleSelect()||this._checkContains(this._selectedValue)?this._isSingleSelect()?(this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.activeItem.addClass("e-active"),this._maintainHiddenValue(),this._visibleInput.val(this._currentText),this.element.val(this._hiddenValue),this.selectedItemIndex(this.selectedIndexValue),this.selectedIndex(this.selectedIndexValue),this._selectedIndices[0]=this.selectedIndexValue):r=!1:(this.model.showCheckbox?(t=this.activeItem.find(".e-checkwrap")[0],this._isChecked(t)||(this._removeClass(t,"e-ddl-anim"),this._setClass(t,"e-check-act e-ddl-anim"),this._setAttr(t,{"aria-checked":!0}),n(t).find(".e-check-input")[0].checked=!0)):this.activeItem.addClass("e-active"),this.model.multiSelectMode=="visualmode"&&(this._ulBox.append(this._createBox(this._currentText,this._selectedValue)),this._isPopupShown()&&this._setListPosition()),this._maintainHiddenValue(),this._addText(this._currentText),this._createListHidden(this._hiddenValue),n.inArray(this.selectedIndexValue,this._selectedIndices)==-1&&(this._selectedIndices.push(this.selectedIndexValue),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices)),r&&(this.checkedStatus=!0,this._onValueChange(),this._cascadeAction(),this.selectelement&&n("#"+this._id).children().length>this.selectedIndexValue&&(n("#"+this._id).children()[this.selectedIndexValue].selected=!0)));this.model.uncheckAll=!1;this._setWatermark();this._uiInteract=!1},_onValueChange:function(){if(this.model.itemValue=this._selectedValue,this._updateText(),this.value()!=this.element.val()&&!(this.value()==null&&this.element.val()=="")){this._updateSelectedIndexByValue(this.element.val());this._updateValue(this.element.val());this.model.showCheckbox||this.model.multiSelectMode!="none"||this.model.value!=null&&this.model.value!=""||(this.model.itemValue="");var n={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:this.selectedIndexValue,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract};this._initValue||this._onSearch||!this._raiseEvents||(typeof this.model._change=="function"&&this._trigger("_change",{isChecked:this.checkedStatus,text:this._visibleInput.val(),itemId:this.selectedIndexValue,selectedText:this._currentText,selectedValue:this._selectedValue,value:this.value(),data:this.model,isInteraction:!!this._uiInteract}),this._trigger("change",n),this.model.showCheckbox&&this._trigger("checkChange",{isChecked:this.checkedStatus,text:this._visibleInput.val(),itemId:this.selectedIndexValue,selectedText:this._currentText,selectedValue:this._selectedValue,value:this._selectedValue,data:this.model}));this._uiInteract=!1;this.model.enableFilterSearch&&this.model.enableServerFiltering&&(this._searchresult=[],this._searchresult=this.getItemDataByValue(this.value()))}},_decode:function(t){return n("<span>").html(t).text()},_chooseSelectionType:function(){this.activeItem=this._getActiveItem();this.selectedIndexValue=this._activeItem;this._mapFields();this.model.dataSource==null||this._isPlainType(this.model.dataSource)&&this._isPlainType(this.popupListItems)?(this._currentText=this.activeItem.text(),this._getAttributeValue(this.activeItem[0])?this._selectedValue=this._getAttributeValue(this.activeItem[0]):this._currentText!=null?(t.isNullOrUndefined(this.activeItem[0])||this.activeItem[0].setAttribute("value",this._currentText),this._selectedValue=this._currentText):this._selectedValue="",this._itemID=n(this.activeItem).attr("id")):(this._currentText=this._decode(this._getField(this.popupListItems[this._activeItem],this.mapFld._text)),this._currentText=this._currentText===""||this._currentText==null?this.activeItem.text():this._currentText,this._selectedValue=this._getField(this.popupListItems[this._activeItem],this.mapFld._value),this._selectedValue=this._selectedValue!=null?this._selectedValue:this._currentText,this._itemID=this._getField(this.popupListItems[this._activeItem],this.mapFld._id));t.isNullOrUndefined(this._itemID)||this._itemID==""||(this.model.showCheckbox?this.removeID?this._removeSelectedItemsID():this._selectedItemsID.push(this._itemID):(this._selectedItemsID=[],this.removeID||this._selectedItemsID.push(this._itemID)));this.selectedTextValue=this._currentText},_maintainHiddenValue:function(){this._hiddenValue=this._getAttributeValue(this.activeItem[0])||this._currentText},_removeTextBoxValue:function(i){var u,f,r;if(this._uiInteract=!0,this.removeID=!0,this.checkedStatus=!0,this._isFilterInput())for(u=0;u<this._getLi().length;u++)n(this._getLi()[u]).attr("data-value")==i&&(this._activeItem=u);if(this._chooseSelectionType(),(this._activeItem>=0||this._activeItem!=null)&&(this.model.showCheckbox?(r=this.activeItem.find(".e-checkwrap")[0],n(r).removeClass("e-ddl-anim").addClass("e-check-inact e-ddl-anim"),this.checkedStatus=this._isChecked(r)):this.checkedStatus=this.activeItem.hasClass("e-active")),f={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus},!this._initValue&&!this._onSearch&&this._raiseEvents&&this._trigger("select",f)){this._setWatermark();return}this._maintainHiddenValue();this._hiddenValue=this._isFilterInput()&&!t.isNullOrUndefined(i)?i:this._hiddenValue;this._removeText(this._hiddenValue);this._removeListHidden(this._hiddenValue);this._isFilterInput()&&!this.activeItem.attr("data-value")==i&&this.activeItem.removeClass("e-active");this._isSingleSelect()||(this.model.showCheckbox?(r=this.activeItem.find(".e-checkwrap")[0],this._isChecked(r)&&(this._removeClass(r,"e-check-act"),this._setAttr(r,{"aria-checked":!1}),n(r).find(".e-check-input")[0].checked=!0)):this.activeItem.removeClass("e-active"),n.inArray(this.selectedIndexValue,this._selectedIndices)>-1&&(this._selectedIndices.splice(n.inArray(this.selectedIndexValue,this._selectedIndices),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this.model.multiSelectMode=="visualmode"&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition()));this.checkedStatus=!1;this._onValueChange();this.model.cascadeTo==null||this._isSingleSelect()||this._initValue||this._cascadeAction();this.model.checkAll=!1;this._setWatermark()},_createBox:function(i,r){if(!this._checkContains(r)){this._ulBox.css("display")=="none"&&this._visibleInput.css("display")!="none"&&this._swapUlandInput(!0);var u=t.buildTag("span.e-icon e-close","",{},{unselectable:"on"}),f=t.buildTag("li.e-options").text(i).attr("data-value",r).append(u);return this._on(u,"click",function(t){if(!this.model.enabled)return!1;this._deleteBox(n(t.target).parent())}),f}},_deleteBoxCheck:function(t){for(var r=this._ulBox.children("li"),i=0;i<r.length;i++)n(r[i]).attr("data-value")==t&&n(r[i]).remove()},_deleteLastBox:function(){var t=this._ulBox.children("li:not(.e-search-box)"),n=t.last();n.hasClass("e-active")?this._deleteBox(n):(this._removeActive(),n.addClass("e-active"))},_deleteBox:function(t){for(var f,r,o,e,i,u=0;u<t.length;u++)if(f=n(t[u]).attr("data-value"),this._isFilterInput()){for(r=this.getListData(),i=0;i<r.length;i++)if(o=this._getField(r[i],this.mapFld._value)?this._getField(r[i],this.mapFld._value):this._getField(r[i],this.mapFld._text),o==f){this._removeTextBoxValue(f);break}}else for(e=this._getLi(),i=0;i<e.length;i++)if(n(e[i]).attr("data-value")==f){this._activeItem=i;this._removeTextBoxValue();break}this._isFocused||this._isPopupShown()||this._setWatermark()},_isFilterInput:function(){if(this.model.enableFilterSearch){if(!this.inputSearch.val()=="")return!0}else return!1},_swapUlandInput:function(n){n?(this._visibleInput.css("display","none"),this._ulBox.css("display","block"),this.wrapper.css({height:"auto"})):(this._visibleInput.css("display","block"),this._ulBox.css("display","none"),this.wrapper.css({height:this.model.height}))},_removeActive:function(){this._ulBox.children("li").removeClass("e-active")},_adjustWidth:function(){var n=t.buildTag("span",this._visibleInput.val());this.container.append(n);this._visibleInput.width(n.width()+30);n.remove()},_destroyBoxModel:function(){this._visibleInput.css("display","block");this.wrapper.height(this.model.height);this._ulBox.remove();this._ulBox=null;this._off(this.container,"click")},_removeListHover:function(){this.ultag.children("li").removeClass("e-hover")},_addListHover:function(){var n=this._getActiveItem();n.addClass("e-hover");this.scrollerObj.setModel({scrollTop:this._calcScrollTop("hover")});n.focus()},_getLi:function(){return this.ultag.children("li:not('.e-category'):not('.e-nosuggestion')")},_calcScrollTop:function(t){var s=this.ultag.outerHeight(),u=this.ultag.find("li"),o=0,i,f,r,e;for(this._selectedIndices&&this._selectedIndices.length>0&&t=="active"?(e=this._getLi(),i=this._selectedIndices.length==e.length?0:this._selectedIndices[this._selectedIndices.length-1],(this.model.fields.groupBy!=null||this.ultag.find("li.e-category").length>0)&&(i=n.inArray(e.eq(i)[0],u))):i=this.ultag.find("li.e-"+t).index(),r=0;r<i;r++)o+=u.eq(r).outerHeight(!0);return f=o-(this.popupList.outerHeight()-u.eq(i).outerHeight(!0))/2,f<0?0:f},_getActiveItem:function(){return this._getLi().eq(this._activeItem)},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height);this.model.width&&this.wrapper.width(this.model.width)},_roundedCorner:function(n){n?(this.container.addClass("e-corner"),this.popupListWrapper.addClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupListWrapper.removeClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").removeClass("e-corner"))},_enabled:function(n){n?this.enable():this.disable()},_RightToLeft:function(){this.model.enableRTL?this.wrapper.addClass("e-rtl"):this.wrapper.removeClass("e-rtl")},_dropbtnRTL:function(){this.model.enableRTL?(this.popupListWrapper.addClass("e-rtl").find(".e-resize-handle").addClass("e-rtl-resize"),this.popupList.addClass("e-rtl")):(this.popupListWrapper.removeClass("e-rtl").find(".e-resize-handle").removeClass("e-rtl-resize"),this.popupList.removeClass("e-rtl"))},_OnDropdownClick:function(t){if((this._preventDefaultAction(t),n(t.target).is("li")&&n(t.target).parent().hasClass("e-boxes")||n(t.target).parents("ul").hasClass("e-boxes")&&n(t.target).hasClass("e-icon e-close"))||this.model.readOnly||this._readOnly)return!1;this.ultag.find("li").length>0&&(t.which&&t.which==1||t.button&&t.button==0)&&this._OnPopupHideShow()},_OnPopupHideShow:function(){if(this._isPopupShown())this._hideResult();else if(this._showResult(),this.model.enableFilterSearch){if(this.getSelectedItem().length==0)this.ultag.find("li:first").addClass("e-hover");else{var t=this.getSelectedItem().length;n(this.getSelectedItem()[t-1]).addClass("e-hover")}n(this.inputSearch).focus()}else this.wrapper.focus()},_showFullList:function(){var n=this.model.dataSource,i;t.DataManager&&n instanceof t.DataManager?n.dataSource.offline||n.dataSource.json&&n.dataSource.json.length>0?this._getFilteredList(n.dataSource.json):(i=this,i._initDataSource(n)):this._getFilteredList(n)},_getFilteredList:function(n){if(!n||!n.length||n.length<1)this._targetElementBinding(),this._renderRemaining();else{var i=t.DataManager(n).executeLocal(this._isPlainType(n)?t.Query():this._getQuery(!0));this._totalCount=i.count;this._listItem(i.result?i.result:i);this._renderPopupList();this._rawList=this.popupListItems.slice()}},_cascadeAction:function(){if(this.model.cascadeTo)for(var r=this.model.cascadeTo.split(","),i=0;i<r.length;i++)if(n("#"+r[i]).hasClass("e-dropdownlist"))this._doCascadeAction(r[i],this,this.checkedStatus);else n("#"+r[i]).on("ejDropDownListcreate",{Obj:this,status:this.checkedStatus},function(n){t.isNullOrUndefined(n.data.Obj.getValue())||n.data.Obj.getValue()==""||n.data.Obj._doCascadeAction(this.id,n.data.Obj,n.data.status)})},_doCascadeAction:function(i,r,u){r._currentValue=r._getField(r.popupListItems[r._activeItem],r.mapFld._value);r.selectDropObj=n("#"+i).ejDropDownList("instance");var f={cascadeModel:r.selectDropObj.model,cascadeValue:r._currentValue,setCascadeModel:{},requiresDefaultFilter:!0};this._trigger("cascade",f);r.selectDropObj._setCascadeModel=f.setCascadeModel;t.isNullOrUndefined(r[i])&&(r[i]=r.selectDropObj.model.dataSource);t.DataManager&&r[i]instanceof t.DataManager?r._cascadeOdataInit(r[i],f.requiresDefaultFilter,u,f.cascadeQuery):r._cascadeJsonInit(r.selectDropObj,r[i],r.mapFld._value,f.requiresDefaultFilter,u,f.cascadeQuery)},_cascadeOdataInit:function(n,t,i,r){var u=this,e,f;u._dQuery=this.selectDropObj._getQuery().clone();f=u._dQuery.clone();t?f.where(u.mapFld._value,"equal",u._currentValue):f=r;u.selectDropObj._addLoadingClass();u._trigger("actionBegin",{requestFrom:"cascade"})||(e=n.executeQuery(f),e.fail(function(n){u._changedSource=null;u.selectDropObj.setModel({dataSource:u._changedSource,enabled:!1});u._trigger("actionFailure",{e:n,requestFrom:"cascade"})}).done(function(n){u._trigger("actionSuccess",{e:n,requestFrom:"cascade"});u._cascadeDataBind(u.selectDropObj,n.result,i);u.selectDropObj._removeLoadingClass()}).always(function(n){u._trigger("actionComplete",{e:n,requestFrom:"cascade"})}))},_cascadeJsonInit:function(n,i,r,u,f,e){var o=u?t.Query().where(r,"==",this._currentValue):e,s=t.DataManager(i).executeLocal(o);this._cascadeDataBind(n,s,f)},_cascadeDataBind:function(i,r,u){var l=i.value(),f,e,h,c,s,o;if(this.model.showCheckbox&&u||this.model.multiSelectMode!="none"&&this.activeItem.hasClass("e-active"))this._changedSource=t.isNullOrUndefined(this._changedSource)?r:this._changedSource.concat(r);else if(this.model.showCheckbox||this.model.multiSelectMode!="none"){for(f=0;f<r.length;f++)if(this._isPlainType(r)&&this._isPlainType(this._changedSource))this._changedSource.splice(this._changedSource.indexOf(r[f]),1);else for(e=0;e<this._changedSource.length;e++)JSON.stringify(this._changedSource[e])==JSON.stringify(r[f])&&this._changedSource.splice(e,1);i.setModel({dataSource:null})}else this._changedSource=r;if(h=i.model.value,c=JSON.parse(JSON.stringify(i.model)),i.setModel({dataSource:this._changedSource,enabled:this._changedSource.length>0}),this._isSingleSelect()||i.selectItemByValue(l),(i.model.showCheckbox||i.model.multiSelectMode!="none")&&n("input:hidden[id^='#'][name="+i._id+"]").remove(),i._setSelectedItem)i.setModel(i._setCascadeModel);else{for(s=["value","text","selectedIndex","selectedIndices"],o=0;o<s.length;o++)i.model[s[o]]=c[s[o]];i.model.value=h;i._finalize()}i._setSelectedItem=!0},_OnMouseEnter:function(t){var i,r;if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover");n(t.target).is("li:not('.e-category')")&&n(t.target).addClass("e-hover");n(t.target).hasClass("e-disable")?n(t.target).removeClass("e-hover"):t.target.tagName!="li"&&(i=n(t.target).parents("li:not('.e-category')"),n(i).addClass("e-hover"));this.ultag.children("li:not('.e-category')").each(function(t){if(n(this).hasClass("e-hover"))return r=t,!1});this._activeItem=r},_OnMouseLeave:function(){if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover")},_OnMouseClick:function(t){var r,u,i;if((this._uiInteract=!0,!this.model.enabled||this.model.readOnly||this._readOnly)||this.model.enableFilterSearch&&n(t.target).is("li")&&n(t.target).hasClass("e-nosuggestion"))return!1;(!n(t.target).is("li")||n(t.target).hasClass("e-disable"))&&(n(t.target).is("li")||n(t.target).closest("li").hasClass("e-disable"))||(this._isSingleSelect()?(this._enterTextBoxValue(),this._hideResult()):this.model.showCheckbox?(r=t.target.nodeName==="LI"?t.target:n(t.target).parents("li.e-hover"),u=n(r).find(".e-checkwrap")[0],this._onCheckChange({target:u})):(i=n(t.target).is("li")?t.target:n(t.target).closest("li")[0],this._activeItem=n.inArray(i,this._getLi()),n(i).hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue()))},_OnDocumentClick:function(t){if(this.model&&(!this.model.enabled||this.model.readOnly||this._readOnly))return!1;n(t.target).is(this.popupList)||n(t.target).parents(".e-ddl-popup").is(this.popupListWrapper)||n(t.target).is(this._visibleInput)||n(t.target).parents(".e-ddl").is(this.wrapper)?n(t.target).is(this.inputSearch)?this.inputSearch.focus():(n(t.target).is(this.popupList)||n(t.target).parents(".e-ddl-popup").is(this.popupListWrapper))&&this._preventDefaultAction(t):this._hideResult()},_OnKeyPress:function(n){this.model.enableIncrementalSearch&&n.keyCode!=13&&this._OnTextEnter(t.browserInfo().name=="mozilla"?n.charCode:n.keyCode);n.keyCode==32&&this._preventDefaultAction(n)},_OnTextEnter:function(t){var s=this;this._incqueryString+=String.fromCharCode(t);this._incqueryString.length>0&&setTimeout(function(){s._incqueryString=""},1e3);var f=this._getLi(),i,e=this.model.caseSensitiveSearch,r,u=this._incqueryString,h=this._incqueryString.length,o=!1;for(e||(u=u.toLowerCase()),i=0;i<f.length;i++)if(r=n(f[i]).text(),r=e?r:r.toLowerCase(),r.substr(0,h)==u&&(this._activeItem=i,this._isSingleSelect()?(this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")})):this._isPopupShown()&&(this._removeListHover(),this._addListHover()),o=!0),o)break},_selectItem:function(n){this._isSingle||this._clearTextboxValue();this._activeItem=n;this._addListHover();this._enterTextBoxValue()},_focusItem:function(n){this._removeListHover();this._activeItem=n;this._addListHover()},_selectFocusedItem:function(n){this._focusItem(n);this._enterTextBoxValue()},_selectShiftDown:function(t,i,r){r||this._clearTextboxValue();for(var u=t;u<=i;u++)n.inArray(u,this._disabledItems)<0&&n.inArray(u,this.model.selectedIndices)<0&&this._selectFocusedItem(u)},_selectShiftUp:function(t,i,r){r||this._clearTextboxValue();for(var u=i;u>=t;u--)n.inArray(u,this._disabledItems)<0&&n.inArray(u,this.model.selectedIndices)<0&&this._selectFocusedItem(u)},_selectShiftHome:function(t,i,r){if(r||this._clearTextboxValue(),t>=0&&t<=this._listSize-1){if(t==0)this._clearTextboxValue();else for(var u=t;u>=i;u--)n.inArray(u,this._disabledItems)<0&&n.inArray(u,this.model.selectedIndices)<0&&(this._activeItem=u,this._enterTextBoxValue());this._activeItem=t;t==0&&this._enterTextBoxValue();this.scrollerObj.setModel({scrollTop:0})}},_selectShiftEnd:function(t,i,r){if(r||this._clearTextboxValue(),t<=this._listSize-1){if(t==i)this._clearTextboxValue();else for(var u=t;u<=i;u++)n.inArray(u,this._disabledItems)<0&&n.inArray(u,this.model.selectedIndices)<0&&(this._activeItem=u,this._enterTextBoxValue());this._activeItem=t;t==i&&this._enterTextBoxValue();this.scrollerObj.setModel({scrollTop:this.ultag.outerHeight()})}},_getLastFocusedLi:function(){return this._selectedIndices&&this._selectedIndices.length>0?this._selectedIndices[this._selectedIndices.length-1]:null},_getLastShiftFocusedLi:function(t,i){var r=i?t-1:t+1;return n.inArray(r,this._selectedIndices)<0?t:this._getLastShiftFocusedLi(r,i)},_shiftUp:function(n,t,i){var u,r,f;if(n==null||n<0)this._checkDisableStep(0,t,!1,!1,!0);else if(n>0&&n<=this._listSize-1&&(u=this._disableItemSelectUp(n-t),u!=null))if(this._getLastFocusedLi()!=null)if(this._selectedIndices.length>1&&n-1==this._selectedIndices[this._selectedIndices.length-2])for(r=1;r<=t;r++)if(n-r==this._selectedIndices[this._selectedIndices.length-2])this._activeItem=n+1-r,this._removeTextBoxValue(),this._focusItem(n-r);else break;else f=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!1),this._selectShiftUp(u,f,i);else this._moveUp(n,t,!1)},_shiftDown:function(n,t,i){var u,r,f;if(n==null||n<0)this._checkDisableStep(-1,t,!0,!1,!0);else if(n<this._listSize-1&&(u=this._disableItemSelectDown(n+t),u!=null))if(this._getLastFocusedLi()!=null)if(this._selectedIndices.length>1&&n+1==this._selectedIndices[this._selectedIndices.length-2])for(r=1;r<=t;r++)if(n+r==this._selectedIndices[this._selectedIndices.length-2])this._activeItem=n-1+r,this._removeTextBoxValue(),this._focusItem(n+r);else break;else f=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!0),this._selectShiftDown(f,u,i);else this._moveDown(n,t,!1)},_moveUp:function(n,t,i){n==null||n<=0?this._checkDisableStep(0,t,!1,i):n>this._listSize-1?this._checkDisableStep(this._listSize-1,t,!1,i):n>0&&n<=this._listSize-1&&this._checkDisableStep(n,t,!1,i)},_moveDown:function(n,t,i){n==null||n<0?this._checkDisableStep(-1,t,!0,i):n==0?this._checkDisableStep(0,t,!0,i):n>=this._listSize-1?this._checkDisableStep(this._listSize-1,t,!0,i):n<this._listSize-1&&this._checkDisableStep(n,t,!0,i)},_checkDisableStep:function(n,t,i,r,u){var s=i?"_disableItemSelectDown":"_disableItemSelectUp",o=i?n+t:n-t,f=this[s](o),e;if(f==null)for(e=t;e>=0;e--)if(o=i?n+e:n-e,f=this[s](o),f!=null)break;f!=null&&(r?this._focusItem(f):this._selectItem(f),u&&r&&this._enterTextBoxValue())},_disableItemSelectDown:function(t){return(t==null||t<0)&&(t=0),t<this._listSize?n.inArray(t,this._disabledItems)<0?t:this._disableItemSelectDown(t+1):this._listSize-1},_disableItemSelectUp:function(t){if((t==null||t<0)&&(t=0),t<this._listSize){if(n.inArray(t,this._disabledItems)<0)return t;if(t>0)return this._disableItemSelectUp(t-1)}},_preventDefaultAction:function(n,t){n.preventDefault?n.preventDefault():n.returnValue=!1;t&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)},_OnKeyDown:function(n){var f,r,u,i,t;if(this._uiInteract=!0,this.model.enabled)if(this._itemId=null,f=this._getLi(),this._listSize=f.length,u=this.popupList.height(),r=this.ultag.children("li").outerHeight(),i=Math.round(u/r)!=0?Math.round(u/r):5,this._isSingle=this._isSingleSelect(),this._isSingle)switch(n.keyCode){case 38:if(n.altKey){this.ultag.find("li").length>0&&this._hideResult();break}case 33:t=n.keyCode==33?i:1;this._moveUp(this._activeItem,t);this._preventDefaultAction(n,!0);break;case 8:this._preventDefaultAction(n);break;case 40:if(n.altKey){this.ultag.find("li").length>0&&this._showResult();break}case 34:t=n.keyCode==34?i:1;this._moveDown(this._activeItem,t);this._preventDefaultAction(n,!0);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1):this._moveUp(this._activeItem,1);this._preventDefaultAction(n);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1):this._moveDown(this._activeItem,1);this._preventDefaultAction(n);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:this._moveDown(this._listSize-1,0);this._preventDefaultAction(n);break;case 36:t=this._activeItem!=null?this._activeItem:this._listSize-1;this._moveUp(t,t);this._preventDefaultAction(n)}else switch(n.keyCode){case 38:n.altKey?this.ultag.find("li").length>0&&this._hideResult():n.shiftKey?this._shiftUp(this._activeItem,1,n.ctrlKey):this._moveUp(this._activeItem,1,n.ctrlKey);this._preventDefaultAction(n);break;case 33:n.shiftKey?this._shiftUp(this._activeItem,i,n.ctrlKey):this._moveUp(this._activeItem,i,n.ctrlKey);this._preventDefaultAction(n);break;case 8:this._preventDefaultAction(n);break;case 40:n.altKey?this.ultag.find("li").length>0&&this._showResult():n.shiftKey?this._shiftDown(this._activeItem,1,n.ctrlKey):this._moveDown(this._activeItem,1,n.ctrlKey);this._preventDefaultAction(n);break;case 34:n.shiftKey?this._shiftDown(this._activeItem,i,n.ctrlKey):this._moveDown(this._activeItem,i,n.ctrlKey);this._preventDefaultAction(n);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1,!1):this._moveUp(this._activeItem,1,!1);this._preventDefaultAction(n);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1,!1):this._moveDown(this._activeItem,1,!1);this._preventDefaultAction(n);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:n.shiftKey?this._selectShiftEnd(this._activeItem,this._listSize-1,n.ctrlKey):this._moveDown(this._activeItem,this._listSize,n.ctrlKey);this._preventDefaultAction(n);break;case 36:t=this._activeItem!=null?this._activeItem:this._listSize-1;n.shiftKey?this._selectShiftHome(this._activeItem,0,n.ctrlKey):this._moveUp(this._activeItem,t,n.ctrlKey);this._preventDefaultAction(n)}},_OnKeyUp:function(i){var u,r;if(this.model.enabled){if(this._preventDefaultAction(i),u=i.target,this._activeItem==null&&(this._activeItem=this._getLi().index(this.popupList.find("ol,ul").children("li.e-hover"))),this._trim(this._visibleInput.val())==""&&i.keyCode==38&&i.keyCode==40)return this._hideResult(),!1;switch(i.keyCode){case 13:!this._isSingle&&this._isPopupShown()&&(i.ctrlKey||i.shiftKey)&&this._activeItem>=0?this._selectAndUnselect():!this._isPopupShown()||i.ctrlKey||i.shiftKey?this._isPopupShown()&&this._hideResult():(t.isNullOrUndefined(this.inputSearch)||(this.getSelectedItem().length==0?(this.selectItemByIndex(0),n(this.listitems[0]).removeClass("e-hover")):(r=this._getLastFocusedLi(),(this.model.multiSelectMode!="none"||this.model.showCheckbox)&&(this.unselectItemByIndex(r),n(this.listitems[r]).removeClass("e-hover")))),this._hideResult());this._preventDefaultAction(i);break;case 32:this._isPopupShown()&&this._isSingle&&this._hideResult();!this._isSingle&&this._isPopupShown()&&this._activeItem>=0&&this._selectAndUnselect();this._preventDefaultAction(i);break;case 8:this.model.multiSelectMode=="visualmode"&&this._deleteLastBox();this._preventDefaultAction(i);break;case 46:if(this.model.multiSelectMode=="visualmode"||this.model.showCheckbox){this._deleteBox(this._ulBox.children("li.e-active"));break}}}},_isSingleSelect:function(){return!this.model.showCheckbox&&this.model.multiSelectMode=="none"},_selectAndUnselect:function(){this.model.showCheckbox?this._isChecked(this._getActiveItem().find(".e-checkwrap")[0])?this._removeTextBoxValue():this._enterTextBoxValue():this.model.MultiSelectMode!="none"&&(this._getActiveItem().hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue())},_targetFocus:function(){this.model.enabled&&!this._isFocused&&(this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus e-popactive"),this._isFocused=!0,this._trigger("focusIn"))},_targetBlur:function(){this.model.enabled&&(this._isFocused=!1,this.wrapper.removeClass("e-focus e-popactive"),this._setWatermark(),this._trigger("focusOut"))},_getLocalizedLabels:function(n){return this._localizedLabels[n]===i?t.DropDownList.Locale["en-US"][n]:this._localizedLabels[n]},_wireEvents:function(){this._on(this.wrapper,"focus",this._targetFocus);this._on(this.wrapper,"blur",this._targetBlur);this._on(this.wrapper,"keydown",this._OnKeyDown);this._on(this.popupList,"keydown",this._OnKeyDown);this._on(this.popupList,"keyup",this._OnKeyUp);this._on(this.wrapper,"keyup",this._OnKeyUp);this._on(this.popupList,"keypress",this._OnKeyPress);this._on(this.wrapper,"keypress",this._OnKeyPress)},_unwireEvents:function(){this._off(this.wrapper,"focus",this._targetFocus);this._off(this.wrapper,"blur",this._targetBlur);this._off(this.wrapper,"keydown",this._OnKeyDown);this._off(this.popupList,"keydown",this._OnKeyDown);this._off(this.popupList,"keyup",this._OnKeyUp);this._off(this.wrapper,"keyup",this._OnKeyUp);this._off(this.popupList,"keypress",this._OnKeyPress);this._off(this.wrapper,"keypress",this._OnKeyPress);n(window).off("resize",n.proxy(this._OnWindowResize,this))},_multiItemSelection:function(n,t){var i,r;for(this._ulBox||this.model.multiSelectMode!="visualmode"||this._renderBoxModel(),i=0;i<n.length;i++)r=t?this._rawList.length-(n.length-i):i,this._hasClass(n[i],"chkselect")&&(this._activeItem=r,this._enterTextBoxValue(),this._removeClass(n[i],"chkselect"));this._setWatermark()},_appendCheckbox:function(n,t){var i;for(this._ulBox||this.model.multiSelectMode!="visualmode"||this._renderBoxModel(),i=0;i<n.length;i++){var r=t?this._rawList.length-(n.length-i):i,f=document.createElement("input"),u=document.createElement("span");this._setAttr(f,{type:"checkbox",name:"list"+r,"data-role":"none",id:this._id+"_check"+r})._setClass(f,"e-check-input")._setAttr(u,{name:"list"+r+"_wrap","data-role":"none",id:this._id+"_check"+r+"wrap",unselectable:"on","aria-checked":!1})._setClass(u,"e-checkwrap e-icon ");u.appendChild(f);n[i].insertBefore(u,n[i].childNodes[0]);this._hasClass(n[i],"chkselect")&&(this._activeItem=r,this._enterTextBoxValue(),this._removeClass(n[i],"chkselect"))}this._setWatermark()},_onCheckChange:function(t){var i=t.target.nodeName==="INPUT"?t.target.parentElement:t.target;this._activeItem=n.inArray(n(i).parents("li")[0],this._getLi());this._hasClass(i,"e-check-act")?this._removeTextBoxValue():this._enterTextBoxValue()},_isChecked:function(t){return this._hasClass(t,"e-check-act")&&n(t).children(".e-check-input")[0].checked==!0},_removeCheck:function(){this._getLi().find(".e-checkwrap").remove()},_resetCheck:function(){var i=this._getLi(),t,n;for(i.find(".e-check-act").removeClass("e-check-act").attr("aria-checked",!1),t=i.find(".e-check-input:checked"),n=0;n<t.length;n++)t[n].checked=!1}});t.DropDownList.Locale=t.DropDownList.Locale||{};t.DropDownList.Locale["default"]=t.DropDownList.Locale["en-US"]={emptyResultText:"No suggestions",watermarkText:""};t.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"};t.VirtualScrollMode={Normal:"normal",Continuous:"continuous"}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejDialog","ej.Dialog",{_rootCSS:"e-dialog",element:null,_ignoreOnPersist:["drag","dragStart","dragStop","resizeStop","resizeStart","resize","beforeClose","beforeOpen","collapse","expand","close","open","destroy","create","ajaxSuccess","ajaxError","contentLoad","actionButtonClick","enableResize"],model:null,validTags:["div","span"],_setFirst:!1,angular:{terminal:!1},defaults:{showOnInit:!0,closeOnEscape:!0,closeIconTooltip:"close",enableAnimation:!0,allowDraggable:!0,backgroundScroll:!0,height:"auto",minHeight:120,minWidth:200,maxHeight:null,maxWidth:null,enableModal:!1,position:{X:"",Y:""},containment:null,enableResize:!0,htmlAttributes:{},showHeader:!0,showFooter:!1,contentType:null,contentUrl:null,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},title:"",width:400,zIndex:1e3,cssClass:"",enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,actionButtons:["close"],animation:{show:{effect:"fade",duration:400},hide:{effect:"fade",duration:400}},tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},footerTemplateId:null,locale:"en-US",faviconCSS:null,content:null,target:null,enablePersistence:!1,enabled:!0,isResponsive:!1,actionButtonClick:null,beforeClose:null,close:null,expand:null,collapse:null,beforeOpen:null,open:null,drag:null,dragStart:null,dragStop:null,resize:null,resizeStart:null,resizeStop:null,contentLoad:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null,Close:null},dataTypes:{showOnInit:"boolean",closeOnEscape:"boolean",enableAnimation:"boolean",backgroundScroll:"boolean",position:"data",animation:"data",closeIconTooltip:"string",tooltip:"data",allowDraggable:"boolean",enableModal:"boolean",enableResize:"boolean",isResponsive:"boolean",showHeader:"boolean",showFooter:"boolean",title:"string",faviconCSS:"string",zIndex:"number",cssClass:"string",enablePersistence:"boolean",contentUrl:"string",contentType:"string",enableRTL:"boolean",enabled:"boolean",allowKeyboardNavigation:"boolean",showRoundedCorner:"boolean",locale:"string",htmlAttributes:"data",ajaxSettings:"data",actionButtons:"array",footerTemplateId:"string"},_setModel:function(i){var r,u;for(r in i)switch(r){case"closeIconTooltip":this._dialogClose.attr("title",i[r]);break;case"tooltip":this._tooltipText(i[r]);break;case"title":this.model.title=i[r];this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(i[r]);this._updateCaptionWidth();break;case"width":this.model.width=i[r];this._changeSize();this._updateCaptionWidth();i[r]=this.model.width;break;case"height":this.model.height=i[r];this._changeSize();i[r]=this.model.height;break;case"position":this.model.position=i[r];this._dialogPosition();break;case"cssClass":this._changeSkin(i[r]);break;case"showRoundedCorner":this.model.showRoundedCorner=i[r];this._roundedCorner(i[r]);break;case"contentType":this.model.contentType=i[r];this._appendContent(i[r]);break;case"enabled":this.model.enabled=i[r];this._enabledAction(i[r]);break;case"contentUrl":this.model.contentUrl=i[r];this._appendContent(this.model.contentType);break;case"backgroundScroll":this.model.backgroundScroll=i[r];!this.model.backgroundScroll&&this.model.enableModal?n("body").addClass("e-dialog-modal"):n("body").removeClass("e-dialog-modal");break;case"content":case"target":this._ejDialog.appendTo(n(i[r]));this.model.target=this.model.content=i[r];this._dialogPosition();break;case"containment":this._setDragArea(i[r]);t.isNullOrUndefined(this._target)?this._ejDialog.appendTo(document.body):this._ejDialog.appendTo(this._target);this.model.position.X=this.model.position.Y="";this._dialogPosition();this.model.containment=i[r]=this._target;this.model.enableModal&&this._createOverlay();this._dialogTitlebar.ejDraggable({dragArea:this._target});break;case"locale":this.model.locale=i[r];this.localizedLabels=this._getLocalizedLabels();this._setLocaleCulture(this.localizedLabels,!0);this._tooltipText(this.model.tooltip);this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(this.model.title);this._updateCaptionWidth();break;case"minHeight":this.model.minHeight=i[r];this._ejDialog.css("minHeight",i[r]);this._minMaxValidation();this._resetScroller();this._resizeDialog();break;case"minWidth":this.model.minWidth=i[r];this._ejDialog.css("minWidth",i[r]);this._minMaxValidation();this._resetScroller();this._resizeDialog();break;case"maxHeight":this.model.maxHeight=i[r];this._ejDialog.css("maxHeight",i[r]);this._minMaxValidation();this._resetScroller();this._resizeDialog();break;case"maxWidth":this.model.maxWidth=i[r];this._ejDialog.css("maxWidth",i[r]);this._minMaxValidation();this._resetScroller();this._resizeDialog();break;case"zIndex":this._ejDialog.css("z-index",i[r]);break;case"faviconCSS":this.model.faviconCSS=i[r];this._favIcon();this._updateCaptionWidth();break;case"isResponsive":this.model.isResponsive=i[r];this.model.isResponsive?this._ejDialog.addClass("e-dialog-resize"):this._ejDialog.removeClass("e-dialog-resize");this._wireResizing();break;case"allowDraggable":this.model.allowDraggable=i[r];i[r]?this._enableDrag():this._dialogTitlebar.removeClass("e-draggable");break;case"enableResize":this.model.enableResize=i[r];i[r]?this._enableResize():(this._ejDialog.removeClass("e-resizable"),this._ejDialog.find(".e-resize-handle").remove());this._reRenderScroller();break;case"showHeader":this.model.showHeader=i[r];i[r]?(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&(this._dialogFavIcon=!1,this._favIcon()),this._enableDrag(),this._maximize||this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1-this._dialogTitlebar.outerHeight(!0):this.contentDiv.css("border-width")=="0px",t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:this.contentDiv.css("border-width")=="0px")):(this._ejDialog.find(".e-titlebar").remove(),this._maximize?this.refresh():this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1:this.contentDiv.css("border-width")=="0px",t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:this.contentDiv.css("border-width")=="0px"));this._roundedCorner(this.model.showRoundedCorner);this.model.showFooter&&this._setContainerSize()._resetScroller();break;case"showFooter":this.model.showFooter=i[r];i[r]?(this._appendContent(),this._ejDialog.find(".e-resizable").remove()):this._ejDialog.find(".e-footerbar").remove();this._enableResize()._enableDrag()._sizeInPercent();this._reRenderScroller();this._setContainerSize()._resetScroller();this._roundedCorner(this.model.showRoundedCorner);break;case"footerTemplateId":this.model.footerTemplateId=i[r];this.model.showFooter&&(this._ejDialog.find(".e-footerbar").empty(),u=n("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(u),this._enableResize());break;case"enableRTL":this.model.enableRTL=i[r];this.model.faviconCSS&&this._favIcon();i[r]?(this._ejDialog.addClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","rtl"),this.scroller&&this._resetScroller()):(this._ejDialog.removeClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","ltr"),this.scroller&&this._resetScroller());break;case"actionButtons":t.isNullOrUndefined(this._dialogTitlebar)||(this._removeAllIcons(),this._iconsRender(i[r]));this.model.actionButtons=i[r];this._updateCaptionWidth();break;case"enableModal":this._enableModal(i[r]);break;case"htmlAttributes":this._addAttr(i[r])}},_destroy:function(){this._overLay&&this._overLay.remove();this._cloneElement.appendTo(this._ejDialog.parent());this._ejDialog.remove();this._cloneElement.removeClass("e-dialog");this.element=this._cloneElement;this._isOpen=!1;n(window).off("resize",n.proxy(this._reSizeHandler,this))},keyConfigs:[37,38,39,40],_init:function(){this._init=!0;this._widthPercent=null;this._heightPercent=null;this._windowSize={outerWidth:n(window).outerWidth(),outerHeight:n(window).outerHeight()};this._initSize={width:this.model.width,height:this.model.height};this._sizeType={width:isNaN(this.model.width)?this.model.width.match(/px|%|auto/g)[0]:null,height:isNaN(this.model.height)?this.model.height.match(/px|%|auto/g)[0]:null};this._isOpen=this._maximize=this._minimize=!1;this.localizedLabels=this._getLocalizedLabels();this._setLocaleCulture(this.localizedLabels);this._setDimension();this.model.close||(this.model.close=this.model.Close);this.model.target||(this.model.target=this.model.content);this._responsive();this._renderControl();this._wireEvents();this.scrObj=this._ejDialog.closest(".e-dialog.e-js").data("ejDialog");this.scrObj&&this.scrObj._resetScroller();this.hidden=!1;this._init=!1;this._keyNavigation=!1},_responsive:function(){this.width=this.model.width;n(this.element).width(this.width);this.height=this.model.height;n(this.element).height(this.height);n(window).on("resize",n.proxy(this._resizeHandler,this))},_resizeHandler:function(){this._maximize&&(this.width=n(this._dialogTitlebar).outerWidth(),n(this.contentDiv).width(this.width),n(this.contentDiv).children().width(this.width),this.model.height=this.height=n(window).height(),this._ejDialog.css({height:this.height}),this.contentDiv.height(this._ejDialog.height()-n(this._dialogTitlebar).outerHeight()-n(this._dialogFooterbar).outerHeight()),this.element.height(this.contentDiv.height()));t.isNullOrUndefined(this.element)||this._resetScroller()},_setLocaleCulture:function(n,t){this.defaults.closeIconTooltip===this.model.closeIconTooltip&&(this.model.closeIconTooltip=n.closeIconTooltip);t&&(this.model.tooltip=this.localizedLabels.tooltip,this.model.title=this.localizedLabels.title);JSON.stringify(this.model.tooltip)===JSON.stringify(this.defaults.tooltip)&&(this.model.tooltip=n.tooltip);this.model.title===this.defaults.title&&(this.model.title=n.title)},_setDragArea:function(i){t.isNullOrUndefined(i)?this._target=null:typeof i=="string"?(i=="parent"&&(this._target=n(this.element).parent()),i.toLowerCase()=="document"&&(this._target=n(document)),i.toLowerCase()=="window"?this._target=n(window):n(i).length>0&&(this._target=n(i))):typeof i=="object"?i.length>0&&(this._target=i):this._target=null},_addAttr:function(t){var i=this;n.map(t,function(n,t){if(t=="class")i._ejDialog.addClass(n);else if(t=="disabled"&&n=="disabled")i.model.enabled=!1,i._enabledAction(!1);else if(i._ejDialog[0].hasAttribute("style")){var r=i._ejDialog[0].getAttribute("style")+n;i._ejDialog.attr(t,r)}})},_tooltipText:function(i){n.extend(this.model.tooltip,i);!t.isNullOrUndefined(this._dialogClose)&&this._dialogClose.hasClass("e-close")&&this._dialogClose.attr("title",this.model.tooltip.close);!t.isNullOrUndefined(this._dialogCollapsible)&&(i.collapse||i.expand)&&(this._dialogCollapsible.hasClass("e-arrowhead-up")&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._dialogCollapsible.hasClass("e-arrowhead-down")&&this._dialogCollapsible.attr("title",this.model.tooltip.expand));!t.isNullOrUndefined(this._dialogMaximize)&&(i.maximize||i.restore)&&(this._dialogMaximize.hasClass("e-maximize")&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogMaximize.hasClass("e-restore")&&this._dialogMaximize.attr("title",this.model.tooltip.restore));!t.isNullOrUndefined(this._dialogMinimize)&&(i.minimize||i.restore)&&(this._dialogMinimize.hasClass("e-minus")&&this._dialogMinimize.attr("title",this.model.tooltip.minimize),this._dialogMinimize.hasClass("e-restore")&&this._dialogMinimize.attr("title",this.model.tooltip.restore));!t.isNullOrUndefined(this._dialogPin)&&(i.pin||i.unPin)&&(this._dialogPin.hasClass("e-unpin")&&this._dialogPin.attr("title",this.model.tooltip.pin),this._dialogPin.hasClass("e-pin")&&this._dialogPin.attr("title",this.model.tooltip.unPin))},_renderControl:function(){var i,r,u;this._cloneElement=this.element.clone();this.element.attr("tabindex",0).attr({role:"dialog","aria-labelledby":this.element.prop("id")+"_title"});this._ejDialog=t.buildTag("div.e-dialog e-widget e-box "+this.model.cssClass+" e-dialog-wrap e-shadow#"+(this.element.prop("id")==""?"":this.element.prop("id")+"_wrapper"),"",{display:"none",zIndex:this.model.zIndex},{tabindex:0});this.model.isResponsive&&this._ejDialog.addClass("e-dialog-resize");this.wrapper=this._ejDialog;this._addAttr(this.model.htmlAttributes);this._setDragArea(this.model.containment);t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target;r=t.isNullOrUndefined(i)?document.body:i;u=n(r).find("#"+this._id+"_wrapper").get(0);u&&n(u).remove();this._ejDialog.appendTo(r);this.model.enableRTL&&this._ejDialog.addClass("e-rtl");this.model.showHeader&&(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&this._favIcon());this._appendContent(this.model.contentType);this._enableResize()._enableDrag()._setSize();this.model.height!="auto"&&this._sizeInPercent();this.model.contentType!="ajax"&&(this.model.showOnInit&&this.open()?this._setContainerSize()._resetScroller():this._setHiddenDialogSize());this._roundedCorner(this.model.showRoundedCorner);this._enabledAction(this.model.enabled);this._sizeType.width=="auto"&&(this._maxWidth=this.model.width);this._sizeType.height=="auto"&&(this._maxHeight=this.model.height)},_setContainerSize:function(){if(this.model.height!="auto"){var t=this._ejDialog.outerHeight()-(this.model.showHeader?n(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)+(this.model.showFooter?n(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0)-1;this.contentDiv.height(t);this.element.outerHeight(t)}return this},_changeSize:function(){this._initSize={width:this.model.width,height:this.model.height};this._sizeType.width=isNaN(this.model.width)?this.model.width.match(/px|%|auto/g):null;this._sizeType.height=isNaN(this.model.height)?this.model.height.match(/px|%|auto/g):null;this._setSize()._sizeInPercent()._setContainerSize()._resetScroller()},_enableDrag:function(){return this.model.allowDraggable&&this.model.showHeader&&(this._dialogTitlebar.addClass("e-draggable"),this._dragDialog()),this},_enableResize:function(){if(this.model.enableResize){this._ejDialog.addClass("e-resizable");var n=t.buildTag("div.e-icon e-resize-handle");this.model.showFooter?n.appendTo(this._dialogFooterbar):n.appendTo(this._ejDialog);this._resizeDialog()}return this},_changeSkin:function(n){this.model.cssClass!=n&&this._ejDialog.removeClass(this.model.cssClass).addClass(n)},_enableModal:function(n){n?this._isOpen&&this._createOverlay():this._overLay&&this._overLay.remove()},_enabledAction:function(n){n?(this._ejDialog.removeClass("e-disable"),this.wrapper.children(".e-disable-overlay").remove(),t.isNullOrUndefined(this.scroller)||this.scroller.enable()):(this._ejDialog.addClass("e-disable"),t.buildTag("div.e-disable-overlay").appendTo(this.wrapper),t.isNullOrUndefined(this.scroller)||this.scroller.disable())},_renderTitleBar:function(){this._elementTitle=this.element.attr("title");typeof this._elementTitle!="string"&&(this._elementTitle="");this.model.title=this.model.title||this._elementTitle;this._dialogTitlebar=t.buildTag("div#"+this.element.prop("id")+"_title.e-titlebar e-header e-dialog").prependTo(this._ejDialog);this._addTitleText()},_renderFooterBar:function(){this._dialogFooterbar=t.buildTag("div#"+this.element.prop("id")+"_foot.e-footerbar e-dialog e-js").appendTo(this._ejDialog)},_addTitleText:function(){return this.model.title&&(this._titleText=t.buildTag("span.e-title",this.model.title).prependTo(this._dialogTitlebar)),this},_updateCaptionWidth:function(){var n=this.model.faviconCSS&&!t.isNullOrUndefined(this._dialogFavIcon)?this._dialogFavIcon.outerWidth():0;return this._titleText&&!t.isNullOrUndefined(this._dialogTitlebar)&&this._titleText.css("max-width",this._dialogTitlebar.width()-20-this._dialogTitlebar.find(".e-dialog-icon").width()*this._dialogTitlebar.find(".e-dialog-icon").length-n),this},_iconsRender:function(i){for(var r=0;r<i.length;r++)switch(t.browserInfo().name=="msie"&&t.browserInfo().version<=8?n.trim(i[r]):i[r].trim()){case"close":this._closeIcon();break;case"collapse":case"collapsible":this._collapsibleIcon();break;case"maximize":this._maximizeIcon();break;case"minimize":this._minimizeIcon();break;case"pin":this._pinIcon();break;default:this._customIconsRender(i[r])}},_customIconsRender:function(n){this._customIcon=t.util.buildTag("div#"+this.element[0].id+"_"+n+"button.e-dialog-icon e-icon e-"+n,null,null).attr("tabIndex","0").attr("title",n);this._customIcon.appendTo(this._dialogTitlebar);this._on(this._customIcon,"touchstart click",this._iconClick)},_iconClick:function(){if(!this.element.hasClass("e-disable")){var t={cancel:!1,buttonID:n(event.target).attr("id"),event:event.type,model:this.model,currentTarget:event.currentTarget.title};this._trigger("actionButtonClick",t)}},_removeAllIcons:function(){this._dialogTitlebar.find("div.e-dialog-icon").remove()},_appendContent:function(i){var f,e,u,r,o;if(this.contentDiv=t.isNullOrUndefined(this.contentDiv)?t.buildTag("div.e-dialog-scroller"):this.contentDiv,this.element.removeAttr("title").addClass("e-widget-content e-box"),f=this,t.isNullOrUndefined(this.model.contentUrl)||t.isNullOrUndefined(i))this.dialogIframeContent=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(this.dialogIframeContent)?this.element.show().appendTo(this.contentDiv):this.element.show().appendTo(this.contentDiv).find("iframe").append(this.dialogIframeContent.lastChild);else if(i=="ajax")this.model.ajaxSettings.url=this.model.contentUrl,this._sendAjaxOptions(this.element,this.model.ajaxSettings.url);else if(i=="iframe")this.element.children(".e-iframe").length>0?(this.iframe=this.element.find("iframe.e-iframe"),this.iframe.attr("src",this.model.contentUrl)):(this.iframe=t.buildTag("iframe.e-iframe","",{width:"100%",height:"100%"},{scrolling:"auto",frameborder:0,src:this.model.contentUrl}),this.element.appendTo(this.contentDiv).append(this.iframe).show()),this.model.enableRTL&&n(this.iframe).load(function(){f.iframe.contents().find("body").css("direction","rtl")}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl});else if(i=="image"){e=t.buildTag("img.e-images","","",{src:this.model.contentUrl});this.element.append(e).show().appendTo(this.contentDiv);n(e).on("load",function(){f._dialogPosition()});this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})}else this.element.show().appendTo(this.contentDiv);this._ejDialog.find("div.e-resize-handle").length>0?this._ejDialog.find(".e-footerbar").length==0&&this.contentDiv.insertBefore(this._ejDialog.find("div.e-resize-handle")):(u=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(u)?this._ejDialog.find(".e-footerbar").length==0?this.contentDiv.appendTo(this._ejDialog):this.contentDiv.insertBefore(this._dialogFooterbar):(this.contentDiv.appendTo(this._ejDialog),r=n("#"+this.contentDiv.find("iframe").attr("id")),n(r[0].contentDocument.lastChild).remove(),r[0].contentDocument.appendChild(u),t.browserInfo().name=="mozilla"&&setTimeout(function(){n(r[0].contentDocument.lastChild).remove();r[0].contentDocument.appendChild(u)},500)));this.model.showFooter&&this._ejDialog.find(".e-footerbar").length==0&&(this._renderFooterBar(),this.model.footerTemplateId!=null&&(o=n("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(o)))},_roundedCorner:function(n){this._ejDialog[n?"addClass":"removeClass"]("e-corner");this.contentDiv.removeClass("e-dialog-top e-dialog-bottom e-dialog-content");this.model.showRoundedCorner&&(this.model.showHeader&&!this.model.showFooter?this.contentDiv.addClass("e-dialog-bottom"):!this.model.showHeader&&this.model.showFooter?this.contentDiv.addClass("e-dialog-top"):!this.model.showHeader&&!this.model.showFooter?this.contentDiv.addClass("e-dialog-content"):!0)},_reRenderScroller:function(){if(this.scroller!=i&&(this.scroller.refresh(!0),!this.model.enableRTL)){if(this.scroller._vScrollbar&&this.scroller._vScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter)var r=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=0,n=0;else var r=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=2,n=this._ejDialog.find("div.e-resize-handle").outerHeight();Math.floor(this.contentDiv.outerHeight())===Math.floor(this.scroller._vScrollbar.model.height+1)&&(this.scroller._vScrollbar.model.height-=n+t,this.scroller._vScrollbar._scrollData.handle-=n,this.scroller._vScrollbar._scrollData.handleSpace-=n+t,this.scroller._vScrollbar._updateLayout(this.scroller._vScrollbar._scrollData),this.scroller._vScrollbar.element.find("> div.e-vscroll").height(r-n-t))}if(!(this.scroller._vScrollbar&&this.scroller._vScrollbar._scrollData)&&this.scroller._hScrollbar&&this.scroller._hScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter)var u=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),t=0,n=0;else var u=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),t=2,n=this._ejDialog.find("div.e-resize-handle").outerWidth();this.scroller._hScrollbar.model.width-=n+t;this.scroller._hScrollbar._scrollData.handle-=n+t;this.scroller._hScrollbar._scrollData.handleSpace-=n+t;this.scroller._hScrollbar._updateLayout(this.scroller._hScrollbar._scrollData);this.scroller._hScrollbar.element.find("> div.e-hscroll").width(u-n-t)}}},_dialogMaxZindex:function(){var u=this.element.parents(),i,r,f,e,t;return i=n("body").children(),f=i.index(this.popup),i.splice(f,1),n(i).each(function(n,t){u.push(t)}),r=n(this.model.target).children(),e=r.index(this.popup),r.splice(e,1),n(r).each(function(n,t){u.push(t)}),t=Math.max.apply(t,n.map(u,function(t){if(n(t).css("position")!="static")return parseInt(n(t).css("z-index"))||1})),!t||t<1e4?t=1e4:t+=1,t},_setZindex:function(){var n=this._dialogMaxZindex();this.model.zIndex<=n&&this._ejDialog.css({zIndex:n+1})},_createOverlay:function(){var u=this._ejDialog.css("zIndex"),i,r;t.isNullOrUndefined(this._overLay)||this._overLay.remove();this.model.backgroundScroll||n("body").addClass("e-dialog-modal");this._overLay=t.buildTag("div#"+this.element.attr("id")+"_overLay.e-overlay","",{zIndex:u-1});t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target;this._overLay.appendTo(t.isNullOrUndefined(i)?document.body:i);var r=!t.isNullOrUndefined(this.model.containment)&&!t.isNullOrUndefined(this._target)?"absolute":"fixed",f=t.isNullOrUndefined(i)||r=="fixed"?0:n(i).css("position").toLowerCase()!="static"?0:n(i).offset().left,e=t.isNullOrUndefined(i)||r=="fixed"?0:n(i).css("position").toLowerCase()!="static"?0:n(i).offset().top;this._overLay.css({top:e,left:f,position:r})},_sendAjaxOptions:function(t,i){t.addClass("e-load");var r=this,u=this.model.title,e=i,f={success:function(n){try{r._ajaxSuccessHandler(n,t,i,u)}catch(f){}},error:function(n){try{r._ajaxErrorHandler({status:n.status,responseText:n.responseText,statusText:n.statusText},t,i,u)}catch(n){}},complete:function(){try{r._setContainerSize();r._resetScroller();r.model.showOnInit||r._setHiddenDialogSize()}catch(n){}}};n.extend(!0,f,this.model.ajaxSettings);this._sendAjaxRequest(f)},_setHiddenDialogSize:function(){this._isOpen||(this._ejDialog.css({display:"block",visibility:"hidden"}),this._setContainerSize()._resetScroller(),this._ejDialog.css({display:"none",visibility:""}))},_sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(n,t,i){t.removeClass("e-load");t.html(n).addClass("e-dialog-loaded").appendTo(this._ejDialog);t.appendTo(this.contentDiv);this._dialogPosition();this.model.showOnInit&&this.open();this._trigger("ajaxSuccess",{data:n,url:i})},_ajaxErrorHandler:function(n,t,i){t.addClass("e-dialog-loaded").appendTo(this.contentDiv);this._dialogPosition().open();this._trigger("ajaxError",{data:n,url:i})},_closeIcon:function(){this._dialogClose=t.util.buildTag("div#"+this.element[0].id+"_closebutton.e-dialog-icon e-icon e-close",null,null).attr("tabIndex","0");this.model.closeIconTooltip=="close"&&this.model.tooltip.close=="Close"?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close):this.model.closeIconTooltip!="close"&&this.model.tooltip.close=="Close"?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.closeIconTooltip):this.model.closeIconTooltip=="close"&&this.model.tooltip.close!="Close"?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close):this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close);this._on(this._dialogClose,"touchstart click",this._closeClick)},_collapsibleIcon:function(){this._dialogCollapsible=t.util.buildTag("div#"+this.element[0].id+"_collapsbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0");this._collapsible?this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.expand).addClass("e-arrowhead-down").removeClass("e-arrowhead-up"):this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.collapse).addClass("e-arrowhead-up").removeClass("e-arrowhead-down");this._on(this._dialogCollapsible,"touchstart click",this._collapsibleClick)},_maximizeIcon:function(){this._dialogMaximize=t.util.buildTag("div#"+this.element[0].id+"_maximizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0");this._maximize?this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-maximize"):this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.maximize).addClass("e-maximize").removeClass("e-restore");this._on(this._dialogMaximize,"touchstart click",this._maximizeClick)},_minimizeIcon:function(){this._dialogMinimize=t.util.buildTag("div#"+this.element[0].id+"_minimizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0");this._minimize?this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-minus"):this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.minimize).addClass("e-minus").removeClass("e-restore");this._on(this._dialogMinimize,"touchstart click",this._minimizeClick)},_pinIcon:function(){this._dialogPin=t.util.buildTag("div#"+this.element[0].id+"_pinbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0");this._dialogPin.appendTo(this._dialogTitlebar).attr("title",this.dialogPin?this.model.tooltip.unPin:this.model.tooltip.pin).addClass(this.dialogPin?"e-pin":"e-unpin").removeClass(this.dialogPin?"e-unpin":"e-pin");this._on(this._dialogPin,"touchstart click",this._pinClick)},_favIcon:function(){if(this._dialogFavIcon)n=this._dialogFavIcon.find("span").removeClass().addClass("e-dialog-custom");else{this._dialogFavIcon=t.util.buildTag("div.e-dialog-favicon","",{},{style:"float:"+(this.model.enableRTL?"right":"left")});var n=t.util.buildTag("span.e-dialog-custom","",{},{role:"presentation"});n.appendTo(this._dialogFavIcon);this._dialogFavIcon.appendTo(this._dialogTitlebar)}this.model.faviconCSS?n.addClass(this.model.faviconCSS):this._dialogFavIcon.remove();this._dialogFavIcon.css("float",this.model.enableRTL?"right":"left")},_minMaxValidation:function(){var r=parseInt(this.model.minWidth),u=parseInt(this.model.minHeight),n=parseInt(this.model.maxWidth),t=parseInt(this.model.maxHeight),f=parseInt(this.model.width),e=parseInt(this.model.height),i=this._getParentObj();isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(r=this._convertPercentageToPixel(i.outerWidth(),r));isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(u=this._convertPercentageToPixel(i.outerHeight(),u));isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(n=this._convertPercentageToPixel(i.innerWidth(),n));isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(t=this._convertPercentageToPixel(i.innerHeight(),t));isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&(f=this._convertPercentageToPixel(i.innerWidth(),f));isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&(e=this._convertPercentageToPixel(i.innerHeight(),e));(n&&f>n||r&&f<r)&&(this.model.width=f>n?n:r);(t&&e>t||u&&e<u)&&(this.model.height=e>t?t:u)},_setSize:function(){var n=this.model;return this._minMaxValidation(),this._ejDialog.css({width:n.width,minWidth:n.minWidth,maxWidth:n.maxWidth}),this._ejDialog.css({height:n.height,minHeight:n.minHeight,maxHeight:n.maxHeight}),this._dialogPosition(),this},_resetScroller:function(){this.element.css({height:"auto","max-width":"","max-height":"",width:""});var r=this._ejDialog.outerHeight(!0)-(this.model.showHeader?n(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)-(this.model.showFooter?n(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0),u,i={width:this.contentDiv.css("border-width")=="0px"||this.contentDiv.css("border-left-width")=="0px"?Math.round(this._ejDialog.width()):Math.round(this._ejDialog.width()-2),enableRTL:this.model.enableRTL,height:this.contentDiv.css("border-width")=="0px"?r:r-1,enableTouchScroll:!1};this.model.height=="auto"&&(this.element.height()<this.model.maxHeight||!this.model.maxHeight)&&!this._maximize&&(i.height="auto");this.model.width!="auto"||this._maximize||(i.width=this.model.width);this.contentDiv.ejScroller(i);this.scroller=this.contentDiv.data("ejScroller");this._reRenderScroller();this._padding=parseInt(n(this.element).css("padding-top"))+parseInt(n(this.element).css("padding-bottom"));n(this._ejDialog).css("display")=="none"&&(this.hidden=!0,this._ejDialog.css({display:"block"}));!t.isNullOrUndefined(this.contentDiv.height())&&this.contentDiv.height()>0&&(u=t.isNullOrUndefined(this.scroller)?this.contentDiv.outerHeight()-this._padding:!this.scroller._hScrollbar&&this.scroller._vScrollbar?this.contentDiv.outerHeight():this.scroller._hScrollbar?this.contentDiv.outerHeight()-this.scroller.model.buttonSize:this.contentDiv.outerHeight(),this.model.height!="auto"&&this.model.height!="100%"?this.element.css({height:u-1}):this.element.css("height",this.model.height),this.model.height!="auto"&&this.model.height!="100%"||this.scroller._vScrollbar||this.element.css({"min-height":this.model.minHeight-(this.model.showHeader?n(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)}),this.scroller._vScrollbar||this.model.width=="auto"||this.model.width=="100%"?this.scroller._vScrollbar||this.element.css("width",this.model.width):this.element.outerWidth(this.contentDiv.css("border-width")=="0px"||this.contentDiv.css("border-left-width")=="0px"?this._ejDialog.width():this._ejDialog.width()-2),this.element.css({"max-width":this.model.maxWidth,"max-height":this.model.maxHeight}));this.hidden&&this._ejDialog.css({display:"none"});this.hidden=!1},_updateScroller:function(n,t){this.contentDiv.ejScroller({width:t,height:n,enableRTL:this.model.enableRTL,enableTouchScroll:!1});this.scroller=this.contentDiv.data("ejScroller");this._reRenderScroller();this._changeSize()},_dragDialog:function(){var i=this,r=this._ejDialog.parents(".e-dialog-scroller");return this._dialogTitlebar.ejDraggable({handle:".e-titlebar",cursorAt:{top:0,left:0},dragArea:i._target,dragStart:function(n){return(n.element.attr("aria-grabbed",!0),i._clickHandler(),i.dialogPin||!i.model.allowDraggable||!i.model.enabled)?(n.cancel=!0,!1):i._trigger("dragStart",{event:n})?(n.cancel=!0,!1):void 0},drag:function(n){i._trigger("drag",{event:n})},dragStop:function(r){var u,f;i._ejDialog.focus();r.element.attr("aria-grabbed",!1);i.element.find("> .e-draggable.e-titlebar")&&(u=n("#"+i.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"),u&&u.option("cursorAt",i.element.offset()));f=this.helper.offsetParent().offset();i._trigger("dragStop",{event:r});i.model.position.X=t.isNullOrUndefined(this.position.left)?parseInt(this.helper.css("left")):this.position.left-[f.left+parseFloat(this.helper.offsetParent().css("border-left-width"))];i.model.position.Y=t.isNullOrUndefined(this.position.top)?parseInt(this.helper.css("top")):this.position.top-[f.top+parseFloat(this.helper.offsetParent().css("border-top-width"))];i._positionChanged=!0;i.dlgresized=!0},helper:function(){return n(i._ejDialog).addClass("dragClone")}}),this},_resizeDialog:function(){if(this.model.enableResize){var t=this,r=!1,i,u=parseInt(this.model.minWidth),f=parseInt(this.model.minHeight),e=parseInt(this.model.maxWidth),o=parseInt(this.model.maxHeight);return i=this._getParentObj(),isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(u=this._convertPercentageToPixel(i.outerWidth(),u)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(f=this._convertPercentageToPixel(i.outerHeight(),f)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(e=this._convertPercentageToPixel(i.innerWidth(),e)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(o=this._convertPercentageToPixel(i.innerHeight(),o)),this._ejDialog.find("div.e-resize-handle").ejResizable({minHeight:f,minWidth:u,maxHeight:o,maxWidth:e,handle:"e-widget-content",resizeStart:function(n){if(t.dlgresized=!0,!t.model.enabled)return!1;r||t._trigger("resizeStart",{event:n});r=!0;t.model.position={X:t._ejDialog.css("left"),Y:t._ejDialog.css("top")};t._dialogPosition()},resize:function(i){t.dlgresized=!0;var r=n(i.element).parents("div.e-dialog-wrap");t.model.height=n(r).outerHeight();t.model.width=n(r).outerWidth();t._setSize();t._setContainerSize();t._resetScroller();t._updateCaptionWidth();t._trigger("resize",{event:i});t._sizeType={width:"px",height:"px"};this.scrObj&&this.scrObj._resetScroller()},resizeStop:function(i){t.dlgresized=!0;t._ejDialog.focus();t._sizeInPercent();var u=n(i.element).parents("div.e-dialog-wrap");t.model.height=n(u).outerHeight();t.model.width=n(u).outerWidth();t._setSize();t._setContainerSize();t._resetScroller();r&&t._trigger("resizeStop",{event:i});r=!1;t._setDimension()},helper:function(){return n(t._ejDialog)}}),this}},_dialogPosition:function(){if(this._ejDialog.parents("form").length>0&&t.isNullOrUndefined(this.model.containment)&&t.isNullOrUndefined(this.model.target)&&this._ejDialog.appendTo(this._ejDialog.parents("form")),this.model.position.X!=""||this.model.position.Y!="")if(this._ejDialog.css("position","absolute"),t.isNullOrUndefined(this.model.target)&&t.isNullOrUndefined(this.model.containment))this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y);else{var i=t.isNullOrUndefined(this.model.containment)?this.model.target:this.model.containment;this.dlgresized||this._keyNavigation?(this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y)):(this._ejDialog.css("left",n(i).offset().left+parseInt(this.model.position.X)),this._ejDialog.css("top",n(i).offset().top+parseInt(this.model.position.Y)))}else this._centerPosition();return this},_centerPosition:function(){var r=0,u=0,i,f,e,o;t.isNullOrUndefined(this.model.target)&&(t.isNullOrUndefined(this._target)||n(this._target).is(n(document))||n(this._target).is(n(window)))?(o=document.documentElement,r=(n(window).outerWidth()>this._ejDialog.width()?(n(window).outerWidth()-this._ejDialog.outerWidth())/2:0)+(window.pageXOffset||o.scrollLeft),u=(n(window).outerHeight()>this._ejDialog.height()?(n(window).outerHeight()-this._ejDialog.outerHeight())/2:0)+(window.pageYOffset||o.scrollTop)):(i=t.isNullOrUndefined(this._target)?n(this.model.target):n(this._target),i.css("position")=="static"&&(f=i.offsetParent().offset(),e=i.offset(),r=e.left-f.left,u=e.top-f.top),i.outerWidth()>this._ejDialog.width()&&(r+=(i.outerWidth()-this._ejDialog.width())/2),i.outerHeight()>this._ejDialog.height()&&(u+=(i.outerHeight()-this._ejDialog.height())/2));this._ejDialog.css({top:u,left:r});this._ejDialog.css("position","absolute")},_closeClick:function(n){n.type=="touchstart"&&n.preventDefault();this.model.enabled&&(n.stopPropagation(),this.close(n))},_collapsibleClick:function(t){this.model.enabled&&(n(t.target).hasClass("e-arrowhead-up")?this._actionCollapse(t):n(t.target).hasClass("e-arrowhead-down")&&this._actionExpand(t))},_actionCollapse:function(n){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-up").addClass("e-arrowhead-down"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.expand),this._ejDialog.find("div.e-resize-handle").hide(),this._ejDialog.find(".e-widget-content").parent().slideUp("fast"),this.model.showFooter&&this._dialogFooterbar.slideUp("fast"),this._ejDialog.removeClass("e-shadow"),this._ejDialog.css("minHeight","0"),this._ejDialog.height("auto"),this._trigger("collapse",{isInteraction:n?!0:!1}),this._collapsible=!0)},_actionExpand:function(n){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._ejDialog.addClass("e-shadow"),this._ejDialog.find(".e-widget-content").parent().slideDown("fast"),this.model.showFooter&&this._dialogFooterbar.slideDown("fast"),this._maximize?(this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"})):this._ejDialog.height(this.model.height),this._ejDialog.find("div.e-resize-handle").show(),this._trigger("expand",{isInteraction:n?!0:!1}),this._collapsible=!1)},_maximizeClick:function(i){if(this.model.enabled){var r=n(i.target),u=this._dialogMaximize;r.hasClass("e-maximize")?(this._actionMaximize(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-minus"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.minimize)),r.removeClass("e-maximize").addClass("e-restore"),this._dialogMaximize.attr("title",this.model.tooltip.restore),this._hideIcon(!0)):r.hasClass("e-restore")&&(this._actionRestore(),r.removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize.attr("title",this.model.tooltip.maximize),!t.isNullOrUndefined(u)&&n(u).hasClass("e-arrowhead-down")&&(n(u).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMaximize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}this._resetScroller()},_actionMaximize:function(){this._ejDialog.css("top","0px").css("left","0px").css("overflow","hidden").css("position",this.model.containment?"absolute":this.model.target?"absolute":"fixed");this._ejDialog.css({width:"100%",height:"100%"});this.element.css({width:"100%",height:"100%"});this.contentDiv.css({width:"100%",height:"100%"});this._maximize=!0;this._minimize=!1;var n=this;this._dialogCollapsible&&!t.isNullOrUndefined(this._dialogCollapsible.hasClass("e-arrowhead-down"))&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._collapseValue=!0);this._collapseValue==!0&&this._ejDialog.find(".e-widget-content").parent().slideDown("fast",function(){n.refresh();n._reRenderScroller()});this._resetScroller()},_actionRestore:function(){this.element.height("").width("");this.contentDiv.height("").width("");this._restoreDialog();this._maximize=this._minimize=!1},_minimizeClick:function(i){if(this.model.enabled){var r=n(i.target),u=this._dialogMinimize.hasClass("e-icon")&&this._dialogMinimize;r.hasClass("e-minus")?(this._maximize&&this._setSize(),this._actionMinimize()):r.hasClass("e-restore")&&(this._actionRestore(),r.removeClass("e-restore").addClass("e-minus"),this._dialogMinimize.attr("title",this.model.tooltip.minimize),!t.isNullOrUndefined(u)&&n(u).hasClass("e-arrowhead-down")&&(n(u).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMinimize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}},_actionMinimize:function(){var i=n(window).height()-this._ejDialog.height()+this.element.height()+14,t;this._ejDialog.css("top","").css("bottom","0").css("left","0").css("position",this.model.containment?"absolute":this.model.target?"absolute":"fixed");this._ejDialog.css("minHeight","0");this._dialogTitlebar?(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogTitlebar.find(".e-minus").removeClass("e-minus").addClass("e-restore"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.restore),this._isOpen?t=this._dialogTitlebar.outerHeight():(this._ejDialog.css({display:"block",visibility:"hidden"}),t=this._dialogTitlebar.outerHeight(),this._ejDialog.css({display:"none",visibility:""})),this._ejDialog.css("height",t+2),this._hideIcon(!1)):this._ejDialog.css("height","");this.contentDiv.hide();this.model.showFooter&&this._dialogFooterbar.hide();this._maximize=!1;this._minimize=!0},_hideIcon:function(i){var r=this._dialogCollapsible?this._dialogCollapsible:null;i?(t.isNullOrUndefined(r)||n(r).parent(".e-dialog-icon").show(),this._ejDialog.find("div.e-resize-handle").show()):(t.isNullOrUndefined(r)||n(r).parent(".e-dialog-icon").hide(),this._ejDialog.find("div.e-resize-handle").hide())},_pinClick:function(t){if(this.model.enabled){var i=n(t.target);i.hasClass("e-unpin")?(this.dialogPin=!0,i.removeClass("e-unpin").addClass("e-pin"),this._dialogPin.attr("title",this.model.tooltip.unPin)):i.hasClass("e-pin")&&(this.dialogPin=!1,i.removeClass("e-pin").addClass("e-unpin"),this._dialogPin.attr("title",this.model.tooltip.pin))}},_restoreDialog:function(){this.contentDiv.show();this.model.showFooter&&this._dialogFooterbar.show();this._ejDialog.css({position:"absolute",bottom:""}).addClass("e-shadow");this._setSize()._resetScroller();this._dialogTitlebar&&(this._dialogTitlebar.find(".e-minus").parent().show(),this._dialogCollapsible&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse)))},_clickHandler:function(){var n=this._dialogMaxZindex();parseInt(this._ejDialog.css("zIndex"))<n&&this._ejDialog.css({zIndex:n+1})},_mouseClick:function(t){t.currentTarget==this._id&&(n(t.target).hasClass("e-dialog")||n(t.target).hasClass("e-icon e-resize-handle"))&&(this._setZindex(),n(t.target).closest(".e-dialog.e-widget").focus())},_keyDown:function(t){code=t.keyCode?t.keyCode:t.which?t.which:t.charCode;this.model.allowKeyboardNavigation&&this.model.enabled&&n(t.target).hasClass("e-dialog")&&n.inArray(code,this.keyConfigs)>-1&&this.model.allowDraggable&&!this.dialogPin&&(this._keyPressed(code,t.ctrlKey),t.preventDefault());this.model.closeOnEscape&&code===27&&this.model.enabled&&(this.element.find(".e-js.e-dialog").first().is(":visible")||(this.close(t),t.preventDefault()));code===13&&this.model.enabled&&(n(t.target).hasClass("e-close")?this.close(t):(n(t.target).hasClass("e-arrowhead-up")||n(t.target).hasClass("e-arrowhead-down"))&&this._collapsibleClick(t),n(t.target).hasClass("e-maximize")||n(t.target).hasClass("e-restore")&&n(t.target).is(this._dialogMaximize)?this._maximizeClick(t):(n(t.target).hasClass("e-minus")||n(t.target).hasClass("e-restore")&&n(t.target).is(this._dialogMinimize))&&this._minimizeClick(t),(n(t.target).hasClass("e-pin")||n(t.target).hasClass("e-unpin"))&&this._pinClick(t));code==9&&this.model.enableModal&&this._focusOnTab(t)},_focusOnTab:function(t){var i=this._ejDialog.find("a, button, :input, select, [tabindex]:not('-1')");i=n(i).find("a, button, :input, select, [tabindex]:not('')");t.shiftKey?i[i.index(t.target)-1]||(t.preventDefault(),i.last().focus()):i[i.index(t.target)+1]||(t.preventDefault(),i[0].focus())},_keyPressed:function(n,t){this._keyNavigation=!0;switch(n){case 40:t?this._resizing("height",this._ejDialog.outerHeight()+3):this.option("position",{X:this._ejDialog.position().left,Y:this._ejDialog.position().top+3});break;case 39:t?this._resizing("width",this._ejDialog.outerWidth()+3):this.option("position",{X:this._ejDialog.position().left+3,Y:this._ejDialog.position().top});break;case 38:t?this._resizing("height",this._ejDialog.outerHeight()-3):this.option("position",{X:this._ejDialog.position().left==0?0:this._ejDialog.position().left,Y:this._ejDialog.position().top>3?this._ejDialog.position().top-3:0});break;case 37:t?this._resizing("width",this._ejDialog.outerWidth()-3):this.option("position",{X:this._ejDialog.position().left>3?this._ejDialog.position().left-3:0,Y:this._ejDialog.position().top==0?0:this._ejDialog.position().top})}},_resizing:function(n,t){this.model.enableResize&&this.option(n,t)},_sizeInPercent:function(){if(!this._enableWindowResize())return this;var n=this._getParentObj();return this._widthPercent=this._sizeType.width=="%"?parseFloat(this.model.width):this._convertPixelToPercentage(n.outerWidth(),this._ejDialog.outerWidth()),this._heightPercent=this._sizeType.height=="%"?parseFloat(this.model.height):this._convertPixelToPercentage(n.outerHeight(),this._ejDialog.outerHeight()),this._widthPercent>=100&&(this._widthPercent=100,this._ejDialog.outerWidth(n.outerWidth()),this.model.width=this._ejDialog.width()),this._heightPercent>=100&&(this._heightPercent=100,this._ejDialog.outerHeight(n.outerHeight()),this.model.height=this._ejDialog.height()),this},_getParentObj:function(){return t.isNullOrUndefined(this.model.containment)?t.isNullOrUndefined(this.model.target)?n(document):n(this.model.target):n(this.model.containment)},_convertPercentageToPixel:function(n,t){return Math.round(t*n/100)},_convertPixelToPercentage:function(n,t){return Math.round(t/n*100)},_reSizeHandler:function(){var t;if(this._maximize){this._resetScroller();return}this.model.position.X!=""&&(this.model.position.Y!=""||this._minimize)||this._centerPosition();t=this._getParentObj();this._change=!1;this._windowSize.outerWidth!=n(window).outerWidth()?this._sizeType.width=="%"?this._percentageWidthDimension(t):this._pixelsWidthDimension(t):this._windowSize.outerHeight!=n(window).outerHeight()&&(this._sizeType.height=="%"?this._percentageHeightDimension(t):this._pixelsHeightDimension(t));this._change&&this._resizeContainer(t);this._windowSize={outerWidth:n(window).outerWidth(),outerHeight:n(window).outerHeight()};this._centerPosition()},_setDimension:function(){t.isNullOrUndefined(this.model.maxWidth)?t.isNullOrUndefined(this._sizeType.width)?this._maxWidth=+this.model.width:(this._sizeType.width=="px"||this._sizeType.width=="auto")&&(this._maxWidth=this.model.width):this._maxWidth=this.model.maxWidth;t.isNullOrUndefined(this.model.maxHeight)?t.isNullOrUndefined(this._sizeType.height)?this._maxHeight=+this.model.height:(this._sizeType.height=="px"||this._sizeType.height=="auto")&&(this._maxHeight=this.model.height):this._maxHeight=this.model.maxHeight},_percentageWidthDimension:function(n){this._ejDialog.outerWidth(this._convertPercentageToPixel(n.outerWidth(),this._widthPercent));this._change=!0},_percentageHeightDimension:function(n){this._ejDialog.outerHeight(this._convertPercentageToPixel(n.outerHeight(),this._heightPercent));this._change=!0},_pixelsWidthDimension:function(t){n(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t);n(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t);parseInt(this._ejDialog.css("width"))<parseInt(this._maxWidth)&&(parseInt(this._maxWidth)<n(t).outerWidth()?this._ejDialog.outerWidth(parseInt(this._maxWidth)):this._ejDialog.outerWidth(t.outerWidth()),this._change=!0)},_pixelsHeightDimension:function(t){n(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t);n(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t);parseInt(this._ejDialog.css("height"))<parseInt(this._maxHeight)&&(parseInt(this._maxHeight)<n(t).outerHeight()?this._ejDialog.outerWidth(parseInt(this._maxHeight)):this._ejDialog.outerHeight(t.outerHeight()),this._change=!0)},_setWidth:function(n){this._ejDialog.outerWidth(n.outerWidth());this._change=!0},_setHeight:function(n){this._ejDialog.outerHeight(n.outerHeight());this._change=!0},_resizeContainer:function(){this.contentDiv.width(this._ejDialog.width());this.element.outerWidth(this.contentDiv.width());var i=this._ejDialog.height()-(this.model.showHeader?n(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0);this.contentDiv.height(t.isNullOrUndefined(this.contentDiv)?i-1:this.contentDiv.css("border-width")=="0px");this.element.outerHeight(t.isNullOrUndefined(this.contentDiv)?i-1:this.contentDiv.css("border-width")=="0px");this.scroller=this.contentDiv.ejScroller({width:t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:this.contentDiv.css("border-width")=="0px",height:t.isNullOrUndefined(this.contentDiv)?this.element.outerHeight()-2:this.contentDiv.css("border-width")=="0px",rtl:this.model.rtl,enableTouchScroll:!1});this.scroller=this.contentDiv.data("ejScroller");this._reRenderScroller();this.model.position.X==""||this.model.position.Y==""&&!this._minimize||this._positionChanged?this._centerPosition():this._ejDialog.css("height",this._dialogTitlebar.outerHeight());this._updateCaptionWidth();this._change=!1},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_enableWindowResize:function(){return this.model.isResponsive||isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&this.model.height!="auto"?!0:!1},_wireResizing:function(){n(window)[this._enableWindowResize()?"on":"off"]("resize",n.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this._ejDialog,"keydown",this._keyDown);this._on(this._ejDialog,"click",this._mouseClick);this._wireResizing()},refresh:function(){this._resetScroller()},open:function(){var i,r,u,e,f;return this._isOpen?!0:!0==this._trigger("beforeOpen")?!1:(this.element.css("display","block"),this._setZindex(),this._minimize||this._maximize||this._init||this._dialogPosition(),i=this,r={},this._ejDialog.show(),this.model.enableAnimation&&(this._ejDialog.css({opacity:0}),this.model.animation.show.effect=="slide"?(e=this._ejDialog.css("left"),this._ejDialog.css({left:-this._ejDialog.width()}),r={left:e,opacity:1}):r={opacity:1}),this._ejDialog.animate(r,this.model.enableAnimation?Number(this.model.animation.show.duration):0,function(){i.model&&(i._ejDialog.css("display")=="none"&&i._ejDialog.show(),i._ejDialog.eq(0).focus(),i._ejDialog.css({opacity:""}),i.contentDiv.find("a:visible:enabled, button:visible:enabled, :input:visible:enabled, select:visible:enabled, .e-input").first().focus(),i._trigger("open"),i._updateCaptionWidth(),i.model.enableModal&&!i.model.backgroundScroll&&(i._ejDialog.height()>n(window).height()&&i._ejDialog.css("height",n(window).height()),i.model.height=n(window).height(),i._overLay.css("position","fixed"),i.scroller.refresh(!0),i.refresh()),(i.model.maxHeight||i.model.maxWidth)&&(u=i._ejDialog.outerHeight(!0)-(i._dialogTitlebar?i._dialogTitlebar.outerHeight(!0):0),(i.model.height=="auto"||i.model.height=="100%")&&(u=i.model.height),i._updateScroller(t.isNullOrUndefined(this.contentDiv)?u-2:this.contentDiv.css("border-width")=="0px",t.isNullOrUndefined(this.contentDiv)?i._ejDialog.width()-2:this.contentDiv.css("border-width")=="0px")))}),this.model.enableModal==!0&&this._createOverlay(),this._isOpen=!0,this.element.find("> .e-draggable.e-titlebar")&&(f=n("#"+this.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"),f&&f.option("cursorAt",this.element.offset())),this)},close:function(t){var i,r,u;return!this._isOpen||!this.model.enabled?!0:(i=t?!0:!1,!0==this._trigger("beforeClose",{event:t,isInteraction:i}))?!1:(this._isOpen=!1,r=this,u={},this.model.enableAnimation&&(u=this.model.animation.hide.effect=="slide"?{left:-this._ejDialog.width(),opacity:0}:{opacity:0}),this._ejDialog.animate(u,this.model.enableAnimation?Number(this.model.animation.hide.duration):0,function(){r._trigger("close",{event:t,isInteraction:i});r._ejDialog.hide()}),this.model.enableModal&&(this._overLay&&this._overLay.remove(),this.model.backgroundScroll||n("body").removeClass("e-dialog-modal")),this)},isOpened:function(){return this.isOpen()},isOpen:function(){return this._isOpen},setTitle:function(n){return this.model.title=n,this._titleText.text(n),this._updateCaptionWidth(),this},setContent:function(n){return this.model.enabled?(this.element.html(n),this._resetScroller(),this):!1},focus:function(){return this._setZindex(),this.element.focus(),this},minimize:function(){if(this.model.showHeader)return this._actionMinimize(),n(this.wrapper.find(".e-minus")[0]).parent().hide(),this},maximize:function(){if(this.model.showHeader)return this._actionMaximize(),n(this.wrapper.find(".e-maximize")[0]).removeClass("e-maximize").addClass("e-restore"),n(this.wrapper.find(".e-restore")[1]).removeClass("e-restore").addClass("e-minus"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.restore),this.contentDiv.show(),this._dialogTitlebar&&this._dialogTitlebar.find(".e-minus").parent().show(),this._hideIcon(!0),this},restore:function(){if(this.model.showHeader){var t=this._minimize;return this._actionRestore(),n(this.wrapper.find(".e-restore")[0]).removeClass("e-restore").addClass(t?"e-minus":"e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._hideIcon(!0),this}},pin:function(){if(this.model.showHeader)return this.dialogPin=!0,n(this.wrapper.find(".e-unpin")[0]).removeClass("e-unpin").addClass("e-pin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.unPin),this},unpin:function(){if(this.model.showHeader)return this.dialogPin=!1,n(this.wrapper.find(".e-pin")[0]).removeClass("e-pin").addClass("e-unpin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.pin),this},collapse:function(){if(this.model.showHeader)return this._actionCollapse(),this._collapseValue=!0,this},expand:function(){if(this.model.showHeader)return this._actionExpand(),this}});t.Dialog.Locale=t.Dialog.Locale||{};t.Dialog.Locale["default"]=t.Dialog.Locale["en-US"]={tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},title:"",closeIconTooltip:"close"}}(jQuery,Syncfusion),function(n,t){t.widget("ejToolbar","ej.Toolbar",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-toolbar",angular:{terminal:!1},defaults:{height:"",width:"",enabled:!0,hide:!1,disabledItemIndices:[],enabledItemIndices:[],enableSeparator:!1,orientation:"horizontal",enableRTL:!1,isResponsive:!1,showRoundedCorner:!1,htmlAttributes:{},dataSource:null,Items:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group",template:"template"},query:null,responsiveType:"popup",fields:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group",template:"template"},tooltipSettings:{associate:"mouseenter",showShadow:!0,position:{stem:{horizontal:"left",vertical:"top"}},tip:{size:{width:5,height:5},adjust:{xValue:17,yValue:17}},isBalloon:!1},cssClass:"",targetID:null,create:null,click:null,itemHover:null,itemLeave:null,overflowOpen:null,overflowClose:null,destroy:null},dataTypes:{enabled:"boolean",hide:"boolean",enableSeparator:"boolean",disabledItemIndices:"data",enabledItemIndices:"data",orientation:"enum",enableRTL:"boolean",showRoundedCorner:"boolean",isResponsive:"boolean",dataSource:"data",query:"data",fields:"data",cssClass:"string",htmlAttributes:"data",targetID:"string",responsiveType:"enum"},hide:function(){if(!this.model.enabled&&this.element.css("display")=="none")return!1;this.element.css("display","none");this.model.hide=!0},show:function(){if(!this.model.enabled&&this.element.css("display")!="none")return!1;this.element.css("display","block");this.model.hide=!1},_init:function(){this.model.targetID!=null&&this.element.html(n("#"+this.model.targetID).find("ul,ol"));this._cloneElement=n(this.element).clone();this._localDataSource=null;this.model.dataSource!=null?this._generateTemplate():this.model.Items!=null&&this._generateTemplate();this.model.dataSource instanceof t.DataManager||this._initialize();this._renderTooltip(this.model.tooltipSettings)},_setModel:function(t){var i,r;for(i in t)switch(i){case"height":this._setHeight(t[i]);break;case"width":this.model.width=t[i];this._setWidth();this._bindUnbindWidth();break;case"enabled":this._controlStatus(t[i]);break;case"disabledItemIndices":this._disableItemByIndex(t[i]);t[i]=this.model.disabledItemIndices;break;case"enabledItemIndices":this._enableItemByIndex(t[i]);break;case"isResponsive":this.model.isResponsive=t[i];this.model.isResponsive?(this._responsiveLayout(),this._renderTooltip(this.model.tooltipSettings)):this._removeResponsive();break;case"hide":this._controlVisibleOptions(t[i]);break;case"orientation":this._setOrientation(t[i]);this.model.orientation=t[i];this._wireResizing();break;case"tooltipSettings":this.model.tooltipSettings=n.extend(!0,this.model.tooltipSettings,t[i]);this._renderTooltip(this.model.tooltipSettings);break;case"enableRTL":this._enableRTL(t[i]);break;case"showRoundedCorner":this._roundedCorner(t[i]);break;case"cssClass":this._setSkin(t[i]);break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableSeparator":this.model.enableSeparator=t[i];this._renderToolbarSeparator();break;case"fields":n.extend(this.model.fields,t[i]);break;case"query":this.model.query=t[i];break;case"dataSource":for(r in t)r=="fields"&&n.extend(this.model.fields,t[r]),r=="query"&&(this.model.query=t[r]);this._refreshTagItems(i,t[i]);break;case"Items":n.extend(this.model.Items,t[i]);this._refreshTagItems(i,t[i]);break;case"targetID":this.model.targetID=t[i];this._setTargetID()}},_setTargetID:function(){this.element.removeAttr("role tabindex aria-disabled style");n(this._spantag).remove();n(this._liTemplte).remove();this._liTemplte=this._tipRes=null;this.element.removeClass("e-widget e-box e-toolbarspan e-rtl");this.element.find("ul,ol").removeClass("e-ul e-horizontal e-vertical e-separator e-comnrtl");this.element.find("li").removeClass("e-tooltxt e-comnrtl");this.element.find("li").removeAttr("aria-label");this._init()},_refreshTagItems:function(n,t){this.model[n]=t;this.element.empty();this._generateTemplate();this._initialize()},_setHeight:function(n){this.element.css("height",n)},_setWidth:function(){var t,u;if(this.model.width=="auto"){var r=parseFloat(this.element.css("border-left-width"))+parseFloat(this.element.css("border-right-width")),f=this.element.find("ul").children("li"),i=this.element.find("ul"),e;for(e=this.model.responsiveType=="inline"?this.element.find(".e-arrow-sans-down"):this.element.find(".e-toolbar-res-arrow"),t=0,u=i.length;t<u;t++)i[t]!=null&&n(i[t]).hasClass("e-separator")&&(r+=parseFloat(i.eq(t).css("border-right-width"))+parseFloat(i.eq(t).css("border-left-width")));for(e[0]!=null&&(r+=this.model.responsiveType=="inline"?Math.round(this.element.find(".e-arrow-sans-down").outerWidth())+8:Math.round(this.element.find(".e-toolbar-res-arrow").outerWidth())+8),t=0,u=f.length;t<u;t++)f[t]!=null&&(r+=Math.round(f.eq(t).outerWidth()));this.element.css("width",Math.ceil(r))}else this.element.css("width",this.model.width)},_bindUnbindWidth:function(){this.model.width!="auto"?this._off(n(window),"resize",this._widthHandler):this._on(n(window),"resize",this._widthHandler)},_widthHandler:function(){this._setWidth(this.model.width)},_setOrientation:function(n){n!=t.Orientation.Vertical?(this.element.removeClass(this.model.cssClass).addClass("e-toolbarspan "+this.model.cssClass),this.itemsContainer.removeClass("e-ul e-vertical").addClass("e-ul e-horizontal")):(this.element.removeClass("e-toolbarspan "+this.model.cssClass).addClass(this.model.cssClass),this.itemsContainer.removeClass("e-ul e-horizontal").addClass("e-ul e-vertical"));this.items.addClass("e-tooltxt")},_reSizeHandler:function(){this._isResized&&this._liTemplte.children().length>0&&(n(this._liTemplte.children()).insertBefore(n(this.element).find("span.e-res-pos")),this._renderToolbarSeparator(),this.model.responsiveType!="inline"&&this._liTemplte.addClass("e-display-none"),this._contstatus=!1);this._elementWidth=typeof getComputedStyle=="function"?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1;this._liWidth=this._spanWidth;this._spantag.removeClass("e-display-block").addClass("e-display-none");for(var t=0;t<this.itemsContainer.length;t++)this._liWidth+=n(this.itemsContainer[t]).outerWidth(!0)+8,this._liWidth>this._elementWidth&&(this._spantag.hasClass("e-display-block")||this._spantag.removeClass("e-display-none").addClass("e-display-block"),this._spantag.addClass("e-res-pos"),this._liTemplte.addClass("e-normal"),this._liTemplte.append(this.itemsContainer[t]));this.model.responsiveType=="inline"&&(this._liTemplte.removeClass("e-normal"),this._liTemplte.css("width",this.element.width()));this._isResized=!0},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_getOffset:function(n){return t.util.getOffset(n)},_btnMouseClick:function(i){var u,f,r,h,o=1,a=this.element.outerWidth(),v=this.element.outerHeight(),s=n(this._liTemplte).outerWidth(),c=n(window).width(),e=n(window).scrollLeft(),l;n(i.currentTarget).hasClass("e-disable")||(l=this._getZindexPartial(),f=this._getOffset(this.element),r=this.model.enableRTL?f.left:f.left+a-s,h=f.top+v-o+2,r=r<e?e+o:r+s>c+e?c-s+e-o:r,this._contstatus?(this._liTemplte.addClass("e-display-none"),this.model.responsiveType=="inline"&&this._spantag.removeClass("e-active"),this._contstatus=!1,u={currentTarget:i.currentTarget,clientX:i.clientX,clientY:i.clientY,cancel:i.cancellable},this._trigger("overflowClose",u)):(this._liTemplte.removeClass("e-display-none"),this.model.responsiveType!="inline"&&this._liTemplte.css({top:h+"px",left:r+"px","z-index":l}),this.model.responsiveType=="inline"&&this._spantag.addClass("e-active"),this._contstatus=!0,u={currentTarget:i.currentTarget,clientX:i.clientX,clientY:i.clientY,cancel:i.cancellable},this._trigger("overflowOpen",u),this.model.responsiveType!="inline"&&this._on(t.getScrollableParents(this.element),"scroll",this._hidecontext),this.element.bind("click",n.proxy(this._hidecontext,this))),this._contstatus&&this.model.responsiveType!="inline"&&this._on(n(document),"mouseup",this._documentClick),this._contstatus||this._off(n(document),"mouseup",this._documentClick),this._removeListHover())},_hidecontext:function(i){n(i.target).is(n("#"+this.element[0].id+"_target"))||this.model.responsiveType=="inline"||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this.element.unbind("click",n.proxy(this._hidecontext,this)),this._off(t.getScrollableParents(this.element),"scroll",this._hidecontext),this._off(n(document),"mouseup",this._documentClick))},_documentClick:function(t){if(!n(t.target).is(n("#"+this.element[0].id+"_target"))&&!(n(t.target).closest("div#"+this.element[0].id+"_hiddenlist").length!=0||n(t.target).parents().hasClass("e-ddl-popup"))){this._liTemplte.addClass("e-display-none");this._contstatus=!1;var i={currentTarget:t.currentTarget,clientX:t.clientX,clientY:t.clientY,cancel:t.cancellable};this._trigger("overflowClose",i);this._off(n(document),"mouseup",this._documentClick)}},_setSkin:function(n){this.element.removeClass(this.model.cssClass).addClass(n);var t="e-toolbarTooltip "+n;this._subControlsSetModel("cssClass",t)},_subControlsSetModel:function(i,r){t.isNullOrUndefined(this._tipToolbar)||n(this.target).ejTooltip("option",i,r);t.isNullOrUndefined(this._tipRes)||n(this._liTemplte).ejTooltip("option",i,r)},_destroy:function(){this.element.html("");t.isNullOrUndefined(this._tipToolbar)||n(this.target).ejTooltip("destroy");t.isNullOrUndefined(this._tipRes)||n(this._liTemplte).ejTooltip("destroy");this._cloneElement.removeClass("e-toolbar e-js");this.element.replaceWith(this._cloneElement);this._liTemplte&&this._liTemplte.remove();this._unWireResizing()},_initialize:function(){this.element.attr({role:"toolbar",tabindex:"0"});var n=this.element.children().find("li");this._focusEnable=!0;this._renderControl();this._responsiveLayout();this._wireEvents()},_responsiveLayout:function(){if(this._roundedCorner(this.model.showRoundedCorner),this.model.isResponsive&&this.model.orientation=="horizontal"){t.isNullOrUndefined(this._liTemplte)||(t.isNullOrUndefined(this._tipRes)||this._tipRes.destroy(),n(this._liTemplte).remove());this._spantag=n("<span id='"+this.element[0].id+"_target' class='e-icon e-toolbar-res-arrow e-rel-position e-display-block' unselectable='on'><\/span>");this.model.responsiveType=="inline"&&this._spantag.removeClass("e-toolbar-res-arrow").addClass("e-inlinearrow e-arrow-sans-down");this._spantag.appendTo(this.element);this._liTemplte=n("<div id='"+this.element[0].id+"_hiddenlist' class='e-responsive-toolbar e-display-none e-abs-position "+n(this.element)[0].className+"'><\/div>");this.model.responsiveType=="inline"&&this._liTemplte.removeClass("e-abs-position").addClass("e-inline");this._spantag.appendTo(this.element);this._spanWidth=this._spantag.outerWidth(!0)+8;this.model.enableRTL&&this._liTemplte.addClass("e-rtl");this._isResized=!1;this._elementWidth=typeof getComputedStyle=="function"?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1;this._liWidth=this._spanWidth;for(var i=0;i<this.itemsContainer.length;i++)this._liWidth+=n(this.itemsContainer[i]).outerWidth(!0);this._liWidth>this._elementWidth?this._reSizeHandler():this._spantag.removeClass("e-display-block").addClass("e-display-none");this.model.responsiveType=="inline"?n(this.element[0]).append(this._liTemplte):n("body").append(this._liTemplte);this._renderTooltip(this.model.tooltipSettings)}this._on(n("#"+this.element[0].id+"_target"),"mousedown",this._btnMouseClick);this._wireResizing();this._controlVisibleOptions(this.model.hide);this._enableRTL(this.model.enableRTL);this._disabledItems=this.model.disabledItemIndices;this._controlStatus(this.model.enabled);this.model.disabledItemIndices=this._disabledItems;this.model.disabledItemIndices.length!=0&&this._disableItemByIndex(this.model.disabledItemIndices);this.model.enabledItemIndices.length!=0&&this._enableItemByIndex(this.model.enabledItemIndices);this._setWidth()},_removeResponsive:function(){n(this._spantag).remove();t.isNullOrUndefined(this._tipRes)||n(this._liTemplte).ejTooltip("destroy");var i=n(this._liTemplte).children("ul");n(this._liTemplte).detach();n(this.element).append(i);this.itemsContainer=this.element.children("ol,ul");this.items=this.itemsContainer.children("li");this._off(this.items,"mouseup");this._off(this.items,"mousedown");this._off(this.element,"mousedown");this._wireEvents();this._wireResizing();this._setWidth()},_controlVisibleOptions:function(n){n!=!1?this.hide():this.show()},_controlStatus:function(n){n!=!0?this.disable():this.enable()},_roundedCorner:function(n){n?(this.element.addClass("e-corner"),this._liTemplte&&this._liTemplte.addClass("e-corner")):(this.element.removeClass("e-corner"),this._liTemplte&&this._liTemplte.removeClass("e-corner"));this._subControlsSetModel("showRoundedCorner",n)},_generateTemplate:function(){var n=this,i;this.element.css("visibility","hidden");this.model.dataSource instanceof t.DataManager?(i=this.model.dataSource.executeQuery(this.model.query),i.done(function(t){n._generateGroup(t.result);n._initialize();n.element.css("visibility","")})):this.model.dataSource!=null?(n._generateGroup(n.model.dataSource),n.element.css("visibility","")):(n._generateGroup(n.model.Items),n.element.css("visibility",""))},_generateGroup:function(n){var r=this,f,u,t,e,i;for(this._localDataSource=n,f=-1,u=[],t=0;t<n.length;t++)if(this._isNewGroup(n[t][this.model.fields.group],u)){for(u[++f]=n[t][this.model.fields.group],e=-1,r.itemsSource=[],i=t;i<n.length;i++)n[t][this.model.fields.group]==n[i][this.model.fields.group]&&(r.itemsSource[++e]=n[i]);r.element.append(r._generateTagitems())}},_isNewGroup:function(n,t){if(!t)return!0;for(var i=0;i<t.length;i++)if(n==t[i])return!1;return!0},_renderControl:function(){this.element.addClass("e-widget e-box");this._renderToolbarItems();this._addAttr(this.model.htmlAttributes);this._setOrientation(this.model.orientation);this._renderToolbarSeparator();this._setHeight(this.model.height);this._bindUnbindWidth()},_renderToolbarItems:function(){this.target=this.element[0];this.itemsContainer=this.element.children("ol,ul");this.itemsContainer.children("ol,ul").remove();this.items=this.itemsContainer.children("li");for(var i=0;i<this.items.length;i++)t.isNullOrUndefined(n(this.items[i]).attr("title"))&&n(this.items[i]).attr("aria-label",this.items[i].id);this._liCount=this.items.length},_generateTagitems:function(){var i,n;for(i=this.itemsSource,this.ultag=t.buildTag("ul"),n=0;n<i.length;n++)this.ultag.append(this._generateLi(i[n]));return this.ultag},_generateLi:function(n){var i,u,r;return i=t.buildTag("li"),n[this.model.fields.id]?i.attr("id",n[this.model.fields.id]):n[this.model.fields.text]&&i.attr("id",n[this.model.fields.text]),n[this.model.fields.tooltipText]&&i.attr("title",n[this.model.fields.tooltipText]),n[this.model.fields.imageUrl]&&n[this.model.fields.imageUrl]!=""&&(u=t.buildTag("img.e-align","",{},{src:n[this.model.fields.imageUrl],alt:n[this.model.fields.text]}),n[this.model.fields.imageAttributes]&&this._setAttributes(n[this.model.fields.imageAttributes],u),i.append(u)),n[this.model.fields.spriteCssClass]&&n[this.model.fields.spriteCssClass]!=""&&(r=t.buildTag("div.e-align "+n[this.model.fields.spriteCssClass]+" e-spriteimg"),i.append(r)),n[this.model.fields.text]&&n[this.model.fields.text]!=""&&i.append(n[this.model.fields.text]),n[this.model.fields.htmlAttributes]&&this._setAttributes(n[this.model.fields.htmlAttributes],i),n[this.model.fields.template]&&(r=t.buildTag("div .e-align",n[this.model.fields.template]),i.append(r)),i},_setAttributes:function(t,i){for(var r in t)n(i).attr(r,t[r])},_renderToolbarSeparator:function(){var t,i;if(this.model.enableSeparator){for(t=0,i=this.itemsContainer.length-1;t<i;t++)n(this.itemsContainer[t]).addClass("e-separator");if(this.itemsContainer.length==1)for(t=0,i=this.itemsContainer[0].children.length;t<i;t++)t==i-1?n(this.itemsContainer[0].children[t]).removeClass("e-separator"):n(this.itemsContainer[0].children[t]).addClass("e-separator")}else this.itemsContainer.removeClass("e-separator").find(".e-separator").removeClass("e-separator");this._setWidth()},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.element.addClass(n):t=="disabled"&&n=="disabled"?i.disable():i.element.attr(t,n)})},_enableRTL:function(n){n?(this.element.addClass("e-rtl"),this.items.addClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.addClass("e-comnrtl"),this._liTemplte&&this._liTemplte.addClass("e-rtl")):(this.element.removeClass("e-rtl"),this.items.removeClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.removeClass("e-comnrtl"),this._liTemplte&&this._liTemplte.removeClass("e-rtl"));this.model.enableRTL=n;this._subControlsSetModel("enableRTL",n);this._renderToolbarSeparator()},_renderTooltip:function(i){var r=n.extend(!0,{},i);r.cssClass=t.isNullOrUndefined(r.cssClass)?"e-toolbarTooltip "+this.model.cssClass:r.cssClass+" e-toolbarTooltip "+this.model.cssClass;r.enableRTL=this.model.enableRTL;r.showRoundedCorner=this.model.showRoundedCorner;r.target="li[data-content], li[title]";r.beforeOpen=this._showTooltip;this._tipToolbar=n(this.target).ejTooltip(r).data("ejTooltip");this.model.isResponsive&&!t.isNullOrUndefined(this._liTemplte)&&(this._tipRes=n(this._liTemplte).ejTooltip(r).data("ejTooltip"))},_showTooltip:function(t){var i=n(t.event.currentTarget),r=t.event.target;i.hasClass("e-disable")&&(t.cancel=!0)},_hideTooltip:function(){t.isNullOrUndefined(this._tipToolbar)||(this._tipToolbar.hide(),this._tipToolbar._isHidden=!1);t.isNullOrUndefined(this._tipRes)||(this._tipRes.hide(),this._tipRes._isHidden=!1)},_addOverlay:function(i){for(var u,r=0;r<i.length;r++)n(i[r]).hasClass("e-disable")||(n(i[r]).addClass("e-disable"),u=t.buildTag("div.e-item-overlay"),n(i[r]).append(u))},_removeOverlay:function(t){for(var i=0;i<t.length;i++)n(t[i]).children(".e-item-overlay").remove()},disableItem:function(t){var i=n(t);i==null||i.length<=0||(i.hasClass("e-disable")||(i.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(i)),i.removeClass("e-hover e-active").attr("data-aria-selected",!1))},enableItem:function(t){var i=n(t);i==null||i.length<=0||(i.removeClass("e-disable").attr("aria-disabled",!1).removeClass("e-disable"),this._removeOverlay(i))},disableItemByID:function(n){var t=this.itemsContainer.find("li#"+n);t==null||t.length<=0||this.disableItem(t)},enableItemByID:function(n){var t=this.itemsContainer.find("li#"+n);t==null||t.length<=0||this.enableItem(t)},_enableItemByIndex:function(t){var r,i;if(!this.model.enabled)return!1;if(t.length!=0)for(i=0;i<t.length;i++)n.inArray(t[i],this.model.disabledItemIndices)>-1&&(r=n.inArray(t[i],this.model.disabledItemIndices),this.enableItem(this.items[this.model.disabledItemIndices[r]]),this.model.disabledItemIndices.splice(r,1))},_disableItemByIndex:function(t){var i;if(!this.model.enabled)return!1;for(this._disabledItems=this.model.disabledItemIndices,i=0;i<t.length;i++)n.inArray(t[i],this.model.disabledItemIndices)<0&&this._disabledItems.push(parseInt(t[i]));for(i=0;i<this.items.length;i++)n.inArray(i,this.model.disabledItemIndices)>-1&&this.disableItem(this.items[i]);this.model.disabledItemIndices=this._disabledItems},disable:function(){if(this.element.attr("aria-disabled")=="true")return!1;this.element.attr("aria-disabled",!0).removeAttr("aria-label");this._addOverlay(this.items);this.model.isResponsive&&this.model.orientation=="horizontal"&&this._spantag.addClass("e-disable");this.model.enabled=!1;this._subControlsSetModel("enabled",!1)},enable:function(){if(this.model.disabledItemIndices=[],this.element.attr("aria-disabled")=="false")return!1;this.items.removeClass("e-disable");this._removeOverlay(this.items);this.element.attr("aria-disabled",!1);this.model.isResponsive&&this.model.orientation=="horizontal"&&this._spantag.removeClass("e-disable");this.model.enabled=!0;this._subControlsSetModel("enabled",!0)},selectItem:function(t){var i=n(t);i==null||i.length<=0||(i.addClass("e-active").attr("data-aria-selected",!0),this._activeItem=n(this.items).index(i))},deselectItem:function(t){var i=n(t);i==null||i.length<=0||i.removeClass("e-active").attr("data-aria-selected",!1)},selectItemByID:function(n){var t=this.itemsContainer.find("li#"+n);t==null||t.length<=0||this.selectItem(t)},deselectItemByID:function(n){var t=this.itemsContainer.find("li#"+n);t==null||t.length<=0||this.deselectItem(t)},removeItem:function(t){var r,u,i;if(this.model.disabledItemIndices=[],r=n(t),u=0,r!=null&&!(r.length<=0))for(r.remove(),this.items=this.itemsContainer.children("li"),i=0;i<this.items.length;i++)n(this.items[i]).hasClass("e-disable")&&(this.model.disabledItemIndices[u++]=i)},removeItemByID:function(n){var t=this.itemsContainer.find("li#"+n);t==null||t.length<=0||this.removeItem(t)},_wireResizing:function(){this.model.isResponsive&&this.model.orientation=="horizontal"?n(window).bind("resize",n.proxy(this._reSizeHandler,this)):this._unWireResizing()},_unWireResizing:function(){n(window).unbind("resize",n.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this.element,"mousedown",this._clickEventHandler);this._on(this.element,"focus",this._focusElement);this._on(this.element,"blur",this._targetBlur);this._on(this.items,"mouseenter",this._onItemHover);this._on(this.items,"mouseleave",this._onItemLeave);this._on(this.items,"mousedown",this._onItemClick);this._on(this.items,"mouseup",this._onItemClick)},_onItemHover:function(t){var i=n(t.currentTarget),u=t.target,r;i.hasClass("e-disable")||(this.items.removeClass("e-hover"),i.addClass("e-hover"),r={currentTarget:i,target:u,status:this.model.enabled},this._trigger("itemHover",r))},_onItemClick:function(i){var r,u,f;if(n(i.currentTarget).hasClass("e-disable")||i.which!=1)return!1;r=i.currentTarget;u=i.target;t.isDevice()||this._hideTooltip();i.type=="mousedown"?(this._focusEnable=!1,n(r).addClass("e-active"),this._focusedItem=this._currentItem=n(r)):i.type=="mouseup"&&(this._removeSelection(),n(r).hasClass("e-disable")||(f={currentTarget:r,text:n(r).attr("data-content"),target:u,status:this.model.enabled,event:i},this._activeItem=this.model.isResponsive&&this._contstatus&&n(r).closest(".e-responsive-toolbar").length>0?this._liTemplte.find(".e-tooltxt").index(r):n(this.items).index(r),this._trigger("click",f)))},_onItemLeave:function(t){var i=n(t.currentTarget),u=t.target,r;i.hasClass("e-disable")||(this._removeSelection(),i.removeClass("e-hover"),r={currentTarget:i,target:u,status:this.model.enabled},this._trigger("itemLeave",r))},_onKeyPress:function(i){var u,r,f,e,o;if(u=i.keyCode?i.keyCode:i.which?i.which:i.charCode,this.model.isResponsive&&this._liTemplte.find(".e-tooltxt").length>0?(this._keyPressed=!0,this._items=this._contstatus?this._liTemplte.find(".e-tooltxt"):this.element.find(".e-tooltxt"),r=this._items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")):(this._keyPressed=!1,r=this.items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")),this._focusedItem?(f=this._focusedItem,this._focusedItem=null):f=r.filter(".e-hover"),i.type=="keydown")u==9&&i.shiftKey&&n(r[r.index(f)-1]).length>0?(i.preventDefault(),e=n(r[r.index(f)-1])):u==9&&n(r[r.index(f)+1]).length>0?(i.preventDefault(),e=n(r[r.index(f)+1])):(u==38||u==39)&&this.model.orientation!=t.Orientation.Vertical||(u==39||u==40)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),e=n(r[r.index(f)+1]).length>0?n(r[r.index(f)+1]):r.first()):(u==37||u==40)&&this.model.orientation!=t.Orientation.Vertical||(u==37||u==38)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),e=n(r[r.index(f)-1]).length>0?n(r[r.index(f)-1]):r.last()):u==33||u==36?(i.preventDefault(),e=r.first()):(u==34||u==35)&&(i.preventDefault(),e=r.last()),e&&(this._removeListHover(),e.addClass("e-hover"));else switch(u){case 13:case 32:if(i.preventDefault(),!f[0])break;o={currentTarget:f[0],target:n(f)[0],status:this.model.enabled,event:i};this._trigger("click",o);this._removeListHover();break;case 27:i.preventDefault();this.element.blur()}},_removeListHover:function(){n(this.items).removeClass("e-hover")},_addListHover:function(){var n=this._getActiveItem();n.hasClass("e-disable")||n.addClass("e-hover").focus()},_getActiveItem:function(){return this.model.isResponsive&&this._keyPressed?n(this._items[this._activeItem]):n(this.items[this._activeItem])},_targetBlur:function(n){n.preventDefault();this.element.focusout().removeClass("e-focus");this._removeListHover();this._off(this.element,"keyup",this._onKeyPress)._off(this.element,"keydown",this._onKeyPress);this._trigger("focusOut")},_clickEventHandler:function(){this._clicked=!0},_removeSelection:function(){this._currentItem&&this._currentItem.attr("data-aria-selected")!="true"&&this._currentItem.removeClass("e-active")},_focusElement:function(){if(!this.element.hasClass("e-focus")&&(this.element.addClass("e-focus"),this._on(this.element,"keyup",this._onKeyPress)._on(this.element,"keydown",this._onKeyPress),!this._focusEnable)){this._focusEnable=!0;return}this._removeListHover();this._activeItem=this._clicked?-1:0;(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&(this._activeItem=n(this.items).filter('li:not([class*="e-disable"])').first().index());this._addListHover()}});t.Toolbar.ResponsiveType={Popup:"popup",Inline:"inline"}}(jQuery,Syncfusion),function(n,t,i){t.widget({ejNumericTextbox:["ej.NumericTextbox","e-numerictextbox"],ejPercentageTextbox:["ej.PercentageTextbox","e-percentagetextbox"],ejCurrencyTextbox:["ej.CurrencyTextbox","e-currencytextbox"]},{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0,requireParser:!0},defaults:{width:"",height:"",value:null,name:null,htmlAttributes:{},minValue:-Number.MAX_VALUE,maxValue:Number.MAX_VALUE,incrementStep:1,decimalPlaces:0,validateOnType:!1,cssClass:"",enablePersistence:!1,showSpinButton:!0,locale:"en-US",enableStrictMode:!1,showRoundedCorner:!1,readOnly:!1,enabled:!0,enableRTL:!1,watermarkText:"Enter value",validationRules:null,validationMessage:null,groupSeparator:null,groupSize:null,positivePattern:null,currencySymbol:null,negativePattern:null,change:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{minValue:"number",maxValue:"number",incrementStep:"number",decimalPlaces:"number",showSpinButton:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",locale:"string",watermarkText:"string",cssClass:"string",readOnly:"boolean",enabled:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",validateOnType:"boolean",groupSeparator:"string"},observables:["value"],_setModel:function(n){var r=!1;for(var i in n)switch(i){case"value":t.isNullOrUndefined(n.minValue)&&t.isNullOrUndefined(n.maxValue)?(this._setValue(n[i],!0),n[i]=this.model.value):(this.model.value=this._checkNumValue(n[i]),this._localizedFormat(),this._raiseChangeEvent(!0),r=!0);break;case"enableRTL":this._enableRTL(n[i]);break;case"width":this._setWidth(n[i]);break;case"height":this._setHeight(n[i]);break;case"validationRules":this.model.validationRules!=null&&(this.element.rules("remove"),this.model.validationMessage=null);this.model.validationRules=n[i];this.model.validationRules!=null&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=n[i];this.model.validationRules!=null&&this.model.validationMessage!=null&&(this._initValidator(),this._setValidation());break;case"minValue":if(isNaN(n[i]))return;this.model.minValue=this.model.decimalPlaces==-1?n[i]:parseFloat(n[i].toFixed(this.model.decimalPlaces));r=!0;break;case"maxValue":if(isNaN(n[i]))return;this.model.maxValue=this.model.decimalPlaces==-1?n[i]:parseFloat(n[i].toFixed(this.model.decimalPlaces));r=!0;break;case"incrementStep":if(isNaN(n[i]))return;this.model.incrementStep=this.model.decimalPlaces==-1?n[i]:parseFloat(n[i].toFixed(this.model.decimalPlaces));break;case"enableStrictMode":this.model.enableStrictMode=n[i];r=!0;break;case"showSpinButton":this._showSpin(n[i]);break;case"showRoundedCorner":this._roundedCorner(n[i]);break;case"locale":this.model.decimalPlaces=t.isNullOrUndefined(this._options.decimalPlaces)&&this.model.decimalPlaces===this.culture.numberFormat.decimals?-1:this._options.decimalPlaces===-1?-1:this.model.decimalPlaces;this._setLocalize(n[i]);this._options.decimalPlaces=this.model.decimalPlaces;n[i]=this.model.locale;break;case"decimalPlaces":this._setDecimal(n[i]);t.isNullOrUndefined(this._options)&&(this._options={});this._options.decimalPlaces=n[i];break;case"cssClass":this._setSkin(n[i]);break;case"readOnly":this._setReadOnly(n[i]);break;case"enabled":n[i]?this.enable():this.disable();break;case"watermarkText":t.isNullOrUndefined(this._options)||(this._options=[]);this._options.watermarkText=this.model.watermarkText=n[i];this._localizedLabels.watermarkText=this.model.watermarkText;this._changeWatermark(n[i]);break;case"htmlAttributes":this._addAttr(n[i]);break;case"groupSeparator":this._checkSeparator(n[i]);n[i]=this.model.groupSeparator;break;case"positivePattern":case"negativePattern":case"groupSize":case"currencySymbol":this.model[i]=n[i];this._options[i]=n[i];this._initCustomValue();n[i]=this.model[i];this._setValue(this.model.value,!0)}r&&(this._validateMinMaxValue(!0,!0),n.value=this.model.value,n.maxValue=this.model.maxValue,n.minValue=this.model.minValue,this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),this.wrapper.attr({"aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value}));this._checkSeparator(this.model.groupSeparator);this.element.val(this._removeSeparator(this.model.value));this._updateSeparator();this._checkErrorClass()},_destroy:function(){this.wrapper&&(this.element.insertBefore(this.wrapper),this.wrapper.remove());this._isWatermark&&this.element.removeAttr("placeholder");this.element.val("").removeClass("e-input e-disable").empty();this.element.removeAttr("disabled aria-disabled");this.wrapper.removeAttr("aria-valuemin aria-valuemax aria-valuenow aria-live");this._cloneElement.attr("role")||this.element.removeAttr("role");this.element.css("display","block")},_init:function(n){if(this._cloneElement=this.element.clone(),this._options=t.isNullOrUndefined(n)?{}:n,this.element.is("input")&&(this.element.is("input[type=text]")||this.element.is("input[type=number]")||!this.element.attr("type")))this.model.decimalPlaces>0&&(this.element[0].type="text"),this._isWatermark="placeholder"in document.createElement("input"),this.model.locale=t.preferredCulture(this.model.locale).name=="en"?"en-US":t.preferredCulture(this.model.locale).name,this._localizedLabels=this._getLocalizedLabels(),this.culture=t.preferredCulture(this.model.locale),this._browsername=t.browserInfo().name,this._initCustomValue(),this._prevSeparator=null,this._checkSeparator(this.model.groupSeparator),this._checkAttribute(),this._renderControl(),this._setValues(),this._wireEvents(),this._initObjects(),this._addAttr(this.model.htmlAttributes),this.model.validationRules!=null&&(this._initValidator(),this._setValidation()),this._updateSeparator(),n&&n.value!=i&&this._trigger("_change",{value:this.model.value});else return this._destroy(),!1},_checkAttribute:function(){for(var u=["min","max","step","readonly","disabled","placeholder"],f=["minValue","maxValue","incrementStep","readOnly","enabled","watermarkText"],i,n,r=0;r<u.length;r++)i=this.element.attr(u[r]),n=f[r],t.isNullOrUndefined(i)||t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options[n])||(n=="watermarkText"?this._options[n]=i:this.model[n]=n!="disabled"&&n!="readOnly"?t.parseFloat(i,this.model.locale):n=="readOnly"?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_addAttr:function(i){var r=this;n.map(i,function(n,i){var u=i.toLowerCase();u=="class"?r.wrapper.addClass(n):u=="accesskey"?r._hiddenInput.attr(i,n):u=="disabled"&&n=="disabled"?r.disable():u=="readonly"&&n=="readOnly"?r._setReadOnly(!0):u=="tabindex"?(r._hiddenInput.attr(i,n),r.element.attr(i,n)):u=="style"||u=="id"?r.wrapper.attr(i,n):t.isValidAttr(r.element[0],i)?r.element.attr(i,n):r.wrapper.attr(i,n)})},_setValues:function(){this._id=this.element[0].id;this._textBox=this._hiddenInput[0];this._error=!1;this._timeout=null;this.isValidState=!0;this._allowkeyboard=!0;this._validateOnType=!1;this._focused=!1;this._startValue=0;this.sfType==="ej.CurrencyTextbox"&&this.model.minValue==-Number.MAX_VALUE&&(this.model.minValue=0);t.isNullOrUndefined(this.model.decimalPlaces)&&(this.model.decimalPlaces=this.sfType==="ej.CurrencyTextbox"?t.preferredCulture(this.model.locale).numberFormat.currency.decimals:t.preferredCulture(this.model.locale).numberFormat.decimals);this.model.decimalPlaces>=0&&(this.model.minValue=parseFloat(this.model.minValue.toFixed(this.model.decimalPlaces)),this.model.maxValue=parseFloat(this.model.maxValue.toFixed(this.model.decimalPlaces)));this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue);t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText);this._localizedLabelToModel();this._localizedFormat();this._validateMinMaxValue(!0);this._updateSymbol(this.model.locale);var n;t.isNullOrUndefined(this.model.value)?(n=this.model.value,this.wrapper.removeClass("e-valid")):(n=this.model.value.toString().indexOf("e")==-1?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.wrapper.addClass("e-valid"));this.element.val(n)},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var u=this.model.validationRules,r,i,f,e;this.element.rules("add",u);r=this.element.closest("form").data("validator");r=r?r:this.element.closest("form").validate();name=this.element.attr("name");r.settings.messages[name]={};for(i in u)if(f=null,!t.isNullOrUndefined(u[i])){if(t.isNullOrUndefined(u.messages&&u.messages[i])){r.settings.messages[name][i]=n.validator.messages[i];for(e in this.model.validationMessage)i==e?f=this.model.validationMessage[i]:""}else f=u.messages[i];r.settings.messages[name][i]=f!=null?f:n.validator.messages[i]}},_renderControl:function(){this.wrapper=t.buildTag("span.e-widget e-pinch");this.innerWrap=t.buildTag("span.e-in-wrap e-box ");this.wrapper.attr("style",this.element.attr("style"));this.sfType==="ej.NumericTextbox"?this.wrapper.addClass("e-numeric"):this.sfType==="ej.PercentageTextbox"?this.wrapper.addClass("e-percent"):this.sfType==="ej.CurrencyTextbox"&&this.wrapper.addClass("e-currency");this.wrapper.append(this.innerWrap).insertAfter(this.element);this.innerWrap.append(this.element);this._hiddenInput=t.buildTag("input","",{},{type:"text"}).insertBefore(this.element);this._hiddenInput.attr("data-role","none");this._hiddenInput[0].tabIndex=this.element[0].tabIndex;this._hiddenInput.attr("accesskey",this.element[0].accessKey);this.element[0].accessKey="";this._hiddenInput.css("display","block");this.element.css("display","none");this._isWatermark||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this._localizedLabels.watermarkText),this._hiddenSpan.css("display","none"),this._on(this._hiddenSpan,"mousedown",this._focusIn),this._on(this._hiddenSpan,"mousewheel",this._mouseWheel),this._on(this._hiddenSpan,"DOMMouseScroll",this._mouseWheel));this.model.name=this.element.attr("name")!=null?this.element.attr("name"):this.model.name!=null?this.model.name:this.element[0].id;this.element.attr("name")==null?this.element.attr("name",this.model.name):"";this.element.addClass("e-input");t.isNullOrUndefined(this.model.value)&&this.element[0].value!=""?(t.preferredCulture(this.model.locale).numberFormat[","]=="."&&(this.element[0].value=this.element[0].value.replace(".",",")),this.model.value=this._checkNumValue(this.element[0].value)):(typeof this.model.value=="string"&&t.preferredCulture(this.model.locale).numberFormat[","]=="."&&(this.model.value=this.model.value.replace(".",",")),this.model.value=this._checkNumValue(this.model.value));this._hiddenInput.attr({value:this.model.value}).addClass("e-input");this.wrapper.attr({role:"spinbutton","aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value});this.element.attr({"aria-live":"assertive",value:this.model.value});var i=n('<span class="e-select"><span class="e-spin e-spin-up " role="button" aria-label="Increase Value" unselectable="on" /><span class="e-spin e-spin-down" role="button" aria-label="Decrease Value" unselectable="on" /><\/span>');i.find(".e-spin-up").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-up").attr({role:"presentation",unselectable:"on"}));i.find(".e-spin-down").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-down").attr({role:"presentation",unselectable:"on"}));this.innerWrap.append(i);this.spin=this.wrapper.find(".e-select");this.spinUp=this.wrapper.find(".e-spin-up");this.spinDown=this.wrapper.find(".e-spin-down");this._setWidth(this.model.width);this._setHeight(this.model.height);this.model.cssClass!=""&&this._setSkin(this.model.cssClass);this._showSpin(this.model.showSpinButton);this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner);this.model.enableRTL&&this._enableRTL(this.model.enableRTL);this.model.readOnly&&this._setReadOnly(this.model.readOnly);this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this.enable():this.disable()},_initObjects:function(){this._preVal=this.model.value;this.model.value===null?(this.isValidState=!0,this._hiddenInput.val(null)):(this.model.value<this.model.minValue||this.model.value>this.model.maxValue)&&(this.isValidState=!1);this._checkErrorClass();this._setWaterMark()},_showSpin:function(n){n?(this.spin&&(this.spin.show(),this.innerWrap.addClass("e-padding")),this._spinEvents("_on")):(this.spin&&(this.spin.hide(),this.innerWrap.removeClass("e-padding")),this._spinEvents("_off"))},_roundedCorner:function(n){n&&!this.innerWrap.hasClass("e-corner")?this.innerWrap.addClass("e-corner"):this.innerWrap.hasClass("e-corner")&&this.innerWrap.removeClass("e-corner")},_enableRTL:function(n){n?this.spin?this.wrapper.addClass("e-rtl"):this.element.addClass("e-rtl"):this.spin?this.wrapper.removeClass("e-rtl"):this.element.removeClass("e-rtl")},_setWidth:function(n){n!=""?this.wrapper.width(n):this.model.width=this.wrapper.outerWidth()},_setHeight:function(n){n!=""?this.wrapper.height(n):this.model.height=this.wrapper.outerHeight()},_setSkin:function(n){this.wrapper.removeClass(this.model.cssClass);this.wrapper.addClass(n)},_setValue:function(n,t){this._isWatermark||this._hiddenSpan.css("display","none");this.model.value=this._checkNumValue(n);this._validateMinMaxValue(!1);this._checkErrorClass();this._localizedFormat();this._raiseChangeEvent(t);this._setWaterMark()},_setLocalize:function(n){var i=t.preferredCulture(this.model.locale).numberFormat[","];this.model.locale=t.preferredCulture(n).name=="en"?"en-US":t.preferredCulture(n).name;this.model.groupSeparator=t.isNullOrUndefined(this._options.groupSeparator)&&i===this.model.groupSeparator?t.preferredCulture(this.model.locale).numberFormat[","]:this.model.groupSeparator;this._localizedLabels=this._getLocalizedLabels();t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText);this._localizedLabelToModel();this.culture=t.preferredCulture(this.model.locale);this._initCustomValue();this._updateSymbol(this.model.locale);this._localizedFormat();this._changeWatermark(this.model.watermarkText);value=t.isNullOrUndefined(this.model.value)?this.model.value:this.model.value.toString().indexOf("e")==-1?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue;this.element.val(value)},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText},_updateSymbol:function(n){this._percentSymbol=t.preferredCulture(n).numberFormat.percent.symbol;this._currencySymbol=t.preferredCulture(n).numberFormat.currency.symbol},_setDecimal:function(n){this.model.decimalPlaces=n;this._localizedFormat()},_validateMinMaxValue:function(n,i){var u=!1,r;this.model.minValue>this.model.maxValue&&(this.model.minValue=this.model.maxValue);!t.isNullOrUndefined(this.model.value)&&this.model.minValue>this.model.value?(this.model.enableStrictMode!=!0?(this.isValidState=!0,this._startValue=this.model.value=this.model.minValue):this.isValidState=!1,u=!0):!t.isNullOrUndefined(this.model.value)&&this.model.maxValue<this.model.value?(this.model.enableStrictMode!=!0?(this.isValidState=!0,this.model.value=this.model.maxValue):this.isValidState=!1,u=!0):this.isValidState=!0;this.model.minValue==this.model.maxValue&&(this._startValue=this.model.minValue);u&&n&&(r=this._formatValue(this.model.value,"n",!0),this._hiddenInput.val(r),r=t.isNullOrUndefined(this.model.value)?this.model.value:this.model.value.toString().indexOf("e")==-1?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(r),this._localizedFormat(),this._raiseChangeEvent(i))},_convertToExponetial:function(n){var e="",u,i,r=n<0?!0:!1,f;for(n=n.toString(),i=t.preferredCulture(this.model.locale).numberFormat,n=n.replace(".",i["."]),unformattedValue=n,f=null,this.sfType==="ej.NumericTextbox"?(u=r?i.pattern[0]:t.isNullOrUndefined(i.pattern[1])?"n":i.pattern[1],n=r?n.replace("-",""):n,symbol=""):this.sfType==="ej.PercentageTextbox"?(u=r?i.percent.pattern[0]:i.percent.pattern[1],n=r?n.replace("-",""):n,symbol=i.percent.symbol):this.sfType==="ej.CurrencyTextbox"&&(u=r?i.currency.pattern[0]:i.currency.pattern[1],n=r?n.replace("-",""):n,symbol=i.currency.symbol),idx=0,f=u.length;idx<f;idx++)ch=u.charAt(idx),e+=ch==="n"?n:ch==="$"||ch==="%"?symbol:ch;return{formattedValue:e,unformattedValue:unformattedValue}},_localizedFormat:function(){var i,r,n,u;if(this.culture=t.preferredCulture(this.model.locale),this._decimalSep=t.preferredCulture(this.model.locale).numberFormat["."],t.isNullOrUndefined(this.model.value)){this._textBox.value="";return}this.model.value.toString().indexOf("e")==-1?(this._textBox.value=this._removeSeparator(this.model.value),this._focused||this._textBox.value==""?(u=this._convertToExponetial(this.model.value),this._textBox.value=u.unformattedValue,this._focused||this._textBox.value==""||(this._textBox.value=u.formattedValue)):(this._textBox.value=this._formatValue(this.model.value,"n",!0),this.sfType==="ej.PercentageTextbox"?this._appendPercentSymbol(this._textBox.value):this.sfType==="ej.CurrencyTextbox"&&this._appendCurrencySymbol(this._textBox.value),i=this.sfType==="ej.CurrencyTextbox"?this._textBox.value.indexOf(this._currencySymbol):this.sfType==="ej.PercentageTextbox"?this._textBox.value.indexOf(this._percentSymbol):-1,this.model.decimalPlaces==-1&&(this._textBox.value=this._textBox.value.substr(0,this._textBox.value.lastIndexOf(this._decimalSep)),i>1&&(t.isNullOrUndefined(this._afterDec)||this._afterDec=="")&&(this.sfType==="ej.CurrencyTextbox"&&(this._textBox.value=this._textBox.value+" "+this._currencySymbol),this.sfType==="ej.PercentageTextbox"&&(this._textBox.value=this._textBox.value+" "+this._percentSymbol)),this.model.decimalPlaces!=-1||t.isNullOrUndefined(this._afterDec)||this._afterDec==""||(r=this._textBox.value.lastIndexOf(this._decimalSep),r>=0&&(this._textBox.value=this._textBox.value.substr(0,r)),n=this._afterDec,i>1&&(this.sfType==="ej.CurrencyTextbox"&&(n=n+" "+this._currencySymbol),this.sfType==="ej.PercentageTextbox"&&(n=n+" "+this._percentSymbol)),this._textBox.value=this._textBox.value+this._decimalSep+n)))):this._textBox.value=this.model.value.toString()},_checkNumValue:function(n){return typeof n=="string"&&(n=this._changeSeparator?this._replaceSeparator(n,this.model.groupSeparator,t.preferredCulture(this.model.locale).numberFormat[","]):n),typeof n!="string"||isNaN(this._parseValue(n))?typeof n!="number"||isNaN(n)?null:n:(n=this._parseValue(n),parseFloat(n))},_setReadOnly:function(n){this.model.readOnly=n;n?(this.element.attr("readonly",!0),this._hiddenInput.attr("readonly",!0)):(this.element.prop("readonly",!1),this._hiddenInput.prop("readonly",!1))},_setWaterMark:function(){this._localizedLabels.watermarkText!=null&&this._textBox.value===""&&n.trim(this._hiddenInput.val())===""&&(this._isWatermark?(this._hiddenInput.attr("placeholder",this._localizedLabels.watermarkText),this.element.attr("placeholder",this._localizedLabels.watermarkText)):this._hiddenSpan.css("display","block").text(this._localizedLabels.watermarkText))},_changeWatermark:function(n){if(!this.model.enabled)return!1;this._isWatermark?(this._hiddenInput.attr("placeholder",n),this.element.attr("placeholder",n)):this._hiddenSpan.text(n)},_setSelectionRange:function(n,t){function f(i){i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",n);i.select()}var i=this._textBox,r,u;try{i.setSelectionRange?this._browsername=="edge"?setTimeout(function(){i.setSelectionRange(n,t)}):i.setSelectionRange(n,t):i.createTextRange&&(r=i.createTextRange(),f(r))}catch(e){u=this;window.setTimeout(function(){if(document.body.focus(),u._textBox.select(),document.selection){var n=document.selection.createRange();f(n)}},1)}},_getSelection:function(n){if(this._textBox.type!="number"){var t=null;return document.selection?(t=document.selection.createRange(),t.text===""?t.text:this._removeFormats(t.text)):n==null?this.model.value:this._removeFormats(n.substring(this._textBox.selectionStart,this._textBox.selectionEnd))}},_caretPosition:function(){var n=this._textBox,t=0,i;if(n.type!="number")return document.selection?(n.focus(),i=document.selection.createRange(),i.moveStart("character",-n.value.length),t=i.text.length):(n.selectionStart||n.selectionStart=="0")&&(t=n.selectionEnd),t},_appendPercentSymbol:function(n){this._percentSymbol&&(n=n.replace(this._percentSymbol,""));n.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(n)/100,"p",!0));this._percentSymbol=t.preferredCulture(this.model.locale).numberFormat.percent.symbol},_appendCurrencySymbol:function(n){this._currencySymbol&&(n=n.replace(this._currencySymbol,""));n.indexOf(t.preferredCulture(this.model.locale).numberFormat.currency.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(n),"c",!0));this._currencySymbol=t.preferredCulture(this.model.locale).numberFormat.currency.symbol},_removeFormats:function(n){var i=t.preferredCulture(this.model.locale).numberFormat[","];return n!=null?i=="."?n.toString().replace(/["."]/g,""):n.toString().match(new RegExp(i,"g"))?n.toString().replace(new RegExp(i,"g"),""):n:null},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},enable:function(){this.model.enabled=!0;this.element[0].disabled=!1;this.element.prop("disabled",!1);this._hiddenInput.prop("disabled",!1);this.element.removeClass("e-disable").attr({"aria-disabled":!1});this._hiddenInput.removeClass("e-disable").attr({"aria-disabled":!1});this.wrapper.find(".e-select").removeClass("e-disable").attr({"aria-disabled":!1});this.wrapper.find(".e-select span.e-icon.e-arrow").removeClass("e-disable");this.wrapper.removeClass("e-disable-wrap")},disable:function(){this.model.enabled=!1;this.element[0].disabled=!0;this.element.attr("disabled","disabled");this._hiddenInput.attr("disabled","disabled");this.element.addClass("e-disable").attr({"aria-disabled":!0});this._hiddenInput.addClass("e-disable").attr({"aria-disabled":!0});this.wrapper.find(".e-select").addClass("e-disable").attr({"aria-disabled":!0});this.wrapper.find(".e-select span.e-icon.e-arrow").addClass("e-disable");this.wrapper.addClass("e-disable-wrap")},getValue:function(){return this.model.value},_wireEvents:function(){this._on(this._hiddenInput,"focus",this._focusIn);this._on(this.element,"paste",this._paste);this._on(this.element,"blur",this._focusOut);this._on(this.element,"keydown",this._keyDown);this._on(this.element,"keypress",this._keyPress);this._on(this.element,"mousewheel",this._mouseWheel);this._on(this.element,"DOMMouseScroll",this._mouseWheel)},_spinEvents:function(n){this[n](this.spinUp,"mousedown mouseup touchstart touchend",this._spinUpClick);this[n](this.spinDown,"mousedown mouseup touchstart touchend",this._spinDownClick)},_isIE8:function(){var n=!1,i=t.browserInfo();return i.name=="msie"&&i.version=="8.0"&&(n=!0),n},_spinUpClick:function(t){var i=!1,r;(t.button?i=this._isIE8()?t.button!=1:t.button!=0:t.which&&(i=t.which==3),i)||(r=this,t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly)&&(this.wrapper.find(".e-animate").removeClass("e-animate"),this.spinUp.addClass("e-animate"),this._on(this.spinUp,"mouseleave",this._mouseUpClick),this.spinUp.addClass("e-active"),r=this,t.type=="mouseup"||t.type=="touchend"?(this._updateInputField("increment"),this.spinUp.removeClass("e-active"),this._off(n(document),"mouseup",this._mouseUpClick)):(t.type=="mousedown"||t.type=="touchstart")&&(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){r._updateInputField("increment")},150),this._on(n(document),"mouseup",this._mouseUpClick)))},_spinDownClick:function(t){var i=!1,r;(t.button?i=this._isIE8()?t.button!=1:t.button!=0:t.which&&(i=t.which==3),i)||(r=this,t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly)&&(this.wrapper.find(".e-animate").removeClass("e-animate"),this.spinDown.addClass("e-animate"),this._on(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.addClass("e-active"),t.type=="mouseup"||t.type=="touchend"?(this._updateInputField("decrement"),this.spinDown.removeClass("e-active"),this._off(n(document),"mouseup",this._mouseUpClick)):(t.type=="mousedown"||t.type=="touchstart")&&(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){r._updateInputField("decrement")},150),this._on(n(document),"mouseup",this._mouseUpClick)))},_mouseUpClick:function(n){n.stopPropagation();clearTimeout(this._timeout);this._off(this.spinUp,"mouseleave",this._mouseUpClick);this._off(this.spinDown,"mouseleave",this._mouseUpClick);this.spinDown.removeClass("e-active");this.spinUp.removeClass("e-active")},_mouseWheel:function(n){if(n.preventDefault(),this._focused||this.element[0].focus(),this.model.enabled&&!this.model.readOnly){var t,i=n.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3);t>0?this._updateInputField("increment"):t<0&&this._updateInputField("decrement");this._cancelEvent(n)}},_numberValue:function(){var n=this._textBox.value;return this.sfType==="ej.NumericTextbox"&&(n=this._formatValue(this.model.value,"n",!0)),this.sfType==="ej.PercentageTextbox"?n=this._formatValue(this.model.value,"n",!0):this.sfType==="ej.CurrencyTextbox"&&(n=this._formatValue(this.model.value,"n",!0)),typeof n=="string"&&!isNaN(this._parseValue(n))?n:""},_formatValue:function(n,i,r){r&&this._updateCultureInfo();var n=t.format(n,i+this.model.decimalPlaces,this.model.locale);return r&&this._restCultureInfo(),n},_parseValue:function(n){this._updateCultureInfo();var n=t.parseFloat(n,this.model.locale);return this._restCultureInfo(),n},_initCustomValue:function(){var n,i=this.sfType=="ej.PercentageTextbox"?"percent":this.sfType=="ej.CurrencyTextbox"?"currency":"numeric";switch(i){case"percent":case"currency":n=this.culture.numberFormat[i];t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=n.pattern[0]);t.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=n.pattern[1]);t.isNullOrUndefined(this._options.currencySymbol)&&i=="currency"&&(this.model.currencySymbol=n.symbol);t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=n.groupSizes[0]);break;case"numeric":n=this.culture.numberFormat;t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=n.pattern[0]);t.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=t.isNullOrUndefined(n.pattern[1])?"n":n.pattern[1]);t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=n.groupSizes[0])}},_updateCultureInfo:function(){var n,t=this.sfType=="ej.PercentageTextbox"?"percent":this.sfType=="ej.CurrencyTextbox"?"currency":"numeric";n=t=="numeric"?this.culture.numberFormat:this.culture.numberFormat[t];this._oldNegativePattern=n.pattern[0];this._oldGroupSize=n.groupSizes[0];n.pattern[0]=this.model.negativePattern;n.groupSizes[0]=this.model.groupSize;this._oldPositivePattern=n.pattern[1];n.pattern[1]=this.model.positivePattern;t=="currency"&&(this._oldcurrencySymbol=n.symbol,n.symbol=this.model.currencySymbol)},_restCultureInfo:function(){var n,t=this.sfType=="ej.PercentageTextbox"?"percent":this.sfType=="ej.CurrencyTextbox"?"currency":"numeric";n=t=="numeric"?this.culture.numberFormat:this.culture.numberFormat[t];n.pattern[0]=this._oldNegativePattern;n.groupSizes[0]=this._oldGroupSize;n.pattern[1]=this._oldPositivePattern;t=="currency"&&(n.symbol=this._oldcurrencySymbol)},_toggleTextbox:function(n){var t=this;t._hiddenInput.toggle(n);t.element.toggle(!n)},_paste:function(n){var i,r;window.clipboardData&&window.clipboardData.getData?i=window.clipboardData.getData("Text"):n.originalEvent.clipboardData&&n.originalEvent.clipboardData.getData&&(i=n.originalEvent.clipboardData.getData("text/plain"));r=t.parseFloat(i,this.model.locale);isNaN(r)&&i&&this._cancelEvent(n)},_focusIn:function(){if(!this.model.readOnly){if(this._focused=!0,t.isNullOrUndefined(this.model.value)||this.element.val(this._removeSeparator(this.model.value)),this._toggleTextbox(!1),this._textBox=this.element[0],this.element[0].focus(),this._preVal=this.model.value,this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),!this._error){if(this._textBox.value!=""){var n=this._formatValue(this._textBox.value,"n",!0);this.model.decimalPlaces==-1&&(this._separateValue(this._textBox.value.toString(),!0,!0),t.isNullOrUndefined(this._afterDec)||this._afterDec==""||(n=this._beforeDec+this._decimalSep+this._afterDec));this._textBox.value=n;this._hiddenInput.val(n)}this._setSelectionRange(0,this._textBox.value.length)}this._trigger("focusIn",{value:this.model.value})}},_separateValue:function(n,t,i){var r=t?n.lastIndexOf(this._decimalSep):n.lastIndexOf(".");this._beforeDec=r>=0?n.substr(0,r):n;!t&&i&&(this._afterDec=r>=0?n.substr(r+1):"")},_focusOut:function(){var n;this._focused=!1;this.wrapper.removeClass("e-focus");this._separateValue(this._textBox.value,!1,!0);this._error||(this._textBox.value!=""?(n=t.parseFloat(this._textBox.value,this.model.locale),n<this.model.minValue?this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.minValue,"n",!1):n>this.model.maxValue&&(this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.maxValue,"n",!1)),this.model.value=this.model.decimalPlaces==-1&&!t.isNullOrUndefined(this._afterDec)&&this._textBox.value.lastIndexOf(this._decimalSep)==-1&&n.toString().indexOf("e")==-1?t.parseFloat(this._textBox.value+this._decimalSep+this._afterDec,this.model.locale):t.parseFloat(this._textBox.value,this.model.locale),isNaN(this.model.value)&&!this.model.value&&(this.model.value=null,this.isValidState=!1),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0],this._localizedFormat(),this._checkErrorClass()):(n=this._textBox.value==""?null:this._textBox.value,this.model.value=n,this._hiddenInput.val(n),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0]),this.model.value===null||this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue?this.isValidState=!0:this.model.enableStrictMode&&(this.isValidState=!1),this._raiseChangeEvent(),this._setWaterMark(),n=t.isNullOrUndefined(this.model.value)?this.model.value:this.model.value.toString().indexOf("e")==-1?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(n),this._updateSeparator(),this._trigger("focusOut",{value:this.model.value}));this._checkErrorClass();this._afterDec=""},_cancelEvent:function(n){return n.cancelBubble=!0,n.returnValue=!1,n.stopPropagation(),n.preventDefault(),!1},_updateInputField:function(i){var f,e,u,r;this.isValidState=!0;this._focused||n(this._hiddenInput[0]).focus();f=this.model.incrementStep;e=this.model.value;this._textBox.value===""?(this._textBox.value=this._formatValue(this._startValue,"n",!0),f=0):this._textBox.value.indexOf(" ")>=0&&(this._textBox.value=this._textBox.value.replace(" ",""));this.sfType==="ej.PercentageTextbox"||this.sfType==="ej.CurrencyTextbox"?(u=this._textBox.value,r=u,u.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)>-1&&(r=u.substring(0,u.length-1)),this.model.value=this._parseValue(r)):this.sfType=="ej.NumericTextbox"&&(this.model.value=t.parseFloat(this._textBox.value,this.model.locale));isNaN(this.model.value)&&!this.model.value&&(this.model.value=this._startValue);this.model.value>=this.model.minValue&&this.model.value>this.model.maxValue?(this.model.value=this.model.maxValue,this._setValue(this.model.value)):this.model.value<this.model.minValue&&this.model.value<=this.model.maxValue?(this.model.value=this.model.minValue,this._setValue(this.model.value)):this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue&&(r=i=="increment"?this.model.value+f:this.model.value-f,this.model.decimalPlaces==-1&&(r=this.model.value.toString().indexOf("e")==-1?parseFloat(r.toFixed(this._afterDec.length)):parseFloat(r)),r>=this.model.minValue&&r<=this.model.maxValue&&this._setValue(r));this._checkErrorClass()},_validateDecimal:function(n){var i=String.fromCharCode(n.keyCode);return(i=n.keyCode==188?",":n.keyCode==190?".":n.keyCode==110?t.preferredCulture(this.model.locale).numberFormat["."]:i,t.preferredCulture(this.model.locale).numberFormat["."].charCodeAt(0)==i.charCodeAt(0))?!0:!1},_allowKeyCodes:function(n){for(var i=[38,40,35,36,109,189,46,8,127,37,39,190,9,13,16,17,18,20,110,173,86,88,67],t=0;t<i.length;t++)if(n.keyCode==i[t]||this._validateDecimal(n)&&this.model.decimalPlaces!=0)return!0;return!1},_raiseChangeEvent:function(n){var r=this.model.value,i;this._checkNumValue(this._preVal)!==this._checkNumValue(r)&&(this._preVal=r,this.model.value=this.model.decimalPlaces==-1&&!t.isNullOrUndefined(this.model.value)?parseFloat(this.model.value):this._checkNumValue(this._formatValue(this._preVal,"n",!1)),this._updateHiddenField(),t.isNullOrUndefined(this.model.value)?(i=this.model.value,this.wrapper.removeClass("e-valid")):(i=this.model.value.toString().indexOf("e")==-1?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.model.decimalPlaces==-1&&(this._separateValue(this.model.value.toString(),!1,!0),t.isNullOrUndefined(this._afterDec)||this._afterDec==""||(i=this._beforeDec+this._decimalSep+this._afterDec)),this.wrapper.addClass("e-valid")),this.element.val(i),this.wrapper.attr("aria-valuenow",i),this._updateSeparator(),this.element.trigger("change"),this._trigger("_change",{value:this.model.value,isInteraction:!n}),this._trigger("change",{value:this.model.value,isInteraction:!n}))},_updateHiddenField:function(){var n=this._textBox;this._textBox=this._hiddenInput[0];this._localizedFormat();this._textBox=n},_removeSeparator:function(n){if(!t.isNullOrUndefined(n)){var i,r;return this.model.decimalPlaces==-1&&this._separateValue(n.toString(),!1,!0),n.toString().indexOf("e")==-1&&(n=this._checkNumValue(this._formatValue(n,"n",!1))),i=n.toString(),r=t.preferredCulture(this.model.locale).numberFormat,i.replace(".",r["."])}},_updateSeparator:function(){var n,r,u,f,i;this._changeSeparator&&this.model.value&&(this.sfType==="ej.NumericTextbox"?n=this._formatValue(this.model.value,"n",!0):this.sfType==="ej.PercentageTextbox"?n=this._formatValue(this.model.value/100,"p",!0):this.sfType==="ej.CurrencyTextbox"&&(n=this._formatValue(this.model.value,"c",!0)),this.model.decimalPlaces==-1&&(r=n.lastIndexOf(this._decimalSep),u=n.substr(r+1),this._separateValue(n,!0,!1),f=this.sfType==="ej.CurrencyTextbox"?n.indexOf(this._currencySymbol):this.sfType==="ej.PercentageTextbox"?this._textBox.value.indexOf(this._percentSymbol):-1,i=this._afterDec,f>1&&(this.sfType==="ej.CurrencyTextbox"&&(i=i+" "+this._currencySymbol),this.sfType==="ej.PercentageTextbox"&&(i=i+" "+this._percentSymbol)),t.isNullOrUndefined(this._afterDec)||this._afterDec==""||(n=this._beforeDec+this._decimalSep+i),t.isNullOrUndefined(this._afterDec)||this._afterDec!=""||(n=this._beforeDec+this._decimalSep+u)),this._hiddenInput.val(this._replaceSeparator(n,t.preferredCulture(this.model.locale).numberFormat[","],this.model.groupSeparator)))},_replaceSeparator:function(n,i,r){var u,f,o,e;return(this._decimalSep=t.preferredCulture(this.model.locale).numberFormat["."],u=i===""?new RegExp("\\s","g"):new RegExp("\\"+i,"g"),this.model.groupSeparator==t.preferredCulture(this.model.locale).numberFormat["."])?(f=this.model.decimalPlaces,this.model.decimalPlaces==-1&&(o=n.lastIndexOf(this._decimalSep),f=n.substr(o+1).length),e=n.length-f-1,n.substring(0,e).replace(u,r)+n.substring(e,n.length)):n.replace(u,r)},_checkSeparator:function(n){this.model.groupSeparator=n!=null?this._validateSeparator(n):t.preferredCulture(this.model.locale).numberFormat[","];this._changeSeparator=t.preferredCulture(this.model.locale).numberFormat[","]!=this.model.groupSeparator?!0:!1;this._prevSeparator=this.model.groupSeparator},_validateSeparator:function(n){var i=n.toString(),r=new RegExp("[a-zA-Z0-9]");return i=i.length>1?i[0]:i,r.test(i)?this._prevSeparator!=null?this._prevSeparator:t.preferredCulture(this.model.locale).numberFormat[","]:i},_keyPress:function(n){var c,i;if(n.which!==0&&!n.metaKey&&!n.ctrlKey&&n.keyCode!==8&&n.keyCode!==13){var l=this,u=null,f=".",r,e,o,s,h;return r=this._caretPosition(),e=this._textBox.value.toString().substring(0,r),o=this._textBox.value.toString().substring(r),s=t.preferredCulture(this.model.locale).numberFormat,c=String.fromCharCode(n.which),h=e+c+o,i=s[f],i=i===f?"\\"+i:i,u=l.model.decimalPlaces===0?new RegExp("^((-)?(\\d*)(-)?)?$"):new RegExp("^(-)?(((\\d+("+i+"\\d*)?)|("+i+"\\d*)))?((-)?)$"),u.test(h)?void 0:!1}},_validateDecimalOnType:function(n){var r,e,s,h,o,u,i,f;return r=this._caretPosition(),s=this._textBox.value.toString().substring(0,r),h=this._textBox.value.toString().substring(r),o=this._getSelection(this._textBox.value),i=t.preferredCulture(this.model.locale).numberFormat["."],u=t.isNullOrUndefined(this.model.value)?"":this.model.value.toString(),this.model.decimalPlaces!=0?(f=this._textBox.value.split(i)[1],e=u.indexOf(i)>0?u.substring(u.indexOf(i)+1,u.length).length>this.model.decimalPlaces?!0:o.length==0&&r>this._textBox.value.indexOf(i)&&f&&f.length>=this.model.decimalPlaces?!0:!1:o.length==0&&r>this._textBox.value.indexOf(i)&&f&&f.length>=this.model.decimalPlaces?!0:!1):e=!1,e?(this._keypressFlag=!1,this._cancelEvent(n),!1):void 0},_keyDown:function(r){var s,a,k,d,v,y,l,h,c,w;if(!this.model.readOnly)if(this._CurrentCultureInfo=JSON.parse(JSON.stringify(t.preferredCulture())),r.keyCode>=48&&r.keyCode<=57||r.keyCode>=96&&r.keyCode<=105||this._allowKeyCodes(r)){if(r.shiftKey&&(r.keyCode==35||r.keyCode==36||r.keyCode==37||r.keyCode==39||r.keyCode==46||r.keyCode==127)||r.ctrlKey&&(r.keyCode==86||r.keyCode==118||r.keyCode==67||r.keyCode==88))return!0;if(r.ctrlKey==!0&&r.keyCode!=9&&r.keyCode!=17&&r.keyCode!=86&&r.keyCode!=67||r.keyCode==67||r.keyCode==86||r.keyCode==88)return this._keypressFlag=!1,this._cancelEvent(r),!1;if((r.keyCode>=48&&r.keyCode<=57||r.keyCode>=96&&r.keyCode<=105||r.keyCode==110)&&(s=this._caretPosition(),k=this._textBox.value.toString().substring(0,s),d=this._textBox.value.toString().substring(s),v=this._getSelection(this._textBox.value),r.keyCode>=96&&r.keyCode<=105&&(r.keyCode-=48),this.model.validateOnType&&this.model.decimalPlaces!=-1&&this._validateDecimalOnType(r),this._validateOnType)){var u=t.preferredCulture(this.model.locale).numberFormat["."],f=this.model.value.toString(),it=f.indexOf(u),g=this.model.value,e=this.model.decimalPlaces==-1?this.model.minValue:this.model.minValue.toFixed(this.model.decimalPlaces),o=this.model.decimalPlaces==-1?this.model.maxValue:this.model.maxValue.toFixed(this.model.decimalPlaces),p=!1;if((e.toString().indexOf("e")>0||o.toString().indexOf("e")>0)&&(p=!0),p)this.model.decimalPlaces!=0?(y=this._textBox.value.split(".")[1],a=f.indexOf(u)>0||Number(f)<Number(e)||Number(f)>Number(o)?f.substring(f.indexOf(u)+1,f.length).length>this.model.decimalPlaces?!0:v.length==0&&s>this._textBox.value.indexOf(u)&&y&&y.length>=this.model.decimalPlaces?!0:!1:v.length==0&&s>this._textBox.value.indexOf(u)&&y&&y.length>=this.model.decimalPlaces?!0:!1):a=!1;else if(u!="."&&(f=this._textBox.value.toString(),this.model.minValue.toString().match(new RegExp(".","g"))&&(e=this.model.minValue.toString().replace(/["."]/g,u)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(o=this.model.maxValue.toString().replace(/["."]/g,u))),h=e.toString().indexOf(u)>0?Number(e.toString().substring(0,e.toString().indexOf(u))):this.model.minValue,c=o.toString().indexOf(u)>0?Number(o.toString().toString().substring(0,o.toString().indexOf(u))):this.model.maxValue,it>0){g=Number(f.substring(f.indexOf(u)+1,f.toString().length));h=e.toString().indexOf(u)>0?Number(e.toString().substring(e.toString().indexOf(u)+1,e.toString().length)):0;c=o.toString().indexOf(u)>0?Number(o.toString().substring(o.toString().indexOf(u)+1,o.toString().length)):0;var rt=Number(f.substring(0,f.indexOf(u))),ut=Number(e.toString().substring(0,e.toString().indexOf(u))),ft=Number(o.toString().substring(0,o.toString().indexOf(u)));a=this._validateValue(g,h,c,!0,rt,ut,ft)?!1:!0}else a=this._validateValue(g,h,c,!1)?!1:!0;if(a)return this._keypressFlag=!1,this._cancelEvent(r),!1}if(r.keyCode==38&&this._allowkeyboard&&(this._updateInputField("increment"),this._cancelEvent(r)),r.keyCode==40&&this._allowkeyboard&&(this._updateInputField("decrement"),this._cancelEvent(r)),r.keyCode==8&&(s=this._caretPosition(),k=this._textBox.value.substring(0,s),d=this._textBox.value.substring(s),v=this._getSelection(this._textBox.value)),(r.keyCode==46||r.keyCode==127)&&(s=this._caretPosition(),k=this._textBox.value.substring(0,s),d=this._textBox.value.substring(s),v=this._getSelection(this._textBox.value)),this._validateDecimal(r)&&this.model.decimalPlaces!=0&&r.keyCode!=46){if(l=t.preferredCulture(this.model.locale).numberFormat["."],w=this._textBox.value.split(l),w[1]==i){var b=this._caretPosition(),tt=w[0].substring(0,b),nt=w[0].substring(b);if((this.model.minValue.toString().indexOf("e")>0||this.model.maxValue.toString().indexOf("e")>0)&&(p=!0),this.model.decimalPlaces!=-1&&nt.length>this.model.decimalPlaces&&this.model.validateOnType==!0)return this._keypressFlag=!1,this._cancelEvent(r),!1;if(this._validateOnType&&!p)if(this.model.minValue.toString().match(new RegExp(".","g"))&&(h=this.model.minValue.toString().replace(/["."]/g,l)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(c=this.model.maxValue.toString().replace(/["."]/g,l)),h=h.indexOf(l)>0?Number(h.substring(0,h.indexOf(l))):Number(h),c=c.indexOf(l)>0?Number(c.substring(0,c.indexOf(l))):Number(c),this._validateValue(this.model.value,h,c,"DecimalKeyPressed"))this._textBox.value=tt+l+nt;else return this._keypressFlag=!1,this._cancelEvent(r),!1;else this._textBox.value=tt+l+nt;this._setSelectionRange(b+1,b+1)}this._cancelEvent(r)}else(r.keyCode==190||r.keyCode==110)&&this._cancelEvent(r);(r.keyCode==109||r.keyCode==189||r.keyCode==173)&&(this._caretPosition()!=0&&this._getSelection(this._removeFormats(this._textBox.value))!=this.model.value||this.model.minValue>=0&&!this.model.enableStrictMode||this._textBox.value.toString().match(new RegExp("-","g"))&&this._getSelection(this._textBox.value)===""?this._cancelEvent(r):this._getSelection()==this.model.value&&(this.model.value=null));r.keyCode==13&&this._checkNumValue(this._preVal)!==this._checkNumValue(this._textBox.value)&&this._setValue(this._textBox.value)}else(r.keyCode!=27&&!r.ctrlKey||r.ctrlKey&&r.keyCode==90&&n.trim(this._textBox.value)==="")&&(this._keypressFlag=!1,this._cancelEvent(r))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}});t.NumericTextbox.Locale=t.NumericTextbox.Locale||{};t.NumericTextbox.Locale["default"]=t.NumericTextbox.Locale["en-US"]={watermarkText:"Enter value"};t.PercentageTextbox.Locale=t.PercentageTextbox.Locale||{};t.PercentageTextbox.Locale["default"]=t.PercentageTextbox.Locale["en-US"]={watermarkText:"Enter value"};t.CurrencyTextbox.Locale=t.CurrencyTextbox.Locale||{};t.CurrencyTextbox.Locale["default"]=t.CurrencyTextbox.Locale["en-US"]={watermarkText:"Enter value"}}(jQuery,Syncfusion),function(n,t,i){t.widget("ejMenu","ej.Menu",{element:null,model:null,validTags:["ul"],_setFirst:!1,_rootCss:"e-menu",angular:{terminal:!1},defaults:{height:"",width:"",animationType:"default",orientation:t.Orientation.Horizontal,menuType:"normalmenu",isResponsive:!0,contextMenuTarget:null,htmlAttributes:{},cssClass:"",openOnClick:!1,subMenuDirection:"none",enableCenterAlign:!1,showRootLevelArrows:!0,showSubLevelArrows:!0,enableAnimation:!0,container:null,enableSeparator:!0,enabled:!0,overflowHeight:"auto",overflowWidth:"auto",fields:{child:null,dataSource:null,query:null,tableName:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",url:"url",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",linkAttribute:"linkAttribute",imageUrl:"imageUrl"},enableRTL:!1,titleText:"Menu",locale:"en-US",excludeTarget:null,beforeOpen:null,open:null,close:null,mouseover:null,mouseout:null,click:null,keydown:null,overflowOpen:null,overflowClose:null,create:null,destroy:null},dataTypes:{animationType:"enum",cssClass:"string",titleText:"string",locale:"string",openOnClick:"boolean",enabled:"boolean",enableCenterAlign:"boolean",showArrow:"boolean",showRootLevelArrows:"boolean",showSubLevelArrows:"boolean",enableSeparator:"boolean",isResponsive:"boolean",enableRTL:"boolean",enableAnimation:"boolean",fields:{dataSource:"data",query:"data",child:"data"},excludeTarget:"string",htmlAttributes:"data"},_setModel:function(t){for(var i in t)switch(i){case"menuType":t[i]=this.model.menuType;break;case"fields":this._wireEvents("_off");this.element.empty().insertBefore(this.wrapper);this.wrapper.remove();n.extend(this.model.fields,t[i]);this._intializeData();this.model.enabled||this._wireEvents("_off");break;case"orientation":this._setOrientation(t[i]);break;case"showRootLevelArrows":this._addArrow(t[i],this.model.showSubLevelArrows);break;case"showSubLevelArrows":this._addArrow(this.model.showRootLevelArrows,t[i]);break;case"enableSeparator":this._setSeparator(t[i]);break;case"height":this._setHeight(t[i]);break;case"width":this._setWidth(t[i]);break;case"cssClass":this._setSkin(t[i]);break;case"isResponsive":this.model.isResponsive?this._responsiveLayout():(n(this.resWrap).remove(),n(this.wrapper).removeClass("e-menu-responsive"),n(this.element).removeClass("e-menu-responsive"),this.resWrap=null);break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableRTL":this._setRTL(t[i]);break;case"enableCenterAlign":this._centerAlign(t[i]);break;case"excludeTarget":this.model.excludeTarget=t[i];break;case"enabled":this.model.enabled=t[i];this._controlStatus(t[i]);break;case"animationType":this._setAnimation(t[i]);break;case"enableAnimation":this.model.enableAnimation=t[i];break;case"openOnClick":this._hoverOpen=!t[i];this._hoverClose=!t[i];break;case"subMenuDirection":this._setSubMenuDirection(this.model.subMenuDirection);break;case"titleText":this._titleText(t[i]);break;case"locale":this.model.locale=t[i];this._updateLocalConstant();this._setLocale();break;case"overflowHeight":this._setOverflowDimensions("height",t[i]);break;case"overflowWidth":this._setOverflowDimensions("width",t[i])}},_updateLocalConstant:function(){this._localizedLabels=t.getLocalizedConstants("ej.Menu",this.model.locale)},_setLocale:function(){this._titleText(this._localizedLabels.titleText)},_titleText:function(i){this.model.menuType!=t.MenuType.ContextMenu&&this.model.orientation!="vertical"&&n(this.label).text(i)},_destroy:function(){this.model.menuType==t.MenuType.ContextMenu?this._referenceElement.append(this._cloneElement):this._cloneElement.insertBefore(this.wrapper);this._cloneElement.removeClass("e-menu e-js");this.wrapper.remove()},_init:function(){this._cloneElement=this.element.clone();this.element.css("visibility","hidden");this._setValues();this._intializeData();this.element.css("visibility","visible")},_setValues:function(){this._mouseOver=!0;this._hoverOpen=!0;this._hoverClose=!0;this._isMenuOpen=!1;this._hideSpeed=100;this._showSpeed=100;this._isSubMenuOpen=!1;this._isContextMenuOpen=!1;this._disabledMenuItems=[];this._hiddenMenuItems=[];this._delayMenuHover=0;this._delaySubMenuHover=0;this._delaySubMenuShow=0;this._preventContextOpen=!0;this._setAnimation(this.model.animationType);this._isFocused=!0;this._menuOverflowItems=[];this._menuHeaderItems=[];this._menuCloneItems=[];this._itemWidth=0},_intializeData:function(){t.isNullOrUndefined(this.model.fields)||this.model.fields.dataSource==null?(this._renderMenu(),this._wireEvents("_on"),this._calculateOverflowItems()):(this._generateTemplate(this.model.fields.dataSource),this._renderMenu())},_renderMenu:function(){this._renderControl();this._addArrow(this.model.showRootLevelArrows,this.model.showSubLevelArrows);this._renderArrow();this._intializeMenu();this._itemWidth=this.element.width();this.model.isResponsive&&this._ensureResponsiveClasses(n(window).width()<767);this.model.orientation=="horizontal"&&(this._on(this.element.parent().find("span.e-check-wrap.e-icon"),"click",this._mobileResponsiveMenu),this.model.fields.dataSource!=null&&this._calculateOverflowItems())},_renderControl:function(){this.model.menuType=="normalmenu"?(this.wrapper=t.buildTag("div"),this.wrapper.addClass(this.model.cssClass+" e-menu-wrap")):this.wrapper=t.buildTag("div.e-menu-wrap");this.model.isResponsive&&this._responsiveLayout();this.model.menuType!=t.MenuType.ContextMenu&&(this.wrapper.insertBefore(this.element),this.wrapper.append(this.element));this.element.addClass("e-menu e-widget e-box").attr({role:"menu",tabindex:0});this._addAttr(this.model.htmlAttributes);this.model.enableRTL&&this._setRTL(this.model.enableRTL);this._setSubMenuDirection(this.model.subMenuDirection);this.model.menuType=="normalmenu"?this.model.orientation=="horizontal"?this.element.addClass("e-horizontal"):this.element.addClass("e-vertical"):this._contextMenu_Template();this._addClass();this.model.enableCenterAlign&&this._centerAlign(this.model.enableCenterAlign);this.model.enableSeparator&&this._setSeparator(!0);this.model.enabled||this.disable()},_renderPopupWrapper:function(){if(this._ensureOverflowPopup()){this.popupWrapper=t.buildTag("div.e-menu-popwrap");this.popupWrapper.insertAfter(this.element);var n=typeof value=="number"?this.model.overflowHeight+"px":this.model.overflowHeight,i=typeof value=="number"?this.model.overflowWidth+"px":this.model.overflowWidth;this.popupWrapper.css({height:n,width:i});this.popupWrapper.hide();this._addOverflowItems()}},_calculateOverflowItems:function(){var f,i,u;if(this._ensureOverflowPopup()){this.element.find("li.e-list").removeClass("e-menu-show");n(this.lastelement).removeClass("e-last");this._menuHeaderItems=[];f=this.element.outerWidth();this.element.find("li.e-ham-wrap").length>0&&(this._itemWidth<=this.element.width()||this._itemWidth>=this.element.width()&&!this._isOverflowPopupOpen())&&(t.isNullOrUndefined(this.popupWrapper)||this.popupWrapper.hide());this._renderHamburgerIcon();this.element.find("li.e-ham-wrap").css({display:"list-item"});var o=this.element.find("li.e-ham-wrap").outerWidth(),r=0,e=!0;for(this.element.find("li.e-ham-wrap").hide(),this._menuHeaderItems=this.element.find(">li.e-list"),this._menuOverflowItems=[],i=0;i<this._menuHeaderItems.length;i++)if(u=n(this._menuHeaderItems[i]),r=r+u.outerWidth(),r<f)u.removeClass("e-menu-hide"),this.element.find(">li.e-list.e-haschild>ul").find("li.e-haschild").find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right"),this.model.enableSeparator&&this._setSeparator(!0);else{if(e){e=!1;this.element.find("li.e-ham-wrap").css({display:"list-item"});r=r-u.outerWidth()+o;i>1&&(r=r-n(this._menuHeaderItems[i-1]).outerWidth(),i=i-2);continue}this._menuOverflowItems.push(n(u).clone(!0));u.addClass("e-menu-hide")}this._menuOverflowItems.length>0?(this._renderHamburgerIcon(),n(".e-menu-popwrap").length?this._addOverflowItems():this._renderPopupWrapper(),this.lastelement=this.element.find(">li.e-list:visible").last().addClass("e-last"),this.element.find(">li.e-list.e-haschild>ul").find("li.e-haschild").find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right")):this._menuOverflowItems.length==0&&n("li.e-ham-wrap").length>0&&this.element.find("li.e-ham-wrap").remove()}(this.model.orientation=="vertical"||this.model.menuType==t.MenuType.ContextMenu&&n(window).width()>=768&&this.model.isResponsive)&&this.element.find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right")},_renderHamburgerIcon:function(){if(this._ensureOverflowPopup()&&this.element.find("li.e-ham-wrap").length==0){var i=t.buildTag("li.e-ham-wrap"),r=t.buildTag("div");this.hamburgerspan=t.buildTag("span.e-hamburger");r.append(this.hamburgerspan);i.append(r);this.element.append(i);this.model.height!=0?this._setHeight(this.model.height):n("li.e-ham-wrap").css({height:this.element.find("li.e-list").first().height()});this._on(this.element.find("li.e-ham-wrap"),"click",this._overflowOpen)}},_addOverflowItems:function(){var i,r,u;if(this._ensureOverflowPopup()&&n(".e-menu-popwrap").length>0&&!t.isNullOrUndefined(this.popupWrapper)){for(this.popupWrapper.empty(),this._menuCloneItems.length=0,i=0;i<this._menuOverflowItems.length;i++)this._menuCloneItems.push(n(this._menuOverflowItems[i]).clone(!0));for(this.ulTag=t.buildTag("ul"),this.ulTag.addClass("e-menu e-js e-responsive e-widget e-box e-vertical"),this.popupWrapper.append(this.ulTag),i=0;i<this._menuCloneItems.length;i++)n(this._menuCloneItems[i]).hasClass("e-haschild")&&(n(this._menuCloneItems[i]).find("span.e-icon").removeClass("e-arrowhead-down e-arrowhead-right").addClass("e-arrowhead-down"),n(this._menuCloneItems[i]).children("span.e-menu-arrow.e-menu-left").remove()),this.ulTag.append(this._menuCloneItems[i]);n(this.ulTag).children("li").removeClass("e-menu-hide");r=Math.round(this.popupWrapper.width());r>0&&(u=this.popupWrapper.innerWidth(),this.popupWrapper.find("ul.e-menu").css({width:u+"px"}));this.model.enableSeparator&&this._setSeparator(!0)}},_overflowOpen:function(n){if(this._isOverflowPopupOpen()){var i=t.util.getOffset(this.element),r=i.left+(this.model.enableRTL?0:this.element.outerWidth()-this.popupWrapper.outerWidth()),u=i.top+this.element.outerHeight();this.wrapper.parent().length&&(this.wrapper.parent().css("position")=="absolute"||this.wrapper.parent().css("position")=="relative")&&(i=t.util.getOffset(this.wrapper.parent()),r=r-i.left,u=u-i.top);this.popupWrapper.css({left:r,top:u});this.popupWrapper.show();this._trigger("overflowOpen",{e:n})}else this._overflowClose(n)},_overflowClose:function(n){this._ensureOverflowPopup()&&!t.isNullOrUndefined(this.popupWrapper)&&(this.popupWrapper.find("li.e-list").removeClass(".e-mhover.e-active.e-mfocused"),this._hideAnimation(this.popupWrapper.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim),this.popupWrapper.hide(),this._trigger("overflowClose",{e:n}))},_isOverflowPopupOpen:function(){if(n(this.popupWrapper).length>0)return this.popupWrapper.css("display")=="none"},_removePopup:function(){n(window).width()<767&&this.model.isResponsive&&(this._ensureResponsiveClasses(n(window).width()),this.element.find("li.e-ham-wrap").length>0&&this.popupWrapper.length>0&&(this.element.find("li.e-ham-wrap").remove(),n(".e-menu-popwrap").remove(),this.element.find("li.e-list").addClass("e-menu-show")))},_mobileResponsiveMenu:function(){this.model.menuType!=t.MenuType.ContextMenu&&this.model.orientation!="vertical"&&this.element.css("display")=="none"?this.element.removeClass("e-res-hide").addClass("e-res-show"):this.model.menuType==t.MenuType.ContextMenu||this.model.orientation=="vertical"||this.element.css("display")=="none"||this.element.removeClass("e-res-show").addClass("e-res-hide")},_ensureOverflowPopup:function(){return this.model.menuType!=t.MenuType.ContextMenu&&this.model.orientation!="vertical"&&n(window).width()>=768&&this.model.isResponsive},_onResize:function(){this.element.find("li.e-ham-wrap").hide();n(window).width()>=768?this._calculateOverflowItems():this._removePopup()},_ensureResponsiveClasses:function(n){n&&this.element.find("span.e-icon").hasClass("e-arrowhead-right")&&this.element.find("span.e-icon.e-arrowhead-right").removeClass("e-arrowhead-right").addClass("e-arrowhead-down")},_responsiveLayout:function(){this.model.menuType!=t.MenuType.ContextMenu&&this.model.orientation!="vertical"&&(this.wrapper.addClass("e-menu-responsive"),this.element.addClass("e-menu-responsive"),this.resWrap=t.buildTag("span.e-menu-res-wrap e-menu-responsive"),this.inResWrap=t.buildTag("span.e-in-wrap e-box e-menu-res-in-wrap"),this.label=t.buildTag("span.e-res-title").html(this.model.locale=="en-US"?this.model.titleText:t.Menu.Locale[this.model.locale]&&t.Menu.Locale[this.model.locale].titleText?t.Menu.Locale[this.model.locale].titleText:this.model.titleText),this.check=t.buildTag("span.e-check-wrap e-icon"),this.wrapper.append(this.resWrap),this.resWrap.append(this.inResWrap),this.inResWrap.append(this.label).append(this.check))},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.wrapper.addClass(n):t=="disabled"&&n=="disabled"?i.disable():i.element.attr(t,n)})},_oncheck:function(n){var t=this.element.parents(".e-menu-wrap").children(".e-menu");n.isChecked?t.removeClass("e-res-hide").addClass("e-res-show"):t.removeClass("e-res-show").addClass("e-res-hide")},_addClass:function(){var u,f,i,r,t;for(this.element.find('li:has("> ul")').find("> a,> span").addClass("aschild"),this.element.find(">li").addClass("e-list").attr({role:"menuitem"}),this.element.find("li").find(">a, >span").addClass("e-menulink"),u=this.element.find(".e-list a.aschild"),f=this.element.find(".e-list span.aschild"),t=0;t<u.length;t++)i=n(u[t]),i.siblings().attr({"aria-hidden":!0}),i.parent().attr({"aria-haspopup":!0,role:"menuitem"}).addClass("e-haschild"),i.siblings("ul").children("li").addClass("e-list").attr("role","menuitem");for(t=0;t<f.length;t++)r=n(f[t]),r.siblings().attr({"aria-hidden":!0}),r.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),r.siblings("ul").children("li").addClass("e-list").attr("role","menuitem")},_renderArrow:function(){if(this.model.menuType!=t.MenuType.ContextMenu&&this.model.orientation!="vertical"&&n(n(this.element).find("span.e-menu-arrow")).length==0){var i=t.buildTag("span.e-menu-arrow e-menu-left");n(i).append("<span class='e-arrowMenuOuter'><\/span>").append("<span class='e-arrowMenuInner'><\/span>");this.element.find(">li.e-list.e-haschild").append(i)}},_generateTemplate:function(n){var i=this,r;n instanceof t.DataManager?(r=n.executeQuery(this._columnToSelect(this.model.fields)),r.done(function(n){i._odataFlag=!0;i._generateItemTemplate(n.result);i._wireEvents("_on")})):(i._odataFlag=!1,this._generateItemTemplate(i.model.fields.dataSource),this._wireEvents("_on"))},_generateItemTemplate:function(n){for(var i,t=0;t<n.length;t++)(n[t][this.model.fields.parentId]==null||n[t][this.model.fields.parentId]==0)&&(i=this._menuTemplate(n[t],n,this.model.fields),this.element.append(i))},_menuTemplate:function(i,r,u){var f,o,l,y,c,a,p,e,h,s,v;if(f=n(document.createElement("li")),f.attr("class","e-list"),i[u.htmlAttribute]&&this._setAttributes(i[u.htmlAttribute],f),o=n(document.createElement("a")),o.attr("class","e-menulink"),i[u.imageUrl]&&i[u.imageUrl]!=""?(l=n(document.createElement("img")),l.attr("src",i[u.imageUrl]),i[u.imageAttribute]&&this._setAttributes(i[u.imageAttribute],l),o.append(l)):i[u.spriteCssClass]&&i[u.spriteCssClass]!=""&&(y=n(document.createElement("span")),y.addClass(i[u.spriteCssClass]),o.append(y)),o.append(i[u.text]),i[u.linkAttribute]&&this._setAttributes(i[u.linkAttribute],o),i[u.url]&&o.attr("href",i[u.url]),f.append(o),i[u.id]&&f.prop("id",i[u.id]),t.isNullOrUndefined(u.child)){if(!this._odataFlag&&(e=t.DataManager(u.dataSource).executeLocal(t.Query().where(u.parentId,t.FilterOperators.equal,i[u.id])),e&&e.length>0)){for(h=t.buildTag("ul"),s=0;s<e.length;s++)v=this._menuTemplate(e[s],u.dataSource,u),h.append(v);f.append(h)}}else if(this._odataFlag=!0,u.child.dataSource instanceof t.DataManager)c=this,a=t.Query(),n(f).attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),a=this._columnToSelect(u.child),a.where(u.child.parentId,t.FilterOperators.equal,i[u.id]),p=u.child.dataSource.executeQuery(a),p.done(function(t){var i=t.result,e,r,o;if(i&&i.length>0){for(e=n(document.createElement("ul")),r=0;r<i.length;r++)o=c._menuTemplate(i[r],u.child.dataSource,u.child),e.append(o);f.append(e);n(f).children("a").addClass("aschild");n(f).parent().hasClass("e-menu")&&c.model.showRootLevelArrows?n(f).children("a.aschild").append(n("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):c.model.showSubLevelArrows&&n(f).children("a.aschild").append(n("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space")}}),p.then(function(){c._renderArrow()});else if(t.isNullOrUndefined(i.child)||(t.isPlainObject(i.child)?e=t.DataManager(u.child.dataSource).executeLocal(t.Query().where(u.child.parentId,t.FilterOperators.equal,i[u.id])):i.child instanceof Array&&(e=i.child)),e&&e.length>0){for(h=n(document.createElement("ul")),s=0;s<e.length;s++)v=this._menuTemplate(e[s],u.child.dataSource,u.child),h.append(v);f.append(h)}return f},_setAttributes:function(n,t){for(var i in n)i=="class"?t.addClass(n[i]):t.attr(i,n[i])},_addArrow:function(t,i){if(t){var r=this.model.orientation=="horizontal"?"e-arrowhead-down":"e-arrowhead-right";this.element.find('>li.e-list:has("> ul")').children("a").append(n("<span>").addClass("e-icon "+r)).addClass("e-arrow-space")}else this.element.find('>li.e-list:has("> ul")').children("a").removeClass("e-arrow-space").children("span.e-icon").remove();i?this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a").append(n("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a").removeClass("e-arrow-space").children("span.e-icon").remove()},_intializeMenu:function(){this.model.height!=0&&this._setHeight(this.model.height);this.model.width!=0&&this._setWidth(this.model.width);this.model.menuType=="contextmenu"&&(this.model.openOnClick=!1);this.model.openOnClick&&(this._hoverOpen=!1,this._hoverClose=!1)},_setOrientation:function(n){n=="horizontal"?this.element.removeClass("e-vertical e-horizontal").addClass("e-horizontal"):this.element.removeClass("e-horizontal e-vertical").addClass("e-vertical");n=="vertical"&&this._removePopup()},_setHeight:function(i){this.model.orientation=="horizontal"&&i!=="auto"?(i=typeof i=="number"?i+"px":i,this.element.find("> li").find(">a:first").css("line-height",i),this.model.showRootLevelArrows&&this.element.find("> li").find(">a:first").find("> span:first").css({"line-height":i,top:"0px"}),this.model.menuType!=t.MenuType.ContextMenu&&this.model.orientation!="vertical"&&n("li.e-ham-wrap").length>0&&(this.element.find("li.e-ham-wrap").children("div").css({"line-height":i}),this.element.find("li.e-ham-wrap").css({height:i}),n(".e-menu-popwrap").length>0&&this.popupWrapper.find("a.e-menulink").css({"line-height":i}))):this.element.height(i)},_setWidth:function(n){this.element.css("width",n);this.model.orientation==="horizontal"&&n!=="auto"&&this.model.isResponsive&&this.resWrap.css("width",n);this.model.orientation=="horizontal"&&this.model.menuType!=t.MenuType.ContextMenu&&this.model.orientation!="vertical"&&this._calculateOverflowItems()},_setOverflowDimensions:function(n,i){this.model.menuType!=t.MenuType.ContextMenu&&this.model.orientation!="vertical"&&(i=typeof i=="number"?i+"px":i);n=="height"?this.popupWrapper.css({height:i}):n=="width"&&this.popupWrapper.css({width:i});this._addOverflowItems()},_setRTL:function(n){n?this.element.removeClass("e-rtl").addClass("e-rtl"):this.element.removeClass("e-rtl");n&&this.model.orientation==="horizontal"?this.wrapper.removeClass("e-menu-rtl").addClass("e-menu-rtl"):this.wrapper.removeClass("e-menu-rtl");this.model.subMenuDirection=n?"left":"right"},_setSubMenuDirection:function(n){n!="left"&&n!="right"&&(this.model.subMenuDirection=this.model.enableRTL?"left":"right")},_setAnimation:function(n){n==="none"?(this._showAnim="none",this._hideAnim="none"):(this._showAnim="slideDown",this._hideAnim="slideUp")},_controlStatus:function(n){n!=!0?this.disable():this.enable()},_centerAlign:function(n){this.model.orientation=="horizontal"&&n?this.element.css("text-align","center"):this.element.css("text-align","inherit")},_columnToSelect:function(n){var u=[],r=t.Query(),i;if(t.isNullOrUndefined(n.query)){for(i in n)i!=="tableName"&&i!=="child"&&i!=="dataSource"&&n[i]&&u.push(n[i]);u.length>0&&r.select(u);this.model.fields.dataSource.dataSource.url.match(n.tableName+"$")||t.isNullOrUndefined(n.tableName)||r.from(n.tableName)}else r=n.query;return r},_max_zindex:function(){var i,r,t,u;return this.model.menuType=="contextmenu"?(i=n(this._targetElement).parents(),i.push(this._targetElement)):i=n(this.element).parents(),r=n("body").children(),u=r.index(this.popup),r.splice(u,1),n(r).each(function(n,t){i.push(t)}),t=Math.max.apply(t,n.map(i,function(t){if(n(t).css("position")!="static")return parseInt(n(t).css("z-index"))||1})),!t||t<1e4?t=1e4:t+=1,t},_recursiveFunction:function(t,i){var r=this,u=!1;n.each(t,function(n,t){return t.Text==i?(r.selectedItem=t,u=!0,!1):(t.ChildItems!=null&&r._recursiveFunction(t.ChildItems,i),u?!1:void 0)})},_contextMenu_Template:function(){if(this.element[0].id!="")var t=n(".e-menu-wrap #"+this.element[0].id).get(0);t&&n(t.parentElement).remove();this.model.orientation="vertical";this.element.addClass(this.model.cssClass+" e-context");this.element.css("display","none");this._referenceElement=this.element.parent();n("body").append(this.element);this.wrapper.insertBefore(this.element);this.wrapper.append(this.element)},_closeMenu:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim)},_onMenuIntent:function(n,t,i){t._delayMenuHover=window.setTimeout(function(){if(t._mouseOver==!0&&i){var r=t._showAnim,u=t._hideAnim,f=t._showSpeed,e=t._hideSpeed;t._show(n,r,u)}},this._showSpeed)},_onHide:function(n,t,i){t._delaySubMenuHover=window.setTimeout(function(){if(t._mouseOver==!1&&i){var n=t._id,r=t._hideAnim,u=t._hideSpeed;t._closeAll()}},t._hideSpeed)},_subMenuPos:function(t,r){var e=n(t).offset(),a,v,o=e.left,u=n("ul:first",t),c=n(t).outerWidth(),f,h,l,w,s,b;if(e==null||e==i)return!1;if(f=u.outerWidth()+1,h=this.model.container?n(this.model.container).width()+n(document).scrollLeft():document.documentElement.clientWidth+n(document).scrollLeft(),this.model.menuType=="normalmenu")if(n(t.parentNode).is(this.element))this.model.orientation=="horizontal"?(u.css("top",n(t).outerHeight()+"px"),this.model.enableRTL?(v=o+c-f<0?o+c-f:1,u.css({left:"auto",right:v+"px"})):(a=h<o+f?o+f-h:1,u.css("left",a*-1+"px"))):r=="left"&&o>f||r=="right"&&h<=e.left+c+f&&o>f?u.css("left",-(f+4)+"px"):u.css("left",n(t).outerWidth()+4+"px");else if(r=="left"&&o>f||r=="right"&&h<=e.left+c+f&&o>f)u.css("left",-(f+4)+"px");else{u.css("left",n(t).outerWidth()+4+"px");var s=u.outerHeight(),y=n(window).height(),p=y-(e.top-n(window).scrollTop());y<s?(l=e.top-n(window).scrollTop(),u.css("top",-l+4+"px")):p<s?(l=p-s,u.css("top",l-2+"px")):u.css("top","")}else h-=e.left+2*f+4,h<0?(w=f==null?"-206.5px":"-"+(f+5)+"px",u.css("left",w)):u.parent("li.e-list").parent("ul").width()&&r=="right"?u.css("left",u.parent("li.e-list").parent("ul").width()+4+"px"):e.left>f&&u.css("left",-(f+4)+"px"),s=u.outerHeight(),e.top+s>n(window).height()?(b=-s+n(t).outerHeight(),s>e.top+n(t).outerHeight()/2?u.css("top",-(s/2)+"px"):u.css("top",b+"px")):u.css("top","0px")},_setSkin:function(n){this.wrapper.removeClass(this.model.cssClass).addClass(n+" e-menu-wrap")},_setSeparator:function(i){i?(this.element.addClass("e-separator"),n(".e-menu-popwrap").length>0&&!t.isNullOrUndefined(this.ulTag)&&this.ulTag.addClass("e-separator")):this.element.removeClass("e-separator")},_contextMenuEvents:function(t){this[t](n(this.model.contextMenuTarget),"mouseup taphold",this._ContextMenuHandler);this[t](this.element,"contextmenu",this._onDefaultPreventer);this[t](n(this.model.contextMenuTarget),"contextmenu",this._onDefaultPreventer);this[t](n(document),"mousedown",this._onContextClose)},_show:function(t,i,r){var f,u=n("> ul",t),e=this._max_zindex();u.attr({"aria-hidden":!1});this._hideAnimation(n(t).siblings().find(" > ul:visible"),r);n.inArray(this._disabledMenuItems,t)>-1||(u.css("display")!="none"?(f=this.model.openOnClick?n(u):u.children().find("> ul"),this._hideAnimation(f,r)):n("> ul",t).children().find("> ul").hide(),this._subMenuPos(t,this.model.subMenuDirection),u.css({"z-index":e+1}),n(t).children("span.e-menu-arrow").css({"z-index":e+2}),n("> ul",t).css("display")=="block"||n(t).hasClass("e-disable-item")||(this._showAnimation(u,i),u.closest("li").addClass("e-active e-mfocused")),n(t).siblings("li.e-active").length>0&&n(t).siblings("li.e-active").removeClass("e-active e-mfocused"))},_closeAll:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim);this._hideAnimation(this.element.find("> ul:visible"),this._hideAnim)},_showAnimation:function(n,t){switch(t){case"slideDown":n.slideDown(this.model.enableAnimation?200:0);break;case"none":n.css("display","block")}},_hideAnimation:function(t,i){switch(i){case"slideUp":n(t).attr({"aria-hidden":!0});t.slideUp(this.model.enableAnimation?100:0);break;case"none":t.css("display","none")}t.closest("li").removeClass("e-active e-mfocused")},_removeValue:function(i,r){for(var f=t.browserInfo(),e=f.version==="8.0"&&f.name==="msie"?i[0].outerText:i[0].textContent,o=n(r).length,u=0,s=n(r).children("a").length==0?n(r).children("span"):n(r).children("a");u<=o;){if(n(s[u]).text()===e)return u;u++}},_createSubLevelItem:function(t,i){var r;r=n(document.createElement("ul"));r.append(i);t.append(r);t.attr({role:"menu","aria-haspopup":"true"});t.addClass("e-haschild");this.element.find('li:has("> ul")').find("> a,>span").addClass("aschild e-arrow-space");this._insertArrows(r)},_insertArrows:function(t){this.model.showRootLevelArrows?t.find(">a,>span").append(n("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):t.find(">a,>span").removeClass("e-arrow-space").find(">span.e-icon").remove();this.model.showSubLevelArrows?t.parent("li.e-list:has(>ul)").children("a,span").append(n("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):t.parent("li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").find(">span.e-icon").remove()},_createMenuItem:function(t){var r,i,u,f;return r=n(document.createElement("li")),r.attr({"class":"e-list",role:"menuitem"}),t.htmlAttribute&&this._setAttributes(t.htmlAttribute,r),t.text&&t.text!=""&&(i=n(document.createElement("a")),i.attr({"class":"e-menulink"}),t.imageUrl&&t.imageUrl!=""?(u=n(document.createElement("img")),u.attr("src",t.imageUrl),t.imageAttribute&&this._setAttributes(t.imageAttribute,u),i.append(u)):t.spriteCssClass&&t.spriteCssClass!=""&&(f=n(document.createElement("span")),f.addClass(t.spriteCssClass),i.append(f)),i.append(t.text),t.linkAttribute&&this._setAttributes(t.linkAttribute,i),t.url&&i.attr("href",t.url),r.append(i)),t.id&&r.prop("id",t.id),this.model.enabled||r.addClass("e-disable-item"),r},_insertNode:function(i,r,u){var e=0,o=0,s=0,f=[];for(n(r).is(this.element)?f.push(this.element):typeof r=="string"?f.push(this.element.find(r)):typeof r=="undefined"?f.push(this.element):f.push(r),o=0;o<f.length;o++)for(s=0;s<f[o].length;s++)for(e=0;e<i.length&&!t.isNullOrUndefined(i[e]);e++)this._addItem(i[e],f[o][s],u)},_addItem:function(t,i,r){var u,f;this._wireEvents("_off");u=this._createMenuItem(t);i=i==="default"?n("#"+t.parentId):n(i);switch(r){case"insert":f=n(i).is(this.element)?i:i.children("ul");f.length!=0?f.append(u):this._createSubLevelItem(i,u);break;case"insertBefore":n(i).is(this.element)?i.prepend(u):u.insertBefore(i);break;case"insertAfter":n(i).is(this.element)?i.append(u):u.insertAfter(i)}this._wireEvents("_on")},_removeItem:function(n){n.siblings("li").length==0?(n.closest("ul").siblings("a.aschild").removeClass("aschild e-arrow-space").children("span.e-icon").remove(),n.closest("ul").hasClass("e-menu")?n.remove():n.closest("ul").remove()):n.remove()},_hiddenElement:function(t){t.length>0&&n.inArray(t[0],this._hiddenMenuItems)==-1&&(t.addClass("e-hidden-item"),this._hiddenMenuItems.push(t[0]))},_showElement:function(t){t.length>0&&n.inArray(t[0],this._hiddenMenuItems)>-1&&(t.removeClass("e-hidden-item"),this._hiddenMenuItems.splice(this._hiddenMenuItems.indexOf(t[0]),1))},_getNodeByID:function(t){return typeof t!="object"&&t!=""&&(t=this.element.find(".e-list"+t)),n(t)},_processItems:function(t,i){for(var u=this._getNodeByID(t),r=0;r<u.length;r++)i?this._showElement(n(u[r])):this._hiddenElement(n(u[r]))},insert:function(n,t){this._insertNode(n,t,"insert")},insertBefore:function(n,t){this._insertNode(n,t,"insertBefore")},insertAfter:function(n,t){this._insertNode(n,t,"insertAfter")},remove:function(t){for(var i=0,r=0,i=0;i<t.length;i++)for(t[i]=typeof t[i]=="string"?this.element.find(t[i]):t[i],r=0;r<t[i].length;r++)t[i][r].tagName==="LI"||t[i][r].tagName==="UL"?this._removeItem(n(t[i][r])):t[i][r].remove()},showContextMenu:function(i,r,u,f,e){if(this._closeMenu(),this._eventArgs=f,t.isNullOrUndefined(f)||!this._checkForExclusion(f.target)){if(this._trigger("beforeOpen",{target:u,events:f}))return!1;if(this._preventContextOpen){if(this._targetElement=t.isNullOrUndefined(u)?t.isNullOrUndefined(target)?this.element:target:u,e){var o=this._calculateContextMenuPosition(f);i=o.X;r=o.Y}this.element.css({left:i,top:r});this.element.css({"z-index":this._max_zindex()+1});this._showAnimation(this.element,this._showAnim);this._isContextMenuOpen=!0;this.element.focus();this._trigger("open",{target:u});this._on(t.getScrollableParents(n(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)}return!1}},_checkForExclusion:function(i){var u,r;if(!t.isNullOrUndefined(this.model.excludeTarget))for(u=this.model.excludeTarget.split(","),r=0;r<u.length;r++)if(n(i).closest(this.model.excludeTarget).is(n.trim(u[r])))return!0},hideContextMenu:function(i){this._closeMenu();this.element.find(".e-mhover").removeClass("e-mhover");this.element.find(".e-mfocused").removeClass("e-mfocused");this._hideAnimation(this.element,this._hideAnim);this._isContextMenuOpen=!1;this._trigger("close",n.extend({events:i},i));this._off(t.getScrollableParents(n(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)},disableItem:function(t){var i=n(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return n.trim(n(this).text())===t});i.length>0&&!(n.inArray(i.parent()[0],this._disabledMenuItems)>-1)&&(i.parent().addClass("e-disable-item").attr({"aria-disabled":!0}),i.parent().find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(i.parent()[0]))},disableItemByID:function(t){if(t&&t!=""){var r=this.element.find("#"+t)?this.element.find("#"+t)[0]:i;!r||n.inArray(r,this._disabledMenuItems)>-1||(n(r).addClass("e-disable-item").attr({"aria-disabled":!0}),n(r).find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(r))}},getHiddenItems:function(){return this._hiddenMenuItems},hideItems:function(n){if(typeof n=="object"&&n.length!==i)for(var t=0;t<n.length;t++)this._processItems(n[t],!1);else this._processItems(n,!1)},showItems:function(n){if(typeof n=="object"&&n.length!==i)for(var t=0;t<n.length;t++)this._processItems(n[t],!0);else this._processItems(n,!0)},enableItem:function(t){var i=n(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return n.trim(n(this).text())===t}),r;i.length>0&&n.inArray(i.parent()[0],this._disabledMenuItems)>-1&&(i.parent().removeClass("e-disable-item").attr({"aria-disabled":!1}),i.parent().find(">a.aschild span.e-icon").removeClass("e-disable"),r=this._removeValue(i,this._disabledMenuItems),this._disabledMenuItems.splice(r,1))},enableItemByID:function(t){var i,r;if(t&&t!=""&&(i=this.element.find("#"+t)[0],i&&n.inArray(i,this._disabledMenuItems)>-1))for(n(i).removeClass("e-disable-item").attr({"aria-disabled":!1}),n(i).find(">a.aschild span.e-icon").removeClass("e-disable"),r=this._disabledMenuItems.length-1;r>=0;r--)this._disabledMenuItems[r].id==t&&this._disabledMenuItems.splice(r,1)},disable:function(){this.model.enabled=!1;var i=this.element.find(">li[class~=e-list]"),t=this;n.each(i,function(i,r){n.inArray(r,t._disabledMenuItems)>-1||(n(r).addClass("e-disable-item").attr({"aria-disabled":!0}),n(r).find(">a.aschild span.e-icon").addClass("e-disable"),t._disabledMenuItems.push(r))})},enable:function(){var i=this,t;this.model.enabled=!0;t=this.element.find("li.e-disable-item");n.each(t,function(t,r){n(r).removeClass("e-disable-item").attr({"aria-disabled":!1});n(r).find(">a.aschild span.e-icon").removeClass("e-disable");i._disabledMenuItems.pop(r)})},show:function(n,t,i,r){if(!this.model.enabled)return!1;this.model.menuType=="contextmenu"?this.showContextMenu(n,t,i,r,!1):this.element.css("display","block")},hide:function(n){if(!this.model.enabled)return!1;this.model.menuType=="contextmenu"?this.hideContextMenu(n):(this._closeMenu(),this.element.css("display","none"))},_wireEvents:function(t){this[t](this.element.find("li.e-list"),"mouseout",this._mouseOutHandler);this[t](this.element.find("li.e-list"),"mouseover",this._mouseOverHandler);this[t](this.element.children(),"click",this._onClickHandler);this[t](this.element,"keydown",this._onKeyDownHandler);this[t](this.element,"focus",this._OnFocusHandler);this[t](this.element,"blur",this._OnFocusOutHandler);this.model.menuType=="contextmenu"&&n(this.model.contextMenuTarget)[0]!=null&&this._contextMenuEvents(t);this.model.menuType!="contextmenu"&&(this[t](n(document),"click",this._onDocumentClick),this[t](this.element,"mousedown",this._onMouseDownHandler));this[t](n(window),"resize",n.proxy(this._onResize,this))},_mouseOverHandler:function(i){var r,f="",e,u;if(this.element.find(".e-mhover").removeClass("e-mhover"),i.currentTarget=n(i.target).closest("li")[0],n(i.currentTarget).hasClass("e-disable-item")?this._isFocused=!1:n(i.currentTarget).addClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),typeof this._delaySubMenuHover!="undefined"&&clearTimeout(this._delaySubMenuHover),typeof this._delaySubMenuHover!="undefined"&&clearTimeout(this._delayMenuHover),this._mouseOver=!0,this._isMenuOpen=!0,this._isSubMenuOpen=n(i.currentTarget.parentNode.parentNode).is(this.element)?!1:!0,i.currentTarget.nodeName=="LI")r=i.currentTarget;else if(i.currentTarget.parentNode)if(i.currentTarget.parentNode.nodeName=="LI")r=i.currentTarget.parentNode;else return!1;else return i.preventDefault(),!1;n(i.currentTarget).hasClass("e-disable-item")||this._onMenuIntent(r,this,this._hoverOpen);n.inArray(r,this._disabledMenuItems)>-1||(e=n(r).children("a,span").text(),f=t.isNullOrUndefined(r)?"":n(r)[0].id,u={text:e,element:r,event:i,ID:f},this._trigger("mouseover",n.extend({events:u},u)))},_onMouseDownHandler:function(t){n(t.target).hasClass("e-menu")&&(this._isFocused=!1)},_mouseOutHandler:function(i){var r,f="",e,u;if(n(i.currentTarget).removeClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),typeof this._delaySubMenuHover!="undefined"&&clearTimeout(this._delaySubMenuHover),typeof this._delaySubMenuHover!="undefined"&&clearTimeout(this._delayMenuHover),this._mouseOver=!1,this._isMenuOpen=!1,i.currentTarget.nodeName=="LI")r=i.currentTarget;else if(i.currentTarget.parentNode)if(i.currentTarget.parentNode.nodeName=="LI")r=i.currentTarget.parentNode;else return!1;else return i.preventDefault(),!1;this._onHide(r,this,this._hoverClose);n.inArray(r,this._disabledMenuItems)>-1||(e=n(r).children("a,span").text(),f=t.isNullOrUndefined(r)?"":n(r)[0].id,u={text:e,element:r,event:i,ID:f},this._trigger("mouseout",n.extend({events:u},u)))},_onClickHandler:function(i){var r,h="",f,e,o,c,u,s;if(this._isFocused=!0,o=!1,!n(i.target).closest("li.e-list").hasClass("e-disable-item")&&n(i.target).closest("li.e-list").length>0)r=n(i.target).closest("li.e-list")[0],n(r).is(this.element.find(">li.e-list"))&&(this._activeElement=r);else{n(i.target).is(this.element)&&(this._activeElement=this.element.find(">li:first"));return}n(i.target).is("a")&&n(r).find(">a,>span").hasClass("aschild")&&this.model.openOnClick&&(this._isFocused=!1);!this._hoverOpen&&n(r).find(">a,>span").hasClass("aschild")&&(this._show(r,this._showAnim,this._hideAnim),this._hoverOpen=!1,o=!0);n.inArray(r,this._disabledMenuItems)>-1||(this.model.menuType=="contextmenu"&&this._isContextMenuOpen&&!n(r).hasClass("e-haschild")&&(this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",n.extend({events:i},i)),this._off(t.getScrollableParents(n(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)),o||n(r).find(">a,>span").hasClass("aschild")||(this._closeMenu(),this.model.openOnClick&&(this._hoverOpen=!1)),c=n(r).children("a,span").text(),u=n(r).closest("ul").parent("li"),u.length!=0?(f=t.isNullOrUndefined(u.attr("id"))?null:u.attr("id"),e=u.children("a,span").text()):(f=null,e=null),h=t.isNullOrUndefined(r)?"":n(r)[0].id,s={text:c,element:r,event:i,selectedItem:this.selectedItem,ID:h,parentId:f,parentText:e},this._trigger("click",n.extend({events:s},s)),this.selectedItem=null,this.model.openOnClick&&this.model.menuType!="contextmenu"&&this.element.focus())},_onKeyDownHandler:function(i){var l,c,o;if(this.model.menuType!="contextmenu"||this._isContextMenuOpen){var s,e,h="",r=this.element.find(".e-mhover"),f=this.element.find(".e-mfocused"),a,u;if(!n(r).length>0&&n(this._activeElement).length>0&&(r=f=n(this._activeElement)),i.keyCode==9?(this._isFocused=!1,this._OnFocusOutHandler()):(i.keyCode==37||i.keyCode==38||i.keyCode==39||i.keyCode==40)&&i.preventDefault(),i.keyCode==40&&(this.model.orientation=="horizontal"?this.element.find(">li.e-mhover").children("ul").length>0||n(this._activeElement).length>0?(n(r).children("ul").css("display")==="none"&&this._show(r[r.length-1],this._showAnim,this._hideAnim),r.removeClass("e-mhover e-mfocused").children("ul:first").find("li:first").addClass("e-mhover"),this._activeElement==null?r.addClass("e-mfocused"):n(this._activeElement).addClass("e-mfocused")):(u=r.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),n(r[r.length-1]).removeClass("e-mfocused e-mhover"),e=n(u[u.index(r)+1]).length>0?n(u[u.index(r[r.length-1])+1]):u.first(),e.addClass("e-mhover")):this.model.orientation!="horizontal"&&(u=r.length==0?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):r.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),r.removeClass("e-mfocused e-mfocused"),r.length>0?(r.removeClass("e-mhover"),e=n(u[u.index(r[r.length-1])+1]).length>0?n(u[u.index(r[r.length-1])+1]):u.first()):e=u.first(),e.addClass("e-mhover"))),i.keyCode==39&&(this.model.orientation=="horizontal"&&(this.element.find(">li.e-list").hasClass("e-mhover")||n(this._activeElement).length>0)?(r.removeClass("e-mfocused e-mhover"),u=this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e=n(u[u.index(r[r.length-1])+1]).length>0?n(u[u.index(r[r.length-1])+1]):u.first(),e.addClass("e-mhover")):n(r).children("ul").length>0?(r.removeClass("e-mfocused e-mhover"),l=r.children("ul:first").find("li:first"),this._show(r[r.length-1],this._showAnim,this._hideAnim),u=r.addClass("e-mfocused").children("ul:first").children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e=n(u[u.index(l)]).length>0?n(u[u.index(l)]):u.first(),e.addClass("e-mhover")):r.children("ul").length<=0&&this.model.orientation=="horizontal"&&r.parent().closest(".e-list").parent().hasClass("e-menu")&&(this._hideAnimation(r.parent(),this._hideAnim),r.removeClass("e-mfocused e-mhover"),n(f[f.length-1]).removeClass("e-mfocused"),u=r.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e=n(u[u.index(f[f.length-1])+1]).length>0?n(u[u.index(f[f.length-1])+1]):n(u[u.index(f.first())]),e.addClass("e-mhover"))),i.keyCode==38&&(this.model.orientation=="horizontal"?(u=r.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),r.removeClass("e-mfocused e-mhover"),e=n(u[u.index(r[r.length-1])-1]).length>0?n(u[u.index(r[r.length-1])-1]):u.last()):this.model.orientation!="horizontal"&&(u=r.length==0?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):r.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),r.length>0?(r.removeClass("e-mfocused e-mhover"),e=n(u[u.index(r[r.length-1])-1]).length>0?n(u[u.index(r[r.length-1])-1]):u.last()):e=u.last()),e.addClass("e-mhover")),i.keyCode==37&&(this.model.orientation=="horizontal"?this.element.find(">li.e-list").hasClass("e-mhover")||n(this._activeElement).length>0?(r.removeClass("e-mfocused e-mhover"),u=this.element.find("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e=n(u[u.index(r[r.length-1])-1]).length>0?n(u[u.index(r[r.length-1])-1]):u.last(),e.addClass("e-mhover")):(this._hideAnimation(r.parent(),this._hideAnim),r.removeClass("e-mfocused e-mhover"),n(f[f.length-1]).removeClass("e-mfocused e-active"),u=r.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e=r.parent().closest(".e-list").parent(".e-menu").length>0?n(u[u.index(f[f.length-1])-1]).length>0?n(u[u.index(f[f.length-1])-1]):u.last():n(u[u.index(f[f.length-1])]).length>0?n(u[u.index(f[f.length-1])]):u.last(),e.addClass("e-mhover")):(r.parent(".e-menu").length==0||this.model.menuType=="contextmenu"&&r.parent("ul.e-context").length==0)&&(this._hideAnimation(r.parent(),this._hideAnim),r.removeClass("e-mfocused e-mhover"),n(f[f.length-1]).removeClass("e-mfocused"),u=r.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e=n(u[u.index(f[f.length-1])]).length>0?n(u[u.index(f[f.length-1])]):n(u[u.index(f.last())]),e.addClass("e-mhover"))),i.keyCode==13&&(c=n(r).children("a,span").text(),h=t.isNullOrUndefined(n(r)[0])?"":n(r)[0].id,o={menuId:this.element[0].id,text:c,selectedItem:f,ID:h},this.model.menuType=="contextmenu"?this._isContextMenuOpen&&r.length>0&&!f.hasClass("e-disable-item")&&(this.model.click&&this._trigger("click",n.extend({events:o},o)),this.selectedItem=null,this.hideContextMenu(i)):r.length>0&&!r.hasClass("e-disable-item")&&(n(r).find(">a,>span").hasClass("aschild")&&n(r).children("ul").css("display")==="none"?(this._show(r[0],this._showAnim,this._hideAnim),r.removeClass("e-mhover").children("ul:first").find("li:first").addClass("e-mhover")):(this.element.find(".e-mhover >a,.e-mhover >span ").focus(),this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),t.isNullOrUndefined(n(r).find(">a").attr("href"))&&this._trigger("click",n.extend({events:o},o)))),i.keyCode==27&&(this.model.menuType=="contextmenu"?this.hideContextMenu(i):this.element.find("li.e-list").removeClass("e-mhover"),this.element.find('li.e-list:has("> ul")').find("> ul:visible").parents("li.e-list").addClass("e-mhover"),this._closeAll()),n(i.target).is(this.element)&&i.target.parentNode)r.length&&(s=r);else return!1;n.inArray(s,this._disabledMenuItems)>-1||(c=n(s).children("a,span").text(),h=t.isNullOrUndefined(s)?"":n(s)[0].id,(this.element.find("li.e-mfocused.e-mhover").length||i.keyCode==13)&&(a=i.keyCode==13?r:this.element.find("li.e-mfocused.e-mhover")),o={text:c,element:s,targetElement:a,event:i,ID:h},this._trigger("keydown",n.extend({events:o},o)));this._activeElement=null;f=this.element.find(".e-mfocused")}},_OnFocusHandler:function(){this.model.menuType!="contextmenu"&&!this.element.find(">li:first").hasClass("e-disable-item")&&this._isFocused&&this.element.find(".e-mhover").length==0&&n("li.e-ham-wrap").length==0?this.element.find(">li:first").addClass("e-mhover"):this._isFocused=!0;this.model.menuType!="contextmenu"&&(this._activeElement=this.element.find(">li:first"))},_OnFocusOutHandler:function(){this._isFocused||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll());this._isFocused=!1},_onDocumentClick:function(t){this.model.openOnClick&&(this._hoverOpen=!1);n(t.target).parents(".e-menu").is(this.element)||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll(),this._isFocused=!0);n(t.target).parents("ul.e-menu").is(this.popupWrapper)||n(t.target).hasClass("e-ham-wrap")||n(t.target).parent().hasClass("e-ham-wrap")||n(t.target).hasClass("e-hamburger")||n(t.target).parent("li").hasClass("e-haschild")||n(t.target).is("span.e-icon.e-arrowhead-down")||this._isOverflowPopupOpen()||this.model.menuType=="contextmenu"||!(n("li.e-ham-wrap").length>0)||this._overflowClose()},_ContextMenuHandler:function(n){var t=!1,r,i,e,u,f;n.type=="taphold"&&n.button!=0?t=!0:n.button?t=n.button==2:n.which&&(t=n.which==3);r=n.target;t?(i=n,n.type=="taphold"&&(i=n.options.type=="touchstart"?n.options.touches[0]:n.options),e=this._showSpeed,this.showContextMenu(null,null,r,i,!0)):this._isContextMenuOpen&&(u=this._hideAnim,f=this._hideSpeed,this.hideContextMenu(n,u,f))},_calculateContextMenuPosition:function(t){var i,r,u;return this.element.css({top:"",left:""}),i=t.clientX+this.element.width()<n(window).width()?t.pageX:t.pageX-this.element.width(),r=t.clientY+this.element.height()<n(window).height()?t.pageY:t.clientY>this.element.height()?t.pageY-this.element.height():n(window).height()-this.element.outerHeight(),u=n("body").css("position")!="static"?n("body").offset():{left:0,top:0},i-=u.left,r-=u.top,{X:i,Y:r}},_onDefaultPreventer:function(n){return n.preventDefault(),n.stopPropagation(),!1},_onContextClose:function(t){var e=this,i,r,u,f;this._isContextMenuOpen&&(i=!1,(n(t.target).is(this.element)||n(t.target).parents(".e-context").is(this.element))&&(i=!0),i||(r=this._hideAnim,u=this._hideSpeed,this.hideContextMenu(t,r,u),f=n(t.target).parents(),n.each(f,function(n,t){t.id==e._ContextTargetId})))}});t.Menu.Locale=t.Menu.Locale||{};t.Menu.Locale["default"]=t.Menu.Locale["en-US"]={titleText:"Menu"};t.MenuType={NormalMenu:"normalmenu",ContextMenu:"contextmenu"};t.Direction={Left:"left",Right:"right",None:"none"};t.AnimationType={None:"none",Default:"default"}}(jQuery,Syncfusion),function(n,t,i,r){"use strict";t.widget("ejScrollBar","ej.ScrollBar",{defaults:{orientation:"horizontal",viewportSize:0,height:18,width:18,smallChange:57,largeChange:57,value:0,maximum:0,minimum:0,buttonSize:18,infiniteScrolling:!1},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",smallChange:"number",largeChange:"number"},observables:["value"],value:t.util.valueFunction("value"),_enabled:!0,content:function(){return this._content&&this._content.length||(this._content=this.model.orientation==="horizontal"?this.element.find(".e-hhandle"):this.element.find(".e-vhandle")),this._content},_init:function(){this.element.addClass("e-widget");this._ensureScrollers();this.content();this._setInitialValues()},_setInitialValues:function(){var n="X";this.model.orientation===t.ScrollBar.Orientation.Horizontal?this.element.addClass("e-hscrollbar"):(this.element.addClass("e-vscrollbar"),n="Y");(this.value()!==0||this.model.minimum!==0)&&(this.value()<this.model.minimum&&this.value(this.model.minimum),this.scroll(this.value(),"none"))},_ensureScrollers:function(){var t=n.fn.jquery;this.model.height&&this.element.height(this.model.height);this.model.width&&this.element.width(this.model.width);this._scrollData||(this._scrollData=this.model.orientation==="vertical"?this._createScroller("Height","Y","Top","e-v"):this._createScroller("Width","X","Left","e-h"))},_setModel:function(n){for(var t in n)if(t==="value")this.value()&&this.scroll(this.value(),"none");else{this.refresh();break}},_createScroller:function(t,i,r,u){var f={},o=n.fn.jquery,e;return f.dimension=t,f.xy=i,f.position=r,f.css=u,f.uDimension=t,this._calculateLayout(f),this._createLayout(f),e=this[f.main].find(".e-button"),this._off(e,"mousedown")._on(e,"mousedown",{d:f,step:1},this._spaceMouseDown),this._off(this[f.scroll],"mousedown")._on(this[f.scroll],"mousedown",{d:f},this._spaceMouseDown),this._off(this[f.handler],"mousedown touchstart")._on(this[f.handler],"mousedown touchstart",{d:f},this._mouseDown),f},_createLayout:function(i){var r="<div class='"+i.css+"{0}' style='"+i.dimension+":{1}px'>{2}<\/div>",u=n.fn.jquery,f={},o,e;f[i.dimension]=i.modelDim;e=t.buildTag("div."+i.css+"scroll e-box",String.format(r,"up e-chevron-up_01 e-icon e-box e-button",i.buttonSize)+String.format(r,"handlespace",i.handleSpace,String.format(r,"handle e-box e-pinch",i.handle))+String.format(r,"down e-chevron-down_01 e-icon e-box e-button",i.buttonSize),f);this.element.append(e);this.element.find(".e-vhandle").addClass("e-v-line e-icon");this.element.find(".e-hhandle").addClass("e-h-line e-icon");o=u==="1.7.1"||u==="1.7.2"?i.uDimension.toLowerCase():"outer"+i.uDimension;this[i.handler]=this.element.find("."+i.handler);this[i.handler].css("transition","none");this[i.scroll]=this[i.handler].parent();this[i.main]=this[i.scroll].parent();this[i.main].find(".e-button")["outer"+i.uDimension](i.buttonSize)},_calculateLayout:function(n){var i,u;n.scrollDim="scroll"+n.dimension;n.lPosition=n.position.toLowerCase();n.clientXy="page"+n.xy;n.scrollVal="scroll"+n.position;n.scrollOneStepBy=this.model.smallChange;n.modelDim=this.model[n.dimension=n.dimension.toLowerCase()];n.handler=n.css+"handle";n.buttonSize=this.model.buttonSize;n.main=n.css+"scroll";n.scroll=n.css+"ScrollSpace";n.handleSpace=n.modelDim-2*n.buttonSize;n.scrollable=this.model.maximum-this.model.minimum;i=this.model.height;this.model.orientation==="horizontal"&&(i=this.model.width);n.handle=this.model.viewportSize/(this.model.maximum-this.model.minimum+this.model.viewportSize)*(i-2*this.model.buttonSize);u=!t.isNullOrUndefined(this.model.elementHeight)&&typeof this.model.elementHeight=="string"&&this.model.elementHeight.indexOf("%")!=-1?!0:!1;n.handle<20&&!u&&(n.handle=20);n.onePx=n.scrollable/(n.handleSpace-n.handle);n.fromScroller=!1;n.up=!0;n.vInterval=r},_updateLayout:function(n){this.element.height(this.model.height);this.element.width(this.model.width);var t=this.element.find("."+n.css+"handle"),f=this.element.find("."+n.css+"handlespace"),u=n.dimension=="width"?t.css("left"):t.css("top"),i=n.dimension=="width"?f.outerWidth():f.outerHeight();u!==r&&u!=="auto"&&(i>=n.handle+parseFloat(u)||(this.model.enableRTL?t.css(n.dimension==="width"?"left":"top",parseFloat(i)-n.handle):t.css(n.dimension==="width"?"left":"top",parseFloat(i)-n.handle>0?parseFloat(i)-n.handle:0)));this.element.find("."+n.css+"scroll").css(n.dimension,n.modelDim+"px").find(".e-button").css(n.dimension,this.model.buttonSize).end().find("."+n.css+"handlespace").css(n.dimension,n.handleSpace+"px").find("."+n.css+"handle").css(n.dimension,n.handle+"px")},refresh:function(){this._ensureScrollers();this.value()&&this.scroll(this.value(),"none");this._scrollData&&(this._calculateLayout(this._scrollData),this._updateLayout(this._scrollData))},scroll:function(n,i,r,u){var o=this._scrollData,f,e;if(!r)if(this.model.orientation===t.ScrollBar.Orientation.Horizontal){if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollLeft:n,originalEvent:u}))return}else if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollTop:n,originalEvent:u}))return;this._scrollData&&(this._scrollData.enableRTL&&(u=="mousemove"||u=="touchmove")&&t.browserInfo().name!="msie"?this.value(-o.scrollable+n):this._scrollData.enableRTL&&(u=="mousemove"||u=="touchmove")&&t.browserInfo().name=="msie"?this.value(-1*n):this.value(n),this.content().length>0&&(this.model.orientation===t.ScrollBar.Orientation.Horizontal?(f=this.element.find(".e-hhandlespace").width()-this.element.find(".e-hhandle").outerWidth(),n=f<(n-this.model.minimum)/this._scrollData.onePx?f:(n-this.model.minimum)/this._scrollData.onePx,this._scrollData.enableRTL&&(u=="mousemove"||u=="touchmove")&&t.browserInfo().name!="msie"&&(n=f-n,n>0?n=n*-1:n),this._scrollData.enableRTL&&(u=="mousemove"||u=="touchmove")&&t.browserInfo().name=="msie"&&(n=-n),this._scrollData.enableRTL&&n>0&&!this._scrollData._scrollleftflag?n=0:n,this._scrollData._scrollleftflag&&(n>0?n=n*-1:n,this.value(n)),this.content()[0].style.left=n+"px",this._scrollData._scrollleftflag=!1):(e=this.element.find(".e-vhandlespace").height()-this.element.find(".e-vhandle").outerHeight(),n=e<(n-this.model.minimum)/this._scrollData.onePx?e:(n-this.model.minimum)/this._scrollData.onePx,t.browserInfo().name=="msie"&&isNaN(n)&&(n=""),this.content()[0].style.top=n+"px")))},_changeTop:function(n,t,i){var u,r;return u=n.dimension==="height"?this.value():this.value(),r=u+t,n.step=t,n.enableRTL&&t<0||t>0&&!n.enableRTL?n.enableRTL?r<this.model.maximum*-1&&(r=this.model.maximum*-1):r>this.model.maximum&&(r=this.model.maximum):n.enableRTL?r>this.model.minimum&&(r=this.model.minimum):r<this.model.minimum&&(r=this.model.minimum),(r!==u||this.model.infiniteScrolling)&&this.scroll(r,i),r!==u},_mouseUp:function(i){if(i.data){var r=i.data.d;clearInterval(r.vInterval);i.type=="touchend"&&n(i.target).removeClass("e-touch");i.type!=="mouseup"&&i.type!=="touchend"&&(i.toElement||i.relatedTarget||i.target)||(this._prevY=this._d=this._data=null,this._off(n(document),"mousemove touchmove",this._mouseMove),n(document).off("mouseup touchend",t.proxy(this._mouseUp,this)),r.fromScroller=!1,this[r.scroll].off("mousemove"),this[r.handler].off("mousemove").css("transition",""),i.data.source!=="thumb"||t.isNullOrUndefined(this.model)||n.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:i,scrollData:r})},this)));r.up=!0}},_mouseDown:function(i){if(this._enabled){this._d=i;this._data=this._d.data.d;this._data.target=this._d.target;this._data.fromScroller=!0;this[this._data.handler].css("transition","none");this._on(n(document),"mousemove touchmove",{d:this._data,source:"thumb"},this._mouseMove);this._trigger("thumbStart",{originalEvent:this._d,scrollData:this._data});n(document).one("mouseup touchend",{d:this._data,source:"thumb"},t.proxy(this._mouseUp,this));i.type=="touchstart"&&n(i.target).addClass("e-touch")}},_mouseCall:function(n){n.type="mouseup";this._mouseUp(n)},_mouseMove:function(i){var u,f=0,r=parseInt(this[this._data.handler].css(this._data.lPosition))||0,o,e;if(i.preventDefault(),o=1,t.isNullOrUndefined(i.target.tagName)){if(n(i.target).is(document)){this._mouseCall(i);return}}else if(i.target.tagName.toLowerCase()==="iframe"){this._mouseCall(i);return}e=i.type=="mousemove"?i[this._data.clientXy]:i.originalEvent.changedTouches[0][this._data.clientXy];this._prevY&&e!==this._prevY&&(f=e-this._prevY,this.model.infiniteScrolling?(r=r+f,this._data.step=f,(this._data.enableRTL?r>0:r<0)&&(r=0),r*(this._data.enableRTL?-1:1)+this._data.handle>=this._data.handleSpace&&(r=(this._data.handleSpace-this._data.handle)*(this._data.enableRTL?-1:1)),u=Math.ceil(r*this._data.onePx),this.scroll(u,"thumb")):(u=f*this._data.onePx,this._changeTop(this._data,u,"thumb",this._d)),this._trigger("thumbMove",{originalEvent:i,scrollData:this._data}));o===1&&(this._prevY=e)},_spaceMouseDown:function(i){var r,u,f;if(i.data&&this._enabled&&(r=i.data.d,i.which===1&&i.target!==this[r.handler][0])){u=i.data.step?this.model.smallChange:this.model.largeChange;f=i.data.top||this[r.handler].offset()[r.lPosition];i[r.clientXy]=i[r.clientXy]||0;i[r.clientXy]<f&&(u*=-1);r.target=i.target;this._changeTop(r,u,u===3?"track":"button",i);i.data.step!==1&&this[r.scroll].mousemove(function(){r.up=!0});r.up=!1;r.vInterval=setInterval(t.proxy(function(){if((u<0?f+u/r.onePx<i[r.clientXy]:f+r.handle+u/r.onePx>i[r.clientXy])&&(r.up=!0),r.up){clearInterval(r.vInterval);return}this._changeTop(r,u,u===3?"track":"button",i);f=i.data?i.data.top||this[r.handler].offset()[r.lPosition]:this[r.handler].offset()[r.lPosition]},this),150);n(document).one("mouseup",{d:r},t.proxy(this._mouseUp,this));n(document).mouseout({d:r},t.proxy(this._mouseUp,this))}},_remove:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal&&this.element.find(".e-hscroll").remove();this.model.orientation===t.ScrollBar.Orientation.Vertical&&this.element.find(".e-vscroll").remove();this._scrollData=null;this._content=null},_destroy:function(){this.element.remove()}});t.ScrollBar.Orientation={Horizontal:"horizontal",Vertical:"vertical"}}(jQuery,Syncfusion,window),function(n,t,i,r){"use strict";t.widget("ejScroller","ej.Scroller",{_addToPersist:["scrollLeft","scrollTop"],defaults:{height:250,autoHide:!1,animationSpeed:600,width:0,scrollOneStepBy:57,buttonSize:18,scrollLeft:0,scrollTop:0,targetPane:null,scrollerSize:18,enablePersistence:!1,enableRTL:r,enableTouchScroll:!0,enabled:!0,create:null,destroy:null,wheelStart:null,wheelMove:null,wheelStop:null},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",scrollOneStepBy:"number"},observables:["scrollTop","scrollLeft"],scrollTop:t.util.valueFunction("scrollTop"),scrollLeft:t.util.valueFunction("scrollLeft"),keyConfigs:{up:"38",down:"40",left:"37",right:"39",pageUp:"33",pageDown:"34",pageLeft:"ctrl+37",pageRight:"ctrl+39"},content:function(){return this._content&&this._content.length&&this._content[0].offsetParent||(this._content=this.element.children().first().addClass("e-content")),this._content},_setFirst:!0,_updateScroll:!1,_init:function(){t.isNullOrUndefined(this.content()[0])||(this._prevScrollWidth=this.content()[0].scrollWidth,this._prevScrollHeight=this.content()[0].scrollHeight,this.element.addClass("e-widget"),this.content(),this._browser=t.browserInfo().name,this._wheelStart=!0,this._eleHeight=this.model.height,this._eleWidth=this.model.width,this.model.enableRTL===r&&(this.model.enableRTL=this.element.css("direction")==="rtl"),this._ensureScrollers(),this.model.enableRTL&&(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft()),this._on(this.content(),"scroll",this._scroll),this.model.targetPane!=null&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this.scrollLeft()&&this._setScrollLeftValue(this.scrollLeft()),this.scrollTop()&&this.content().scrollTop(this.scrollTop()),this.model.autoHide&&this._autohide(),this.model.enabled?this.enable():this.disable(),this._setDimension(),(this._prevScrollWidth!==this.content()[0].scrollWidth||this._prevScrollHeight!==this.content()[0].scrollHeight)&&this.refresh());this._addActionClass()},_addActionClass:function(){this._browser=="msie"&&(this.content().removeClass("e-pinch e-pan-x e-pan-y"),this._vScrollbar&&this._hScrollbar?this.content().addClass("e-pinch"):this._vScrollbar&&!this._hScrollbar?this.content().addClass("e-pan-x"):this._hScrollbar&&!this._vScrollbar&&this.content().addClass("e-pan-y"))},_setDimension:function(){t.isNullOrUndefined(this.model.height)||typeof this.model.height!="string"||this.model.height.indexOf("%")==-1||(this._vScroll?this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),this.element.parent().height()):n(this.content()[0]).height(""));t.isNullOrUndefined(this.model.width)||typeof this.model.width!="string"||this.model.width.indexOf("%")==-1||(this._hScroll?this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),this.element.parent().width()):n(this.content()[0]).width(""))},_setScrollLeftValue:function(n){this.model.enableRTL&&(n=t.browserInfo().name=="mozilla"?n<0?n:n*-1:!t.isNullOrUndefined(this._rtlScrollLeftValue)&&(t.browserInfo().name=="chrome"||this._rtlScrollLeftValue>0)?n<0?this._rtlScrollLeftValue+n:this._rtlScrollLeftValue-n:Math.abs(n));this.content().scrollLeft(n)},_ensureScrollers:function(){var u=n.fn.jquery,f;if(this.model.height=typeof this.model.height=="string"&&this.model.height.indexOf("px")!=-1?parseInt(this.model.height):this.model.height,this.model.width=typeof this.model.width=="string"&&this.model.width.indexOf("px")!=-1?parseInt(this.model.width):this.model.width,this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._off(this.content(),"mousedown touchstart"),this.content().length>0){if(this.isVScroll()?(this._vScrollbar||(this._vScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Vertical,this.isHScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent)):(this._vScrollbar=null,this.element.children(".e-vscrollbar").remove()),this.isHScroll()?(this._hScrollbar||(this._hScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Horizontal,this.isVScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):(this._hScrollbar=null,this.element.children(".e-hscrollbar").remove()),this._vScrollbar||this._hScrollbar||this.content().css({width:"auto",height:"auto"}),this.element.find(".e-hscroll").length>0||this._vScrollbar&&this.content().outerHeight(this.content().outerHeight()-1),u==="1.7.1"||u==="1.7.2"?(this._contentHeight="height",this._contentWidth="width"):(this._contentHeight="outerHeight",this._contentWidth="outerWidth"),this._hScroll=this.isHScroll(),this._vScroll=this.isVScroll(),this._hScroll||this._vScroll){if(this.content().addClass("e-content"),f=this._exactElementDimension(this.element),this._elementDimension(f),this.model.targetPane!==null&&this.content().find(this.model.targetPane)[0]!==r&&(this.content().find(this.model.targetPane)[0].scrollLeft=this.scrollLeft()),isNaN(this._eleWidth)&&this._eleWidth.indexOf("%")>0&&isNaN(this._eleHeight)&&this._eleHeight.indexOf("%")>0)n(i).on("resize",n.proxy(this._resetScroller,this))}else this.content().removeClass("e-content");this._setDimension();this._parentHeight=n(this.element).parent().height();this._parentWidth=n(this.element).parent().width()}},_elementDimension:function(n){this._ElementHeight=n.height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top);this.content()[this._contentHeight](this._ElementHeight-(this._hScroll&&!this.model.autoHide?this.model.scrollerSize:this.element.find(".e-hscrollbar").is(":visible")?this.model.scrollerSize:0));this._ElementWidth=n.width-(this.border_left+this.border_right+this.padding_left+this.padding_right);this.content()[this._contentWidth](this._ElementWidth-(this._vScroll&&!this.model.autoHide?this.model.scrollerSize:this.element.find(".e-vscrollbar").is(":visible")?this.model.scrollerSize:0))},_convertPercentageToPixel:function(n,t){return Math.floor(n*t/100)},isHScroll:function(){if(t.isNullOrUndefined(this.model.width)||typeof this.model.width!="string"||this.model.width.indexOf("%")==-1){if(this.model.width>0){var i=this.content().find(this.model.targetPane);if(this.model.targetPane!=null&&i.length)return i[0].scrollWidth+i.siblings().width()>this.model.width;if(this.content()[0].scrollWidth>this.model.width)return!0;if(this.content()[0].scrollWidth==this.model.width){if(this.model.autoHide&&n(this.content()[0]).find("> *").length>0)return n(this.content()[0]).find("> *")[0].scrollWidth>n(this.content()[0]).width();if(n(this.content()[0]).find("> *").length>0)return n(this.content()[0]).find("> *")[0].scrollWidth>this.model.width}return!1}return!1}return this.content()[0].scrollWidth>this.element.width()},isVScroll:function(){if(t.isNullOrUndefined(this.model.height)||typeof this.model.height!="string"||this.model.height.indexOf("%")==-1){if(this.model.height>0&&(this.content()[0].scrollHeight>Math.ceil(this.model.height)||this.isHScroll()&&(this.content()[0].scrollHeight==this.model.height||this.content()[0].scrollHeight>this.model.height-(this.model.scrollerSize-2))))return!0}else return this.content()[0].scrollHeight>this.element.outerHeight();return!1},_setModel:function(n){for(var i in n)switch(i){case"enableRTL":n[i]?(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!0)):(this.element.removeClass("e-rtl"),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!1));this._hScrollbar&&(this.element.find(".e-hhandle").css("left",0),this._hScrollbar.value(0));break;case"scrollLeft":(parseFloat(t.util.getVal(n[i]))<0||!this._hScroll)&&(n[i]=0);this._externalCall=!0;this._hScrollbar&&(n[i]=parseFloat(t.util.getVal(n[i]))>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(t.util.getVal(n[i])));this._setScrollLeftValue(parseFloat(n[i]));this.scrollLeft(n[i]);!this._hScrollbar||this._hScrollbar._scrollData._scrollleftflag&&this.model.enableRTL||this.scrollX(n[i],!0);break;case"scrollTop":this._vScrollbar&&(n[i]=parseFloat(t.util.getVal(n[i]))>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(t.util.getVal(n[i])));(parseFloat(n[i])<0||!this._vScroll)&&(n[i]=0);this._externalCall=!0;this.content().scrollTop(parseFloat(n[i]));this.scrollTop(n[i]);this.scrollY(n[i],!0);this.refresh();break;case"touchScroll":this.model.enableTouchScroll?(this._vScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent),this._hScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):this._off(this.content(),"mousedown touchstart");break;case"scrollOneStepBy":this._vScrollbar&&(this._vScrollbar._scrollData.scrollOneStepBy=n[i],this._vScrollbar.model.smallChange=n[i]);this._hScrollbar&&(this._hScrollbar._scrollData.scrollOneStepBy=n[i],this._hScrollbar.model.smallChange=n[i]);break;case"buttonSize":this._vScrollbar&&(this._vScrollbar.model.buttonSize=this.model.buttonSize);this._hScrollbar&&(this._hScrollbar.model.buttonSize=this.model.buttonSize);this.refresh();break;case"height":this._eleHeight=n[i];this.refresh();break;case"width":this._eleWidth=n[i];this.refresh();break;case"enabled":n[i]?this.enable():this.disable();break;default:this.refresh()}},_createScrollbar:function(i,r){var c=this,f,o,l,s,a,h=document.createElement("div"),e,u;return i===t.ScrollBar.Orientation.Vertical?(o=this.model.scrollerSize,l=t.isNullOrUndefined(this.model.height)||typeof this.model.height!="string"||this.model.height.indexOf("%")==-1?f=this.model.height-(r?this.model.scrollerSize:0):f=this.element.height()-(r?this.model.scrollerSize:0),s=this.content()[0].scrollHeight,a=this.scrollTop()):(o=f=this.model.width-(r?this.model.scrollerSize:0),l=this.model.scrollerSize,t.isNullOrUndefined(this.model.width)||typeof this.model.width!="string"||this.model.width.indexOf("%")==-1?(e=this.content().find(this.model.targetPane),s=this.model.targetPane!=null&&e.length?e[0].scrollWidth+e.parent().width()-e.width():this.content()[0].scrollWidth):(o=f=this.element.width()-(r?this.model.scrollerSize:0),s=this.content()[0].scrollWidth),a=this.scrollLeft()),this.element.children(".e-hscrollbar").length>0?n(this.element.children(".e-hscrollbar")).before(h):this.element.append(h),n(h).ejScrollBar({elementHeight:c._eleHeight,elementWidth:c._eleWidth,buttonSize:c.model.buttonSize,orientation:i,viewportSize:f,height:l,width:o,maximum:s-f,value:a,smallChange:this.model.scrollOneStepBy,largeChange:3*this.model.scrollOneStepBy,scroll:t.proxy(this._scrollChanged,this),thumbEnd:t.proxy(this._thumbEnd,this),thumbStart:t.proxy(this._thumbStart,this),thumbMove:t.proxy(this._thumbMove,this)}),u=n(h).ejScrollBar("instance"),i!==t.ScrollBar.Orientation.Vertical&&r||this._off(this.element,this._browser=="msie"?"wheel mousewheel":"mousewheel DOMMouseScroll",this._mouseWheel)._on(this.element,this._browser=="msie"?"wheel mousewheel":"mousewheel DOMMouseScroll",{d:u._scrollData},this._mouseWheel),i===t.ScrollBar.Orientation.Horizontal?this._scrollXdata=u._scrollData:this._scrollYdata=u._scrollData,i===t.ScrollBar.Orientation.Horizontal&&this.model.enableRTL&&(u._scrollData.enableRTL=!0),u._enabled=this.model.enabled,u},_updateScrollbar:function(i,r){var u=i===t.ScrollBar.Orientation.Vertical?this._vScrollbar:this._hScrollbar;u&&(i===t.ScrollBar.Orientation.Vertical?(u.model.width=this.model.scrollerSize,u.model.height=u.model.viewportSize=this.model.height-(r?this.model.scrollerSize:0),u.model.maximum=this.content()[0].scrollHeight-u.model.viewportSize,u.model.value=this.scrollTop()):(u.model.width=u.model.viewportSize=this.model.width-(r?this.model.scrollerSize:0),u.model.height=this.model.scrollerSize,u.model.maximum=(this.model.targetPane!=null&&this.content().find(this.model.targetPane).length>0?this.content().find(this.model.targetPane)[0].scrollWidth+(this.content().width()-n(this.model.targetPane).outerWidth()):this.content()[0].scrollWidth)-u.model.viewportSize,this.model.enableRTL||(u.model.value=this.scrollLeft())))},_autohide:function(){this.model.autoHide?(this.element.addClass("e-autohide"),this._on(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").hide(),this._elementDimension(this._exactElementDimension(this.element))):(this.element.removeClass("e-autohide"),this._off(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").show())},_scrollChanged:function(i){this._updateScroll=!0;i.scrollTop!==r?this.scrollY(i.scrollTop,!0,"",i.source):i.scrollLeft!==r&&this.scrollX(i.scrollLeft,!0,"",i.source);this._updateScroll=!1;var u=this;n.when(this.content()).done(t.proxy(function(){u._trigger("scrollEnd",{scrollData:i})}))},_bindBlurEvent:function(r,u){this._scrollEle=n(r).data("ejScrollBar");this._event=u;var f=this;this._listener=function(){this._scrollEle._off(n(document),"mousemove touchmove",this._scrollEle._mouseMove);n(document).off("mouseup touchend",t.proxy(this._scrollEle._mouseUp,this._scrollEle));this._scrollEle._prevY=null;this._off(n(document),"mousemove touchmove",this._mouseMove);this._off(n(document),"mouseup touchend",this._mouseUp);this._off(n(i),"blur");this._evtData.handler==="e-vhandle"?this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData}):this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData})};this._on(n(i),"blur",this._listener)},_thumbStart:function(n){this._evtData=n.scrollData;var t=n.scrollData.handler==="e-vhandle"?this.element.find("."+n.scrollData.handler).closest(".e-scrollbar"):this.element.find("."+n.scrollData.handler).closest(".e-scrollbar"),t=n.scrollData.handler==="e-vhandle"?this.element.find("."+n.scrollData.handler).closest(".e-scrollbar"):this.element.find("."+n.scrollData.handler).closest(".e-scrollbar");this._bindBlurEvent(t,n);this._trigger("thumbStart",n)},_thumbMove:function(n){this._trigger("thumbMove",n)},_thumbEnd:function(t){this._trigger("thumbEnd",t);this._off(n(i),"blur")},refresh:function(i){var r,u;i||this.element.find(">.e-content").removeAttr("style");t.isNullOrUndefined(this._eleHeight)||typeof this._eleHeight!="string"||this._eleHeight.indexOf("%")==-1||this._parentHeight==n(this.element).parent().height()||(r=this._exactElementDimension(this.element.parent()),r=r.height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),r));t.isNullOrUndefined(this._eleWidth)||typeof this._eleWidth!="string"||this._eleWidth.indexOf("%")==-1||this._parentWidth==n(this.element).parent().width()||(r=this._exactElementDimension(this.element.parent()),r=r.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),r));this._ensureScrollers();u=this.scrollLeft();this.model.enableRTL?(this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),u>0?this.content().scrollLeft(u):this._setScrollLeftValue(u)):this.content().scrollLeft(u);(this.scrollTop()&&t.isNullOrUndefined(this._vScrollbar)||!t.isNullOrUndefined(this._vScrollbar)&&this._vScrollbar&&this._vScrollbar._scrollData!=null&&!this._vScrollbar._scrollData.skipChange)&&this.content().scrollTop(this.scrollTop());this._vScrollbar&&(this._vScrollbar._scrollData.dimension="Height",this._updateScrollbar(t.ScrollBar.Orientation.Vertical,this._hScroll),this._vScroll&&!this._vScrollbar._calculateLayout(this._vScrollbar._scrollData)&&this._vScrollbar._updateLayout(this._vScrollbar._scrollData));this._hScrollbar&&(this._hScrollbar._scrollData.dimension="Width",this._updateScrollbar(t.ScrollBar.Orientation.Horizontal,this._vScroll),this._hScroll&&!this._hScrollbar._calculateLayout(this._hScrollbar._scrollData)&&this._hScrollbar._updateLayout(this._hScrollbar._scrollData));t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"?this.element.find(".e-hhandle").css("left","0px"):this.model.targetPane!=null&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll);this._addActionClass();this._autohide()},_exactElementDimension:function(n){var i=n.get(0).getBoundingClientRect(),r=["left","right","top","bottom"],u,f,t;for(u=i.width?i.width:i.right-i.left,f=i.height?i.height:i.bottom-i.top,t=0;t<r.length;t++)this["border_"+r[t]]=isNaN(parseFloat(n.css("border-"+r[t]+"-width")))?0:parseFloat(n.css("border-"+r[t]+"-width")),this["padding_"+r[t]]=isNaN(parseFloat(n.css("padding-"+r[t])))?0:parseFloat(n.css("padding-"+r[t]));return{width:u,height:f}},_keyPressed:function(n,i){if(this.model.enabled){if(["input","select","textarea"].indexOf(i.tagName.toLowerCase())!==-1)return!0;var r,u;if(["up","down","pageUp","pageDown"].indexOf(n)!==-1)this._vScrollbar&&(t.browserInfo().name=="msie"&&this.model.allowVirtualScrolling&&this._content.focus(),r=this._vScrollbar._scrollData),u="o";else if(["left","right","pageLeft","pageRight"].indexOf(n)!==-1)this._hScrollbar&&(r=this._hScrollbar._scrollData),u="i";else return!0;return r?!this._changeTop(r,(n.indexOf(u)<0?-1:1)*(n[0]!=="p"?1:3)*r.scrollOneStepBy,"key"):!0}},scrollY:function(n,i,r,u,f){var e=this,f;if(n!==""){if(i){if(f={source:u||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:n,originalEvent:f},n=f.scrollTop,this.scrollTop(n),this._trigger("scroll",f))return;this.content().scrollTop(n);return}(t.isNullOrUndefined(r)||r==="")&&(r=100);this._vScrollbar&&(n=parseFloat(n)>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(n));this.scrollTop(n);this.content().stop().animate({scrollTop:n},r,"linear",function(){e._trigger("scroll",{source:u||"custom",scrollData:e._vScrollbar?e._vScrollbar._scrollData:null,scrollTop:n,originalEvent:f})})}},scrollX:function(n,i,r,u,f){var o=this,e,s;if(n!==""){if(this._hScrollbar&&(n=parseFloat(n)>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(n)),this._externalCall=!0,e=t.browserInfo().name,this.model.enableRTL&&e!="mozilla"&&(n<0&&(n=Math.abs(n)),s=this.model.targetPane!=null?this.content().find(this.model.targetPane)[0]:this.content()[0],f!="mousemove"&&f!="touchmove"&&e!="msie"&&e!="msie"&&(n=this._hScrollbar._scrollData.scrollable-n)),this.scrollLeft(n),i){if(this._trigger("scroll",{source:u||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:n,originalEvent:f}))return;this.model.targetPane!=null&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).scrollLeft(n):this.content().scrollLeft(n);return}(t.isNullOrUndefined(r)||r==="")&&(r=100);this.model.targetPane!=null&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).stop().animate({scrollLeft:n},r,"linear"):this.content().stop().animate({scrollLeft:n},r,"linear",function(){o._trigger("scroll",{source:u||"custom",scrollData:o._hScrollbar?o._hScrollbar._scrollData:null,scrollLeft:n,originalEvent:f})})}},enable:function(){var n=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");n.hasClass("e-disable")&&(n.removeClass("e-disable").attr({"aria-disabled":!1}),this.model.enabled=!0);this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled);this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},disable:function(){var n=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");n.addClass("e-disable").attr({"aria-disabled":!0});this.model.enabled=!1;this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled);this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},_changeTop:function(n,i,r,u){var e=Math.ceil(this.model.targetPane!=null&&n.dimension!="height"?this.content().find(this.model.targetPane)[n.scrollVal]():this.content()[n.scrollVal]()),f;return n.dimension=="height"&&e==0&&(e=this.scrollTop()!=0?this.scrollTop():0),f=e+i,(n.enableRTL?f<n.scrollable:f>n.scrollable)&&(f=Math.round(n.scrollable)),(n.enableRTL?f>0:f<0)&&(f=0),f!==e&&(this["scroll"+n.xy](f,!0,"",r,u),n.xy!=="X"||t.isNullOrUndefined(this._hScrollbar)?t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(f,r,!0,u):this._hScrollbar.scroll(f,r,!0,u)),f!==e},_mouseWheel:function(t){var o;if((!this._vScrollbar||!t.ctrlKey)&&(this._vScrollbar||t.shiftKey)&&t.data&&this.model.enabled){var u=0,f=t.data.d,r=t,e;if(t=t.originalEvent,this._wheelStart&&this._trigger("wheelStart",{originalEvent:t,scrollData:r.data.d}),this._wheelStart=!1,clearTimeout(n.data(this,"timer")),this._wheelx!=1&&(t.wheelDeltaX==0||t.wheelDeltaY==0)&&(this._wheelx=1),navigator.platform.indexOf("Mac")==0&&this._wheelx==0&&(this._browser=="webkit"||this._browser=="chrome"))return!0;(this._browser=="mozilla"?t.axis==t.HORIZONTAL_AXIS?f=this._scrollXdata:this._scrollYdata:this._browser=="msie"?(t.type=="wheel"&&(u=t.deltaX/120),t.type=="mousewheel"&&t.shiftKey&&(f=this._scrollXdata,t.preventDefault?t.preventDefault():t.returnValue=!1)):this._wheelx&&t.wheelDeltaX!=0&&t.wheelDeltaY==0&&this._scrollXdata&&(f=this._scrollXdata),t.wheelDeltaX==0&&(this._wheelx=t.wheelDeltaX),t.wheelDelta?(u=this._normalizingDelta(t),i.opera&&parseFloat(i.opera.version,10)<10&&(u=-u)):t.detail&&(u=t.detail/3),u)&&(r.originalEvent&&(e=r.originalEvent.wheelDelta&&r.originalEvent.wheelDelta>0||r.originalEvent.detail&&r.originalEvent.detail<0?-1:1),this._changeTop(f,u*f.scrollOneStepBy,"wheel",t)?(t.preventDefault?t.preventDefault():r.preventDefault(),r.stopImmediatePropagation(),r.stopPropagation(),this._trigger("wheelMove",{originalEvent:t,scrollData:r.data.d,direction:e})):(this._trigger("scrollEnd",{originalEvent:t,scrollData:r}),this._wheelx=0),o=this,n.data(this,"timer",setTimeout(function(){o._wheelStart=!0;o._trigger("wheelStop",{originalEvent:t,scrollData:r.data.d,direction:e})},250)))}},_normalizingDelta:function(n){return navigator.platform.indexOf("Mac")==0?-n.wheelDelta/3:-n.wheelDelta/120},_contentHeightWidth:function(){this.content().siblings().css("display")=="block"&&this.model.autoHide?(this._hScroll&&this.content()[this._contentHeight](this._ElementHeight-this.model.scrollerSize),this._vScroll&&this.content()[this._contentWidth](this._ElementWidth-this.model.scrollerSize)):this.content().siblings().css("display")=="none"&&this.model.autoHide&&(this._vScroll||this._hScroll)&&(this.content()[this._contentHeight](this._ElementHeight),this.content()[this._contentWidth](this._ElementWidth))},_scrollerHover:function(n){this.model.enabled&&(n.type!="mouseenter"&&n.type!="touchstart"||this.content().siblings().is(":visible")?(n.type=="mouseleave"||n.type=="touchend")&&(this.content().siblings().hide(),this._contentHeightWidth(),this._trigger("scrollHide",{originalEvent:n})):(this.content().siblings().css("display","block"),this._contentHeightWidth(),this._ensureScrollers(),this._setScrollLeftValue(this.model.scrollLeft),this._trigger("scrollVisible",{originalEvent:n})))},_mouseUp:function(r){if(r.data){var u=r.data.d;r.type!=="mouseup"&&r.type!=="touchend"&&(r.toElement||r.relatedTarget)||(this.content().css("cursor","default"),this._off(n(document),"mousemove touchmove"),this._off(n(document),"mouseup touchend",this._mouseUp),u.fromScroller=!1,this._mouseMoved!==!0||r.data.source!=="thumb"||t.isNullOrUndefined(this.model)||(n.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:r,scrollData:u})},this)),this._off(n(i),"blur")));u.up=!0;i.ontouchmove=null}},_mouseDownOnContent:function(u){var f,s;if((this._startX=u.clientX!=r?u.clientX:u.originalEvent.changedTouches[0].clientX,this._startY=u.clientY!=r?u.clientY:u.originalEvent.changedTouches[0].clientY,this._timeStart=u.timeStamp||Date.now(),this.model.enabled)&&(f=u.data.d,this._evtData=u.data,s=f.handler==="e-vhandle"?this.element.find("."+f.handler).closest(".e-scrollbar"):this.element.find("."+f.handler).closest(".e-scrollbar"),this._bindBlurEvent(s,u),!this._trigger("thumbStart",{originalEvent:u,scrollData:f}))&&(u.which!=3||u.button!=2)){f.fromScroller=!0;var e=null,o=1,c=5,h;this._document=n(document);this._window=n(i);this._mouseMove=function(n){var s,l,u;if(this._startX+this._startY!=n.clientX+n.clientY){if(this._relDisX=(this._startx=n.clientX!=r?n.clientX:n.originalEvent.changedTouches[0].clientX)-this._startX,this._relDisY=(this._starty=n.clientY!=r?n.clientY:n.originalEvent.changedTouches[0].clientY)-this._startY,this._duration=(n.timeStamp||Date.now())-this._timeStart,this._velocityY=Math.abs(this._relDisY)/this._duration,this._velocityX=Math.abs(this._relDisX)/this._duration,!t.isNullOrUndefined(n.target.tagName)&&n.target.tagName.toLowerCase()==="iframe"){n.type="mouseup";this._mouseUp(n);return}if(s=n.type=="mousemove"?n[f.clientXy]:n.originalEvent.changedTouches[0][f.clientXy],e&&s!==e&&(this._mouseMoved=!0,l=s-e,u=this.model[f.scrollVal]-l,o==1&&Math.abs(l)>c&&(h=f.position,o=0),o==0&&(e=s),u>=0&&u<=f.scrollable&&h===f.position)){var a=this._velocityY>.5&&this._duration<50&&f.position=="Top",v=this._velocityX>.5&&this._duration<50&&f.position=="Left",y=(this._velocityY>.5||this._velocityX>.5)&&this._duration<50;y?a?(u=Math.abs(this._relDisY)+this._duration*this._velocityY,this._startY>this._starty?(u+=this.scrollTop(),u>f.scrollable&&(u=f.scrollable)):(u<this.scrollTop()&&(u=Math.abs(u-this.scrollTop())),u>this.scrollTop()&&(u=0)),this.scrollTop()<=f.scrollable&&this.scrollY(u,!1,this.model.animationSpeed,"thumb")):v&&(u=Math.abs(this._relDisX),this._startX>this._startx?(u+=this.scrollLeft(),u>f.scrollable&&(u=f.scrollable)):(u-=this.scrollLeft(),u=Math.abs(u),(u>f.scrollable||u>=this.scrollLeft())&&(u=0)),this.scrollLeft()<=f.scrollable&&this.scrollX(u,!1,this.model.animationSpeed,"thumb")):(this["scroll"+f.xy](u,!0,"","thumb",n.type),f.xy==="X"?this._hScrollbar.scroll(u,"thumb",!0,n.type):t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(u,"thumb",!0,n.type),this.content().css("cursor","pointer"),this._trigger("thumbMove",{originalEvent:n,scrollData:f}))}i.ontouchmove=function(n){n=n||i.event;n.preventDefault&&n.preventDefault();n.returnValue=!1};e==null&&(e=s);this._swipe=Math.abs(this._relDisX)>Math.abs(this._relDisY)?this._relDisX<0?"left":"right":this._relDisY<0?"up":"down";(Math.round(this._content.scrollTop())==0&&this._swipe=="down"||(Math.ceil(this._content.scrollTop())==f.scrollable||Math.ceil(this._content.scrollTop())+1==f.scrollable)&&this._swipe=="up")&&(this._trigger("scrollEnd",{originalEvent:n.originalEvent,scrollData:n}),i.ontouchmove=null)}};this._on(n(document),"mousemove touchmove",{d:f,source:"thumb"},this._mouseMove);this._mouseMoved=!1;this._on(n(document),"mouseup touchend",{d:f,source:"thumb"},this._mouseUp)}},_scroll:function(n){for(var i,u,f=[this._vScrollbar?this._vScrollbar._scrollData:null,this._hScrollbar?this._hScrollbar._scrollData:null],r=0;r<2;r++)if(i=f[r],i&&!i.skipChange){if(this._externalCall||(i.dimension==="height"?this.scrollTop(n.target[i.scrollVal]):this.scrollLeft(n.target[i.scrollVal])),i.sTop=this.model&&this.model.targetPane!=null&&r==1&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane)[0][i.scrollVal]:i.scrollVal=="scrollTop"?this.scrollTop():this.scrollLeft(),this[i.scrollVal](i.sTop),i.fromScroller)return;r===1?(u=this.content()[0],this._rtlScrollLeftValue&&u.scrollWidth-u.clientWidth!=this._rtlScrollLeftValue&&(this._rtlScrollLeftValue=u.scrollWidth-u.clientWidth),i.sTop=this.model&&t.browserInfo().name!="mozilla"&&this.model.enableRTL&&!this._hScrollbar._scrollData._scrollleftflag?this._rtlScrollLeftValue==0?i.sTop*-1:i.sTop-this._rtlScrollLeftValue:i.sTop,this._hScrollbar.scroll(i.sTop,"",!0)):this._vScrollbar.scroll(i.sTop,"",!0);(f.length==2&&r==1||f.length==1&&r==0)&&(this._externalScroller=!1,this.model&&this._trigger("scroll",{source:"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:this.scrollLeft(),originalEvent:n}))}},_changevHandlerPosition:function(n){var t=this._vScrollbar;t&&(n=t._scrollData!=null&&n>=t._scrollData.scrollable?t._scrollData.scrollable:n,t!=null&&n>=0&&n<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,n/t._scrollData.onePx+"px"))},_changehHandlerPosition:function(n){var t=this._hScrollbar;t&&(n=t._scrollData!=null&&n>=t._scrollData.scrollable?t._scrollData.scrollable:n,t!=null&&top>=0&&n<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,n/t._scrollData.onePx+"px"))},_destroy:function(){this.element.css({width:"",height:""}).find(".e-vscrollbar,.e-hscrollbar").remove();this.content().removeClass("e-content").css({width:"",height:""});this.element.removeClass("e-widget")},_preventDefault:function(n){n=n||i.event;n.preventDefault&&n.preventDefault();n.returnValue=!1}})}(jQuery,Syncfusion,window),function(n,t){t.widget("ejDraggable","ej.Draggable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,dragArea:null,clone:!1,distance:1,dragOnTaphold:!1,cursorAt:{top:-1,left:-2},dragStart:null,drag:null,dragStop:null,create:null,destroy:null,helper:function(){return n('<div class="e-drag-helper" />').html("draggable").appendTo(document.body)}},_init:function(){this.handler=function(){};this.resizables={};this._wireEvents();this._browser=t.browserInfo();this._isIE8=this._browser.name=="msie"&&this._browser.version=="8.0";this._isIE9=this._browser.name=="msie"&&this._browser.version=="9.0";this._browser.name=="msie"&&this.element.addClass("e-pinch");this._browser.name=="edge"&&this.element.css("touch-action","none")},_setModel:function(n){for(var t in n)switch(t){case"dragArea":this.model.dragArea=n[t];break;case"dragOnTaphold":this.model.dragOnTaphold=n[t]}},_destroy:function(){n(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._dragStopHandler).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseMove,this._dragHandler).off("mouseleave",this._dragMouseOutHandler).off("selectstart",!1);t.widgetBase.droppables[this.scope]=null},_initialize:function(i){var r,u;if(i.target&&i.target.nodeName&&n(i.target).closest("input[type='text'], textarea, select, option").length)return!0;r=i;i.preventDefault();i=this._getCoordinate(i);this.target=n(r.currentTarget);this._initPosition={x:i.pageX,y:i.pageY};n(document).on(t.eventType.mouseMove,this._dragStartHandler).on(t.eventType.mouseUp,this._destroyHandler);this.model.clone||(u=this.element.offset(),this._relXposition=i.pageX-u.left,this._relYposition=i.pageY-u.top);n(document.documentElement).trigger(t.eventType.mouseDown,r)},_setDragArea:function(){var o=n(this.model.dragArea)[0],s,h,u,r,f,e,i;if(o){if(r=["left","right","bottom","top"],t.isNullOrUndefined(o.getBoundingClientRect)){for(s=n(this.model.dragArea).outerWidth(),h=n(this.model.dragArea).outerHeight(),i=0;i<r.length;i++)this["border-"+r[i]+"-width"]=0,this["padding-"+r[i]]=0;f=e=0}else{for(u=o.getBoundingClientRect(),s=u.width?u.width:u.right-u.left,h=u.height?u.height:u.bottom-u.top,i=0;i<r.length;i++)this["border-"+r[i]+"-width"]=isNaN(parseFloat(n(n(this.model.dragArea)[0]).css("border-"+r[i]+"-width")))?0:parseFloat(n(n(this.model.dragArea)[0]).css("border-"+r[i]+"-width")),this["padding-"+r[i]]=isNaN(parseFloat(n(n(this.model.dragArea)[0]).css("padding-"+r[i])))?0:parseFloat(n(n(this.model.dragArea)[0]).css("padding-"+r[i]));f=n(this.model.dragArea).offset().top;e=n(this.model.dragArea).offset().left}this._left=t.isNullOrUndefined(n(this.model.dragArea).offset())?0+this["border-left-width"]+this["padding-left"]:e+this["border-left-width"]+this["padding-left"];this._top=t.isNullOrUndefined(n(this.model.dragArea).offset())?0+this["border-top-width"]+this["padding-top"]:f+this["border-top-width"]+this["padding-top"];this._right=e+s-[this["border-right-width"]+this["padding-right"]];this._bottom=f+h-[this["border-bottom-width"]+this["padding-bottom"]]}},_dragStart:function(i){var r,f,e,u,o,s;if(i.type=="touchmove"||i.type=="mousemove"&&i.which==1&&i.buttons==1||this._isIE8||this._isIE9){r=i;i=this._getCoordinate(i);this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0};this.offset=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.position=this._getMousePosition(r);var h=this._initPosition.x-i.pageX,c=this._initPosition.y-i.pageY,l=Math.sqrt(h*h+c*c);if(l>=this.model.distance){if(f=this.model.helper({sender:r,element:this.target}),!f||t.isNullOrUndefined(f))return;if(e=this.model.handle=this.helper=f,this.model.dragStart&&(u=null,r.type=="touchmove"?(o=r.originalEvent.changedTouches[0],u=document.elementFromPoint(o.clientX,o.clientY)):u=r.originalEvent.target||r.target,this.model.cursorAt.top==0&&this.model.cursorAt.left==0&&(u=this._checkTargetElement(i)||u),this._trigger("dragStart",{event:r,element:this.element,target:u,currentTarget:this._getCurrTarget(i)})))return this._destroy(),!1;this.model.dragArea?this._setDragArea():(this._left=this._top=this._right=this._bottom=0,this["border-top-width"]=this["border-left-width"]=0);s=e.offsetParent().offset();n(document).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._dragHandler).on(t.eventType.mouseUp,this._dragStopHandler).on("mouseleave",this._dragMouseOutHandler).on("selectstart",!1);t.widgetBase.droppables[this.model.scope]={draggable:this.element,helper:e.css({position:"absolute",left:this.position.left-s.left,top:this.position.top-s.top}),destroy:this._destroyHandler}}}},_drag:function(i){var u,f,h,c,o,l,s,r,e;i.preventDefault();this.position=this._getMousePosition(i);this.position.top<0&&(this.position.top=0);n(document).height()<this.position.top&&(this.position.top=n(document).height());n(document).width()<this.position.left&&(this.position.left=n(document).width());r=t.widgetBase.droppables[this.model.scope].helper;this.model.drag&&(o=null,i.type=="touchmove"?(l=i.originalEvent.changedTouches[0],o=document.elementFromPoint(l.clientX,l.clientY)):o=i.originalEvent.target||i.target,this.model.cursorAt.top==0&&this.model.cursorAt.left==0&&(o=this._checkTargetElement(i)||o),this._trigger("drag",{event:i,element:this.target,target:o,currentTarget:this._getCurrTarget(i)}));s=this._checkTargetElement(i);t.isNullOrUndefined(s)?this._hoverTarget&&(i.target=i.toElement=this._hoverTarget,this._hoverTarget.object._out(i),this._hoverTarget=null):(i.target=i.toElement=s,s.object._over(i),this._hoverTarget=s);r=t.widgetBase.droppables[this.model.scope].helper;e=r.offsetParent().offset();h=t.isNullOrUndefined(i.pageX)?i.originalEvent.changedTouches[0].pageX:i.pageX;c=t.isNullOrUndefined(i.pageY)?i.originalEvent.changedTouches[0].pageY:i.pageY;this.model.dragArea?(this._pageX!=h&&(u=this._left>this.position.left?this._left:this._right<this.position.left+r.outerWidth(!0)?this._right-r.outerWidth(!0):this.position.left),this._pageY!=c&&(f=this._top>this.position.top?this._top:this._bottom<this.position.top+r.outerHeight(!0)?this._bottom-r.outerHeight(!0):this.position.top)):(u=this.position.left,f=this.position.top);(f<0||f-[e.top+this["border-top-width"]]<0)&&(f=[e.top+this["border-top-width"]]);(u<0||u-[e.left+this["border-left-width"]]<0)&&(u=[e.left+this["border-left-width"]]);r.css({left:u-[e.left+this["border-left-width"]],top:f-[e.top+this["border-top-width"]]});this.position.left=u;this.position.top=f;this._pageX=h;this._pageY=c},_dragStop:function(n){var t,i;(n.type=="mouseup"||n.type=="touchend")&&this._destroy(n);this.model.dragStop&&(t=null,n.type=="touchend"?this.model.cursorAt.top==0&&this.model.cursorAt.left==0?t=n.originalEvent.target||n.target:(i=n.originalEvent.changedTouches[0],t=document.elementFromPoint(i.clientX,i.clientY)):t=n.originalEvent.target||n.target,this.model.cursorAt.top==0&&this.model.cursorAt.left==0&&(t=this._checkTargetElement(n)||t),this._trigger("dragStop",{event:n,element:this.target,target:t,currentTarget:this._getCurrTarget(n)}));this._dragEnd(n)},_dragEnd:function(n){var i=this._checkTargetElement(n);t.isNullOrUndefined(i)||(n.target=n.toElement=i,i.object._drop(n,this.element))},_dragMouseEnter:function(t){n(document).off("mouseenter",this._dragMouseEnterHandler);this._isIE9?this._dragManualStop(t):this._isIE8?t.button==0&&this._dragManualStop(t):t.buttons==0&&this._dragManualStop(t)},_dragManualStop:function(n){this.model.dragStop!=null&&this._trigger("dragStop",{event:n,element:this.target,target:n.originalEvent.target||n.target,currentTarget:this._getCurrTarget(n)});this._destroy(n)},_dragMouseOut:function(){n(document).on("mouseenter",this._dragMouseEnterHandler)},_checkTargetElement:function(n){var t,i;return(n.type=="touchmove"||n.type=="touchstart"||n.type=="touchend"||n.type=="taphold"?(i=n.originalEvent.changedTouches[0],t=document.elementFromPoint(i.clientX,i.clientY)):t=n.target,this.helper&&this._contains(this.helper[0],t))?(this.helper.hide(),t=this._elementUnderCursor(n),this.helper.show(),this._withDropElement(t)):this._withDropElement(t)},_getCurrTarget:function(n){var i=n.originalEvent&&n.originalEvent.target||n.target,r,u;if(!t.isNullOrUndefined(i.style))return r=i.style.display,i.style.display="none",u=document.elementFromPoint(n.pageX,n.pageY),i.style.display=r,u},_withDropElement:function(i){if(i){var r=n(i).data("ejDroppable");if(t.isNullOrUndefined(r)&&(r=this._checkParentElement(n(i))),!t.isNullOrUndefined(r))return n.extend(i,{object:r})}},_checkParentElement:function(i){var u=n(i).closest(".e-droppable"),r;if(u.length>0&&(r=n(u).data("ejDroppable"),!t.isNullOrUndefined(r)))return r},_elementUnderCursor:function(n){return n.type=="touchmove"||n.type=="touchstart"||n.type=="touchend"||n.type=="taphold"?document.elementFromPoint(n.originalEvent.changedTouches[0].clientX,n.originalEvent.changedTouches[0].clientY):document.elementFromPoint(n.clientX,n.clientY)},_contains:function(t,i){try{return n.contains(t,i)||t==i}catch(r){return!1}},_wireEvents:function(){t.isDevice()==!0&&this.model.dragOnTaphold==!0?this._on(this.element,"taphold",this._initialize):this._on(this.element,t.eventType.mouseDown,this._initialize);this._dragStartHandler=n.proxy(this._dragStart,this);this._destroyHandler=n.proxy(this._destroy,this);this._dragStopHandler=n.proxy(this._dragStop,this);this._dragHandler=n.proxy(this._drag,this);this._dragMouseEnterHandler=n.proxy(this._dragMouseEnter,this);this._dragMouseOutHandler=n.proxy(this._dragMouseOut,this)},_getMousePosition:function(n){n=this._getCoordinate(n);var t=this.model.clone?n.pageX:n.pageX-this._relXposition,i=this.model.clone?n.pageY:n.pageY-this._relYposition;return{left:t-[this.margins.left+this.model.cursorAt.left],top:i-[this.margins.top+this.model.cursorAt.top]}},_getCoordinate:function(n){var i=n;return(n.type=="touchmove"||n.type=="touchstart"||n.type=="touchend"||n.type=="taphold"&&t.browserInfo().name!="msie")&&(i=n.originalEvent.changedTouches[0]),i}})}(jQuery,Syncfusion),function(n,t){t.widget("ejDroppable","ej.Droppable",{element:null,model:null,validTags:["div","span","a"],dropElements:[],defaults:{accept:null,scope:"default",drop:null,over:null,out:null,create:null,destroy:null},_init:function(){this._mouseOver=!1;this.dropElements.push(this)},_setModel:function(){},_destroy:function(){n(this.element).off("mouseup",n.proxy(this._drop,this))},_over:function(n){this._mouseOver||(this._trigger("over",n),this._mouseOver=!0)},_out:function(n){this._mouseOver&&(this._trigger("out",n),this._mouseOver=!1)},_drop:function(t,i){var u=t.target,f=n(u).parents(".e-droppable"),r;for(n(u).hasClass("e-droppable")&&f.push(u),r=0;r<this.dropElements.length;r++)n(f).is(n(this.dropElements[r].element))&&this.dropElements[r]._dropEvent.call(this.dropElements[r],t,i)},_dropEvent:function(i,r){var u=t.widgetBase.droppables[this.model.scope],f=!t.isNullOrUndefined(u.helper)&&u.helper.is(":visible"),e;f&&i.type=="touchend"&&n(u.helper).hide();e=this._isDropArea(i);f&&i.type=="touchend"&&n(u.helper).show();u&&!t.isNullOrUndefined(this.model.drop)&&f&&e.canDrop&&this.model.drop(n.extend(i,{dropTarget:e.target,dragElement:r},!0),u)},_isDropArea:function(t){var i={canDrop:!0,target:n(t.target)},e,r,o,u,f;if(t.type=="touchend")for(e=t.originalEvent.changedTouches[0],r=document.elementFromPoint(e.clientX,e.clientY),i.canDrop=!1,o=n(r).parents(),u=0;u<this.element.length;u++){if(n(r).is(n(this.element[u])))i={canDrop:!0,target:n(r)};else for(f=0;f<o.length;f++)if(n(this.element[u]).is(n(o[f]))){i={canDrop:!0,target:n(r)};break}if(i.canDrop)break}return i}})}(jQuery,Syncfusion),function(n,t){t.widget("ejResizable","ej.resizable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,distance:1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,cursorAt:{top:1,left:1},resizeStart:null,resize:null,resizeStop:null,create:null,destroy:null,helper:function(){return n('<div class="e-resize-helper" />').html("resizable").appendTo(document.body)}},_init:function(){if(this.target=this.element,this._browser=t.browserInfo(),this._isIE8=this._browser.name=="msie"&&this._browser.version=="8.0",this._isIE9=this._browser.name=="msie"&&this._browser.version=="9.0",this.handle!=null)n(this.target).delegate(this.handle,t.eventType.mouseDown,n.proxy(this._mousedown,this)).delegate(this.handle,"resizestart",this._blockDefaultActions);else n(this.target).on(t.eventType.mouseDown,n.proxy(this._mousedown,this));this._resizeStartHandler=n.proxy(this._resizeStart,this);this._destroyHandler=n.proxy(this._destroy,this);this._resizeStopHandler=n.proxy(this._resizeStop,this);this._resizeHandler=n.proxy(this._resize,this);this._resizeMouseEnterHandler=n.proxy(this._resizeMouseEnter,this)},_mouseover:function(i){if(n(i.target).hasClass("e-resizable")){n(i.target).css({cursor:"se-resize"});n(this.target).on(t.eventType.mouseDown,n.proxy(this._mousedown,this))}else n(this.target).off(t.eventType.mouseDown),n(this.target).css({cursor:""})},_blockDefaultActions:function(n){n.cancelBubble=!0;n.returnValue=!1;n.preventDefault&&n.preventDefault();n.stopPropagation&&n.stopPropagation()},_setModel:function(){},_mousedown:function(i){var r=i;i=this._getCoordinate(i);this.target=n(r.currentTarget);this._initPosition={x:i.pageX,y:i.pageY};this._pageX=i.pageX;this._pageY=i.pageY;n(document).on(t.eventType.mouseMove,this._resizeStartHandler).on(t.eventType.mouseUp,this._destroyHandler);return n(document.documentElement).trigger(t.eventType.mouseDown,r),!1},_resizeStart:function(i){var r,h;if(n(i.target).hasClass("e-resizable")){i=this._getCoordinate(i);var u=this._initPosition.x-i.pageX,f=this._initPosition.y-i.pageY,e,o,s=Math.sqrt(u*u+f*f);if(s>=this.model.distance){if(this.model.resizeStart!=null&&this._trigger("resizeStart",{event:i,element:this.target}))return;r=this.model.helper({element:this.target});e=i.pageX-this._pageX+r.outerWidth();o=i.pageY-this._pageY+r.outerHeight();this._pageX=i.pageX;this._pageY=i.pageY;h=this.getElementPosition(r);n(document).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._resizeHandler).on(t.eventType.mouseUp,this._resizeStopHandler).on("mouseenter",this._resizeMouseEnterHandler).on("selectstart",!1);t.widgetBase.resizables[this.scope]={resizable:this.target,helper:r.css({width:e,height:o}),destroy:this._destroyHandler}}}},_resize:function(n){var i,r,u,e,f;n=this._getCoordinate(n);e=this.getElementPosition(t.widgetBase.resizables[this.scope].helper);f=this.model.helper({element:this.target});i=n.pageX-this._pageX+f.outerWidth();r=n.pageY-this._pageY+f.outerHeight();this._pageX=n.pageX;this._pageY=n.pageY;i<this.model.minWidth&&(u=this.model.minWidth-i,i=this.model.minWidth,this._pageX=n.pageX+u);r<this.model.minHeight&&(u=this.model.minHeight-r,r=this.model.minHeight,this._pageY=n.pageY+u);this.model.maxHeight!=null&&r>this.model.maxHeight&&(u=r-this.model.maxHeight,r=this.model.maxHeight,this._pageY=n.pageY-u);this.model.maxWidth!=null&&i>this.model.maxWidth&&(u=i-this.model.maxWidth,i=this.model.maxWidth,this._pageX=n.pageX-u);t.widgetBase.resizables[this.scope].helper.css({width:i,height:r});this._trigger("resize",{element:this.target})},_resizeStop:function(n){this.model.resizeStop!=null&&this._trigger("resizeStop",{element:this.target});(n.type=="mouseup"||n.type=="touchend")&&this._destroy(n)},_resizeMouseEnter:function(n){this._isIE9?this._resizeManualStop(n):this._isIE8?n.button==0&&this._resizeManualStop(n):n.buttons==0&&this._resizeManualStop(n)},_resizeManualStop:function(n){this.model.resizeStop!=null&&this._trigger("resizeStop",{element:this.target});this._destroy(n)},_destroy:function(){n(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._resizeStopHandler).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseMove,this._resizeHandler).off("mouseenter",this._resizeMouseEnterHandler).off("selectstart",!1);t.widgetBase.resizables[this.scope]=null},getElementPosition:function(n){return n!=null&&n.length>0?{left:n[0].offsetLeft,top:n[0].offsetTop}:null},_getCoordinate:function(n){var t=n;return(n.type=="touchmove"||n.type=="touchstart"||n.type=="touchend")&&(t=n.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion),function(n,t,i){t.widget("ejTab","ej.Tab",{_rootCSS:"e-tab",element:null,model:null,validTags:["div","span"],_addToPersist:["selectedItemIndex"],_setFirst:!1,angular:{terminal:!1},defaults:{collapsible:!1,enableAnimation:!0,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},disabledItemIndex:[],enabledItemIndex:[],hiddenItemIndex:[],events:"click",idPrefix:"ej-tab-",heightAdjustMode:"content",selectedItemIndex:0,cssClass:"",showCloseButton:!1,htmlAttributes:{},enableTabScroll:!1,showReloadIcon:!1,headerPosition:"top",width:null,height:null,headerSize:null,enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,enablePersistence:!1,enabled:!0,ajaxLoad:null,ajaxBeforeLoad:null,ajaxSuccess:null,ajaxError:null,itemActive:null,beforeActive:null,itemAdd:null,itemRemove:null,beforeItemRemove:null,create:null,destroy:null},dataTypes:{cssClass:"string",collapsible:"boolean",events:"string",heightAdjustMode:"enum",enabled:"boolean",ajaxSettings:"data",disabledItemIndex:"data",enabledItemIndex:"data",enableAnimation:"boolean",htmlAttributes:"data"},observables:["selectedItemIndex"],selectedItemIndex:t.util.valueFunction("selectedItemIndex"),_destroy:function(){this._unWireEvents();this._removeBaseClass()},_setModel:function(i){for(var r in i)switch(r){case"events":this._off(this.items,this.model.events);this._on(this.items,i[r],this._tabItemClick);break;case"disabledItemIndex":this._disableItems(i[r]);i[r]=this.model.disabledItemIndex;break;case"enabledItemIndex":this._enableItems(i[r]);break;case"enabled":this._enabledAction(i[r]);break;case"selectedItemIndex":this._isInteraction=!1;this.showItem(t.util.getVal(i[r]));i[r]=this.model.selectedItemIndex;break;case"heightAdjustMode":this.model.heightAdjustMode=i[r];this._setTabsHeightStyle(i[r]);this._resizeEvents(i[r]);break;case"cssClass":this._changeSkin(i[r]);break;case"showRoundedCorner":this._roundedCorner(i[r]);break;case"height":this.model.height=i[r];this._setTabsHeightStyle(this.model.heightAdjustMode);break;case"width":this.element.width(i[r]);n(this.contentPanels).width(Number(i[r]));this.refreshTabScroll();break;case"headerSize":this._setHeaderSize(i[r]);break;case"allowKeyboardNavigation":i[r]?this._on(this.element,"keydown",this._keyPress):this._off(this.element,"keydown");break;case"headerPosition":this.model.headerPosition=i[r];this.model.headerPosition==t.Tab.Position.Top?(this._removeVerticalClass(),this._removeScroll(),this.itemsContainer.remove(),this.itemsContainer.insertBefore(this.element.find(">div").first()),this.element.find("div.e-active-content").removeClass("e-activebottom"),n(this.contentPanels).css("margin-top","0")):this.model.headerPosition==t.Tab.Position.Bottom?(this._removeVerticalClass(),this._removeScroll(),this.element.find("div.e-active-content").removeClass("e-activetop"),this.model.enableTabScroll?n(this.contentPanels).css("margin-top","0"):n(this.contentPanels).css("position","relative")):(this.model.headerPosition==t.Tab.Position.Left||this.model.headerPosition==t.Tab.Position.Right)&&(this._removeHeaderClass(),n(this.items).css("display",""),this._removeScroll());this._refresh();this.model.headerPosition==t.Tab.Position.Right&&this.element.css("position","");(this.model.headerPosition==t.Tab.Position.Left||this.model.headerPosition==t.Tab.Position.Right)&&this._on(this.element.find("div.e-chevron-circle-right"),"click",this._tabScrollClick);this.scrollstep=30;break;case"showCloseButton":i[r]?(this._addDeleteIcon(),this._on(this.element.find("div.e-close"),"click",this._tabDeleteClick)):this.element.find("div.e-close").remove();break;case"enableTabScroll":this.model.enableTabScroll=i[r];i[r]?(this._removeScroll(),this._addScroll(),this.model.headerPosition=="left"&&(this._refresh(),this._on(this.element.find("div.e-chevron-circle-right"),"click",this._tabScrollClick))):(this._removeScroll(),this.itemsContainer.removeAttr("style"),n(this.contentPanels).css("margin-top","0"));(this.model.headerPosition==t.Tab.Position.Left||this.model.headerPosition==t.Tab.Position.Right)&&(this._refresh(),this._on(this.element.find("div.e-chevron-circle-right"),"click",this._tabScrollClick),this.model.headerPosition!=t.Tab.Position.Right||this.model.enableTabScroll||this.element.css("margin-left",""));break;case"showReloadIcon":i[r]?this._addReloadIcon():this.element.find("div.e-reload").remove();break;case"enableRTL":this.model.enableRTL=i[r];this._removeScroll();this.itemsContainer.removeAttr("style");n(this.contentPanels).css("margin-top","0");this.element.find("ul").removeAttr("style");i[r]?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl");this.model.enableTabScroll&&this._addScroll();this._refresh();this._on(this.element.find("div.e-chevron-circle-right"),"click",this._tabScrollClick);this.model.headerPosition==t.Tab.Position.Right&&this.model.enableRTL&&this.element.css("margin-left","");break;case"htmlAttributes":this._addAttr(i[r]);break;case"hiddenItemIndex":this.model.headerPosition==t.Tab.Position.Top||this.model.headerPosition==t.Tab.Position.Bottom?n(this.items).css("display","inline-block"):n(this.items).css("display","");this.model.hiddenItemIndex=i[r];this.model.hiddenItemIndex.length>0&&this._hiddenIndexItem(this.model.hiddenItemIndex)}},_removeScroll:function(){this.itemsContainer.removeAttr("style");this.element.find("div.e-chevron-circle-right").remove();this.element.find("div.e-chevron-circle-left").remove()},_addScroll:function(){(this.model.headerPosition=="left"||this.model.headerPosition=="right"&&this._tabContentsHeight()>(this.element.width()||Number(this.model.height))||this.model.headerPosition=="top"||this.model.headerPosition=="bottom")&&this._checkScroll();this._addScrollIcon();this.refreshTabScroll()},_init:function(){this._addItemIndex=null;this.tabId=0;this._hiddenIndex=this.model.hiddenItemIndex;this._initialize();this._prevSize=this._getDimension(n(this.element).parent(),"height")},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},_tabContentsWidth:function(){for(var r=this.element.find("li").length,t=0,i=0;i<r;i++)t=t+n(this.element.find("li")[i]).width();return t},_tabContentsHeight:function(){for(var r=this.element.find("li").length,t=0,i=0;i<r;i++)t=t+n(this.element.find("li")[i]).height();return t},_initialize:function(){this.initialRender=!0;this.element.attr("tabindex",0).attr("role","tablist");this._itemsRefreshing();n(this.anchors).addClass("e-link");this._preTabSelectedIndex=this._preTabIndex=-1;t.isNullOrUndefined(this.model.width)||this.element.width(this.model.width);t.isNullOrUndefined(this.model.height)||this.element.height(this.model.height);this._setTabPosition(this.model.headerPosition);this.model.showCloseButton&&this._addDeleteIcon();this.model.showReloadIcon&&this._addReloadIcon();this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner);this._enabledAction(this.model.enabled);this.contentPanels=[];this._addAttr(this.model.htmlAttributes);this._reinitialize();this._addBaseClass();t.isNullOrUndefined(this.model.headerSize)||this._setHeaderSize(this.model.headerSize);this._disableTabs();this._roundedCorner(this.model.showRoundedCorner);this.model.enableTabScroll&&(this.model.headerPosition=="top"||this.model.headerPosition=="bottom"?this.itemsContainer.width()>this.element.width()&&this._addScrollIcon():this.element.height()<this.items.height()*this.items.length&&this._addScrollIcon());this._wireEvents(this.model.events);this.showItem(this.selectedItemIndex());this._setTabsHeightStyle(this.model.heightAdjustMode);this._enabledAction(this.model.enabled);this._resizeEvents(this.model.heightAdjustMode);this.selectedItemIndex()>-1&&this.contentPanels!=0&&this.model.enableRTL&&n(this.element).height(this.itemsContainer.height()+parseInt(n(this.contentPanels).css("height")));this.model.hiddenItemIndex.length>0&&this._hiddenIndexItem(this.model.hiddenItemIndex)},_reinitialize:function(t){for(var f,r,e,u=this._addItemIndex!=null?this._addItemIndex:0;u<this.anchors.length;u++)if(f=this.anchors[u],r=this.divId==i?n(f).attr("href"):this.divId,this.divId=i,e=r.split("#")[0],e&&e===location.toString().split("#")[0]&&(r=a.hash,f.href=r),r&&r!=="#"?(this._addContentTag(r,u),t&&this._addContentBaseClass(n(this.contentPanels[u]))):this.model.enablePersistence||this.model.disabledItemIndex.push(u),this._addItemIndex!=null){this._unWireEvents();this._wireEvents(this.model.events);this.items.length==1&&this.showItem(this.selectedItemIndex());break}},_itemsRefreshing:function(){this.itemsContainer=this.element.find("ol,ul").eq(0);this.items=this.itemsContainer.find(" > li:has(a[href])");this.anchors=this.items.find("a[href]")},_setHeaderSize:function(n){this.element.find(">ul li.e-item").css("height","auto");this.element.find(">ul li.e-item").children("a.e-link").css("margin-top","0px");this.model.headerPosition=="left"?this.element.find(">ul.e-left").css({width:n,"text-align":"center"}):this.model.headerPosition=="right"?this.element.find(">ul.e-right").css({width:n,"text-align":"center"}):(this.element.find(">ul.e-header li.e-item").css("height",n),this.element.find(">ul.e-header li.e-item a.e-link").css("margin-top",(this.element.find(">ul.e-header").outerHeight()/2-this.element.find(">.e-header li.e-item a.e-link").outerHeight()).toString()+"px"),this.element.find(">ul.e-header li.e-item .e-icon.e-tabdelete").css("margin-top",(this.element.find(">ul.e-header").outerHeight()/2-this.element.find(">.e-header li.e-item .e-icon.e-tabdelete").outerHeight()-5).toString()+"px"),this.element.find(">ul.e-header li.e-item .e-icon.e-reload").css("margin-top",(this.element.find(">ul.e-header").outerHeight()/2-this.element.find(">.e-header li.e-item .e-icon.e-reload").outerHeight()-5).toString()+"px"))},_enabledAction:function(n){n?this.element.removeClass("e-disable"):this.element.addClass("e-disable")},_hiddenIndexItem:function(t){for(var r,i=0;i<t.length;i++)!n.inArray(parseInt(t[i]),this._hiddenIndex)>-1&&(r=n(this.items[parseInt(t[i])]).children("a").attr("href"),this._hidePanel(r));this._hideContentPanel(this.selectedItemIndex(),this.model.hiddenItemIndex);this._hiddenIndex=this.model.hiddenItemIndex},_hidePanel:function(t){for(var r,i=0;i<this.contentPanels.length;i++)if("#"+n(this.contentPanels[i]).attr("id")==t){n(this.contentPanels[i]).css("display","none");break}for(r=0;r<this.items.length;r++)if(n(this.items.children("a")[r]).attr("href")==t){n(this.items[r]).css("display","none");break}},_hideContentPanel:function(t,i){n.inArray(t,i)>-1?(t+=1,t<=this.items.length-1?this._hideContentPanel(t,i):t>this.items.length-1&&i.length!=this.items.length&&this._hideContentPanel(0,i)):this.showItem(t)},_addAttr:function(t){var i=this;n.map(t,function(n,t){t=="class"?i.element.addClass(n):t=="disabled"&&n=="disabled"?(i.model.enabled=!1,i._enabledAction(!1)):i.element.attr(t,n)})},_setTabPosition:function(i){i==t.Tab.Position.Bottom?(this.itemsContainer.appendTo(this.element),this.items.removeClass("e-bottom-line"),this.items.addClass("e-top-line")):i==t.Tab.Position.Top?(this.items.removeClass("e-top-line"),this.itemsContainer.prependTo(this.element),this.model.enableRTL?this.items.addClass("e-rtl-top-line e-top-hover"):this.items.addClass("e-bottom-line")):(i==t.Tab.Position.Left||i==t.Tab.Position.Right)&&this.items.length>=0&&(this.model.height?this.itemsContainer.css("height",this.model.height):!1&&n(this.itemsContainer).css("height",""),this.element.addClass("e-vertical"))},_addDeleteIcon:function(){var n,i;this.element.find("div.e-close.e-tabdelete").length<=0&&this.items.length>0&&(n=t.buildTag("div.e-icon e-close e-tabdelete","",{},{role:"presentation"}).css("visibility","hidden"),this.model.headerPosition=="left"||this.model.headerPosition=="right"?(i=this.items.find("a"),n.insertBefore(i)):this.items.append(n))},_tabScrollIconCalc:function(){this.padding={left:Number(this.element.css("padding-left").split("px")[0]),right:Number(this.element.css("padding-right").split("px")[0]),top:Number(this.element.css("padding-top").split("px")[0]),bottom:Number(this.element.css("padding-bottom").split("px")[0])};this.scrollPosition=this.itemsContainer.width()/2-this._rightScrollIcon.width();this.rightScroll=t.getDimension(this.element,"width")-this.itemsContainer.outerWidth()/2},_addScrollIcon:function(){if(this.element.addClass("e-tabscroll").css({position:"relative",overflow:"hidden"}),this.element.find("div.e-chevron-circle-right").length<=0&&this.items.length>0){this._rightScrollIcon=t.buildTag("div.e-icon e-chevron-circle-right","",{},{role:"presentation"}).css("visibility","hidden");this.itemsContainer.after(this._rightScrollIcon);this.scrollstep=30;this._tabScrollIconCalc();this._rightScrollIcon.css("position","absolute");this.model.enableRTL||(this.model.headerPosition=="left"?(this._rightScrollIcon.css("top",this.padding.top+20+"px"),this._rightScrollIcon.css("left",this.scrollPosition+this.padding.left+"px")):this.model.headerPosition=="right"?(this._rightScrollIcon.css({"margin-left":this.itemsContainer.width()/2-this.scrollstep+"px","z-index":"15",top:this.padding.top+20+"px",left:this.rightScroll+"px"}),this.element.css({position:"relative"})):this.model.enablePersistence==!0&&this._beforeWidth!=0&&this._beforeWidth>this.scrollPanelWidth?this._rightScrollIcon.css("margin-right",this.itemsContainer.width()-this.scrollPanelWidth+20-(this.items[this.selectedItemIndex()].offsetLeft-this.scrollPanelWidth)*2+"px"):this._rightScrollIcon.css("left",this.scrollPanelWidth-(this.scrollstep+20)+this.padding.left+"px"));this.model.headerPosition=="left"||this.model.headerPosition=="right"?(this._rightScrollIcon.css("transform","rotate(270deg)"),t.browserInfo().name=="msie"&&parseInt(t.browserInfo().version)<11?this.model.enableRTL?this._rightScrollIcon.css("top",this.padding.top+20+"px"):this._rightScrollIcon.css("top",this.padding.top+20+"px"):this.model.enablePersistence==!0&&this._beforeWidth!=0&&this._beforeWidth>this.scrollPanelHeight?this._rightScrollIcon.css("margin-top","-"+(this.items[this.selectedItemIndex()].offsetTop*3-this.scrollPanelHeight*2)+"px"):this.model.enableRTL&&(this.model.headerPosition=="left"?this._rightScrollIcon.css({left:"0px","margin-left":this.scrollPosition+this.padding.left+"px","z-index":"15"}):this._rightScrollIcon.css({right:this.itemsContainer.outerWidth()/2+this.padding.right+"px","z-index":"15"}))):this.model.enableRTL&&this._rightScrollIcon.css("margin-left",this.itemsContainer.width()-14+"px");t.browserInfo().name=="msie"&&parseInt(t.browserInfo().version)<11&&this.model.headerPosition=="bottom"&&(this.model.enableRTL?this._rightScrollIcon.css("top",this.itemsContainer.height()/2+20+"px"):this._rightScrollIcon.css("top",this.itemsContainer.height()/2+27+"px"));this.element.attr("unselectable","on");this.element.css("user-select","none");this.element.on("selectstart",!1);this._on(this.element.find("div.e-chevron-circle-right"),"click",this._tabScrollClick);this._on(this.element.find("div.e-chevron-circle-right"),"mouseover",this._hoverHandler);this._on(this.element.find("div.e-chevron-circle-right"),"mouseout",this._hoverHandler)}},_addScrollBackIcon:function(){if(this.element.find("div.e-chevron-circle-left").length<=0){this._leftScrollIcon=t.buildTag("div.e-icon e-chevron-circle-left","",{},{role:"presentation"}).css("visibility","hidden");this.itemsContainer.before(this._leftScrollIcon);this.rightscrollstep=30;this.element.attr("unselectable","on");this.element.css("user-select","none");this.element.on("selectstart",!1);this._leftScrollIcon.css("position","absolute").css("z-index","10");(this.model.headerPosition=="top"||this.model.headerPosition=="bottom")&&this.model.enableRTL&&this._leftScrollIcon.css("left",this.padding.left+this.rightscrollstep+"px");(this.model.headerPosition=="left"||this.model.headerPosition=="right")&&(this.model.enableRTL?(this._leftScrollIcon.css("top",this.scrollPanelHeight+"px"),this.model.headerPosition=="right"?this._leftScrollIcon.css({right:this.itemsContainer.outerWidth()/2+this.padding.right+"px","margin-left":this.scrollPosition+this.padding.left+"px","z-index":"15"}):this._leftScrollIcon.css({left:"0px","margin-left":this.scrollPosition+this.padding.left+"px"})):this.model.headerPosition=="right"?(this._leftScrollIcon.css({"margin-left":this.itemsContainer.width()/2-30+"px","z-index":"15",left:this.rightScroll+"px"}),this._leftScrollIcon.css("top",this.scrollPanelHeight+30+"px")):this.model.headerPosition=="left"&&(this._leftScrollIcon.css("left",this.scrollPosition+this.padding.left+"px"),this._leftScrollIcon.css("top",this.scrollPanelHeight-20+this.padding.top+"px")),this._leftScrollIcon.css("transform","rotate(270deg)"));t.browserInfo().name=="msie"&&parseInt(t.browserInfo().version)<11&&this.model.headerPosition=="bottom"&&this._leftScrollIcon.css("top",this.itemsContainer.height()/2+27+"px");this._on(this._leftScrollIcon,"click",this._tabScrollBackClick);this._on(this.element.find("div.e-chevron-circle-left"),"mouseout",this._hoverHandler);this._on(this.element.find("div.e-chevron-circle-left"),"mouseover",this._hoverHandler)}},_addReloadIcon:function(){var n,i;this.element.find("div.e-reload").length<=0&&this.items.length>0&&(n=t.buildTag("div.e-icon e-reload","",{},{role:"presentation"}).css("visibility","hidden"),this.model.headerPosition=="left"||this.model.headerPosition=="right"?(i=this.items.find("a"),n.insertBefore(i)):this.items.append(n))},_addBaseClass:function(){this.element.addClass("e-widget "+this.model.cssClass);this.itemsContainer.addClass("e-box");this.model.enableRTL&&this.element.addClass("e-rtl");this.model.headerPosition=="top"&&(n(this.contentPanels).addClass("e-hidebottom e-addborderbottom"),n(this.itemsContainer).addClass("e-addborderbottom"),n(this.contentPanels).removeClass("e-hidetop e-addbordertop e-hideright e-addborderright e-hideleft e-addborderleft"),n(this.itemsContainer).removeClass("e-addbordertop e-addborderright e-addborderleft"),this.items.length>0&&this.itemsContainer.addClass("e-header"),this.model.enableRTL&&(this.items.addClass("e-rtl-top-line"),this.items.removeClass("e-rtl-bottom-line")));this.model.headerPosition=="bottom"&&(n(this.contentPanels).removeClass("e-hidebottom e-addborderbottom e-hideright e-addborderright e-hideleft e-addborderleft"),n(this.itemsContainer).removeClass("e-addborderbottom e-addborderright e-addborderleft"),n(this.contentPanels).addClass("e-hidetop e-addbordertop"),n(this.itemsContainer).addClass("e-addbordertop"),this.items.length>0&&this.itemsContainer.addClass("e-header"),this.model.enableRTL&&(this.items.addClass("e-rtl-bottom-line"),this.items.removeClass("e-rtl-top-line e-top-line")));this.model.headerPosition=="left"&&(this.items.length>0&&this.itemsContainer.addClass("e-left"),n(this.contentPanels).removeClass("e-hidetop e-addbordertop e-hidebottom e-addborderbottom e-hideright e-addborderright"),n(this.itemsContainer).removeClass("e-addbordertop e-addborderbottom e-addborderright"),n(this.contentPanels).addClass("e-hideleft e-addborderleft"),n(this.itemsContainer).addClass("e-addborderleft"),n(this.items).removeClass("e-rtl-bottom-line e-rtl-top-line"));this.model.headerPosition=="right"&&(this.items.length>0&&this.itemsContainer.addClass("e-right"),n(this.contentPanels).removeClass("e-hidetop e-addbordertop e-hidebottom e-addborderbottom e-hideleft e-addborderleft"),n(this.itemsContainer).removeClass("e-addbordertop e-addborderbottom e-addborderleft"),n(this.contentPanels).addClass("e-hideright e-addborderright"),n(this.itemsContainer).addClass("e-addborderright"),this.model.enableTabScroll&&this._tabContentsHeight()>(this.element.height||Number(this.model.height))&&n(this.itemsContainer).css("z-index","12").css("margin-left","-"+this.itemsContainer.find("li").width()+"px"),n(this.items).removeClass("e-rtl-bottom-line e-rtl-top-line"));this.items.addClass("e-select e-item").attr("role","tab").attr("tabindex",-1).attr("aria-expanded",!0).attr("aria-selected",!1);n(this.contentPanels).addClass("e-content  e-content-item e-box").attr("role","tabpanel").attr("aria-hidden",!0);((this.model.headerPosition=="left"||this.model.headerPosition=="right")&&this._tabContentsHeight()>(this.element.height()||Number(this.model.height))||(this.model.headerPosition=="top"||this.model.headerPosition=="bottom")&&this._tabContentsWidth()>(t.getDimension(this.element,"width")||this.model.width))&&this._checkScroll()},_addContentBaseClass:function(n){this.model.headerPosition=="top"&&(n.addClass("e-hidebottom e-addborderbottom"),n.removeClass("e-hidetop e-addbordertop e-hideright e-addborderright e-hideleft e-addborderleft"));this.model.headerPosition=="bottom"&&(n.removeClass("e-hidebottom e-addborderbottom e-hideright e-addborderright e-hideleft e-addborderleft"),n.addClass("e-hidetop e-addbordertop"));this.model.headerPosition=="left"&&(n.removeClass("e-hidetop e-addbordertop e-hidebottom e-addborderbottom e-hideright e-addborderright"),n.addClass("e-hideleft e-addborderleft"));this.model.headerPosition=="right"&&(n.removeClass("e-hidetop e-addbordertop e-hidebottom e-addborderbottom e-hideleft e-addborderleft"),n.addClass("e-hideright e-addborderright"));n.addClass("e-content  e-content-item e-box").attr("role","tabpanel").attr("aria-hidden",!0)},_checkScroll:function(){var i,r,u,f;if(this.scrollPanelWidth=t.getDimension(this.element,"width"),this.scrollPanelHeight=t.getDimension(this.element,"height"),this.model.enableTabScroll==!0&&this._tabContentsHeight()>this.items.height()){if(this.scrollstep=0,this.model.enableTabScroll=!0,(this.model.headerPosition=="top"||this.model.headerPosition=="bottom")&&this.itemsContainer.css({width:t.getDimension(this.element,"width")+parseInt(this.items.css("width"))*this.items.length+"px",position:"absolute"}),this._beforeWidth=0,this.model.enablePersistence==!0)if(this.model.headerPosition=="top"||this.model.headerPosition=="bottom")for(i=0;i<this.selectedItemIndex();i++)this._beforeWidth+=this.items[i].offsetWidth;else for(i=0;i<this.selectedItemIndex();i++)this._beforeWidth+=this.items[i].offsetHeight;r=parseInt(this.itemsContainer.css("width"));this.model.headerPosition=="top"&&(u=n(this.contentPanels),u.css("padding-top",this.itemsContainer.outerHeight()+(u.hasClass("e-activetop")?0:this.model.enableRTL?4:3)+"px"),n(this.contentPanels).css({"border-top":"none",width:t.getDimension(this.element,"width")-1+"px"}),this.itemsContainer.css("border-bottom","1px solid #bbbcbb"));this.model.headerPosition=="bottom"&&(n(this.contentPanels).css({position:"relative",width:t.getDimension(this.element,"width")-1+"px","border-bottom":"none"}),this.itemsContainer.css("border-top","1px solid #bbbcbb"),n(this.contentPanels).css({"border-top":""}));f=parseInt(r-(this.scrollPanelWidth+this.scrollstep-1));this.model.enableRTL&&(this.model.headerPosition=="top"||this.model.headerPosition=="bottom")?this.itemsContainer.css("clip","rect(0px,"+r+"px,100px,"+f+"px)"):this.model.headerPosition=="left"?this._tabContentsHeight()>Number(this.model.height.split("px")[0])&&(this.itemsContainer.css({height:parseInt(this.itemsContainer.css("height"))+parseInt(this.items.css("height"))*this.items.length+30+"px",position:"absolute","border-right":"1px solid #bbbcbb",background:"white"}),n(this.contentPanels).css("padding-left",this.itemsContainer.width()+5+"px"),this.model.enableRTL&&this.itemsContainer.css("margin-right",t.getDimension(this.element,"width")-this.itemsContainer.width()),this._beforeWidth==0||this._beforeWidth<this.scrollPanelHeight?this.itemsContainer.css("clip","rect(0px,"+(this.itemsContainer.width()+4)+"px,"+this.scrollPanelHeight+"px,"+this.scrollstep+"px)"):this._beforeWidth>this.scrollPanelHeight&&this.itemsContainer.css({clip:"rect("+(this.items[this.selectedItemIndex()].offsetTop-this.scrollPanelHeight)*2+"px,"+(this.itemsContainer.width()+2)+"px,"+(this.items[this.selectedItemIndex()].offsetTop*2-this.scrollPanelHeight)+"px,0px)","margin-top":"-"+(this.items[this.selectedItemIndex()].offsetTop-this.scrollPanelHeight)*2+"px"}),this.element.removeClass("e-scrolltab")):this.model.headerPosition=="right"?(this._tabContentsHeight()>Number(this.model.height.split("px")[0])&&(this.itemsContainer.css({height:parseInt(this.itemsContainer.css("height"))+parseInt(this.items.css("height"))*this.items.length+30+"px",position:"absolute","margin-left":"-1px",right:0+Number(this.element.css("padding-left").split("px")[0])+"px"}).css("z-index","12"),n(this.contentPanels).css({position:"absolute",width:t.getDimension(this.element,"width")-this.itemsContainer.outerWidth()+"px",height:t.getDimension(this.element,"height")+"px","border-right":"none"}),this.itemsContainer.css("border-left","1px solid #bbbcbb"),this.model.enableRTL&&this.itemsContainer.css("margin-right","-"+(this.itemsContainer.width()+1)+"px"),this._beforeWidth==0||this._beforeWidth<this.scrollPanelHeight?this.itemsContainer.css("clip","rect(0px,"+this.itemsContainer.width()+2+"px,"+this.scrollPanelHeight+"px,"+this.scrollstep+"px)"):this._beforeWidth>this.scrollPanelHeight&&this.itemsContainer.css({clip:"rect("+(this.items[this.selectedItemIndex()].offsetTop-this.scrollPanelHeight)*2+"px,"+(this.itemsContainer.width()+2)+"px,"+(this.items[this.selectedItemIndex()].offsetTop*2-this.scrollPanelHeight)+"px,0px)","margin-top":"-"+(this.items[this.selectedItemIndex()].offsetTop-this.scrollPanelHeight)*2+"px"}),this.element.removeClass("e-scrolltab")),this.model.enableRTL&&(this.itemsContainer.css({height:parseInt(this.itemsContainer.css("height"))+parseInt(this.items.css("height"))*this.items.length+30+"px",position:"absolute","margin-left":"-1px",right:this.itemsContainer.width()+Number(this.element.css("padding-right").split("px")[0])+"px"}).css("z-index","12"),n(this.contentPanels).css({position:"absolute",width:t.getDimension(this.element,"width")-this.itemsContainer.outerWidth()+"px",left:this.element.css("padding-left"),height:t.getDimension(this.element,"height")+"px","border-right":"none",left:0+Number(this.element.css("padding-right").split("px")[0])+"px"}))):this._beforeWidth==0||this._beforeWidth<this.scrollPanelWidth?this.itemsContainer.css({clip:"rect(0px,"+(this.scrollPanelWidth+this.scrollstep)+"px,100px,"+this.scrollstep+"px)","margin-left":"-"+this.scrollstep+"px"}):this._beforeWidth>this.scrollPanelWidth&&this.itemsContainer.css({clip:"rect(0px,"+(this.items[this.selectedItemIndex()].offsetLeft*2-this.scrollPanelWidth)+"px,100px,"+(this.items[this.selectedItemIndex()].offsetLeft-this.scrollPanelWidth)*2+"px)","margin-left":"-"+(this.items[this.selectedItemIndex()].offsetLeft-this.scrollPanelWidth)*2+"px"});this.element.find(".e-icon.e-chevron-circle-left").length&&this.element.find(".e-icon.e-chevron-circle-left").css("display","none");this._initialClip=this.itemsContainer.css("clip")}},_executeForwardScrolling:function(n,i){var r=i?i:n.type=="swiperight"||n.type=="swipeleft"?50:30;if(this.model.headerPosition=="top"||this.model.headerPosition=="bottom")if(this.model.enableRTL){var f=Number(this.itemsContainer.css("clip").split("px")[1].replace(",","")),u=Number(this.itemsContainer.css("clip").split("px")[3].replace(",","")),o=this.itemsContainer.css("margin-right")?Number(this.itemsContainer.css("margin-right").split("px")[0].replace(",","")):0,e=Number(this._rightScrollIcon.css("margin-left").split("px")[0]),s=this._leftScrollIcon&&this._leftScrollIcon.css("margin-right")?Number(this._leftScrollIcon.css("margin-right").split("px")[0]):"";this.itemsContainer.css({clip:"rect(0px,"+(f-r)+"px,100px,"+(u-r)+"px)","margin-right":"-"+(-o+r)+"px"});this._rightScrollIcon.css("margin-left",e-r+"px");this._leftScrollIcon?this._leftScrollIcon.css("margin-right",s+r+"px"):"";n.type=="swipeleft"&&Math.abs(Number(this.itemsContainer.css("margin-right").split("px")[0]))>=this._tabContentsWidth()-t.getDimension(this.element,"width")&&this._off(this.items,"swipeleft",this._tabSwipe);this._leftScrollIcon&&this._leftScrollIcon.css("margin-right")&&Number(this.itemsContainer.css("margin-right").split("px")[0].replace("-",""))>=this._tabContentsWidth()-t.getDimension(this.element,"width")&&this._rightScrollIcon.css("display","none")}else{var f=Number(this.itemsContainer.css("clip").split("px")[1].replace(",","")),u=Number(this.itemsContainer.css("clip").split("px")[3].replace(",","")),e=Number(this._rightScrollIcon.css("margin-right").split("px")[0]);this.itemsContainer.css({clip:"rect(0px,"+(f+r)+"px,100px,"+(u+r)+"px)","margin-left":"-"+(u+r)+"px"});n.type=="swipeleft"&&Math.abs(Number(this.itemsContainer.css("margin-left").split("px")[0]))>=this._tabContentsWidth()-t.getDimension(this.element,"width")&&this._off(this.items,"swipeleft",this._tabSwipe);this._leftScrollIcon&&this._leftScrollIcon.css("margin-left")&&Number(this.itemsContainer.css("margin-left").split("px")[0].replace("-",""))>=this._tabContentsWidth()-t.getDimension(this.element,"width")&&(this._rightScrollIcon.css("display","none"),this._off(this.items,"swipeleft",this._tabSwipe))}else if(this.model.headerPosition=="left"||this.model.headerPosition=="right"){var f=Number(this.itemsContainer.css("clip").split("px")[0].replace(",","").split("(")[1]),u=Number(this.itemsContainer.css("clip").split("px")[2].replace(",","")),e=Number(this._rightScrollIcon.css("margin-top").split("px")[0].replace(",","")),c=this._leftScrollIcon&&this._leftScrollIcon.css("margin-top")?Number(this._leftScrollIcon.css("margin-top").split("px")[0]):0,h=this.itemsContainer.css("margin-top")?Number(this.itemsContainer.css("margin-top").split("px")[0]):0;this.itemsContainer.css({clip:"rect("+(f+r)+"px, "+(this.itemsContainer.width()+4)+"px,"+(u+r)+"px, 0px)","margin-top":"-"+(-h+r)+"px"});u>this._tabContentsHeight()-20&&(this.itemsContainer.css({clip:"rect("+(this._tabContentsHeight()-Number(this.model.height)+2)+"px, "+(this.itemsContainer.width()+4)+"px, "+(this._tabContentsHeight()+2)+"px, 0px","margin-top":"-"+(this._tabContentsHeight()-Number(this.model.height)+2)+"px"}),this._rightScrollIcon.css("display","none"))}},_executeBackwardScrolling:function(n,i){var r;if(this._rightScrollIcon!=""&&this._rightScrollIcon.css("display","block"),r=i?i:n.type=="swiperight"||n.type=="swipeleft"?50:30,this.model.headerPosition=="top"||this.model.headerPosition=="bottom")if(this.model.enableRTL){var f=Number(this.itemsContainer.css("clip").split("px")[1].replace(",","")),u=Number(this.itemsContainer.css("clip").split("px")[3].replace(",","")),e=Number(this.itemsContainer.css("margin-right").split("px")[0])?Number(this.itemsContainer.css("margin-right").split("px")[0]):0,s=this._leftScrollIcon&&this._leftScrollIcon.css("margin-right")?Number(this._leftScrollIcon.css("margin-right").split("px")[0]):"",o=Number(this._rightScrollIcon.css("margin-left").split("px")[0]);this.itemsContainer.css({clip:"rect(0px,"+(f+r)+"px,100px,"+(u+r)+"px)","margin-right":"-"+(-e-r)+"px"});this._rightScrollIcon.css("margin-left",o+r+"px");this._leftScrollIcon?this._leftScrollIcon.css("margin-right",s-r+"px"):"";n.type=="swiperight"&&Math.abs(Number(this.itemsContainer.css("margin-right").split("px")[0]))<=this._tabContentsWidth()-t.getDimension(this.element,"width")&&this._on(this.items,"swipeleft",this._tabSwipe);e>=-r&&this._leftScrollIcon&&this._leftScrollIcon.css("display","none")}else{var f=Number(this.itemsContainer.css("clip").split("px")[1].replace(",","")),u=Number(this.itemsContainer.css("clip").split("px")[3].replace(",","")),o=Number(this._rightScrollIcon.css("margin-right").split("px")[0]);this.itemsContainer.css({clip:"rect(0px,"+(f-r)+"px,100px,"+(u-r)+"px)","margin-left":"-"+(u-r)+"px"});u-r<0&&(this.itemsContainer.css({clip:"rect(0px,"+t.getDimension(this.element,"width")+"px,100px, 0px","margin-left":"0px"}),this._rightScrollIcon.css("margin-right",this.itemsContainer.width()-t.getDimension(this.element,"width")+20+"px"));n.type=="swiperight"&&Math.abs(Number(this.itemsContainer.css("margin-left").split("px")[0]))<=this._tabContentsWidth()-t.getDimension(this.element,"width")&&this._on(this.items,"swipeleft",this._tabSwipe);u<=r&&this._leftScrollIcon&&this._leftScrollIcon.css("display","none")}else if(this.model.headerPosition=="left"||this.model.headerPosition=="right"){var f=Number(this.itemsContainer.css("clip").split("px")[0].replace(",","").split("(")[1]),u=Number(this.itemsContainer.css("clip").split("px")[2].replace(",","")),o=Number(this._rightScrollIcon.css("margin-top").split("px")[0]),c=this._leftScrollIcon.css("margin-top")?Number(this._leftScrollIcon.css("margin-top").split("px")[0]):0,h=this.itemsContainer.css("margin-top")?Number(this.itemsContainer.css("margin-top").split("px")[0]):0;this.itemsContainer.css({clip:"rect("+(f-r)+"px, "+this.itemsContainer.width()+"px,"+(u-r)+"px, 0px)","margin-top":"-"+(-h-r)+"px"});Number(this.itemsContainer.css("clip").split("px")[0].split("(")[1])<=0&&(this.itemsContainer.css({clip:"rect( 0px, "+this.itemsContainer.width()+"px,"+Number(this.model.height)+"px, 0px)","margin-top":"0px"}),this._leftScrollIcon.css("display","none"))}},_removeHeaderClass:function(){this.itemsContainer.remove();this.itemsContainer.insertBefore(this.element.find(">div").first());this.items.removeClass("e-bottom-line e-top-line");n(this.contentPanels).removeClass("e-content-bottom e-activetop e-activebottom");this.itemsContainer.removeClass("e-header e-left e-right")},_removeVerticalClass:function(){this.element.removeClass("e-vertical");this.itemsContainer.removeClass("e-left e-right").removeAttr("style")},_removeBaseClass:function(){this.element.removeClass("e-tab e-widget e-corner e-rtl e-js e-tabscroll").removeAttr("role tabindex unselectable");(this.model.headerPosition=="left"||this.model.headerPosition=="right")&&this._removeVerticalClass();this.itemsContainer.removeClass("e-header e-box e-clearall e-select e-addborderbottom e-addbordertop e-addborderleft e-addborderright");this.anchors.removeClass("e-link");this.items.removeClass("e-select e-item e-active e-bottom-line e-top-line e-margine-top e-margine-bottom e-rtl-top-line e-top-hover e-rtl-bottom-line e-disable").removeAttr("role tabindex aria-selected aria-expanded");n(this.contentPanels).removeClass("e-content  e-content-item e-box e-content-bottom e-activetop e-activebottom e-active-content e-hidebottom e-addborderbottom e-hidetop e-addbordertop e-hideleft e-addborderleft e-hideright e-addborderright e-disable").removeAttr("role aria-hidden").css("display","");this.element.find("div.e-close.e-tabdelete,div.e-icon.e-chevron-circle-right,div.e-icon.e-chevron-circle-left,div.e-icon.e-reload").remove()},_addContentTag:function(n,i){var u=this._getTabId(n),r=this.element.find("#"+u);r.length||(r=t.buildTag("div.e-content  e-content-item e-box e-content-bottom #"+u).insertAfter(this.contentPanels[i-1]||this.itemsContainer));this.contentPanels.splice(i,0,r[0])},_roundedCorner:function(n){n?this.element.addClass("e-corner"):this.element.hasClass("e-corner")&&this.element.removeClass("e-corner")},_setTabsHeightStyle:function(i){var r,u;if(t.Tab.HeightAdjustMode.Content!=i&&n(this.contentPanels).height(""),t.Tab.HeightAdjustMode.Fill==i)(t.Tab.Position.Left===this.model.headerPosition||t.Tab.Position.Right===this.model.headerPosition)&&n(this.contentPanels).css("height","100vh"),this._contentPaneSize();else if(t.Tab.HeightAdjustMode.Auto==i){for(r=0,n(this.contentPanels).css({display:"none"}).addClass("e-active-content"),u=0;u<this.contentPanels.length;u++)r=Math.max(r,this._getDimension(n(this.contentPanels[u]),"outerHeight"));n(this.contentPanels).removeClass("e-active-content");n(this.contentPanels).height(r);this.maxAutoHeight=r;this.showItem(this.selectedItemIndex())}else t.Tab.HeightAdjustMode.None==i&&this.model.height!=null&&this._contentPaneSize();t.Tab.HeightAdjustMode.Fill!==i&&n(this.itemsContainer).height("");t.Tab.HeightAdjustMode.Content==i&&n(this.contentPanels).height("auto");this.model.enableTabScroll&&(this.model.headerPosition=="left"||this.model.headerPosition=="right")&&n(this.contentPanels).css("height",this.model.height+"px")},_getDimension:function(t,i){var u,f=n(t).parents().addBack().filter(":hidden"),r={visibility:"hidden",display:"block"},e=[];return f.each(function(){var t={};for(var n in r)t[n]=this.style[n],this.style[n]=r[n];e.push(t)}),u=/(outer)/g.test(i)?n(t)[i](!0):n(t)[i](),f.each(function(n){var i=e[n];for(var t in r)this.style[t]=i[t]}),u},showItem:function(i){var f,e,r,u;if(n.inArray(i,this.model.disabledItemIndex)<0){if(f=this,this._isInteraction!=!1&&(this._isInteraction=!0),this._preTabSelectedIndex=this.selectedItemIndex(),this.selectedItemIndex(i),this.selectedItemIndex()>=this.contentPanels.length&&(this.selectedItemIndex(0),i=this.selectedItemIndex()),i>=0&&!this.initialRender&&!0===this._onBeforeActive(i))return this.selectedItemIndex(this._preTabSelectedIndex),!1;if(this._preTabIndex=this._preTabSelectedIndex,n(this.items[this.selectedItemIndex()]).attr("aria-expanded",!0).attr("aria-selected",!0).attr("tabindex",0),this.selectedItemIndex()!=null&&this.selectedItemIndex()<this.contentPanels.length){for(this._ajaxLoad(),this.hideItem(this._preTabIndex),n(this.contentPanels[this.selectedItemIndex()]).fadeIn(this.model.enableAnimation?20:0,function(){if(!f.initialRender&&f._onActive())return!0;f.initialRender=!1}),this.model.headerPosition=="left"||this.model.headerPosition=="right"?n(this.contentPanels[this.selectedItemIndex()]).addClass("e-active-content "):(e=this.model.headerPosition==t.Tab.Position.Top?"e-activetop":"e-activebottom",n(this.contentPanels[this.selectedItemIndex()]).addClass(e)),n(this.items[this.selectedItemIndex()]).addClass("e-active").removeClass("e-select"),n(this.items[this.selectedItemIndex()]).removeClass("e-margine-top e-margine-bottom"),r=0;r<=n(this.items).length;r++)n(this.items[r]).hasClass("e-select")&&(this.model.headerPosition=="right"&&n(this.items[r]).removeClass("e-margine-top e-margine-bottom"),this.model.headerPosition=="left"&&n(this.items[r]).removeClass("e-margine-top e-margine-bottom"),this.model.headerPosition=="top"&&(this.element.hasClass("e-tab-collapsed")?n(this.items[r]).removeClass("e-margine-top"):n(this.items[r]).addClass("e-margine-top"),n(this.items[r]).removeClass("e-margine-bottom")),this.model.headerPosition=="bottom"&&(n(this.items[r]).removeClass("e-margine-top"),n(this.items[r]).addClass("e-margine-bottom")));n(this.contentPanels[this.selectedItemIndex()]).addClass("e-active-content").removeAttr("aria-hidden",!1)}}this.model.enableTabScroll&&this._tabContentsWidth()>(this.model.width||this.element.width())&&this.itemsContainer.find("li").length&&(this.model.headerPosition=="top"||this.model.headerPosition=="bottom")?this.model.enableRTL||(u=Number(this.itemsContainer.find("li.e-active").position().left.toFixed(0))+this.itemsContainer.find("li.e-active").width()-t.getDimension(this.element,"width"),u>0&&(Number(this.itemsContainer.find("li.e-active").offset().left.toFixed(0))+this.itemsContainer.find("li.e-active").width()>t.getDimension(this.element,"width")||Number(this.itemsContainer.find("li.e-active").offset().left.toFixed(0))-this.itemsContainer.find("li.e-active").width()<0)&&(this.itemsContainer.css("clip","rect(0 ,"+(t.getDimension(this.element,"width")+(u+10))+"px, 100px,"+(u+10)+"px)").css("margin-left","-"+(u+10)+"px"),this._rightScrollIcon?this._rightScrollIcon.css("margin-right",this.itemsContainer.width()-t.getDimension(this.element,"width")+10-u+"px").css("display","block"):"",this._addScrollBackIcon(),this._leftScrollIcon&&this._leftScrollIcon.css("margin-left")&&Number(this.itemsContainer.css("margin-left").split("px")[0].replace("-",""))>=this._tabContentsWidth()-t.getDimension(this.element,"width")?(this._rightScrollIcon.css("display","none"),this._off(this.items,"swipeleft",this._tabSwipe)):this._leftScrollIcon?this._leftScrollIcon.css("display","block"):"")):this.model.enableTabScroll&&this.model.height&&(this.model.headerPosition=="left"||this.model.headerPosition=="right")&&!this.model.enableRTL&&(u=Number(this.itemsContainer.find("li.e-active").position().top.toFixed(0))+this.itemsContainer.find("li.e-active").height()-Number(this.model.height),u>0&&(Number(this.itemsContainer.find("li.e-active").offset().top.toFixed(0))+this.itemsContainer.find("li.e-active").height()>Number(this.model.height)||Number(this.itemsContainer.find("li.e-active").offset().top.toFixed(0))-this.itemsContainer.find("li.e-active").height()<0)&&(this.itemsContainer.css("clip","rect("+u+"px,"+(this.itemsContainer.outerWidth()+2)+"px, "+(Number(this.model.height)+u)+"px, 0px").css("margin-top","-"+u+"px"),this._addScrollBackIcon()))},hideItem:function(i){if(n(this.contentPanels[i]).fadeOut(0),!(this.model.headerPosition=="left"||this.model.headerPosition=="right"))var r=this.model.headerPosition==t.Tab.Position.Top?"e-activetop":"e-activebottom";n(this.items[i]).removeClass("e-active").addClass("e-select");n(this.contentPanels[i]).removeClass("e-active-content "+r).attr("aria-hidden",!0)},_ajaxLoad:function(){var t=n(this.contentPanels[this.selectedItemIndex()]),i=this.anchors[this.selectedItemIndex()],r=n(i).attr("href");t.is(":empty")&&r.indexOf("#")!==0&&this._sendAjaxOptions(t,i)},_getTabId:function(n){return n.indexOf("#")?this.model.idPrefix+this._getNextTabId():n.replace("#","")},_getNextTabId:function(){return++this.tabId},_disableTabs:function(){for(var t=0,i;i=this.items[t];t++)n.inArray(t,this.model.disabledItemIndex)>-1&&(n(i).find("a").off(this.model.events),n(i).find("div.e-close").off("click")),n(i)[n.inArray(t,this.model.disabledItemIndex)!=-1&&!n(i).hasClass("e-tab-selected")?"addClass":"removeClass"]("e-disable"),n(this.contentPanels[t])[n.inArray(t,this.model.disabledItemIndex)!=-1&&!n(this.contentPanels[t]).hasClass("e-tab-selected")?"addClass":"removeClass"]("e-disable")},_tabItemClick:function(t){if(this.model.enabled){t.preventDefault();var i;this.selectedItemIndex()==n(this.items).index(n(t.currentTarget))&&this.model.collapsible?(i=-1,n(this.element).addClass("e-tab-collapsed")):i=n(this.items).index(n(t.currentTarget));i!=this.selectedItemIndex()&&this.showItem(i);n(this.element).removeClass("e-tab-collapsed");this.selectedItemIndex()>-1&&this.contentPanels!=0&&this.model.enableRTL&&n(this.element).height(this.itemsContainer.height()+parseInt(n(this.contentPanels[this.selectedItemIndex()]).css("height")))}},_tabDeleteClick:function(t){var u,r,i,f;this.model.enabled&&(u=n(t.target),r=n(t.target).parent().width(),u.hasClass("e-close")&&(i=n(this.items).index(n(t.target).parent())),i==this.selectedItemIndex()&&this.items.length>i&&this.selectedItemIndex(this.selectedItemIndex()+1),f=Number(this.itemsContainer.css("margin-right").split("px")[0])?Number(this.itemsContainer.css("margin-right").split("px")[0]):0,this.model.enableTabScroll&&(this.model.headerPosition=="top"||this.model.headerPosition=="bottom")&&(!this.model.enableRTL||this.model.enableRTL&&f<-r?this._executeBackwardScrolling(t,r):(this.itemsContainer.css({"margin-right":"0px",clip:this._initialClip}),this._leftScrollIcon&&this._leftScrollIcon.css("display","none"),this._rightScrollIcon&&this._rightScrollIcon.css("display","none"))),this.removeItem(i))},_tabScrollClick:function(n){this.model.enabled&&this._rightScrollIcon[0]==n.target&&(this._executeForwardScrolling(n),this._addScrollBackIcon(),this._leftScrollIcon.css("display","block"))},_tabSwipe:function(n){n.type=="swipeleft"?this._executeForwardScrolling(n):this._executeBackwardScrolling(n)},_tabScrollBackClick:function(n){this.model.enabled&&this._leftScrollIcon[0]==n.target&&this._executeBackwardScrolling(n)},_tabReloadClick:function(t){var i;if(this.model.enabled&&(i=n(t.target),i.hasClass("e-reload"))){var r=this.anchors[this.selectedItemIndex()],u=n(r).attr("href"),f=n(this.contentPanels[this.selectedItemIndex()]);u.indexOf("#")!==0?this._sendAjaxOptions(f,r):this.showItem(this.selectedItemIndex())}},_sendAjaxOptions:function(t,i){if(this._onBeforeLoad(i))return!0;t.addClass("e-load");var r=this,u=n(i).html(),f=i.href.replace("#",""),e={type:this.model.ajaxSettings.type,cache:this.model.ajaxSettings.cache,url:f,data:this.model.ajaxSettings.data,dataType:this.model.ajaxSettings.dataType,contentType:this.model.ajaxSettings.contentType,async:this.model.ajaxSettings.async,success:function(n){try{r._ajaxSuccessHandler(n,t,i,u)}catch(f){}},error:function(){try{r._ajaxErrorHandler(i,r.selectedItemIndex(),u)}catch(n){}}};this._sendAjaxRequest(e)},_sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(t,i,r,u){u!=null&&n(r).html(u);i.removeClass("e-load");i.html(t).addClass("e-tab-loaded");var f={data:t,url:r,content:i};return this._trigger("ajaxSuccess",f),this._onLoad(r)?!0:void 0},_ajaxErrorHandler:function(n,t){this._trigger("ajaxError",{data:n,url:t});this._onLoad(t)},_createContentPanel:function(t){return n("<div><\/div>").attr("id",t).addClass("e-content  e-content-item e-content-bottom e-box")},_refresh:function(){this._unWireEvents();this.itemsContainer.removeAttr("style class");n(this.contentPanels).removeAttr("style class");this.element.css("margin-left","");this._removeVerticalClass();this._removeHeaderClass();this._initialize()},_keyPress:function(i){if(this.model.enabled){var e,r,u=n(i.target),f;if(f=i.keyCode?i.keyCode:i.which?i.which:i.charCode,u.hasClass("e-link")||u.hasClass("e-item"))switch(f){case 39:case 40:i.preventDefault();this.showItem(this.selectedItemIndex()+1);break;case 37:case 38:i.preventDefault();this.selectedItemIndex()!=0?this.showItem(this.selectedItemIndex()-1):this.selectedItemIndex()==0&&this.showItem(this.getItemsCount()-1);break;case 35:i.preventDefault();this.showItem(this.getItemsCount()-1);break;case 36:i.preventDefault();this.showItem(0);break;case 13:i.preventDefault();this.showItem(this.selectedItemIndex())}else if(i.ctrlKey&&!u.hasClass("e-tab"))switch(f){case 38:i.preventDefault();e=n(this.contentPanels).index(u.parent(".e-content"));r=n(this.items[e]);break;case 33:i.preventDefault();r=n(this.items[0]);this.showItem(0);break;case 34:i.preventDefault();r=n(this._headers[this.getItemsCount()-1]);this.showItem(this.getItemsCount()-1)}t.isNullOrUndefined(r)||(r.addClass("e-focus"),r.focus())}},_hoverHandler:function(t){if(t.preventDefault(),this.model.enabled){var i=n(this.items).index(n(t.target).parent());i==-1&&(i=n(this.items).index(n(t.target)));(this.model.showCloseButton||this.model.showReloadIcon)&&!n(this.items[i]).hasClass("e-disable")&&(t.type==="mouseout"?n(this.element.find("div.e-tabdelete")[i]).css("visibility","hidden"):n(this.element.find("div.e-tabdelete")[i]).css("visibility","visible"),t.type==="mouseout"?n(this.element.find("div.e-reload")[i]).css("visibility","hidden"):n(this.element.find("div.e-reload")[i]).css("visibility","visible"));t.type==="mouseout"?n(this.element.find("div.e-chevron-circle-right")).css("visibility","hidden"):n(this.element.find("div.e-chevron-circle-right")).css("visibility","visible");t.type==="mouseout"?n(this.element.find("div.e-chevron-circle-left")).css("visibility","hidden"):n(this.element.find("div.e-chevron-circle-left")).css("visibility","visible")}},_wireEvents:function(t){this._on(this.items,t,this._tabItemClick);this._on(this.itemsContainer,"mouseover",this._hoverHandler);this._on(this.itemsContainer,"mouseout",this._hoverHandler);this._on(this.element.find(">ul").eq(0).find(">li div.e-close"),"click",this._tabDeleteClick);this._on(this.element.find("div.e-chevron-circle-left"),"click",this._tabScrollBackClick);this.model.enableTabScroll&&this._on(this.items,"swipeleft swiperight",this._tabSwipe);this._on(this.itemsContainer,"focusin",this._focusIn);this._on(this.itemsContainer,"focusout",this._focusOut);n(window).on("resize",n.proxy(this._resize,this));this._on(this.element.find(">ul").eq(0).find(">li div.e-reload"),"click",this._tabReloadClick)},_resize:function(){this.model&&this.model.width==null&&this.model.enableTabScroll&&(this.model.headerPosition=="top"||this.model.headerPosition=="bottom")&&(this._removeScroll(),this._addScroll())},_unWireEvents:function(){this._off(this.items,this.model.events);this._off(this.element.find(">ul").eq(0).find(">li div.e-close"),"click");this._off(this.element.find("div.e-chevron-circle-right"),"click");this._off(this.element.find("div.e-chevron-circle-left"),"click");this.model.enableTabScroll&&this._off(this.items,"swipeleft swiperight",this._tabSwipe);this._off(this.itemsContainer,"mouseover",this._hoverHandler);this._off(this.itemsContainer,"mouseout",this._hoverHandler);this._off(this.element.find("div.e-chevron-circle-left"),"mouseover",this._hoverHandler);this._off(this.element.find("div.e-chevron-circle-right"),"mouseover",this._hoverHandler);this._off(this.element.find("div.e-chevron-circle-left"),"mouseout",this._hoverHandler);this._off(this.element.find("div.e-chevron-circle-right"),"mouseout",this._hoverHandler);this._off(this.itemsContainer,"focusin",this._focusIn);this._off(this.itemsContainer,"focusout",this._focusOut);this._off(this.element.find(">ul").eq(0).find(">li div.e-reload"),"click");this._resizeEvents()},_resizeEvents:function(t){if(t==="fill")n(window).on("resize",n.proxy(this._windowResized,this));else n(window).off("resize",n.proxy(this._windowResized,this))},_windowResized:function(){var t=this._getDimension(n(this.element).parent(),"height");this._prevSize!=t&&(this._contentPaneSize(),this._prevSize=t,!this.model.width&&this.model.enableTabScroll&&this._addScroll())},_contentPaneSize:function(){var i,r,u,t;for(this.model.height!=null&&this.model.heightAdjustMode=="none"?(n(this.element).height(this.model.height),i=this._getDimension(n(this.element),"height")):i=this._getDimension(n(this.element).parent(),"height"),n(this.contentPanels).height(""),n(this.element).parent().css({overflow:"auto"}),(this.model.headerPosition==="top"||this.model.headerPosition==="bottom")&&(i-=this._getDimension(n(this.itemsContainer),"outerHeight")),r=0,t=0;t<this.contentPanels.length;t++)n(this.contentPanels[t]).hasClass("e-active-content")?(u=Math.max(r,this._getDimension(n(this.contentPanels[t]),"outerHeight")-this._getDimension(n(this.contentPanels[t]),"height")),this.model.height!=null&&this.model.heightAdjustMode=="none"?n(this.contentPanels[t]).outerHeight(i).css({overflow:"auto"}):n(this.contentPanels[t]).height(i-u).css({overflow:"auto"})):(r=Math.max(r,this._getDimension(n(this.contentPanels[t]),"outerHeight")-this._getDimension(n(this.contentPanels[t]),"height")),this.model.height!=null&&this.model.heightAdjustMode=="none"?n(this.contentPanels[t]).outerHeight(i).css({overflow:"auto"}):n(this.contentPanels[t]).height(i-r).css({overflow:"auto"}))},_disableItems:function(t){if(!this.model.enabled)return!1;if(t!=null){for(var i=0;i<t.length;i++)n.inArray(t[i],this.model.disabledItemIndex)==-1&&this.model.disabledItemIndex.push(t[i]);this.model.disabledItemIndex.sort();this._disableTabs()}},_enableItems:function(t){var i,r;if(!this.model.enabled)return!1;for(i=0;i<t.length;i++)r=t[i],this.model.disabledItemIndex=n.grep(this.model.disabledItemIndex,function(n){return n!=r});this._disableTabs()},disable:function(){for(var t=[],n=0;n<this.getItemsCount();n++)t.push(n);this._disableItems(t);this.model.enabledItemIndex=[];this._unWireEvents()},enable:function(){var i=[],t;for(this.model.disabledItemIndex=[],t=0;t<this.getItemsCount();t++)n.inArray(t,this.model.enabledItemIndex)<0&&(this.model.enabledItemIndex.push(t),i.push(t)),this._enableItems(t)},getItemsCount:function(){if(this.items)return this.items.length},addItem:function(r,u,f,e,o){var h,s,a,c,l,v,y,p;for(this._addItemIndex=f>=0&&f<this.items.length?f:this.items.length,h=0;h<this.model.disabledItemIndex.length;h++)this.model.disabledItemIndex[h]>=f&&this.model.disabledItemIndex[h]++;this.model.headerPosition=="left"?this.items.length>=0&&this.itemsContainer.addClass("e-left"):this.model.headerPosition=="right"?this.items.length>=0&&this.itemsContainer.addClass("e-right"):this.items.length==0&&this.itemsContainer.addClass("e-header");s=t.buildTag("li.e-select e-item");this.model.headerPosition=="top"&&(this.model.enableRTL?n(s).addClass("e-rtl-top-line e-top-hover"):n(s).addClass("e-bottom-line"));t.isNullOrUndefined(e)||(a=t.buildTag("span").addClass(e),s.append(a));f===i&&u===i&&r!=null&&(u="Item");f===i&&u===i&&o===i&&(r="#Item"+this.items.length,u="Item");o!=i?(o.indexOf("#")!=0&&(o="#"+o),this.divId=o):r!=i&&(o=r);c=t.buildTag("a",u,{},{href:r});c.addClass("e-link");(this.model.headerPosition=="top"||this.model.headerPosition=="bottom")&&c.appendTo(s);this.model.showCloseButton&&(l=t.buildTag("div.e-icon e-close e-tabdelete","",{},{}).css("visibility","hidden"),s.append(l),this._on(l,"click",this._tabDeleteClick));(this.model.headerPosition=="left"||this.model.headerPosition=="right")&&c.appendTo(s);f===i&&(f=this.anchors.length);v=f>=this.items.length;v?s.appendTo(this.itemsContainer):s.insertBefore(this.items[f]);t.isNullOrUndefined(this.model.headerSize)||this._setHeaderSize(this.model.headerSize);this.selectedItemIndex()==f?(this.hideItem[f],this.selectedItemIndex(this.selectedItemIndex()+1)):(this.hideItem[f],f<this.selectedItemIndex()&&this.selectedItemIndex(this.selectedItemIndex()+1));this._itemsRefreshing();this._reinitialize(!0);this.model.headerPosition=="top"&&n(this.contentPanels[f]).addClass("e-hidebottom");this.model.headerPosition=="bottom"&&(n(this.contentPanels[f]).addClass("e-hidetop"),s.addClass("e-top-line e-item e-select e-margine-bottom"));this.model.headerPosition=="left"&&n(this.contentPanels[f]).addClass("e-hideleft");this.model.headerPosition=="right"&&n(this.contentPanels[f]).addClass("e-hideright");y={tabHeader:this.anchors[f],tabContent:this.contentPanels[f]};this.refreshTabScroll();this._addItemIndex=null;this._onAdd(y);this.model.showReloadIcon&&(p=t.buildTag("div.e-icon e-reload","",{},{role:"presentation"}).css("visibility","hidden"),n(this.element.find("li")[f]).append(p));this.model.enableTabScroll&&this.model.headerPosition=="right"&&n(this.contentPanels).css("height",this.model.height+"px")},_isSizeExceeded:function(){for(var r,u=this.element.width(),i=0,f=this.items.length,t=0;t<f;t++)r=n(this.items[t]).width(),i+=r;return i>u?!0:!1},refreshTabScroll:function(){this._isSizeExceeded()?(this.element.find("div.e-chevron-circle-right").length>=1&&this.element.find("div.e-chevron-circle-right").remove(),this.model.enableTabScroll&&(this._checkScroll(),this._addScrollIcon())):(this.model.headerPosition=="left"||this.model.headerPosition=="right"&&this._tabContentsHeight()>(this.element.width()||Number(this.model.height))||this.model.headerPosition=="top"||this.model.headerPosition=="bottom")&&this._checkScroll()},removeItem:function(t){var r,i,u;if(!this.model.enabled)return!1;if(t!=null&&t>-1&&t<this.items.length){if(this._onBrforeRemove({index:t})===!0)return!1;for(r=n(this.items[t]).remove(),this.model.disabledItemIndex=[],r.hasClass("e-active")&&(t==0?this.selectedItemIndex(t+1):this.selectedItemIndex(t-1),this.showItem(this.selectedItemIndex())),n(this.element.find(">div.e-content")[t]).remove(),this.contentPanels.splice(t,1),t<this.selectedItemIndex()?this.selectedItemIndex(this.selectedItemIndex()-1):this.selectedItemIndex(),(t<0||t>=this.anchors.length)&&this.selectedItemIndex(0),(this.model.headerPosition=="left"||this.model.headerPosition=="right")&&this.items.length==1?this._removeVerticalClass():this.items.length==1&&this.itemsContainer.removeClass("e-header"),this._unWireEvents(),this._itemsRefreshing(),this._wireEvents(this.model.events),this.model.enableTabScroll&&this._on(this.element.find("div.e-chevron-circle-right"),"click",this._tabScrollClick),i=0;i<this.items.length;i++)n(this.items[i]).hasClass("e-disable")&&this.model.disabledItemIndex.push(i);this._disableTabs();u={removedTab:r};this._onRemove(u)}this.getItemsCount()==0&&(this.itemsContainer.removeAttr("style"),this.itemsContainer.find("div").remove());this._tabContentsHeight()<Number(this.model.height)&&this.itemsContainer.css("clip").split("px").length&&this.model.enableTabScroll&&(this.model.headerPosition=="left"||this.model.headerPosition=="right")?(this._refresh(),this.itemsContainer.removeAttr("style"),this._leftScrollIcon?this._leftScrollIcon.remove():"",this._rightScrollIcon?this._rightScrollIcon.remove():""):this.model.enableTabScroll&&(this.model.headerPosition=="left"||this.model.headerPosition=="right")&&(this._leftScrollIcon&&Number(this.itemsContainer.css("clip").split("px")[0].replace(",","").split("(")[1])!=-Number(this._leftScrollIcon.css("margin-top").split("px")[0])?(this._removeScroll(),this._addScroll()):this.refreshTabScroll(),this.showItem(this.selectedItemIndex()))},show:function(){if(!this.model.enabled)return!1;this.element.css("visibility","visible")},hide:function(){if(!this.model.enabled)return!1;this.element.css("visibility","hidden")},_onBeforeLoad:function(n){var t;return t=this.selectedItemIndex()==-1&&this.model.collapsible?{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:null,activeIndex:null,url:n,isInteraction:this._isInteraction}:{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:this.items[this.selectedItemIndex()],activeIndex:this.selectedItemIndex(),url:n,isInteraction:this._isInteraction},this._trigger("ajaxBeforeLoad",t)},_focusIn:function(){if(!this.model.readOnly&&this.model.allowKeyboardNavigation)n(this.element).on("keydown",n.proxy(this._keyPress,this))},_focusOut:function(){n(this.element).off("keydown",n.proxy(this._keyPress,this))},_onLoad:function(n){var t;return t=this.selectedItemIndex()==-1&&this.model.collapsible?{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:null,activeIndex:null,url:n,isInteraction:this._isInteraction}:{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:this.items[this.selectedItemIndex()],activeIndex:this.selectedItemIndex(),url:n,isInteraction:this._isInteraction},this._trigger("ajaxLoad",t)},_onActive:function(){var n;return n=this.selectedItemIndex()==-1&&this.model.collapsible?{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:null,activeIndex:null,isInteraction:this._isInteraction}:{prevActiveHeader:this.items[this._preTabIndex],prevActiveIndex:this._preTabIndex,activeHeader:this.items[this.selectedItemIndex()],activeIndex:this.selectedItemIndex(),isInteraction:this._isInteraction},this._isInteraction=!0,this._trigger("itemActive",n)},_onBeforeActive:function(n){if(this.model.beforeActive!=null){var t;return t=this.selectedItemIndex()==-1&&this.model.collapsible?{prevActiveHeader:this.items[this._preTabSelectedIndex],prevActiveIndex:this._preTabSelectedIndex,activeHeader:null,activeIndex:null,isInteraction:this._isInteraction}:{prevActiveHeader:this.items[this._preTabSelectedIndex],prevActiveIndex:this._preTabSelectedIndex,activeHeader:this.items[n],activeIndex:n,isInteraction:this._isInteraction},this._trigger("beforeActive",t)}},_onAdd:function(n){return this._trigger("itemAdd",n)},_onRemove:function(n){return this._trigger("itemRemove",n)},_onBrforeRemove:function(n){return this._trigger("beforeItemRemove",n)}});t.Tab.HeightAdjustMode={Content:"content",Auto:"auto",Fill:"fill",None:"none"};t.Tab.Position={Top:"top",Bottom:"bottom",Left:"left",Right:"right"}}(jQuery,Syncfusion),function(n,t,r){t.gridFeatures=t.gridFeatures||{};t.widget("ejGrid","ej.Grid",{_rootCSS:"e-grid",element:null,validTags:["div"],model:null,_requiresID:!0,keyConfigs:{focus:"e",insertRecord:"45",deleteRecord:"46",editRecord:"113",saveRequest:"13",cancelRequest:"27",nextPage:"34",previousPage:"33",lastPage:"ctrl+alt+34",firstPage:"ctrl+alt+33",nextPager:"alt+34",previousPager:"alt+33",firstCellSelection:"36",lastCellSelection:"35",firstRowSelection:"ctrl+36",lastRowSelection:"ctrl+35",rowUpSelection:"ctrl+shift+38",rowDownSelection:"ctrl+shift+40",randomSelection:"ctrl+shift+83",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",moveCellRight:"9",moveCellLeft:"shift+9",selectedGroupExpand:"alt+40",totalGroupExpand:"ctrl+40",selectedGroupCollapse:"alt+38",totalGroupCollapse:"ctrl+38",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40"},_ignoreOnPersist:["actionBegin","actionComplete","actionFailure","batchAdd","batchDelete","beforeBatchSave","beforeBatchAdd","beforeBatchDelete","beginEdit","cellEdit","cellSave","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDrag","columnDragStart","columnDrop","columnSelecting","columnSelected","columnDeselecting","columnDeselected","create","dataBound","destroy","detailsCollapse","detailsExpand","endAdd","endDelete","endEdit","recordClick","recordDoubleClick","load","resized","resizeEnd","resizeStart","rightClick","rowSelected","rowSelecting","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDrop","templateRefresh","beforePrint","beforeRowDrop","query","isEdit","toolbarClick","queryCellInfo","mergeCellInfo","mergeHeaderCellInfo","currentViewData","enableAltRow","enableRTL","contextClick","contextOpen","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","childGrid","summaryRows","toolbarSettings","editSettings","allowMultiSorting","enableAutoSaveOnSelectionChange","locale","allowCellMerging","allowTextWrap","textWrapSettings","cssClass","dataSource","groupSettings.enableDropAreaAutoSizing","enableRowHover","showSummary","allowGrouping","enableHeaderHover","allowKeyboardNavigation","scrollSettings.frozenRows","scrollSettings.frozenColumns","enableTouch","contextMenuSettings.enableContextMenu","exportToExcelAction","exportToWordAction","exportToPdfAction"],ignoreOnExport:["isEdit","toolbarClick","query","queryCellInfo","selectionType","currentViewData","rowDataBound","rowTemplate","detailsDataBound","editSettings","pageSettings","enableAutoSaveOnSelectionChange","localization","allowScrolling","cssClass","dataSource","groupSettings.enableDropAreaAnimation","enableRowHover","allowSummary","enableHeaderHover","allowKeyboardNavigation"],ignoreOnToolbarServerClick:[],observables:["dataSource","selectedRowIndex","pageSettings.currentPage","selectedRowIndices"],_tags:[{tag:"columns",attr:["allowEditing","allowFiltering","allowTextWrap","filterType","allowGrouping","allowResizing","allowSorting","cssClass","customAttributes","dataSource","defaultValue","disableHtmlEncode","editTemplate","editType","foreignKeyField","foreignKeyValue","headerTemplateID","headerText","isFrozen","isIdentity","isPrimaryKey","filterBarTemplate","textAlign","templateID","textAlign","headerTextAlign","tooltip","clipMode","validationRules.minlength","validationRules.maxlength","validationRules.range","validationRules.number","validationRules.required","editParams.decimalPlaces",[{tag:"commands",attr:["type","buttonOptions"]}]],content:"template"},{tag:"summaryRows",attr:["showCaptionSummary","showTotalSummary",[{tag:"summaryColumns",attr:["customSummaryValue","dataMember","displayColumn","summaryType","template"]}]]},{tag:"stackedHeaderRows",attr:[[{tag:"stackedHeaderColumns",attr:["headerText","column"]}]]},{tag:"filterSettings.filteredColumns",attr:[]},{tag:"sortSettings.sortedColumns",attr:[]}],_dataSource:t.util.valueFunction("dataSource"),_selectedRow:t.util.valueFunction("selectedRowIndex"),_selectedMultipleRows:t.util.valueFunction("selectedRowIndices"),_currentPage:t.util.valueFunction("pageSettings.currentPage"),defaults:{allowPaging:!1,showColumnChooser:!1,gridLines:"both",allowSorting:!1,showStackedHeader:!1,selectedRecords:[],stackedHeaderRows:[],allowFiltering:!1,allowMultipleExporting:!1,allowSelection:!0,allowGrouping:!1,showSummary:!1,allowResizing:!1,allowResizeToFit:!1,allowTextWrap:!1,allowCellMerging:!1,enableRowHover:!0,enablePersistence:!1,enableFocusout:!1,selectedRowIndex:-1,selectedRowIndices:[],allowSearching:!1,enableToolbarItems:!1,enableHeaderHover:!1,allowReordering:!1,allowKeyboardNavigation:!0,allowRowDragAndDrop:!1,enableTouch:!0,enableLoadOnDemand:!1,columnLayout:"auto",selectionType:"single",dataSource:null,cssClass:"",allowScrolling:!1,locale:"en-US",enableAutoSaveOnSelectionChange:!0,allowMultiSorting:!1,exportToExcelAction:"ExportToExcel",exportToWordAction:"ExportToWord",exportToPdfAction:"ExportToPdf",_groupingCollapsed:[],_isHeightResponsive:!1,_checkSelectedRowsIndexes:[],editSettings:{allowEditing:!1,showAddNewRow:!1,allowAdding:!1,showAddNewRow:!1,allowDeleting:!1,editMode:"normal",rowPosition:"top",dialogEditorTemplateID:null,allowEditOnDblClick:!0,externalFormTemplateID:null,inlineFormTemplateID:null,formPosition:"bottomleft",titleColumn:null,showConfirmDialog:!0,showDeleteConfirmDialog:!1},selectionSettings:{selectionMode:["row"],enableToggle:!1,cellSelectionMode:"flow"},resizeSettings:{resizeMode:"normal"},pageSettings:{pageSize:12,pageCount:8,currentPage:1,totalPages:null,enableTemplates:!1,showDefaults:!1,template:null,pageSizeList:[],totalRecordsCount:null,enableQueryString:!1,printMode:"allpages"},groupSettings:{showDropArea:!0,showToggleButton:!1,showGroupedColumn:!0,showUngroupButton:!0,enableDropAreaAutoSizing:!0,captionFormat:null,groupedColumns:[]},contextMenuSettings:{enableContextMenu:!1,contextMenuItems:["Add Record","Edit Record","Delete Record","Sort In Ascending Order","Sort In Descending Order","Next Page","Last Page","Previous Page","First Page","Save","Cancel","Grouping","Ungrouping"],customContextMenuItems:[],subContextMenu:[],disableDefaultItems:!1},filterSettings:{filterType:"filterbar",filterBarMode:"immediate",showFilterBarStatus:!0,statusBarWidth:450,showPredicate:!1,filteredColumns:[],enableInterDeterminateState:!0,maxFilterChoices:1e3,enableCaseSensitivity:!1,immediateModeDelay:1500,enableComplexBlankFilter:!0,blankValue:""},searchSettings:{fields:[],key:"",operator:"contains",ignoreCase:!0},sortSettings:{sortedColumns:[]},toolbarSettings:{showToolbar:!1,toolbarItems:[],customToolbarItems:[]},minWidth:0,currentIndex:0,rowDropSettings:{dragBehavior:"move",dropMapper:null,dragMapper:null,dropTargetID:null},scrollSettings:{width:"auto",height:0,enableTouchScroll:!0,allowVirtualScrolling:!1,virtualScrollMode:"normal",frozenRows:0,frozenColumns:0,buttonSize:18,autoHide:!1,scrollerSize:18,scrollOneStepBy:57,enableVirtualization:!1},textWrapSettings:{wrapMode:"both"},summaryRows:[],enableRTL:!1,enableAltRow:!0,currentViewData:[],detailsTemplate:null,childGrid:null,keySettings:null,rowTemplate:null,detailsDataBound:null,rowDataBound:null,queryCellInfo:null,mergeCellInfo:null,mergeHeaderCellInfo:null,create:null,actionBegin:null,actionComplete:null,actionFailure:null,beginEdit:null,endEdit:null,endAdd:null,endDelete:null,beforeBatchAdd:null,beforeBatchSave:null,beforeBatchDelete:null,beforePrint:null,batchAdd:null,batchDelete:null,cellSave:null,cellEdit:null,resizeStart:null,resizeEnd:null,resized:null,load:null,destroy:null,rowSelecting:null,rowSelected:null,rowHover:null,rowDeselecting:null,rowDeselected:null,cellSelecting:null,cellSelected:null,cellDeselecting:null,cellDeselected:null,columnSelecting:null,columnSelected:null,columnDeselecting:null,columnDeselected:null,columnDragStart:null,columnDrag:null,columnDrop:null,rowDrag:null,rowDragStart:null,rowDrop:null,beforeRowDrop:null,dataBound:null,recordClick:null,recordDoubleClick:null,templateRefresh:null,rightClick:null,detailsCollapse:null,detailsExpand:null,toolbarClick:null,contextOpen:null,contextClick:null,columns:[],query:null,isEdit:!1,isResponsive:!1,enableResponsiveRow:!1,virtualLoading:null},dataTypes:{dataSource:"data",query:"data",columns:"array",childGrid:"parent",gridLines:"enum",summaryRows:"array",stackedHeaderRows:"array",toolbarSettings:{toolbarItems:"array",customToolbarItems:"array"},contextMenuSettings:{contextMenuItems:"array",customContextMenuItems:"array",subContextMenu:"array"},selectionSettings:{cellSelectionMode:"enum",selectionMode:"array",selectedRecords:"array"},sortSettings:{sortedColumns:"array"},filterSettings:{filteredColumns:"array",filterType:"enum",filterBarMode:"enum"},groupSettings:{groupedColumns:"array"},pageSettings:{pageSizeList:"array"},editSettings:{editMode:"enum",formPosition:"enum",rowPosition:"enum"},rowDropSettings:{dragBehavior:"enum"},searchSettings:{fields:"array"},textWrapSettings:{wrapMode:"enum"}},_columns:function(){var n=this.element.find(".e-gridheader");n.find("div").first().empty().append(this._renderGridHeader().find("table"));this._headerCellgDragDrop();this.refreshContent(!0);this._trigger("refresh")},_summaryRows:function(n,i,r){var u,e,f;(i=="showTotalSummary"||i=="showCaptionSummary")&&(u=n.summaryRows,e=r.toLowerCase()=="true"||r.toLowerCase()=="false"?t.parseJSON(r):!1,this.option("summaryRows")[u][i]=e);this.element.find(".e-gridfooter").remove();f=this._renderGridFooter();t.isNullOrUndefined(f)||f.insertAfter(this.getContent());(i=="showCaptionSummary"||i=="title")&&(this._isCaptionSummary=this.option("summaryRows")[u].showCaptionSummary,this.model.showSummary=this._isCaptionSummary,this.model.groupSettings.groupedColumns.length!=0&&this._refreshCaptionSummary())},_summaryRows_summaryColumns:function(n,i,r){(i=="displayColumn"||i=="dataMember")&&t.isNullOrUndefined(this.getColumnByField(r))||(this._createSummaryRows(this.getFooterTable()),this.element.find(".e-groupcaptionsummary").length!=0&&this._refreshCaptionSummary())},_stackedHeaderRows_stackedHeaderColumns:function(){this._refreshStackedHeader()},_sortSettings_sortedColumns:function(n,t,i){var u,f,r=this.model.sortSettings.sortedColumns[n["sortSettings.sortedColumns"]];t=="field"?(u=this.getColumnByField(i)!=null?i:null,f=r.direction=="ascending"||r.direction=="descending"?r.direction:null):t=="direction"&&(u=this.getColumnByField(r.field)!=null?r.field:null,f=i=="ascending"||i=="descending"?i:null);u!=null&&f!=null&&this.sortColumn(u,f)},_filterSettings_filteredColumns:function(n,i,r){var f,e,o,s,h,u=this.model.filterSettings.filteredColumns[n["filterSettings.filteredColumns"]];switch(i){case"field":f=this.getColumnByField(r)!=null?r:null;e=this._map(t.FilterOperators,u.operator);h=u.value;s=u.predicate=="and"||u.predicate=="or"?u.predicate:null;o=u.matchcase;break;case"matchcase":f=this.getColumnByField(u.field)!=null?u.field:null;e=this._map(t.FilterOperators,u.operator);h=u.value;s=u.predicate=="and"||u.predicate=="or"?u.predicate:null;o=r.toLowerCase()=="true"||r.toLowerCase()=="false"?t.parseJSON(r):!1;break;case"operator":f=this.getColumnByField(u.field)!=null?u.field:null;e=this._map(t.FilterOperators,r);h=u.value;s=u.predicate=="and"||u.predicate=="or"?u.predicate:null;o=u.matchcase;break;case"predicate":f=this.getColumnByField(u.field)!=null?u.field:null;e=this._map(t.FilterOperators,u.operator);h=u.value;s=r=="and"||r=="or"?r:null;o=u.matchcase;break;case"value":f=this.getColumnByField(u.field)!=null?u.field:null;e=this._map(t.FilterOperators,u.operator);h=r;s=u.predicate=="and"||u.predicate=="or"?u.predicate:null;o=u.matchcase}f!=null&&e!=null&&h!=null&&s!=null&&o!=null&&this.filterColumn(f,e,h,s,o)},_map:function(t,i){var r=n.map(t,function(n){if(n===i)return n});return r.length!=0?r[0]:null},_refreshCaptionSummary:function(){var t=document.createElement("div");t.innerHTML=["<table>",n.render[this._id+"_GroupingTemplate"](this.model.currentViewData,{groupedColumns:this.model.groupSettings.groupedColumns}),"<\/table>"].join("");this.getContentTable().get(0).replaceChild(t.firstChild.firstChild,this.getContentTable().get(0).lastChild);this.refreshContent()},getContentTable:function(){return this._gridContentTable},setGridContentTable:function(n){this._gridContentTable=n},getContent:function(){return this._gridContent},setGridContent:function(n){this._gridContent=n},getHeaderContent:function(){return this._gridHeaderContent},setGridHeaderContent:function(n){this._gridHeaderContent=n},getHeaderTable:function(){return this._gridHeaderTable},setGridHeaderTable:function(n){this._gridHeaderTable=n},getRows:function(){return this._gridRows},getFilteredRecords:function(){return this._filteredRecords},getRowByIndex:function(i,r){var e;try{var f=this.getRows(),o=this._excludeDetailRows(),u=n();if(n.isArray(i)){for(e=0;e<i.length;e++)this.model.scrollSettings.frozenColumns>0?(u.push(f[0][i[e]]),u.push(f[1][i[e]])):u.push(f[i[e]]);return u}return t.isNullOrUndefined(r)?this.model.scrollSettings.frozenColumns>0?(u.push(f[0][i]),u.push(f[1][i]),u):n(o.not(".e-virtualrow")[i]):this.model.scrollSettings.frozenColumns>0?(u.push(n(f[0]).slice(i,r)),u.push(n(f[1]).slice(i,r)),u):n(o.not(".e-virtualrow").slice(i,r))}catch(s){return n()}},getColumnIndexByField:function(n){for(var t=0,i=this.model.columns,r=i.length;t<r;t++)if(i[t].field===n)return t;return-1},getColumnIndexByHeaderText:function(n,i){for(var r=0;r<this.model.columns.length;r++)if(this.model.columns[r].headerText==n)if(i){if(t.isNullOrUndefined(this.model.columns[r].field)||this.model.columns[r].field=="")break}else break;return r},getIndexByRow:function(t){var r=this.getRows(),u=this._excludeDetailRows(),i;return this.model.scrollSettings.frozenColumns>0?(i=n(r[0]).index(t),i==-1&&(i=n(r[1]).index(t)),i):u.not(".e-virtualrow").index(t)},getPrimaryKeyFieldNames:function(){if(this._primaryKeys.length!=0)return this._primaryKeys;for(var n=0,t=this.model.columns,i=t.length;n<i;n++)t[n].isPrimaryKey&&this._primaryKeys.push(t[n].field);return this._primaryKeys},getVisibleColumnNames:function(){return this._visibleColumns},getHiddenColumnNames:function(){return this._hiddenColumns},getColumnByField:function(n){for(var t=0;t<this.model.columns.length;t++)if(this.model.columns[t].field==n)break;return t==this.model.columns.length?null:this.model.columns[t]},getsortColumnByField:function(n){for(var t=0;t<this.model.sortSettings.sortedColumns.length;t++)if(this.model.sortSettings.sortedColumns[t].field==n)break;return t==this.model.sortSettings.sortedColumns.length?null:this.model.sortSettings.sortedColumns[t]},getColumnByHeaderText:function(n,i){for(var r=0;r<this.model.columns.length;r++)if(this.model.columns[r].headerText==n)if(i){if(t.isNullOrUndefined(this.model.columns[r].field)||this.model.columns[r].field=="")break}else break;return r==this.model.columns.length?null:this.model.columns[r]},getCurrentViewData:function(){return this._currentJsonData},getColumnFieldNames:function(){for(var t=[],n=0;n<this.model.columns.length;n++)this.model.columns[n].field&&t.push(this.model.columns[n].field);return t},getBrowserDetails:function(){var t=navigator.userAgent.match(/(firefox|chrome|opera|msie|safari)\s?\/?(\d+(.\d+)*)/i);return!!navigator.userAgent.match(/Trident\/7\./)||!!navigator.userAgent.match(/Edge/)?{browser:"msie",version:n.uaMatch(navigator.userAgent).version}:{browser:t[1].toLowerCase(),version:t[2]}},_initPrivateProperties:function(){this._groupContextIndex=-1;this._dynamicSelectedRowIndex=null;this._summaryContextIndex=-1;this._showInColumnchooserCol=[];this._currentVirtualRowIndex=0;this._isCheckboxChecked=!1;this._isCheckboxUnchecked=!1;this._click=0;this._gridPhoneMode=320;this._columntemplaterefresh=!1;this._tabKey=!1;this._gridHeaderTable=null;this._gridWidth=this.element.width();this._id=this.element.attr("id");this._gridRows=[];this._fltrBarcell=!1;this._unboundRow=null;this._gridContentTable=null;this._gridContent=null;this._remoteSummaryData=null;this._gridSort=null;this._gridHeaderContent=null;this._gridFooterContent=null;this._gridFooterTable=null;this._gridRecordsCount=this._dataSource()!==null?this.model.pageSettings.totalRecordsCount==null?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0;this._links=null;this._gridPager=null;this._cSortedColumn=null;this._cSortedDirection=null;this._$curSElementTarget=null;this._gridFilterBar=null;this._$curFieldName=null;this._$prevFieldName=null;this._editedData={};this._isEditChangesApplied=!1;this._mediaStatus=!1;this._$fDlgIsOpen=!1;this._$menuDlgIsOpen=!1;this._$colType=null;this._$colFormat=null;this._$prevColType=null;this._$prevSElementTarget=null;this._currentFilterColumn=null;this._filteredRecordsCount=null;this._filteredRecords=[];this._validatedColumns=[];this.filterColumnCollection=[];this._previousFilterCount=null;this._excelFilter=null;this._isExcelFilter=this.model.filterSettings.filterType=="excel";this._$fkColumn=!1;this._fkParentTblData=[];this._primaryKeys=[];this._identityKeys=[];this._primaryKeyValues=[];this._modifiedRecords=[];this._addedRecords=[];this._tdsOffsetWidth=[];this._deletedRecords=[];this._disabledToolItems=n();this._validationRules={};this._groupedColumns=[];this._LastColumnUnGroup=!1;this._scolumns=[];this._currentJsonData=[];this._groupingColumnIndex=0;this._dataManager=this._dataSource()instanceof t.DataManager?this._dataSource():this._dataSource()!=null?t.DataManager(this._dataSource()):null;this._dataManager!=null&&this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.pageSettings.totalRecordsCount!=null&&this._dataManager.dataSource.json!=null&&this._dataManager.dataSource.json.splice(this.model.pageSettings.totalRecordsCount);this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor;this._isLocalData=!0;this._disabledResizingColumns=[];this._disabledSortableColumns=[];this._disabledGroupableColumns=[];this._disabledFilterableColumns=[];this._disabledEditableColumns=[];this._hiddenColumns=[];this._visibleColumns=[];this._visibleColumnsField=[];this._hiddenColumnsField=[];this._ccVisibleColumns=[];this._ccHiddenColumns=[];this._sortedColumns=[];this.multiSortRequest=!1;this.multiSelectCtrlRequest=!1;this.multiSelectShiftRequest=!1;this._enableSelectMultiTouch=!1;this._enableSortMultiTouch=!1;this._templateRefresh=!1;this.initialRender=!1;this._selectDrag=!1;this._isAddNew=!1;this._fieldColumnNames={};this._headerColumnNames={};this._virtualLoadedRecords={};this._virtualLoadedRows={};this._virtualPageRecords={};this._virtaulSel=[];this._singleView=!1;this._dragIndex=null;this._dragUpInterval=null;this._dragDownInterval=null;this._queryCellView=[];this._currentPageViews=[];this._virtualLoadedPages=[];this._currentLoadedIndexes=[];this._prevLoadedIndexes=[];this._prevVirtualSort=[];this._prevVirtualFilter=[];this._prevVirtualIndex=0;this._currentVirtualIndex=1;this._virtualRowCount=0;this._virtualSelectedRecords={};this._selectionByGrid=!1;this._enableCheckSelect=!1;this.checkSelectedRowsIndexes=[];this._isMapSelection=!1;this._selectionMapColumn=null;this._selectAllCheck=!1;this.selectedRowsIndexes=[];this.OldfilterValue=null;this._isReorder=!1;this._searchString="";this._searchCount=null;this.columnsWidthCollection=[];this._Indicator=null;this._resizer=null;this._bulkEditCellDetails={cellValue:null,rowIndex:-1,columnIndex:-1,fieldName:null,_data:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null};this.batchChanges={added:[],deleted:[],changed:[]};this._bulkEditTemplate=n();this._confirmDialog=null;this._confirmedValue=!1;this._lastRow=!1;this._isVirtualRecordsLoaded=!1;this._scrollValue=0;this._currentTopFrozenRow=this.model.scrollSettings.frozenRows;this._rowHeightCollection=[];this._scrollObject=null;this._customPop=null;this.selectedRowCellIndexes=[];this._rowIndexesColl=[];this.selectedColumnIndexes=[];this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1;this.commonQuery=this.model.query.clone();t.gridFeatures.group&&(this._rowCol=this._captionSummary(),this._isCaptionSummary=(this._rowCol!=null&&this._rowCol.length)>0?!0:!1);this.phoneMode=this.model.isResponsive&&document.documentElement.clientWidth<360?!0:!1;this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection();this._mediaQuery=!1;this._columnChooserList=null;this._$headerCols=null;this._$contentCols=null;this._detailsOuterWidth=null;this._editForm=null;this._cloneQuery=null;this.localizedLabels=this._getLocalizedLabels();this._searchBar=null;this._relationalColumns=[];this._dropDownManager={};this._isUngrouping=!1;this._columnChooser=!1;this._showHideColumns=!1;this._vCurrentTrIndex=null;this._lastVirtualPage=null;this._currentVIndex=null;(!this.model.enablePersistence||t.isNullOrUndefined(this._isHeightResponsive))&&(this._isHeightResponsive=!1);this._resize=!1;this._initHeight=0;this._initDataProcessed=!1;this._menuColTypes=[];this._excelColTypes=[];this._previousTr=null},_init:function(){var i,n,u;this._trigger("load");!t.isNullOrUndefined(this.model.query)&&this.model.query instanceof t.Query||(this.model.query=t.Query());t.isNullOrUndefined(this.model.parentDetails)||(i=this.model.queryString,n=this.model.foreignKeyField,this.model.query=this.model.query.clone(),u=this.model.parentDetails.parentKeyFieldValue===r?"undefined":this.model.parentDetails.parentKeyFieldValue,this.model.query.where(t.isNullOrUndefined(n)?i:n,"equal",u,!0));this._initPrivateProperties();t.gridFeatures.common&&this._initScrolling();this.model.enableResponsiveRow&&this.element.addClass("e-responsive");this._checkForeignKeyBinding();this._checkDataBinding()},_initComplexColumn:function(n,i,r){var e=r||i,u,o,f;for(u in n)typeof n[u]!="object"||t.isNullOrUndefined(n[u])?(o=e.concat(".").concat(u),f=n[u],this.model.columns.push({field:o,type:f!=null?f.getDay?f.getHours()>0||f.getMinutes()>0||f.getSeconds()>0||f.getMilliseconds()>0?"datetime":"date":typeof f:null})):(e=e.concat(".").concat(u),this._initComplexColumn(n[u],u,e))},_initColumns:function(i){for(var e,o,u,f,s;i.items!=r;)i=i.items[0];if(this.model.columns.length==0&&i){for(e in i)i.hasOwnProperty(e)&&(typeof i[e]!="object"||i[e]instanceof Date||i[e]==null)?(o=i[e],this.model.columns.push({field:e,type:o!=null?o.getDay?o.getHours()>0||o.getMinutes()>0||o.getSeconds()>0||o.getMilliseconds()>0?"datetime":"date":typeof o:null})):typeof i[e]=="object"&&this._initComplexColumn(i[e],e);this.model.columns.length&&this._renderAfterColumnInitialize()}else for(u=0;u<this.model.columns.length;u++)this.model.columns[u].field=t.isNullOrUndefined(this.model.columns[u].field)?"":this.model.columns[u].field,t.isNullOrUndefined(this.model.columns[u].validationRules)||this._validatedColumns.push(this.model.columns[u].field),t.isNullOrUndefined(this.model.columns[u].type)?(f=t.isNullOrUndefined(this.model.columns[u].field)?null:t.getObject(this.model.columns[u].field,i),s=this.model.columns[u].dataSource,!!s&&this.model.columns[u].foreignKeyValue&&(this.model.columns[u].originalType=f!=null?f.getDay?f.getHours()>0||f.getMinutes()>0||f.getSeconds()>0||f.getMilliseconds()>0?"datetime":"date":typeof f:null,f=(s instanceof t.DataManager)?t.getObject("0."+this.model.columns[u].foreignKeyValue,this.model.columns[u].foreignKeyData):t.getObject("0."+this.model.columns[u].foreignKeyValue,s)),this.model.columns[u].type=f!=null?f.getDay?f.getHours()>0||f.getMinutes()>0||f.getSeconds()>0||f.getMilliseconds()>0?"datetime":"date":typeof f:null):this.model.columns[u].type=="date"&&this.model.columns[u].format==r&&this._isReorder!=!0&&this.initialRender&&!this._showHideColumns?n.extend(this.model.columns[u],{format:"{0:"+t.preferredCulture(this.model.locale).calendars.standard.patterns.d+"}"}):this.model.columns[u].type=="datetime"&&this.model.columns[u].format==r&&this._isReorder!=!0&&this.initialRender&&!this._showHideColumns&&n.extend(this.model.columns[u],{format:"{0:"+t.preferredCulture(this.model.locale).calendars.standard.patterns.d+" "+t.preferredCulture(this.model.locale).calendars.standard.patterns.t+"}"})},_initSelection:function(){for(var t=this.model.selectionSettings.selectionMode,n=0;n<t.length;n++)this["_allow"+t[n]+"Selection"]=!0},_checkDataBinding:function(){var o,i,f,u,e;if(!this.model.columns.length&&((this._dataSource()==null||!this._dataSource().length)&&!(this._dataSource()instanceof t.DataManager)||this._dataSource()instanceof t.DataManager&&this._dataManager.dataSource.url==r&&!this._dataSource().dataSource.json.length)){this._renderAlertDialog();this._alertDialog.find(".e-content").text(this.localizedLabels.EmptyDataSource);this._alertDialog.ejDialog("open");return}if(this._initialRenderings(),this.model.editSettings.allowDeleting&&this.model.selectionType=="multiple"&&(this.multiDeleteMode=!0),this.initialRender=!0,this.model.enableRTL&&this.element.addClass("e-rtl"),this.model.allowFiltering&&this._isExcelFilter&&this._renderExcelFilter(),this.model.cssClass!=null&&this.element.addClass(this.model.cssClass),this.model.allowGrouping&&this.element.append(this._renderGroupDropArea()),(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&(this.element.append(this._renderToolBar()),t.browserInfo().name=="msie"&&t.browserInfo().version<10&&n.inArray("search",this.model.toolbarSettings.toolbarItems)!=-1&&(o=this.element.find(".e-toolbar.e-toolbarspan .e-gridsearchbar"),t.ieClearRemover(o[0]))),i=this.model.columns,i&&i.length){if(f=this.model.query._expands,typeof i[0]=="string")for(u=0;u<i.length;u++)i[u]={field:i[u]};for(u=0;u<i.length;u++)i[u].field&&i[u].field.indexOf(".")!==-1&&this._getExpands(i[u].field,f);this.model.query.expand(f);this.commonQuery.expand(f);this._renderAfterColumnInitialize()}this.model.allowPaging&&(this.model.isResponsive&&(this.model.pageSettings.isResponsive=!0),this.element.append(this._renderGridPager()),this.model.pageSettings.isResponsive&&n(this.element.find(".e-pager")).ejPager("instance")._reSizeHandler());this.model.contextMenuSettings.enableContextMenu&&this.element.append(this._renderContext());n.isFunction(n.fn.ejWaitingPopup)&&(this.element.ejWaitingPopup({showOnInit:!1}),n("#"+this._id+"_WaitingPopup").addClass("e-gridwaitingpopup"));this.model.scrollSettings.allowVirtualScrolling&&(this._loadedJsonData=[],this._prevPage=1);this._dataSource()instanceof t.DataManager?(this.element.ejWaitingPopup("show"),this._dataSource().ready!=r?(e=this,this._dataSource().ready.done(function(n){e._initDataSource();e.model.dataSource=t.DataManager(n.result)})):(this.element.ejWaitingPopup("show"),this._initDataSource())):(this._ensureDataSource(),this._trigger("actionBegin"),this._setForeignKeyData(),this._relationalColumns.length==0&&this._initGridRender())},_renderColumnChooser:function(){var f=t.buildTag("button .e-ccButton",this.localizedLabels.Columns,{float:this.model.enableRTL?"left":"right"}).attr("type","button"),o,a,p,i,s,h,c,v,u,e,l,y;this.element.prepend(f);f.ejButton({prefixIcon:"e-icon e-down-arrow",imagePosition:"imageright",contentType:"textandimage",type:"button",click:n.proxy(this._ccClickHandler,this),width:90});o=f.outerHeight();f.css("margin-top",0-o);a=parseInt(this.element.css("margin-top"),10);this.element.css("margin-top",a+o);p=t.buildTag("div");i=t.buildTag("div .e-grid e-columnChooser","",{},{id:this._id+"ccDiv"});n("#"+this._id+"ccDiv").data("ejDialog")!=r&&(n("#"+this._id+"ccDiv").ejDialog("destroy"),n("#"+this._id+"ccDiv").remove());s=t.buildTag("div.e-searchbox e-fields").append(t.buildTag("input#"+this._id+"_ccSearchBox.e-ejinputtext e-filtertext",{},{},{type:"text"}));h=t.buildTag("span .e-searchfind e-icon");s.append(h);c=t.buildTag("div","",{height:"228px"},{id:this._id+"liScrollerDiv"});this._renderColumnChooserData(!1);c.append(this._columnChooserList);i.append(s);i.append(c);v=t.buildTag("div .e-columnChooserSplitter","",{"border-bottom":"0px"});i.append(v);this.model.enableRTL?(u=t.buildTag("div .e-ccBtndiv","",{float:"left","margin-top":"7px","margin-right":"-13px"}),e=t.buildTag("button .e-ccformbtn e-btncan e-flat",this.localizedLabels.Cancel,{"margin-right":"7px","margin-left":"9px"}),n(h).addClass("e-rtl")):(u=t.buildTag("div .e-ccBtndiv","",{float:"right","margin-top":"7px"}),e=t.buildTag("button .e-ccformbtn e-btncan e-flat",this.localizedLabels.Cancel,{"margin-right":"7px","margin-left":"6px"}));l=t.buildTag("button .e-ccformbtn e-btnsub e-flat",this.localizedLabels.Done);u.append(l);u.append(e);i.append(u);l.ejButton({click:n.proxy(this._addButtonCC,this),showRoundedCorner:!0,width:66});e.ejButton({click:n.proxy(this._cancelButtonHandler,this),showRoundedCorner:!0,width:66});i.insertBefore(this.element);i.ejDialog({width:"auto",beforeClose:n.proxy(this._columnChooserBeforeClose,this),showOnInit:!1,allowKeyboardNavigation:!1,enableResize:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260});t.browserInfo().name=="msie"&&t.browserInfo().version<10&&(y=n(".e-columnChooser").find("input#"+this._id+"_ccSearchBox")[0],t.ieClearRemover(y))},_renderColumnChooserData:function(i){var w=this.model.columns.length==this.getVisibleColumnNames().length,o,c,e,f,l,y,p;for(this._ccCheckBoxList=[],o=t.buildTag("div","",{"margin-left":"0px",width:"250px"}),c=0,e=-1;e<this.model.columns.length;e++)if(f=e==-1,f||this.model.columns[e].showInColumnChooser){var u=this.model.columns[e],s=f?this.localizedLabels.SelectAll:t.isNullOrUndefined(u.headerText)||u.headerText==""?u.field==""?null:u.field:u.headerText,b=u&&u.disableHtmlEncode?this._htmlEscape(s):s;if(!t.isNullOrUndefined(s)||f){var a=t.buildTag("div","",{},{"class":"e-columnChooserListDiv"}),h=f?this._id+"selectAll":this._id+s.replace(/\s|\.|[^a-zA-Z0-9]|&nbsp/g,"_"),v=o.find("#"+h).length;v&&c++;l=t.buildTag("input","",{},{id:v?h+c+"":h,value:s,type:"checkbox","ej-field":f?"":u.field,"ej-headertext":f?"":u.headerText,"class":f?"e-selectall":""});y=t.buildTag("label",b,{"font-size":"13px"},{"for":v?h+c+"":h});a.append(l);a.append(y);o.append(a);p=!f&&!t.isNullOrUndefined(u.visible)?u.visible:!0;l.ejCheckBox({checked:f?w:p,change:n.proxy(this._columnChooserCheckChange,this)});f||t.isNullOrUndefined(u.visible)||l[u.visible?"attr":"removeAttr"]("checked",!0)}}else this.model.columns[e].showInColumnChooser!=r&&this._showInColumnchooserCol.push(this.model.columns[e]);i?(this._columnChooserList.empty().append(o.children()),n("#"+this._id+"liScrollerDiv").is(":visible")&&n("#"+this._id+"liScrollerDiv").ejScroller("refresh")):this._columnChooserList=o;this._ccCheckBoxList=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall")},_checkFinder:function(){var t=n(this),i=t.closest(".e-columnChooserListDiv");if(t.hasClass("e-checkbox")&&!i.hasClass("e-hide")&&t.prop("checked"))return!0},_displayFinder:function(){return!n(this).closest(".e-columnChooserListDiv").hasClass("e-hide")},_columnChooserCheckChange:function(t){var e;if(!t.isInteraction){t.isChecked&&n("#"+this._id+"ccDiv").find("button.e-ccformbtn.e-btnsub").removeClass("e-disable");return}var i=t.isChecked,r=this._ccCheckBoxList.filter(this._displayFinder),u=this._ccCheckBoxList.filter(this._checkFinder),o=r.length,f=u.length;t.model.id==this._id+"selectAll"?i?r.not(":checked").ejCheckBox({checked:i}):u.ejCheckBox({checked:i}):(this._columnChooserList.find("input.e-selectall").ejCheckBox("model.checked",o==f),i=f!=0,this.element[i?"attr":"removeAttr"]("checked",!0));e=i?"removeClass":"addClass";n("#"+this._id+"ccDiv").find("button.e-ccformbtn.e-btnsub")[e]("e-disable")},_columnChooserBeforeClose:function(){n(".e-columnChoosertail").remove();n(".e-columnChoosertailAlt").remove();n("#"+this._id+"ccDiv").find("button.e-ccformbtn.e-btnsub").removeClass("e-disable");n("#"+this._id+"_ccSearchBox").val("");var t={};t.target={};t.target.value="";this._columnChooserSearch(t)},_columnChooserSearch:function(i){var u,f,c,r,o,l,v;i.type=="click"&&(i.target.value="",n("#"+this._id+"_ccSearchBox").val(""));u=i.target.value;f=n("#"+this._id+"_ccSearchBox").next("span");u!=""?(f.removeClass("e-searchfind"),f.addClass("e-cancel")):(f.removeClass("e-cancel"),f.addClass("e-searchfind"));n(".e-cancel").on("click",n.proxy(this._columnChooserSearch,this));var s=this.model.columns,e=[],h=[],a=[],p=this,w=function(t){var i=p.model.groupSettings;return!i.showGroupedColumn&&n.inArray(t,i.groupedColumns)>-1};for(u!=""&&(s=t.DataManager(this.model.columns).executeLocal(t.Query().where("headerText",t.FilterOperators.startsWith,u,!0)),a=t.DataManager(this.model.columns).executeLocal(t.Query().where("field",t.FilterOperators.startsWith,u,!0)),a.forEach(function(t){t.headerText==""&&n.inArray(t,s)==-1&&s.push(t)})),s.forEach(function(n){if(n.showInColumnChooser&&!w(n.field)){var i=t.isNullOrUndefined(n.headerText)||n.headerText==""?n.field==""?null:n.field:n.headerText;e.push(i)}}),t.isNullOrUndefined(n("#nomatches")[0])||n("#nomatches").remove(),c=this._columnChooserList.find(".e-columnChooserListDiv"),r=0;r<this.model.columns.length;r++)this.model.columns[r].showInColumnChooser&&!t.isNullOrUndefined(this.model.columns[r].headerText)&&(this.model.columns[r].headerText!=""?h.push(this.model.columns[r].headerText):this.model.columns[r].field!=""&&h.push(this.model.columns[r].field));for(o=0;o<h.length;o++)l=h[o],v=e.indexOf(l),t.isNullOrUndefined(l)||c.eq(o+1)[v==-1?"addClass":"removeClass"]("e-hide");e.length==0&&this._emptyColumnChooserData();var b=this._ccCheckBoxList.filter(this._displayFinder).length,y=this._ccCheckBoxList.filter(this._checkFinder).length,k=y==b;e.length&&c.eq(0).find("input.e-js").ejCheckBox({checked:k});c.eq(0)[e.length==0?"addClass":"removeClass"]("e-hide");n("#"+this._id+"ccDiv").find("button.e-ccformbtn.e-btnsub")[y?"removeClass":"addClass"]("e-disable");n("#"+this._id+"liScrollerDiv").ejScroller("refresh")},_addButtonCC:function(){var i,r,t,u;for(this._visibleColumns=[],this._hiddenColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._columnChooserClick=!0,i={},i.requestType="columnchooser",this._columnChooser=!0,r=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall"),t=0,u=r.length;t<u;t++){var o=n(r[t]),s=o.attr("ej-headertext"),f=o.attr("ej-field");this._id+"selectAll"!=o.attr("id")&&(this[r[t].checked?"_visibleColumns":"_hiddenColumns"].push(s),this[r[t].checked?"_visibleColumnsField":"_hiddenColumnsField"].push(f!=""?f:s))}for(t=0,u=this._showInColumnchooserCol.length;t<u;t++){var e=this._showInColumnchooserCol[t],h=e.headerText,f=e.field;this[e.visible?"_visibleColumns":"_hiddenColumns"].push(h);this[e.visible?"_visibleColumnsField":"_hiddenColumnsField"].push(f!=""?f:h)}var a=this._visibleColumns,v=this._hiddenColumns,c,l;c=n.merge(n.merge([],a),v);l=this._isDuplicate(c);this._trigger("actionBegin",i);l?(this.showColumns(this._visibleColumnsField),this.hideColumns(this._hiddenColumnsField)):(this.showColumns(this._visibleColumns),this.hideColumns(this._hiddenColumns));n("#"+this._id+"ccDiv").ejDialog("close");n(".e-columnChoosertail").remove();this.refreshScrollerEvent();i={requestType:"columnchooser",removedcolumns:[],addedcolumns:[],visiblecolumns:this.getVisibleColumnNames(),hiddencolumns:this.getHiddenColumnNames()};this._ccColumnUpdate(i.addedcolumns,this.getVisibleColumnNames(),this._ccVisibleColumns);this._ccColumnUpdate(i.removedcolumns,this.getHiddenColumnNames(),this._ccHiddenColumns);this._trigger("actionComplete",i);this._columnChooser=!1},_ccColumnUpdate:function(t,i,r){for(var u=0;u<i.length;u++)n.inArray(i[u],r)==-1&&t.push(i[u])},_isDuplicate:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],i[t]=i[t]>=1?i[t]+1:1;for(t in i)if(i[t]>1)return!0;return!1},_cancelButtonHandler:function(){n("#"+this._id+"ccDiv").ejDialog("close");n(".e-columnChoosertailAlt").remove();n(".e-columnChoosertail").remove()},_ccClickHandler:function(){var f=230,i,r=this.element.find(".e-ccButton"),u;if(i=r.offset().left+r.width(),u=n("#"+this._id+"ccDiv").data("ejDialog"),u&&u.isOpened())u.close(),n(".e-columnChoosertail").remove(),n(".e-columnChoosertailAlt").remove();else{n("#"+this._id+"ccDiv").ejDialog({width:"230px",height:"310px",position:{X:this.model.enableRTL?i-f+143:i-f,Y:r.offset().top+35}}).ejDialog("open");var e=parseInt(n("#"+this._id+"ccDiv_wrapper").css("z-index")),o=t.buildTag("div #"+this._id+"_ccTail .e-columnChoosertail","",{display:"block",position:"absolute",left:this.model.enableRTL?i-78:i-29,top:r.offset().top+15}),s=t.buildTag("div #"+this._id+"_ccTailAlt .e-columnChoosertailAlt","",{display:"block","z-index":e+2,position:"absolute",left:this.model.enableRTL?i-78:i-29,top:r.offset().top+16});o.insertBefore(n("#"+this._id+"ccDiv_wrapper"));s.insertBefore(n("#"+this._id+"ccDiv_wrapper"))}this._refreshColumnChooserList();this._ccVisibleColumns=this.getVisibleColumnNames();this._ccHiddenColumns=this.getHiddenColumnNames();n("#"+this._id+"liScrollerDiv").ejScroller({height:"228",width:"228",buttonSize:0});n("#"+this._id+"liScrollerDiv").ejScroller("refresh");t.isIOSWebView()||this.getBrowserDetails().browser!="chrome"||n(".e-columnChooser .e-hscrollbar").attr("style","height: 10px !important;");n(".e-ejinputtext").on("keyup",n.proxy(this._columnChooserSearch,this))},_refreshColumnChooserList:function(){for(var c,l,a,i=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall"),s=this._isDuplicate(n.merge(n.merge([],this._visibleColumns),this._hiddenColumns)),u=0,v=i.length;u<v;u++){var f=n(i[u]),e=f.attr("ej-headertext"),h=f.attr("ej-field"),o=r,y=i.filter('[ej-headertext="'+e+'"]').length;this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&n.inArray(n(i[u]).attr("ej-field"),this.model.groupSettings.groupedColumns)!=-1?(n(i[u]).parents(".e-columnChooserListDiv").addClass("e-hide"),i[u].checked=!1,this._columnChooserList.find(".e-columnChooserListDiv").eq(0).hasClass("e-hide")&&this.model.columns.length>this.model.groupSettings.groupedColumns.length&&this._columnChooserList.find(".e-columnChooserListDiv").eq(0).removeClass("e-hide")):(n(i[u]).parents(".e-columnChooserListDiv").removeClass("e-hide"),i[u].checked=!0);c=s?h==""?e:h:e;o=this[s?"_hiddenColumnsField":"_hiddenColumns"].indexOf(c)!=-1;f.prop("checked",!o);f.ejCheckBox("model.checked",!o)}l=i.filter(this._displayFinder).length==i.filter(this._checkFinder).length&&i.filter(this._displayFinder).length?!0:!1;this._columnChooserList.find("input:checkbox.e-selectall").ejCheckBox({checked:l});this.model.groupSettings.showGroupedColumn||(t.isNullOrUndefined(n("#nomatches")[0])||n("#nomatches").remove(),this.model.columns.length==this.model.groupSettings.groupedColumns.length&&(this._columnChooserList.find(".e-columnChooserListDiv").eq(0).addClass("e-hide"),this._emptyColumnChooserData()),a=i.filter(this._displayFinder).length>0?!0:!1,n("#"+this._id+"ccDiv").find("button.e-ccformbtn.e-btnsub").ejButton({enabled:a}))},_emptyColumnChooserData:function(){var i=t.buildTag("div#nomatches","",{"padding-left":"13px"}),r=n("#"+this._id+"ccDiv").find("#"+this._id+"liScrollerDiv"),u=t.buildTag("span",this.localizedLabels.NoResult);i.append(u);n(r).append(i)},_initDataSource:function(){var i,n;this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataSource().dataSource.offline||this._isRemoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor;this._dataSource().adaptor instanceof t.SqlDataSourceAdaptor&&(this._isLocalData=!1);this._ensureDataSource();this._trigger("actionBegin");i=this._dataSource().executeQuery(this.model.query);n=this;this._dataManager.dataSource.table!=null&&this._dataManager.dataSource.table.css("display","none");this.element.is(":visible")||this.element.ejWaitingPopup("hide");i.done(t.proxy(function(n){this._initDataProcessed||(this._initDataProcess(n),this._initDataProcessed=!0)},this));n=this;i.fail(function(i){if(!t.isNullOrUndefined(n.element)){n.element.ejWaitingPopup("hide");n.model.currentViewData=[];n._gridRecordsCount=0;n._renderGridContent().insertAfter(n.element.children(".e-gridheader"));var r={error:i.error};n._trigger("actionFailure",r)}})},_initDataProcess:function(i,r){var f,u,e;if(!t.isNullOrUndefined(this.element)){if(this._relationalColumns.length==0&&this.element.ejWaitingPopup("hide"),!this.model.columns.length&&!i.count){f=i.count%this.model.pageSettings.pageSize==0?i.count/this.model.pageSettings.pageSize:parseInt(i.count/this.model.pageSettings.pageSize,10)+1;this._currentPage()>f&&this._currentPage(f);this._renderAlertDialog();this._alertDialog.find(".e-content").text(this.localizedLabels.EmptyDataSource);this._alertDialog.ejDialog("open");this.element.ejWaitingPopup("hide");return}if(t.isNullOrUndefined(i.aggregates)||(this._remoteSummaryData=i.aggregates),this.model.scrollSettings.enableVirtualization||(this.model.currentViewData=i.result),this._$fkColumn&&this.model.filterSettings.filteredColumns.length>0&&this.model.filterSettings.filterType=="excel"&&(this._fkParentTblData=i.result),this._gridRecordsCount=this.model.enablePersistence||this.model.pageSettings.totalRecordsCount==null||this.model.filterSettings.filteredColumns.length!=0?i.count==0&&i.result.length?i.result.length:i.count:this.model.pageSettings.totalRecordsCount,this.model.filterSettings.filteredColumns.length>0&&(this._filteredRecordsCount=i.count),this.getPager()!=null&&(this.model.pageSettings.totalRecordsCount=this._gridRecordsCount),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization)if(this._refreshVirtualViewDetails(),this._isInitNextPage||this._remoteRefresh?(this._setInitialCurrentIndexRecords(i.result,this._currentPage()),this._isInitNextPage=this._remoteRefresh=!1):this._setVirtualLoadedRecords(i.result,this._currentPage()),this._isThumbScroll&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)&&this._checkPrevNextViews(this._currentPage()),this.initialRender)for(this.model.currentViewData=[],u=0;u<this._currentLoadedIndexes.length;u++)e=this._currentLoadedIndexes[u],n.merge(this.model.currentViewData,this._virtualLoadedRecords[e]||[]);else this.model.currentViewData=i.result;this._setForeignKeyData(r);this._relationalColumns.length==0&&this._initGridRender()}},_initialRenderings:function(){var r,i;if(this.model.groupSettings.groupedColumns.length){for(r=[],i=0;i<this.model.sortSettings.sortedColumns.length;i++)t.isNullOrUndefined(this.model.sortSettings.sortedColumns[i].direction)&&(this.model.sortSettings.sortedColumns[i].direction=t.sortOrder.Ascending),r.push(this.model.sortSettings.sortedColumns[i].field);if(this.model.allowGrouping)for(i=0;i<this.model.groupSettings.groupedColumns.length;i++)n.inArray(this.model.groupSettings.groupedColumns[i],r)==-1&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[i],direction:t.sortOrder.Ascending})}},_getExpands:function(n,t){var r=n.split("."),i="",u,f;for(r.splice(r.length-1,1),u=0;u<r.length;u++,i=""){for(f=0;f<u;f++)i+=r[f]+"/";i=i+r[u];t.indexOf(i)===-1&&t.push(i)}},_renderAfterColumnInitialize:function(){this.element.append(this._renderGridHeader());this.model.allowFiltering&&this.model.filterSettings.filterType=="filterbar"&&(this._renderFiltering(),this._renderFilterBarTemplate());this.model.gridLines!="both"&&this._showHeaderGridLines();this.model.allowPaging&&this.element.append(this.element.find(".e-pager").first())},_ensureDataSource:function(i){var f,k,ut,ft,d,l,a,s,v,e,c,et,ct,y,ot,lt,o,g,w,p,u,b,tt,at,vt,st,ht,it,h,yt,nt,pt,rt,wt;if(this._dataSource()==null&&!(this._dataSource()instanceof t.DataManager)){if(t.isNullOrUndefined(i)||i.requestType!="add")return;this.dataSource([])}if(this.model.query.requiresCount(),f=this.model.query,k=f.clone(),this._isLocalData&&(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&(!t.isNullOrUndefined(this._cModifiedData)||!t.isNullOrUndefined(this._cAddedRecord))){if(t.isNullOrUndefined(this._cAddedRecord)){for(c=0;c<this._primaryKeys.length;c++)f=f.where(this._primaryKeys[c],t.FilterOperators.equal,this._primaryKeyValues[c]);ut=this._dataManager.executeLocal(f);this._dataSource()instanceof t.DataManager?t.copyObject(this._dataSource().dataSource.json[n.inArray(ut.result[0],this._dataSource().dataSource.json)],this._cModifiedData):t.copyObject(this._dataSource()[n.inArray(ut.result[0],this._dataSource())],this._cModifiedData);this._cModifiedData=null}else ft=this._cAddedRecord,this._cAddedRecord=null,this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(ft):this._dataSource(r,!0).splice(0,0,ft);f.queries=k.queries;this.model.editSettings.showAddNewRow&&this.model.editSettings.editMode=="normal"||(this.model.isEdit=!1)}if(i&&this.model.editSettings.allowDeleting&&i.requestType=="delete"&&(this._excludeDetailRows().length==1||this.multiDeleteMode=="multiple"&&this.selectedRowsIndexes.length==this._excludeDetailRows().length)&&this.model.pageSettings.currentPage!=1&&this._currentPage(this.model.pageSettings.totalPages-1),i&&this.model.editSettings.allowDeleting&&i.requestType=="delete"&&!t.isNullOrUndefined(this._cDeleteData)&&this._isLocalData&&(this._dataSource()instanceof t.DataManager?(c=n.inArray(this._cDeleteData[0],this._dataSource().dataSource.json),this._dataSource().dataSource.json.splice(c,1)):(c=n.inArray(this._cDeleteData[0],this._dataSource()),this._dataSource(r,!0).splice(c,1))),this.model.scrollSettings.allowVirtualScrolling&&i&&(i.requestType=="save"||i.requestType=="cancel"||i.requestType=="delete")&&(this._virtualDataRefresh=!0,this._refreshVirtualViewData()),this.model.sortSettings.sortedColumns.length){for(d=[],l=this.model.sortSettings.sortedColumns,u=l.length-1;u>=0;u--)if(this.model.groupSettings.groupedColumns.indexOf(l[u].field)==-1){if(f.sortBy(l[u].field,l[u].direction),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&n.inArray(l[u],this._prevVirtualSort)==-1){for(o=0;o<this._prevVirtualSort.length;o++)l[u].field==this._prevVirtualSort[o].field&&this._prevVirtualSort.splice(o,1);this._needVPaging=this._currentVirtualIndex*this._virtualRowCount%this.model.pageSettings.pageSize<=this._virtualRowCount;this._prevVirtualSort.push(l[u]);this._virtualDataRefresh=!0;this._refreshVirtualViewData()}}else d.push({field:l[u].field,direction:l[u].direction});for(o=0;o<d.length;o++)f.sortBy(d[o].field,d[o].direction)}if(this.model.allowSearching&&this.model.searchSettings.key.length&&(a=this.model.searchSettings,a.fields=a.fields.length!=0?a.fields:this.getColumnFieldNames(),f.search(a.key,a.fields,a.operator||"contains",a.ignoreCase),this.initialRender||i.requestType!="searching"||this._currentPage(1)),this._isLocalData&&this.model.allowSearching&&(this._filteredRecords=this.model.searchSettings.key.length!=0?this._dataManager.executeLocal(f).result:[]),this.model.allowFiltering&&this.model.filterSettings.filteredColumns.length){for(v=this.model.filterSettings.filteredColumns[0],e=this.model.filterSettings.filteredColumns,u=0;u<e.length;u++)c=n.inArray(this.getColumnByField(e[u].field),this.filterColumnCollection),e[u].field!==""&&c==-1&&this.filterColumnCollection.push(this.getColumnByField(e[u].field));if(!(this._isExcelFilter||this._excelFilterRendered)||v instanceof t.Predicate)for(v instanceof t.Predicate?(s=v,this._excelFilterRendered&&(lt=t.distinct(e,"field",!1),this._excelFilter._predicates[0]=this._excelFilter._predicates[0]||{},this._excelFilter._predicates[0][lt[0]]=s)):s=t.Predicate(v.field,v.operator,v.value,!v.matchcase),u=1;u<e.length;u++)e[u]instanceof t.Predicate?s=s[e[u].predicate||"and"](e[u]):!this._isLocalData&&e.length>2&&u>1&&e[u].predicate=="or"?s.predicates.push(t.Predicate(e[u].field,e[u].operator,e[u].value,e[u].ignoreCase||!e[u].matchcase)):s=s[e[u].predicate||"and"](e[u].field,e[u].operator,e[u].value,!e[u].matchcase);else{this._excelFilter.getPredicate(e,null,!0);et=this._excelFilter._predicates[0];for(ct in et)y=et[ct],ot=y.from!=r,ot?f.skip(y.from=="top"?0:this._gridRecordsCount-y.take).take(y.take):s=s!=r?s.and(y):y}if(s&&f.where(s),this._isLocalData?(g=this._dataManager.executeLocal(f),this._filteredRecordsCount=ot?g.result.length:g.count,w=this._filteredRecordsCount%this.model.pageSettings.pageSize==0?this._filteredRecordsCount/this.model.pageSettings.pageSize:parseInt(this._filteredRecordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>w&&this._currentPage(w),this._filteredRecords=this._dataManager.executeLocal(f).result,this._$fkColumn&&this.model.filterSettings.filteredColumns.length>0&&this.model.filterSettings.filterType=="excel"&&(this._fkParentTblData=this._filteredRecords)):t.isNullOrUndefined(i)||i.requestType!=t.Grid.Actions.Filtering||this._currentPage(1),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization)for(u=0;u<e.length;u++){for(o=0;o<this._prevVirtualFilter.length;o++)e[u]==this._prevVirtualFilter[o]&&i.requestType==t.Grid.Actions.Filtering&&this._prevVirtualFilter.splice(o,1);n.inArray(e[u],this._prevVirtualFilter)==-1&&(this._prevVirtualFilter.push(e[u]),this._gridRecordsCount=this._filteredRecordsCount,this._refreshViewPageDetails(),this._refreshVirtualViewData(),this._refreshVirtualViewDetails())}}if(this._isLocalData&&this.model.allowFiltering&&this.model.filterSettings.filteredColumns.length==0&&(!t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount>0)&&(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshViewPageDetails(),this._refreshVirtualViewDetails(!0)),this._filteredRecordsCount=null,this._filteredRecords=[]),this.model.summaryRows.length&&this._setSummaryAggregate(f),this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&!this.model.scrollSettings.enableVirtualization){if(this._isLocalData&&(g=this._dataManager.executeLocal(f),this._recordsCount=g.count,w=this._recordsCount%this.model.pageSettings.pageSize==0?this._recordsCount/this.model.pageSettings.pageSize:parseInt(this._recordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>w&&this._currentPage(w)),this._currentPage()==0&&(this._prevPageNo==0||this._prevPageNo==null?this._currentPage(1):this._currentPage(this._prevPageNo)),!this._isLocalData&&!this.initialRender&&!t.isNullOrUndefined(i)&&i.requestType=="refresh"&&k.queries.length)for(u=0;u<k.queries.length;u++)k.queries[u].fn=="onWhere"&&this._currentPage(1);f.page(this._currentPage(),this.model.pageSettings.pageSize)}if(this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._needPaging=!0,this.initialRender&&this.model.currentIndex>1&&(this.model.currentIndex<=this._getVirtualTotalRecord()||!this._isLocalData)&&(this.model.scrollSettings.virtualScrollMode=="continuous"&&(this.model.currentIndex=1),this._currentVirtualIndex=Math.ceil(this.model.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._currentPage(Math.ceil(this.model.currentIndex/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),this._virtualDataRefresh&&(this._isThumbScroll=!0,this._refreshVirtualViewData(!0),this._gridRecordsCount=this._dataSource()!==null?this.model.pageSettings.totalRecordsCount==null?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._currentPage(Math.ceil(this._currentVirtualIndex*this._virtualRowCount/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),this.model.virtualLoading!=null&&(this._gridRecordsCount=this.model.pageSettings.totalRecordsCount),this.model.filterSettings.filteredColumns==0&&this._prevVirtualFilter.length&&(this._refreshVirtualViewData(),this._prevVirtualFilter=[]),this._isLocalData&&this.initialRender&&this._refreshVirtualViewDetails(),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&this.model.allowSearching&&!t.isNullOrUndefined(i)&&i.requestType=="searching"&&(this._refreshVirtualViewData(),this._refreshVirtualViewDetails()),this._getVirtualLoadedRecords(f)),this.model.allowGrouping){for(p=f.clone(),this.model.allowPaging&&this.model.groupSettings.groupedColumns.length&&(p.queries=p.queries.slice(0,p.queries.length-1)),u=0;u<this.model.groupSettings.groupedColumns.length;u++)b=this.model.groupSettings.groupedColumns[u],tt=this.getColumnByField(b),t.isNullOrUndefined(tt)||t.isNullOrUndefined(tt.enableGroupByFormat)||!tt.enableGroupByFormat?(f.group(b),p.group(b)):(f.group(b,t.proxy(this._formatGroupColumn,this)),p.group(b,t.proxy(this._formatGroupColumn,this)));this.model.groupSettings.groupedColumns.length&&this._setAggreatedCollection(p)}if(i!=r&&i.requestType=="add"&&this._isLocalData&&this.model.groupSettings.groupedColumns.length==0&&this.model.scrollSettings.frozenColumns==0&&this.model.scrollSettings.frozenRows==0&&((this._dataSource()instanceof t.DataManager)?this._dataSource().dataSource.json.unshift(i.data):this._dataSource().unshift(i.data)),t.isNullOrUndefined(i)||i.action!="add"||t.isNullOrUndefined(this.model.parentDetails)||(at=this.getColumnByField(this.model.parentDetails.parentKeyField),vt=n.inArray(at,this.model.columns),vt==-1&&(st={},st[this.model.parentDetails.parentKeyField]=this.model.parentDetails.parentKeyFieldValue,n.extend(!0,this.model.currentViewData[0],st))),this._cloneQuery=f.clone(),this._isLocalData&&(!this.model.scrollSettings.enableVirtualization||this._virtualDataRefresh)){if(ht=this._dataManager.dataSource.json,it=this._dataSource().dataSource,!t.isNullOrUndefined(it)&&this._dataSource()instanceof t.DataManager&&(this._dataManager.dataSource.json=ht!=it.json?it.json:ht),h=this._dataManager.executeLocal(f),!t.isNullOrUndefined(i)&&i.requestType=="beginedit")this.model.currentViewData=h.result;else if(this.model.scrollSettings.allowVirtualScrolling&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&(this._prevPageRendered=!0),this.model.scrollSettings.allowVirtualScrolling&&!this._prevPageRendered&&h.result.length!=this.model.pageSettings.pageSize&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage)yt=t.pvt.filterQueries(f.queries,"onPage"),f.queries.splice(n.inArray(yt[0],f.queries),1),f.page(this._currentPage()-1,this.model.pageSettings.pageSize),nt=this._dataManager.executeLocal(f),nt.result.splice(0,h.result.length),this._previousPageRecords=n.extend(!0,[],nt.result),this._previousPageLength=h.result.length,this._currentPageData=h.result,t.merge(nt.result,h.result),this.model.currentViewData=this._lastVirtualPage=nt.result,this._lastPageRendered=!0;else if(this._lastPageRendered&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&!this.model.scrollSettings.enableVirtualization){for(pt=this.model.pageSettings.pageSize-this._previousPageLength,rt=0;rt<pt;rt++)wt=this.getRows()[this.getRows().length-(this.model.pageSettings.pageSize-rt)],wt.remove();this._tempPageRendered=!0;this.model.currentViewData=h.result}else this.model.currentViewData=h.result;this._gridRecordsCount=h.count;this._remoteSummaryData=h.aggregates;this._searchCount=this._searchString.length?h.count:null;this.model.groupSettings.groupedColumns.length&&this._setAggregates()}},_formatGroupColumn:function(n,i){var f=this.getColumnByField(i),r,u;return r=f.format,u=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),r=u.exec(r)[2],t.format(n,r,this.model.locale)},_refreshViewPageDetails:function(){this._currentPage(1);this.model.currentIndex=0;this._currentVirtualIndex=1;this.getContent().ejScroller("model.scrollTop",0)},_refreshVirtualViewDetails:function(n){var i=this._dataSource();n&&(this._gridRecordsCount=i!==null?i instanceof t.DataManager?i.dataSource.json.length:i.length:this.model.pageSettings.totalRecordsCount);this._totalVirtualViews=Math.ceil(this._getVirtualTotalRecord()/this._virtualRowCount);this._maxViews=Math.ceil(this.model.pageSettings.pageSize/this._virtualRowCount);this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize);this.model.pageSettings.totalRecordsCount=this._gridRecordsCount;this._lastViewData=this._virtualRowCount-(this._totalVirtualViews*this._virtualRowCount-this._getVirtualTotalRecord())},_getVirtualLoadedRecords:function(t){var i=this._currentPage(),r,u,f;if(this._needPaging&&(this._isLastVirtualpage=r=this._isThumbScroll&&i==this.model.pageSettings.totalPages&&!this._virtualPageRecords[i],(this.initialRender||this._virtualDataRefresh)&&(r=!0),this.model.virtualLoading&&this._isLocalData&&(this.model.currentIndex!=0||i!=1)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._getVirtualOnLoadingData(i,!r):this._setVirtualPaging(t,i,!r),!this.initialRender&&this._isThumbScroll&&this._virtualPageRecords[i]&&!this._virtualDataRefresh&&this._checkPrevNextViews(i,t)),this._needPaging=!1,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.initialRender&&this._isLocalData)for(this.model.currentViewData=[],u=0;u<this._currentLoadedIndexes.length;u++)f=this._currentLoadedIndexes[u],this._virtualLoadedRecords[f]&&n.merge(this.model.currentViewData,this._virtualLoadedRecords[f])},_setVirtualPaging:function(i,r,u){var e=t.pvt.filterQueries(i.queries,"onPage"),f;e.length&&i.queries.splice(n.inArray(e[0],i.queries),1);(!u||this._needVPaging)&&this.model.currentIndex>this._virtualRowCount?this._initCurrentIndex(i,r):i.page(r,this.model.pageSettings.pageSize);this._needVPaging=!1;this._isLocalData&&!this._virtualPageRecords[r]&&(f=this._dataManager.executeLocal(i),this.initialRender||(this.model.currentViewData=f.result),this.model.searchSettings.key.length>0&&(this._gridRecordsCount=f.result.length,this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize)),f.result.length?(this._setVirtualLoadedRecords(f.result,r),n.inArray(r,this._virtualLoadedPages)==-1&&this._virtualLoadedPages.push(r)):this.initialRender||this.getContent().find(".e-virtualtop, .e-virtualbottom").remove())},_checkPrevNextViews:function(){var n=this._currentVirtualIndex,u=this._virtualLoadedRecords[n-1],f=this._virtualLoadedRecords[n+1],r=this._maxViews==3?1:2,t,i;n!=1&&n!=this._totalVirtualViews&&(u&&u.length==this._virtualRowCount?f&&f.length==this._virtualRowCount||this._totalVirtualViews==n-1||(i=n-r,this._currentVirtualIndex=this._virtualLoadedRecords[n]?i:i-1,t=this._scrollValue-r*this._virtualRowCount*this._vRowHeight):(i=n+r,this._currentVirtualIndex=this._virtualLoadedRecords[n]?i:i+1,t=this._scrollValue+r*this._virtualRowCount*this._vRowHeight),t&&(this._scrollValue=t,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.model.currentIndex=t==0?t:Math.floor(t/this._vRowHeight)))},_initCurrentIndex:function(i,r){var e=r*this.model.pageSettings.pageSize,c=this._currentVirtualIndex*this._virtualRowCount+this._virtualRowCount,l=this._currentVirtualIndex*this._virtualRowCount-this._virtualRowCount*2,v=c>e||l<e-this.model.pageSettings.pageSize,f,o,u,h,a,s;v||this._isLastVirtualpage?(c>e?(f=(r-1)*this.model.pageSettings.pageSize,o=this.model.pageSettings.pageSize*2,this._isInitNextPage=!0):(l<e-this.model.pageSettings.pageSize||this._isLastVirtualpage)&&(f=(r-2)*this.model.pageSettings.pageSize,o=this.model.pageSettings.pageSize*2,this._isInitNextPage=!1,this._remoteRefresh=!0),this.model.virtualLoading&&this._isLocalData?(u={},u.endIndex=f+o,u.endIndex=u.endIndex>this._getVirtualTotalRecord()?this._getVirtualTotalRecord():u.endIndex,u.startIndex=f,u.currentPage=this._currentPage(),u.result=null,this._trigger("virtualLoading",u),s=u.result,this._setInitialCurrentIndexRecords(s,r)):(h=t.pvt.filterQueries(i.queries,"onSkip"),h.length&&i.queries.splice(n.inArray(h[0],i.queries),1),i.skip(f).take(o),this._isLocalData&&(a=this._dataManager.executeLocal(i),s=this.model.currentViewData=a.result,this._isLastVirtualpage=!1,this._setInitialCurrentIndexRecords(s,r)))):(this._needVPaging=!1,this.model.virtualLoading&&this._isLocalData&&(this.model.currentIndex!=0||r!=1)?this._getVirtualOnLoadingData(r,!0):this._setVirtualPaging(i,r,!0))},_setInitialCurrentIndexRecords:function(n,t){for(i=0;i<2;i++){var r=i*this.model.pageSettings.pageSize,f=r+this.model.pageSettings.pageSize,e=n.slice(r,f),u;u=this._isInitNextPage||t==1&&this.model.pageSettings.totalPages==1?i==0?t:t+1:i==0?t-1:t;this._setVirtualLoadedRecords(e,u)}},_getVirtualOnLoadingData:function(n,t){var i,u;n>0&&(this.model.currentIndex>this._virtualRowCount&&(!t||this._needVPaging)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._initCurrentIndex(r,n):(i={},i.endIndex=n*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:n*this.model.pageSettings.pageSize,i.startIndex=n*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=this._currentPage(),i.result=null,this._trigger("virtualLoading",i),u=i.result,this._setVirtualLoadedRecords(u,n)))},_setVirtualLoadedRecords:function(t,i){var u=this._virtualRowCount,h=this.model.pageSettings.pageSize,v=h/u,o,y=Math.ceil(i*h/u),p=i==this.model.pageSettings.totalPages,l,e,f,s,r,w,c,a,b;for(this._virtualPageRecords[i]||(this._virtualPageRecords[i]=t),p&&(l=this._getVirtualTotalRecord()%h,y=(!this._virtualLoadedRecords[this._totalVirtualViews]||this._virtualLoadedRecords[this._totalVirtualViews].length!=this._lastViewData)&&l<this._lastViewData&&l!=0?this._totalVirtualViews+1:this._totalVirtualViews,this._getVirtualTotalRecord()<u&&(this._singleView=!0)),e=0;e<v;e++)r=Math.ceil((i-1)*v+(e+1)),(r<=this._totalVirtualViews||p)&&r<=y&&(this._virtualLoadedRecords[r-1]&&this._virtualLoadedRecords[r-1].length!=u?(w=this._virtualLoadedRecords[r-1].length+e*u,f=u-w+e*u,n.merge(this._virtualLoadedRecords[r-1],t.slice(0,f)),o=s=f+u,r<=this._totalVirtualViews&&(this._virtualLoadedRecords[r]=t.slice(f,o))):r==1||this._virtualLoadedRecords[r-1]?(f=o?o:e*u%h,o=s=f+u):(c=s=(r-1)*u%h,c!=0&&(this._virtualLoadedRecords[r-1]=t.slice(0,c)),f=c,s=o=c+u),!this._singleView&&this._virtualLoadedRecords[r]&&this._virtualLoadedRecords[r].length!=u?(a=t.slice(f,s),a.length+this._virtualLoadedRecords[r].length<=u&&(b=n.merge(a,this._virtualLoadedRecords[r]),this._virtualLoadedRecords[r]=b)):!this._virtualLoadedRecords[r]&&r<=this._totalVirtualViews&&(this._virtualLoadedRecords[r]=t.slice(f,s)));n.inArray(i,this._virtualLoadedPages)==-1&&this._virtualLoadedPages.push(i)},_setVirtualLoadedIndexes:function(n){var i,t;for(this._prevLoadedIndexes=this._currentLoadedIndexes,this._currentLoadedIndexes=[],i=n==this._totalVirtualViews?n:n+1,n!=1&&(n=n-1),t=n;t<=i;t++)this._currentLoadedIndexes.push(t)},_getVirtualTotalRecord:function(){return this.model.filterSettings.filteredColumns.length==0?this._searchCount==null?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount},_initGridRender:function(){var i,h,u,c,f,v,l,r;if(this.addInitTemplate(),this.model.scrollSettings.frozenColumns>0&&this.addFrozenTemplate(),this.model.allowGrouping&&this.addGroupingTemplate(),this.model.showSummary&&this.addSummaryTemplate(),(this.model.allowResizing||this.model.allowResizeToFit)&&(this._resizer=new t.gridFeatures.gridResize(this)),this.model.keySettings&&n.extend(this.model.keyConfigs,this.model.keySettings),this._initHeight=this.model.scrollSettings.height,this.model.scrollSettings.height=="100%"&&(this._isHeightResponsive=this.model._isHeightResponsive=!0),this.render(),this._setTextWrap(),this.model.columnLayout=="fixed"){var a=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),e=this.getHeaderContent().width()>a?"addClass":"removeClass",o=this.getHeaderTable(),s=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(o=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),s=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0));o[e]("e-tableLastCell");s[e]("e-tableLastCell")}if(this.model.allowGrouping&&t.gridFeatures.dragAndDrop&&this._headerCellgDragDrop(),this.model.allowReordering&&t.gridFeatures.dragAndDrop&&(this._headerCellreorderDragDrop(),this._initIndicators()),this._wireEvents(),this.model.allowGrouping&&!t.isNullOrUndefined(this.model.serverProperties))for(this.model._groupingCollapsed=this.model.serverProperties._groupingCollapsed,i=0;i<this.model._groupingCollapsed.length;i++)h=this.getContent().find(".e-recordplusexpand"),u=h.filter("td[data-ej-mappingname='"+this.model._groupingCollapsed[i].key+"'    ][data-ej-mappingvalue='"+this.model._groupingCollapsed[i].value+"']"),u.length>1&&!t.isNullOrUndefined(this.model._groupingCollapsed[i].parent)&&(c=this.model._groupingCollapsed[i].parent,u=u.filter(function(){return n(this).parents(".e-tabletd").parent("tr").prev("tr").find(".e-recordplusexpand[data-ej-mappingvalue="+c+"]").length})),this.expandCollapse(u);this.initialRender=!1;this.model.width&&!this.model.allowScrolling&&this.element.width(this.model.width);(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing();this.model.mergeHeaderCellInfo!=null&&(f={columnHeaders:this.getHeaderContent().find(".e-columnheader"),model:this.model},v=this,this._headerCellMerge(f),this._trigger("mergeHeaderCellInfo",f));this._trigger("dataBound",{});this._trigger("refresh");this.model.parentDetails&&(l=this.model.parentDetails.parentID,r=n("#"+l).data("ejGrid"),r.model.allowScrolling&&r._refreshScroller({requestType:"refresh"}));this.element.closest("tr").hasClass("e-detailrow")&&!this.model.parentDetails&&(r=this.element.closest("tr.e-detailrow").closest(".e-grid").data("ejGrid"),r.model.allowScrolling&&r.getScrollObject().refresh());this.model.allowFiltering&&this.model.filterSettings.filterType=="menu"&&this._renderFilterDialogs();this.model.enableResponsiveRow&&(this.model.allowSorting||this.model.allowFiltering)&&this._renderResponsiveFilter();this.model.allowScrolling&&(this._vRowHeight=Math.floor(this.getRowHeight()));this.model.allowGrouping&&this.model.showSummary&&this.model.currentViewData&&(this._refreshGroupSummary(),!t.isNullOrUndefined(this.model.currentViewData)&&this.model.currentViewData.length&&this._refreshGridFooterColGroup());this._isMapSelection&&this._mappingSelection();this.model.showColumnChooser&&this._renderColumnChooser();this._enableCheckSelect&&(this.model.currentViewData!=null&&this.model.currentViewData.length==0?this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").hide():this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").show())},calculatePageSizeByParentHeight:function(n){var i,r,u;if(this.model.allowPaging&&(this.model.allowTextWrap&&this.model.textWrapSettings.wrapMode=="header"||!this.model.allowTextWrap))if(typeof n=="string"&&n.indexOf("%")!=-1&&(n=parseInt(n)/100*this.element.height()),r=this._getNoncontentHeight()+this.getRowHeight(),parseInt(n)>r&&(u=parseInt(n)-this._getNoncontentHeight(),i=parseInt(u/this.getRowHeight())),t.isNullOrUndefined(i))throw"The parent height of grid must be more than 150";else return i},_setTextWrap:function(){if(this.model.allowTextWrap==!0){switch(this.model.textWrapSettings.wrapMode){case"content":this.element.find(".e-columnheader").removeClass("e-wrap");this.element.removeClass("e-wrap");this.getContent().addClass("e-wrap");break;case"header":this.element.removeClass("e-wrap");this.getContent().removeClass("e-wrap");this.element.find(".e-columnheader").addClass("e-wrap");break;default:this.getContent().removeClass("e-wrap");this.element.find(".e-columnheader").removeClass("e-wrap");this.element.addClass("e-wrap")}if(this.model.scrollSettings.frozenColumns>0&&this.model.textWrapSettings.wrapMode!="content"){var n=this.getHeaderContent().find(".e-frozenheaderdiv").find(".e-columnheader").last().find("th"),t=this.getHeaderContent().find(".e-movableheader").find(".e-columnheader").last().find("th");n.height()>t.height()?t.height(n.height()):n.height(t.height())}}else this.getContent().removeClass("e-wrap").find(".e-rowcell").removeClass("e-nwrap"),this.element.find(".e-columnheader").removeClass("e-wrap").find(".e-headercelldiv").removeClass("e-nwrap"),this.element.removeClass("e-wrap")},_getMetaColGroup:function(){for(var r,u=t.buildTag("colgroup"),i=0;i<this.model.columns.length;i++)r=n(document.createElement("col")),this.model.columns[i].visible===!1&&r.css("display","none"),this.model.rowTemplate==null||t.isNullOrUndefined(this.model.columns[i].cssClass)||r.addClass(this.model.columns[i].cssClass),this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&n.inArray(this.model.columns[i].field,this.model.groupSettings.groupedColumns)!=-1&&r.css("display","none"),u.append(r);return u},_alternateRow:function(){return this.getIndex()%2==0?"e-row":"e-alt_row"},addInitTemplate:function(){var k=!t.isNullOrUndefined(this.getHeaderTable())&&this.getHeaderTable().find(".e-headercelldiv:not(.e-emptyCell)"),v={},d=!0,y=document.createElement("tbody"),p=n(y),g,b,a,nt,i,f,ft,s,tt,rt,l,ut,e;if(this.model.rowTemplate==null){var w=document.createElement("tr"),o=n(w),u=this.model.columns,i;for(this._gridRecordsCount&&!this._virtualDataRefresh?(b=this.model.editSettings.showAddNewRow&&!this.initialRender?this.model.currentViewData[1]:this.model.currentViewData[0],t.isNullOrUndefined(b)||this._initColumns(b)):this._isLocalData&&(this._dataSource()!=null&&this._dataSource().length||this._dataManager&&this._dataManager.dataSource.json.length)&&this._initColumns(this._dataSource()[0]!=r?this._dataSource()[0]:this._dataManager.dataSource.json[0]),a={_gridFormatting:this.formatting,getComplexData:t.getObject},n.views.helpers(a),e={},e._foreignKey=this._foreignKeyBinding,n.views.helpers(e),(this.model.childGrid||this.model.detailsTemplate)&&(nt=t.buildTag("td.e-detailrowcollapse","<div class='e-icon e-gnextforward'><\/div>"),o.append(nt)),i=0;i<this.model.columns.length;i++){if(f=t.buildTag("td.e-rowcell"),t.isNullOrUndefined(u[i].tooltip)&&u[i].clipMode!=t.Grid.ClipMode.EllipsisWithTooltip||f.addClass("e-gridtooltip"),(u[i].clipMode==t.Grid.ClipMode.Ellipsis||u[i].clipMode==t.Grid.ClipMode.EllipsisWithTooltip)&&f.addClass("e-gridellipsis"),this.model.isResponsive&&f.attr("data-cell",this._decode(this.model.columns[i].headerText)),u[i].visible==!1?f.addClass("e-hide"):(d&&(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&f.addClass("e-detailrowvisible"),d=!1),f.hasClass("e-hide")||this.model.groupSettings.showGroupedColumn||f.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[i].field+"'}}e-hide{{/if}}{{/for}}"),t.isNullOrUndefined(u[i].templateID||u[i].template)){for(var h=(u[i].field||"").split("."),it=h.length-1,c="";it;)c+="(",it--;rt=u[i].type||u[i].editType;switch(rt){case"boolean":case"booleanedit":t.isNullOrUndefined(u[i].displayAsCheckbox)&&(u[i].displayAsCheckbox=!0);u[i].displayAsCheckbox?(l="",l=this.model.editSettings.editMode=="batch"&&(t.isNullOrUndefined(u[i].allowEditing)||u[i].allowEditing)?l:"disabled='disabled'",ut="{{if ~getComplexData('"+this.model.columns[i].field+"', #data)}} <input type ='checkbox' "+l+" checked='checked'><\/input>{{else}} <input type ='checkbox' "+l+"><\/input> {{/if}}",f.addClass("e-boolrowcell").html(ut)):f.html("{{if ~getComplexData('"+this.model.columns[i].field+"', #data)}}"+this.localizedLabels.True+"{{else}}"+this.localizedLabels.False+"{{/if}}");break;case"checkbox":this._enableCheckSelect=!0;this.model.selectionType="multiple";this.model.editSettings.allowDeleting&&(this.multiDeleteMode=!0);this.model.selectionSettings.enableToggle=!0;this._isMapSelection=!t.isNullOrUndefined(u[i].field)&&u[i].field!="";this._selectionMapColumn=u[i].field;u[i].textAlign="center";this._isMapSelection||(this.model.columns[i].allowGrouping=this.model.columns[i].allowFiltering=this.model.columns[i].allowSorting=!1);f.addClass("e-checkcell").html("<div class = 'e-checkcelldiv'>{{if #data['"+h.join("']['")+"']}} <input type ='checkbox' checked='checked'><\/input>{{else}} <input type ='checkbox'><\/input> {{/if}}<\/div>");this.model.columns[i].editType=t.Grid.EditingType.Boolean;this.model.scrollSettings.frozenColumns>0&&f.addClass("e-frozenunbound");this.model.enableAutoSaveOnSelectionChange=!1;break;default:u[i].disableHtmlEncode?f.html("{{html:"+c+"#data['"+h.join("'] || {})['")+"']}}"):f.html("{{:"+c+"#data['"+h.join("'] || {})['")+"']}}")}u[i].format==r||u[i].foreignKeyValue||f.html("{{:~_gridFormatting('"+u[i].format+"',"+c+"#data['"+h.join("'] || {})['")+"'],'"+this.model.locale+"')}}");u[i].foreignKeyValue&&u[i].dataSource&&f.html("{{:~_foreignKey("+i+","+c+"#data['"+h.join("'] || {})['")+"'],'"+this._id+"')}}");u[i].commands&&(e={},e["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,n.views.helpers(e),(t.isNullOrUndefined(u[i].field)||u[i].field=="")&&(this.model.columns[i].allowGrouping=this.model.columns[i].allowFiltering=this.model.columns[i].allowSorting=!1),t.isNullOrUndefined(u[i].headerText)||n("#"+this._id+u[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i+"_UnboundTemplate").remove(),g=this._createUnboundElement(u[i],i),t.isNullOrUndefined(u[i].headerText)||f.addClass("e-unboundcell").addClass("e-"+u[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i).html("{{:~_"+this._id+"UnboundTemplate('"+g.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&f.addClass("e-frozenunbound"),this._isUnboundColumn=!0)}else e={},s=u[i].headerText,e["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this,ft),n.views.helpers(e),t.isNullOrUndefined(s)||t.isNullOrUndefined(s.match(/[^0-9\s\w]/g))||(s=s.replace(/[^0-9\s\w]/g,"_")),n("#"+this._id+s+i+"_Template").remove(),tt=this._createTemplateElement(u[i]),(u[i].field==""||t.isNullOrUndefined(u[i].field))&&(this.model.columns[i].allowGrouping=this.model.columns[i].allowFiltering=this.model.columns[i].allowSorting=!1),u[i].template!=!1&&f.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+tt.id+"','"+i+"')}}");u[i].textAlign==r&&(u[i].textAlign="left");u[i].isPrimaryKey===!0&&(this._primaryKeys.push(n.trim(u[i].field)),this._primaryKeys=t.isNullOrUndefined(n.uniqueSort)?n.unique(this._primaryKeys.sort()):n.uniqueSort(this._primaryKeys.sort()));this.phoneMode&&this.model.enableResponsiveRow||u[i].textAlign==r||(f.css("text-align",u[i].textAlign),n(k[i]).css("text-align",u[i].textAlign));this.phoneMode||t.isNullOrUndefined(u[i].headerTextAlign)||n(k[i]).css("text-align",u[i].headerTextAlign);t.isNullOrUndefined(u[i].cssClass)||f.addClass(u[i].cssClass);this.model.allowTextWrap&&this.model.textWrapSettings.wrapMode!="header"&&u[i].allowTextWrap==!1&&f.addClass("e-nwrap");t.isNullOrUndefined(u[i].priority)||f.addClass("e-table-priority-"+u[i].priority);t.isNullOrUndefined(u[i].customAttributes)||f.attr(u[i].customAttributes);f.attr("data-role","gridcell");o.append(f);this.model.enableAltRow?(a["_"+this._id+"AlternateRow"]=this._alternateRow,n.views.helpers(a),o.addClass("{{:~_"+this._id+"AlternateRow()}}")):o.addClass("e-row");o.attr("data-role","row");this.model.scrollSettings.frozenColumns>0&&this.model.scrollSettings.frozenColumns==i+1&&(y.appendChild(w),v[this._id+"_JSONFrozenTemplate"]=p.html(),o.empty(),p.empty())}y.appendChild(w)}v[this._id+"_JSONTemplate"]=this.model.rowTemplate!=null?n(this.model.rowTemplate).html():p.html();n.templates(v)},render:function(){if(this.model.showSummary=this.model.summaryRows.length>0||this.model.showSummary,this._renderGridContent().insertAfter(this.element.children(".e-gridheader")),this.model.allowResizeToFit&&this.setWidthToColumns(),this.model.allowGrouping&&t.gridFeatures.dragAndDrop&&this._groupHeaderCelldrag(),this.model.showSummary&&this._currentJsonData.length){var n=this._renderGridFooter();t.isNullOrUndefined(n)||n.insertAfter(this.getContent());this._hideCaptionSummaryColumn()}this._initialEndRendering()},_createStackedRow:function(i,u){for(var p,et,ot,f,w,b,k,e,o,ht,v,y=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),a=[],g=[],nt=[],tt=[],s=0;s<this.model.columns.length;s++)if(p=this.model.columns[s],p.visible!=!1){if(this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&this.model.groupSettings.groupedColumns.length>0&&n.inArray(p.field,this.model.groupSettings.groupedColumns)!=-1)continue;var it="",rt="",ut="",ft="",c=i.stackedHeaderColumns;for(o=0;o<c.length;o++)et=n.isArray(c[o].column)?c[o].column:n.map(c[o].column.split(","),n.trim),ot="e-row"+n.inArray(i,this.model.stackedHeaderRows)+"-column"+o,n.inArray(p.field,et)!=-1&&(it=c[o].headerText,rt=c[o].cssClass,ut=c[o].textAlign,ft=c[o].tooltip?" e-gridtooltip "+ot:"");a.push(it);g.push(rt);nt.push(ut);tt.push(ft)}for(f=[],e=0;e<a.length;e++){for(w=1,b=e+1;b<a.length;b++)if(a[e]==a[b])w++;else break;f.push({sapnCount:w,headerText:a[e],cssClass:g[e],txtAlign:nt[e],tooltip:tt[e]});e+=w-1}if(y=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),k=this.model.scrollSettings.frozenColumns,this.model.allowScrolling&&k>0){var d=[],l=0,h=0,st=0;for(e=0;e<this.model.columns.length;e++)o=this.model.columns[e],e<k&&o.visible==!1&&st++;for(l=k-st;l>0;)ht=f[h].sapnCount,f[h].sapnCount<l?(d.push(f[h]),u?h++:f.splice(h,1)):f[h].sapnCount>l?(f[h].sapnCount=f[h].sapnCount-l,u&&d.push({sapnCount:l,headerText:f[h].headerText})):(d.push(f[h]),u||f.splice(h,1)),l-=ht;u&&(f=d)}for((this.model.detailsTemplate||this.model.childGrid)&&y.append(t.buildTag("th.e-headercell e-detailheadercell","<div><\/div>")),s=0;s<f.length;s++)v=t.buildTag("th.e-headercell e-stackedHeaderCell e-default"+f[s].tooltip,f[s].headerText,{},{colspan:f[s].sapnCount}),v.css("textAlign",f[s].txtAlign),y.append(v),f[s].cssClass!=r&&v.addClass(f[s].cssClass),(this.model.allowResizing||this.model.allowReordering||this.model.allowResizeToFit)&&v.addClass("e-resizer");return y},_renderGridHeaderInternalDesign:function(i,u){var k=t.buildTag("table.e-table","",{},{"data-role":"grid"}),v=t.buildTag("thead"),d=t.buildTag("tbody.e-hide"),y=t.buildTag("tr.e-columnheader"),p=n(document.createElement("colgroup")),w=n(document.createElement("tr")),g,f,c,a,l,s,h,b;if((this.model.childGrid||this.model.detailsTemplate)&&(y.append(t.buildTag("th.e-headercell e-detailheadercell","<div><\/div>")),w.append(document.createElement("td")),p.append(this._getIndentCol())),this.model.showStackedHeader)for(s=0;s<this.model.stackedHeaderRows.length;s++)g=this._createStackedRow(this.model.stackedHeaderRows[s],u),v.append(g);for(f=0;f<i.length;f++){var e=t.buildTag("th.e-headercell e-default","",{},{"data-role":"columnheader"}),nt=document.createElement("td"),o=t.buildTag("div.e-headercelldiv",i[f].headerText===r&&i[f].type!="checkbox"?i[f].headerText=i[f].field:i[f].headerText,{},{"data-ej-mappingname":i[f].field});if(i[f].disableHtmlEncode&&o.text(i[f].headerText),t.isNullOrUndefined(i[f].headerTooltip)||o.addClass("e-gridheadertooltip"),t.isNullOrUndefined(i[f].tooltip)||o.addClass("e-gridtooltip"),(i[f].clipMode==t.Grid.ClipMode.Ellipsis||i[f].clipMode==t.Grid.ClipMode.EllipsisWithTooltip)&&o.addClass("e-gridellipsis"),(this.model.allowResizing||this.model.allowReordering||this.model.allowResizeToFit)&&e.addClass("e-resizer"),e.append(o),this.model.allowFiltering&&(this.model.filterSettings.filterType=="menu"||this.model.filterSettings.filterType=="excel")&&(i[f].allowFiltering==r||i[f].allowFiltering===!0)&&(!t.isNullOrUndefined(i[f].field)||i[f].field=="")&&i[f].type!="checkbox"){if(c="e-filterset",!this.initialRender&&this.model.filterSettings.filteredColumns)for(a=0;a<this.model.filterSettings.filteredColumns.length;a++)this.model.filterSettings.filteredColumns[a].field==i[f].field&&(c="e-filterset e-filteredicon e-filternone");e.append(t.buildTag("div.e-filtericon e-icon "+c));this.model.allowGrouping&&this.model.groupSettings.showToggleButton&&n.inArray(i[f].field,this._disabledGroupableColumns)==-1&&!t.isNullOrUndefined(i[f].field)&&i[f].field!=""?(e.addClass("e-headercellgroupfilter"),e.find(".e-filtericon").addClass("e-groupfiltericon")):e.addClass("e-headercellfilter");t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"&&this.model.enableRTL&&n(o).css("padding","0 0 0 2em")}l=document.createElement("col");i[f].priority&&n(nt).addClass("e-table-priority-"+i[f].priority);w.append(nt);y.append(e);p.append(l);i[f].visible===!1?(e.addClass("e-hide")&&n(l).css("display","none"),n.inArray(i[f].headerText,this._hiddenColumns)==-1&&n.inArray(i[f].field,this._hiddenColumnsField)==-1&&(this._hiddenColumns.push(i[f].headerText)&&i[f].field!=(""||r)?this._hiddenColumnsField.push(i[f].field):this._hiddenColumnsField.push(i[f].headerText)),n.inArray(i[f].field,this._visibleColumnsField)!=-1&&this._visibleColumnsField.splice(n.inArray(i[f].field,this._visibleColumnsField),1)&&this._visibleColumns.splice(n.inArray(i[f].headerText,this._visibleColumns),1)):(this._visibleColumns.push(i[f].headerText)&&i[f].field!=(""||r)?this._visibleColumnsField.push(i[f].field):this._visibleColumnsField.push(i[f].headerText),i[f].visible=!0,n.inArray(i[f].field==""?i[f].headerText:i[f].field,this._hiddenColumnsField)!=-1&&this._hiddenColumnsField.splice(n.inArray(i[f].field==""?i[f].headerText:i[f].field,this._hiddenColumnsField),1)&&this._hiddenColumns.splice(n.inArray(i[f].headerText,this._hiddenColumns),1));this.model.showColumnChooser&&i[f].showInColumnChooser!==!1&&(i[f].showInColumnChooser=!0);this.model.allowResizing&&i[f].allowResizing!==!1&&(i[f].allowResizing=!0);t.isNullOrUndefined(i[f].headerTextAlign)?i[f].textAlign!=r?o.css("text-align",i[f].textAlign):this.model.enableRTL&&o.css("text-align",i[f].textAlign="right"):o.css("text-align",i[f].headerTextAlign);i[f].allowResizing===!1&&this._disabledResizingColumns.push(i[f].field);i[f].allowSorting===!1&&this._disabledSortableColumns.push(i[f].field);i[f].allowGrouping===!1&&this._disabledGroupableColumns.push(i[f].field);i[f].allowEditing===!1&&this._disabledEditableColumns.push(i[f].field);t.isNullOrUndefined(i[f].cssClass)||(e.addClass(i[f].cssClass),n(l).addClass(i[f].cssClass));this.model.allowTextWrap&&this.model.textWrapSettings.wrapMode!="content"&&i[f].allowTextWrap==!1&&o.addClass("e-nwrap");t.isNullOrUndefined(i[f].headerTemplateID)||(o.html(n(i[f].headerTemplateID).hide().html()).parent().addClass("e-headertemplate"),s=n.inArray(i[f].field,this._disabledGroupableColumns),s==-1&&t.isNullOrUndefined(i[f].field)&&this._disabledGroupableColumns.push(i[f].field));t.getObject("type",i[f])=="checkbox"&&t.isNullOrUndefined(i[f].headerText)&&(o.addClass("e-headercheckcelldiv"),o.html("<input type = 'checkbox' class = 'e-checkselectall'><\/input>"),t.isNullOrUndefined(i[f].field)||o.attr("data-ej-mappingname",i[f].field));this.model.allowGrouping&&this.model.groupSettings.showToggleButton&&n.inArray(i[f].field,this._disabledGroupableColumns)==-1&&!t.isNullOrUndefined(i[f].field)&&i[f].field!=""&&(n.inArray(i[f].field,this.model.groupSettings.groupedColumns)!=-1?e.append(this._getToggleButton().addClass("e-toggleungroup")):e.append(this._getToggleButton().addClass("e-togglegroup")),c||e.addClass("e-headercellgroup"),this.model.enableRTL&&(c?o.addClass("e-headercelldivgroup"):e.find(".e-gridgroupbutton").addClass("e-rtltoggle")));e.attr("title",this._decode(i[f].headerText));i[f].priority&&(e.attr("data-priority",i[f].priority).addClass("e-table-priority-"+i[f].priority),n(l).addClass("e-table-priority-"+i[f].priority));this.initialRender&&(h=f,b=this.model.scrollSettings.frozenColumns,h=u?h:b>0?h+b:h,this._columnsPixelConvert(i[f],h));i[f].width==r&&this.model.commonWidth!==r&&(this.columnsWidthCollection[f+this.model.scrollSettings.frozenColumns]=this.model.commonWidth);this._fieldColumnNames[i[f].headerText]=i[f].field;this._headerColumnNames[i[f].field]=i[f].headerText}return v.append(y),d.append(w),k.append(p).append(v).append(d),k},_columnsPixelConvert:function(i,r){for(var e,o=this.model.scrollSettings.width>0?this.model.scrollSettings.width:this.element.width(),f=t.isNullOrUndefined(i)?this.model.columns:n.makeArray(i),u=0;u<f.length;u++)e=r||u,this.columnsWidthCollection[e]=typeof f[u].width=="string"&&f[u].width.indexOf("%")!=-1&&(this.model.allowScrolling||this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length)?parseInt(f[u].width)/100*o:f[u].width},_renderGridHeader:function(){var n=t.buildTag("div.e-gridheader"),r,u,i=t.buildTag("div");return this.model.allowScrolling&&i.addClass("e-headercontent"),this.setGridHeaderContent(n),this.initialRender&&(this.columnsWidthCollection=[],this._hiddenColumns=[],this._hiddenColumnsField=[]),this._visibleColumns=[],this._visibleColumnsField=[],this._resetDisabledCollections(),this._fieldColumnNames={},this._headerColumnNames={},this.model.scrollSettings.frozenColumns>0?(r=t.buildTag("div.e-frozenheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(0,this.model.scrollSettings.frozenColumns),!0)),u=t.buildTag("div.e-movableheader",t.buildTag("div.e-movableheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(this.model.scrollSettings.frozenColumns),!1))),i.append(r).append(u)):i.append(this._renderGridHeaderInternalDesign(this.model.columns)),n.html(i),this.model.isResponsive&&n.addClass("e-textover"),this.setGridHeaderTable(this.getHeaderContent().find(".e-table")),n},_renderGridContent:function(){var o=t.buildTag("div.e-gridcontent"),h=t.buildTag("div"),e=t.buildTag("table.e-table",""),c=n(document.createElement("tbody")),r,u,l,f,s,i,a;if(e.append(this.getHeaderTable().find("colgroup").clone()).append(c),h.html(e),o.html(h),this.setGridContentTable(e),this.setGridContent(o),e.attr("data-role","grid"),r={},this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length){if(this.initialRender&&(r.columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],!this.model.groupSettings.showGroupedColumn))for(i=0;i<this.model.groupSettings.groupedColumns.length;i++)u=this.model.groupSettings.groupedColumns[i],n.inArray(u,this._hiddenColumnsField)==-1&&(this._hiddenColumnsField.push(u),this._hiddenColumns.push(this.getColumnByField(u).headerText),this._visibleColumns.splice(this._visibleColumns.indexOf(this.getColumnByField(u).headerText),1),this._visibleColumnsField.splice(this._visibleColumnsField.indexOf(u),1),this.getColumnByField(u).visible=!1);r.requestType=t.Grid.Actions.Grouping}else r.requestType=t.Grid.Actions.Refresh;if(this._dataSource()==null||this._dataSource().length==0||this.model.currentViewData.length==0?(l=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length-this._hiddenColumns.length}),c.append(n(document.createElement("tr")).append(l)),this.setWidthToColumns(),(this.initialRender||this.model.groupSettings.groupedColumns.length)&&this.sendDataRenderingRequest(r)):this.sendDataRenderingRequest(r),this._isCaptionSummary&&r.requestType=="grouping"&&this.model.groupSettings.groupedColumns.length>1)for(f=this.getContentTable().find(".e-table").not(".e-recordtable").children("colgroup"),s=n(this.getContentTable().find(".e-recordtable")[0]).children("colgroup").find("col"),i=0;i<f.length;i++)a=n(f[i]).find("col").length,n(f[i]).find("col:gt("+(a-s.length-1)+")").remove(),n(f[i]).append(s.clone());return o},print:function(){var r={};r.requestType="print";this._printselectrows=this.getContentTable().find('tr[aria-selected="true"]');this._trigger("actionBegin",r);var u=window.open("","print","height=452,width=1024,tabbar=no"),f=t.buildTag("div#"+this._id),i=n.extend(!0,{},this.model);i.toolbarSettings.showToolbar=i.allowPaging=i.allowScrolling=i.showColumnChooser=!1;i.editSettings={};i.query.queries=[];i._isPrinting=!0;this.model.allowPaging&&this.model.pageSettings.printMode=="currentpage"?(i.query.queries=[{fn:"onPage",e:{pageIndex:this._currentPage(),pageSize:this.model.pageSettings.pageSize}}],i.dataBound=function(){this._printProcess(u)}):i.dataBound=function(){this._printProcess(u)};f.ejGrid(i)},_printProcess:function(n){var i=this.element,r={requestType:"print",element:i,selectedRows:this._printselectrows};this.model.allowFiltering&&this.model.filterSettings.filterType=="filterbar"&&i.find(".e-filterbar").remove();i.show();this._trigger("beforePrint",r);t.print(i,n);this._trigger("actionComplete",r)},"export":function(i,r,u,f){var o=n.extend(!0,{},this.model),h=this,w={action:i,method:"post","data-ajax":"false"},e=t.buildTag("form","",null,w),s=[],l,b,c,a,v,y,p;if(u&&!t.isOnWebForms)l=n("div.e-grid"),f&&f.length>0&&(l=n.map(f,function(n){return document.getElementById(n)})),n.each(l,function(i,r){var u=n(r).data("ejGrid"),f,o,c,l;if(s.push({id:u._id,locale:u.model.locale}),!t.isNullOrUndefined(u)&&(f=n.extend(!0,{},u.model),f=h._getModifyExportModel(f),u.ignoreOnExport)){for(o=0;o<u.ignoreOnExport.length;o++)delete f[u.ignoreOnExport[o]];c={name:"GridModel",type:"hidden",value:u.stringify(f)};l=t.buildTag("input","",null,c);e.append(l)}}),n("body").append(e),e.submit();else{if(this._locale=this.model.locale,o=this._getModifyExportModel(o),b=this,this.ignoreOnExport)for(c=0;c<this.ignoreOnExport.length;c++)delete o[this.ignoreOnExport[c]];t.raiseWebFormsServerEvents?(a={model:o,originalEventType:r},v={model:this.stringify(o)},t.raiseWebFormsServerEvents(r,a,v),setTimeout(function(){t.isOnWebForms=!0},1e3)):(y={name:"GridModel",type:"hidden",value:this.stringify(o)},p=t.buildTag("input","",null,y),e.append(p),e.append(this),n("body").append(e),e.submit())}return setTimeout(function(){var i,r;if(s.length)for(i=0;i<s.length;i++)r=n("#"+s[i].id).data("ejGrid"),r.model.locale=s[i].locale;t.isNullOrUndefined(h._locale)||(h.model.locale=h._locale)},0),e.remove(),!0},_getModifyExportModel:function(i){var e={},l,u,o,f;n.extend(e,t.Grid.Locale["en-US"],t.Grid.Locale[i.locale]);var s=e.GroupCaptionFormat,h=s.indexOf("{{if"),a=s.indexOf(" {{else}}"),v=s.slice(h,a).replace("{{if count == 1 }}",""),c={EmptyRecord:e.EmptyRecord,GroupCaptionFormat:s.slice(0,h),GroupText:v,True:e.True,False:e.False};for(t.isNullOrUndefined(this.model)||(this.model.locale=i.locale.concat(JSON.stringify(c))),i.locale=i.locale.concat(JSON.stringify(c)),u=0;u<i.columns.length;u++)if(i.columns[u].editType!=r)switch(i.columns[u].editType){case"stringedit":case"edittemplate":i.columns[u].editType="string";break;case"numericedit":i.columns[u].editType="numeric";break;case"dropdownedit":i.columns[u].editType="dropdown";break;case"booleanedit":i.columns[u].editType="boolean"}for(u=0;u<i.columns.length;u++)t.isNullOrUndefined(i.columns[u].template)||i.columns[u].template.indexOf("#")!=-1&&(l=n.templates(i.columns[u].template).markup,i.columns[u].template=escape(n.trim(l)));for(t.isNullOrUndefined(i.detailsTemplate)||(i.detailsTemplate=escape(n.trim(n.templates(i.detailsTemplate).markup))),u=0;u<i.filterSettings.filteredColumns.length;u++)i.filterSettings.filteredColumns[u].operator=="equal"?i.filterSettings.filteredColumns[u].operator="equals":i.filterSettings.filteredColumns[u].operator=="notequal"&&(i.filterSettings.filteredColumns[u].operator="notequals");if(i.showStackedHeader)for(i.stackedHeaderRow=i.stackedHeaderRows,u=0;u<i.stackedHeaderRow.length;u++)for(i.stackedHeaderRow[u].stackedHeaderColumn=i.stackedHeaderRow[u].stackedHeaderColumns,o=i.stackedHeaderRow[u].stackedHeaderColumn,f=0;f<o.length;f++)i.stackedHeaderRow[u].stackedHeaderColumn[f].column=n.isArray(o[f].column)?o[f].column:o[f].column.split(",");return i},sendDataRenderingRequest:function(i){var v,ft,et,k,d,ot,st,ht,rt,f,l,e,a,g,ct,c,y,o,nt,lt,p,ut,at,tt,vt;if(this._templateRefresh&&(this.refreshTemplate(),this._templateRefresh=!1),this.setFormat(),this.model.scrollSettings.enableVirtualization||(this._previousColumnIndex=null,this._previousRowCellIndex=null,this._previousIndex=null),i.requestType=="add"||i.requestType=="grouping"||this.model.currentViewData!=null&&this.model.currentViewData.length)switch(i.requestType){case t.Grid.Actions.Refresh:case t.Grid.Actions.Paging:case t.Grid.Actions.Sorting:case t.Grid.Actions.Filtering:case t.Grid.Actions.Save:case t.Grid.Actions.Cancel:case t.Grid.Actions.Delete:case t.Grid.Actions.Search:case t.Grid.Actions.Reorder:case t.Grid.Actions.BatchSave:if(v=this.model.groupSettings.groupedColumns,this.model.allowGrouping&&i.requestType==t.Grid.Actions.Refresh&&v.length==0&&this.element.find(".e-grouptopleftcell").length>0&&(ft=this.element.children(".e-gridheader"),ft.find("div").first().empty().append(this._renderGridHeader().find("table"))),(this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate")&&n("#"+this._id+"_externalEdit").css("display","none"),this.model.allowGrouping||(v=[]),v.length==0){var u=document.createElement("div"),w,h=-1,it=!1;if(this.phoneMode||this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),(this.model.childGrid!=null||this.model.detailsTemplate!=null)&&this.getContentTable().find("colgroup").first().prepend(this._getIndentCol()),et=this._currentPage(),(this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"||this.model.editSettings.editMode=="normal")&&(i.requestType=="cancel"||i.requestType=="save")&&(this._editFormHeight=this.element.find(".gridform").closest("tr").height()),this.model.scrollSettings.frozenColumns>0)u.innerHTML=this._renderByFrozenDesign();else{i.data&&(w=document.createElement("div"),w.innerHTML=["<table><tbody>",n.render[this._id+"_JSONTemplate"](i.data),"<\/tbody><\/table>"].join(""),this._dataSource()instanceof t.DataManager&&i.requestType==t.Grid.Actions.Save&&(h=this._getDataIndex(this.model.currentViewData,i.data),it=this._dataSource().adaptor instanceof t.remoteSaveAdaptor));k=null;k=!this.model.scrollSettings.allowVirtualScrolling||this.model.scrollSettings.enableVirtualization||t.isNullOrUndefined(this._currentVIndex)||i.requestType!="save"&&i.requestType!="cancel"&&i.requestType!="delete"?this.model.currentViewData:t.isNullOrUndefined(this._lastVirtualPage)?t.isNullOrUndefined(this._virtualLoadedRecords[this._currentVIndex])?this._virtualLoadedRecords[this._currentVIndex+1]:this._virtualLoadedRecords[this._currentVIndex]:this._lastVirtualPage;this.model.rowTemplate!=null?i.action=="hideColumn"||i.action=="showColumn"?u=this.getContent().find("div:first")[0]:(d=this.model.rowTemplate,ot=!t.isNullOrUndefined(this.model.ngTemplateId)&&(d.startsWith("#")||d.startsWith(".")||typeof d=="object")?this.model.ngTemplateId+"gridrowtemplate":null,u.innerHTML=["<table><tbody>",this._renderEjTemplate(this.model.rowTemplate,k,null,null,ot),"<\/tbody><\/table>"].join("")):u.innerHTML=["<table><tbody>",n.render[this._id+"_JSONTemplate"](k),"<\/tbody><\/table>"].join("");var b=this.getContentTable().get(0),r=b.lastChild,yt=this.getContentTable().first().find("tbody").first(),s;if(i.requestType!="save"&&i.requestType!="cancel"||this.model.editSettings.editMode=="batch"||this.model.scrollSettings.allowVirtualScrolling)i.requestType!="delete"||this.model.scrollSettings.allowVirtualScrolling?this.getContentTable().get(0).replaceChild(this.model.rowTemplate!=null?u.firstChild.lastChild:u.firstChild.firstChild,this.getContentTable().get(0).lastChild):(this._isUnboundColumn&&(p=this.element.find(".e-editedrow"),f=this.getContentTable().find(".e-editedrow").get(0),e=p.length?u.firstChild.firstChild.firstChild:w.firstChild.firstChild.lastChild,p.length!=0&&(this.model.editSettings.editMode=="normal"||this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate")?n(f).replaceWith(n(e)):this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"?(f=p.prev("tr").get(0),p.remove()):f=p.get(0)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&this.getContentTable()[0].rows.length!=this.model.currentViewData.length&&(this.getContentTable().find("tr").length&&this._excludeDetailRows().length?this.multiDeleteMode?(ut=u.firstChild.firstChild.rows.length,at=n(u.firstChild.firstChild.rows).slice(ut-this.selectedRowsIndexes.length,ut),n(r).append(at)):r.appendChild(u.firstChild.firstChild.lastChild):n(r).prepend(u.firstChild.firstChild.rows)),(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&(tt=this.getContentTable().find(".e-detailrow:visible"),n.each(tt,function(n){tt.eq(n).closest("tr").prev().children(".e-detailrowexpand").length==0&&tt.eq(n).remove()})),this._gridRows=b.rows,this.model.enableAltRow&&this._refreshAltRow());else{if(s=this.model.editSettings.editMode.indexOf("inlineform")!=-1?t.isNullOrUndefined(i.selectedRow)?this._selectedRow():i.selectedRow:this.getContentTable().find(".e-"+i.action+"edrow").index(),st=this._currentTrIndex,s==-1&&(s=st),this.model.detailsTemplate!=null||this.model.childGrid!=null)for(ht=this.model.editSettings.editMode=="inlineform"?n(n(r.childNodes).not(".e-detailrow")[s]):n(r.childNodes[s]),rt=n(r.childNodes).not(".e-detailrow"),c=0;c<rt.length;c++)ht.is(rt[c])&&(s=c);if(this.model.editSettings.editMode=="normal"||this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"){if(i.action=="add"&&!this.getContentTable().find(".e-addedrow").length)break;f=this.getContentTable().find(".e-addedrow").get(0);l=this.getContentTable().find(".e-editedrow");e=l.length||i.requestType=="cancel"?u.firstChild.firstChild.firstChild:w.firstChild.firstChild.lastChild;l.length?(e=u.firstChild.firstChild.childNodes[s],this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"?(f=l.prev("tr").get(0),l.remove()):f=l.get(0),a=n(e),o=n(f),(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&o.next("tr.e-detailrow:visible").length&&(y=a.find(".e-detailrowcollapse"),y.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext")),i.requestType=="cancel"?(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").addClass("e-showaddrow"),o.replaceWith(a)):!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(this.model.detailsTemplate!=null&&o.next("tr.e-detailrow").length&&r.removeChild(o.next("tr.e-detailrow").get(0)),o.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&v.length==0&&r.appendChild(u.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&i.requestType=="save"&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(this.model.rowTemplate!=null?u.firstChild.lastChild:u.firstChild.firstChild,this.getContentTable().get(0).lastChild):t.isNullOrUndefined(this.model.currentViewData[s])||this._primaryKeys.length&&t.getObject(this._primaryKeys[0],this.model.currentViewData[s])!=t.getObject(this._primaryKeys[0],i.data)?n(r).replaceWith(n(u).find("tbody")):r.replaceChild(e,f),this.model.editSettings.showAddNewRow&&(this.model.editSettings.rowPosition=="top"?r.firstChild.remove():r.lastChild.remove())):(a=n(e),o=n(f),i.action=="add"&&i.requestType=="save"&&this.model.editSettings.showAddNewRow&&this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&(this.model.editSettings.rowPosition=="bottom"?r.lastChild.previousSibling.remove():r.lastChild.remove()),i.requestType=="cancel"||this._dataSource()instanceof t.DataManager||this._currentPage()!=1||i.requestType=="save"&&!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount==this._previousFilterCount?(t.isNullOrUndefined(f)||(o.remove(),this._dataSource()instanceof t.DataManager&&h!=-1?h==0?r.insertBefore(e,r.children[h]):a.insertAfter(r.children[h-1]):this._dataSource()instanceof t.DataManager&&!it||this._currentPage()==1||i.requestType!="save"||n(r).prepend(n(u.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&v.length==0&&(this._dataSource()instanceof t.DataManager&&h==-1&&!it&&i.requestType!="save"||i.requestType!="save"&&!(this._dataSource()instanceof t.DataManager))&&i.requestType=="cancel"&&!this.model.editSettings.showAddNewRow&&b.lastChild.appendChild(u.firstChild.firstChild.lastChild)),i.requestType!="cancel"||this._selectedRow()==-1||this._enableCheckSelect||this.clearSelection()):this.model.currentViewData.length==1?(n(r).empty(),r.appendChild(e)):this.model.sortSettings.sortedColumns.length&&i.requestType=="save"&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)&&this.element.find(".gridform").length>0?this.getContentTable().get(0).replaceChild(this.model.rowTemplate!=null?u.firstChild.lastChild:u.firstChild.firstChild,this.getContentTable().get(0).lastChild):this.model.editSettings.rowPosition=="bottom"&&this.element.find(".gridform").length>0?(yt.prepend(f),r.replaceChild(e,f)):t.isNullOrUndefined(f)||r.replaceChild(e,f))}else if(this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="dialogtemplate"||this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate")if(l=this.element.find(".e-editedrow"),i.requestType!="cancel"&&(l.length||t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount!=this._previousFilterCount))if(l.length){if(e=u.firstChild.firstChild.childNodes[s],f=this._excludeDetailRows(r.childNodes)[s],this.model.allowCellMerging!=null&&(o=n(f),n(f.childNodes).hasClass("e-merged")))for(g=o.children(".e-merged").index(),ct=f.children[g].colSpan,c=0;c<ct;c++)e.childNodes[g+c].className+=" e-merged e-hide",e.childNodes[g].colSpan=c+1;this.model.detailsTemplate!=null&&(f=n(r.childNodes).not(".e-detailrow").eq(s).get(0));(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&o.next("tr.e-detailrow:visible").length&&(y=n(e).find(".e-detailrowcollapse"),y.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"));!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(o=n(f),this.model.detailsTemplate!=null&&o.next("tr.e-detailrow").length&&r.removeChild(o.next("tr.e-detailrow").get(0)),o.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&r.appendChild(u.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&i.requestType=="save"&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(this.model.rowTemplate!=null?u.firstChild.lastChild:u.firstChild.firstChild,this.getContentTable().get(0).lastChild):t.isNullOrUndefined(this.model.currentViewData[s])||this._primaryKeys.length&&t.getObject(this._primaryKeys[0],this.model.currentViewData[s])!=t.getObject(this._primaryKeys[0],i.data)?n(r).replaceWith(n(u).find("tbody")):r.replaceChild(e,f)}else this.model.currentViewData.length==1&&this.getContentTable().find("td.e-rowcell").length==0?(e=u.firstChild.firstChild.firstChild,n(r).empty(),r.appendChild(e)):(nt=l.length||i.requestType=="cancel"?u.firstChild.firstChild.firstChild:w.firstChild.firstChild.lastChild,this._dataSource()instanceof t.DataManager?h!=-1&&(h==0?r.insertBefore(nt,r.children[h]):n(nt).insertAfter(r.children[h-1]),lt=this._isAddNew&&h?this.model.currentViewData.length-1:this.model.currentViewData.length+1,this.model.allowPaging&&(this.model.pageSettings.pageSize<lt||h==this.model.pageSettings.pageSize)&&r.removeChild(r.lastChild)):(this.model.sortSettings.sortedColumns.length&&i.requestType=="save"&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(this.model.rowTemplate!=null?u.firstChild.lastChild:u.firstChild.firstChild,this.getContentTable().get(0).lastChild):this._currentPage()==1?this.getContentTable().find("tbody").first().prepend(n(nt)):this.getContentTable().find("tbody").first().prepend(n(u.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&r.removeChild(r.lastChild)),this.model.detailsTemplate!=null&&n(b.lastChild.lastChild).children(".e-detailrowexpand").length&&r.removeChild(r.lastChild));else e=u.firstChild.firstChild.childNodes[s],f=r.childNodes[s],a=n(e),o=n(f),(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&o.next(".e-detailrow:visible").length&&(y=a.find(".e-detailrowcollapse"),y.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext")),o.replaceWith(a),(i.requestType!="cancel"||this._isAddNew)&&!this._enableCheckSelect&&this.clearSelection(),this.model.allowPaging&&this._refreshGridPager();this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():b.rows;this.model.enableAltRow&&this._refreshAltRow()}}this._currentJsonData=this.model.currentViewData;this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():this.getContentTable().get(0).rows;this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]);vt={};(i.requestType=="sorting"||i.requestType=="filtering"||i.requestType=="save"||i.requestType=="cancel"||i.requestType=="delete")&&this.model.scrollSettings.allowVirtualScrolling&&(i.requestType=="filtering"&&(this.getContent().first().ejScroller("refresh").ejScroller("isVScroll")?this.element.find(".gridheader").addClass("e-scrollcss"):this.element.find(".gridheader").removeClass("e-scrollcss"),vt=this._refreshVirtualPagerInfo()),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(et),i.requestType=="filtering"&&this.getContent().first().ejScroller("refresh"));i.requestType=="refresh"&&(this._singleView||this._getVirtualTotalRecord()<this._virtualRowCount)&&this._addLastRow();this.model.allowPaging&&(this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:this._searchCount==null?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:this._searchCount==null?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()}),this._refreshGridPager());this.model.scrollSettings.enableVirtualization||this._eventBindings();break}case t.Grid.Actions.Grouping:this._group(i);this._refreshStackedHeader();break;case t.Grid.Actions.BeginEdit:this._edit(i);break;case t.Grid.Actions.Add:this._add(i);break;case t.Grid.Actions.Ungrouping:this._ungroup(i);break;case t.Grid.Actions.VirtualScroll:this._isVirtualRecordsLoaded||(this.model.scrollSettings.enableVirtualization?this._replacingVirtualContent():this._replacingContent())}else i.requestType=="reorder"&&this.model.groupSettings.groupedColumns.length>0?this._group(i):((t.isNullOrUndefined(this.model.currentViewData)||this.model.currentViewData.length==0)&&!this.phoneMode&&(i.requestType=="refresh"&&this.model.scrollSettings.frozenColumns==0&&this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),(i.requestType=="filtering"||i.requestType=="cancel"||i.requestType=="refresh")&&this.model.scrollSettings.frozenColumns>0&&this._removeFrozenTemplate()),this._newungroup(i));(t.isNullOrUndefined(this.model.currentViewData)||this.model.currentViewData.length==0)&&(this._currentJsonData=[]);this._showGridLines();this._completeAction(i)},_removeFrozenTemplate:function(){this.getContent().find("div").eq(0).empty();var i=t.buildTag("table.e-table"),r=n(document.createElement("tbody"));i.append(this.getHeaderTable().find("colgroup").clone()).append(r);this.getContent().find("div").eq(0).html(i);this.setGridContentTable(i)},_showGridLines:function(){var n=this.model.gridLines;n!="both"&&this.getContent().addClass(n!="none"?"e-"+n+"lines":"e-hidelines")},_showHeaderGridLines:function(){var n=this.model.gridLines;n!="both"&&this.getHeaderContent().addClass(n!="none"?"e-"+n+"lines":"e-hidelines")},_newungroup:function(n){n.requestType=="ungrouping"?this._ungroup(n):this.getContentTable().find("tbody").empty().first().append(this._getEmptyTbody())},setFormat:function(){for(var f,r,u,i=[],n=0;n<this.model.columns.length;n++)this.model.columns[n].type=="date"&&i.push(this.model.columns[n]);if(i.length>0&&!t.isNullOrUndefined(this.model.currentViewData))for(n=0,f=this.model.currentViewData.length;n<f;n++)for(r=0;r<i.length;r++)u=t.getObject(i[r].field,this.model.currentViewData[n]),/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(u)&&t.createObject(i[r].field,new Date(u),this.model.currentViewData[n])},_completeAction:function(i){var c,r,e,s,p,l,w,a,o,b,v,y,u,f,h;if(this.model.editSettings.editMode.indexOf("dialog")!=-1&&(i.requestType=="save"||i.requestType=="cancel")&&n("#"+this._id+"_dialogEdit").data("ejDialog")&&n("#"+this._id+"_dialogEdit").ejDialog("close"),this.model.editSettings.showAddNewRow&&this.model.editSettings.editMode=="normal"||(this.model.isEdit=!1),this._confirmedValue=!1,t.Grid.Actions.Grouping==i.requestType&&t.isNullOrUndefined(i.columnName)||i.requestType=="refresh"&&this._LastColumnUnGroup){this._LastColumnUnGroup=!1;return}if(i.columnSortDirection!="ascending"&&i.columnSortDirection!="descending"||t.isNullOrUndefined(i.columnName)||(c=this.getColumnByField(i.columnName),this.model.allowSorting&&this.model.allowMultiSorting?this._scolumns.push(c.field):this._gridSort=c.field),i.requestType!="beginedit"&&i.requestType!="add"&&(!this.model.allowScrolling||!this.initialRender||this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this.setWidthToColumns(),(i.requestType=="save"||i.requestType=="cancel"||i.requestType=="delete")&&(this._isAddNew=!1,this.model.isResponsive&&this.model.minWidth&&(this._refreshScroller(i),this.windowonresize())),t.Grid.Actions.Add==i.requestType||i.requestType=="beginedit")for(r=0;r<this.model.columns.length;r++)e=this.element.find(".gridform").first().find(".e-field").eq(r),this.model.columns[r].allowEditing&&e.hasClass("e-disable")?(this._disabledEditableColumns.indexOf(this.model.columns[r].field)!=-1&&this._disabledEditableColumns.splice(this._disabledEditableColumns.indexOf(this.model.columns[r].field),1),e.prop("disabled",!1).removeClass("e-disable")):this.model.columns[r].allowEditing!==!1||e.hasClass("e-disable")||n.inArray(this.model.columns[r].field,this._primaryKeys)!=-1||n.inArray(this.model.columns[r].field,this._disabledEditableColumns)!=-1||(this._disabledEditableColumns.push(this.model.columns[r].field),e.addClass("e-disable").prop("disabled",!0));this.initialRender||!(t.Grid.Actions.UnGrouping==i.requestType||this.model.groupSettings.groupedColumns.length>0)||n("#"+this._id+"EditForm").length||this._recalculateIndentWidth();t.Grid.Actions.Paging==i.requestType||t.Grid.Actions.BatchSave==i.requestType?this._refreshGridPager():t.Grid.Actions.Sorting==i.requestType&&this.model.allowSorting||t.Grid.Actions.Refresh==i.requestType||t.Grid.Actions.Cancel==i.requestType?(t.gridFeatures.sort&&this.getHeaderTable()!==null&&this._sortCompleteAction(i),this.model.allowPaging&&(s=n.extend({},this.getPager().ejPager("option")),this._currentPage(s.currentPage),delete s.currentPage,p=this.model.pageSettings.template,n.extend(this.model.pageSettings,s),this.model.pageSettings.template=p,delete this.model.pageSettings.masterObject,this._refreshGridPager()),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i)):t.Grid.Actions.Delete==i.requestType||t.Grid.Actions.Save==i.requestType||t.Grid.Actions.Search==i.requestType?(this._editEventTrigger(i),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i),this.model.allowPaging&&this._refreshPagerTotalRecordsCount()):t.Grid.Actions.Filtering==i.requestType?this._filterCompleteAction():t.Grid.Actions.BeginEdit==i.requestType||t.Grid.Actions.Add==i.requestType?this._editCompleteAction(i):(t.Grid.Actions.Grouping==i.requestType||t.Grid.Actions.Ungrouping==i.requestType)&&this["_"+i.requestType+"CompleteAction"](i);(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this.refreshToolbar();!this.initialRender&&this.model.showSummary&&this.model.summaryRows.length>0&&(this.model.currentViewData.length?(this.element.children(".e-gridfooter").length||(l=this._renderGridFooter(),t.isNullOrUndefined(l)||l.insertAfter(this.getContent())),i.requestType=="beginedit"||i.requestType=="add"||(this._createSummaryRows(this.getFooterTable()),this._refreshGridFooterColGroup())):this.element.children(".e-gridfooter").remove());!this.initialRender&&t.gridFeatures.selection&&(this.getContent().find("td.e-selectionbackground").length||this._setCurrentRow(i.requestType),i.requestType=="cancel"&&this.model.selectedRowIndex!=-1&&n(this.getRowByIndex(this.model.selectedRowIndex)).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),i.requestType!="virtualscroll"&&this.clearColumnSelection()&&n(this.getHeaderTable().find("th.e-headercell")).removeClass("e-columnselection"));this.refreshBatchEditMode();this.model.scrollSettings.enableVirtualization&&this.model.showColumnChooser&&!this.initialRender&&i.requestType=="refresh"&&(this._virtualLoadedRows={});!this.initialRender&&(this.model.allowScrolling||this.model.isResponsive)&&(this._checkScrollActions(i.requestType)||(this.model.editSettings.editMode.indexOf("inline")!=-1||this.model.editSettings.editMode.indexOf("normal")!=-1)&&i.requestType=="beginedit")||this.model.scrollSettings.virtualScrollMode=="continuous"&&i.requestType=="virtualscroll"?this.model.isResponsive&&this.model.minWidth?(this._refreshScroller(i),this.windowonresize()):this._refreshScroller(i):!this.model.scrollSettings.frozenColumns&&this.model.allowScrolling&&this.element.width()!=0&&this.refreshScrollerEvent();this.initialRender||!this.model.parentDetails||this.model.allowScrolling||(w=this.model.parentDetails.parentID,a=n("#"+w).data("ejGrid"),a.model.allowScrolling&&a._refreshScroller("refresh"));this.model.scrollSettings.virtualScrollMode=="normal"&&i.requestType=="virtualscroll"&&this.getContent().find("div:first").scrollLeft(this.getScrollObject().scrollLeft());this._customPop!=null&&i.requestType!="sorting"&&this._customPop.hide();!this.model.allowScrolling||this.initialRender||this.model.scrollSettings.enableVirtualization||this.model.isResponsive&&this._isHeightResponsive||this.getContentTable().find("tr:last").find("td").addClass("e-lastrowcell");this.model.allowGrouping&&this.model.showSummary&&this._refreshGroupSummary();t.Grid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0&&this._groupingCompleteAction(i);t.Grid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length<1&&this._ungroupingCompleteAction(i);this.model.allowGrouping&&(o=this.element.children(".e-groupdroparea"),o.length>0&&o.removeClass("e-default").removeClass("e-active"),this.model.groupSettings.groupedColumns.length>0?o.addClass("e-active"):o.addClass("e-default"));this.model.textWrapSettings&&this._setTextWrap();i.requestType==t.Grid.Actions.Reorder&&this.model.showColumnChooser&&(b=n("#"+this._id+"ccDiv").data("ejDialog"),b.isOpened()&&n("#"+this._id+"_ccTail").first().remove(),v=0,t.isNullOrUndefined(this.element.find(".e-ccButton").outerHeight())||(v+=this.element.find(".e-ccButton").outerHeight()),this.element.find(".e-ccButton").first().remove(),n("#"+this._id+"ccDiv_wrapper").remove(),this.element.css("margin-top",parseInt(this.element.css("margin-top"),10)-v),this._renderColumnChooser());t.isNullOrUndefined(this._dynamicSelectedRowIndex)||(this.selectRows(this._dynamicSelectedRowIndex),this._dynamicSelectedRowIndex=null);this.initialRender&&i.requestType=="grouping"&&(i={requestType:"refresh"});(this._isUngrouping||this._columnChooser)&&i.requestType=="refresh"||(this._trigger("actionComplete",i),this._isUngrouping=!1,this._columnChooser=!1);(!this._isUngrouping&&!this.initialRender||this._showHideColumns||this._columntemplaterefresh)&&this._trigger("refresh");this.model.editSettings.showAddNewRow&&this.model.editSettings.editMode=="normal"&&(this.initialRender||this.getContentTable().find("tr.e-addedrow").length!=0||this.element.find(".e-gridcontent").find("tr").length==0||this._startAdd(),i.requestType=="searching"&&this.element.find(".e-gridtoolbar").find("li#"+this._id+"_search input").focus());(t.Grid.Actions.BeginEdit==i.requestType||t.Grid.Actions.Add==i.requestType)&&n.isFunction(n.validator)&&this.setValidation();this.initialRender||(this.model._groupingCollapsed=[]);this._updateDataSource&&this._gridRecordsCount&&(y=this.model.editSettings.showAddNewRow?this.model.currentViewData[1]:this.model.currentViewData[0],t.isNullOrUndefined(y)||(this._initColumns(y),this.model.allowFiltering&&this._renderFilterDialogs(),this._updateDataSource=!1));this.model.columnLayout!="fixed"||this.model.isEdit||this.setWidthToColumns();this.model.allowRowDragAndDrop&&this._rowsDragAndDrop();!this.initialRender&&this._enableCheckSelect&&(u=this.checkSelectedRowsIndexes[this._currentPage()-1],f=this.getHeaderTable().find(".e-headercheckcelldiv .e-checkselectall"),this._selectAllCheck||this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&[].concat.apply([],this.checkSelectedRowsIndexes).length>=this._gridRecordsCount||f.prop("checked",!1),!this._isMapSelection&&u&&u.length>this._gridRows.length&&!this.model.scrollSettings.enableVirtualization&&u.splice(this._gridRows.length,u.length-this._gridRows.length),this._isMapSelection?this._mappingSelection():i.requestType!="paging"&&i.requestType!="save"&&i.requestType!="cancel"&&i.requestType!="virtualscroll"?this.checkSelectedRowsIndexes=[]:u&&u.length&&!this.model.scrollSettings.enableVirtualization&&this.selectRows(u),this.model.currentViewData!=null&&this.model.currentViewData.length==0?this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").hide():this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").show(),this._selectAllCheck&&(h=f.prop("checked")^this.selectedRowsIndexes.length==this.model.currentViewData.length,this.model.groupSettings.groupedColumns.length&&(h=!h),f[0].checked=h?f[0].checked:!f[0].checked))},_getDataIndex:function(n,t){for(var i,u,f=0,r=0,e=n.length;r<e;r++){for(i=0,u=this._primaryKeys.length;i<u;i++)if(this._checkPrimaryValue(n[r][this._primaryKeys[i]],t[this._primaryKeys[i]],this._primaryKeys[i]))break;else{i==u-1&&(f=1);continue}if(f)return r}return-1},_checkPrimaryValue:function(n,i,r){var u=this.getColumnByField(r),f=t.isNullOrUndefined(u.foreignKeyField)?u.type:u.originalType;return f=="string"&&(n=n.trim()),n!=i?!0:!1},_eventBindings:function(){var a=this.model.scrollSettings.frozenColumns>0?this._gridRows[0].length:this._gridRows.length,e=0,h,c=this.model.pageSettings.pageSize,i,r,u,o,f,s,l;if(t.gridFeatures.common&&this._refreshUnboundTemplate(this.getContentTable()),this._gridRecordsCount!=0&&(this.model.queryCellInfo!=null||this.model.rowDataBound!=null||this.model.mergeCellInfo!=null||this.model.templateRefresh!=null))for(i=0;i<a;i++){if(r=null,e=i,this.model.scrollSettings.allowVirtualScrolling&&i<c)if(this.model.scrollSettings.enableVirtualization){if(r=n(this._gridRows).eq(i),u=parseInt(n(r).attr("name"),32),n.inArray(u,this._queryCellView)!=-1)continue;this._virtualLoadedRecords[u]&&(o=this._virtualLoadedRecords[u][i%this._virtualRowCount]);e=u*this._virtualRowCount+i%this._virtualRowCount}else{for(f=0;f<this._cloneQuery.queries.length;f++)h=this._cloneQuery.queries[f].fn=="onPage"&&this._cloneQuery.queries[f].e.pageIndex-1;s=c*h;s!=0&&(r=this.getContentTable().find("tr[name="+s+"]").eq(i),e=r.index())}else this.model.scrollSettings.enableVirtualization&&(r=n(this._gridRows).eq(i));if(r=r||this.getRowByIndex(e),r.hasClass("e-virtualrow")||t.isNullOrUndefined(this._currentJsonData[i]||o))break;l=this.model.scrollSettings.enableVirtualization?o:this._currentJsonData[i];this._rowEventTrigger(r,l)}},_rowEventTrigger:function(i,r){var u={row:i,data:r,rowData:r},s,e,f,o;if(this._trigger("rowDataBound",u),s=i.cells,e=n(i).find(".e-rowcell"),this.model.queryCellInfo!=null||this.model.mergeCellInfo!=null||this.model.templateRefresh!=null)for(f=0;f<e.length;f++)u={cell:e[f],data:r,rowData:r,text:e[f].innerHTML},o=this._getForeignKeyData(u.data),n(e[f]).hasClass("e-rowcell")&&(u.column=this.model.columns[f]),t.isNullOrUndefined(o)||(u.foreignKeyData=o),this.model.allowCellMerging==!0&&(this._cellMerging(u),this._trigger("mergeCellInfo",u)),this._trigger("queryCellInfo",u),n(e[f]).hasClass("e-templatecell")&&(u={cell:e[f],column:this.model.columns[f],data:r,rowData:r,rowIndex:n(i).index()},this._trigger("templateRefresh",u))},setWidthToColumns:function(){var s=this.getContentTable().children("colgroup").find("col"),p=this.getHeaderTable().children("colgroup").find("col"),c=[],et,e=this.element.width(),l=0,a=0,u=0,nt=!t.isIOSWebView()&&this.getBrowserDetails(),ot,st,v,o,g,ht,b,rt,f,lt,at,vt,tt,it,ut,k,bt,h,i,ft;if(this.model.groupSettings.groupedColumns.length&&!this.model.allowScrolling&&this.model.groupSettings.showGroupedColumn&&nt&&nt.browser=="msie"&&parseInt(nt.version,10)>8&&s.first().css("width",3e3/e+"%"),t.isNullOrUndefined(this.model.detailsTemplate)||(ot=this.model.groupSettings.groupedColumns.length,st=this.model.groupSettings.groupedColumns.length!=0?1:0,s.eq(st).css("width",this._detailsOuterWidth),p.eq(ot).css("width",this._detailsOuterWidth)),this._detailColsRefresh(),s=this._$headerCols,p=this._$contentCols,this.model.allowResizeToFit)for(v=0,o=0,j=0;j<this.model.columns.length;j++)this.model.columns[j].visible&&(this.model.columns[j].width!=r?v=v+parseInt(this.model.columns[j].width):o=o+1);for(i=0;i<p.length;i++){if(this.model.allowResizeToFit&&this.model.columns[i].width===r){et=this.model.groupSettings.groupedColumns.length?i+this.model.groupSettings.groupedColumns.length:i;var w=this._resizer._getContentWidth(i),y=this.getHeaderTable().find(".e-headercelldiv").eq(et),d=this._resizer._getHeaderContentWidth(y);this.model.editSettings.editMode=="normal"&&(this.model.isEdit||this._isAddNew)?u=nt.browser=="firefox"?parseInt(s[i].style.width,10):s.eq(i).width():o>0&&(u=this.model.columns[i].visible?parseInt(this.element.width()-v)/o:0);u<w&&u<d&&o>0?(u=w>d?w:d,u+=parseInt(y.css("padding-left"),10)+parseInt(y.css("padding-right"),10),v+=u,o-=1,this.columnsWidthCollection[i]=u,a+=this.model.columns[i].visible?u:0):o>0&&(w>0||this._dataSource()==null||this._dataSource().length==0||this.model.currentViewData.length==0)&&(g=w>d?w:d,this._dataSource()==null||this._dataSource().length==0||this.model.currentViewData.length==0?g>u&&(u=g+(parseInt(y.css("padding-left"),10)+parseInt(y.css("padding-right"),10))):(g>u||this.element.width()/o<v-u&&!this.model.allowTextWrap)&&(u=g+(parseInt(y.css("padding-left"),10)+parseInt(y.css("padding-right"),10))),this.model.columns[i].visible&&(v+=u,o-=1),this.columnsWidthCollection[i]=u,a+=this.model.columns[i].visible?u:0)}else ht=typeof this.model.columns[i].width=="string"&&this.model.columns[i].width.indexOf("%")!=-1?parseInt(this.model.columns[i].width)/100*this.element.width():parseInt(this.model.columns[i].width,10),a+=this.model.columns[i].visible?ht:0;this.model.columns[i].priority&&p.eq(i).addClass("e-table-priority-"+this.model.columns[i].priority);t.isNullOrUndefined(this.columnsWidthCollection[i])?this.model.allowScrolling&&c.push(this.model.columns[i]):(s.eq(i).width(this.columnsWidthCollection[i]),p.eq(i).width(this.columnsWidthCollection[i]))}var ct=c.filter(function(n){return!n.visible}).length,kt=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell"),dt=t.sum(this.columnsWidthCollection);for(i=0;i<c.length;i++)c[i].visible&&(b=t.isNullOrUndefined(c[i].field)?this.getColumnIndexByField(c[i].field):this.getColumnIndexByHeaderText(c[i].headerText),rt=kt.eq(b)[0],t.isNullOrUndefined(this.model.commonWidth)?(lt=typeof this.model.scrollSettings.width=="string"?this.element.width():this.model.scrollSettings.width||this.model.width,at=(lt-dt)/(c.length-ct),f=this.model.scrollSettings.frozenColumns?at:rt.getBoundingClientRect().width):f=this.model.commonWidth,t.isNullOrUndefined(f)&&(f=rt.offsetWidth),parseInt(f)<15&&(f=(e/this.model.columns.length).toFixed(2),vt=(e/(this.model.scrollSettings.buttonSize||18)/100).toFixed(2),f=f-vt),s.eq(b).css("width",f+"px"),p.eq(b).css("width",f+"px"),this.model.columns[b].width=f,this.columnsWidthCollection[b]=parseFloat(f));if(ct||(this._undefinedColsCollection=null),this.model.columnLayout=="fixed"){this.model.scrollSettings&&this.model.scrollSettings.frozenColumns==0&&(this.getHeaderTable().width(a),this.getContentTable().width(a),t.isNullOrUndefined(this.getFooterTable())||this.getFooterTable().width(a));var gt=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),yt=this.getHeaderContent().width()>gt?"addClass":"removeClass",pt=this.getHeaderTable(),wt=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(pt=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),wt=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0));pt[yt]("e-tableLastCell");wt[yt]("e-tableLastCell")}if(!this.model.allowScrolling&&this.model.allowResizeToFit&&t.isNullOrUndefined(this.model._isPrinting)&&!this.model.isResponsive&&a>e&&(this.model.allowScrolling=!0,this.model.scrollSettings.width=e,this.getHeaderTable().parent().addClass("e-headercontent"),this._renderScroller(),!this.model.scrollSettings.frozenColumns>0&&this.getHeaderTable().width(e)),this.model.isEdit&&(k=s.clone(),this.model.editSettings.showAddNewRow&&(tt=this.getContentTable().find(".e-editedrow")),it=this.model.scrollSettings.frozenColumns>0?this.getContent().find(".gridform").find("colgroup"):!t.isNullOrUndefined(tt)&&tt.length==1?tt.find("colgroup"):n("#"+this._id+"EditForm").find("colgroup"),this.model.scrollSettings.frozenColumns>0&&it.first().empty().append(k.splice(0,this.model.scrollSettings.frozenColumns)),it.last().empty().append(k),(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&it.prepend(this._getIndentCol())),this.model.groupSettings.groupedColumns.length)for(ut=this.getContentTable().find(".e-recordtable").children("colgroup"),i=0;i<ut.length;i++)k=s.clone(),bt=this._detailsOuterWidth!=null?this._detailsOuterWidth:"30px",(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&k.splice(0,0,n(this._getIndentCol()).width(bt)[0]),ut.eq(i).empty().append(k);if(this.model.scrollSettings.frozenColumns>0){for(h=0,i=0;i<this.model.columns.length;i++)h+=this.model.columns[i].visible?parseInt(this.columnsWidthCollection[i],10):0,this.model.scrollSettings.frozenColumns-1==i&&(l=Math.ceil(h));this.element.width(this.model.scrollSettings.width||this.model.width);ft=this.element.find(".e-gridcontent").children().first().width();ft>h?h=ft+(this.getContentTable().height()<this.model.scrollSettings.height&&this.getScrollObject()._vScroll?this.model.scrollSettings.buttonSize:0):h+=this.getContentTable().height()>this.model.scrollSettings.height?this.model.scrollSettings.buttonSize:0;this.getContent().find(".e-frozencontentdiv").outerWidth(l).end().find(".e-movablecontentdiv").outerWidth(h-l);this.getHeaderContent().find(".e-frozenheaderdiv").outerWidth(l).end().find(".e-movableheaderdiv").outerWidth(h-l);this.getFooterContent()&&this.getFooterContent().find(".e-frozenfooterdiv").outerWidth(l).end().find(".e-movablefooterdiv").outerWidth(h-l)}!this.initialRender&&this.model.allowResizeToFit&&this.model.allowScrolling&&this.model.scrollSettings.enableVirtualization&&(e=this.getHeaderTable().width()>this.getContentTable().width()?this.getHeaderTable().width():this.getContentTable().width(),this.getContentTable().width(e),this.getHeaderTable().width(e),t.isNullOrUndefined(this.getFooterTable())||this.getFooterTable().width(e))},_initialEndRendering:function(){var r,i,u;if(this.model.allowRowDragAndDrop&&this._rowsDragAndDrop(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&(this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="dialogtemplate"?this.element.append(this._renderDialog()):(this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate")&&this.element.append(this._renderExternalForm())),(this.model.editSettings.editMode=="batch"||this.model.editSettings.showDeleteConfirmDialog)&&this._renderConfirmDialog(),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&n("#"+this._id+"AlertDialog").length==0&&this._renderAlertDialog(),(this.model.allowMultiSorting||this.model.selectionType=="multiple")&&this._renderMultiTouchDialog(),this.model.scrollSettings.frozenColumns>0&&!this.model.allowScrolling){this.getContent().remove();this.getHeaderTable().eq(1).remove();this._alertDialog.find(".e-content").text(this.localizedLabels.FrozenColumnsScrollAlert);this._alertDialog.ejDialog("open");return}if(this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this._createPagerStatusBar(),this._getRowHeights(),this.element.width()!=0&&this.model.allowScrolling)this._renderScroller(),this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0||(this.setWidthToColumns(),r=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),r!=null&&r.refresh(),this.refreshScrollerEvent(),this._scrollFooterColgroup(!0));else if((this.model.allowScrolling||this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length)&&this.element.width()<=0){i=this;u=setInterval(function(){if(!t.isNullOrUndefined(i.element)&&i.element.width()>0&&!t.isNullOrUndefined(i.element.width())){if(i.model.allowScrolling&&(i._renderScroller(),!(i.model.scrollSettings.frozenRows>0||i.model.scrollSettings.frozenColumns>0))){i.setWidthToColumns();var n=t.isNullOrUndefined(i.getContent().data("ejScroller"))?null:i.getScrollObject();n!=null&&n.refresh();i.refreshScrollerEvent()}i.model.allowGrouping&&i.model.groupSettings.groupedColumns.length&&i.getHeaderTable().find(".e-grouptopleftcell").width()<=0&&i.getHeaderTable().find(".e-grouptopleftcell").css("width",i.getHeaderTable().find("colgroup col").eq(0).width());i._endRendering();clearInterval(u)}},100);return}this._endRendering()},_scrollFooterColgroup:function(n){t.isNullOrUndefined(n)&&(this.getFooterTable().find("colgroup").length?this.getFooterTable().find("colgroup").first().replaceWith(this.getHeaderTable().find("colgroup").clone()):this.getFooterTable().append(this.getHeaderTable().find("colgroup").clone()),this.model.scrollSettings.frozenColumns>0&&!this.getFooterTable().find("colgroup").length&&(this.getFooterTable().eq(0).append(this.getHeaderTable().eq(0).find("colgroup").clone()),this.getFooterTable().eq(1).append(this.getHeaderTable().eq(1).find("colgroup").clone())));var i=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject();i&&i.isVScroll()&&!t.isNullOrUndefined(this.getFooterContent())&&(this.getFooterContent().find("colgroup").append("<col style='width : "+this.model.scrollSettings.scrollerSize+"px'><\/col>"),this.getFooterContent().find("tr.e-gridSummaryRows td.e-scrollindent").length||this.getFooterContent().find("tr.e-gridSummaryRows").append("<td class='e-scrollindent'><\/td>"))},_endRendering:function(){var n,r,u,i,f;t.isNullOrUndefined(this.model.serverProperties)||(n=this.model.serverProperties._checkSelectedRowsIndexes,this.checkSelectedRowsIndexes=n&&n.length?n:this.checkSelectedRowsIndexes);!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&this.model.allowScrolling&&(r=this.getScrollObject());u=this.model.enableRTL?"e-summaryscroll e-rtl":"e-summaryscroll";this.model.allowScrolling&&this.model.showSummary&&(r._vScroll&&this.element.find(".e-summaryrow.e-scroller").addClass(u),this.getFooterTable()&&this._scrollFooterColgroup());this._addMedia();this.model.allowScrolling&&this.model.allowTextWrap&&!this.model.scrollSettings.allowVirtualScrolling&&this.getContent().first().ejScroller("refresh");this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this._currentPage()!=1||this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=this._currentJsonData),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView():this._refreshVirtualContent(this._currentPage()),this.getContent().first().ejScroller("refresh"),this.getContent().ejScroller("isVScroll")?(this.element.find(".e-gridheader").addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width())):this.element.find(".e-gridheader").removeClass("e-scrollcss"));this.model.allowSelection==!0&&this.model.selectionType=="multiple"&&this._selectedMultipleRows().length>0&&this._selectingMultipleRows(this._selectedMultipleRows());(this._selectedRow()!=-1||this._selectedMultipleRows().length==1)&&(i=this._selectedMultipleRows(),f=i.length?i:this._selectedRow(),this.selectRows(f));!this.model.allowFiltering||this.model.filterSettings.filterType!="filterbar"||this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling||this._createPagerStatusBar();t.gridFeatures.common&&this.rowHeightRefresh();t.gridFeatures.filter&&["menu","excel"].indexOf(this.model.filterSettings.filterType)!=-1&&this._refreshFilterIcon();this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length!=0&&this._recalculateIndentWidth();this.initialRender&&(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow()},_addLastRow:function(){var r=this.getContentTable().find("tr:last").find("td"),u=0,i;if(this.model.allowScrolling&&!this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(this.model.dataSource)&&!t.isNullOrUndefined(this.getRows())){for(i=0;i<this.getRows().length;i++)u+=n(this.getRows()[i]).height();u<this.getContent().height()-1&&r.addClass("e-lastrowcell")}this.model.scrollSettings.allowVirtualScrolling&&this.getContentTable().height()<this.getContent().height()&&r.addClass("e-lastrowcell")},_addMedia:function(){if(!this.model.enablePersistence&&typeof this.model.scrollSettings.width!="string"&&this.model.scrollSettings.width>0?this._responsiveScrollWidth=this._originalScrollWidth=this.model.scrollSettings.width:this._originalScrollWidth=this.element.width(),typeof this.model.scrollSettings.height!="string"&&this.model.scrollSettings.height>0&&(this._responsiveScrollHiehgt=this.model.scrollSettings.height),this.model.minWidth&&this.model.isResponsive){this._$onresize=n.proxy(this.windowonresize,this);n(window).on("resize",this._$onresize);if(n.isFunction(window.matchMedia)){var t=window.matchMedia("(max-width: 768px)");this._mediaStatus=t.matches}this.windowonresize()}},_getNoncontentHeight:function(){var n=0;return t.isNullOrUndefined(this.getHeaderContent().outerHeight())||(n+=this.getHeaderContent().outerHeight()),this.model.toolbarSettings.showToolbar&&!t.isNullOrUndefined(this.element.find(".e-gridtoolbar").outerHeight())&&(n+=this.element.find(".e-gridtoolbar").outerHeight()),this.model.allowPaging&&!t.isNullOrUndefined(this.element.find(".e-pager").outerHeight())&&(n+=this.element.find(".e-pager").outerHeight()),this.model.showColumnChooser&&!t.isNullOrUndefined(this.element.find(".e-ccButton").outerHeight())&&(n+=this.element.find(".e-ccButton").outerHeight()),this.model.allowGrouping&&this.model.groupSettings.showDropArea&&!t.isNullOrUndefined(this.element.find(".e-groupdroparea").outerHeight())&&(n+=this.element.find(".e-groupdroparea").outerHeight()),this.model.showSummary&&!t.isNullOrUndefined(this.element.find(".e-gridsummary").outerHeight())&&(n+=this.element.find(".e-gridsummary").outerHeight()),n},setDimension:function(n,t){var i=n-this._getNoncontentHeight();this.model.scrollSettings.height=i;this.model.scrollSettings.width=t;this._renderScroller()},_getVisibleColumnsWidth:function(){for(var t=0,n=0;n<this.columnsWidthCollection.length;n++)this.model.columns[n].visible&&(t+=this.columnsWidthCollection[n]);return t},setPhoneModeMaxWidth:function(n){this._gridPhoneMode=n},_mediaQueryUpdate:function(i,r,u,f){var s,o,h,e;if(window.innerWidth<=this._gridPhoneMode&&this.model.enableResponsiveRow){s=this.getContentTable()[0].style;s.removeAttribute?s.removeAttribute("min-width"):s.removeProperty("min-width");o=this.getContent().data("ejScroller");o&&this.getContent().ejScroller("destroy");return}o=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject();i?(this.model.scrollSettings.width=t.isNullOrUndefined(this._responsiveScrollWidth)?u:Math.min(this._responsiveScrollWidth,u),e=Math.min(f,r)-this._getNoncontentHeight(),e=t.isNullOrUndefined(this._responsiveScrollHiehgt)?e:Math.min(this._responsiveScrollHiehgt,e),(this.element.parent().is("body")&&n(document).height()>e||e>this.element.parent().height())&&this.model.scrollSettings.height!="auto"&&(e-=parseInt(this.element.parent().css("margin-bottom")+1)),e=this.model.scrollSettings.height!="auto"?e:this.model.scrollSettings.height,(this.model.minWidth>u||this.getContentTable().width()>u)&&r>f&&(e=e!="auto"?e+this.model.scrollSettings.buttonSize:e),t.isNullOrUndefined(this.getRows())&&(e="100%"),this.model.scrollSettings.height=this._isHeightResponsive?e:this._initHeight?this._initHeight:this.getContentTable()[0].scrollHeight,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent")):(this.model.scrollSettings.width="100%",t.isNullOrUndefined(this._responsiveScrollWidth)||(this.model.scrollSettings.width=Math.min(this._responsiveScrollWidth,u)),h=Math.min(f,r),e=h-this._getNoncontentHeight(),t.isNullOrUndefined(this._responsiveScrollHiehgt)||(e=Math.min(this._responsiveScrollHiehgt,e)),(this.element.parent().is("body")&&n(document).height()>e||e>this.element.parent().height())&&this.model.scrollSettings.height!="auto"&&(e-=parseInt(this.element.parent().css("margin-bottom"))),e=this.model.scrollSettings.height!="auto"?e:this.model.scrollSettings.height,(!t.isNullOrUndefined(this._responsiveScrollWidth)&&this.model.scrollSettings.width==this._responsiveScrollWidth&&(this.model.minWidth>this._responsiveScrollWidth||this._getVisibleColumnsWidth()>this._responsiveScrollWidth)||t.isNullOrUndefined(this._responsiveScrollWidth)&&(this.getRowHeight()==e||this._isHeightResponsive)&&this.getContentTable().width()>u)&&(e=e!="auto"?e+this.model.scrollSettings.buttonSize:e),t.isNullOrUndefined(this.getRows())&&(e="100%"),this.getContent().height()>=e&&!this._resize&&!this.initialRender&&typeof this.model.scrollSettings.width=="string"&&(this.model.scrollSettings.width=u),this.model.scrollSettings.height=this._isHeightResponsive?e:this._initHeight?this._initHeight:this.getContentTable()[0].scrollHeight,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"));o!=null&&o.refresh();this._renderScroller();this._resize=!1},windowonresize:function(i){var r,u,f,s;if(!this.element.is(":visible")){r=this;r._isVisible=!0;u=setInterval(function(){!t.isNullOrUndefined(r.element)&&r.element.is(":visible")&&r._isVisible?(r.windowonresize(),r._isVisible=!1,clearInterval(u)):t.isNullOrUndefined(r.element)||clearInterval(u)},100);return}i&&i.type=="resize"&&(this._resize=!0);this.model.scrollSettings.width=this._responsiveScrollWidth;this.element.css("width","100%");this.getContentTable().width("100%");this.getHeaderTable().width("100%");t.isNullOrUndefined(this.getFooterTable())||this.getFooterTable().width("100%");this.getContentTable().css("minWidth",this.model.minWidth);this._isHeightResponsive&&(this.getContent().height("100%"),this.getContent().find(".e-content").height("100%"));this.getBrowserDetails().browser=="msie"&&this.getHeaderTable().css("min-width",this.model.minWidth);f=Math.round(this.element.width());var h=n(window).height()-this.element.offset().top,l=t.isNullOrUndefined(this.getRows())?1:this.getRows().length,c=this.element.parent().is(n("body"))||this.element.parent().height()==n("body").height()||["","auto"].indexOf(this.element.parent()[0].style.height)!=-1,e=this.getContentTable()[0].scrollHeight+this._getNoncontentHeight(),o=c?h:this.element.parent().height();e+=parseInt(this.element.parent().css("margin-top"));s=this.model.minWidth>f||o<=e;this._mediaQueryUpdate(s,o,f,e)},_removeMedia:function(){n(window).off("resize",this._$onresize);this.getContentTable().css("min-width","");this.getHeaderTable().css("min-width","");this.getContentTable().css("width","");this.model.scrollSettings.width="auto";this.getContent().data("ejScroller")&&this.getContent().ejScroller("destroy")},_getRowHeights:function(){var n=this.getRows(),i=[],u=[],t;if(n!==null)if(this._rowHeightCollection=[],n[1]!==r&&n[1].length&&(this.model.scrollSettings.frozenColumns>0&&n[0]!==r||n[0]!==r&&typeof n[0].item!="undefined"&&typeof n[0].length=="number"&&typeof n[1].item!="undefined"&&typeof n[1].length=="number"))for(i=n[0],u=n[1],t=0;t<i.length;t++)this._rowHeightCollection[t]=i[t].offsetTop>=u[t].offsetTop?i[t].offsetTop:u[t].offsetTop;else for(t=0;t<n.length;t++)this._rowHeightCollection[t]=n[t].offsetTop;return this._rowHeightCollection},_getEmptyTbody:function(){var i=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length-this._hiddenColumns.length});return n(document.createElement("tr")).append(i)},_getIndentCol:function(){return t.buildTag("col","",{width:"30px"})},_createSortElement:function(){return t.buildTag("span.e-icon","&nbsp;")},_createSortNumber:function(n,i){return i.css("text-align")=="right"?t.buildTag("span.e-number",n,{color:"white","font-size":"9px","text-align":"center",float:"left"}):t.buildTag("span.e-number",n,{color:"white","font-size":"9px","text-align":"center",float:"right"})},_onFocusIn:function(){var n=this;setTimeout(function(){n.element.removeClass("e-activefocusout")},0)},_onFocusOut:function(){var n=this;setTimeout(function(){n.element.addClass("e-activefocusout")},0)},_wireEvents:function(){this._on(this.element,n.isFunction(n.fn.tap)&&this.model.enableTouch?"tap":"click",this._clickHandler);this._on(this.element,n.isFunction(n.fn.tap)&&this.model.enableTouch?"tap":"click",".e-gridheader",this._mouseClickHandler);this.model.enableFocusout&&(this._on(this.element,"focusout",this._onFocusOut),this._on(this.element,"focusin",this._onFocusIn));t.gridFeatures.common&&(this._on(this.element,n.isFunction(n.fn.doubletap)&&this.model.enableTouch?"doubletap":"dblclick",".e-gridcontent > div:first",this._recorddblClickHandler),this.model.rightClick&&this._on(this.element,"contextmenu",this._rightClickHandler),this._on(this.element,"click",".e-gridcontent",this._recordClick),this._enableRowHover(),this.model.enableTouch?this._on(this.element,"swipeleft swiperight",".e-gridcontent div > .e-table",n.proxy(this._touchGrid,this)):this.element.addClass("e-touch"),this._on(this.element,"mousedown",".e-gridheader",this._headerMouseDown),this.model.allowRowDragAndDrop&&this.model.selectionType=="multiple"&&this._on(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this._on(this.element,"mouseover mouseleave",".e-gridheader:first",this._headerHover),this._on(this.element,t.eventType.mouseMove,".e-gridheader:first",this._headerHover),this.model.allowResizeToFit&&this._on(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this.model.allowResizing&&(this._on(this.element,t.eventType.mouseMove,".e-gridheader:first",this._mouseMove),this._on(this.element,"mouseup",this._mouseUp)),this.model.allowKeyboardNavigation&&(this.element[0].tabIndex=this.element[0].tabIndex==-1?0:this.element[0].tabIndex,this.element[0].accessKey=!t.isNullOrUndefined(this.element[0].accessKey)&&this.element[0].accessKey!=""?this.element[0].accessKey:"e",this._on(this.element,"keyup",this._keyDownHandler)));t.gridFeatures.edit&&(this._enableEditingEvents(),this._on(this.element,"click",".e-gridcontent .e-unboundcelldiv",this._unboundClickHandler));this.model.allowGrouping&&(this._enableGroupingEvents(),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover));this._enableFilterEvents()},_enableFilterEvents:function(){if((this.model.allowMultiSorting||this.model.selectionType=="multiple"||this.model.allowFiltering)&&this._on(n(document),"mousedown",this._docClickHandler),this.model.allowFiltering){var t=this;this._off(this.element,"keyup",".e-filterbar input")._on(this.element,"keyup",".e-filterbar input",this._filterBarHandler);this._on(this.element,"focus click",".e-filterbar",this._filterBarClose)}},_docClickHandler:function(i){var r=!t.isIOSWebView()&&this.getBrowserDetails(),u=n(i.target);this._customPop!=null&&this.element.find(i.target).length==0&&this._customPop.hide();this.model.allowFiltering&&(this.model.filterSettings.filterType=="menu"||this.model.filterSettings.filterType=="excel"?this._$colType&&(n(i.target).find(".e-grid.e-dlgcontainer").length>1||n(i.target).find(".e-excelfilter").length>1)&&(r&&r.browser=="msie"?i.target.tagName!="BODY"&&(this.isExcelFilter?this._excelFilter.closeXFDialog(i):this._closeFilterDlg()):this._isExcelFilter?this._excelFilter.closeXFDialog(i):this._closeFilterDlg()):u.hasClass("e-filtertext")||u.hasClass("e-cancel")||this.getFilterBar().find(".e-cancel").addClass("e-hide"))},_mouseClickHandler:function(i){var g=n(i.target),u,at=this.commonQuery.clone(),s,nt,ut,ft,c,et,o,f,h,vt,st,kt,d,ht,yt,it,pt,p,tt,l,rt,wt,ct,ii,lt;if((g.closest(".e-grid").length==0||g.closest(".e-grid").attr("id")===this._id)&&this.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow").css("cursor")!="col-resize")if(u=n(i.target).is(".e-ascending, .e-descending")?n(i.target.parentNode):g.hasClass("e-groupheadercell")?g.children("div"):n(i.target),this._$fDlgIsOpen&&this.model.allowFiltering&&(this.model.filterSettings.filterType=="menu"||this._isExcelFilter)&&(n.fx.off=!0,this._closeFDialog(),n.fx.off=!1),this.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive").removeClass("e-active"),u.hasClass("e-headercelldiv")||u.hasClass("e-headercell")&&n.inArray("column",this.model.selectionSettings.selectionMode)==-1||!u.hasClass("e-togglegroupbutton")&&u.closest(".e-headercelldiv").length&&n.inArray(u[0].tagName,["SELECT","INPUT","TEXTAREA"])==-1||u.closest(".e-groupheadercell").length&&n(i.target).is(".e-ascending, .e-descending")){if(!this.model.allowSorting||t.gridFeatures.sort===r)return;$targetnew=u.hasClass("e-headercelldiv")||u.closest(".e-groupheadercell").length?u:u.hasClass("e-headercell")?u.find(".e-headercelldiv"):u.closest(".e-headercelldiv");c=$targetnew.attr("data-ej-mappingname");nt=t.sortOrder.Ascending;this._$prevSElementTarget=this._$curSElementTarget;this._$curSElementTarget=u;nt=u.parent().find("span").hasClass("e-ascending")?t.sortOrder.Descending:t.sortOrder.Ascending;i.pointerType=="touch"&&this._customPop!=null&&!this._customPop.is(":visible")&&this._customPop.find(".e-sortdirect").hasClass("e-spanclicked")&&this._customPop.show();i.pointerType=="touch"&&this._customPop!=null&&(this._customPop.find(".e-rowselect").is(":visible")||!this._customPop.find(".e-sortdirect").hasClass("e-spanclicked"))&&this.model.allowMultiSorting&&(ut=u.offset(),this._customPop.removeAttr("style"),this._customPop.offset({left:ut.left,top:ut.top-this.getHeaderTable().find(".e-columnheader").height()-u.height()}).find(".e-sortdirect").show().end().find(".e-rowselect").hide().end().show());this.model.allowMultiSorting&&(i.ctrlKey||this._enableSortMultiTouch)&&(this.multiSortRequest=!0);i.shiftKey&&n.inArray(c,this.model.groupSettings.groupedColumns)==-1&&(this._removeSortedColumnFromCollection(c),this.multiSortRequest=!0,c=null,this.sortColumn(c,nt));t.isNullOrUndefined(c)||this.sortColumn(c,nt)}else if(u.hasClass("e-togglegroupbutton")&&this.model.allowGrouping)ft=u.parent().children(".e-headercelldiv").attr("data-ej-mappingname"),u.hasClass("e-togglegroup")&&this.groupColumn(ft),u.hasClass("e-toggleungroup")&&this.ungroupColumn(ft);else if((u.hasClass("e-filtericon")||u.hasClass("e-filteredicon")||u.hasClass("e-responsivefilterColDiv")||u.parent().hasClass("e-responsivefilterColDiv"))&&(c=u.parent().find(".e-headercelldiv").attr("data-ej-mappingname")||u.attr("data-ej-mappingname")||n(u.parent()).attr("data-ej-mappingname"),this._$prevFieldName=this._$curFieldName,s=this.getColumnByField(c),et={True:this.localizedLabels.True,False:this.localizedLabels.False},this.model.allowFiltering)){if(o=this,this.model.filterSettings.filterType=="excel"&&s.filterType=="menu"&&n.inArray(s.type,this._menuColTypes)==-1?(this._renderFilters(s),this._menuColTypes.push(s.type)):(this.model.filterSettings.filterType=="menu"&&s.filterType=="excel"||this.model.filterSettings.filterType=="excel"&&s.filterType!="menu")&&n.inArray(s.type,this._excelColTypes)==-1&&(this._renderFilters(s),this._excelColTypes.push(s.type)),n.each(this.model.columns,function(n,t){t.field==c&&(o._$colType=t.type,o._$curFieldName=t.field,o._$colFormat=t.format,o._$filterType=t.filterType,o._$colForeignKeyField=t.foreignKeyField?t.foreignKeyField:t.field,o._$colForeignKeyValue=t.foreignKeyValue,o._$colDropdownData=t.dataSource)}),(this.model.filterSettings.filterType=="menu"&&this._$filterType!="excel"||this.model.filterSettings.filterType=="excel"&&this._$filterType=="menu")&&(f="#"+this._id+"_"+this._$colType+"Dlg",this._$menuDlgIsOpen=!0,this._$colType=="string"?this._$colForeignKeyValue&&this._$colDropdownData?n("#"+this._id+"_acString").ejAutocomplete({fields:{text:o._$colForeignKeyValue,key:o._$colForeignKeyField},dataSource:o._$colDropdownData}):n("#"+this._id+"_acString").ejAutocomplete({fields:{text:o._$curFieldName,key:this._getIdField()},dataSource:this._dataSource()}):this._$colType=="date"?this._$colFormat!=r?(this._$colFormat=this._$colFormat.replace("{0:","").replace("}",""),n(f).find(".e-datewidget .e-datepicker").ejDatePicker({dateFormat:this._$colFormat.replace("{0:","").replace("}","")})):n(f).find(".e-datewidget .e-datepicker").ejDatePicker({dateFormat:t.preferredCulture(this.model.locale).calendars.standard.patterns.d}):this._$colType=="datetime"&&(this._$colFormat!=r&&(this._$colFormat=this._$colFormat.replace("{0:","").replace("}",""),n(f).find(".e-datetimewidget input").ejDateTimePicker({dateFormat:this._$colFormat.replace("{0:","").replace("}","")})),this._setFilterFieldValues(f))),this._mediaStatus=document.documentElement.clientWidth<768,this.model.isResponsive&&this._mediaStatus){var e=this,a=t.buildTag("div.e-resFilterDialogHeaderDiv"),bt=t.buildTag("div.e-labelRes","<span>Filter<\/span>");n(".e-filterMenuBtn").length>0&&n(".e-filterMenuBtn").remove();var ot=t.buildTag("div.e-filterMenuBtn"),k=t.buildTag("input.e-resposnsiveFilterBtnLeft e-flat e-btnsub"),w=t.buildTag("input.e-resposnsiveFilterBtnRight e-flat e-btncan");if(a.append(bt),a.css("width","100%"),h=n(f).css("padding-left","0px"),u.parent().hasClass("e-responsivefilterColDiv")&&u.hasClass("e-filternone"))o._fltrClrHandler(),u.remove(),n("#responsiveFilter").css("display","block");else if(this.element.css("display","none"),setTimeout(function(){n("#responsiveFilter").css("display","none");0}),this._isExcelFilter||this._$filterType=="excel"){if(this._excelDlg=f="#"+this._id+this._$colType+"_excelDlg",t.isNullOrUndefined(h.find(".e-resFilterDialogHeaderDiv")[0])){k.ejButton({text:"OK",type:"button",click:function(){e._responsiveFilterClose();e._excelFilter._openedFltr=n(e._excelDlg);e._excelFilter._fltrBtnHandler();e._setResponsiveFilterIcon()}});w.ejButton({text:"Cancel",type:"button",click:function(){n(f).css("display","none");o.element.css("display","block")}});n(f).children().not(".e-searchcontainer").remove();var dt=this._excelFilter,d=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:f.slice(1),openDialogue:"responsiveFilter"}),ht=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:f.slice(1),openDialogue:"responsiveFilter"});d.click(function(t){n.proxy(e._closeDivIcon(t),this)});a.append(d.append(ht));p=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:f.slice(1),gridEle:!0});tt=t.buildTag("span.e-icon e-resIcon e-responisveCustomFilter","",{},{closeDialogue:f.slice(1),gridEle:!0});p.click(function(t){n.proxy(e._closeDivIcon(t),this)});o._$colType!="boolean"&&a.append(p.append(tt));n(f).css("padding","0px");l=n(f).css("height",n(window).height()-2);l.css("width",n(window).width()-2);ct=l.find(".e-searchcontainer .e-searchbox").css("margin-top","10px");ct.children().css("margin-top","10px");var gt=l.find(".e-checkboxlist"),ni=n(window).width()*(97/100),ti=n(window).height()*(65/100);n(l.find(".e-searchcontainer")).addClass("e-resSearch");rt=l.find(".e-resSearch .e-btncontainer").remove();rt.find("input:first").css("width","45.6%");rt.find("input:first").addClass("e-resposnsiveFilterBtnLeft");rt.find("input:last").addClass("e-resposnsiveFilterBtnRight");l.find(".e-excelLabel").remove();wt=t.buildTag("div.e-excelLabel","Order Id",{"font-weight":"bold","margin-top":"10px"});ct=l.find(".e-searchcontainer");wt.insertAfter(l.find(".e-searchcontainer .e-searchbox"));l.prepend(a);n(f).append(ot.append(k).append(w));gt.ejScroller({height:ti,width:ni}).ejScroller("refresh")}this._excelFilter.openXFDialog({field:c,enableResponsiveRow:!0,displayName:s.headerText,dataSource:this._dataSource(),query:at,position:{X:y,Y:b},dimension:{height:n(window).height(),width:n(window).width()},cssClass:"resFilter",type:this._$colType,format:this._$colFormat,localizedStrings:et});n(f).insertAfter(this.element);t.isNullOrUndefined(n(f).parents(".e-grid")[0])||n(f).remove();p.click(function(){var y,p,i,u,b,h,d,c,g,l,nt,tt,r,it,rt,a,v,s;n(e._excelDlg).css("display","none");y=n(window).height()-5;p=n(window).width();dt._openCustomFilter("equal");i=f=n("#"+e._id+e._$colType+"_CustomFDlg").addClass("e-responsviesExcelFilter");t.isNullOrUndefined(i.find(".e-resFilterDialogHeaderDiv")[0])&&(u=t.buildTag("div.e-resFilterDialogHeaderDiv"),b=t.buildTag("div.e-labelRes","<span>Custom Filter<\/span>"),u.append(b),h=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:e._id+e._$colType+"_CustomFDlg",openDialogue:e._excelDlg.slice(1)}),d=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:e._id+e._$colType+"_CustomFDlg",openDialogue:e._excelDlg.slice(1)}),h.click(function(){i.css("display","none");e.model.enableResponsiveRow?n("#responsiveFilter").css("display","block"):e.element.css("display","block")}),u.append(h.append(d)),c=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:e._id+e._$colType+"_CustomFDlg",gridEle:!0}),g=t.buildTag("span.e-icon e-resIcon e-responisveClose","",{},{closeDialogue:e._id+e._$colType+"_CustomFDlg",gridEle:!0}),u.append(c.append(g)),c.click(function(){i.css("display","none");e.element.css("display","block")}),i.prepend(u),i.insertAfter(e.element),i.find(".e-dlgfields").css("width","100%"),l=i.find(".e-dlgfields:first").css("width","92%").css("margin-left","6%"),l.css("margin-top","4%"),nt=i.find(".e-dlgfields").find(".e-fieldset legend").text(),tt=t.buildTag("div.e-responsiveLabelDiv",nt,{"margin-left":"6%"}),tt.insertAfter(l),r=i.find(".e-dlgfields").find(".e-fieldset").find("table").css("width","61%"),i.find(".e-dlgfields").find(".e-fieldset").replaceWith(r),it=r.parent("div").addClass("e-responsiveExcelFilterFieldDiv"),rt=r.find(".e-dropdownlist"),r.find(".e-dropdownlist").each(function(t,i){var u=n(i).ejDropDownList("model.dataSource"),r=n(window).width()*(40/100);n(i).ejDropDownList("destroy").ejDropDownList({width:r,popupWidth:r+"px",dataSource:u})}),r.find(".e-autocomplete").each(function(t,i){var r=n(i).ejAutocomplete("model.dataSource"),u=n(window).width()*(40/100);n(i).ejAutocomplete("destroy").ejAutocomplete({width:u,dataSource:r.dataSource,fields:r.fields})}),r.find(".e-datepicker").each(function(t,i){var u=n(i).ejDatePicker("model.dataSource"),r=n(window).width()*(40/100);n(i).ejDatePicker("destroy");n("#"+n(i).attr("id")).ejDatePicker({width:r})}),a=k.clone(),v=w.clone(),a.ejButton({text:"OK",type:"button",click:function(){e._excelFilter._openedFltr=i;e._excelFilter._fltrBtnHandler();i.hasClass("e-dlgcustom")&&i.css("display","none");e._setResponsiveFilterIcon();e.element.css("display","block")}}),v.ejButton({text:"Cancel",type:"button",click:function(){i.ejDialog("close");o.element.css("display","block")}}),i.append(ot.clone().append(a).append(v)),s=i.find(".e-dlgfields .e-btncontainer").remove(),s.find("input:first").addClass("e-resposnsiveFilterBtnLeft"),s.find("input:first").css("width","45.6%"),s.find("input:last").addClass("e-resposnsiveFilterBtnRight"));e.element.css("display","none");i.ejDialog({enableModal:!1,height:y,width:p,position:{X:0,Y:0},enableResize:!1,showHeader:!1}).ejDialog("open")});ii=t.buildTag("div")}else vt=this.model.enableResponsiveRow?"OK":"Filter",st=this.model.enableResponsiveRow?"Cancel":"Clear",k.ejButton({text:vt,type:"button",click:n.proxy(this._fltrBtnHandler,this)}),w.ejButton({text:st,type:"button",click:function(){st=="Clear"&&(o.element.css("display","block"),o._fltrClrHandler());n(f).css("display","none");w.hasClass("e-resposnsiveFilterBtnRight")&&o.element.css("display","block")}}),u.parent().hasClass("e-responsivefilterColDiv")&&u.hasClass("e-filternone")?(o._fltrClrHandler(),u.remove()):(h.addClass("e-resMenuFltr"),h.css("height",n(window).height()-1).css("width",n(window).width()-2),h.find(".e-operator").addClass("e-resFilterOperator"),h.find(".e-value").addClass("e-resFilterOperator"),h.find(".e-value1").addClass("e-resFilterOperator"),kt=h.find(".e-dlgBtns").remove().addClass("e-filterMenuBtn"),h.append(ot.append(k).append(w)),t.isNullOrUndefined(h.find(".e-resFilterDialogHeaderDiv")[0])&&(h.insertAfter(this.element),d=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:f.slice(1),openDialogue:"responsiveFilter"}),ht=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:f.slice(1),openDialogue:"responsiveFilter"}),d.click(function(){h.css("display","none");e.model.enableResponsiveRow?n("#responsiveFilter").css("display","block"):e.element.css("display","block")}),a.append(d.append(ht)),p=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:f.slice(1),gridEle:!0}),tt=t.buildTag("span.e-icon e-resIcon e-responisveClose","",{},{closeDialogue:f.slice(1),gridEle:!0}),p.click(function(){h.css("display","none");e.element.css("display","block")}),yt=n(h.find(".e-value").find("input:last")),o._$colType=="string"&&(it=n(h.find(".e-value").find("input:last")).ejAutocomplete("model"),yt.ejAutocomplete("destroy").ejAutocomplete({enableDistinct:!0,dataSource:it.dataSource,fields:it.fields,width:it.width,focusIn:function(){var n=this.element.closest(".e-filterDialog").find(".e-dropdownlist");this.model.filterType=n.val()}})),a.append(p.append(tt)),h.prepend(a)),h.find(".e-responsiveLabelDiv").remove(),pt=t.buildTag("div.e-responsiveLabelDiv","",{"margin-left":"5%","font-size":"17px","margin-top":"5%"}).append(t.buildTag("span",this.getHeaderTextByFieldName(c),{"font-weight":"bold"})),pt.insertAfter(h.find(".e-resFilterDialogHeaderDiv")),h.fadeIn(100,function(){}))}else{n(f).hasClass("e-resMenuFltr")&&(n(f).remove(),this._renderFilterDialogs(),f="#"+this._id+"_"+this._$colType+"Dlg");n(f).ejDialog({position:{X:"",Y:""}});var si=n(document).width(),v=document.documentElement.clientWidth<800?200:250,y=u.position().left+(this.model.enableRTL?-6:18),b=u.position().top+2,ri=n("#"+this._id).width();u.closest(".e-headercell").css("position")=="relative"&&(y=u.offset().left+15,b=u.offset().top+20);lt="e-filterdialoglarge";v=this._isExcelFilter&&s.filterType!="menu"&&!t.isNullOrUndefined(this._excelFilter._dialogContainer)?this._excelFilter._dialogContainer.width():v;var ui=this.element.offset().left+this.element.width()-u.offset().left,fi=v-ui,ei=u.offset().left-this.element.offset().left,oi=v-ei;u.offset().left+18+v>ri&&fi>oi&&(y=y-v-(this.model.enableRTL?14:10));v==200&&(lt="");t.isNullOrUndefined(this._$colType)||(this.model.filterSettings.filterType=="menu"&&this._$filterType!="excel"||this.model.filterSettings.filterType=="excel"&&this._$filterType=="menu"?(y=y-n("#"+this._id).offset().left,b=b-n("#"+this._id).offset().top,n(f).ejDialog({position:{X:y,Y:b},width:v,cssClass:lt}).ejDialog("open")):this._excelFilter.openXFDialog({field:c,displayName:s.headerText,dataSource:this._dataSource(),query:at,position:{X:y,Y:b},type:this._$colType,format:s.format,foreignKey:s.foreignKeyField,foreignKeyType:s.originalType,foreignKeyValue:s.foreignKeyValue,foreignDataSource:s.dataSource,localizedStrings:et}))}this._setFilterFieldValues(f);this._$colType=="number"&&s.serverType!=r?n(f).find(".e-numerictextbox").ejNumericTextbox({width:"100%",decimalPlaces:0}):this._$colType=="number"&&n(f).find(".e-numerictextbox").ejNumericTextbox({width:"100%",decimalPlaces:(/{0:(?:[A-z])+([0-9])?}/.exec(s.format)||{})[1]|0});this._$prevColType=this._$colType;this._$fDlgIsOpen=!0}},_responsiveFilterClose:function(){this.element.css("display","block")},_clickHandler:function(i){var r=n(i.target),o=n("[id$='ccDiv'].e-grid.e-columnChooser"),s,w=n("#"+this._id+"EditForm"),h,u,f,c,e,l,b,a,k,d,v,y,p,g,nt;if(n(i.target).hasClass("e-checkselectall")&&!this.model.enableTouch&&(i.target.checked?this._isCheckboxChecked=!0:this._isCheckboxUnchecked=!0),o.length)for(c=!0,e=0;e<o.length;e++)(r.parents(".e-ccButton").length||r.hasClass("e-ccButton"))&&(c=n(i.target).closest(".e-grid").attr("id")+"ccDiv"!=o[e].id),l=n("#"+o[e].id).ejDialog("instance"),l.isOpened()&&c&&(l.close(),n(".e-columnChoosertail").remove(),n(".e-columnChoosertailAlt").remove());if((!r.hasClass("e-button")||!(r.hasClass("e-disable")||r.prop("disabled")))&&r.closest(".e-grid").attr("id")===this._id&&!r.closest("#"+this._id+"EditForm").length){if(r.hasClass("e-rowcell")||r.closest("td").is(".e-rowcell")||r.hasClass("e-headercell")&&i.clientY-r.offset().top<r.height()/4||r.parents(".e-headercheckcelldiv").length){if(this._bulkEditCellDetails.cancelSave){this._bulkEditCellDetails.cancelSave=!1;return}if(this.model.editSettings.editMode=="batch"&&n.isFunction(n.validator)&&w.length&&w.validate().errorList.length>0)return;h=r.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0;b=r.closest(".e-rowcell").index()!=-1?r.closest(".e-rowcell").index():r.closest(".e-headercell").index()-this.model.groupSettings.groupedColumns.length;u=r.hasClass("e-rowcell")?r.index()-h:b-h;u=this.model.detailsTemplate!=null||this.model.childGrid!=null?u-1:u;this.model.scrollSettings.frozenColumns&&(r.closest(".e-movableheaderdiv").length||r.closest(".e-movablecontentdiv").length)&&(u=u+this.model.scrollSettings.frozenColumns);f=this.getIndexByRow(r.closest("tr"));this._bulkEditCellDetails.columnIndex=u;this._bulkEditCellDetails.rowIndex=f;this.model.allowSelection&&t.gridFeatures.selection&&(a=this._enableCheckSelect&&r.parent(".e-checkcelldiv").length?!0:!1,r.hasClass("e-checkselectall")&&(this._selectAllCheck=!0,k=this.model.scrollSettings.frozenColumns>0?this._gridRows[0].length:this._gridRows.length,d=this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling?this._gridRecordsCount:this.model.allowPaging?this.model.currentViewData.length:k,this.selectRows(0,d-1,r)),this.model.selectionType=="multiple"&&((i.ctrlKey||this._enableSelectMultiTouch)&&(this.multiSelectCtrlRequest=!0),i.shiftKey&&(this.multiSelectShiftRequest=!0,this._allowcellSelection&&f>-1&&this.selectCells([[f,[u]]]),this._allowrowSelection&&f>-1&&(!this._enableCheckSelect||a)&&this.selectRows(this._previousIndex,this.getIndexByRow(r.closest("tr")),r),this._selectedRow(this.getIndexByRow(r.closest("tr"))),this._allowcolumnSelection&&r.hasClass("e-headercell")&&!r.hasClass("e-stackedHeaderCell")&&i.clientY-r.offset().top<r.height()/4&&this.selectColumns(this._previousColumnIndex,u)),i.pointerType=="touch"&&this._customPop!=null&&!this._customPop.is(":visible")&&this._customPop.find(".e-rowselect").hasClass("e-spanclicked")&&this.model.selectionSettings.selectionMode=="row"&&this._customPop.show(),i.pointerType=="touch"&&this._customPop!=null&&(this._customPop.find(".e-sortdirect").is(":visible")||!this._customPop.find(".e-rowselect").hasClass("e-spanclicked"))&&this.model.selectionType=="multiple"&&(this.model.selectionSettings.selectionMode.indexOf("cell")!=-1||this.model.selectionSettings.selectionMode.indexOf("row")!=-1)&&(this._customPop.removeAttr("style"),v=r.offset(),this._customPop.offset({top:0,left:0}).offset({left:v.left,top:v.top-this.getRowHeight()-r.height()}).find(".e-sortdirect").hide().end().find(".e-rowselect").show().end().show())),this.multiSelectShiftRequest||(this._allowcellSelection&&f>-1&&(y=this._checkCellSelectionByRow(f,u),(this.model.selectionSettings.enableToggle&&this.selectedRowCellIndexes.length==1&&this.selectedRowCellIndexes[0].cellIndex.length==1||i.ctrlKey&&this.model.selectionType=="multiple")&&y!=-1&&this.selectedRowCellIndexes.length>0&&this.selectedRowCellIndexes[0].cellIndex.length>0?this.clearCellSelection(y.rowIndex,u):this.selectCells([[f,[u]]])),this._allowrowSelection&&f>-1&&(p=this.getIndexByRow(r.closest("tr")),this._enableCheckSelect&&(this.multiSelectCtrlRequest=!0),this.model.scrollSettings.enableVirtualization&&(g=f%this._virtualRowCount,nt=parseInt(n(r).closest("tr").attr("name"),32),p=nt*this._virtualRowCount-(this._virtualRowCount-g)),(!this._enableCheckSelect||a)&&(this.model.selectionSettings.enableToggle&&!this._enableCheckSelect&&this.getSelectedRecords().length==1&&n.inArray(this.getIndexByRow(r.closest("tr")),this.selectedRowsIndexes)!=-1?this.clearSelection(p):this.selectRows(this.getIndexByRow(r.closest("tr")),null,r)),!this._enableCheckSelect||i.ctrlKey||this._enableSelectMultiTouch||(this.multiSelectCtrlRequest=!1)),this._allowcolumnSelection&&r.hasClass("e-headercell")&&!r.hasClass("e-stackedHeaderCell")&&i.clientY-r.offset().top<r.height()/4&&(this.model.selectionSettings.enableToggle&&this.selectedColumnIndexes.length==1&&n.inArray(u,this.selectedColumnIndexes)!=-1?this.clearColumnSelection(u):this.selectColumns(u)),this.multiSelectCtrlRequest=!1),this.multiSelectShiftRequest=!1);s=this._bulkEditCellDetails.columnIndex>=0?this.model.columns[this._bulkEditCellDetails.columnIndex].field:null;r.closest(".e-rowcell").length&&!t.isNullOrUndefined(s)&&(this._tabKey=!1,this.model.editSettings.allowEditing&&this.model.editSettings.editMode==t.Grid.EditMode.Batch&&this.editCell(n.inArray(r.closest("tr").get(0),this._excludeDetailRows()),s))}(r.hasClass("e-rowselect")||r.hasClass("e-sortdirect"))&&(r.hasClass("e-spanclicked")?(r.removeClass("e-spanclicked"),r.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!1),r.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!1),this._customPop.hide()):(r.addClass("e-spanclicked"),r.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!0),r.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!0)));this._selectAllCheck=!1;t.gridFeatures.common&&this.expandCollapse(r);r.is(".e-filtericon")&&r.closest(".e-detailrow").length!=0&&i.preventDefault();this._$fDlgIsOpen&&this.model.allowFiltering&&(this.model.filterSettings.filterType=="menu"||this._isExcelFilter)&&!r.is(".e-filtericon")&&r.closest(".e-dlgcontainer").length!=1&&this._closeFDialog();this.model.allowSearching&&this._searchBar!=null&&(r.is(this._searchBar.find(".e-cancel"))?this._searchBar.find("input").val(""):i.target.id==this._id+"_searchbar"?this._searchBar.find(".e-cancel").removeClass("e-hide"):this._searchBar.find(".e-cancel").hasClass("e-hide")||this._searchBar.find(".e-cancel").addClass("e-hide"))}},_checkCellSelectionByRow:function(t,i){for(var r=0;r<this.selectedRowCellIndexes.length;r++)if(this.selectedRowCellIndexes[r].rowIndex==t)break;return r!=this.selectedRowCellIndexes.length&&n.inArray(i,this.selectedRowCellIndexes[r].cellIndex)!=-1?this.selectedRowCellIndexes[r]:-1},_persistState:function(n){this.model.enablePersistence&&this._isHeightResponsive&&(n._isHeightResponsive=this._isHeightResponsive)},_restoreState:function(n){this.model.enablePersistence&&n._isHeightResponsive&&(this._isHeightResponsive=n._isHeightResponsive)},_destroy:function(){var u,e,t,f,i,r;if(this.element.off(),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").add(this.element.find(".e-gridcontent").find(".e-content,.e-movablecontent")).off("scroll"),u=n("#"+this._id+"EditForm"),u.length){for(e=u.find(".e-field"),f=0;f<e.length;f++)t=n(e[f]),t.hasClass("e-datetimepicker")?t.ejDateTimePicker("destroy"):t.hasClass("e-datepicker")?t.ejDatePicker("destroy"):t.hasClass("e-dropdownlist")&&t.ejDropDownList("destroy");u.remove()}this._confirmDialog&&this._confirmDialog.ejDialog("destroy");this.element.find(".e-dropdownlist").ejDropDownList("model.dataSource",[]);this.model.showColumnChooser&&(n("#"+this._id+"ccDiv").ejDialog("destroy"),n("#"+this._id+"ccDiv").remove(),n("#"+this._id+"_ccTail").remove(),n("#"+this._id+"_ccTailAlt").remove());this.model.allowFiltering&&this.model.filterSettings.filterType=="excel"&&this._excelFilter.resetExcelFilter();this.model.allowReordering&&n(".e-columndropindicator").remove();this.model.allowFiltering&&this.model.filterSettings.filterType=="menu"&&(i=this,n.each(this.model.columns,function(t,u){r=u.type;n("#"+i._id+r+"_ddinput_popup_wrapper").remove();r=="string"?n("#"+i._id+"_stringDlg").find(".e-autocomplete").ejAutocomplete("destroy"):r=="date"?n("#"+i._id+"_dateDlg").find(".e-datepicker").ejDatePicker("destroy"):r=="datetime"?n("#"+i._id+"_datetimeDlg").find(".e-datetimepicker").ejDateTimePicker("destroy"):r=="number"&&n("#"+i._id+"_numberDlg").find(".e-numerictextbox").ejNumericTextbox("destroy")}));this._$onresize&&n(window).off("resize",this._$onresize);this.element.empty().removeClass("e-grid "+this.model.cssClass);this.element.ejWaitingPopup("destroy");this.model.contextMenuSettings.enableContextMenu&&(n("#"+this._id+"_Context").ejMenu("destroy"),n("#"+this._id+"_Context").remove())},_getDeprecatedLocalizedLabel:function(n){if(["OkButton","OKButton"].indexOf(n)!=-1)return this.localizedLabels.OkButton||this.localizedLabels.OKButton},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}});t.gridFeatures.common&&n.extend(t.Grid.prototype,t.gridFeatures.common);t.gridFeatures.edit&&n.extend(t.Grid.prototype,t.gridFeatures.edit);t.gridFeatures.filter&&n.extend(t.Grid.prototype,t.gridFeatures.filter);t.gridFeatures.group&&n.extend(t.Grid.prototype,t.gridFeatures.group);t.gridFeatures.selection&&n.extend(t.Grid.prototype,t.gridFeatures.selection);t.gridFeatures.sort&&n.extend(t.Grid.prototype,t.gridFeatures.sort);t.gridFeatures.dragAndDrop&&n.extend(t.Grid.prototype,t.gridFeatures.dragAndDrop);t.Grid.Locale=t.Grid.Locale||{};t.Grid.Locale["default"]=t.Grid.Locale["en-US"]={EmptyRecord:"No records to display",GroupDropArea:"Drag a column header here to group its column",DeleteOperationAlert:"No records selected for delete operation",EditOperationAlert:"No records selected for edit operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",GroupCaptionFormat:"{{:headerText}}: {{:key}} - {{:count}} {{if count == 1 }} item {{else}} items {{/if}} ",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",PagerInfo:"{0} of {1} pages ({2} items)",FrozenColumnsViewAlert:"Frozen columns should be in grid view area",FrozenColumnsScrollAlert:"Enable allowScrolling while using frozen Columns",FrozenNotSupportedException:"Frozen Columns and Rows are not supported for Grouping, Row Template, Detail Template, Hierarchy Grid and Batch Editing",Add:"Add",Edit:"Edit",Delete:"Delete",Update:"Update",Cancel:"Cancel",Done:"Done",Columns:"Columns",SelectAll:"(Select All)",PrintGrid:"Print",ExcelExport:"Excel Export",WordExport:"Word Export",PdfExport:"PDF Export",StringMenuOptions:[{text:"StartsWith",value:"StartsWith"},{text:"EndsWith",value:"EndsWith"},{text:"Contains",value:"Contains"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],NumberMenuOptions:[{text:"LessThan",value:"LessThan"},{text:"GreaterThan",value:"GreaterThan"},{text:"LessThanOrEqual",value:"LessThanOrEqual"},{text:"GreaterThanOrEqual",value:"GreaterThanOrEqual"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"},{text:"Between",value:"Between"}],PredicateAnd:"AND",PredicateOr:"OR",Filter:"Filter",FilterMenuFromCaption:"From",FilterMenuToCaption:"To",FilterMenuCaption:"Filter Value",FilterbarTitle:"'s filter bar cell",MatchCase:"Match Case",Clear:"Clear",ResponsiveFilter:"Filter",ResponsiveSorting:"Sort",Search:"Search",DatePickerWaterMark:"Select date",NumericTextBoxWaterMark:"Enter value",EmptyDataSource:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",ForeignKeyAlert:"The updated value should be a valid foreign key value",True:"true",False:"false",UnGroup:"Click here to ungroup",AddRecord:"Add Record",EditRecord:"Edit Record",DeleteRecord:"Delete Record",Save:"Save",Grouping:"Group",Ungrouping:"Ungroup",SortInAscendingOrder:"Sort In Ascending Order",SortInDescendingOrder:"Sort In Descending Order",NextPage:"Next Page",PreviousPage:"Previous Page",FirstPage:"First Page",LastPage:"Last Page",EmptyRowValidationMessage:"Atleast one field must be updated",NoResult:"No Matches Found"};t.Grid.Actions={Paging:"paging",Sorting:"sorting",Filtering:"filtering",BeginEdit:"beginedit",Save:"save",Add:"add",Delete:"delete",Cancel:"cancel",Grouping:"grouping",Ungrouping:"ungrouping",Refresh:"refresh",Reorder:"reorder",Search:"searching",BatchSave:"batchsave",VirtualScroll:"virtualscroll"};t.Grid.SummaryType={Average:"average",Minimum:"minimum",Maximum:"maximum",Count:"count",Sum:"sum",TrueCount:"truecount",FalseCount:"falsecount",Custom:"custom"};t.Grid.EditMode={Normal:"normal",Dialog:"dialog",DialogTemplate:"dialogtemplate",Batch:"batch",ExternalForm:"externalform",ExternalFormTemplate:"externalformtemplate",InlineForm:"inlineform",InlineTemplateForm:"inlineformtemplate"};t.Grid.PrintMode={AllPages:"allpages",CurrentPage:"currentpage"};t.Grid.ResizeMode={NextColumn:"nextcolumn",Control:"control",Normal:"normal"};t.Grid.Rowposition={Top:"top",Bottom:"bottom"};t.Grid.FormPosition={BottomLeft:"bottomleft",TopRight:"topright"};t.Grid.ClipMode={Ellipsis:"ellipsis",Clip:"clip",EllipsisWithTooltip:"ellipsiswithtooltip"};t.Grid.DragBehavior={Move:"move",Copy:"copy"};t.Grid.CellSelectionMode={Flow:"flow",Box:"box"};t.Grid.EditingType={String:"stringedit",Boolean:"booleanedit",Numeric:"numericedit",Dropdown:"dropdownedit",DatePicker:"datepicker",DateTimePicker:"datetimepicker",EditTemplate:"edittemplate"};t.Grid.UnboundType={Edit:"edit",Save:"save",Delete:"delete",Cancel:"cancel"};t.Grid.ToolBarItems={Add:"add",Edit:"edit",Delete:"delete",Update:"update",Cancel:"cancel",Search:"search",PrintGrid:"printGrid",ExcelExport:"excelExport",WordExport:"wordExport",PdfExport:"pdfExport"};t.Grid.FilterType={Menu:"menu",FilterBar:"filterbar",Excel:"excel"};t.Grid.FilterBarMode={Immediate:"immediate",OnEnter:"onenter"};t.Grid.SelectionType={Single:"single",Multiple:"multiple"};t.Grid.ColumnLayout={Auto:"auto",Fixed:"fixed"};t.Grid.GridLines={Both:"both",None:"none",Horizontal:"horizontal",Vertical:"vertical"};t.Grid.VirtualScrollMode={Normal:"normal",Continuous:"continuous"};t.Grid.SelectionMode={Row:"row",Cell:"cell",Column:"column"};t.Grid.WrapMode={Both:"both",Content:"content",Header:"header"};t.Grid.exportAll=function(n,i){t.Grid.prototype["export"](n,null,!0,i)};t.SqlDataSourceAdaptor=(new t.UrlAdaptor).extend({init:function(){this.initialRender=!0},processQuery:function(n,i,r){var h=t.UrlAdaptor.prototype.processQuery(n,i,r),u=t.parseJSON(h.data),e={},f,o,s,c;if(u.param)for(f=0;f<u.param.length;f++)o=u.param[f],s=Object.keys(o)[0],e[s]=o[s];return e.value=u,c=JSON.stringify({type:"SqlData",args:u}),this.initialRender==!1&&setTimeout(function(){__doPostBack("",c)},0),this.initialRender=!1,{data:JSON.stringify(e),result:n.dataSource.json,ejPvtData:h.ejPvtData,count:n.dataSource.json.length}},processResponse:function(n,i,u,f,e){var h=n.ejPvtData||{},l=n.groupDs,v,a,s,o,w;if(f&&f.getResponseHeader("Content-Type")&&f.getResponseHeader("Content-Type").indexOf("xml")!=-1&&n.nodeType==9)return u._requiresCount?{result:[],count:0}:[];if(v=JSON.parse(n.data),v&&v.action==="batch"&&n.added)return e.added=n.added,e;if(h&&h.aggregates&&h.aggregates.length){var c=h.aggregates,s={},y,p={};for(("count"in n)&&(s.count=n.count),n.result&&(s.result=n.result),n.aggregate&&(n=n.aggregate),o=0;o<c.length;o++)y=t.aggregates[c[o].type],y&&(p[c[o].field+" - "+c[o].type]=y(n,c[o].field));s.aggregates=p;n=s}if(h&&h.groups&&h.groups.length){for(a=h.groups,s={},("count"in n)&&(s.count=n.count),n.aggregates&&(s.aggregates=n.aggregates),n.result&&(n=n.result),o=0;o<a.length;o++)w=null,t.isNullOrUndefined(l)||(l=t.group(l,a[o])),n=t.group(n,a[o],h.aggregates,w,l);return s.count!=r?s.result=n:s=n,s}return n}})}(jQuery,Syncfusion),function(n,t,i){t.gridFeatures=t.gridFeatures||{};t.gridFeatures.common={refreshContent:function(n){n&&(this.refreshTemplate(),this.refreshHeader());this.model.allowFiltering&&this.model.filterSettings.filterType=="filterbar"&&this._renderFilterBarTemplate();var i={};this._initialRenderings();i.requestType=t.Grid.Actions.Refresh;this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._virtualDataRefresh=!0);this._processBindings(i)},rowHeightRefresh:function(){var i,s,h,f,o;if(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.model.currentViewData)&&this.model.currentViewData.length){var u=this.getContentTable().get(0).rows,e=this.getContentTable().get(1).rows,r=0;if(this.getContent().find(".e-frozencontentdiv").is(":visible"))for(i=0;i<u.length;i++)n(u[i]).css("display")!="none"&&(s=u[i].getClientRects()[0].height,h=e[i].getClientRects()[0].height,r=t.isNullOrUndefined(s)||t.isNullOrUndefined(h)?t.max([u[i].offsetHeight,e[i].offsetHeight]):t.max([s,h]),n(u[i]).height(r),n(e[i]).height(r),i&&(i==this.model.scrollSettings.frozenRows-1||i==u.length-1)&&(r=r+1),this.model.allowTextWrap||i&&i!=this.model.scrollSettings.frozenRows-1||(r=r-1),this.model.isEdit&&n(u[i]).find("#"+this._id+"EditForm").length&&i&&n(u[i]).find("#"+this._id+"EditForm td").css("height",r),n(e[i]).find("#"+this._id+"EditForm td").css("height",r));if(this.model.showSummary&&this.model.summaryRows.length>0){var c=this.getFooterTable().get(0).rows,a=this.getFooterTable().get(1).rows,l=0;for(f=0;f<c.length;f++)l=t.max([c[f].getClientRects()[0].height,a[f].getClientRects()[0].height]),n(c[f]).height(l),n(a[f]).height(l)}this._getRowHeights();!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&(this.getScrollObject()._vScrollbar!=null||this.getScrollObject().isVScroll())&&(o=this.getScrollObject()._vScrollbar,(t.isNullOrUndefined(o)||o.value()!=o.model.maximum)&&this._scrollObject.refresh(this.model.scrollSettings.frozenColumns>0))}},dataSource:function(n,t){if(t&&(this._templateRefresh=!0),this._dataSource(n),this._currentPage(1),this.model.scrollSettings.enableVirtualization&&(this._currentVirtualIndex=1,this.getContent().ejScroller("isVScroll")&&this.getContent().ejScroller("scrollY",0,!0)),this._updateDataSource=!0,this._refreshDataSource(n,t),this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling){var i=this._refreshVirtualPagerInfo();this._showPagerInformation(i)}this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData?this._refreshVirtualView():this._refreshVirtualContent(),this.getContent().ejScroller("isHScroll")&&this.getContent().ejScroller("scrollX",0,!0),this.getContent().ejScroller("isVScroll")?(this.model.scrollSettings.enableVirtualization||this.getContent().ejScroller("scrollY",0,!0),this.element.find(".e-gridheader").addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss"));(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow();this._trigger("dataBound",{})},_refreshDataSource:function(n,i){this._dataManager=n instanceof t.DataManager?n:t.DataManager(n);this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor;this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataManager.dataSource.offline||this._isRemoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor;this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._virtualDataRefresh=!0,this._isLocalData&&this._refreshVirtualViewDetails(!0));this.refreshContent(t.isNullOrUndefined(i)?!0:i)},_hideRowTemplateColumns:function(t,i){var r=n.inArray(t,this.model.columns);this.getContentTable().find("tbody:first > tr").find("> td:nth-child("+(r+1)+")")[i=="hide"?"addClass":"removeClass"]("e-hide")},hideColumns:function(i){var b=0,h={},u,s,g=[],nt,y,k=0,p,r,w,o,l,a,d,v;nt=typeof i=="string"?this.getColumnByHeaderText(i):this.getColumnByHeaderText(i[0]);s=typeof i=="number"?this.getColumnByIndex(i):this.getColumnByIndex(i[0]);y=typeof i=="string"?this.getColumnByField(i):this.getColumnByField(i[0]);this._showHideColumns=!0;p=[];n.map(this.model.columns,function(n){p.push(n.headerText)});var c=this._isDuplicate(p),e=c?"_hiddenColumnsField":"_hiddenColumns",f=c?"_visibleColumnsField":"_visibleColumns";if(!c&&(y!=null||s!=null))if(n.isArray(i))for(r=0;r<i.length;r++)w=s!=null?this.getColumnByIndex(i[r]):this.getColumnByField(i[r]),i[r]=w!=null?w.headerText:i[r];else i=s!=null?s.headerText:y.headerText;if(o=s!=null?"getColumnByIndex":"getColumnByHeaderText",n.isArray(i))for(r=0;r<i.length;r++)u=n.inArray(i[r],this[f]),u!=-1?(this[e].push(i[r]),this[f].splice(u,1)):u==-1&&f=="_visibleColumnsField"&&n.inArray(i[r],this[e])==-1&&t.isNullOrUndefined(this.getColumnByField(i[r]))&&(this[e].push(this[o](i[r]).field)&&this._hiddenColumns.push(this[o](i[r]).field),this[f].splice(n.inArray(this[o](i[r]).field,this[f]),1)&&this._visibleColumns.splice(n.inArray(i[r],this._visibleColumns),1)),this.model.rowTemplate!=null&&(l=u!=-1?this.getColumnByHeaderText(i[r]):this[o](i[r]),this._hideRowTemplateColumns(l,"hide"));else u=n.inArray(i,this[f]),u!=-1?(this[e].push(i),this[f].splice(u,1)):u==-1&&f=="_visibleColumnsField"&&n.inArray(i,this[e])==-1&&t.isNullOrUndefined(this.getColumnByField(i))&&(this[e].push(this[o](i).field)&&this._hiddenColumns.push(this[o](i).field),this[f].splice(n.inArray(this[o](i).field,this[f]),1)&&this._visibleColumns.splice(n.inArray(i,this._visibleColumns),1)),this.model.rowTemplate!=null&&(l=u!=-1?this.getColumnByHeaderText(i):this[o](i),this._hideRowTemplateColumns(l,"hide"));for(r=0;r<this.model.columns.length;r++)if(a=c?"field":"headerText",n.inArray(t.isNullOrUndefined(this.model.columns[r][a])||this.model.columns[r][a]==""?this.model.columns[r].headerText:this.model.columns[r][a],this[e])!=-1&&(this.model.columns[r].visible&&g.push(this.model.columns[r]),this.model.columns[r].visible=!1,this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&this.model.columns.indexOf(this.model.columns[r])<this.model.scrollSettings.frozenColumns&&k++,b++),this[e].length==b)break;h.requestType="refresh";h.action="hideColumn";this._hideHeaderColumn(this[e],c);this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&(d=this._renderGridHeader(),this.element.find(".e-gridheader").replaceWith(d[0]),this.model.allowFiltering&&this.model.filterSettings.filterType=="filterbar"&&this._renderFiltering(),this.model.allowReordering&&this._headerCellreorderDragDrop());this.refreshTemplate();this.model.scrollSettings.allowVirtualScrolling&&this._virtualShowHide(h);this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(h),this._isAddNew=!1);this.sendDataRenderingRequest(h);this.rowHeightRefresh();this.model.allowScrolling&&(this.model.scrollSettings.frozenColumns!=0||t.isIOSWebView()||this.getBrowserDetails().browser!="msie"||(v=this._calculateWidth(),this.getHeaderTable().width(v),this.getContentTable().width(v),t.isNullOrUndefined(this.getFooterTable())||this.getFooterTable().width(v)),t.isNullOrUndefined(this._scrollObject)||this.getScrollObject().refresh());this.model.showColumnChooser&&this._refreshColumnChooserList();this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&(k==this.model.scrollSettings.frozenColumns&&this._frozenPaneRefresh(),this.getScrollObject().refresh());this._showHideColumns=!1},showColumns:function(i){var k=0,h={},s,v=[],g,y,p,w,o,l,a,b,u,r,d;g=typeof i=="string"?this.getColumnByHeaderText(i):this.getColumnByHeaderText(i[0]);s=typeof i=="number"?this.getColumnByIndex(i):this.getColumnByIndex(i[0]);y=typeof i=="string"?this.getColumnByField(i):this.getColumnByField(i[0]);this._showHideColumns=!0;p=[];n.map(this.model.columns,function(n){p.push(n.headerText)});var c=this._isDuplicate(p),f=c?"_hiddenColumnsField":"_hiddenColumns",e=c?"_visibleColumnsField":"_visibleColumns";if(!c&&(y!=null||s!=null))if(n.isArray(i))for(r=0;r<i.length;r++)w=s!=null?this.getColumnByIndex(i[r]):this.getColumnByField(i[r]),i[r]=w!=null?w.headerText:i[r];else i=s!=null?s.headerText:y.headerText;if(o=s!=null?"getColumnByIndex":"getColumnByHeaderText",n.isArray(i))for(r=0;r<i.length;r++)u=n.inArray(i[r],this[f]),u!=-1?(this[f].splice(u,1),this[e].push(i[r])):u==-1&&f=="_hiddenColumnsField"&&n.inArray(i[r],this[e])==-1&&t.isNullOrUndefined(this.getColumnByField(i[r]))&&(this[e].push(this[o](i[r]).field)&&this._visibleColumns.push(i[r]),this[f].splice(n.inArray(this[o](i[r]).field,this[f]),1)&&this._hiddenColumns.splice(n.inArray(i[r],this._hiddenColumns),1)),this.model.rowTemplate!=null&&(l=u!=-1?this.getColumnByHeaderText(i[r]):this[o](i[r]),this._hideRowTemplateColumns(l,"show"));else u=n.inArray(i,this[f]),u!=-1?(this[f].splice(u,1),this[e].push(i)):u==-1&&f=="_hiddenColumnsField"&&n.inArray(i,this[e])==-1&&t.isNullOrUndefined(this.getColumnByField(i))&&(this[e].push(this[o](i).field)&&this._visibleColumns.push(i),this[f].splice(n.inArray(this[o](i).field,this[f]),1)&&this._hiddenColumns.splice(n.inArray(i,this._hiddenColumns),1)),this.model.rowTemplate!=null&&(l=u!=-1?this.getColumnByHeaderText(i):this[o](i),this._hideRowTemplateColumns(l,"show"));for(r=0;r<this.model.columns.length;r++)if(a=c?"field":"headerText",n.inArray(t.isNullOrUndefined(this.model.columns[r][a])||this.model.columns[r][a]==""?this.model.columns[r].headerText:this.model.columns[r][a],this[e])!=-1&&(this.model.columns[r].visible||v.push(this.model.columns[r]),this.model.columns[r].visible=!0,k++),this[e].length==k)break;if(this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0){for(b=!1,r=0;r<v.length;r++)u=this.model.columns.indexOf(v[r]),u<this.model.scrollSettings.frozenColumns&&(b=!0);if(b){for(r=0;r<this.model.columns.length;r++)n.inArray(this.model.columns[r].headerText,this._hiddenColumns)!=-1?this.model.columns[r].visible=!1:n.inArray(this.model.columns[r].headerText,this._visibleColumns)!=-1&&(this.model.columns[r].visible=!0);d=this._renderGridHeader();this.element.find(".e-gridheader").replaceWith(d[0]);this.model.allowFiltering&&this.model.filterSettings.filterType=="filterbar"&&this._renderFiltering();this.model.allowReordering&&this._headerCellreorderDragDrop()}}h.requestType="refresh";h.action="showColumn";this._showHeaderColumn(this[e],c);this.refreshTemplate();this.model.scrollSettings.allowVirtualScrolling&&this._virtualShowHide(h);this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(h),this._isAddNew=!1);this.sendDataRenderingRequest(h);this.rowHeightRefresh();this.model.allowScrolling&&!t.isNullOrUndefined(this._scrollObject)&&this.getScrollObject().refresh();this.model.showColumnChooser&&this._refreshColumnChooserList();this._showHideColumns=!1},_virtualShowHide:function(n){this._currentPage(1);this.model.query=this.commonQuery.clone();this._ensureDataSource(n);this._loadedJsonData=[];this._prevPage=this._currentPage()},resizeColumns:function(n,t){var i,r;if(n instanceof Array)for(i=0;i<n.length;i++)r=t instanceof Array?t[i]:t,this._setWidthColumnCollection(n[i],r);else this._setWidthColumnCollection(n,t);this.setWidthToColumns();this.model.scrollSettings.frozenColumns&&(this._frozenAlign(),this.rowHeightRefresh())},_setWidthColumnCollection:function(t,i){var r=this.getColumnByHeaderText(t)||this.getColumnByField(t);r.width=i;n.inArray(r.field,this._disabledResizingColumns)==-1&&(this.columnsWidthCollection[n.inArray(r,this.model.columns)]=i)},refreshTemplate:function(){this.addInitTemplate();(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing();this.model.allowGrouping&&this.addGroupingTemplate()},refreshHeader:function(){var t=this.element.find(".e-gridheader"),n,i;this.element[0].replaceChild(this._renderGridHeader()[0],t[0]);this.model.allowFiltering&&this.model.filterSettings.filterType=="filterbar"&&this._renderFiltering();this.model.allowGrouping&&this._headerCellgDragDrop();this.model.allowReordering&&this._headerCellreorderDragDrop();this.model.showColumnChooser&&this._renderColumnChooserData(!0);this.model.gridLines!="both"&&this._showHeaderGridLines();this.model.mergeHeaderCellInfo!=null&&(this.setWidthToColumns(),n={columnHeaders:this.getHeaderContent().find(".e-columnheader"),model:this.model},i=this,this._headerCellMerge(n),this._trigger("mergeHeaderCellInfo",n));this.refreshScrollerEvent()},set_dropColumn:function(r,u){var b,k,p,st,ht,ct,ft,lt,d,at,g,e,l,f,o,ut;if(this.model.allowReordering&&r!=u){this.model.columns.splice(u,0,this.model.columns.splice(r,1)[0]);var s=this.model.columns,h=this.getHeaderTable().find(".e-columnheader:last .e-headercell").not(".e-stackedHeaderCell"),v=h.find(".e-headercelldiv"),vt=this.getHeaderContent().find("div").first().scrollLeft();(this.model.allowSorting&&this.model.sortSettings.sortedColumns.length||this.model.groupSettings.showToggleButton)&&(h.find("span.e-ascending").remove(),h.find("span.e-descending").remove(),h.find("span.e-gridgroupbutton").remove());this.model.allowSorting&&this.model.sortSettings.sortedColumns.length&&h.eq(r).find("span").remove();this.model.scrollSettings.frozenColumns||this.getHeaderTable().find("colgroup").replaceWith(this._getMetaColGroup());(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&this.getHeaderTable().find("colgroup").prepend(this._getIndentCol());b=function(t){var r=[],o,e,s;if(t!=i){["",i].indexOf(t.value)==-1&&(r.push({name:"value",value:t.value}),t.value="");for(var u=0,f=t.attributes,h=f.length;u<h;u++)o=/^jQuery[0-9]+$/,f[u].name.match(o)||r.push({name:f[u].name,value:f[u].value});for(e=0,s=r.length;e<s;e++)n(t).removeAttr(r[e].name);return r}};k=function(t,r){if(r!=i)for(var u=0,f=t.length;u<f;u++)t[u].name=="value"&&(r.value=t[u].value),n(r).attr(t[u].name,t[u].value)};this.getHeaderTable().find(".e-fltrtempdiv").length==0&&this.getHeaderTable().find(".e-filterdiv").length>0&&(p=this.getHeaderTable().find(".e-filterdiv input"));var tt=t.isNullOrUndefined(p),c={cellattributes:[],headerattributes:[],filtercellattributes:[],filterThattributes:[]},et=r<u?r:u,ot=r<u?u:r;for(f=et,o=0;f<=ot;f++)st=this.model.detailsTemplate!=null||this.model.childGrid!=null?f+1:f,c.headerattributes[o]=b(h[st]),c.cellattributes[o]=b(v[f]),c.filtercellattributes[o]=tt?[]:b(p[f]),c.filterThattributes[o]=tt?[]:b(n(p[f]).closest("th")[0]),o++;ht=r<u?c.cellattributes.length-1:0;ct=r<u?0:c.cellattributes.length-1;for(ft in c)c[ft].splice(ht,0,c[ft].splice(ct,1)[0]);for(f=et,o=0;f<=ot;f++)lt=this.model.detailsTemplate!=null||this.model.childGrid!=null?f+1:f,k(c.headerattributes[o],h[lt]),k(c.cellattributes[o],v[f]),tt||k(c.filtercellattributes[o],p[f]),tt||k(c.filterThattributes[o],n(p[f]).closest("th")[0]),o++;if(this.model.allowFiltering&&["menu","excel"].indexOf(this.model.filterSettings.filterType)!=-1){for(this._$fDlgIsOpen&&this._closeFDialog(),d=this.model.columns,h.find(".e-filtericon").remove(),f=0;f<d.length;f++)(d[f].allowFiltering||t.isNullOrUndefined(d[f].allowFiltering))&&(at=h.find('.e-headercelldiv[data-ej-mappingname="'+d[f].field+'"]').closest(".e-headercell"),at.append(t.buildTag("div.e-filtericon e-icon e-filterset")));this._refreshFilterIcon()}for(this.columnsWidthCollection.splice(u,0,this.columnsWidthCollection.splice(r,1)[0]),this._fieldColumnNames=this._headerColumnNames=[],e=0;e<s.length;e++)this._fieldColumnNames[s[e].headerText]=s[e].field,this._headerColumnNames[s[e].field]=s[e].headerText,g=n(v[e]),header=n(h[e]),t.isNullOrUndefined(s[e].headerTemplateID)?s[e].type=="checkbox"?g.html("<input type = 'checkbox' class = 'e-checkselectall'><\/input>"):s[e].disableHtmlEncode?g.text(s[e].headerText):g.html(s[e].headerText):g.html(n(s[e].headerTemplateID).html()),this.model.groupSettings.showToggleButton&&(t.isNullOrUndefined(s[e].allowGrouping)||s[e].allowGrouping)&&(n.inArray(s[e].field,this.model.groupSettings.groupedColumns)!=-1?header.append(this._getToggleButton().addClass("e-toggleungroup")):header.append(this._getToggleButton().addClass("e-togglegroup")),l=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").find(".e-filterset"),l.addClass("e-groupfiltericon"),this.model.enableRTL&&!l.length&&header.find(".e-togglegroupbutton").addClass("e-rtltoggle"));if(this.model.allowGrouping&&this.model.allowSorting!=!0)for(f=0;f<this.model.sortSettings.sortedColumns.length;f++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[f].field,this.model.sortSettings.sortedColumns[f].direction);if(this.model.allowSorting)for(f=0;f<this.model.sortSettings.sortedColumns.length;f++){var it=1,y=this.model.sortSettings.sortedColumns[f],yt=this.getsortColumnByField(y.field),a=this.getColumnIndexByField(y.field),pt=n.inArray(yt,this.model.sortSettings.sortedColumns),rt=y.direction!="descending"?"e-rarrowup-2x":"e-rarrowdown-2x";if(this.model.allowMultiSorting){for(o=1;o<=pt;o++)it=it+1;v.eq(a).css("text-align")=="right"?(this.model.sortSettings.sortedColumns.length>1&&v.eq(a).prepend(this._createSortNumber(it,v.eq(a)).addClass("e-sortnumber")),h.eq(a).append(this._createSortElement().addClass("e-"+(y.direction||"ascending")+" "+rt))):(h.eq(a).append(this._createSortElement().addClass("e-"+(y.direction||"ascending")+" "+rt)),this.model.sortSettings.sortedColumns.length>1&&v.eq(a).append(this._createSortNumber(it,v.eq(a)).addClass("e-sortnumber")))}else rt=y.direction!="descending"?"e-rarrowup-2x":"e-rarrowdown-2x",h.eq(a).append(this._createSortElement().addClass("e-"+(y.direction||"ascending")+" "+rt));var w=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").eq(a),l=w.find(".e-filterset"),nt=w.find(".e-gridgroupbutton");l.addClass("e-sortfiltericon");this.model.groupSettings.showToggleButton&&(l.addClass("e-sortfiltergroupicon"),nt.addClass("e-togglesortgroupfilter"),this.model.enableRTL&&l.length&&w.find(".e-ascending,.e-descending").addClass("e-rtlsortfiltertoggle"));this.model.enableRTL?l.length&&nt.length||l.length||nt.length?l.length&&nt.length||w.find(".e-ascending,.e-descending").addClass("e-rtlgrouporfilter"):w.find(".e-ascending,.e-descending").addClass("e-rtlsortadjust"):this.model.enableRTL||l.length||nt.length||w.find(".e-ascending,.e-descending").addClass("e-sortadjust")}this.getHeaderTable().find(".e-fltrtempdiv").length>0&&(this.getHeaderTable().find(".e-filterbar").first().remove(),this._renderFiltering(),this._renderFilterBarTemplate());ut={};ut.requestType=t.Grid.Actions.Reorder;this._isReorder=!0;this.refreshTemplate();this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(ut),this._isAddNew=!1);this.setWidthToColumns();this.model.scrollSettings.frozenColumns||this.getHeaderContent().find("div").first().scrollLeft(vt);this.sendDataRenderingRequest(ut);this._isReorder=!1}},getPager:function(){return this._gridPager},getFooterTable:function(){return this._gridFooterTable},setGridFooterTable:function(n){this._gridFooterTable=n},getFooterContent:function(){return this._gridFooterContent},setGridFooterContent:function(n){this._gridFooterContent=n},getScrollObject:function(){return(this._scrollObject==null||t.isNullOrUndefined(this._scrollObject.model))&&(this._scrollObject=this.getContent().ejScroller("instance")),this._scrollObject},setGridPager:function(n){this._gridPager=n},getRowHeight:function(){var r=-1,i,f,u,o;if(this.getContentTable()!=null)i=this.getContentTable().find("tr:not(.e-virtualrow)"),f=i.length>2?1:0,i.length&&(u=i[f].getBoundingClientRect()),i.length>1&&(r=u&&u.height?u.height:i[f].offsetHeight);else if(!t.isNullOrUndefined(this.model.rowTemplate)&&!t.isNullOrUndefined(this._dataSource())&&this._dataSource().length>0){var e=document.createElement("div"),s=n.templates(this.model.rowTemplate),h=this._dataSource()[0];e.innerHTML=['<table class="e-template-table">',s.render(h),"<\/table>"].join("");n("body").append(e.firstChild);o=n("body").find(".e-template-table").find("tr")[0];r=o.offsetHeight;n("body").find(".e-template-table").remove()}return r==-1?32:r},getCurrentIndex:function(){return(this._currentPage()-1)*this.model.pageSettings.pageSize},getColumnByIndex:function(n){return n<this.model.columns.length?this.model.columns[n]:null},set_currentPageIndex:function(n){var i=this.model.pageSettings,u=this.model.filterSettings.filteredColumns.length==0?this._searchCount==null?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,r;return(i.totalPages==null&&(i.totalPages=Math.ceil(u/i.pageSize)),n>i.totalPages||n<1||n==this._currentPage())?!1:(t.isNullOrUndefined(this._prevPageNo)&&(this._prevPageNo=this._currentPage()),this._currentPage(n),this._currentPage()!=this._prevPageNo?(r={},r.requestType="paging",this.gotoPage(this._currentPage(),r),!0):!1)},set_currentVirtualIndex:function(n){var t,i;return n<1||n!=1&&n!=this._totalVirtualViews&&n==this._currentVirtualIndex&&this._checkCurrentVirtualView(this._virtualLoadedRows,n)?!1:(this._prevVirtualIndex=this._currentVirtualIndex,this._currentVirtualIndex=n,t=this._calculateCurrentViewPage(),t<=this.model.pageSettings.totalPages&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)?this._prevVirtualIndex<n&&n!=1?(i=this._isThumbScroll&&t!=1?t:t+1,!this._virtualPageRecords[i]&&i<=this.model.pageSettings.totalPages?this._setCurrentViewPage(i):this._renderVirtulViewContent(t)):this._prevVirtualIndex>n?(i=this._isThumbScroll?t:t-1,this._virtualPageRecords[i]&&!this._virtualLoadedRecords[n-1]&&(i=t-1),!this._virtualPageRecords[i]&&i>=1&&this._setCurrentViewPage(i)):this._renderVirtulViewContent(t):this._renderVirtulViewContent(t),!0)},_setCurrentViewPage:function(n){this._needPaging=!0;this._prevPageNo=this._currentPage();this.gotoPage(n)},_renderVirtulViewContent:function(){this._needPaging=!1;this._refreshVirtualView(this._currentVirtualIndex);this.element.ejWaitingPopup("hide")},_checkCurrentVirtualView:function(t,i){var f=this._virtualRowCount,u=i-1,r=i+1,e;if(t instanceof Array){if(t.length&&((u==0||r==this._totalVirtualViews+1)&&n.inArray(i,t)!=-1||n.inArray(u,t)!=-1&&n.inArray(i,t)!=-1&&n.inArray(r,t)!=-1))return!0}else if(e=r==this._totalVirtualViews?this._lastViewData:f,!this.initialRender&&i==1&&this._virtualLoadedRows[i]||i==this._totalVirtualViews&&t==this._virtualLoadedRows&&t[i]||u==0&&t[i]&&t[i].length==f||r==this._totalVirtualViews+1&&t[i]&&t[i].length==this._lastViewData||t[u]&&t[u].length==f&&t[i]&&t[i].length==f&&t[r]&&t[r].length==e)return!0;return!1},expandCollapse:function(r){var v,b,k,l,d,e,a,w,tt,o,s,h,u;if(r.prop("tagName")=="DIV"&&(r.parent().hasClass("e-recordplusexpand")||r.parent().hasClass("e-recordpluscollapse")||r.parent().hasClass("e-detailrowcollapse")||r.parent().hasClass("e-detailrowexpand"))&&(r=r.parent()),v=-1,this.model.allowGrouping&&(t.isOnWebForms||this.initialRender))for(b=r.attr("data-ej-mappingname"),fieldValue=r.attr("data-ej-mappingvalue"),r.parents(".e-tabletd").length&&(k=r.parents(".e-tabletd").parent("tr").prev("tr").find(".e-recordplusexpand").attr("data-ej-mappingvalue")),l=this.model._groupingCollapsed,u=0;u<l.length;u++)if(l[u].key==b&&l[u].value==fieldValue&&(l[u].parent==i||l[u].parent==k)){v=u;break}if(r.hasClass("e-recordplusexpand")||r.hasClass("e-recordpluscollapse")||r.hasClass("e-detailrowcollapse")||r.hasClass("e-detailrowexpand")){if(r.hasClass("e-recordplusexpand")&&this.model.groupSettings.groupedColumns.length)d=r.index(),e=r.closest("tr").next(),e.hide(),r.removeClass("e-recordplusexpand").addClass("e-recordpluscollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),(t.isOnWebForms||this.initialRender)&&v==-1&&this.model._groupingCollapsed.push({key:b,value:fieldValue,parent:k});else if(r.hasClass("e-recordpluscollapse")&&this.model.groupSettings.groupedColumns.length){var d=r.index(),e=r.closest("tr").next(),o=[],s=e;for(n(s[0].cells[d]).hasClass("e-indentcell")&&s.children(".e-indentcell").length==r.parent().children(".e-indentcell").length+1&&(s.show(),h=s.children(".e-recordplusexpand"),h!=null&&h.length>0&&o.push(h)),r.removeClass("e-recordpluscollapse").addClass("e-recordplusexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),u=0;u<o.length;u++)o[u].removeClass("e-recordplusexpand").addClass("e-recordpluscollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),this.expandCollapse(o[u]);(t.isOnWebForms||this.initialRender)&&v!=-1&&this.model._groupingCollapsed.splice(v,1)}else if(r.hasClass("e-detailrowexpand")){var d=r.index(),f=this,y=this.getIndexByRow(r.closest("tr")),e=r.closest("tr").next();e.hide(0,function(){var n={masterRow:r.closest("tr"),detailsRow:e,masterData:f._currentJsonData[y]},i=f._getForeignKeyData(n.masterData);t.isNullOrUndefined(i)||(n.foreignKeyData=i);f._trigger("detailsCollapse",n)});(f.model.childGrid!=null||f.model.detailsTemplate!=null)&&f.model.allowScrolling&&f._refreshScroller({requestType:"refresh"});r.removeClass("e-detailrowexpand").addClass("e-detailrowcollapse").find("div").addClass("e-gnextforward").removeClass("e-gdiagonalnext")}else if(r.hasClass("e-detailrowcollapse")){var d=r.index(),f=this,y=this.getIndexByRow(r.closest("tr")),g=r.closest("tr").next();if(g.hasClass("e-detailrow"))e=g;else{var c=t.buildTag("tr.e-detailrow","",{display:"none"},{}),it=t.buildTag("td.e-detailindentcell"),nt=t.buildTag("td.e-detailcell","",{},{colspan:this._visibleColumns.length}),p=t.buildTag("div"),rt=n(r.closest("tr")).parents(".e-grid").length;p.attr("id","child"+rt+"_grid"+y+Math.round(Math.random()*1e3));n(c).append(it);n(c).append(nt);a=this._currentJsonData[y];this.model.detailsTemplate&&(w=this.model.detailsTemplate,tt=!t.isNullOrUndefined(this.model.ngTemplateId)&&(w.startsWith("#")||w.startsWith(".")||typeof w=="object")?this.model.ngTemplateId+"griddetailstemplate":null,n(c).append(nt.append(this._renderEjTemplate(this.model.detailsTemplate,a,y,null,tt))));n(r.closest("tr")).after(c);this.model.childGrid&&(this.model.childGrid.parentDetails={parentID:this._id,parentPrimaryKeys:this.getPrimaryKeyFieldNames(),parentKeyField:this.model.childGrid.queryString,parentKeyFieldValue:a[this.model.childGrid.queryString],parentRowData:a},n(c).append(nt.append(p)));e=c}for(this._showGridLines(),o=[],s=e,n(s[0].cells[d]).hasClass("e-detailindentcell")&&(s.show(0,function(){var n={masterRow:r.closest("tr"),detailsRow:e,masterData:f._currentJsonData[y]},i=f._getForeignKeyData(n.masterData);t.isNullOrUndefined(i)||(n.foreignKeyData=i);f._trigger("detailsExpand",n)}),g.hasClass("e-detailrow")||(this._trigger("detailsDataBound",{detailsElement:c,data:a,rowData:a}),this._trigger("refresh")),this.model.childGrid&&!t.isNullOrUndefined(p)&&p.ejGrid(this.model.childGrid),(f.model.childGrid!=null||f.model.detailsTemplate!=null)&&f.model.allowScrolling&&f._refreshScroller({requestType:"refresh"}),h=s.children(".e-detailrowexpand"),h!=null&&h.length>0&&o.push(h)),r.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").addClass("e-gdiagonalnext").removeClass("e-gnextforward"),u=0;u<o.length;u++)o[u].removeClass("e-detailrowexpand").addClass("e-detailrowcollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),this.expandCollapse(o[u])}!this.model.allowScrolling||t.isNullOrUndefined(this._scrollObject&&this._scrollObject.model)||r.closest(".e-hscroll").length||this.getScrollObject().refresh();this.model.isResponsive&&this.windowonresize()}},_refreshGridPager:function(){var i,n,r;this.getPager()!=null&&(i=this.getPager().ejPager("model"),n={},n.currentPage=this._currentPage(),(t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount==0)&&this.model.currentViewData!=null&&this.model.currentViewData.length==0&&(t.isNullOrUndefined(this._prevPageNo)||this._prevPageNo)?(n.currentPage=0,this._prevPageNo=i.currentPage,this.model.pageSettings.currentPage=0):i.currentPage==0&&(t.isNullOrUndefined(this._prevPageNo)||this._prevPageNo)&&(n.currentPage=this._prevPageNo),r=this.model.editSettings.showAddNewRow&&this.model.groupSettings.groupedColumns.length==0?1:0,n.totalRecordsCount=this.model.filterSettings.filteredColumns.length==0?this._searchCount==null?this._gridRecordsCount-r:this._searchCount:this._filteredRecordsCount,n.totalRecordsCount==0&&n.currentPage!=0&&(n.currentPage=0,this.model.pageSettings.currentPage=0),t.util.isNullOrUndefined(n.currentPage)&&(n.currentPage=this._currentPage()),this.getPager().ejPager("option",n).ejPager("refreshPager"),this.model.pageSettings.totalPages=i.totalPages||null,this.model.pageSettings.totalRecordsCount=i.totalRecordsCount||null)},_showHeaderColumn:function(i,r){for(var u,o,a,s,h=this.getHeaderTable().find("thead"),c=h.find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),v=h.find(".e-filterbar").find(".e-filterbarcell"),e=this.getHeaderTable().find("colgroup").find("col"),l,f=0;f<i.length;f++)l=r?t.isNullOrUndefined(this.getColumnByField(i[f]))?this.getColumnByHeaderText(i[f],t.isNullOrUndefined(this.getColumnByField(i[f]))):this.getColumnByField(i[f]):this.getColumnByHeaderText(i[f]),u=n.inArray(l,this.model.columns),u=this.model.detailsTemplate!=null||this.model.childGrid?u+1:u,o=this.model.scrollSettings.frozenColumns,a=o!=0&&u>=o?c.eq(u).removeClass("e-hide").index()+o:c.eq(u).removeClass("e-hide").index(),v.eq(a).removeClass("e-hide"),e.length>this.model.columns.length&&this.model.groupSettings.groupedColumns.length&&(s=e.length-this.model.columns.length,e=e.slice(this.model.detailsTemplate||this.model.childGrid?s+1:s)),e.eq(u).css("display","");this.model.showStackedHeader&&this._refreshStackedHeader()},_hideHeaderColumn:function(i,r){for(var a,s=this.getHeaderTable().find("thead"),h=s.find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),v=s.find(".e-filterbar").find(".e-filterbarcell"),f=this.getHeaderTable().find("colgroup").find("col"),c,u=0;u<i.length;u++){c=r?t.isNullOrUndefined(this.getColumnByField(i[u]))?this.getColumnByHeaderText(i[u],t.isNullOrUndefined(this.getColumnByField(i[u]))):this.getColumnByField(i[u]):this.getColumnByHeaderText(i[u]);var e=n.inArray(c,this.model.columns),l=this.model.detailsTemplate!=null||this.model.childGrid?e+1:e,o=this.model.scrollSettings.frozenColumns;a=o!=0&&e>=o?h.eq(l).addClass("e-hide").index()+o:h.eq(l).addClass("e-hide").index();v.eq(a).addClass("e-hide");f.length>this.model.columns.length&&(f=f.slice(f.length-this.model.columns.length));f.eq(e).css("display","none")}this.model.showStackedHeader&&(this._refreshStackedHeader(),this._colgroupRefresh())},_refreshStackedHeader:function(){var i,r,u,t;if(this.model.showStackedHeader){for(i=this.model.stackedHeaderRows,t=0;t<i.length;t++)if(this.model.scrollSettings.frozenColumns!=0){var f=n(this.getHeaderContent().find(".e-frozenheaderdiv")),e=n(this.getHeaderContent().find(".e-movableheader")),o=this._createStackedRow(i[t],!0),s=this._createStackedRow(i[t],!1);n(f.find("tr.e-stackedHeaderRow")[t]).replaceWith(o);n(e.find("tr.e-stackedHeaderRow")[t]).replaceWith(s)}else r=this._createStackedRow(i[t],!1),this.getHeaderTable().find("tr.e-stackedHeaderRow")[t]?n(this.getHeaderTable().find("tr.e-stackedHeaderRow")[t]).replaceWith(r):r.insertBefore(this.getHeaderTable().find("tr.e-columnheader:last"));if(u={},u.requestType="refresh",this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0)for(t=0;t<this.model.groupSettings.groupedColumns.length;t++)this.getHeaderTable().find(".e-stackedHeaderRow").prepend(this._getGroupTopLeftCell());this.model.allowScrolling&&this._refreshScroller(u)}},_getStackedColumnByTarget:function(n){var r=(n.get(0)||{}).className,i=/e-row([0-9])-column([0-9])/.exec(r),u=i[1],f=i[2],e=[u,"stackedHeaderColumns",f].join(".");return t.getObject(e,this.model.stackedHeaderRows)},_checkSkipAction:function(n){switch(n.requestType){case t.Grid.Actions.Save:case t.Grid.Actions.Delete:return!0}return!1},_unboundTemplateRendering:function(t){return n("#"+t).html()},_processBindings:function(i){var r,f,e;if(this._requestType=i.requestType,this.model.query=this.commonQuery.clone(),!this._checkSkipAction(i)&&this._trigger("actionBegin",i))return!0;if(this.model.editSettings.editMode=="batch"&&i.requestType!="batchsave"&&i.requestType!="cancel"&&!this._confirmedValue&&this._bulkChangesAcquired()&&this.model.editSettings.showConfirmDialog)return this._confirmDialog.find(".e-content").html(this.localizedLabels.BatchSaveLostChanges),this._confirmDialog.ejDialog("open"),this._requestArgs=i,!1;if(!t.isNullOrUndefined(this.model.dataSource)&&i.requestType=="refresh"&&this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this._scrollValue=0,this._loadedJsonData=[],this._prevPage=this._currentPage()),this._ensureDataSource(i),this.model.scrollSettings.allowVirtualScrolling&&(i.requestType=="virtualscroll"?(this._loadedJsonData.push({pageIndex:this._prevPage,data:this._currentJsonData}),this._prevPage=this._currentPage()):this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=t.isNullOrUndefined(this._currentPageData)?this.model.currentViewData:this._currentPageData,this._currentPageData=null),i.requestType=="filtering"&&(this._loadedJsonData=[],this._prevPage=this._currentPage(),n("#"+this._id+"_externalEdit").remove()),(i.requestType==t.Grid.Actions.Delete||i.requestType==t.Grid.Actions.Add)&&this._refreshVirtualViewDetails()),this.model.scrollSettings.allowVirtualScrolling&&i.requestType=="filtering"&&this.model.filterSettings.filteredColumns.length>0&&this.getScrollObject().scrollY(0),this.model.enableRTL?this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"):this.element.hasClass("e-rtl")&&this.element.removeClass("e-rtl"),i.requestType==t.Grid.Actions.Delete&&this.model.groupSettings.groupedColumns.length==0&&(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").remove(),i.tr.remove()),this._editForm=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):n("#"+this._id+"EditForm"),!(this.model.editSettings.showAddNewRow&&i.requestType=="beginedit")&&this._editForm.length!=0)for(r=0;r<this._editForm.length;r++)n(this._editForm[r]).find("select.e-dropdownlist").ejDropDownList("destroy"),n(this._editForm[r]).find(".e-datepicker").ejDatePicker("destroy"),n(this._editForm[r]).find(".e-datetimepicker").ejDateTimePicker("destroy"),n(this._editForm[r]).find(".e-numerictextbox").ejNumericTextbox("destroy");if(!(this._dataSource()instanceof t.DataManager)||this._isRemoteSaveAdaptor||i.requestType==t.Grid.Actions.BeginEdit||i.requestType==t.Grid.Actions.Cancel||i.requestType==t.Grid.Actions.Add||this._dataSource().adaptor instanceof t.SqlDataSourceAdaptor&&(i.requestType==t.Grid.Actions.Save||i.requestType==t.Grid.Actions.Delete))this._isRelationalRendering(i)?this._setForeignKeyData(i):this.sendDataRenderingRequest(i);else{this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage&&this.virtualLoadedPages.indexOf((this.model.pageSettings.currentPage-2)*this.model.pageSettings.pageSize)==-1&&(f=t.pvt.filterQueries(this.model.query.queries,"onPage"),this.model.query.queries.splice(n.inArray(f[0],this.model.query.queries),1),this.model.query.page(this._currentPage()-1,this.model.pageSettings.pageSize),e=this._dataSource().executeQuery(this.model.query),this.model.query.queries.splice(n.inArray(f[0],this.model.query.queries),1),this.model.query.page(this._currentPage(),this.model.pageSettings.pageSize));this._virtualSelectedRows&&this._virtualSelectedRows.length>0&&this.model.query.addParams("virtualSelectRecords",this._virtualSelectedRows);var o=this._queryPromise=this._dataSource().executeQuery(this.model.query),s=this.element.ejWaitingPopup("instance"),u=this;this.element.ejWaitingPopup("show");u._dataSource().ready?u._dataSource().ready.done(function(){u._processDataRequest(u,i,o,e)}):u._processDataRequest(u,i,o,e)}},_processDataRequest:function(n,i,r,u){r.done(t.proxy(function(r){var e,f,o;if(!t.isNullOrUndefined(n.element)&&!(n._dataSource().adaptor instanceof t.SqlDataSourceAdaptor)){if(u&&!n._previousPageRendered)n._processLastPageData(n,i,r,u);else if(n._remoteLastPageRendered&&n.model.pageSettings.currentPage==n.model.pageSettings.totalPages-1&&!n.model.scrollSettings.enableVirtualization){for(e=n.model.pageSettings.pageSize-n._previousPageLength,f=0;f<e;f++)o=n.getRows()[n.getRows().length-(n.model.pageSettings.pageSize-f)],o.remove();n._tempPageRendered=!0;n.model.currentViewData=r.result;n._relationalColumns.length==0&&n.element.ejWaitingPopup("hide")}else n._identityKeys.length&&i.action=="add"&&this.adaptor instanceof t.ODataAdaptor&&n._processIdentityField(r.result,i),n.model.pageSettings.currentPage!=n.model.pageSettings.totalPages-1||n._remoteLastPageRendered||(n._previousPageRendered=!0),n.model.currentViewData=r.result==null?[]:r.result,n._$fkColumn&&n.model.filterSettings.filterType=="excel"&&n.model.filterSettings.filteredColumns.length>0&&(n._fkParentTblData=r.result),n._relationalColumns.length==0&&n.element.ejWaitingPopup("hide");n.model.allowScrolling&&n.model.scrollSettings.allowVirtualScrolling&&n.model.scrollSettings.enableVirtualization&&(i.requestType=="filtering"&&(n._gridRecordsCount=n._filteredRecordsCount=r.count,n._refreshVirtualViewDetails()),r.result.length?(n._isInitNextPage||n._isLastVirtualpage?(n._setInitialCurrentIndexRecords(r.result,n._currentPage()),n._isInitNextPage=n._isLastVirtualpage=!1):(n._gridRecordsCount=r.count,n._refreshVirtualViewDetails(),n._setVirtualLoadedRecords(r.result,n._currentPage())),n._isThumbScroll&&!n._checkCurrentVirtualView(n._virtualLoadedRecords,n._currentVirtualIndex)&&n._checkPrevNextViews(),n._remoteRefresh=!0):n.getContent().find(".e-virtualtop, .e-virtualbottom").remove());t.isNullOrUndefined(r.aggregates)||(n._remoteSummaryData=r.aggregates);(t.isNullOrUndefined(u)||t.isNullOrUndefined(n._previousPageRendered)||n._previousPageRendered)&&n._processData(r,i);t.isNullOrUndefined(n._unboundRow)||i.selectedRow==n._unboundRow||i.requestType!="save"||(n._unboundRow.find(".e-editbutton").trigger("click"),n._unboundRow=null)}}));r.fail(t.proxy(function(r){t.isNullOrUndefined(n.element)||(n.element.ejWaitingPopup("hide"),i.error=r.error,r=[],n.model.currentViewData=[],n._processData(r,i),t.isNullOrUndefined(n.getPager())||n.getPager().ejPager({currentPage:0,totalRecordsCount:0}),n._trigger("actionFailure",i))}))},_processIdentityField:function(i,r){var u=this._primaryKeys[0],e=t.distinct(i,u),o=t.distinct(this.model.currentViewData,u),s=n.grep(e,function(t){return n.inArray(t,o)==-1?!0:!1}),f=t.DataManager(i).executeLocal((new t.Query).where(u,"equal",s))[0];r.data=t.isNullOrUndefined(f)?r.data:f},_processLastPageData:function(n,i,r,u){u.done(t.proxy(function(u){n.element.ejWaitingPopup("hide");n.model.previousViewData=u.result;n.model.previousViewData&&n.model.previousViewData.length!=0&&(n._previousPageLength=r.result.length,n._currentPageData=r.result,t.merge(n.model.previousViewData,r.result),n.model.currentViewData=n.model.previousViewData,n._remoteLastPageRendered=!0);n._processData(r,i)}));u.fail(t.proxy(function(t){n.element.ejWaitingPopup("hide");i.error=t.error;t=[];n.model.previousViewData=[];n._processData(t,i);n._trigger("actionFailure",i)}))},_createUnboundElement:function(i,r){var o=document.createElement("div"),s,f,u,e;for(i.headerText=t.isNullOrUndefined(i.headerText)?t.isNullOrUndefined(i.field)?"":i.field:i.headerText,t.isNullOrUndefined(i.headerText)||(o.id=this._id+i.headerText.replace(/[^a-z0-9|s_]/gi,"")+r+"_UnboundTemplate"),s=t.buildTag("div.e-unboundcelldiv"),f=i.commands,u=0;u<f.length;u++)e=t.buildTag("button.e-flat e-"+f[u].type.replace(/\s+/g,"")+"button","",{},{type:"button"}),e.val(f[u].type),(f[u].type=="save"||f[u].type=="edit")&&e.addClass("e-btnsub"),(f[u].type=="cancel"||f[u].type=="delete")&&e.addClass("e-btncan"),s.append(e);return n("body").append(n(o).html(s).hide()),o},_refreshUnboundTemplate:function(i){var h,e,s,u,r,f,o;if(this._isUnboundColumn)for(h=0,e=0;e<this.model.columns.length;e++)if(this.model.columns[e].commands)for(s=i.find(".e-unboundcell.e-"+this.model.columns[e].headerText.replace(/[^a-z0-9|s_]/gi,"")+e).find(".e-unboundcelldiv"),u=n.extend(!0,[],this.model.columns[e].commands),r=0;r<u.length;r++){for(t.isNullOrUndefined(u[r].buttonOptions)&&(u[r].buttonOptions={}),u[r].buttonOptions.width=t.isNullOrUndefined(u[r].buttonOptions.width)?"52":u[r].buttonOptions.width,u[r].buttonOptions.height=t.isNullOrUndefined(u[r].buttonOptions.height)?"28":u[r].buttonOptions.height,u[r].buttonOptions.cssClass=t.isNullOrUndefined(u[r].buttonOptions.cssClass)?this.model.cssClass:u[r].buttonOptions.cssClass,u[r].buttonOptions.enableRTL=this.model.enableRTL,f=s.find(".e-"+u[r].type.replace(/\s+/g,"")+"button"),this.model.isEdit&&this._requestType!="cancel"||(i.closest(".e-editcell").length?u[r].type=="save"||u[r].type=="cancel"?f.show():(f.hasClass("e-deletebutton")&&f.hide(),f.hasClass("e-editbutton")&&f.hide()):u[r].type=="save"||u[r].type=="cancel"?f.hide():(f.hasClass("e-deletebutton")&&f.show(),f.hasClass("e-editbutton")&&f.show())),o=0;o<f.length;o++)n(f[o]).data("ejButton")&&n(f[o]).ejButton("destroy");f.ejButton(u[r].buttonOptions)}else continue},_gridTemplate:function(n,i,r){var u=n.model.columns[r];return n.model.scrollSettings.enableVirtualization&&(this.index+=n._currentVirtualRowIndex),(t.isNullOrUndefined(n.model.ngTemplateId)||!n._isAddNew)&&t.isNullOrUndefined(n._isGrouping)||(this.index=n._isAddNew?0:n._currentJsonData.indexOf(this.data)),n._renderEjTemplate("#"+i,this.data,this.index,u)},_createTemplateElement:function(i,r,u){var e=i["templateID"in i?"templateID":"template"],s=/^#([\w-]*)/.exec(e),r=r||n("body"),f,h=u?"Pager":i.headerText+n.inArray(i,this.model.columns)+"_Template",o={name:"SCRIPT",type:"text/x-template",text:e,id:(this._id+h).replace(/(\\|[^0-9A-z-_])/g,"")};return f=s&&s[1]?document.getElementById(s[1]):/^<script/i.test(e)?n(e).get(0):t.buildTag(o.name,o.text).get(0),f.id=f.id||o.id,f.type=f.type||o.type,r.append(u?f.innerHTML:f),f},_renderGridPager:function(){var r=n(document.createElement("div")),t={};return this.model.pageSettings.change=this._gPagerClickHandler,this.model.pageSettings.pageSizeSelected=this._gPageSize,this.model.pageSettings.totalRecordsCount=this._gridRecordsCount||null,this.model.pageSettings.enableRTL=this.model.enableRTL,this.model.pageSettings.locale=this.model.locale,this.model.pageSettings.enableQueryString=this.model.pageSettings.enableQueryString,this.model.allowFiltering&&this.model.filterSettings.filterType=="filterbar"&&(t.enableExternalMessage=this.model.filterSettings.showFilterBarStatus),n.extend(t,this.model.pageSettings),t.currentPage=this._currentPage(),t.masterObject=this,this.setGridPager(r),t.template!=i&&(t.template=null),r.ejPager(t),r.ejPager("refreshPager"),t=r.ejPager("model"),this.model.pageSettings.totalPages=t.totalPages||null,this._currentPage()!==t.currentPage&&this._currentPage(t.currentPage),this._renderPagerTemplate(r),r},_renderPagerTemplate:function(n,i){var r=this.model.pageSettings,f=n.find(".e-pagercontainer").not(".e-template").length==0,u;n.find(".e-pagercontainer.e-template").remove();(i||!r.enableTemplates)&&f&&n.ejPager("renderPager");r.enableTemplates&&(r.showDefaults||n.children().remove(),u=t.buildTag("div",null,null,{"class":"e-pagercontainer e-template",style:"width: auto;"}),this._createTemplateElement(this.model.pageSettings,u,!0),n.append(u))},_renderContext:function(){var p=this.model.contextMenuSettings.contextMenuItems,w,b,e=0,r=t.buildTag("ul","",{},{id:this._id+"_Context"}),i,s,d,g,h,v,nt,y,c;if(!this.model.contextMenuSettings.disableDefaultItems)for(e;e<p.length;e++)w=p[e],b=this._items(w,"contextMenuItem"),r.append(b);var k=this.model.contextMenuSettings.customContextMenuItems,u=this.model.contextMenuSettings.subContextMenu,f,l,o=0,a;for(o;o<k.length;o++){for(f=k[o],l=this._items(f,"customContextMenuItem"),i=0;i<u.length;i++)if(typeof f=="string"&&f==u[i].contextMenuItem||typeof f=="object"&&f.id==u[i].contextMenuItem){if(a=u[i].template,s=t.buildTag("ul","",{},{id:this._id+"_subMenuContext"+i}),t.isNullOrUndefined(a))for(h=0;h<u[i].subMenu.length;h++)d=u[i].subMenu[h],g=this._items(d,"subMenuItems"),s.append(g);else s=this._renderEjTemplate(a);l.append(s)}r.append(l)}r.find("li").length>0&&(this.element.append(r),v=this.element.parents("div.e-grid"),nt=t.Menu.prototype._showContextMenu,t.Menu.prototype._showContextMenu=function(t,i,r,u){n(this.model.contextMenuTarget).hasClass("e-grid")&&(++t,++i);nt.apply(this,[t,i,r,u])},n(r).ejMenu({menuType:t.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+this._id,click:n.proxy(this._clickevent,this),width:"auto",beforeOpen:n.proxy(this._menu,this)}),v.length&&(y=n("#"+v[0].id+"_Context"),c=y.ejMenu("model.excludeTarget"),y.ejMenu({excludeTarget:!t.isNullOrUndefined(c)&&c.length!=0?c.concat(",#"+this._id):"#"+this._id})),this._conmenu=r.data("ejMenu"))},_clickevent:function(i){var o=i.events.text,e=n(this._contexttarget.parentNode),r=n(this._contexttarget),u,f;if(r.hasClass("e-filterset")?r=r.siblings():(r.hasClass("e-icon")||r.hasClass("e-number"))&&(r=r.parent()),u=r.attr("data-ej-mappingname")||r.find(".e-headercelldiv").attr("data-ej-mappingname"),!this._trigger("contextClick",i))switch(o){case this.localizedLabels.AddRecord:this._startAdd();break;case this.localizedLabels.EditRecord:if(this.model.editSettings.editMode=="batch"){var s=n(this._contexttarget.parentNode).find(".e-rowcell").index(r),h=this._excludeDetailRows().index(e),c=this.model.columns[s].field;this.editCell(h,c)}else this.startEdit(e);break;case this.localizedLabels.DeleteRecord:this.model.editSettings.showDeleteConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open"):this.multiDeleteMode&&this.selectedRowsIndexes.length>1?this._multiRowDelete():this.deleteRow(e);break;case this.localizedLabels.Save:this.model.editSettings.editMode=="batch"?this.batchSave():this.endEdit();break;case this.localizedLabels.Cancel:this.cancelEdit();break;case this.localizedLabels.SortInDescendingOrder:f=t.sortOrder.Descending;this.sortColumn(u,f);break;case this.localizedLabels.SortInAscendingOrder:f=t.sortOrder.Ascending;this.sortColumn(u,f);break;case this.localizedLabels.Grouping:this.groupColumn(u);break;case this.localizedLabels.Ungrouping:this.ungroupColumn(u);break;case this.localizedLabels.NextPage:case this.localizedLabels.PreviousPage:case this.localizedLabels.LastPage:case this.localizedLabels.FirstPage:this._page(i)}},_menu:function(i){var r=this._conmenu.element,u,d,p,o,g,tt,s,e,k,c,l,v,y,a,f;if(this._contexttarget=i.target,u=n(i.target),o=n(this._contexttarget),this.model.allowSelection&&(o.hasClass("e-rowcell")||o.closest(".e-rowcell").length)&&!u.hasClass("e-selectionbackground")&&(g=o.hasClass("e-rowcell")?o.parent():o.closest(".e-rowcell").parent(),this.model.isEdit||this.selectRows(this.getIndexByRow(g),null,o)),(u.hasClass("e-ascending")||u.hasClass("e-descending"))&&!u.parent().hasClass("e-headercelldiv"))return!1;d=u.hasClass("e-filtericon")||u.hasClass("e-headercelldiv")?i.target.parentNode.getAttribute("aria-sort"):u.hasClass("e-headercell")?i.target.getAttribute("aria-sort"):u.parent().parent().attr("aria-sort");tt=i.target.className;s=n(r);p=u.hasClass("e-filterset")?u.siblings().attr("data-ej-mappingname"):u.hasClass("e-icon")||u.hasClass("e-number")?u.parent().attr("data-ej-mappingname"):u.hasClass("e-headercell")?u.find(".e-headercelldiv").attr("data-ej-mappingname"):u.attr("data-ej-mappingname");r.css("visibility","visible");var nt=u.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0,w=u.closest(".e-rowcell"),b=u.closest(".e-headercell"),it=w.index()!=-1?w.index():b.index()-this.model.groupSettings.groupedColumns.length,h=u.hasClass("e-rowcell")?u.index()-nt:it-nt;h=this.model.detailsTemplate!=null||this.model.childGrid!=null?h-1:h;e=this.model.columns[h];k={allowGrouping:".e-contextgrouping",allowSorting:".e-contextascending, .e-contextdescending","editSettings.allowAdding":".e-contextadd","editSettings.allowEditing":".e-contextedit","editSettings.allowDeleting":".e-contextdelete"};for(c in k)l=r.find(k[c]).parent(),t.getObject(c,this.model)==!1||t.getObject(c,e)===!1?l.css("display","none"):l.css("display")=="none"&&l.css("display","block");if(u.closest(".e-grid").attr("id")!==this._id||u.is("input")){r.css("visibility","hidden");return}if(this.getHeaderTable().find(u).length>0){if(!(b.length!=0&&b.children().hasClass("e-headercelldiv"))){r.css("visibility","hidden");return}f=n(r.find(".e-head"));r.find(".e-page").css("display","none");r.find(".e-content").css("display","none");r.find(".e-savcan").css("display","none");f.css("display","block");(t.isNullOrUndefined(e.field)||e.field=="")&&(f.css("display","none"),r.find(".e-customitem").length==0&&r.css("visibility","hidden"));a={columnIndex:h,headerText:e.headerText};n.extend(i,a)}else if(this.getContentTable().find(u).length>0){if(v=this.getIndexByRow(n(i.target.parentElement)),y=this.model.editSettings.editMode=="batch"?this.getDataByIndex(v):this.getSelectedRecords(),w.length==0){r.css("visibility","hidden");return}f=n(r.find(".e-content"));r.find(".e-head").css("display","none");r.find(".e-page").css("display","none");r.find(".e-savcan").css("display","none");f.css("display","block");(t.isNullOrUndefined(e.field)||e.field=="")&&this.model.editSettings.editMode=="batch"&&(f.css("display","none"),r.find(".e-customitem").length==0&&r.css("visibility","hidden"));a=this.model.editSettings.editMode=="batch"?{columnIndex:h,rowIndex:v,rowData:y,headerText:e.headerText,cellValue:t.getObject(t.isNullOrUndefined(e.field)?"":e.field,y)}:{columnIndex:h,rowIndex:v,rowData:y,headerText:e.headerText};n.extend(i,a)}else if(this.getPager().find(u).length>0||u.hasClass("e-pager"))f=n(r.find(".e-page")),r.find(".e-head").css("display","none"),r.find(".e-content").css("display","none"),r.find(".e-savcan").css("display","none"),f.css("display","block");else return f=n(r),r.css("visibility","hidden"),!1;switch(d){case"ascending":s.find(".ascending").parent().css("display","none");break;case"descending":s.find(".descending").parent().css("display","none")}u.hasClass("e-rowcell")&&this.model.editSettings.showAddNewRow&&(f=n(r.find(".e-savcan")),r.find(".e-contextadd").parent().css("display","none"),f.css("display","block"));this.model.editSettings.editMode=="batch"&&(this.batchChanges.changed.length||this.batchChanges.deleted.length||this.batchChanges.added.length)&&(f=n(r.find(".e-savcan")),r.find(".e-head").css("display","none"),r.find(".e-page").css("display","none"),f.css("display","block"));this.model.isEdit&&u.hasClass("e-rowcell")&&(!this.model.editSettings.showAddNewRow||n(".e-editedrow").length>0)&&(f=n(r.find(".e-savcan")),r.find(".e-head").css("display","none"),r.find(".e-content").css("display","none"),r.find(".e-page").css("display","none"),f.css("display","block"));this.model.pageSettings.totalPages==1&&f.hasClass("e-page")?r.find(".e-customitem").length==0?r.css("visibility","hidden"):r.find(".e-page").css("display","none"):this.model.pageSettings.currentPage==1?(s.find(".previous").parent().css("display","none"),s.find(".first").parent().css("display","none")):this.model.pageSettings.currentPage==this.model.pageSettings.totalPages&&(s.find(".last").parent().css("display","none"),s.find(".nextpage").parent().css("display","none"));this.model.groupSettings.groupedColumns.indexOf(p)!=-1?f.find(".group").parent().css("display","none"):this.model.groupSettings.groupedColumns.indexOf(p)==-1&&f.find(".ungroup").parent().css("display","none");this.model.contextOpen&&this._trigger("contextOpen",i)},_items:function(i,r){var f,u,e,o;return i==""?!1:(r=="contextMenuItem"&&(i.indexOf("Record")!=-1?(u=t.buildTag("li","",{},{"class":"e-content"}),u.css("display","none")):i.indexOf("Page")!=-1?(u=t.buildTag("li","",{},{"class":"e-page"}),i.indexOf("Next")!=-1?f=t.buildTag("div","",{},{"class":"nextpage"}):i.indexOf("Previous")!=-1?f=t.buildTag("div","",{},{"class":"previous"}):i.indexOf("Last")!=-1?f=t.buildTag("div","",{},{"class":"last"}):i.indexOf("First")!=-1&&(f=t.buildTag("div","",{},{"class":"first"})),u.css("display","none")):i=="Save"||i=="Cancel"?(u=t.buildTag("li","",{},{"class":"e-savcan"}),u.css("display","none")):(i.indexOf("Order")!=-1||i=="Grouping"||i=="Ungrouping")&&(u=t.buildTag("li","",{},{"class":"e-head"}),i.indexOf("Ascending")!=-1?f=t.buildTag("div","",{},{"class":"ascending"}):i.indexOf("Descending")!=-1?f=t.buildTag("div","",{},{"class":"descending"}):i=="Grouping"?f=t.buildTag("div","",{},{"class":"group"}):i=="Ungrouping"&&(f=t.buildTag("div","",{},{"class":"ungroup"})),u.css("display","none"))),t.isNullOrUndefined(u)&&(u=t.buildTag("li","",{},{"class":"e-customitem"}),u.css("display","block")),u.append(f),e=document.createElement("a"),o="",typeof i=="string"&&(o=i.indexOf("Ascending")!=-1?"ascending":i.indexOf("Descending")!=-1?"descending":i.split(" ")[0].toLowerCase(),e.innerHTML=t.isNullOrUndefined(this.localizedLabels[i.replace(/\s+/g,"")])?i:this.localizedLabels[i.replace(/\s+/g,"")]),typeof i=="object"&&(o=i.id=="Ascending"?"ascending":i.id=="Descending"?"descending":i.id.split(" ")[0].toLowerCase(),e.innerHTML=t.isNullOrUndefined(this.localizedLabels[i.text.replace(/\s+/g,"")])?i.text:this.localizedLabels[i.text.replace(/\s+/g,"")],u.attr("id",i.id)),n(e).append(t.buildTag("span","",{},{"class":"e-gridcontext e-icon e-context"+o})),u.append(e),u)},_page:function(n){var t;n.events.text==this.localizedLabels.NextPage?(t=this.model.pageSettings.currentPage,++t,this.gotoPage(t)):n.events.text==this.localizedLabels.PreviousPage?(t=this.model.pageSettings.currentPage,t>1?(--t,this.gotoPage(t)):this.gotoPage(t)):n.events.text==this.localizedLabels.LastPage?(t=this.model.pageSettings.totalPages,this.gotoPage(t)):this.gotoPage(1)},changePageSize:function(){var n={},r,i=this.getPager().ejPager("instance");this.model.pageSettings.pageSize=i._pageSize;this.getPager().ejPager({pageSize:i._pageSize});n.requestType=t.Grid.Actions.Refresh;r=this._processBindings(n)},gotoPage:function(n){var i,r,u;n&&(n!=this._currentPage()||this.model.scrollSettings.allowVirtualScrolling)&&(this.model.allowPaging||this.model.allowScrolling||this.model.scrollSettings.allowVirtualScrolling)&&(i={},i.previousPage=this._currentPage(),this._currentPage(n),i.endIndex=this._currentPage()*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:this._currentPage()*this.model.pageSettings.pageSize,i.startIndex=this._currentPage()*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=n,this.model.allowPaging&&(i.requestType=t.Grid.Actions.Paging),this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this._isVirtualRecordsLoaded=!1,u=this._refreshVirtualPagerInfo(),this._showPagerInformation(u),i.requestType=t.Grid.Actions.VirtualScroll),r=this._processBindings(i),r&&this._currentPage(i.previousPage),this._primaryKeyValues=[])},_gPagerClickHandler:function(n){if(this._prevPageNo!=n.currentPage)return this.model.masterObject.gotoPage(n.currentPage),!1},_gPageSize:function(n){this.model.masterObject.changePageSize(n.pageSize)},_processData:function(i,r){var u,f;if(this.initialRender)this._initDataProcessed=!0,this._initDataProcess(i,r);else{if(this._gridRecordsCount=i.count==0&&this.model.currentViewData.length?i.result.length:i.count,this.getPager()!=null&&(this.model.pageSettings.totalRecordsCount=this._gridRecordsCount),(r.requestType==t.Grid.Actions.Filtering||t.Grid.Actions.Save||this.model.filterSettings.filteredColumns.length>0&&r.requestType==t.Grid.Actions.Refresh)&&(this._filteredRecordsCount=i.count),this.model.allowScrolling&&this.model.scrollSettings.enableVirtualization)for(this.model.currentViewData=[],u=0;u<this._currentLoadedIndexes.length;u++)f=this._currentLoadedIndexes[u],n.merge(this.model.currentViewData,this._virtualLoadedRecords[f]||[]);this._setForeignKeyData(r);this._relationalColumns.length==0&&this.sendDataRenderingRequest(r)}},_frozenCell:function(t,i){var r=i,u=0,f=this.getRowByIndex(t);return i>=this.model.scrollSettings.frozenColumns&&(u=1,r=r-this.model.scrollSettings.frozenColumns),n(f.eq(u).find(".e-rowcell:eq("+r+")"))},_frozenColumnSelection:function(t,i,r){var e=i,f=0,o,u;if(r)for(u=i;u<r;u++){for(e=u,u>=this.model.scrollSettings.frozenColumns&&(f=1,e=u-this.model.scrollSettings.frozenColumns),o=0;o<t[f].length;o++)n(t[f][o].cells[e]).addClass("e-columnselection");n(this.getHeaderTable().find("th.e-headercell")[u]).addClass("e-columnselection");this.selectedColumnIndexes.push(u)}else for(i>=this.model.scrollSettings.frozenColumns&&(f=1,e=i-this.model.scrollSettings.frozenColumns),u=0;u<t[f].length;u++)n(t[f][u].cells[e]).addClass("e-columnselection")},_renderGridFooter:function(){var n;if(this.model.summaryRows.length>0){var s=t.DataManager(this.model.summaryRows).executeLocal(t.Query().where("showTotalSummary",t.FilterOperators.equal,!1)),i=t.buildTag("div.e-gridfooter"),r=t.buildTag("div");if(this.model.allowScrolling&&r.addClass("e-footercontent"),n=t.buildTag("table.e-gridsummary"),this.setGridFooterContent(i),this.model.scrollSettings.frozenColumns>0){var f=t.buildTag("div.e-frozenfooterdiv"),e=t.buildTag("div.e-movablefooter"),u=n.clone(),o=t.buildTag("div.e-movablefooterdiv");e.append(o);n.append(this.getHeaderTable().first().find("colgroup").clone());u.append(this.getHeaderTable().last().find("colgroup").clone());f.append(n);o.append(u);this.setGridFooterTable(n.add(u));this._createSummaryRows(this.getFooterTable());i.append(f.add(e));i.find(".e-frozenfooterdiv").outerWidth(this.getHeaderContent().find(".e-frozenheaderdiv").width()).end().find(".e-movablefooterdiv").outerWidth(this.getContent().find(".e-movablecontentdiv").width())}else n.append(this.getHeaderTable().find("colgroup").clone()),this.setGridFooterTable(n),this._createSummaryRows(this.getFooterTable()),r.append(n),i.html(r);return this.model.summaryRows.length==s.length?void 0:i}throw"summary row collection is missing";},_setSummaryAggregate:function(n){for(var t,f,u=this.model.summaryRows,i,r=0,e=u.length;r<e;r++)for(i=u[r].summaryColumns,t=0,f=i.length;t<f;t++)n.aggregate(i[t].summaryType,i[t].dataMember)},_createSummaryRows:function(i,r,u,f,e){var l=i.find("col");i.find("tbody").length>0&&i.find("tbody").remove();var s=t.buildTag("tbody"),o=this,h=s.clone(),c=this.model.summaryRows;!t.isNullOrUndefined(r)&&this._isCaptionSummary&&(c=this._captionSummary(e));n.each(c,function(c,a){var y,k,w,d,tt,p;if(a.showTotalSummary===!1&&t.isNullOrUndefined(r)||a.showGroupSummary===!1&&e&&!t.isNullOrUndefined(r))return!0;if(y=t.buildTag("tr.e-gridSummaryRows"),t.isNullOrUndefined(f&&f.level))for(p=0;p<o.model.groupSettings.groupedColumns.length;p++)y.prepend(t.buildTag("td").addClass("e-indentcell"));k=e?" e-gcsummary":"";(o.model.detailsTemplate!=null||o.model.childGrid!=null)&&(o.model.groupSettings.groupedColumns.length!=0?y.children("td.e-indentcell").last().after("<td class='e-summaryrow"+k+"'><\/td>"):y.prepend("<td class='e-summaryrow'><\/td>"));var v=o.getHeaderTable().find("td").slice(0,o.model.columns.length).clone().addClass("e-summaryrow"+k+""),w=0;if(t.isNullOrUndefined(a.titleColumn)||(w=o.getColumnIndexByField(a.titleColumn),w==-1&&(w=o.getColumnIndexByHeaderText(a.titleColumn))),w!=-1&&(v=o._assignTitleColumn(w,a.title,v,0)),o._hideSummaryColumn(v,l),o.model.scrollSettings.frozenColumns>0)d=y.clone(),s.append(y.append(v.slice(0,o.model.scrollSettings.frozenColumns))),h.append(d.append(v.slice(o.model.scrollSettings.frozenColumns)));else if(o._isCaptionSummary&&!e||t.isNullOrUndefined(f&&f.level))s.append(y.append(v));else{var g=o.model.groupSettings.groupedColumns.length-f.level+1,b=i.clone().addClass("e-groupsummary"),nt={};for(nt.data={items:f},y.prepend("<td class='e-summaryrow"+k+"' colspan="+o._colSpanAdjust(null,null,nt)+" style = 'padding:0;' ><\/td>"),n(y[0].cells).filter(".e-summaryrow").html(b.append(t.buildTag("tr",v))),tt=b.find("col").length-(o.model.columns.length+g),(o.model.detailsTemplate!=null||o.model.childGrid!=null)&&y.find("tr").prepend("<td class='e-summaryrow'><\/td>"),p=0;p<tt;p++)b.find("col").first().remove();for(p=0;p<g;p++)n(b[0].rows).prepend("<td class='e-indentcell'><\/td>"),n(b.find("col")[p]).addClass("e-summary");s.append(y)}n.each(a.summaryColumns,function(i,f){var s=f.summaryType!="custom"?u?u[f.dataMember+" - "+f.summaryType]:o._remoteSummaryData[f.dataMember+" - "+f.summaryType]:o.getSummaryValues(f,r);var h=f.prefix?f.prefix:"",e=o.getColumnIndexByField(f.displayColumn),a=f.suffix?f.suffix:"";if(o.model.allowScrolling&&n(v[e]).addClass("e-scroller"),n(v[e]).html()!=""&&h==""&&(h=n(v[e]).html()),t.isNullOrUndefined(f.template))e!=-1&&n(v[e]).html(h+(f.format?o.formatting(f.format,s,o.model.locale):s)+a).css("text-align",o.model.columns[e].textAlign);else{var c={summaryValue:f.format?o.formatting(f.format,s,o.model.locale):s,summaryColumn:f},l=c.summaryColumn.template,y=!t.isNullOrUndefined(o.model.ngTemplateId)&&(l.startsWith("#")||l.startsWith(".")||typeof l=="object")?o.model.ngTemplateId+"gridsummarytemplate":null;o._summaryContextIndex=o._summaryContextIndex+1;n(v[e]).html(o._renderEjTemplate(c.summaryColumn.template,c,o._summaryContextIndex,null,y)).css("text-align",o.model.columns[e].textAlign);n(v[e]).addClass("e-summarytemplate")}})});this.model.scrollSettings.frozenColumns>0?(i.first().append(s),i.last().append(h)):i.append(s)},_assignTitleColumn:function(n,t,i,r){for(var f,u=n;u<this.model.columns.length;u++)if(f=this.model.columns[u],r==0&&f.visible!=!1){i.eq(u).html(t);break}return i},getSummaryValues:function(i,r){var f,u,o,s,h,e;u=t.isNullOrUndefined(r)?this.model.filterSettings.filteredColumns.length>0?this._filteredRecords:this._dataSource():r;u instanceof t.DataManager?(o=u,u=u.dataSource.json):o=t.DataManager(u);switch(i.summaryType){case t.Grid.SummaryType.Maximum:s=t.max(u,i.dataMember);f=t.getObject(i.dataMember,s);break;case t.Grid.SummaryType.Minimum:s=t.min(u,i.dataMember);f=t.getObject(i.dataMember,s);break;case t.Grid.SummaryType.Average:f=t.avg(u,i.dataMember);break;case t.Grid.SummaryType.Sum:f=t.sum(u,i.dataMember);break;case t.Grid.SummaryType.Count:f=u.length;break;case t.Grid.SummaryType.TrueCount:h=t.Predicate(i.dataMember,"equal",!0);f=o.executeLocal(t.Query().where(h)).length;break;case t.Grid.SummaryType.FalseCount:h=t.Predicate(i.dataMember,"equal",!1);f=o.executeLocal(t.Query().where(h)).length;break;case t.Grid.SummaryType.Custom:e=i.customSummaryValue;e&&(typeof e=="string"&&(e=t.util.getObject(e,window)),n.isFunction(e)&&(f=e.call(this,i,u)))}return f},_hideCaptionSummaryColumn:function(){var f=this.getHeaderTable().find(".e-headercelldiv[data-ej-mappingname]").first(),e=this.getContentTable().find(".e-groupcaption").clone(),i=this.getContentTable().find(".e-groupcaption").parent(),o=this.model.columns.length-1,r,n,t,u;if(this._isCaptionSummary&&(this.getContentTable().find(".e-summaryrow:not(.e-gcsummary)").remove(),this.getFooterTable().find("tbody td").slice(-o).removeClass("e-groupcaptionsummary").addClass("e-summaryrow"),this.getFooterTable()!=null&&this.getContentTable().find(".e-recordplusexpand").parent().children(".e-indentcell").remove(),!this.model.groupSettings.showGroupedColumn&&this.getContentTable().find(".e-groupcaptionsummary").not(".e-hide").length&&(r=+this.getContentTable().find(".e-recordtable:first").parents("tbody:first").find(".e-groupcaption").attr("colspan"),this._hiddenColumnsField.length==this.model.columns.length-1&&f.parent().hasClass("e-hide")||!r)))for(n=0;n<e.length;n++)i.eq(n).children().not(".e-hide,.e-recordplusexpand").filter("td.e-groupcaptionsummary:first").addClass("e-hide"),t=i.eq(n).find(".e-groupcaption"),u=parseInt(t.attr("colspan")),t.attr("colspan",++u);this.getContentTable().find(".e-recordtable").find(".e-indentcell").remove()},_hideSummaryColumn:function(t,i){var r,u,f;if(i.length>this.model.columns.length&&(i=i.slice(i.length-this.model.columns.length)),!this.model.groupSettings.showGroupedColumn&&this.model.showSummary)for(r=0;r<this.model.columns.length;r++)for(u=0;u<this.model.groupSettings.groupedColumns.length||u<this._hiddenColumnsField.length;u++)if(f=this.getHeaderTable().find(".e-headercelldiv:not(.e-emptyCell)"),f.eq(r).parent().hasClass("e-hide")){i.eq(r).css("display","none");n(t[r]).addClass("e-hide");break}else i.eq(r).css("display")=="none"&&i.eq(r).css("display","");else for(r=0;r<this.model.columns.length;r++)this.model.columns[r].visible?i.eq(r).css("display")=="none"&&i.eq(r).css("display",""):(i.eq(r).css("display","none"),n(t[r]).addClass("e-hide"))},_initScrolling:function(){var r=[],f=[],e=0,i,u;for(this.model.scrollSettings.enableVirtualization&&(this.model.scrollSettings.allowVirtualScrolling=!0),i=0;i<this.model.columns.length;i++)this.model.columns[i].visible===!1&&i<this.model.scrollSettings.frozenColumns&&e++,this.model.columns[i].isFrozen===!0?r.push(this.model.columns[i]):f.push(this.model.columns[i]);if(r.length>0&&(u=this.model.scrollSettings.frozenColumns,this.model.columns=n.merge(n.merge([],r),f),this.model.scrollSettings.frozenColumns=r.length,r.length!=u&&u!=0&&(this.model.scrollSettings.frozenColumns=u)),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&(this.model.allowGrouping||this.model.rowTemplate!=null||this.model.detailsTemplate!=null||this.model.childGrid!=null||this.model.scrollSettings.allowVirtualScrolling||this.model.editSettings.editMode=="batch")){this._renderAlertDialog();this._alertDialog.find(".e-content").text(this._getLocalizedLabels().FrozenNotSupportedException);this._alertDialog.ejDialog("open");return}this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this.model.scrollSettings.enableVirtualization?(this._vRowHeight=Math.floor(this.getRowHeight()+1),this._virtualRowCount=Math.round(this.model.scrollSettings.height/this._vRowHeight)+1,this.model.pageSettings.pageSize=this.model.pageSettings.pageSize<=this._virtualRowCount*5?this._virtualRowCount*5:this.model.pageSettings.pageSize):(this.model.pageSettings.pageSize=this.model.pageSettings.pageSize==12?Math.round(this.model.scrollSettings.height/32)+1:this.model.pageSettings.pageSize,this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize)));(this.model.width||this.model.height)&&(this.model.allowScrolling=!0,this.model.width&&(this.model.scrollSettings.width=this.model.width),this.model.height&&(this.model.scrollSettings.height=this.model.height));this._originalScrollWidth=t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)?this.model.scrollSettings.width:this.model.scrollSettings.previousStateWidth},_checkScrollActions:function(n){return!this.model.scrollSettings.allowVirtualScrolling&&(n==t.Grid.Actions.Sorting||n==t.Grid.Actions.Reorder)||n==t.Grid.Actions.Grouping||n==t.Grid.Actions.Ungrouping||n==t.Grid.Actions.Add||n==t.Grid.Actions.Cancel||n==t.Grid.Actions.Save||n==t.Grid.Actions.BatchSave||n==t.Grid.Actions.Delete||n==t.Grid.Actions.Filtering||n==t.Grid.Actions.Paging||n==t.Grid.Actions.Refresh||n==t.Grid.Actions.Search?!0:!1},_frozenAlign:function(){var r=this.getContent().first(),n=!t.isIOSWebView()&&this.getBrowserDetails(),i;i=this.model.enableRTL?"margin-right":"margin-left";r.find(".e-movablecontent").css(i,n&&n.browser==="safari"?"auto":r.find(".e-frozencontentdiv").width()+"px");this.getHeaderContent().find(".e-movableheader").removeAttr("style").css(i,n&&n.browser==="safari"?"auto":this.getHeaderContent().find(".e-frozenheaderdiv").width()+"px")},_refreshScroller:function(i){var r=this.getContent().first(),o,f,s,u,h,e,a,v,l,w;if(!t.isNullOrUndefined(r.data("ejScroller"))){if(this.model.scrollSettings.frozenColumns>0){if(this.model.scrollSettings.targetPane=this._gridRecordsCount||this._isAddNew?".e-movablecontent":null,this.getScrollObject().option({targetPane:this.model.scrollSettings.targetPane}),this._isFrozenColumnVisible())if(this._visibleColumns.length<=this.model.scrollSettings.frozenColumns){for(o=!1,f=this.model.scrollSettings.frozenColumns;f<this.model.columns.length;f++)if(this._visibleColumns.indexOf(this.model.columns[f].headerText)!=-1){o=!0;break}o||(r.find(".e-frozencontentdiv").removeAttr("style"),this.getHeaderContent().find(".e-frozenheaderdiv").removeAttr("style"),r.find(".e-movablecontent").width(0),r.find(".e-movablecontentdiv").width(0),r.find(".e-movablecontent").height(0),r.find(".e-movablecontentdiv").height(0))}else this._frozenAlign(),r.find(".e-movablecontent").scrollLeft(this.getHeaderContent().find(".e-movableheader").scrollLeft()),!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.getScrollObject()._vScrollbar.value()>this.getScrollObject()._vScrollbar.model.maximum&&(u=this.getScrollObject()._vScrollbar.model.maximum);else r.find(".e-movablecontentdiv").removeAttr("style"),this.getHeaderContent().find(".e-movableheaderdiv").removeAttr("style"),r.find(".e-frozencontent").width(0),r.find(".e-frozencontentdiv").width(0),r.find(".e-frozencontent").height(0),r.find("e-frozencontentdiv").height(0);this.refreshScrollerEvent()}if(this.model.scrollSettings.frozenRows>0){for(this._initFrozenRows(),f=0;f<this.getRows().length;f++)n(this.getRows()[f]).filter(":hidden").css("display","table-row");!this.initialRender&&t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.element.height()>this.model.scrollSettings.height&&this.getContent().attr("tabindex","0").ejScroller(this.model.scrollSettings);u=this.getScrollObject().model.scrollTop;s=this.getScrollObject().model.scrollLeft;!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&u>this.getScrollObject()._vScrollbar.model.maximum&&(u=this.getScrollObject()._vScrollbar.model.maximum);(i.requestType=="cancel"||i.requestType=="save")&&u>this._editFormHeight&&this.model.editSettings.editMode.indexOf("inlineform")!=-1&&(u=u-this._editFormHeight);i.requestType==t.Grid.Actions.Add&&this.getScrollObject().scrollY(0,!0);t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)}if((i.requestType=="beginedit"||i.requestType=="save")&&!this.model.editSettings.editMode=="inlineformtemplate"&&!this.model.editSettings.editMode=="inlineform"&&(u=this.getScrollObject().model.scrollTop,this.getScrollObject().scrollY(0,!0)),!t.isNullOrUndefined(this.model.dataSource)&&(i.requestType=="refresh"||i.requestType=="searching")&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&(this._isLocalData||this._virtualDataRefresh)&&this._gridRecordsCount>0?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(1),this._currentVirtualIndex==1&&this.getScrollObject().scrollY(0)),this.model.scrollSettings.frozenColumns>0&&this.rowHeightRefresh(),this.getScrollObject().refresh(),r.ejScroller("model.enableRTL",this.model.enableRTL),this.model.isResponsive&&(i.requestType=="searching"||i.requestType=="filtering")&&(h=this.getScrollObject(),e=h.isHScroll()?this.getContentTable().height()+h.model.buttonSize:this.getContentTable().height(),e=typeof this.model.scrollSettings.height=="string"||e>this.model.scrollSettings.height?this.model.scrollSettings.height:e,a=typeof this.model.scrollSettings.width=="string"?this.element.width():this.model.scrollSettings.width,v=a,this.getContent().ejScroller({height:e,width:v})),this.getScrollObject().isVScroll()&&!this.getScrollObject().model.autoHide?(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width()),this.getHeaderContent().find(".e-headercontent").hasClass("e-hscrollcss")||this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss"),this.model.showSummary&&this.getScrollObject().isHScroll()&&!t.isNullOrUndefined(this.getFooterContent())?this.getFooterContent().find("div table").first().width(this.getContentTable().width()+this.model.scrollSettings.scrollerSize):this.getScrollObject().isHScroll()||t.isNullOrUndefined(this.getFooterContent())||this.getFooterContent().find("div table").first().width(this.getFooterContent().find("div").width())):this._showHideScroller(),this.model.scrollSettings.frozenColumns||!this.model.allowPaging||this.getScrollObject().isVScroll()||this.getScrollObject().isHScroll()||this.getContentTable().width()==this.getContent().width()||(this.getContentTable().width(this.getContent().width()),this.getHeaderTable().width(this.getContentTable().width()),t.isNullOrUndefined(this.getFooterTable())||this.getFooterTable().width(this.getContentTable().width())),this._getRowHeights(),u&&!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&i.requestType!=t.Grid.Actions.Add&&this.model.editSettings.editMode!="inlineformtemplate"&&this.model.editSettings.editMode!="inlineform"&&(this._currentTopFrozenRow=0,u>this.getScrollObject()._vScrollbar.model.maximum&&(u=this.getScrollObject()._vScrollbar.model.maximum),this.getScrollObject()._vScrollbar.scroll(u)),i.requestType=="beginedit"&&!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&(this.model.editSettings.editMode=="inlineformtemplate"||this.model.editSettings.editMode=="inlineform")){var y=n("#"+this._id+"EditForm").parents("tr.e-editedrow")[0].offsetTop+n("#"+this._id+"EditForm").parents("tr.e-editedrow")[0].offsetHeight,b=this.getContent().find(".e-content"),k=b.height(),c=this.getScrollObject().scrollTop(),p=c+k;Math.round(y)>Math.round(p)?(l=this.getScrollObject()._vScrollbar.model.value+(y-p),this.getScrollObject()._vScrollbar.scroll(l),this.model.scrollSettings.scrollTop=l):(this.getScrollObject()._vScrollbar.scroll(c),this.model.scrollSettings.scrollTop=c)}s&&this.model.scrollSettings.frozenColumns>0&&i.requestType==t.Grid.Actions.BeginEdit&&this.getScrollObject()._hScrollbar.scroll(s);i.requestType=="virtualscroll"&&(w=this.getScrollObject().model.scrollTop+this.getScrollObject().model.height-this.getScrollObject().model.height*.3,this.getScrollObject().scrollY(w,!0))}},_isFrozenColumnVisible:function(){for(var n=0;n<this.model.scrollSettings.frozenColumns;n++)if(this.model.columns[n].visible)return!0;return!1},_frozenPaneRefresh:function(){this.getContent().find(".e-frozencontentdiv").css("display","none");this.getHeaderContent().find(".e-frozenheaderdiv").css("display","none");this.getHeaderContent().find(".e-movableheader")[0].style["margin-left"]="";this.getContent().find(".e-movablecontent")[0].style["margin-left"]="";var i=t.isNullOrUndefined(this._scrollObject._vScrollbar)?0:this._scrollObject._vScrollbar["e-vscroll"].width(),n=this.model.scrollSettings.width-i-1;this.model.scrollSettings.width>this.getContent().find(".e-movablecontentdiv").width()&&(this.getContent().find(".e-movablecontentdiv").width(n),this.getHeaderContent().find(".e-movableheaderdiv").width(n),t.isNullOrUndefined(this.getFooterContent())||this.getFooterContent().find(".e-movablefooterdiv").width(n));this._scrollObject.option("scrollLeft",0)},_renderScroller:function(){var o,r,e,u,i,l,f,s,h,c;if(this.model.scrollSettings||(this.model.scrollSettings={}),this.model.enablePersistence&&(t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)||!this.model.scrollSettings.previousStateWidth)&&this.model.isResponsive&&(this.model.scrollSettings.previousStateWidth=this.model.scrollSettings.width),typeof this._originalScrollWidth!="string"||this.model.isResponsive||(this.element.css("width","auto"),r=this.element.width(),(this.model.scrollSettings.width=="auto"||this._originalScrollWidth=="auto")&&(this._originalScrollWidth="100%"),this.model.scrollSettings.width=r*(parseFloat(this._originalScrollWidth)/100)),typeof this.model.scrollSettings.height!="string"||this.model.isResponsive||(o=this.element.height(),this.model.scrollSettings.height=="auto"&&(this.model.scrollSettings.height="100%"),this.model.scrollSettings.height=o*(parseFloat(this.model.scrollSettings.height)/100)),(this.model.scrollSettings.width||this.model.width)&&!this._mediaQuery&&(r=this.model.scrollSettings.width||this.model.width,typeof r=="string"?this.element.css("width",this.model.scrollSettings.width||this.model.width):this.element.width(this.model.scrollSettings.width||this.model.width)),e=this.getContent().attr("tabindex","0"),l=this.getRows(),this.model.scrollSettings.frozenColumns>0){for(f=0;f<this.getRows().length;f++)n(this.getRows()[f]).filter(":hidden").css("display","table-row");if(s=this.getContent().find(".e-frozencontentdiv").width()+20,s>this.model.scrollSettings.width){this.getContent().remove();this.getHeaderTable().eq(1).remove();this._alertDialog.find(".e-content").text(this.localizedLabels.FrozenColumnsViewAlert);this._alertDialog.ejDialog("open");return}u=this.getContent().find(".e-frozencontentdiv").width();i=this.model.enableRTL?"margin-right":"margin-left";this.getContent().find(".e-movablecontent").css(i,u+"px");this.getHeaderContent().find(".e-movableheader").css(i,u+"px");t.isNullOrUndefined(this.getFooterContent())||this.getFooterContent().find(".e-movablefooter").css(i,u+"px");this.model.scrollSettings.targetPane=".e-movablecontent"}this._initFrozenRows();this.model.scrollSettings.autoHide&&(this.model.scrollSettings.show=n.proxy(this._showHideScroller,this));!this.model.scrollSettings.allowVirtualScrolling&&this.model.currentIndex>0&&!this.model.scrollSettings.scrollTop&&(h=this.model.currentIndex*this.getRowHeight(),this.model.scrollSettings.scrollTop=h);e.ejScroller(this.model.scrollSettings);this.model.allowRowDragAndDrop&&this.model.allowScrolling&&t.gridFeatures.dragAndDrop&&e.ejScroller({thumbStart:function(){return!1}});this.model.rowTemplate==null||t.isIOSWebView()||this.getBrowserDetails().browser!="msie"&&this.getBrowserDetails().browser!="safari"||this.getScrollObject().refresh();this.model.scrollSettings.frozenColumns>0&&this.model.scrollSettings.frozenRows==0&&this.getScrollObject()._vScrollbar&&this.getScrollObject()._hScrollbar&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=this.getScrollObject()._hScrollbar._scrollData.skipChange=!0);this.model.scrollSettings.autoHide||this._showHideScroller();!t.isIOSWebView()&&this.getBrowserDetails().browser=="safari"&&this.model.scrollSettings.frozenColumns>0&&this.getHeaderContent().find(".e-movableheader").add(this.getContent().find(".e-movablecontent")).css(i,"auto");this.refreshScrollerEvent();this.model.scrollSettings.frozenColumns>0&&!this._isFrozenColumnVisible()&&this._frozenPaneRefresh();this.model.scrollSettings.allowVirtualScrolling&&(c=this._refreshVirtualPagerInfo(),this._showPagerInformation(c),this.refreshScrollerEvent())},_checkScroller:function(n,t){var i=n.scrollLeft>0?n.scrollLeft:Math.abs(n.scrollLeft),r;n.source=="thumb"&&(t.content()[0].scrollWidth-i==t.content()[0].clientWidth||i==0)&&(this.model.enableRTL&&(r=i==0?n.scrollData.scrollable:0,n.scrollData.sTop=n.model.scrollLeft=r,t.content().scrollLeft(r)),t._hScrollbar.refresh())},_showHideScroller:function(){this.getScrollObject().isVScroll()?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this.model.showSummary&&!t.isNullOrUndefined(this.getFooterContent())&&this.getFooterContent().find("div").first().addClass("e-footercontent"),this.model.scrollSettings.autoHide||this.getHeaderContent().addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss");this.model.scrollSettings.frozenColumns!=0||this._mediaQuery||(!this.element.find(".e-gridheader").hasClass("e-scrollcss")&&(this.model.filterSettings.filteredColumns.length||this._hiddenColumns.length&&!this.model.minWidth)?(this.getHeaderTable().removeAttr("style"),this.getContentTable().removeAttr("style"),this.model.showSummary&&!t.isNullOrUndefined(this.getFooterTable())&&this.getFooterTable().removeAttr("style")):(this.getHeaderContent().find("div table").first().width(this.getContentTable().width()),this.getContent().find("div table").first().width(this.getContentTable().width()),this.model.showSummary&&!t.isNullOrUndefined(this.getFooterContent())&&this.getScrollObject().isVScroll()&&this.getScrollObject().isHScroll()&&(this.model.minWidth&&this.model.isResponsive?this.getFooterContent().find("div table").first().width(this.getContentTable().width()+this.model.scrollSettings.scrollerSize):this.getFooterContent().find("div table").first().width(this.getContentTable().width()),this.getFooterContent().find("div").width(this.getHeaderContent().width()+this.model.scrollSettings.scrollerSize)),this.getHeaderTable().width(this.getContentTable().width())));this._isHscrollcss()},_isHscrollcss:function(){var n=this.getContent().data("ejScroller"),t=n&&(n.isHScroll()||n.isVScroll())?"addClass":"removeClass";this.getHeaderContent().find(".e-headercontent")[t]("e-hscrollcss")},_initFrozenRows:function(){var i=this.getRows(),r;this.model.currentViewData&&this.model.currentViewData.length!=0&&this.model.scrollSettings.frozenRows>0&&i!=null&&(this.getContent().find(".e-frozeny").removeClass("e-frozeny").end().find(".e-frozenrow").removeClass("e-frozenrow"),!t.isNullOrUndefined(i[0][this.model.scrollSettings.frozenRows-1])&&!t.isNullOrUndefined(i[1][this.model.scrollSettings.frozenRows-1])&&this.model.scrollSettings.frozenColumns>0?n(i[0][this.model.scrollSettings.frozenRows-1].cells).add(i[1][this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"):t.isNullOrUndefined(this.getRowByIndex(this.model.scrollSettings.frozenRows-1)[0])||n(i[this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"),this.getContent().height()>this.model.scrollSettings.height&&(r=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),this.initialRender||t.isNullOrUndefined(r)||!t.isNullOrUndefined(r._vScrollbar)||this._getRowHeights(),this.model.scrollSettings.height=this._rowHeightCollection[Math.floor(this.model.scrollSettings.height/this._rowHeightCollection[1])]+18))},refreshScrollerEvent:function(){var i=this,r=this.getContent().attr("tabindex","0"),u=r.data("ejScroller");t.isNullOrUndefined(u)||u.model.scroll!=null||r.ejScroller({scroll:function(r){var l,u,o,s,h,e,a,c;if(t.isNullOrUndefined(r.scrollData)||r.scrollData.scrollVal!="scrollLeft"||(i.model.scrollSettings.targetPane||!t.isNullOrUndefined(i.getHeaderContent())&&i.getHeaderContent().find(".e-movableheader").length?i.getHeaderContent().find(".e-movableheader").scrollLeft(r.scrollLeft):i.getHeaderContent().find("div").first().scrollLeft(r.scrollLeft),i.model.scrollSettings.frozenRows>0&&i.model.editSettings.editMode.indexOf("inlineform")!=-1&&i.model.isEdit&&(l=r.scrollTop,i.getContent().find(".e-content").scrollTop(0),this.scrollY(this.model.scrollTop+l,!0))),i.model.scrollSettings.frozenRows>0&&i.getRows()!=null)if(r.scrollData!=null&&r.scrollData.dimension!="width"){r.cancel=!0;var y=i.getRows(),v=i._getTopRow(r.scrollTop),f=v.imaginaryIndex;if(f>i._currentTopFrozenRow?i._showHideRow(i.model.scrollSettings.frozenRows,f,"hide",r.scrollTop):f<i._currentTopFrozenRow&&i._showHideRow(f,i._currentTopFrozenRow+1,"show",r.scrollTop),u=i.getContentTable().last().find("tr"),o=parseInt(u.last().find("td:first").css("border-top-width"))*2+1,r.scrollTop==this._vScrollbar.model.maximum&&u.last()[0].offsetTop+u.last().height()-o>i.element.find(".e-content").height()){for(s=u.last().prev()[0].offsetTop+u.last().prev().height(),h=1,e=u.length-2;s-o>i.element.find(".e-content").height();e++){s=u[e].offsetTop+u.eq(e).height();h++;break}i._showHideRow(i.model.scrollSettings.frozenRows,f+h,"hide",r.scrollTop)}r.model.scrollTop=r.scrollTop}else t.isNullOrUndefined(this._vScrollbar)||t.isNullOrUndefined(this._vScrollbar._scrollData)||(this._vScrollbar._scrollData.skipChange=!0);i.model.scrollSettings.allowVirtualScrolling&&(i.model.scrollSettings.enableVirtualization&&r.scrollData!=null&&r.scrollData.handler!="e-hhandle"?(r.reachedEnd=r.scrollData.scrollable-r.scrollTop==0,r.source=="thumb"&&(a=t._getObjectKeys(i._virtualLoadedRows),c=(i._currentVirtualIndex+2).toString(),i.model.scrollSettings.virtualScrollMode=="continuous"&&n.inArray(c,a)==-1&&c<i._totalVirtualViews?i._isContinuous=!0:(r.model.scrollTop=r.scrollTop,i._isContinuous=!1,r.cancel=!0)),(r.source=="button"||r.source=="key"||r.source=="wheel")&&(n("#"+i._id+"_WaitingPopup").is(":visible")?r.cancel=!0:(i._isThumbScroll=!1,i._virtualViewScroll(r)),i.model.scrollSettings.virtualScrollMode=="continuous"&&r.reachedEnd&&this.refresh()),i.model.currentIndex=r.scrollTop==0?r.scrollTop:Math.floor(r.scrollTop/i._vRowHeight)):(!t.isNullOrUndefined(r.scrollData)&&r.scrollData.handler=="e-hhandle"&&i.model.allowFiltering&&(i.model.filterSettings.filterType=="menu"||i._isExcelFilter)&&(i._isExcelFilter?i._excelFilter.closeXFDialog():i._closeFilterDlg()),r.reachedEnd=this.content()[0].scrollHeight-r.scrollTop==this.content()[0].clientHeight,(r.source=="button"||r.source=="key"||r.source=="wheel")&&i.model!=null&&i._virtualScroll(r),r.source=="wheel"&&r.scrollTop!=i._scrollValue&&(r.scrollTop=i._scrollValue),i._checkScroller(r,this)));i.model.scrollSettings.frozenRows||i.model.scrollSettings.frozenColumns||(t.isNullOrUndefined(r.scrollData)||r.scrollData.handler!="e-hhandle"?(i._scrollValue=r.scrollTop,i.model.currentIndex=r.scrollTop==0?r.scrollTop:Math.floor(r.scrollTop/i._vRowHeight)):(i.model.allowFiltering&&(i.model.filterSettings.filterType=="menu"||i._isExcelFilter)&&(i._isExcelFilter?i._excelFilter.closeXFDialog():i._closeFilterDlg()),i._checkScroller(r,this)))},thumbEnd:function(t){if(i.model.scrollSettings.allowVirtualScrolling){if(i.model.scrollSettings.enableVirtualization&&i.model.scrollSettings.virtualScrollMode=="continuous"?t.reachedEnd=t.scrollData.scrollable-t.model.scrollTop==0:t.originalEvent&&!n(t.originalEvent.target).hasClass("e-rowcell")&&(t.reachedEnd=this.content()[0].scrollHeight-t.scrollData.sTop==this.content()[0].clientHeight),t.scrollData.handler=="e-hhandle")return;i.model!=null&&t.originalEvent&&(i.model.scrollSettings.enableVirtualization?(i._isThumbScroll=!0,i._virtualViewScroll(t),i.model.scrollSettings.virtualScrollMode=="continuous"&&t.reachedEnd&&this.refresh()):i._virtualScroll(t))}},scrollEnd:function(t){if(i.model.scrollSettings.allowVirtualScrolling){if(t.scrollData.type=="mousewheel"||t.scrollData.model!=null&&t.scrollData.model.orientation=="horizontal")return;if(i.model.scrollSettings.enableVirtualization&&!i._isContinuous){var r=i._calculateCurrentViewPage(t.model),u=n.inArray(r,i._virtualLoadedPages)!=-1;u?(i._isThumbScroll=!0,i._virtualViewScroll(t),i.element.ejWaitingPopup("hide"),i._totalVirtualViews<=i._maxViews*3&&(this._content[0].scrollTop=t.scrollData.scrollTop)):t.cancel=!0}}}});this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").scroll(t.proxy(function(t){var i=n(t.currentTarget);this.model.scrollSettings.targetPane?(this.getContent().find(".e-movablecontent").scrollLeft(i.scrollLeft()),this.model.showSummary&&this.getFooterContent().find(".e-movablefooter").scrollLeft(i.scrollLeft())):(this.model.showSummary&&this.getFooterContent().find("div").first().scrollLeft(i.scrollLeft()),this.getContent().find(".e-content").first().scrollLeft(i.scrollLeft()))},this))},clearFiltering:function(n){var i,t;if(this.model.filterSettings.filterType=="filterbar"&&(this.OldfilterValue=null),n){if(this._clearFilter(n),this.model.filterSettings.filterType!="filterbar")for(t=0;t<this.filterColumnCollection.length;t++)this.filterColumnCollection[t].field==n&&this.filterColumnCollection.splice(t,1)}else{for(i=this.model.filterSettings.filteredColumns,t=0;t<i.length;)this._clearFilter(i[t].field);this.filterColumnCollection=[];(this.model.filterSettings.filterType=="menu"||this.model.filterSettings.filterType=="excel")&&this.getHeaderTable().find(".e-filtericon").removeClass("e-filteredicon e-filternone")}},_clearFilter:function(i){var u=this.model.filterSettings.filterType,f,r;t.isNullOrUndefined(this.getColumnByField(i).filterType)||(u=this.getColumnByField(i).filterType);switch(u){case t.Grid.FilterType.FilterBar:n.inArray(this.getColumnByField(i),this.filterColumnCollection)!=-1&&(this.getHeaderTable().find("#"+i+"_filterBarcell").val(""),this._currentFilterbarValue="",f=n.inArray(i,this.filterColumnCollection),this._currentFilterColumn=this.getColumnByField(i),this._showFilterMsg());break;case t.Grid.FilterType.Menu:r="#"+this._id+"_"+this._$colType+"Dlg";this._$colType=="boolean"?n(r).find(".e-value .e-js").ejCheckBox("model.checked",!1):this._$colType=="number"?n(r).find(".e-numerictextbox").ejNumericTextbox("model.value",""):n(r).find(".e-value input").val("");n(r).find(".e-value1 input").val("");(this._excelFilterRendered||this._isExcelFilter)&&delete this._excelFilter._predicates[0][i];this._$curFieldName=i;break;case t.Grid.FilterType.Excel:this._excelFilter._predicates.length&&delete this._excelFilter._predicates[0][i];this._excelFilter.closeXFDialog();this._$curFieldName=i}this.filterColumn(i,"","","or")},clearSearching:function(){this.element.find(".e-gridtoolbar #"+this._id+"_search").val("");this.search("");n.extend(this.model.searchSettings,this.defaults.searchSettings)},_renderByFrozenDesign:function(){var r=n(document.createElement("div")),u=this._getMetaColGroup().find("col"),i={};i.colgroup1=r.append(t.buildTag("colgroup").append(u.splice(0,this.model.scrollSettings.frozenColumns))).html();i.colgroup2=r.html(t.buildTag("colgroup").append(u)).html();this.getContent().find("div").first().get(0).innerHTML=n.render[this._id+"_FrozenTemplate"]({datas:this.model.currentViewData},i);this.setGridContentTable(this.getContent().find(".e-table").attr("data-role","grid"))},addFrozenTemplate:function(){var i="<div class='e-frozencontentdiv'><table class='e-table'>{{:~colgroup1}}<tbody>{{for datas tmpl='"+this._id+"_JSONFrozenTemplate'/}}<\/tbody><\/table><\/div><div class='e-movablecontent'><div class='e-movablecontentdiv'><table class='e-table'>{{:~colgroup2}}<tbody>{{for datas tmpl='"+this._id+"_JSONTemplate'/}}<\/tbody><\/table><\/div><\/div>",t={};t[this._id+"_FrozenTemplate"]=i;n.templates(t)},_getTopRow:function(n){var i=this.model.scrollSettings.frozenRows,t=0;if(n>10)for(t=0;t<this._rowHeightCollection.length;t++)if(this._rowHeightCollection[t]>n){i=this.model.scrollSettings.frozenRows+t-1;break}return{imaginaryIndex:i,actualIndex:t}},_showHideRow:function(t,i,r,u){var f=this.getRows();this.model.scrollSettings.frozenColumns>0?n(f[0]).slice(t,i).add(n(f[1]).slice(t,i).toArray())[r]():n(f).slice(t,i)[r]();this._currentTopFrozenRow=r=="show"?t:i;this.getScrollObject()._changevHandlerPosition(u)},_renderAlertDialog:function(){var r=t.buildTag("div.e-content",this._getLocalizedLabels().frozenColumnsMessage),i=t.buildTag("span.e-buttons","<input type='button' class='e-flat' id="+this._id+"ConfirmDialogOK value='"+this._getDeprecatedLocalizedLabel("OKButton")+"'/>");this._alertDialog=t.buildTag("div#"+this._id+"AlertDialog");this._alertDialog.append(r).append(i);this.element.append(this._alertDialog);i.find("input").ejButton({cssClass:this.model.cssClass,showRoundedCorner:!0,size:"mini",click:n.proxy(function(){this._alertDialog.ejDialog("close")},this)});this._renderFDialog(this._id+"AlertDialog");this._alertDialog.ejDialog({width:"auto",enableModal:!0})},_renderFDialog:function(t){n("#"+t).ejDialog({showOnInit:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260,enableResize:!1,allowKeyboardNavigation:!1,content:"#"+this._id})},_virtualScroll:function(t){var r,e;if(this.selectedRowsIndexes.length==this._gridRecordsCount&&this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked","checked"),t!=null){var f=0,o=this.model.filterSettings.filteredColumns.length==0?this._searchCount==null?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,u=this.model.pageSettings,s=this.getContentTable()[0].tBodies[0],h=n(s).find("tr.e-virtualrow");if(u.totalPages=Math.ceil(o/u.pageSize),t.scrollTop!==i&&(t.model.scrollTop=t.scrollTop),t.reachedEnd!=i&&(t.model.reachedEnd=t.reachedEnd),r=this._calculateCurrenPage(h,this.getContentTable(),t.model),r>u.totalPages&&(r=u.totalPages),u.currentPage!=r&&n.inArray((r-1)*u.pageSize,this.virtualLoadedPages)==-1&&this.element.find(".gridform:visible").length==0&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded)u.currentPage=r;else{if(n.inArray((r-1)*u.pageSize,this.virtualLoadedPages)==-1){if(this.model.scrollSettings.virtualScrollMode=="continuous"&&!t.reachedEnd)return;r==u.totalPages&&n.inArray((r-2)*u.pageSize,this.virtualLoadedPages)==-1&&(f++,this.set_currentPageIndex(r));f==1&&(this._lastRow=!0);this.set_currentPageIndex(r)}u.currentPage=r}e=this._refreshVirtualPagerInfo();this._showPagerInformation(e)}},_virtualViewScroll:function(t){if(t!=null){t.scrollTop!==i&&(t.model.scrollTop=t.scrollTop);t.reachedEnd!=i&&(t.model.reachedEnd=t.reachedEnd);var r=this._calculateCurrentVirtualIndex(t);this.model.isEdit&&this.cancelEdit();n.inArray(r,this._currentLoadedIndexes)==-1&&(this._isVirtualRecordsLoaded=!1);this._isVirtualRecordsLoaded||this.set_currentVirtualIndex(r)}},_createPagerStatusBar:function(){var n=this.element.find(".e-pagerstatusbar"),i,r;n.length&&n.remove();i=t.buildTag("div.e-pagermsgdiv");this.$pagerStatusBarDiv=t.buildTag("div.e-pagerstatusbar").append(i);this.model.scrollSettings.allowVirtualScrolling&&this.model.allowFiltering&&this.model.filterSettings.filterType=="filterbar"&&(r=t.buildTag("div.e-pagerfiltermsg").css("display","none"),this.$pagerStatusBarDiv.append(r));this.$pagerStatusBarDiv.appendTo(this.element);this.$pagerStatusBarDiv.css("display","none")},_refreshVirtualContent:function(t){var e=this.getRowHeight(),o=this.model.filterSettings.filteredColumns.length==0?this._searchCount==null?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,s,h,r,i,f,c,l,a,u;t!=null&&(this._currentPage(t),s=this._refreshVirtualPagerInfo(),this._showPagerInformation(s));h=this.model.currentViewData;this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[t]=h);r=0;this.model.scrollSettings.enableVirtualization&&(r=1);i=r==1?this.getCurrentIndex()+1:this.getCurrentIndex();f=this.getContentTable()[0].tBodies[0];i>1&&(c=document.createElement("tr"),n(c).addClass("e-virtualrow").css("height",e*i).prependTo(f));i+this.model.pageSettings.pageSize<=o&&this.getContentTable().find("tr").last().hasClass("e-virtualrow")!=!0&&this.model.scrollSettings.frozenColumns==0&&(l=document.createElement("tr"),a=this.model.scrollSettings.virtualScrollMode=="normal"?e*(o-(i+this.model.pageSettings.pageSize)):1,n(l).addClass("e-virtualrow").css("height",a).appendTo(n(f)));this.virtualLoadedPages=[];this.orderedVirtualLoadedPage=[];this.virtualLoadedPages.push(i>=r?i:r);this.orderedVirtualLoadedPage.push(i>=r?i:r);u=n(f).find("tr:not(.e-virtualrow)").attr("name",i>=r?i:r)[0];u&&u.previousSibling&&(n(u.previousSibling).hasClass("e-virtualrow")||u.previousSibling.offsetTop>i*this.getContent().height())&&(this.getContent().children("div").first().scrollTop(this.getContent().find(".content").scrollTop()-(this.getContent().find(".content").scrollTop()-u.offsetTop)),this._isVirtualRecordsLoaded=!0)},isIntermediate:function(){return this.model.currentIndex<this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1)?!0:!1},_refreshVirtualView:function(t,i,r){var e,o,f,a,h,l,s,u;if(this._singleView)this._singleView=!1,this._addLastRow(),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),s=this._currentVirtualIndex.toString(32),n(this._gridRows).attr("name",s),this._virtualLoadedRows[this._currentVirtualIndex]=this._gridRows,this._eventBindings();else{if(e=this._virtualRowCount,t)t>this._totalVirtualViews&&(t=1,o=!0),i=="selectRows"&&(o=!0),this._currentVirtualIndex=t,this._virtualLoadedRecords[t]?(a=this.getScrollObject(),f=Math.ceil((a.scrollTop()+this.model.scrollSettings.height)/this._vRowHeight/this.model.pageSettings.pageSize)):(this._virtualDataRefresh||this._currentVirtualIndex==this._totalVirtualViews||(o=!0),f=Math.ceil(t*this._virtualRowCount/this.model.pageSettings.pageSize)),this._refreshVirtualViewScroller(o,i,r),f>this.model.pageSettings.totalPages&&(f=this.model.pageSettings.totalPages),f<=0&&(f=1),n.inArray(f,this._virtualLoadedPages)==-1?this.gotoPage(f):(this._currentPage(f),this._needPaging=this._checkCurrentVirtualView(this._virtualLoadedRecords,t)?!1:!0,this._getVirtualLoadedRecords(this.model.query),this._replacingVirtualContent());else{if(this._refreshVirtualViewDetails(),h=n(this.getContentTable()[0].rows),this._setVirtualTopBottom(),this.initialRender){for(u=0;u<this._currentLoadedIndexes.length;u++){var c=this._currentLoadedIndexes[u],y=(u+1)*e,v=u*e;n(h[y-1]).addClass("e-virtualview"+c);s=c.toString(32);l=h.slice(v,v+e).attr("name",s).detach();this._virtualLoadedRows[c]=l;l.appendTo(this.getContentTable())}this._currentVirtualIndex>1&&this._refreshVirtualViewScroller()}this._eventBindings()}n.inArray(this._currentPage(),this._virtualLoadedPages)==-1&&this._virtualLoadedPages.push(this._currentPage())}if(!t&&(this.model.queryCellInfo||this.model.rowDataBound))for(u=0;u<this._currentLoadedIndexes.length;u++)n.inArray(this._currentLoadedIndexes[u],this._queryCellView)==-1&&this._queryCellView.push(this._currentLoadedIndexes[u]);this._isThumbScroll=!1;this._virtualDataRefresh=!1},_refreshVirtualViewData:function(){this._virtualLoadedRecords={};this._virtualLoadedRows={};this._virtualLoadedPages=[];this._virtualPageRecords={};this._queryCellView=[];this.model.pageSettings.totalPages!=null&&this._currentPage()>this.model.pageSettings.totalPages&&(this._currentPage(1),this._currentVirtualIndex=1)},setCurrentPageData:function(n){this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._refreshVirtualViewDetails(),this._setVirtualLoadedRecords(n,this._currentPage()),this._refreshVirtualView(this._currentVirtualIndex))},_refreshVirtualViewScroller:function(n,t,i){var r,u;(this.initialRender&&!this.model.scrollSettings.scrollTop||n)&&(u=this._vRowHeight,r=this.model.currentIndex*this._vRowHeight);r=t=="selectRows"?i*this._vRowHeight:this._scrollObject.model.scrollTop;this.getContent().ejScroller("model.scrollTop",r);this._scrollValue=r},_calculateCurrentViewPage:function(n){n||(n=this._scrollObject.model);var i=this.model.pageSettings.pageSize,t=Math.ceil((n.scrollTop+this.model.scrollSettings.height)/this._vRowHeight/i);return this.model.pageSettings.totalPages==null&&(this.model.pageSettings.totalPages=Math.ceil(this._getVirtualTotalRecord()/i)),t>this.model.pageSettings.totalPages&&(t=this.model.pageSettings.totalPages),this.model.pageSettings.currentPage=t,t},_calculateCurrentVirtualIndex:function(t){var h=t.model,y=this._getVirtualTotalRecord(),i,c,l,u=[],e,o,a,r=h.scrollTop,p=r+this.model.scrollSettings.height,s,v,f;if(i=(r+this._vRowHeight)/this._vRowHeight/this._virtualRowCount,i=Math.ceil(i),r>=this._scrollValue&&h.virtualScrollMode=="continuous"&&h.reachedEnd&&(i=i+1),i>this._totalVirtualViews&&(i=this._totalVirtualViews),i<=0&&(i=1),n.inArray(i,this._currentLoadedIndexes)!==-1&&this._virtualLoadedRows[i]&&r!=t.scrollData.scrollable){for(s=this.getContentTable()[0].rows,a=s.length,v=this.getContent().find(".e-virtualtop").height(),l=r>=this._scrollValue,f=0;f<a;f++){if(e=s[f],o=e.offsetHeight+e.offsetTop+v,o>r+this.model.scrollSettings.height){u.length===0&&f!==0&&(u=[s[e.offsetTop<=r+this.model.scrollSettings.height?f:f-1]]);break}if(o>=r&&o<=r+this.model.scrollSettings.height&&(u.push(e),l===!1&&u.length>1))break}c=n(r>=this._scrollValue?u[u.length-1]:u[0]);c.length&&(i=parseInt(c.attr("name"),32))}return this._scrollValue=r,i},_calculateCurrenPage:function(t,i,r){var o=this.model.pageSettings.pageSize,u,a=this,v,w,f=[],s,h,b,k,y,g=this.getRowHeight(),c,e,l,p,d;if(u=(r.scrollTop+this.model.scrollSettings.height)/g/o,k=this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1),y=this.getContentTable().find("tr[name="+k+"]").eq(0),u=y.length&&y.offset().top>0&&u>=1&&r.scrollTop<this._scrollValue&&this.virtualLoadedPages.indexOf(Math.ceil(u-1)*o)!==-1?Math.floor(u):Math.ceil(u),r.scrollTop>=this._scrollValue&&r.virtualScrollMode=="continuous"&&r.reachedEnd&&(u=this.virtualLoadedPages[this.virtualLoadedPages.length-1]/o+2),n.inArray((u-1)*o,this.virtualLoadedPages)!==-1){for(c=this.getContentTable().children("tbody").children("tr"),b=c.length,w=r.scrollTop>=this._scrollValue,e=0;e<b;e++){if(s=c[e],h=s.offsetHeight+s.offsetTop,h>r.scrollTop+a.model.scrollSettings.height){f.length===0&&e!==0&&(f=[c[s.offsetTop<=r.scrollTop+a.model.scrollSettings.height?e:e-1]]);break}if(h>=r.scrollTop&&h<=r.scrollTop+a.model.scrollSettings.height&&(f.push(s),w===!1&&f.length>1))break}v=n(r.scrollTop>=this._scrollValue?f[f.length-1]:f[0]);v.hasClass("e-virtualrow")?f.length===1&&u++:u=parseInt(v.attr("name"),10)/o+1}for(this._scrollValue=r.scrollTop,l=0;l<t.length;l++)if(p=t[l],p.offsetTop+p.offsetHeight>=r.scrollTop)return d=this._calculatePrevPage(t,i,r),this._prevPageNo=d,u==0&&(u=1),u>this.model.pageSettings.totalPages?this.model.pageSettings.totalPages:u;return u},_calculatePrevPage:function(t,i,r){for(var f,e,u=0;u<t.length;u++)if(f=t[u],f.offsetTop+f.offsetHeight>=r.scrollTop&&(e=n(f).prevAll("tr[name]")[0],e!=null))return Math.ceil(parseInt(n(e).attr("name"),10)/this.model.pageSettings.pageSize)+1;return-1},_refreshVirtualPagerInfo:function(){var n={};return n.pageSize=this.model.pageSettings.pageSize,n.totalRecordsCount=this.model.filterSettings.filteredColumns.length==0?this._searchCount==null?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,n.totalRecordsCount==0&&this._currentPage(0),n.currentPage=this._currentPage(),n.totalPages=Math.ceil(n.totalRecordsCount/n.pageSize),n},_showPagerInformation:function(t){var i=(t.currentPage-1)*t.pageSize;n(this.$pagerStatusBarDiv).find("div:first").html(String.format(this.localizedLabels.PagerInfo,t.currentPage,t.totalPages,t.totalRecordsCount),i,i+t.pageSize);n(this.$pagerStatusBarDiv).css("display","block")},_headerCellMerge:function(n){n.headerCellMerge=function(n,i){var u=this.columnHeaders,r;for(u.find("th").eq(n).attr("colspan",i),r=1;r<i;r++)t.isNullOrUndefined(u[0].children[n+r])||(u[0].children[n+r].className+=" e-hide")}},_cellMerging:function(i){i.colMerge=function(n){if(this.cell.className.indexOf("e-colmerge")==-1){this.cell.className+=" e-colmerge";this.model.columns.length-this.cell.cellIndex<n&&(n=this.model.columns.length-this.cell.cellIndex);this.cell.colSpan=n;for(var i=1;i<n;i++)t.isNullOrUndefined(this.cell.parentElement.children[this.cell.cellIndex+i])||(this.cell.parentElement.children[this.cell.cellIndex+i].className+=" e-hide")}};i.rowMerge=function(i){var r,u;if(this.cell.className.indexOf("e-rowmerge")==-1)for(this.cell.className+=" e-rowmerge",r=this.cell.parentNode.parentNode,r.rows.length-this.cell.parentElement.rowIndex<i&&(i=r.rows.length-this.cell.parentElement.rowIndex),this.cell.rowSpan=i,u=0;u<i-1;u++)if(t.isNullOrUndefined(r.children[this.cell.parentElement.rowIndex+u].nextSibling))break;else(!n(".e-grid").children().is(".e-dialog")||n(".e-grid").find(".e-dialog").attr("style").indexOf("display: none")!=-1||this.model.allowFiltering)&&(r.children[this.cell.parentElement.rowIndex+u].nextSibling.children[this.cell.cellIndex].className+=" e-merged e-hide")};i.merge=function(r,u){var o,s,e,f;if(r>1&&u>1){if(this.cell.className.indexOf("e-colmerge")==-1){if(this.cell.className+=" e-colmerge",o=this.cell.parentNode.parentNode,o.rows.length-this.cell.parentElement.rowIndex<u&&(u=o.rows.length-this.cell.parentElement.rowIndex),!n(".e-grid").children().is(".e-dialog")||n(".e-grid").find(".e-dialog").attr("style").indexOf("display: none")!=-1||this.model.allowFiltering)for(s=0;s<u;s++)if(t.isNullOrUndefined(o.children[this.cell.parentElement.rowIndex+s]))break;else for(e=o.children[this.cell.parentElement.rowIndex+s].children[this.cell.cellIndex],this.model.columns.length-e.cellIndex<r&&(r=this.model.columns.length-e.cellIndex),e.colSpan=r,f=1;f<r;f++)t.isNullOrUndefined(e.parentElement.children[this.cell.cellIndex+f])||(e.parentElement.children[this.cell.cellIndex+f].className+=" e-hide");else for(this.cell.colSpan=r,f=1;f<r;f++)t.isNullOrUndefined(this.cell.nextSibling)||(this.cell.parentElement.children[this.cell.cellIndex+f].className+=" e-hide");i.rowMerge(u)}}else r>1&&i.colMerge(r),u>1&&i.rowMerge(u)}},_replacingContent:function(){var dt=document.createElement("div"),e=0,f,y,st,g,nt,p,s,b,ct,tt,lt,it,at,vt,ut,r,c,bt,ft,ii,ri,et,kt;this.model.scrollSettings.enableVirtualization&&(e=1);var u=e==1?this.getCurrentIndex()+1:this.getCurrentIndex(),h=this.getContentTable()[0],ot=n(h).find("colgroup").first(),v=this.getRowHeight();ot.replaceWith(this._getMetaColGroup());(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&ot.prepend(this._getIndentCol());f=h.tBodies[0];y=this.model.currentViewData;t.isNullOrUndefined(this._currentPageData)?this._virtualLoadedRecords[this._currentPage()]=y:(this._virtualLoadedRecords[this._currentPage()]=this._currentPageData,this._currentPageData=null);var gt=n("<tbody><\/tbody>").append(n.render[this._id+"_JSONTemplate"](y)),d=this,o=gt.children("tr");if(this._allowcolumnSelection&&this.selectedColumnIndexes.length>0)for(c=0;c<this.selectedColumnIndexes.length;c++)st=this.selectedColumnIndexes[c]+1,o.find("td:nth-of-type("+st+")").addClass("e-columnselection");this.virtualLoadedPages.push(u>=e?u:e);this._lastRow?(g=this._virtualLoadedRecords[this._currentPage()].length,o.slice(-g).attr("name",u),nt=o.slice(0,o.length-g),nt.length&&(p=(this._currentPage()-2)*this.model.pageSettings.pageSize,nt.attr("name",p),this.virtualLoadedPages[this.virtualLoadedPages.length-1]=p>=e?p:e,this.virtualLoadedPages.push(u>=e?u:e))):n(o).attr("name",u);var l=t.dataUtil.mergeSort(t.distinct(this.virtualLoadedPages)),w=t.dataUtil.min(l),ht=t.dataUtil.max(l);for(n(f).children(".e-virtualrow").remove(),r=0;r<l.length;r++)s=l[r],b=l[r-1],(s!=this.orderedVirtualLoadedPage[r]||this.orderedVirtualLoadedPage[r]==i)&&(b!=i?o.insertAfter(n(f).children("[name="+b+"]:last")):o.insertBefore(n(f).children("[name="+this.orderedVirtualLoadedPage[r]+"]:first")),this.orderedVirtualLoadedPage=l),s!=0&&(ct=s==w?w:b,tt=s-ct-d.model.pageSettings.pageSize,tt>0&&(lt=document.createElement("tr"),n(lt).addClass("e-virtualrow").css("height",v*tt).insertBefore(n(f).children("[name="+s+"]:first")))),s==ht&&(it=d._gridRecordsCount-ht-d.model.pageSettings.pageSize,it>0&&(at=document.createElement("tr"),n(at).addClass("e-virtualrow").css("height",v*it).appendTo(f)));w>0&&(vt=document.createElement("tr"),n(vt).addClass("e-virtualrow").css("height",v*w).prependTo(f));var yt=this.getContent(),k=n(f).children("tr[name="+u+"]")[0],rt=k.previousSibling,pt=yt.height(),wt=k.offsetTop;if(this._virtaulUnSel)for(ut=n.extend(!0,[],this._virtaulUnSel),r=0;r<ut.length;r++){var a=ut[r],ni=this.model.pageSettings.currentPage,ti=a%this.model.pageSettings.pageSize==0?parseInt(a/this.model.pageSettings.pageSize):parseInt(a/this.model.pageSettings.pageSize)+1;ti==ni&&(c=a%this.model.pageSettings.pageSize,bt=n(f).find("tr[name="+u+"]").eq(c),bt.attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),ft=this._virtaulUnSel.indexOf(a),ft!=-1&&this._virtaulUnSel.splice(ft,1))}(k&&rt&&(this._virIndex||n(rt).hasClass("e-virtualrow")||rt.offsetTop>u*pt)&&(this._gridRecordsCount-u>=this.model.pageSettings.pageSize||k.offsetParent.offsetHeight-wt<pt)||this._lastRow)&&(this._lastRow&&(this._lastRow=!1),this._virIndex&&(this._virIndex=!1),this._isVirtualRecordsLoaded=!0,yt.find(".e-content").scrollTop(wt),this._scrollValue=this.getContent()[0].firstChild.scrollTop);ii=n(h).get(0);ri=dt.firstChild;this._currentJsonData=y;this._gridRows=n(h).get(0).rows;et=n(h).find(".e-virtualrow").last();kt=this.model.scrollSettings.virtualScrollMode=="normal"?et.height()-(n(h).height()-this._gridRecordsCount*v):1;et.css("height",kt);this._enableCheckSelect&&this._virtualCheckSelection(u);this._eventBindings()},_virtualCheckSelection:function(t){var i=this.getContentTable()[0].tBodies[0];n(i).find("tr[name="+t+"]").find(".e-checkcelldiv input").prop("checked","checked");n(i).find("tr[name="+t+"]").attr("aria-selected","true").find("td").addClass("e-selectionbackground e-active")},_replacingVirtualContent:function(){var e=this.getContentTable()[0],o=this._currentLoadedIndexes,r=n("<tbody><\/tbody>"),h,y,i,u,p,c,l,a,w,v,f,t;if(this._checkCurrentVirtualView(this._virtualLoadedRows,this._currentVirtualIndex)){for(h=[],t=0;t<o.length;t++)n.merge(h,this._virtualLoadedRows[o[t]]);n(r).append(h)}else for(y=n("<tbody><\/tbody>"),t=0;t<o.length;t++)if(i=o[t],u=this._virtualLoadedRows[i],u)i<this._currentVirtualIndex?(l=r.find(".e-virtualview"+i),l.length?n(u).insertBefore(l):r.prepend(u)):n(u).insertAfter(r.find(".e-virtualview"+(i-1)));else{this._currentVirtualRowIndex=i>0?(i-1)*this._virtualRowCount:0;var y=n("<tbody><\/tbody>").append(n.render[this._id+"_JSONTemplate"](this._virtualLoadedRecords[i])),s=y[0].rows,b=s.length-1;n(s[b]).addClass("e-virtualview"+i);p=i.toString(32);c=n(s).attr("name",p);(c.length==this._virtualRowCount||i==this._totalVirtualViews)&&(this._virtualLoadedRows[i]=c,r.append(s))}if(e.replaceChild(r[0],e.lastChild),this.selectedRowsIndexes.length&&!this._enableCheckSelect&&(a=n.inArray(this._prevVirtualIndex,this._currentLoadedIndexes),w=n.inArray(this._prevVirtualIndex,this._prevLoadedIndexes),a!=-1&&a!=w&&(v=this._prevVirtualIndex>this._currentVirtualIndex?this._virtualRowCount:-this._virtualRowCount,this.selectedRowsIndexes=this.selectedRowsIndexes.map(function(n){return n+v}),f=this._selectedRow()+v,f=f>=0?f:-1,this._selectedRow(f))),n(e.rows).removeClass("e-hover"),this._setVirtualTopBottom(),(this._isThumbScroll||this._remoteRefresh)&&(this._scrollObject._content[0].scrollTop=this._scrollObject.scrollTop(),this._isThumbScroll=this._remoteRefresh=!1),this.model.allowSelection&&this._checkVirtualSelection(),this._gridRows=e.rows,this._currentJsonData=this.model.currentViewData,this._checkCurrentVirtualView(this._queryCellView,this._currentVirtualIndex)||this._eventBindings(),this.model.queryCellInfo||this.model.rowDataBound)for(t=0;t<this._currentLoadedIndexes.length;t++)n.inArray(this._currentLoadedIndexes[t],this._queryCellView)==-1&&this._queryCellView.push(this._currentLoadedIndexes[t]);this._trigger("refresh")},_setVirtualTopBottom:function(){var f=this.getContentTable()[0],c=this._vRowHeight,v=t.dataUtil.mergeSort(t.distinct(this._currentLoadedIndexes)),y=t.dataUtil.min(v),e=t.dataUtil.max(v),p=this._getVirtualTotalRecord(),a,l,w,i,u,h,o,r,s;if(this.model.scrollSettings.virtualScrollMode=="continuous"&&this._virtualLoadedRows[e+1]&&(w=Object.keys(this._virtualLoadedRows),l=parseInt(t.dataUtil.max(w),10),e=l-e),a=e*this._virtualRowCount*c,n.inArray(this._totalVirtualViews,this._currentLoadedIndexes)!=-1&&this._currentVirtualIndex!=this._totalVirtualViews&&(a=(p-(this._virtualRowCount-this._lastViewData))*c),i=p*c-a,this.model.scrollSettings.virtualScrollMode!="continuous"||this._virtualLoadedRows[e+1]||(i=l&&l<=e+1?i:1),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),u=1e6,i>0&&this._getVirtualTotalRecord()>this._virtualRowCount*2)if(Math.round(i).toString().length<7)t.buildTag("div.e-virtualbottom","",{height:i}).insertAfter(f);else for(t.buildTag("div.e-virtualbottom").insertAfter(f),o=Math.ceil(i/u),r=0;r<o;r++)s=u,r==o-1&&(s=i%u),n(f).next().append(t.buildTag("div","",{height:s}));if(y>1)if(h=(y-1)*this._virtualRowCount*c,Math.round(h).toString().length<7)t.buildTag("div.e-virtualtop","",{height:h}).insertBefore(f);else for(t.buildTag("div.e-virtualtop").insertBefore(f),o=Math.ceil(h/u),r=0;r<o;r++)s=u,r==o-1&&(s=h%u),n(f).prev().append(t.buildTag("div","",{height:s}));this._scrollObject.model.scrollTop!=this._scrollValue&&this.getContent().ejScroller("model.scrollTop",this._scrollValue)},_checkVirtualSelection:function(){var r=this.getContentTable()[0],o,u,y,e,f,h,p,v,c,s,i,l,w;if(this._enableCheckSelect?(this.selectedRowsIndexes=[],this._virtualSelectedRecords=[],this.model.selectedRecords=[],y=this.model.pageSettings.pageSize,o=[].concat.apply([],this.checkSelectedRowsIndexes.map(function(n,t){return n.map(function(n){return n+t*y})}))):o=this.selectedRowsIndexes,o)for(i=0;i<o.length;i++){var f=o[i],a=this._getSelectedViewData(f),h=a.viewIndex;n.inArray(h,this._currentLoadedIndexes)!=-1&&(e=f%this._virtualRowCount+this._currentLoadedIndexes.indexOf(h)*this._virtualRowCount,t.isNullOrUndefined(r.rows[e])||(n(r.rows[e].cells).hasClass("e-selectionbackground")||n(n(r.rows[e]).attr("aria-selected","true")[0].cells).addClass("e-selectionbackground e-active"),(this._enableCheckSelect||!n(r.rows[e].cells).hasClass("e-selectionbackground"))&&(u=n(r.rows[e]).index(),this.selectedRowsIndexes.push(u),this._virtualSelectedRecords[u]=a.data,this.model.selectedRecords.push(a.data),n(r.rows[e]).find(".e-checkcelldiv [type=checkbox]").prop("checked",!0))))}for(i=0;i<this._rowIndexesColl.length;i++)if(f=this._rowIndexesColl[i],h=this._getSelectedViewData(f).viewIndex,n.inArray(h,this._currentLoadedIndexes)!=-1&&n.inArray(f,this._virtualRowCellSelIndex)==-1||this._virtualDataRefresh)for(p=n.inArray(f,this._rowIndexesColl),v=this.selectedRowCellIndexes[p].cellIndex,c=0;c<v.length;c++)this._selectMultipleCells(f,v[c]);for(s=n(r.rows).find(".e-active, .e-cellselectionbackground").closest("tr"),i=0;i<s.length;i++){var b=parseInt(n(s[i]).attr("name"),32)*this._virtualRowCount,k=this._virtualRowCount-n(s[i]).index()%this._virtualRowCount,d=b-k;u=n(s[i]).index();this.selectedRowsIndexes.length&&n.inArray(u,this.selectedRowsIndexes)==-1&&(this._clearVirtualSelection=!0,this.clearSelection(u));this._rowIndexesColl.length&&n.inArray(d,this._rowIndexesColl)==-1&&n(this.getRowByIndex(u)[0].cells).removeClass("e-cellselectionbackground e-activecell")}for(n(r.rows).find(".e-columnselection").removeClass("e-columnselection"),l=0;l<this.selectedColumnIndexes.length;l++)w=this.selectedColumnIndexes[l]+1,n(r.rows).find("td:nth-of-type("+w+")").addClass("e-columnselection");this._clearVirtualSelection=!1},_refreshPagerTotalRecordsCount:function(){this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:this._searchCount==null?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:this._searchCount==null?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()})},_maxZindex:function(){var t=1;return t=Math.max.apply(null,n.map(n("body *"),function(t){if(n(t).css("position")=="absolute")return parseInt(n(t).css("z-index"))||1})),(t==i||t==null)&&(t=1),t},_keyPressed:function(r,u,f,e){var o=n(u),ut,ft,et,a,h,b,g,it,ot,p,nt,d,c,l,v,tt,k,rt,s,y,w;if(o.hasClass("e-tooltxt")&&f.code==13)return ft={currentTarget:u,target:u.firstChild},et=n(u).closest(".e-gridtoolbar"),et.ejToolbar("instance")._trigger("click",ft),!1;if((!this._allowcellSelection||this._previousRowCellIndex&&this._previousRowCellIndex.length!=0||(this._previousRowCellIndex=[],this._previousRowCellIndex.push([0,[0]])),o.hasClass("e-ddl")&&f.code==13&&n(document.activeElement).parents("td").hasClass("e-templatecell"))||!this.model.allowKeyboardNavigation||(u.tagName=="INPUT"||u.tagName=="TEXTAREA")&&this.model.keyConfigs[r].indexOf(",")==-1&&f.code!=13&&f.code!=27&&f.code!=9||String.fromCharCode(f.code).toLowerCase()==this.element[0].accessKey.toLowerCase()||n(u).prop("type")=="checkbox"&&f.code!=13&&f.code!=9&&f.code!=27||this.model.editSettings.editMode=="batch"&&(u.tagName=="INPUT"||u.tagName=="TEXTAREA")&&f.code!=13&&f.code!=9&&f.code!=27&&(u.selectionStart!=0&&r!="moveCellRight"||u.selectionEnd!=u.value.length&&r!="moveCellLeft")||this.model.allowFiltering&&o.hasClass("e-filtertext")&&f.code==13||o.hasClass("e-fltrbtn")&&f.code==13||(this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="dialogtemplate")&&n(u).closest("#"+this._id+"EditForm").length||n(u).parent().siblings("#"+this._id+"EditForm").length||f.code==13&&o.parent().hasClass("e-unboundcelldiv"))return!0;if(f.code==13&&u.tagName=="INPUT"&&o.closest("#"+this._id+"_search").length&&(r="searchRequest"),f.code==13&&this._excelFilter!=null&&!t.isNullOrUndefined(this._excelFilter._openedFltr)&&this._excelFilter._openedFltr.length&&this._excelFilter._openedFltr.is(":visible")&&(r="excelfilter"),f.code==13&&n(u).hasClass("e-gridtoolbar")&&(ut=o.find(".e-hover").attr("Id"),r="toolbarOperationRequest"),!this.model.isEdit&&r=="cancelRequest")return this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),!0;if(n(u).find("input.e-dropdownlist").attr("aria-expanded")=="true"&&this.model.isEdit&&r=="saveRequest")return!0;if(this.getPager()!=null&&(a=this.getPager().ejPager("model"),h=a.currentPage),b=!1,o=n(u),o.closest(".e-grid").attr("Id")===this._id){switch(r){case"insertRecord":!t.gridFeatures.edit||this.model.isEdit||this.model.editSettings.showAddNewRow||this.model.editSettings.editMode!="normal"||this._toolbarOperation(this._id+"_add");h==0&&(h=1);break;case"toolbarOperationRequest":this._toolbarOperation(ut);this.element.focus();break;case"searchRequest":this.search(o.val());break;case"excelfilter":it=this._id+this._excelFilter._$colType;this._excelFilter._openedFltr.hasClass("e-dlgcustom")&&(it+="Custom");this._excelFilter._openedFltr.find("#"+it+"_OkBtn").trigger("click");break;case"saveRequest":t.gridFeatures.edit&&(o.blur(),this.model.editSettings.editMode=="batch"?(ot=n(this.getRowByIndex(this._bulkEditCellDetails.rowIndex)),this.model.isEdit&&ot.hasClass("e-insertedrow")&&this._batchCellValidation(this._bulkEditCellDetails.rowIndex),this._moveCurrentCell("down")):this._toolbarOperation(this._id+"_update"),e.stopPropagation());break;case"cancelRequest":t.gridFeatures.edit&&this._toolbarOperation(this._id+"_cancel");break;case"deleteRecord":t.gridFeatures.edit&&this._toolbarOperation(this._id+"_delete");break;case"editRecord":t.gridFeatures.edit&&(!this.model.isEdit||this.model.editSettings.showAddNewRow&&this.model.editSettings.editMode=="normal")&&this._toolbarOperation(this._id+"_edit");break;case"totalGroupCollapse":t.gridFeatures.group&&(this.collapseAll(),this.element.focus());break;case"totalGroupExpand":t.gridFeatures.group&&(this.expandAll(),this.element.focus());break;case"selectedGroupExpand":t.gridFeatures.group&&(this._$currentTr=n(this.getRows()).eq(this._selectedRow()),g=this._$currentTr.parents("tr").first().prev().find(".e-recordpluscollapse"),this.expandCollapse(g));break;case"selectedGroupCollapse":t.gridFeatures.group&&(this._$currentTr=n(this.getRows()).eq(this._selectedRow()),g=this._$currentTr.parents("tr").first().prev().find(".e-recordplusexpand"),this.expandCollapse(g));break;case"firstRowSelection":t.gridFeatures.selection&&this.selectRows(0);break;case"lastRowSelection":t.gridFeatures.selection&&(s=this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])?n(this.getRows()[0]).length-1:n(this._excludeDetailRows()).length-1);this.selectRows(s);break;case"rowUpSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover");p=this._traverseRow!=null?this._traverseRow:this._selectedRow();p>0&&(this._nextRow=p,this._prevRow=p-1,nt=n(this.getContent().find("tr.e-traverse")[0]),nt.removeClass("e-traverse"),this.getRowByIndex(this._prevRow).addClass("e-traverse"),d=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(d));break;case"rowDownSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover");p=this._traverseRow!=null?this._traverseRow:this._selectedRow();(p+1<this.model.currentViewData.length||this.model.scrollSettings.allowVirtualScrolling)&&(this._prevRow=p,this._nextRow=p+1,nt=n(this.getContent().find("tr.e-traverse")[0]),nt.removeClass("e-traverse"),this.getRowByIndex(this._nextRow).addClass("e-traverse"),d=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(d));break;case"randomSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover");this.model.selectionType=="multiple"&&(this.multiSelectCtrlRequest=!0);d=this.getContent().find("tr.e-traverse");this._traverseRow=this.getIndexByRow(d);this._traverseRow!=-1&&(this.model.selectionSettings.enableToggle&&this.getSelectedRecords().length==1&&n.inArray(this._traverseRow,this.selectedRowsIndexes)!=-1?this.clearSelection(selectedIndex):this.selectRows(this._traverseRow));this.getRowByIndex(p).removeClass("e-traverse");this.multiSelectCtrlRequest=!1;break;case"upArrow":if(this.multiSelectCtrlRequest=!1,this._traverseRow=null,this.model.isEdit&&o.hasClass("e-ddl"))break;if(t.gridFeatures.selection&&(this._selectedRow()!=-1||this._previousRowCellIndex!=i)&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if((u.type=="text"||u.type=="textarea"||u.type=="checkbox")&&this.model.isEdit&&this.model.editSettings.editMode!="batch")return!0;this._selectedRow()>0&&(c=this.getRowByIndex(this._selectedRow()-1),this._enableCheckSelect||this.selectRows(this._selectedRow()-1,null,c),this.model.editSettings.editMode!="batch"||this.model.scrollSettings.enableVirtualization||n.inArray("cell",this.model.selectionSettings.selectionMode)!=-1||this._moveCurrentCell("up"));this._previousRowCellIndex&&this._previousRowCellIndex.length!=0&&this._previousRowCellIndex[0][0]!=0&&this._allowcellSelection&&this.selectCells([[this._previousRowCellIndex[0][0]-1,this._previousRowCellIndex[0][1]]])}break;case"downArrow":if(this.multiSelectCtrlRequest=!1,this._traverseRow=null,this.model.isEdit&&o.hasClass("e-ddl"))break;if(t.gridFeatures.selection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if((u.type=="text"||u.type=="textarea"||u.type=="checkbox")&&this.model.isEdit&&this.model.editSettings.editMode!="batch")return!0;this._selectedRow()==-1&&(this.model.selectedRowIndex=0);s=this._excludeDetailRows().length-1;this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])&&(s=this.getRows()[0].length-1);this._selectedRow()!=s&&this._selectedRow()!=-1&&(c=this._selectedRow()==0?this.getRowByIndex(this._selectedRow()):this.getRowByIndex(this._selectedRow()-1),this._enableCheckSelect||this.selectRows(this._selectedRow()+1,null,c),this.model.editSettings.editMode!="batch"||this.model.scrollSettings.enableVirtualization||n.inArray("cell",this.model.selectionSettings.selectionMode)!=-1||this._moveCurrentCell("down"));this._previousRowCellIndex&&this._previousRowCellIndex.length!=0&&this._previousRowCellIndex[0][0]!=s&&this._allowcellSelection&&this.selectCells([[this._previousRowCellIndex[0][0]+1,this._previousRowCellIndex[0][1]]])}break;case"rightArrow":if(t.gridFeatures.selection&&this._allowcellSelection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if((u.type=="text"||u.type=="textarea"||u.type=="checkbox")&&this.model.isEdit&&this.model.editSettings.editMode!="batch")return!0;l=this._previousRowCellIndex[0][0];c=this.getRowByIndex(l);k=this._previousRowCellIndex[0][1][0];t.isNullOrUndefined(k)&&(k=this._previousRowCellIndex[0][1]);v=n(c.find("td:gt("+k+")").not(".e-hide")[0]).index();v==-1&&(l=l+1,c=this.getRowByIndex(l),v=n(c.find("td").not(".e-hide")[0]).index());l!=-1&&v!=-1&&this.selectCells([[l,[v]]])}break;case"leftArrow":if(t.gridFeatures.selection&&this._allowcellSelection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if((u.type=="text"||u.type=="textarea"||u.type=="checkbox")&&this.model.isEdit&&this.model.editSettings.editMode!="batch")return!0;l=this._previousRowCellIndex[0][0];c=this.getRowByIndex(l);k=this._previousRowCellIndex[0][1];tt=c.find("td:lt("+k+")").not(".e-hide").length-1;v=n(c.find("td:lt("+k+")").not(".e-hide")[tt]).index();v==-1&&(l=l-1,c=this.getRowByIndex(l),tt=c.find("td:lt("+this.model.columns.length+")").not(".e-hide").length-1,v=n(c.find("td:lt("+this.model.columns.length+")").not(".e-hide")[tt]).index());l!=-1&&v!=-1&&this.selectCells([[l,v]])}break;case"firstCellSelection":if(t.gridFeatures.selection&&this._allowcellSelection){if((u.type=="text"||u.type=="textarea"||u.type=="checkbox")&&this.model.isEdit&&this.model.editSettings.editMode!="batch")return!0;s=n(this.getRows()).length-1;s>-1&&this.selectCells([[0,[0]]])}break;case"lastCellSelection":if(t.gridFeatures.selection&&this._allowcellSelection){if((u.type=="text"||u.type=="textarea"||u.type=="checkbox")&&this.model.isEdit&&this.model.editSettings.editMode!="batch")return!0;s=this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])?this.getRows()[0].length-1:n(this._excludeDetailRows()).length-1;s>-1&&this.selectCells([[s,[this.model.columns.length-1]]])}break;case"nextPage":this.getPager()!=null&&(h=h+1);t.isIOSWebView()||this.getBrowserDetails().browser!="msie"||this.element.focus();break;case"previousPage":this.getPager()!=null&&(h=h-1);t.isIOSWebView()||this.getBrowserDetails().browser!="msie"||this.element.focus();break;case"lastPage":this.getPager()!=null&&(h=a.totalPages);break;case"firstPage":this.getPager()!=null&&(h=1);break;case"nextPager":this.getPager()!=null&&(h=Math.ceil(a.currentPage/a.pageCount)*a.pageCount+1);break;case"previousPager":this.getPager()!=null&&(h=(Math.floor(a.currentPage/a.pageCount)-1)*a.pageCount+1);break;case"moveCellLeft":this.model.editSettings.editMode=="batch"?(this._tabKey=!0,b=this._moveCurrentCell("left",e)):b=!0;f.code==9&&n.inArray("cell",this.model.selectionSettings.selectionMode)!=-1&&this.selectCells([[this._bulkEditCellDetails.rowIndex,this._bulkEditCellDetails.columnIndex]]);break;case"moveCellRight":this.model.editSettings.editMode=="batch"&&o?(this._tabKey=!0,b=this._moveCurrentCell("right",e)):b=!0;f.code==9&&n.inArray("cell",this.model.selectionSettings.selectionMode)!=-1&&this.selectCells([[this._bulkEditCellDetails.rowIndex,this._bulkEditCellDetails.columnIndex]]);break;case"multiSelectionByDownArrow":t.gridFeatures.selection&&(this._selectedRow()!=-1||this._previousRowCellIndex!=i)&&(s=this._excludeDetailRows().length-1,o=this.element.find(".e-gridcontent").find(".e-rowcell"),this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])&&(s=this.getRows()[0].length-1),this._selectedRow()<=s&&this._selectedRow()!=-1&&(y=this._selectedRow()+1,w=this._previousIndex,this.multiSelectShiftRequest=!0,this.selectRows(w,y,o),this.multiSelectShiftRequest=!1,y-1==s&&(this.selectRows(w,s),y=s)),this._selectedRow(y),this._previousIndex=w);this.model.editSettings.editMode=="batch"&&this.element.focus();break;case"multiSelectionByUpArrow":rt=0;t.gridFeatures.selection&&(this._selectedRow()!=-1||this._previousRowCellIndex!=i)&&(s=this._excludeDetailRows().length-1,o=this.element.find(".e-gridcontent").find(".e-rowcell"),this._selectedRow()>=0&&this._selectedRow()>=-1&&(y=this._selectedRow()-1,w=this._previousIndex,this.multiSelectShiftRequest=!0,this.selectRows(w,y,o),this.multiSelectShiftRequest=!1,y<0&&(this.selectRows(w,rt),y=rt)),this._selectedRow(y),this._previousIndex=w);this.model.editSettings.editMode=="batch"&&this.element.focus();break;default:b=!0}return this.getPager()!=null&&h<=a.totalPages&&a.currentPage!==h&&r!="searchRequest"&&r!=="deleteRecord"&&this.getPager().ejPager("goToPage",h),b}},_findColumnsWidth:function(){for(var t=this.getHeaderTable().find(".e-headercell").not(".e-stackedHeaderCell, .e-detailheadercell"),n=0;n<this.model.columns.length;n++)this.model.columns[n].visible&&(this.columnsWidthCollection[n]=t.eq(n+0).outerWidth())},_calculateWidth:function(){for(var t=this.getHeaderTable().find(".e-columnheader").last().find("th:visible"),i=0,n=0;n<t.length;n++)i+=t.eq(n).outerWidth();return i},_initIndicators:function(){var t=this._id+"_ColumnDropIndicator";n("#"+t).length&&n("#"+t).remove();this._Indicator=document.createElement("DIV");n(this._Indicator).attr("id",t).addClass("e-columndropindicator").addClass("e-dropAcceptor").appendTo(document.body);n(this._Indicator).css({display:"none"})},_refreshGridFooterColGroup:function(){this.getFooterTable().find("colgroup").remove();this._scrollFooterColgroup()},_refreshGroupSummary:function(){var r=this.getHeaderContent().find("colgroup col").clone(),i,t;for(r.splice(0,this.model.groupSettings.groupedColumns.length),i=this.getContentTable().find(".e-groupsummary colgroup"),t=0;t<i.length;t++)n(i[t]).find(".e-summary").is("visible")||n(i[t]).find(".e-summary").show(),n(i[t]).find("col:not('.e-summary')").remove(),n(i[t]).append(r.clone())},reorderColumns:function(n,t){var i,r;(typeof n=="string"&&typeof t=="string"?(i=this.getColumnIndexByField(n),r=this.getColumnIndexByField(t)):(i=n,r=t),i!=-1&&r!=-1&&typeof i!="string"&&typeof r!="string")&&(this.set_dropColumn(i,r),this.model.showStackedHeader&&this._refreshStackedHeader(),this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(this._virtualDataRefresh=!0,this._queryCellView=[],this._virtualLoadedRows={},this._refreshVirtualView(this._currentVirtualIndex)):this._refreshVirtualContent()))},columns:function(i,r){var f,u,e,s,o,h,c;if(!t.isNullOrUndefined(i)){for(f=!1,typeof i=="string"?(i=[i],f=!0):i instanceof Array&&i.length&&typeof i[0]=="string"&&(f=!0),u=0;u<i.length;u++)e=f?i[u]:i[u].field,s=f?i[u]:i[u].headerText,o=(t.isNullOrUndefined(e)||e=="")&&(t.isNullOrUndefined(s)||s=="")?-1:t.isNullOrUndefined(e)||e==""?n.inArray(this.getColumnByHeaderText(s),this.model.columns):n.inArray(this.getColumnByField(e),this.model.columns),r=="add"||t.isNullOrUndefined(r)?o==-1?this.model.columns.push(f?{field:i[u]}:i[u]):this.model.columns[o]=f?{field:i[u]}:i[u]:o!=-1&&this.model.columns.splice(o,1);for(this.columnsWidthCollection=[],h=!1,c=0;c<this.model.columns.length;c++)this.columnsWidthCollection.push(this.model.columns[c].width),t.isNullOrUndefined(h)||(h=!0);this._enableRowHover(h);this.refreshHeader();(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing();this.refreshContent(!0);this.model.allowScrolling&&(this.refreshScrollerEvent(),this.model.allowResizeToFit&&this.getContent().ejScroller("isVScroll")&&this._showHideScroller())}},_resetDisabledCollections:function(){this._disabledResizingColumns=[];this._disabledSortableColumns=[];this._disabledGroupableColumns=[];this._disabledEditableColumns=[]},_enableRowHover:function(n){var r=!0,i;if(t.isNullOrUndefined(n)){for(i=0;i<this.model.columns.length;i++)if(!t.isNullOrUndefined(this.model.columns[i].tooltip)){r=!0;break}}else r=n;this.model.enableRowHover||r?this._on(this.element,"mouseenter mouseleave",".e-gridcontent tr td",this._rowHover):this._off(this.element,"mouseenter mouseleave",".e-gridcontent tr td")},_rowHover:function(i){var r=n(i.target),u,f,o,h;if(r.hasClass("e-rowcell")||(r=r.closest(".e-rowcell")),u=this.model.scrollSettings.frozenColumns?n(this.getRows()):this.element.find(".e-row.e-hover,.e-alt_row.e-hover"),(!r.closest("#"+this._id+"EditForm").length||!r.hasClass("e-rowcell"))&&r.hasClass("e-rowcell")){if(i.type=="mouseenter"&&r.hasClass("e-gridtooltip")&&this._showTooltip(r),this.model.enableRowHover){this.element.find(".e-traverse").removeClass("e-traverse");this._traverseRow=null;i.type!="mouseenter"||this._dragActive?(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(u[0])&&!t.isNullOrUndefined(u[1])&&(u=n(u[0]).add(u[1])),u.removeClass("e-hover")):this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(u[0])&&!t.isNullOrUndefined(u[1])?(u=n(u[0]).add(u[1]),u.removeClass("e-hover"),f=this.getIndexByRow(r.parent()),f!=-1&&this.getRowByIndex(f).addClass("e-hover")):(u.removeClass("e-hover"),(r.parent().hasClass("e-row")||r.parent().hasClass("e-alt_row"))&&r.parent().addClass("e-hover"));var s=r.parent(),f=this.getIndexByRow(s),e=this._currentJsonData[f];this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization?(f=f%this.model.pageSettings.pageSize,e=this._currentJsonData[f]):this.model.scrollSettings.enableVirtualization&&(o=this._getSelectedViewData(f,r),e=o.data,f=o.rowIndex);h={row:s,rowIndex:f,rowData:e,cell:r};this._trigger("rowHover",h)}return!1}},_showTooltip:function(i,r){var u=i.index(),a=i.hasClass("e-stackedHeaderCell"),o={},f,h,v,y,e,c,s,l,p,w,b;if(i.hasClass("e-headercelldiv")&&(u=i.parent(".e-headercell").index()-this.model.groupSettings.groupedColumns.length),!a&&(this.model.childGrid||this.model.detailsTemplate)&&u--,this.model.scrollSettings.frozenColumns>0&&(i.closest(".e-movableheaderdiv").length||i.closest(".e-movablecontentdiv").length)&&(u=u+this.model.scrollSettings.frozenColumns),f=a?this._getStackedColumnByTarget(i):this.getColumnByIndex(u),f.clipMode!=t.Grid.ClipMode.Ellipsis){if(f.clipMode==t.Grid.ClipMode.EllipsisWithTooltip&&(h=i,i.find("span").hasClass("e-ellipsistooltip")||(v=t.buildTag("span.e-ellipsistooltip",{},{}),v.html(i.html()),h.append(v)),h.find("span.e-ellipsistooltip").css("display","inline-block"),y=h.find("span:first")[0].getBoundingClientRect().width,h.find("span.e-ellipsistooltip").remove(),i.width()>y)){i.removeAttr("title");return}if(e=document.createElement("script"),t.isNullOrUndefined(f.tooltip)&&t.isNullOrUndefined(f.headerTooltip))return;e.id=(this._id+f.headerText+n.inArray(f,this.model.columns)+"_TemplateToolTip").split(" ").join("");e.type="text/x-template";s=r?"headerTooltip":"tooltip";t.isNullOrUndefined(f[s])||f[s].slice(0,1)==="#"?c=n(f[s]):e.text=f[s];c&&(e.text=c.html(),e.type=c.attr("type")||e.type);t.isNullOrUndefined(c)||f[s].slice(0,1)==="#"||n("body").append(e);l=i.closest("tr");n(l).hasClass("e-columnheader")||i.hasClass("e-gridheader")||(u=this.getIndexByRow(l),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling?this.model.scrollSettings.enableVirtualization?(p=l.attr("name"),u=u%this._virtualRowCount,w=parseInt(p,32),o=this._virtualLoadedRecords[w][u]):u=u%this.model.pageSettings.pageSize:o=this.getCurrentViewData()[u]);o.value=!i.hasClass("e-headercell")||a?i.text():i.find("e-gridheadertooltip").text();b=n(e).render(o);i.attr("title",b);t.isNullOrUndefined(o.value)||delete o.value}else i.removeAttr("title")},_rightClickHandler:function(i){var o,h,r,e;if(i.preventDefault(),o=t.browserInfo(),i.which==3||o.name=="msie"&&o.version=="8.0"){var f={},u=n(i.target),c=n(this.getRows());if(this.getContentTable().has(u).length){var r=c.index(u.parent()),l=this.getRowByIndex(r),s=this._currentJsonData[r];if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(h=this._getSelectedViewData(r,u),s=h.data,r=h.rowIndex),r==-1)return;f={rowIndex:r,row:l,data:s,rowData:s,cellIndex:u.index(),cellValue:u.html(),cell:u}}else if(this.getHeaderTable().has(u).length){if(r=0,e=this.getHeaderTable().find("th").not(".e-detailheadercell,.e-grouptopleftcell,.e-filterbarcell"),r=u.is(".e-headercelldiv")?e.index(u.closest(".e-headercell")):e.index(u),r==-1)return;f={headerIndex:r,headerText:this.getColumnFieldNames()[r],headerCell:e.eq(r),column:this.getColumnByIndex(r)}}else(u.is(".e-pager")||this.getPager()!=null&&this.getPager().has(u).length)&&(f={pager:this.model.pageSettings});this._trigger("rightClick",f)}},_touchGrid:function(n){var i=this._currentPage(),r=!0,t;(this.model.allowScrolling||this.model.isResponsive&&this.model.minWidth!=0)&&(t=(this.getScrollObject()||{})._scrollXdata,t&&(r=n.type=="swipeleft"?t.scrollable-t.sTop==0:t.sTop==0));switch(n.type){case"swipeleft":this.model.allowPaging&&i!=this.model.pageSettings.totalPages&&!this.model.isEdit&&r&&this.element.ejGrid("gotoPage",i+1);break;case"swiperight":this.model.allowPaging&&i>1&&!this.model.isEdit&&r&&this.element.ejGrid("gotoPage",i-1)}},_recorddblClickHandler:function(i){if(!t.isNullOrUndefined(this._previousTr)){var u,r=(u=this._previousTr.length>1)?this.getRowByIndex(n(i.target).closest("tr").index()):n(i.target).closest("tr");if(u&&r[0]!=this._previousTr[0]&&r[1]!=this._previousTr[1])return;if(r[0]!=this._previousTr[0])return}this._recordClickProcess(i,this,"recordDoubleClick")},_recordClickProcess:function(t,i,r){var s={},u=n(t.target).is(".e-rowcell")?n(t.target):n(t.target).closest("td"),h,e,c,a,v;if(u.closest(".e-grid").attr("id")===i._id&&(u.is(".e-rowcell")||u.closest("td").is(".e-rowcell"))&&!(u.closest(".e-editcell,.e-insertedrow").length>0)&&(h=i.model.detailsTemplate!=null||i.model.childGrid!=null?u.index()-1:u.index(),e=i.getColumnByIndex(h),i.model.editSettings.editMode!="batch"||e.allowEditing==!1||e.isPrimaryKey==!0)){var f=i.getIndexByRow(u.closest("tr")),l=i.getRowByIndex(f),o=i._currentJsonData[f];i.model.scrollSettings.allowVirtualScrolling&&(i.model.scrollSettings.enableVirtualization?(c=i._getSelectedViewData(f,u),o=c.data,f=c.rowIndex):(a=f%i.model.pageSettings.pageSize,v=(parseFloat(l.attr("name"))-(this.model.scrollSettings.enableVirtualization?1:0))/i.model.pageSettings.pageSize+1,o=i._virtualLoadedRecords[v][a]));s={rowIndex:f,row:l,data:o,rowData:o,cell:u,cellIndex:h,columnName:e.headerText,cellValue:u.text(),event:t};i._previousTr=s.row;i._trigger(r,s)}},_invokeRecordClick:function(n,t){this._recordClickProcess(n,t,"recordClick")},_recordClick:function(i){this._click++;var r=this,u=null;r._click==1?n.inArray("recordClick",this.model.serverEvents)!==-1&&n.inArray("recordDoubleClick",this.model.serverEvents)!==-1?u=setTimeout(function(){r._click=0;r._invokeRecordClick(i,r)},400):(r._click=0,t.isNullOrUndefined(u)||clearTimeout(u),r._invokeRecordClick(i,r)):r._click==2&&(t.isNullOrUndefined(u)||clearTimeout(u),r._click=0)},_headerMouseDown:function(t){if(n(t.target).hasClass("e-headercelldiv")&&!n(t.target).parent().hasClass("e-grouptopleftcell")||n(t.target).hasClass("e-headercell")){var i=n(t.target).hasClass("e-headercelldiv")?n(t.target).parent():n(t.target);this.model.enableHeaderHover&&i.removeClass("e-hover e-headercell-hover").addClass("e-headercellactive e-active")}if(this.model.allowResizing)return this._resizer._mouseDown(t)},_contentMouseDown:function(i){var u,f,r;n(i.target).closest("td").hasClass("e-selectionbackground")||n(i.target).closest("tr").length&&(u=i.type=="touchstart"?i.originalEvent.touches[0].pageX:i.pageX,f=i.type=="touchstart"?i.originalEvent.touches[0].pageY:i.pageY,this._dragDiv=t.buildTag("div.e-griddragarea","",{position:"absolute",width:"0px",height:"0px"}),this.getContent().append(this._dragDiv),r=n(i.target).closest("tr.e-row"),r.length||(r=n(i.target).closest("tr.e-alt_row")),this._startIndex=r.length?this.getIndexByRow(r):null,this._on(n(document),"touchmove mousemove",this._mouseMoveDragHandler),t.isIOSWebView()||this.getBrowserDetails().browser!="safari"||this.model.contextMenuSettings.enableContextMenu||this._on(this.element,"contextmenu",function(n){n.preventDefault()}),this._on(n(document),"touchend mouseup",this._mouseUpDragHandler),this._startDrag={_x:u,_y:f})},_mouseMoveDragHandler:function(i){var c,e,v,l,f;if(i.pageY!=this._startDrag._y){c=i.type=="touchmove"?i.originalEvent.touches[0].pageX:i.pageX;e=i.type=="touchmove"?i.originalEvent.touches[0].pageY:i.pageY;this._selectDrag=!0;var y=this._dragDiv[0].offsetLeft,p=this._dragDiv[0].offsetTop,r=this._startDrag._x,u=this._startDrag._y,o=c,s=e,h,a=e+2;r>o&&(h=o,o=r,r=h);u>s&&(h=s,s=u,u=h,a=e-2);v=this._dragDiv.height();this._dragDiv.css({left:r,top:u,width:o-r,height:s-u});l=n(document.elementFromPoint(c,a));f=l.closest("tr.e-row");f.length||(f=l.closest("tr.e-alt_row"));f.length&&(this._endIndex=this.getIndexByRow(f),t.isNullOrUndefined(this._startIndex)&&(this._startIndex=this._endIndex),this.selectRows(this._startIndex,this._endIndex))}},_mouseUpDragHandler:function(i){this._off(n(document),"touchend mouseup",this._mouseUpDragHandler);this._off(n(document),"touchmove mousemove",this._mouseMoveDragHandler);t.isIOSWebView()||this.getBrowserDetails().browser!="safari"||this.model.contextMenuSettings.enableContextMenu||this._off(this.element,"contextmenu",function(n){n.preventDefault()});i.stopPropagation();this._selectDrag=!1;this._dragDiv.remove()},_headerHover:function(t){var i=n(t.target);t.type=="mouseover"||t.type=="mousemove"||t.type=="touchmove"||t.type=="MSPointerMove"?((this.model.allowResizing||this.model.allowResizeToFit)&&this._resizer._mouseHover(t),this.model.enableHeaderHover&&!this._dragActive&&(i.hasClass("e-headercelldiv")&&!i.parent().hasClass("e-grouptopleftcell")||i.hasClass("e-headercell"))&&(i.hasClass("e-headercelldiv")&&(i=i.parent()),this.getHeaderTable().find(".e-columnheader").find(".e-headercell-hover").removeClass("e-headercell-hover").removeClass("e-hover"),i.addClass("e-headercell-hover e-hover")),i.hasClass("e-gridtooltip")&&this._showTooltip(i),(i.hasClass("e-gridheadertooltip")||i.find(".e-gridheadertooltip").length)&&this._showTooltip(i,!0),t.type=="mouseover"&&this._addCursor()):this.model.enableHeaderHover&&this.getHeaderTable().find(".e-columnheader").find(".e-headercell-hover").removeClass("e-headercell-hover").removeClass("e-hover")},_addCursor:function(){var e=this.model.allowResizing||this.model.allowResizeToFit||this.model.allowGrouping||this.model.allowFiltering||this.model.allowSorting||this.model.allowReordering||this.model.contextMenuSettings.enableContextMenu||this._allowcolumnSelection,f,i,r,n,u;if(e){if(this.getHeaderTable().find(".e-columnheader").removeClass("e-defaultcursor"),!(this.model.contextMenuSettings.enableContextMenu||this.model.selectionSettings.selectionMode=="column")){for(i=[{val:this.model.allowSorting,str:"sort"},{val:this.model.allowGrouping,str:"group"},{val:this.model.allowReordering,str:"reorder"},{val:this.model.allowFiltering,str:"filter"}],r=0,n=0;n<i.length;n++)i[n].val==!1&&(i.splice(n,1),n--);for(n=0;n<this.model.columns.length&&i.length>0;n++){for(u=0;u<i.length;u++)switch(i[u].str){case"sort":t.isNullOrUndefined(this.model.columns[n].allowSorting)||this.model.columns[n].allowSorting||r++;break;case"group":t.isNullOrUndefined(this.model.columns[n].allowGrouping)||this.model.columns[n].allowGrouping||r++;break;case"reorder":t.isNullOrUndefined(this.model.columns[n].allowReordering)||this.model.columns[n].allowReordering||r++;break;case"filter":t.isNullOrUndefined(this.model.columns[n].allowFiltering)||this.model.columns[n].allowFiltering||r++}f=t.isNullOrUndefined(this.model.columns[n].template)&&t.isNullOrUndefined(this.model.columns[n].templateID)?!1:!0;r!=i.length||f||this.getHeaderTable().find(".e-headercell").eq(n).addClass("e-defaultcursor");r=0}}}else this.getHeaderTable().find(".e-columnheader").addClass("e-defaultcursor"),this.getHeaderTable().find(".e-headercell").removeClass("e-defaultcursor")},_colgroupRefresh:function(){var t,i,r,u;(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(t=n(this.getHeaderTable()).find("colgroup"),i=n(this.getContentTable()).find("colgroup")):(t=n(this.getHeaderTable()).find("colgroup")[0],i=n(this.getContentTable()).find("colgroup")[0]);r=n(t).clone();u=n(i).clone();n(i).remove();n(t).remove();(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(n(r[0]).prependTo(this.getHeaderTable()[0]),n(r[1]).prependTo(this.getHeaderTable()[1]),n(u[0]).prependTo(this.getContentTable()[0]),n(u[1]).prependTo(this.getContentTable()[1])):(n(r).prependTo(this.getHeaderTable()),n(u).prependTo(this.getContentTable()))},_detailColsRefresh:function(){this._$headerCols=this.getHeaderTable().children("colgroup").find("col");this._$contentCols=this.getContentTable().children("colgroup").find("col");var n=this.model.columns.length;this._$headerCols.length>n&&this._$headerCols.splice(0,this._$headerCols.length-n);this._$contentCols.length>n&&this._$contentCols.splice(0,this._$contentCols.length-n)},_summaryColRrefresh:function(){for(var t=this.getFooterContent().find(".e-gridsummary"),n=0;n<this.columnsWidthCollection.length;n++)t.find("col").eq(n).width(this.columnsWidthCollection[n])},_headerdblClickHandler:function(n){this.model.allowResizeToFit&&this._resizer._columnResizeToFit(n);this.model.allowScrolling&&(this.getScrollObject().refresh(this.model.scrollSettings.frozenColumns>0),this.getScrollObject().isVScroll()&&(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")))},_mouseUp:function(n){this.model.allowResizing&&this._resizer._mouseUp(n)},_mouseMove:function(n){this.model.allowResizing&&this._resizer._mouseMove(n)},_setModel:function(r){var u,b,k,et,d,h,a,s,ot,y,st,ht,p,g,w,c,nt,tt,ct,lt,at,e,vt,f,v,l,ut,yt,o,ft;for(u in r)switch(u){case"enableResponsiveRow":r[u]?(this.element.addClass("e-responsive"),this.model.minWidth&&(this._removeMedia(),this._scrollerAddedOnMedia=!1),this.model.allowFiltering&&(this.element.find(".e-filterDialog").remove(),this._renderFilterDialogs(),this._renderResponsiveFilter(),this.element.find(".e-gridtoolbar").remove())):(this.model.allowFiltering&&(n("body").find(".e-filterDialog").remove(),this._renderFilterDialogs()),this.element.css("display")=="none"&&this.element.css("display","block"),this.element.removeClass("e-responsive"),this.model.minWidth&&this._addMedia(),this.model.allowScrolling&&(this.getScrollObject().refresh(),this.getScrollObject().isVScroll()?this.getScrollObject().isVScroll()&&(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")):(this.getHeaderContent().removeClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").removeClass("e-hscrollcss"))));this._tdsOffsetWidth=[];(this.model.allowFiltering||this.model.allowSorting)&&(b=this.model.toolbarSettings.toolbarItems.indexOf("responsiveFilter"),b!=-1&&this.model.toolbarSettings.toolbarItems.splice(b,1),k=this.model.toolbarSettings.toolbarItems.indexOf("responsiveSorting"),k!=-1&&this.model.toolbarSettings.toolbarItems.splice(k,1),this.element.find(".e-gridtoolbar").remove(),this._renderToolBar().insertBefore(this.element.find(".e-gridheader").first()));break;case"showColumnChooser":r[u]?(this._visibleColumns=[],this._hiddenColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._renderGridHeaderInternalDesign(this.model.columns),this._renderColumnChooser()):(et=n("#"+this._id+"ccDiv").data("ejDialog"),et.isOpened()&&n("#"+this._id+"_ccTail").remove(),d=0,t.isNullOrUndefined(this.element.find(".e-ccButton").outerHeight())||(d+=this.element.find(".e-ccButton").outerHeight()),this.element.find(".e-ccButton").remove(),n("#"+this._id+"ccDiv_wrapper").remove(),this.element.css("margin-top",parseInt(this.element.css("margin-top"),10)-d));break;case"gridLines":this.getContent().removeClass("e-horizontallines e-verticallines e-hidelines");this.getHeaderContent().removeClass("e-horizontallines e-verticallines e-hidelines");this._showHeaderGridLines();this._showGridLines();break;case"showDeleteConfirmDialog":this.model.editSettings.showDeleteConfirmDialog=r[u];r[u]?this._renderConfirmDialog():this.element.find("#"+this._id+"ConfirmDialog_wrapper").remove();break;case"showConfirmDialog":this.model.editSettings.showConfirmDialog=r[u];r[u]?this._renderConfirmDialog():this.element.find("#"+this._id+"ConfirmDialog_wrapper").remove();break;case"pageSettings":if(h=this.getPager().ejPager("model"),t.isNullOrUndefined(r[u].currentPage)||h.currentPage!=this._currentPage()){for(a in r[u])a!="currentPage"&&r[u][a]===h[a]&&delete r[u][a];if(n.isEmptyObject(r[u]))break;r[u].currentPage=this._currentPage();s={};n.extend(s,r[u]);s.template!=i&&s.template!=h.template&&(s.template=null);this.getPager().ejPager("option",s);this._renderPagerTemplate(this.getPager(),s.showDefaults);this._currentPage(this._currentPage()>h.totalPages?h.totalPages:this._currentPage());this.refreshContent()}break;case"columns":ot=r.columns;this.model.columns=[];this.columns(ot,"add");break;case"allowPaging":this.model.allowPaging=r[u];r[u]&&this.element.children(".e-pager").length==0?(this.model.isResponsive&&(this.model.pageSettings.isResponsive=!0),this.element.append(this._renderGridPager()),this.refreshContent(),this.getPager().ejPager("refreshPager")):(this.getPager().remove(),this.setGridPager(null),this.refreshContent(),this.model.filterSettings.filterType=="filterbar"&&this.model.allowFiltering&&this._createPagerStatusBar());break;case"allowSearching":this.model.allowSearching=r[u];break;case"searchSettings":n.extend(this.model.searchSetings,r[u]);this.refreshContent();break;case"allowGrouping":if(r[u]&&this.element.children(".e-groupdroparea").length==0)this.model.allowGrouping=r[u],this.addGroupingTemplate(),this.model.showColumnChooser&&this.element.find(".e-ccButton").length>0?this.element.find(".e-ccButton").after(this._renderGroupDropArea()):this.element.prepend(this._renderGroupDropArea()),this._enableGroupingEvents(),this._headerCellgDragDrop(),this._off(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover);else{if(this.element.children(".e-groupdroparea").remove(),this.model.groupSettings.groupedColumns.length>0)for(f=this.model.groupSettings.groupedColumns.length;f>0;f--)this.ungroupColumn(this.model.groupSettings.groupedColumns[0]);this.model.allowReordering||(this.element.find(".e-draggable, .e-droppable").ejDraggable(),this.element.find(".e-draggable, .e-droppable").ejDraggable("destroy"))}this.model.allowGrouping&&(t.isNullOrUndefined(r.groupSettings)||n.extend(this.model.groupSettings,r.groupSettings),this._enableGrouping());break;case"groupSettings":n.extend(this.model.groupSettings,r[u]);this.model.allowGrouping&&t.isNullOrUndefined(r.allowGrouping)&&this._enableGrouping();t.isNullOrUndefined(this.model.groupSettings.enableDropAreaAnimation)||(this.model.groupSettings.enableDropAreaAutoSizing=this.model.groupSettings.enableDropAreaAnimation);break;case"cssClass":this.element.removeClass(this.model.cssClass).addClass(r[u]);break;case"allowFiltering":case"filterSettings":if(u=="filterSettings"?n.extend(this.model.filterSettings,r[u]):this.model.allowFiltering=r[u],this.filterColumnCollection=[],this._excelColTypes=[],this._$fDlgIsOpen&&this._closeFDialog(),this.model.allowFiltering){if(this.model.filterSettings.filterType==t.Grid.FilterType.FilterBar)for(this.getHeaderTable().find(".e-filterbar").remove(),this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this._renderFiltering(),this._renderFilterBarTemplate(),this.model.filterSettings.showFilterBarStatus&&!this.model.allowPaging?this._createPagerStatusBar():this.model.allowPaging&&this.getPager().ejPager({enableExternalMessage:this.model.filterSettings.showFilterBarStatus}),st=this.getHeaderTable().find(".e-filterbar"),f=0;f<this.model.groupSettings.groupedColumns.length;f++)st.prepend(this._getEmptyFilterBarCell());else if(!ht&&(this.model.filterSettings.filterType==t.Grid.FilterType.Menu||this.model.filterSettings.filterType==t.Grid.FilterType.Excel)){for(ht=1,this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this.getHeaderTable().find(".e-columnheader").find(".e-headercellsort").removeClass("e-headercellsort"),this.getHeaderTable().find(".e-filterbar").remove(),p=this.getHeaderTable().find(".e-columnheader").find(".e-headercell").not(".e-detailheadercell"),f=0;f<p.length;f++)g=p.eq(f).find(".e-headercelldiv").attr("data-ej-mappingname"),t.isNullOrUndefined(g)||(w=this.getColumnByField(g),!t.isNullOrUndefined(w)&&(t.isNullOrUndefined(w.allowFiltering)||w.allowFiltering)&&p.eq(f).addClass("e-headercellfilter").append(t.buildTag("div.e-filtericon e-icon e-filterset")));this.model.groupSettings.showToggleButton&&(this.getHeaderTable().find(".e-columnheader").find(".e-headercellgroup").removeClass("e-headercellgroup"),c=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell"),c.addClass("e-headercellgroupfilter"),c.find(".e-filterset").addClass("e-groupfiltericon"),c.find(".e-gridgroupbutton").addClass("e-togglegroup"),this.model.enableRTL&&(c.find(".e-gridgroupbutton").removeClass("e-rtltoggle"),c.find(".e-headercelldiv").addClass("e-headercelldivgroup")));this.model.filterSettings.filterType==t.Grid.FilterType.Excel?(this._isExcelFilter=!0,this._renderExcelFilter()):this._isExcelFilter&&(this._isExcelFilter=!1,this._excelFilter.resetExcelFilter(),this._excelFilter=null);this.model.filterSettings.filterType==t.Grid.FilterType.Menu&&this._renderFilterDialogs();this.model.filterSettings.filteredColumns=[];this.refreshContent()}this._enableFilterEvents()}else this.model.filterSettings.filterType==t.Grid.FilterType.FilterBar?this.getHeaderTable().find(".e-filterbar").remove():(this.model.filterSettings.filterType==t.Grid.FilterType.Menu||this.model.filterSettings.filterType==t.Grid.FilterType.Excel)&&(this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this.getHeaderTable().find(".e-columnheader").find(".e-headercellsortfilter").removeClass("e-headercellsortfilter"),this.getHeaderTable().find(".e-columnheader").find(".e-headercellsort").removeClass("e-headercellsort"),y=this.getHeaderTable().find(".e-columnheader"),this.model.groupSettings.showToggleButton&&(this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").addClass("e-headercellgroup"),y.find(".e-headercellgroupfilter").removeClass("e-headercellgroupfilter"),this.model.enableRTL&&(y.find(".e-gridgroupbutton").addClass("e-rtltoggle"),y.find(".e-headercelldivgroup").removeClass("e-headercelldivgroup")))),(this._isExcelFilter||this._excelFilterRendered)&&(this._isExcelFilter=this._excelFilterRendered=!1,this._excelFilter.resetExcelFilter(),this._excelFilter=null),this.model.filterSettings.filteredColumns=[],this.refreshContent();this.model.isResponsive&&this.model.allowScrolling&&(nt={},nt.requestType="filtering",this._refreshScroller(nt));break;case"enableRowHover":this.model.enableRowHover=r[u];this._enableRowHover();break;case"allowScrolling":case"scrollSettings":if(tt=!1,e=this.getContent(),u!="allowScrolling"){if(!t.util.isNullOrUndefined(r.scrollSettings)){if(n.isEmptyObject(r.scrollSettings))break;t.util.isNullOrUndefined(r.scrollSettings.enableVirtualization)||t.util.isNullOrUndefined(r.scrollSettings.allowVirtualScrolling)||(r.scrollSettings.allowVirtualScrolling=r.scrollSettings.enableVirtualization);n.extend(this.model.scrollSettings,r.scrollSettings)}this._initHeight=this.model.scrollSettings.height;this._isHeightResponsive=this.model._isHeightResponsive=this.model.scrollSettings.height=="100%"?!0:!1;t.util.isNullOrUndefined(r.allowScrolling)||(this.model.allowScrolling=r.allowScrolling);this._columnsPixelConvert();this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this.model.currentIndex=1,this.model.scrollSettings.enableVirtualization?(this._virtualRowCount=Math.round(this.model.scrollSettings.height/this.getRowHeight())+1,this._refreshVirtualViewDetails(),this._refreshVirtualViewData()):(this._createPagerStatusBar(),this._showPagerInformation(this.model.pageSettings)));r.scrollSettings.frozenColumns!==i||r.scrollSettings.frozenRows!==i||r.scrollSettings.allowVirtualScrolling!==i||r.scrollSettings.virtualScrollMode!==i||r.scrollSettings.enableVirtualization!=i?(o=this.model,o.query=this.commonQuery.clone(),this._selectedRow()!=-1&&(this.clearSelection(this._selectedRow()),this._selectedRow(-1),this._selectAllCheck||this._selectedMultipleRows([])),r.scrollSettings.virtualScrollMode!=i&&(o.pageSettings.currentPage=1),tt=!0,this.element.ejGrid("destroy").ejGrid(o)):(t.util.isNullOrUndefined(e.data("ejScroller"))||e.ejScroller("destroy"),this.getContentTable().css("width","100%"),this.getHeaderTable().css("width","100%"),this.model.allowScrolling?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this._originalScrollWidth=this.model.scrollSettings.width,this._renderScroller(),this.setWidthToColumns(),t.util.isNullOrUndefined(e.data("ejScroller"))||this.getScrollObject().refresh(),this.refreshScrollerEvent()):(this.element.children(".e-gridheader").removeClass("e-scrollcss"),this.element.get(0).style.width.length==0&&this.element.css("width","auto"),this.setWidthToColumns()),this._addLastRow())}tt||(t.util.isNullOrUndefined(r.scrollSettings)&&this._columnsPixelConvert(),this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0&&(this._groupingAction(!0),this._recalculateIndentWidth()),!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&this.model.allowScrolling&&(ct=this.getScrollObject()),lt=this.model.enableRTL?"e-summaryscroll e-rtl":"e-summaryscroll",this.model.allowScrolling&&this.model.showSummary&&(ct._vScroll&&this.element.find(".e-summaryrow.e-scroller").addClass(lt),this._scrollFooterColgroup()));break;case"currentIndex":this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?(at=Math.ceil(r.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._refreshVirtualView(at),this._refreshVirtualViewScroller(!0)):this._scrollObject.option("scrollTop",r.currentIndex*this.getRowHeight());break;case"locale":this.model.locale=r[u];this.model.query=this.commonQuery.clone();this._destroy();this.element.css("margin-top","0px").addClass("e-grid"+this.model.cssClass);this._init();break;case"dataSource":for(e=this.element.find(".e-gridcontent").first(),n.isFunction(r.dataSource)||this.resetModelCollections(),this._gridRecordsCount==1&&!t.isNullOrUndefined(this._cDeleteData)&&n.inArray(this._cDeleteData[0],this._dataSource())==-1&&this.model.editSettings.allowDeleting&&(this._gridRecordsCount=this._dataSource().length),f=0;f<this.model.columns.length;f++)this.model.columns[f].template!==i&&(this._columntemplaterefresh=!0);this._updateDataSource=!0;this._refreshDataSource(this._dataSource());this.element.children(".e-gridfooter").remove();this.model.showSummary&&this.model.currentViewData.length>0&&(l=this._renderGridFooter(),t.isNullOrUndefined(l)||l.insertAfter(e));(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow();break;case"selectedRowIndex":this._selectedRow()!=-1&&n.inArray(this._selectedRow(),this.selectedRowsIndexes)==-1?(this.model.currentIndex=this._selectedRow(),this.selectRows(this._selectedRow())):this._selectedRow()==-1&&(this.clearSelection(),this.selectedRowsIndexes=[]);break;case"selectedRowIndices":if(this.model.allowSelection==!0&&this.model.selectionType=="multiple"&&this._selectedMultipleRows().length>0){for(this.clearSelection(),this.selectedRowsIndexes=this._selectedMultipleRows(),this._selectedMultipleRows(this.selectedRowsIndexes),f=0;f<this.selectedRowsIndexes.length;f++)vt=this.getRowByIndex(this.selectedRowsIndexes[f]),vt.attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active");this.model.selectedRecords=this.getSelectedRecords()}else this._selectedMultipleRows().length==0&&(this.clearSelection(),this.selectedRowsIndexes=[]);break;case"editType":this._selectedRow()!=-1&&n.inArray(this._selectedRow(),this.selectedRowsIndexes)==-1&&this.selectRows(this._selectedRow());break;case"editSettings":n.extend(this.model.editSettings,r[u]);this.refreshToolbar();this.refreshContent(!0);this.refreshBatchEditMode();this._tdsOffsetWidth=[];n("#"+this._id+"_dialogEdit").data("ejDialog")&&n("#"+this._id+"_dialogEdit").ejDialog("destroy");n("#"+this._id+"_dialogEdit_wrapper,#"+this._id+"_dialogEdit").remove();n("#"+this._id+"_externalEdit").remove();this.getContentTable().find(".e-insertedrow").remove();this.model.isEdit=!1;this.model.editSettings.editMode!="normal"&&(this.model.editSettings.showAddNewRow=!1);this.model.editSettings.showAddNewRow||this.getContentTable().find(".e-addedrow").length&&this.cancelEdit();(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&(this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="dialogtemplate"?this.element.append(this._renderDialog()):(this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate")&&this.element.append(this._renderExternalForm()));(this.model.editSettings.allowDeleting&&this.model.editSettings.showDeleteConfirmDialog||this.model.editSettings.editMode=="batch"&&this.model.editSettings.showConfirmDialog)&&t.isNullOrUndefined(this._confirmDialog)&&this._renderConfirmDialog();this._enableEditingEvents();this.refreshToolbar();break;case"allowResizing":this.model.allowResizing=r[u];this.model.allowResizing?(this._on(this.element,t.eventType.mouseMove,this._mouseMove),this._on(this.element,"mouseup",this._mouseUp),this._resizer=this._resizer||new t.gridFeatures.gridResize(this)):(this._off(this.element,t.eventType.mouseMove,this._mouseMove),this._off(this.element,"mouseup",this._mouseUp),this.model.allowResizeToFit||(this._resizer=null));break;case"allowResizeToFit":this.model.allowResizeToFit?(this._on(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this._resizer=this._resizer||new t.gridFeatures.gridResize(this),this.setWidthToColumns()):(this._off(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this.model.allowResizing||(this._resizer=null));break;case"allowReordering":this.model.allowReordering=r[u];this.model.allowReordering?this._headerCellreorderDragDrop():this.model.allowGrouping||this.element.find(".e-draggable, .e-droppable").ejDraggable("destroy");break;case"allowRowDragAndDrop":this.model.allowRowDragAndDrop?(this._rowsDragAndDrop(),this.model.selectionType=="multiple"&&this._on(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this.model.allowScrolling&&this.getContent().ejScroller({thumbStart:function(){return!1}})):(this._off(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this.getContent().ejDroppable("destroy"),n(this.getRows()).ejDraggable("destroy"),this.getContent().ejScroller({thumbStart:null}));break;case"showSummary":case"summaryRows":if(u=="showSummary"&&r[u]&&this.addSummaryTemplate(),u!="showSummary"||r[u]){if(u=="summaryRows"&&this.model.showSummary||u=="showSummary"){this.element.children(".e-gridfooter").remove();this.element.children(".e-gridfooter").remove();var e=this.element.find(".e-gridcontent").first(),it=this.model.query.queries,rt=[];for(f=0;f<it.length;f++)it[f].fn==="onPage"&&(rt=it.splice(f,1));v=this.model.query;this._setSummaryAggregate(v);rt.length&&v.queries.push(rt[0]);this.model.currentViewData.length&&(this._isLocalData?(this._remoteSummaryData=this._dataManager.executeLocal(v).aggregates,l=this._renderGridFooter(),t.isNullOrUndefined(l)||l.insertAfter(e)):(ut=this,yt=this._dataManager.executeQuery(v),yt.done(function(n){ut.element.children(".e-gridfooter").remove();ut._remoteSummaryData=n.aggregates;var i=this._renderGridFooter();t.isNullOrUndefined(i)||i.insertAfter(e)})));this.model.allowGrouping&&(this._rowCol=this._captionSummary(),this._isCaptionSummary=(this._rowCol!=null&&this._rowCol.length)>0?!0:!1,this.refreshContent(!0))}}else this.element.children(".e-gridfooter").remove();break;case"enableAltRow":this.model.enableAltRow=r[u];this.addInitTemplate();this.refreshContent();break;case"toolbarSettings":n.extend(this.model.toolbarSettings,r[u]);this.element.children(".e-gridtoolbar").remove();this.model.toolbarSettings.showToolbar&&this._renderToolBar().insertBefore(this.element.find(".e-gridheader").first());break;case"allowSorting":this.model.allowSorting=r[u];this.model.allowSorting||this.clearSorting();break;case"selectionSettings":n.extend(this.model.selectionSettings,r[u]);this.clearSelection();this.clearCellSelection();this.clearColumnSelection();this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1;this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection();break;case"sortSettings":n.extend(this.model.sortSettings,r[u]);this.refreshContent();break;case"contextMenuSettings":n.extend(this.model.contextMenuSettings,r[u]);!t.isNullOrUndefined(n("#"+this._id+"_Context").data("ejMenu"))&&n("#"+this._id+"_Context").ejMenu("destroy")&&n("#"+this._id+"_Context").remove();this.model.contextMenuSettings.enableContextMenu&&this._renderContext();break;case"enableRTL":this.model.enableRTL=r[u];o=this.model;o.query=this.commonQuery.clone();this.element.ejGrid("destroy");o.enableRTL?n("#"+this._id).addClass("e-rtl"):n("#"+this._id).removeClass("e-rtl");n("#"+this._id).ejGrid(o);break;case"enableTouch":this.model.enableTouch=r[u];this.model.enableTouch?(this._on(this.element,"swipeleft swiperight",".e-gridcontent .e-table",n.proxy(this._touchGrid,this)),this.element.removeClass("e-touch")):(this.element.addClass("e-touch"),this._off(this.element,"swipeleft swiperight",".e-gridcontent .e-table"));break;case"allowSelection":r[u]?(this._off(this.element,n.isFunction(n.fn.tap)&&this.model.enableTouch?"tap":"click",this._clickHandler),this._on(this.element,"click",this._clickHandler),this._initSelection()):(this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1);break;case"query":this.commonQuery=n.extend(!0,{},r[u]);break;case"showStackedHeader":case"stackedHeaderRows":this.model.showStackedHeader&&r.stackedHeaderRows&&r.stackedHeaderRows.length>0?(t.getObject("stackedHeaderRows.length",r)&&(this.model.stackedHeaderRows=r.stackedHeaderRows),this._refreshStackedHeader()):this.getHeaderTable().find(".e-stackedHeaderRow").remove();break;case"allowTextWrap":case"textWrapSettings":n.extend(this.model.textWrapSettings,r[u]);this._setTextWrap();break;case"rowTemplate":this.refreshContent(!0);break;case"detailsTemplate":this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0?(this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this._getLocalizedLabels("FrozenNotSupportedException")),this._alertDialog.ejDialog("open")):(ft=this.element.children(".e-gridheader"),ft.find("div").first().empty().append(this._renderGridHeader().find("table")),this.model.allowFiltering&&this.model.filterSettings.filterType=="filterbar"&&this._renderFiltering(),this.setGridHeaderContent(ft),this.refreshContent(!0),this.model.allowReordering&&this._headerCellreorderDragDrop(),this.model.allowGrouping&&this._headerCellgDragDrop())}},resetModelCollections:function(){this.model.groupSettings.groupedColumns=[];this.model.filterSettings.filteredColumns=[];this.filterColumnCollection=[];this.model.sortSettings.sortedColumns=[];this.model.pageSettings.currentPage=this.defaults.pageSettings.currentPage},_enableGrouping:function(){var h,f,r,e,o,s,u;if(this.refreshTemplate(),this.model.groupSettings.showToggleButton)for(h=this.model.allowFiltering&&(this.model.filterSettings.filterType=="menu"||this.model.filterSettings.filterType=="excel"),f=this.model.columns,r=0;r<f.length;r++)e=this.getHeaderTable().find(".e-columnheader").find(".e-headercell").not(".e-stackedHeaderCell, .e-detailheadercell").eq(r),o=f[r].field,n.inArray(o,this._disabledGroupableColumns)!=-1||t.isNullOrUndefined(o)||o==""||e.find(".e-gridgroupbutton").length||(n.inArray(o,this.model.groupSettings.groupedColumns)!=-1?e.append(this._getToggleButton().addClass("e-toggleungroup")):e.append(this._getToggleButton().addClass("e-togglegroup")),h&&(f[r].allowFiltering==i||f[r].allowFiltering===!0)&&(!t.isNullOrUndefined(f[r].field)||f[r].field=="")&&f[r].type!="checkbox"&&(e.addClass("e-headercellgroupfilter"),e.find(".e-filtericon").addClass("e-groupfiltericon")),e.addClass("e-headercellgroup"));if(this.model.groupSettings.showToggleButton||this.getHeaderTable().find(".e-gridgroupbutton").remove(),this.element.find(".e-groupdroparea").remove(),this.model.groupSettings.showDropArea&&(this.model.showColumnChooser&&this.element.find(".e-ccButton").length>0?this.element.find(".e-ccButton").after(this._renderGroupDropArea()):this.element.prepend(this._renderGroupDropArea()),t.gridFeatures.dragAndDrop&&(this._groupHeaderCelldrag(),this._headerCellgDragDrop())),!t.isNullOrUndefined(this.model.groupSettings.groupedColumns.length)&&this.model.groupSettings.groupedColumns.length){for(s={},s.columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],s.requestType=t.Grid.Actions.Grouping,this.element.find(".e-groupdroparea").empty(),u=0;u<this.model.groupSettings.groupedColumns.length-1;u++)this._addColumnToGroupDrop(this.model.groupSettings.groupedColumns[u]);for(u=0;u<this.model.groupSettings.groupedColumns.length;u++)t.isNullOrUndefined(this.getsortColumnByField(this.model.groupSettings.groupedColumns[u]))&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[u],direction:t.sortOrder.Ascending});this._processBindings(s)}},addIgnoreOnExport:function(n){typeof n=="string"?this.ignoreOnExport.push(n):this.ignoreOnExport=this.ignoreOnExport.concat(n)},addIgnoreOnToolbarServerClick:function(n){typeof n=="string"?this.ignoreOnToolbarServerClick.push(n):this.ignoreOnToolbarServerClick=this.ignoreOnToolbarServerClick.concat(n)},_decode:function(t){return n("<div/>").html(t).text()},_htmlEscape:function(n){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};return n.replace(/[&<>"']/g,function(n){return t[n]})},_mappingSelection:function(){var i,n;if(t.gridFeatures.selection&&this._enableCheckSelect){for(this.multiSelectCtrlRequest=!0,i=[],n=0;n<this._currentJsonData.length;n++)t.pvt.getObject(this._selectionMapColumn,this._currentJsonData[n])==!0&&i.push(n);this.selectedRowsIndexes=[];this.checkSelectedRowsIndexes=[];this._selectedRow(-1);this._selectionByGrid=!0;i.length&&this.selectRows(i);this._selectionByGrid=!1}},_headerCheckUpdateAll:function(n){for(var r=[],r=this._isLocalData?this.model.searchSettings.key!=""||this.model.filterSettings.filteredColumns.length?this.getFilteredRecords():this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json:this._dataSource():this._currentJsonData,i=0;i<r.length;i++)r[i][this._selectionMapColumn]=n,this.batchChanges.changed.push(r[i]);this.batchSave();return},_getForeignKeyData:function(n){for(var r=this,f={},u,e,i=0;i<this.model.columns.length;i++)this.model.columns[i].foreignKeyValue&&this.model.columns[i].dataSource&&(u=t.isNullOrUndefined(r.model.columns[i].foreignKeyField)?r.model.columns[i].field:r.model.columns[i].foreignKeyField,e=this.model.columns[i].dataSource instanceof t.DataManager?this.model.columns[i].foreignKeyData:this.model.columns[i].dataSource,e.filter(function(e){var o=t.getObject(r.model.columns[i].field,n),s=!isNaN(parseFloat(o))&&isFinite(o)?parseFloat(o):o;e[u]==s&&(f[u]=e)}));return f},_foreignKeyBinding:function(i,r,u){var f,e,o=n("#"+u).ejGrid("instance"),s;return i=o.model.columns[i],s=i.dataSource instanceof t.DataManager?i.foreignKeyData:i.dataSource,s.filter(function(n){if(t.getObject(i.foreignKeyField,n)==r)return e=t.getObject(i.foreignKeyValue,n),f=i.type=="date"?new Date(e):e}),i.format&&(f=o.formatting(i.format,f,o.model.locale)),f},_checkForeignKeyBinding:function(){if(this.model.columns.length){var i,r,u,n;for(i=0,r=this.model.columns,u=r.length;i<u;i++)n=r[i],n.hasOwnProperty("foreignKeyField")&&n.dataSource instanceof t.DataManager&&this._relationalColumns.push({field:n.field,key:n.foreignKeyField,value:n.foreignKeyValue,dataSource:n.dataSource});this._$fkColumn=!0}},_setForeignKeyData:function(r){var h,k,c,p,l,s,a;if(this._relationalColumns.length){var w=this._relationalColumns,d=this._relationalColumns.length,v=[],o=this.model.currentViewData,u={},f,y,b,e=this;if(o.length==0)for(h=0,k=this.model.columns.length;h<k;h++)c=this.model.columns[h],!t.isNullOrUndefined(c.foreignKeyField)&&c.dataSource instanceof t.DataManager&&(c.foreignKeyData=[]);for(p=t.proxy(function(n){this._trigger("actionFailure",{requestType:"fetchingforeigndata",error:n.error})},this),this.element.ejWaitingPopup("model.showOnInit")||this.element.ejWaitingPopup("show"),l=0;l<d;l++)if(0 in o){for(f=w[l],u.field=f.field,u.keyField=f.key,u.valueField=f.value,u.dataSource=f.dataSource,u.query=(new t.Query).select([u.valueField,u.keyField]),y=t.distinct(o.level?o.records:o,u.field,!0),s=[],a=0;a<y.length;a++)s.push(new t.Predicate(u.keyField,"equal",y[a][u.field],!0));if(s=t.Predicate.or(s),u.query.where(s),this._trigger("actionBegin",n.extend(u,{requestType:"fetchingforeigndata",column:this.getColumnByField(u.field)})))return;b=u.dataSource.ready===i?u.dataSource.executeQuery(u.query,null,p):u.dataSource.ready.fail(p);v.push(b)}n.when.apply(this,v).then(function(){var u,t,n,o,i,s;for(e.element.ejWaitingPopup("hide"),u=[].slice.call(arguments,0,arguments.length),n=0,o=v.length;n<o;n++)for(f=w[n],i=0,s=e.model.columns.length;i<s;i++)t=e.model.columns[i],t.foreignKeyField==f.key&&t.foreignKeyValue==f.value&&(t.foreignKeyData=u[n].result);e.initialRender?e._initGridRender():e.sendDataRenderingRequest(r)})}},_isRelationalRendering:function(n){return 0 in this._relationalColumns&&["add","beginedit","cancel"].indexOf(n.requestType)==-1}}}(jQuery,Syncfusion),function(n,t,i){t.gridFeatures=t.gridFeatures||{};t.gridFeatures.edit={_processEditing:function(){var o=this._columnToSelect(),c=o.query,r=[],p=o.fields,f=[],w,s=this._relationalColumns,b=s.length,v,e,k,l,d,y,u,h,a,g;if(this.model.query._fromTable!=""&&c.from(this.model.query._fromTable),v=p.length,v&&f.push(this._dataManager.executeQuery(c)),b!=0)for(l=0;l<b;l++)e=s[l],k=(new t.Query).select([e.key,e.value]),w=e.dataSource.ready===i?e.dataSource.executeQuery(k):e.dataSource.ready,f.push(w);if(o.fieldsDrop.length)for(d=o.fieldsDrop.length,y=o.fieldsDrop,u=0;u<d;u++)h=[],a=this.getColumnByField(y[u]),t.isNullOrUndefined(t.getObject("editParams.fields.text",a))?r.push(y[u]):(g=a.editParams,r.push(g.fields)),r[u]instanceof Object?(h.push(r[u].text),h.push(r[u].value)):h.push(r[u]),c=(new t.Query).select(h),f.push(a.dataSource.executeQuery(c));f.length!=0?n.when.apply(this,f).then(t.proxy(function(){for(var o,l,i=[].slice.call(arguments,0,arguments.length),n=0,e=0,u=0,h=v,c,a=f.length;n<a;n++){while(h>0)t.createObject(p[--h],i[n].result,this._dropDownManager),c=!0;if(!c||n!=0){if(s.length!=e){o=s[e];l=o.key+"."+o.value;t.createObject(l,i[n].result,this._dropDownManager);e++;continue}s.length==e&&r.length&&(r[u]instanceof Object?(t.createObject(r[u].text,i[n].result,this._dropDownManager),t.createObject(r[u].value,i[n].result,this._dropDownManager)):t.createObject(r[u],i[n].result,this._dropDownManager),u++)}}this._initiateTemplateRendering()},this)):this._initiateTemplateRendering()},_initiateTemplateRendering:function(){this.model.editSettings.editMode=="normal"?this.addEditingTemplate():this.model.editSettings.editMode=="batch"?this.addBatchEditTemplate():this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="inlineform"?this.addDialogEditingTemplate():this.addExternalDialogEditingTemplate();this.model.editSettings.showAddNewRow&&this.model.editSettings.editMode=="normal"&&this._startAdd()},addEditingTemplate:function(){var c,s,r,u,e,w,f,b,h;if(this.model.columns.length!=0){var o=t.buildTag("tbody"),v=t.buildTag("tr"),y=t.buildTag("td","",{},{colSpan:this.model.scrollSettings.frozenColumns>0?this.model.scrollSettings.frozenColumns:this.model.columns.length}),p=t.buildTag("form","",{},{id:this._id+"EditForm","class":"gridform"}),l=t.buildTag("table.e-table"),k=t.buildTag("tbody"),a=t.buildTag("tr");for(o.append(v),v.append(y),y.append(p),c=n(document.createElement("colgroup")),p.append(l),l.append(c),k.append(a).appendTo(l),this.model.scrollSettings.frozenColumns>0&&(s=o.clone(),s.find("td").first().prop("colSpan",this.model.columns.length-this.model.scrollSettings.frozenColumns)),r=0;r<this.model.columns.length;r++)(u=t.buildTag("td.e-rowcell"),a.append(u.get(0)),this.model.columns[r].type!="checkbox"||this._isMapSelection)&&(t.isNullOrUndefined(this.model.columns[r].commands)&&(!this.model.columns[r].template||this.model.columns[r].template&&this.model.columns[r].allowEditing!=!1&&this.model.columns[r].field)?this._initCellEditType(r,u):this.model.columns[r].template?(f={},e=this.model.columns[r].headerText,f["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this),n.views.helpers(f),t.isNullOrUndefined(e)||t.isNullOrUndefined(e.match(/[^0-9\s\w]/g))||(e=e.replace(/[^0-9\s\w]/g,"_")),n("#"+this._id+e+r+"_Template").remove(),w=this._createTemplateElement(this.model.columns[r]),u.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+w.id+"','"+r+"')}}")):this.model.columns[r].commands&&(f={},f["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,n.views.helpers(f),n("#"+this._id+this.model.columns[r].headerText.replace(/[^a-z0-9|s_]/gi,"")+r+"_UnboundTemplate").remove(),b=this._createUnboundElement(this.model.columns[r],r),u.addClass("e-unboundcell").addClass("e-"+this.model.columns[r].headerText.replace(/[^a-z0-9|s_]/gi,"")+r).html("{{:~_"+this._id+"UnboundTemplate('"+b.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&u.addClass("e-frozenunbound"),this._isUnboundColumn=!0),this.model.columns[r].textAlign!=i&&u.css("text-align",this.model.columns[r].textAlign),this.model.columns[r].allowEditing==!1&&u.find(".e-field").attr("disabled",!0).addClass("e-disable"),this.model.columns[r].isPrimaryKey===!0&&u.find(".e-field").attr("disabled",!0).addClass("e-disable"),this.model.columns[r].isIdentity===!0&&(u.find(".e-field").addClass("e-identity"),this._identityKeys.push(n.trim(this.model.columns[r].field)),this._identityKeys=t.isNullOrUndefined(n.uniqueSort)?n.unique(this._identityKeys.sort()):n.uniqueSort(this._identityKeys.sort())),h=n(document.createElement("col")),this.model.columns[r].priority&&(u.addClass("e-table-priority-"+this.model.columns[r].priority),h.addClass("e-table-priority-"+this.model.columns[r].priority)),this.model.columns[r].visible===!1&&(h.css("display","none"),u.addClass("e-hide")),t.isNullOrUndefined(this.model.columns[r].cssClass)||u.addClass(this.model.columns[r].cssClass),!this.model.groupSettings.showGroupedColumn&&u.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[r].field+"'}}e-hide{{/if}}{{/for}}")&&h.css("display","none"),c.append(h),r==this.model.scrollSettings.frozenColumns-1&&(a=s.find("tr").last(),c=s.find("colgroup"),n.templates(this._id+"_JSONFrozenEditingTemplate",o.html()),o=s));n.templates(this._id+"_JSONEditingTemplate",o.html())}},addDialogEditingTemplate:function(){var r,o,y,e,p;if(this.model.columns.length!=0){var h=t.buildTag("div"),s=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"}),l=t.buildTag("table"),f,a,u,v,c;for(r=0;r<this.model.columns.length;r++)(this.model.columns[r].type!="checkbox"||this._isMapSelection)&&(this.model.editSettings.editMode=="dialog"?(v="tr",c="td"):v=c="div",f=t.buildTag(v),a=t.buildTag(c,"",{"text-align":"right"}).addClass("e-label"),u=t.buildTag(c,"",{"text-align":"left"}).addClass("e-rowcell"),f.is("div")&&f.addClass("e-gridFromDiv"),this.model.columns[r].priority&&this.model.editSettings.editMode=="inlineform"&&f.addClass("e-table-priority-"+this.model.columns[r].priority),f.append(a.get(0)).append(u.get(0)),this.model.columns[r].headerText==i&&(this.model.columns[r].headerText=this.model.columns[r].field),a.append("<label for='"+this.model.columns[r].field+"'>"+this.model.columns[r].headerText+"<\/label>"),t.isNullOrUndefined(this.model.columns[r].commands)&&(!this.model.columns[r].template||this.model.columns[r].template&&this.model.columns[r].allowEditing!=!1&&this.model.columns[r].field)?this._initCellEditType(r,u):this.model.columns[r].template?(e={},o=this.model.columns[r].headerText,e["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this),n.views.helpers(e),t.isNullOrUndefined(o)||t.isNullOrUndefined(o.match(/[^0-9\s\w]/g))||(o=o.replace(/[^0-9\s\w]/g,"_")),n("#"+this._id+o+r+"_Template").remove(),y=this._createTemplateElement(this.model.columns[r]),u.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+y.id+"','"+r+"')}}")):this.model.columns[r].commands&&(e={},e["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,n.views.helpers(e),n("#"+this._id+this.model.columns[r].headerText.replace(/[^a-z0-9|s_]/gi,"")+r+"_UnboundTemplate").remove(),p=this._createUnboundElement(this.model.columns[r],r),u.addClass("e-unboundcell").addClass("e-"+this.model.columns[r].headerText.replace(/[^a-z0-9|s_]/gi,"")+r).html("{{:~_"+this._id+"UnboundTemplate('"+p.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&u.addClass("e-frozenunbound"),this._isUnboundColumn=!0,f.addClass("e-hide")),this.model.columns[r].allowEditing==!1&&u.find(".e-field").attr("disabled",!0).addClass("e-disable"),this.model.columns[r].isIdentity===!0&&(u.find(".e-field").addClass("e-identity"),this._identityKeys.push(n.trim(this.model.columns[r].field)),this._identityKeys=t.isNullOrUndefined(n.uniqueSort)?n.unique(this._identityKeys.sort()):n.uniqueSort(this._identityKeys.sort())),this.model.columns[r].visible===!1&&f.addClass("e-hide"),t.isNullOrUndefined(this.model.columns[r].cssClass)||u.addClass(this.model.columns[r].cssClass),this.model.editSettings.editMode=="dialog"?(s.append(l),l.append(f)):s.append(f),s.appendTo(h),this.model.columns[r].isPrimaryKey===!0&&(u.find(".e-field").attr("disabled",!0).addClass("e-disable"),this._primaryKeys.push(n.trim(this.model.columns[r].field)),this._primaryKeys=t.isNullOrUndefined(n.uniqueSort)?n.unique(this._primaryKeys.sort()):n.uniqueSort(this._primaryKeys.sort())));this.model.editSettings.editMode=="dialog"&&s.append(l);h=this.renderDiaglogButton(s,h);n.templates(this._id+"_JSONDialogEditingTemplate",h.html())}},_editEventTrigger:function(n){if(n.requestType=="save"||n.requestType=="delete"){var r={data:n.data,rowData:n.data,previousData:n.previousData,action:n.action!==i?n.action:n.requestType};t.isNullOrUndefined(n.foreignKeyData)||(r.foreignKeyData=n.foreignKeyData);this._trigger("end"+r.action.charAt(0).toUpperCase()+r.action.slice(1),r)}},_compiledDropDownTemplate:function(i,r,u,f){var s={_gridFormatting:this.formatting},e,o;return n.views.helpers(s),e=t.buildTag("select"),o=t.buildTag("option",f!=null?"{{:~_gridFormatting('"+f+"',"+r+",'"+this.model.locale+"')}}":"{{:"+r+"}}",{},{value:"{{:"+i+"}}"}),e.append(o),n.templates(e.html())},_initCellEditType:function(r,u){var o=this.model.columns[r].field,a,it,c,d,g,ut,ft,f,h,nt,tt,et,w,l,y,s,e,k,ot,st,ht;this.model.columns[r].foreignKeyValue&&(this.model.columns[r].editType="dropdownedit");this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&(e=n.inArray(this.model.columns[r].field,this._dataSource().adaptor.value),e!=-1&&(a=this._dataSource().adaptor.value[e],it=this._dataSource().adaptor.key[e]));this.model.columns[r].editTemplate&&(this.model.columns[r].editType="edittemplate");t.isNullOrUndefined(this.model.columns[r].editType)&&(this.model.columns[r].editType=this.model.columns[r].type=="date"||this.model.columns[r].type=="datetime"?this.model.columns[r].type+"picker":"stringedit");this.model.isResponsive&&u.attr("data-cell",this._decode(this.model.columns[r].headerText));var v=(o||"").split("."),rt=v.length-1,p="";for(t.isNullOrUndefined(o)||(o=o.replace(/[^a-z0-9\s_]/gi,""));rt;)p+="(",rt--;switch(this.model.columns[r].editType){case"edittemplate":c=this.model.columns[r].editTemplate.create;typeof c=="string"?(d=t.util.getObject(c,window),g=n.isFunction(d)?n(d()).attr({id:this._id+o,name:this.model.columns[r].field,"class":"e-field"}):n(c).length==1&&n(c).get(0).tagName=="SCRIPT"?n(n(c).html()).attr({id:this._id+o,name:this.model.columns[r].field,"class":"e-field"}):n(c).attr({id:this._id+o,name:this.model.columns[r].field,"class":"e-field"})):g=n(c()).attr({id:this._id+o,name:this.model.columns[r].field,"class":"e-field"});u.append(g);break;case"stringedit":u.html(t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{html:"+p+"#data['"+v.join("'] || {})['")+"']}}",id:this._id+o,name:this.model.columns[r].field}));break;case"booleanedit":u.html('{{if #data["'+v.join('"]["')+'"]}} <input class="e-field e-checkbox" type ="checkbox" id='+this._id+o+" name="+this.model.columns[r].field+' checked="checkbox"><\/input>{{else}} <input class="e-field e-checkbox" type ="checkbox" id='+this._id+o+" name="+this.model.columns[r].field+" > {{/if}}");this.model.editSettings.editMode=="normal"&&u.addClass("e-boolcell");break;case"numericedit":ut=t.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:"+p+"#data['"+v.join("'] || {})['")+"']}}",id:this._id+o,name:this.model.columns[r].field});u.append(ut);break;case"datepicker":case"datetimepicker":ft=t.buildTag("input.e-"+this.model.columns[r].editType+" e-field","",{},{type:"text",value:"{{:"+p+"#data['"+v.join("'] || {})['")+"']}}",id:this._id+o,name:this.model.columns[r].field});u.append(ft);break;case"dropdownedit":if(f=this.model.columns[r],h=[],t.isNullOrUndefined(f.dataSource)){if(t.isNullOrUndefined(f.dataSource)&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&f.field==a&&(et=this.model.dataSource.adaptor.foreignData[e],nt=this.model.dataSource.adaptor.key[e],tt=this.model.dataSource.adaptor.value[e],h=et),l=f.field,t.isNullOrUndefined(t.getObject(l,this._dropDownManager)))return;if(w=t.getObject(l,this._dropDownManager),y=0 in w&&typeof w[0]=="object",s=s=t.dataUtil.mergeSort(t.distinct(w,y?l:i,y?!1:i)),h.length==0)if(t.isNullOrUndefined(f.dataSource)&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&f.field==a)for(e=0;e<s.length;e++)h.push({text:s[e][0],value:s[e][1]});else for(e=0;e<s.length;e++)h.push({text:s[e],value:s[e]})}else if(t.isNullOrUndefined(f.foreignKeyField)&&f.dataSource instanceof t.DataManager){var l=f.field,b=t.getObject(l,this._dropDownManager),y=0 in b&&typeof b[0]=="object",s=s=t.dataUtil.mergeSort(t.distinct(b,y?l:i,y?!1:i));if(t.isNullOrUndefined(t.getObject("editParams.fields.text",f))||(h=b),h.length==0)for(e=0;e<s.length;e++)h.push({text:s[e],value:s[e]})}else h=!t.isNullOrUndefined(f.foreignKeyField)&&(f.field in this._dropDownManager||f.dataSource instanceof t.DataManager)?t.getObject(f.foreignKeyField+"."+f.foreignKeyValue,this._dropDownManager):f.dataSource;ot=t.isNullOrUndefined(f.foreignKeyField)?f.field:f.foreignKeyField;f.foreignKeyValue?k=this._compiledDropDownTemplate(ot,f.foreignKeyValue,f.type,f.format):this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&f.field==a?k=this._compiledDropDownTemplate(nt?nt:"value",tt?tt:"text",f.type,f.format):(st=t.getObject("editParams.fields.value",f)||"value",ht=t.getObject("editParams.fields.text",f)||"text",k=this._compiledDropDownTemplate(st,ht,f.type,f.format));u.get(0).innerHTML=!t.isNullOrUndefined(f.editParams)&&this._dataSource()instanceof t.DataManager&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&f.field==a?"<input data-value='{{:"+it+"}}'/>":["<select>",k.render(h),"<\/select>"].join("");u.find("select,input").prop({id:this._id+o,name:f.field}).addClass("e-field e-dropdownlist")}},addBatchEditTemplate:function(){if(this.model.columns.length!=0){for(var u=t.buildTag("div","",{display:"none"},{id:this._id+"_BulkEditTemplate"}),r,i=0,f=this.model.columns.length;i<f;i++)(t.isNullOrUndefined(this.model.columns[i].commands)&&t.isNullOrUndefined(this.model.columns[i].template)||this.model.columns[i].template&&this.model.columns[i].allowEditing!=!1&&this.model.columns[i].field)&&(r=t.buildTag("div","",{},{id:this.model.columns[i].field.replace(/[^a-z0-9\s_]/gi,t.pvt.consts.complexPropertyMerge)+"_BulkEdit"}),this._initCellEditType(i,r),u.append(r)),this.model.columns[i].isPrimaryKey===!0&&(this._primaryKeys.push(n.trim(this.model.columns[i].field)),this._primaryKeys=t.isNullOrUndefined(n.uniqueSort)?n.unique(this._primaryKeys.sort()):n.uniqueSort(this._primaryKeys.sort())),this.model.columns[i].isIdentity===!0&&(r.find(".e-field").addClass("e-identity"),this._identityKeys.push(n.trim(this.model.columns[i].field)),this._identityKeys=t.isNullOrUndefined(n.uniqueSort)?n.unique(this._identityKeys.sort()):n.uniqueSort(this._identityKeys.sort()));u.children().length&&(this._bulkEditTemplate=u)}},addExternalDialogEditingTemplate:function(){var e,i,u,r,f;if(this.model.columns.length!=0){for(e=t.buildTag("td","",{"text-align":"left"}).addClass("e-rowcell"),i=0;i<this.model.columns.length;i++)(this.model.columns[i].type!="checkbox"||this._isMapSelection)&&(t.isNullOrUndefined(this.model.columns[i].commands)&&!t.isNullOrUndefined(this.model.columns[i].template)&&this.model.columns[i].allowEditing!=!1&&this.model.columns[i].field&&!t.isNullOrUndefined(this.model.columns[i].editTemplate)&&this._initCellEditType(i,e),this.model.columns[i].isPrimaryKey===!0&&(this._primaryKeys.push(n.trim(this.model.columns[i].field)),this._primaryKeys=t.isNullOrUndefined(n.uniqueSort)?n.unique(this._primaryKeys.sort()):n.uniqueSort(this._primaryKeys.sort())));u=t.buildTag("div","",{display:"none"});r=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"});this.model.editSettings.editMode=="dialogtemplate"&&this.model.editSettings.dialogEditorTemplateID!=null?f=this.model.editSettings.dialogEditorTemplateID:this.model.editSettings.editMode=="externalformtemplate"&&this.model.editSettings.externalFormTemplateID!=null?(f=this.model.editSettings.externalFormTemplateID,r.addClass("e-display")):(f=this.model.editSettings.inlineFormTemplateID,r.addClass("e-display"));r.html(n(f).html());u=this.renderDiaglogButton(r,u);n.templates(this._id+"_JSONdialogTemplateMode",u.html())}},_editdblClickHandler:function(i){var r=n(i.target);if(r.closest(".e-grid").attr("id")===this._id&&(r.hasClass("e-rowcell")||r.closest("td").hasClass("e-rowcell"))&&(!this.model.isEdit||this.model.editSettings.showAddNewRow&&this.model.editSettings.editMode=="normal")){if(this._$currentTr=this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0?this.getRowByIndex(r.closest("tr").index()):r.closest("tr"),!t.isNullOrUndefined(this._previousTr)){if(this._$currentTr.length>1&&this._$currentTr[0]!=this._previousTr[0]&&this._$currentTr[1]!=this._previousTr[1])return;if(this._$currentTr[0]!=this._previousTr[0])return}this.startEdit(this._$currentTr)}},_columnToSelect:function(){for(var r=[],u=[],f=this.model.columns,i=0;i<this.model.columns.length;i++)this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&n.inArray(this.model.columns[i].field,this._dataSource().adaptor.value)!=-1&&t.isNullOrUndefined(this.model.columns[i].editType)&&(this.model.columns[i].editType="dropdownedit"),this.model.columns[i].editType===t.Grid.EditingType.Dropdown&&t.isNullOrUndefined(this.model.columns[i].dataSource)&&r.push(this.model.columns[i].field),f[i].editType===t.Grid.EditingType.Dropdown&&t.isNullOrUndefined(f[i].foreignKeyField)&&f[i].dataSource instanceof t.DataManager&&u.push(this.model.columns[i].field);return r.length?{query:t.Query().select(r),fields:r,fieldsDrop:u}:{query:t.Query(),fields:[],fieldsDrop:u}},_renderExternalForm:function(){var f=t.buildTag("div","",{display:"none"},{id:this._id+"_externalEdit","class":"e-form-container"}),n=t.buildTag("div","","",{id:this._id+"_eFormHeader","class":"e-form-titlebar"}),e=t.buildTag("span","","",{"class":"e-form-title"}),i=t.buildTag("div","","",{id:this._id+"_eFormToggleBtn","class":"e-form-togglebtn"}),o=t.buildTag("span","","",{"class":"e-form-toggle-icon e-icon"});i.append(o);n.append(e).append(i);var r=t.buildTag("div","","",{id:this._id+"_eFormContent","class":"e-form-content"}),u=t.buildTag("div","","",{id:this._id+"_externalForm","class":"e-externalform"}),s=t.buildTag("div","","",{"class":"e-externalformedit"});return u.append(s),r.append(u),f.append(n).append(r)},_buttonClick:function(t){if(t.type=="close"){if(!this.model.isEdit)return;this.model.isEdit=!1;this.element.ejGrid("cancelEdit");this.refreshToolbar();return}if(t.keyCode!==i&&t.keyCode!=13&&t.keyCode!=0||this.model==null)return!0;this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="dialogtemplate"?t.target.id=="EditDialog_"+this._id+"_Save"?this.element.ejGrid("endEdit"):t.target.id=="EditDialog_"+this._id+"_Cancel"&&(this.element.ejGrid("cancelEdit"),n("#"+this._id+"_dialogEdit").ejDialog("close")):this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate"?n(t.target).hasClass("e-form-toggle-icon")?(this.element.ejGrid("cancelEdit"),n("#"+this._id+"_externalEdit").css("display","none")):t.target.id=="EditExternalForm_"+this._id+"_Save"?this.element.ejGrid("endEdit").length!==i&&n("#"+this._id+"_externalEdit").css("display","none"):t.target.id=="EditExternalForm_"+this._id+"_Cancel"&&(this.element.ejGrid("cancelEdit"),n("#"+this._id+"_externalEdit").css("display","none")):this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"?t.target.id=="InlineEditForm_"+this._id+"_Save"?this.element.ejGrid("endEdit"):t.target.id=="InlineEditForm_"+this._id+"_Cancel"&&this.element.ejGrid("cancelEdit"):this.element.ejGrid("cancelEdit")},_enableEditingEvents:function(){if(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding){if(this.model.editSettings.allowEditing&&this.model.editSettings.editMode!="batch"&&this.model.editSettings.allowEditOnDblClick?this._on(this.element,n.isFunction(n.fn.doubletap)&&this.model.enableTouch?"doubletap":"dblclick",".e-gridcontent",this._editdblClickHandler):(this._off(this.element,"dblclick",".e-gridcontent"),this._off(this.element,"doubletap",".e-gridcontent")),this._off(n("#"+this._id+"_dialogEdit"),"click ","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel"),this._off(n("#"+this._id+"_externalEdit"),"click ","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel"),n(this.element).off("click",".e-form-toggle-icon"),n(this.element).off("click ","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel"),this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="dialogtemplate")this._on(n("#"+this._id+"_dialogEdit"),"click ","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel",this._buttonClick);else if(this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate"){this._on(n("#"+this._id+"_externalEdit"),"click ","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel",this._buttonClick);n(this.element).on("click",".e-form-toggle-icon",n.proxy(this._buttonClick,this))}else if(this.model.editSettings.editMode=="batch")this._on(n(document),"touchstart mousedown",this._saveCellHandler),this._batchEnabled=!0;else if(this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate")n(this.element).on("click ","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel",n.proxy(this._buttonClick,this));this.model.editSettings.editMode!="batch"&&this._batchEnabled&&(this._off(n(document),"touchstart mousedown",this._saveCellHandler),this._batchEnabled=!1)}else this._off(n("#"+this._id+"_dialogEdit"),"click","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel"),n(this.element).off("click",".e-icon"),this._off(n("#"+this._id+"_externalEdit"),"click","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel"),n(this.element).off("click",".e-form-toggle-icon"),n(this.element).off("click","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel")},_multiRowDelete:function(){var i={},n,r,u;if(i.added=[],i.deleted=[],i.changed=[],i.deleted=this.getSelectedRecords(),n={},n.data=this.getSelectedRecords(),n.tr=this.getSelectedRows(),r=this._getForeignKeyData(n.data),t.isNullOrUndefined(r)||(n.foreignKeyData=r),n.requestType="delete",this._trigger("actionBegin",n))return!0;u=this;this._sendBulkReuqest(i,n)},deleteRow:function(r){var l,s,f,h,u,c,e,o;if(this.model.editSettings.allowDeleting&&(!this.model.isEdit||this.model.editSettings.editMode=="batch"||this.model.editSettings.showAddNewRow)){if(this.model.editSettings.showDeleteConfirmDialog&&!this._confirmDialog.is(":visible")){this._cDeleteData=r;this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open");return}if(n.isArray(r))this.selectRows(r),this._multiRowDelete();else if(this.model.editSettings.editMode=="batch")this._bulkDelete(this.getIndexByRow(r));else{if(this._primaryKeys.length==0&&!this.model.editSettings.allowEditing&&!this.model.editSettings.allowAdding)for(f=0;f<this.model.columns.length;f++)this.model.columns[f].isPrimaryKey===!0&&(this._primaryKeys.push(n.trim(this.model.columns[f].field)),this._primaryKeys=t.isNullOrUndefined(n.uniqueSort)?n.unique(this._primaryKeys.sort()):n.uniqueSort(this._primaryKeys.sort()));if(this._selectedRow()==-1&&t.isNullOrUndefined(r)){alert(this.localizedLabels.DeleteOperationAlert);return}for(t.isNullOrUndefined(r)&&(r=this.model.scrollSettings.enableVirtualization?this.getContentTable().find("tr[aria-selected='true']"):this.getRowByIndex(this._selectedRow())),this._primaryKeyValues=[],this._getPrimaryKeyValues(r),l=t.DataManager(this._currentJsonData),s=new t.Query,f=0;f<this._primaryKeys.length;f++)s=s.where(this._primaryKeys[f],t.FilterOperators.equal,this._primaryKeyValues[f]);if(h=l.executeLocal(s),u={},u.tr=r,u.data=u.rowData=h[0],c=this._getForeignKeyData(u.data),t.isNullOrUndefined(c)||(u.foreignKeyData=c),u.requestType=t.Grid.Actions.Delete,this._trigger("actionBegin",u))return!0;this._cDeleteData=h;!(t.isOnWebForms&&this.model.serverEvents&&this.model.serverEvents.indexOf("endDelete")!=-1)&&this._dataSource()instanceof t.DataManager&&!this._dataManager.dataSource.offline&&this._dataManager.dataSource.json!==i||this._dataSource().adaptor instanceof t.remoteSaveAdaptor?(e=this._dataManager.remove(this._primaryKeys[0],this._primaryKeys.length?t.getObject(this._primaryKeys[0],h[0]):null,this.model.query),o=this,n.isFunction(e.promise)?(e.done(function(){o._processBindings(u);o._primaryKeyValues=[];o._cDeleteData=null}),e.fail(function(n){u.error=n;o._cDeleteData=null;o._trigger("actionFailure",u)})):this._processBindings(u)):this._processBindings(u);e!=i&&n.isFunction(e.promise)||(this._primaryKeyValues=[],this._cDeleteData=null)}}},_htmlEncode:function(n){var i=n;return t.isNullOrUndefined(i)||(i=isNaN(i)?i.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):i),i},startEdit:function(i){if(this.model.editSettings.allowEditing&&(!this.model.editSettings.showAddNewRow||this.model.editSettings.editMode!="normal"||!this._excludeDetailRows().hasClass("e-editedrow"))&&!this.element.ejWaitingPopup("model.showOnInit")){if(this._selectedRow()==-1&&t.isNullOrUndefined(i)){alert(this.localizedLabels.EditOperationAlert);return}if(this.model.scrollSettings.enableVirtualization&&t.isNullOrUndefined(i)&&(i=this.getContentTable().find("tr[aria-selected='true']")),t.isNullOrUndefined(i)?(this._currentTrIndex=this._selectedRow(),this._$currentTr=this.getRowByIndex(this._currentTrIndex)):(this._currentTrIndex=this.getIndexByRow(i),this._$currentTr=i),this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&(this._currentTrIndex=this._currentTrIndex%this.model.pageSettings.pageSize),!n(this._$currentTr).is(":visible"))return!1;this._primaryKeyValues=[];this._getPrimaryKeyValues(this._$currentTr);var u=this._editedData=this._currentJsonData[this._currentTrIndex],r={row:this._$currentTr,rowIndex:this._currentTrIndex,primaryKey:this._primaryKeys,primaryKeyValue:this._primaryKeyValues,rowData:u},f=this._trigger("beginEdit",r);if(f){this._primaryKeyValues=[];return}r.requestType=t.Grid.Actions.BeginEdit;this._processBindings(r)}},_getPrimaryKeyValues:function(i){var u,f,o=i.attr("name"),s,r,h,c=!1,e;for(this._lastVirtualPage=null,e=0;e<this._primaryKeys.length;e++)s=this.getColumnByField(this._primaryKeys[e]),u=this.getIndexByRow(i),f=this._currentJsonData,this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(u=u%this._virtualRowCount,r=parseInt(o,32)):(u=u%this.model.pageSettings.pageSize,r=parseFloat(o)/this.model.pageSettings.pageSize+1,this._currentJsonData=this._virtualLoadedRecords[r],r!=this.model.pageSettings.totalPages||this._prevPageRendered||this._virtualLoadedRecords[r].length==this.model.pageSettings.pageSize||(f=n.extend(!0,[],this._previousPageRecords),h=n.extend(!0,[],this._virtualLoadedRecords[r]),t.merge(f,h),this._lastVirtualPage=this._currentJsonData=n.extend(!0,[],f),c=!0)),f=c?f:this._virtualLoadedRecords[r],this._vCurrentTrIndex=u,this._currentVIndex=r),this._primaryKeyValues.push(this._htmlEncode(t.getObject(s.field,f[u])))},_startAdd:function(){var f,r,u,e,i,h,o,c,s,l;if(this.model.editSettings.allowAdding)if(this._isAddNew=!0,this.model.editSettings.editMode=="batch")this._bulkAddRow();else{for(f={},r=this.model.columns,i=0;i<r.length;i++)t.isNullOrUndefined(this.model.parentDetails)||r[i].field!=this.model.parentDetails.parentKeyField||(r[i].defaultValue=this.model.parentDetails.parentKeyFieldValue),!t.isNullOrUndefined(r[i].field)&&r[i].field.indexOf(".")>0?t.createObject(r[i].field,r[i].defaultValue||"",f):f[r[i].field]=t.isNullOrUndefined(r[i].defaultValue)?r[i].type=="date"||r[i].type=="datetime"?null:"":r[i].defaultValue;if(u={},e={},u.data=u.rowData=f,this.model.editSettings.editMode.indexOf("template")!=-1)for(i=0;i<this.model.columns.length;i++)t.isNullOrUndefined(this.model.columns[i].field)||this.model.columns[i].field.indexOf(".")==-1||(h=this.model.columns[i].field.split("."),t.createObject(this.model.columns[i].field,u.data[this.model.columns[i].field],e),u.data[h[0]]=e,delete u.data[this.model.columns[i].field]);o=this._getForeignKeyData(u.data);t.isNullOrUndefined(o)||(u.foreignKeyData=o);u.requestType="add";this.clearSelection();this.model.selectionSettings.selectionMode.indexOf("cell")!=-1&&this.clearCellSelection();this.model.scrollSettings.allowVirtualScrolling&&(this._currentVIndex=null,this._lastVirtualPage=null,this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(1):this._virtualLoadedRecords[1]?this._currentPage(1):this.gotoPage(1),this.getScrollObject().scrollY(0));c=this._processBindings(u);c||(this.model.editSettings.showAddNewRow?this._selectedRow(-1):this._selectedRow(0));s=this.model.groupSettings.groupedColumns.length;s>1&&(l=this.getContentTable().find(".e-addedrow").find("table").find("colgroup").children(),n(l.slice(0,s-1)).css("width",this.getHeaderTable().find("colgroup").children()[0].style.width))}},endEdit:function(){var e,l,w,b,c,v,k,s,tt,y,p,ft,et,ot,h,it,st,rt,d,ht,ut,ct;if(this.model.isEdit){if(b=0,!this.editFormValidate())return!0;if(c={},this.model.editSettings.editMode=="batch")this.saveCell();else{for((this._isAddNew||this.model.editSettings.editMode=="externalformtemplate"||this.model.editSettings.editMode=="inlineformtemplate"||this.model.editSettings.editMode=="dialogtemplate")&&(this._isEditChangesApplied=!0),this.model.editSettings.showAddNewRow&&(w=this.getContentTable().find(".e-editedrow")),e=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):!t.isNullOrUndefined(w)&&w.length==1?w[0].lastChild.lastChild:document.getElementById(this._id+"EditForm"),l=n(e),v=this.model.editSettings.editMode=="normal"||this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"?l.closest("tr"):l.closest("div"),v.find("td.e-rowcell").removeClass("e-validError"),e=this.model.scrollSettings.frozenColumns>0?e[0]:e,s=0;s<e.length;s++)if(!v.hasClass("e-addedrow")||!n(e[s]).hasClass("e-identity")){var f=e[s].name,o=n(e[s]),u=this.getColumnByField(f);if(!o.hasClass("e-dropdownlist e-input")||o.attr("id").indexOf("_input")==-1||!t.isNullOrUndefined(l[1])){if(f!=i&&f!=""&&c[f]==null){u=this.getColumnByField(f);var r=e[s].value,g=e[s].type,nt=n(e[s]).is(":checked"),k=u?u.originalType:null,a;if(n(e[s]).attr("type")=="hidden"&&t.isNullOrUndefined(o.attr("value")))continue;if(t.isNullOrUndefined(u)||u.editType!="edittemplate")n(e[s]).hasClass("e-datepicker")?(r=o.ejDatePicker("model.value"),this._isEditChangesApplied||(a=!t.isNullOrUndefined(u)&&!t.isNullOrUndefined(u.format)?u.format:"{0:MM/dd/yyyy}",this.formatting(a,r,this.model.locale)!=this.formatting(a,this._editedData[f],this.model.locale)&&(this._isEditChangesApplied=!0))):n(e[s]).hasClass("e-datetimepicker")?(r=o.ejDateTimePicker("model.value"),this._isEditChangesApplied||(a=!t.isNullOrUndefined(u)&&!t.isNullOrUndefined(u.format)?u.format:"{0:MM/dd/yyyy hh:mm:ss}",this.formatting(a,r,this.model.locale)!=this.formatting(a,this._editedData[f],this.model.locale)&&(this._isEditChangesApplied=!0))):o.is(".e-numerictextbox")?(r=o.ejNumericTextbox("getValue"),t.isNullOrUndefined(u)||u.type!="string"||t.isNullOrUndefined(r)||(r=r.toString()),this._isEditChangesApplied||this._editedData[f]==r||(this._isEditChangesApplied=!0)):(o.data("ejDropDownList")||o.is(".e-dropdownlist"))&&(o.is(":hidden")&&o.is("input")&&t.isNullOrUndefined(o.data("ejDropDownList"))&&(o=o.siblings(".e-dropdownlist")),r=o.ejDropDownList("getSelectedValue"),t.isNullOrUndefined(u)||t.isNullOrUndefined(u.format)||u.type!="date"&&u.type!="datetime"||(r=r.length>0?new Date(r):r),this._isEditChangesApplied||this._editedData[f]==r||(this._isEditChangesApplied=!0));else if(this._isEditChangesApplied=!0,tt=n(e[s]).attr("type")=="hidden",n(e[s]).is("#"+this._id+f)||tt)y=u.editTemplate.read,o=n(e[s]),o=tt?n(e[s]).siblings("#"+this._id+f).length?n(e[s]).siblings("#"+this._id+f):o:o,typeof y=="string"&&(y=t.util.getObject(y,window)),r=y(o);else continue;k&&(r=k=="number"?+r:k=="boolean"?r===this.localizedLabels.True?!0:!1:k==="date"?new Date(r):r);u==null?r=!isNaN(parseFloat(r))&&isFinite(r)?parseFloat(r):r:u.type=="number"&&!t.isNullOrUndefined(r)&&r.length&&(r=t.parseFloat(r,this.model.locale),this._isEditChangesApplied||this._editedData[f]==r||(this._isEditChangesApplied=!0));typeof r!="string"||r.length||(r=null);this._isEditChangesApplied||t.isNullOrUndefined(u)||u.type!="string"||this._editedData[f]==r||(this._isEditChangesApplied=!0);this._isEditChangesApplied||t.isNullOrUndefined(u)||u.type!="date"||u.editType!="stringedit"||u.format!=null&&this.formatting(u.format,this._editedData[f],this.model.locale)!=r&&(this._isEditChangesApplied=!0);(g!="checkbox"&&!t.isNullOrUndefined(r)&&r!==""||nt)&&b++;p=g=="checkbox"&&(t.isNullOrUndefined(u)||u.type=="boolean")?nt:r;this._isEditChangesApplied||t.isNullOrUndefined(u)||u.type!="boolean"||(ft=g=="checkbox"?nt:JSON.parse(r),this._editedData[f]!=ft&&(this._isEditChangesApplied=!0));this._isEditChangesApplied||typeof p!="string"||typeof this._editedData[f]!="string"||this._editedData[f]==p||(this._isEditChangesApplied=!0);this._isEditChangesApplied||t.isNullOrUndefined(u)||u.type!="object"||(et=typeof r=="object"?JSON.stringify(r):r,ot=typeof this._editedData[f]=="object"?JSON.stringify(this._editedData[f]):this._editedData[f],et!=ot&&(this._isEditChangesApplied=!0));f.indexOf(".")!=-1?t.createObject(f,p,c):c[f]=p}s==e.length-1&&l.length>1&&l.index(e)==0&&(e=l[1],s=-1)}}if(h={data:c,rowData:c},it=this._getForeignKeyData(h.data),t.isNullOrUndefined(it)||(h.foreignKeyData=it),h.requestType=t.Grid.Actions.Save,h.selectedRow=this._selectedRow(),h.previousData=jQuery.extend({},this.model.currentViewData[h.selectedRow]),this._trigger("actionBegin",h))return!0;if(v.hasClass("e-editedrow")?(this._cModifiedData=c,h.action="edit"):v.hasClass("e-addedrow")&&(b&&(this._cAddedRecord=c),h.action="add"),h.action=="add"&&this.editFormValidate()&&(t.isNullOrUndefined(this.model.queryString)||(st=this.model.foreignKeyField||this.model.queryString,h.data[st]=this.model.parentDetails.parentRowData[this.model.queryString]),!b))return rt=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):n("#"+this._id+"EditForm"),d=t.buildTag("div"),rt.addClass("field-validation-empty"),ht=rt.find("input:visible").not(".e-identity").first(),this._renderValidator(d,ht),d.width("auto"),ut=t.buildTag("div.e-field-validation-error",this.localizedLabels.EmptyRowValidationMessage),ct=n(d).find(".e-errortail"),ut.insertAfter(ct),ut.css("display","block"),!1;(this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate")&&n("#"+this._id+"_externalEdit").css("display","none");this._isAddNew||this._isEditChangesApplied?(this._isEditChangesApplied=!1,this._updateAction(h)):this.cancelEdit()}}},_updateAction:function(r){var f,u;this._dataSource()instanceof t.DataManager&&!this._dataManager.dataSource.offline&&this._dataManager.dataSource.json!==i||this._dataSource().adaptor instanceof t.remoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor?this.model.editSettings.editMode=="batch"?(this.batchChanges.added.push(r.data),this.batchSave()):(t.isNullOrUndefined(this._cModifiedData)||t.isOnWebForms&&this.model.serverEvents&&this.model.serverEvents.indexOf("endEdit")!=-1?t.isOnWebForms&&this.model.serverEvents&&this.model.serverEvents.indexOf("endAdd")!=-1||(f=this._dataManager.insert(r.data,this.model.query)):f=this._dataManager.update(this._primaryKeys[0],r.data,this.model.query),u=this,this.element.ejWaitingPopup("show"),f&&n.isFunction(f.promise)?(f.done(function(i){u.model.isEdit=!1;!t.isNullOrUndefined(i)&&n.isPlainObject(i.record)&&(n.extend(r.data,i.record),r.action=="add"&&(u._cAddedRecord=r.data),r.action=="edit"&&(u._cModifiedData=r.data));u._processBindings(r);u._isRemoteSaveAdaptor&&(u.element.ejWaitingPopup("hide"),t.isNullOrUndefined(u._unboundRow)||r.selectedRow==u._unboundRow||r.requestType!="save"||(u._unboundRow.find(".e-editbutton").trigger("click"),u._unboundRow=null));u._cModifiedData=null;u._cAddedRecord=null;u._primaryKeyValues=[]}),f.fail(function(n){r.error=n&&n.error?n.error:n;u._cModifiedData=null;u._cAddedRecord=null;u.element.ejWaitingPopup("hide");u._trigger("actionFailure",r)})):(u.model.isEdit=!1,u._processBindings(r))):this._processBindings(r);f!=i&&n.isFunction(f.promise)||(this._cModifiedData=null,this._cAddedRecord=null,this._primaryKeyValues=[])},cancelEdit:function(){var i={};i.requestType=t.Grid.Actions.Cancel;this._cModifiedData=null;this._processBindings(i);this._primaryKeyValues=[];this._currentData=null;(this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate")&&n("#"+this._id+"_externalEdit").css("display","none")},refreshToolbar:function(){var r=n("#"+this._id+"_toolbarItems"),t=r.find("li"),u,i;if(r.ejToolbar("enableItem",t),u=this.getContentTable().find(".e-editedrow"),this.model.editSettings.showAddNewRow&&this.model.editSettings.editMode=="normal"&&u.length==0)this._disabledToolItems.push(t.filter("[id="+this._id+"_add]"));else for(i=0;i<t.length;i++)switch(t[i].id){case this._id+"_add":case this._id+"_edit":case this._id+"_delete":case this._id+"_responsiveFilter":case this._id+"_responsiveSorting":case this._id+"_search":this.model.isEdit?this.model.editSettings.showAddNewRow&&this.model.editSettings.editMode=="normal"&&u.length==0||(n(t[i]).hasClass("e-hover")&&n(t[i]).removeClass("e-hover"),this._disabledToolItems.push(t[i])):this.model.enableToolbarItems||this.model.editSettings.allowAdding||t[i].id!=this._id+"_add"?this.model.enableToolbarItems||this.model.editSettings.allowEditing||t[i].id!=this._id+"_edit"?this.model.enableToolbarItems||this.model.editSettings.allowDeleting||t[i].id!=this._id+"_delete"||this._disabledToolItems.push(t[i]):this._disabledToolItems.push(t[i]):this._disabledToolItems.push(t[i]);break;case this._id+"_update":case this._id+"_cancel":this.model.isEdit||this.getContentTable().find(".e-updatedtd.e-icon.e-gupdatenotify").length!=0||this._isBatchDeleteApplied||(n(t[i]).hasClass("e-hover")&&n(t[i]).removeClass("e-hover"),this._disabledToolItems.push(t[i]))}r.ejToolbar("disableItem",this._disabledToolItems);r.ejToolbar("model.enableRTL",this.model.enableRTL);this._disabledToolItems=n()},_getHiddenCount:function(n){for(var i=0,t=0;t<n.length;t++)n.eq(t).hasClass("e-hide")&&i++;return i},_refreshTemplateCell:function(t,i){for(var f,u=t.find(".e-templatecell"),r=0;r<u.length;r++)f={cell:u[r],data:i,column:this.model.columns[n(u[r]).index()],rowIndex:t.index()},this._trigger("templateRefresh",f)},_edit:function(i){var tt=this.model.scrollSettings.enableVirtualization?t.DataManager(this._virtualLoadedRecords[this._currentVIndex]):t.DataManager(this._currentJsonData),e,y=new t.Query,o,a,l,nt,h,s,c,d,f;for(this.model.allowFiltering&&(this._previousFilterCount=this._filteredRecordsCount),l=0;l<this._primaryKeys.length;l++)y=y.where(this._primaryKeys[l],t.FilterOperators.equal,this._primaryKeyValues[l]);this._currentData=tt.executeLocal(y);var r=document.createElement("div"),p=t.isNullOrUndefined(this.model.editSettings.titleColumn)?this._primaryKeys[0]:this.model.editSettings.titleColumn,u=n(r),e;if(this.model.editSettings.editMode=="normal"){r.innerHTML=["<table>",n.render[this._id+"_JSONEditingTemplate"](this._currentData,{groupedColumns:this.model.groupSettings.groupedColumns}),"<\/table>"].join("");var w=u.find("tr").first(),h=0,g=this.model.columns.length,b=i.row.first(),k,v;this.model.scrollSettings.frozenColumns>0&&(u.prepend(["<table>",n.render[this._id+"_JSONFrozenEditingTemplate"](this._currentData,{groupedColumns:this.model.groupSettings.groupedColumns}),"<\/table>"].join("")),w.splice(0,0,u.find("table").first().find("tr").first().get(0)),k=i.row.last(),v=w.last());e=u.find("tr").first();u.find("td").not(".e-rowcell").addClass("e-editcell e-normaledit");this._setEditDropdownValue(u);this.model.groupSettings.groupedColumns.length>=2&&(nt=i.row.find("td.e-indentcell"),u.find("tr").first().prepend(nt));(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&(h++,u.find(".e-editcell").find("tr").prepend(i.row.find("[class*=e-detailrow]").eq(0).removeClass("e-selectionbackground e-active")),this.model.gridLines!="both"&&u.find(".e-editcell .e-rowcell:first").addClass("e-detailrowvisible"));this.model.scrollSettings.frozenColumns>0&&(u.find(".e-editcell").get(1).colSpan=this.model.columns.length-this.model.scrollSettings.frozenColumns-i.row.last().find(".e-hide").length+h,g=this.model.scrollSettings.frozenColumns,k.hasClass("e-alt_row")&&v.addClass("e-alt_row"));u.find(".e-editcell").get(0).colSpan=g-b.find("td").not(":visible").length+h;b.hasClass("e-alt_row")&&e.addClass("e-alt_row");b.empty().replaceWith(e.addClass("e-editedrow"));i.row=e;e.is(":last-child")||e.find("td.e-rowcell").addClass("e-validError");this.model.scrollSettings.frozenColumns>0&&(k.empty().replaceWith(v.addClass("e-editedrow")),i.row=v);this._refreshUnboundTemplate(w.find(".gridform"));this._gridRows=this.model.scrollSettings.frozenColumns==0?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row, tr.e-editedrow").toArray():n(this.getContentTable().get(0).rows).toArray();this.model.scrollSettings.frozenColumns>0&&(this.getScrollObject().scrollY(this.getScrollObject().model.scrollTop,!0),this._gridRows=[this._gridRows,n(this.getContentTable().get(1).rows).toArray()])}else this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"?(h=0,this.model.editSettings.editMode=="inlineformtemplate"&&(o=this.model.editSettings.inlineFormTemplateID,a=!t.isNullOrUndefined(this.model.ngTemplateId)&&(o.startsWith("#")||o.startsWith(".")||typeof o=="object")?this.model.ngTemplateId+"gridedittemplate":null),r.innerHTML=this.model.editSettings.editMode=="inlineform"?n.render[this._id+"_JSONDialogEditingTemplate"](this._currentData):this._renderEjTemplate(this.model.editSettings.inlineFormTemplateID,this._currentData[0],i.rowIndex,null,a),this.model.editSettings.editMode=="inlineformtemplate"&&(r.innerHTML=this._appendForm(r.innerHTML)),this._setEditDropdownValue(u),s=t.buildTag("tr"),c=t.buildTag("td"),s.addClass("e-editedrow"),c.addClass("e-inlineformedit"),r=n(r).clone(!0).children(),c.html(r),s.append(c),s.is(":last-child")||s.find(".e-rowcell").addClass("e-validError"),this.model.scrollSettings.frozenColumns>0?(d=s.clone(),d.find("td").empty().prop("colspan",this.model.scrollSettings.frozenColumns),i.row.eq(1).after(s).end().eq(0).after(d),this._gridRows=[this._gridRows,this.getContentTable().last().find("tr").toArray()]):i.row.after(s),this._gridRows=this.getContentTable().first().find(".e-rowcell,.e-inlineformedit").closest("tr").toArray(),(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&h++,this.model.scrollSettings.frozenColumns>0?c.prop("colspan",this.model.columns.length-this.model.scrollSettings.frozenColumns-s.find("form").children().not(":visible").length+h):c.prop("colspan",this.model.columns.length-this._hiddenColumns.length+h),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find("tr").toArray()]),n("#"+this._id+"_inlineFormTitle").text(this.localizedLabels.EditFormTitle+this._currentData[0][p]),i.row.find("input").attr("disabled","disabled").addClass("e-disable")):(u.addClass("e-editedrow"),(this.model.editSettings.editMode=="dialogtemplate"||this.model.editSettings.editMode=="externalformtemplate")&&(o=this.model.editSettings.editMode=="dialogtemplate"?this.model.editSettings.dialogEditorTemplateID:this.model.editSettings.externalFormTemplateID,a=!t.isNullOrUndefined(this.model.ngTemplateId)&&(o.startsWith("#")||o.startsWith(".")||typeof o=="object")?this.model.ngTemplateId+"gridedittemplate":null),r.innerHTML=this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="externalform"?n.render[this._id+"_JSONDialogEditingTemplate"](this._currentData):this._renderEjTemplate(o,this._currentData[0],i.rowIndex,null,a),(this.model.editSettings.editMode=="dialogtemplate"||this.model.editSettings.editMode=="externalformtemplate")&&(r.innerHTML=this._appendForm(r.innerHTML)),this._setEditDropdownValue(u),this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="dialogtemplate"?(n("#"+this._id+"_dialogEdit").html(n(r)),f={},f.cssClass=this.model.cssClass,f.enableRTL=this.model.enableRTL,f.width="auto",f.enableResize=this.phoneMode,f.close=n.proxy(this._buttonClick,this),f.content="#"+this._id,f.enableModal=!0,f.allowKeyboardNavigation=!1,f.title=this.localizedLabels.EditFormTitle+this._currentData[0][p],n("#"+this._id+"_dialogEdit").ejDialog(f),n("#"+this._id+"_dialogEdit").ejDialog("open")):(n("#"+this._id+"_externalEdit").css("display","block").css("z-index",this._maxZindex()+1),n("#"+this._id+"_externalForm").find(".e-externalformedit").html(n(r)),n("#"+this._id+"_eFormHeader").find(".e-form-title").text(this.localizedLabels.EditFormTitle+this._currentData[0][p]),this._externalFormPosition(),i.row.find("input").attr("disabled","disabled").addClass("e-disable")));this.model.editSettings.editMode!="normal"&&(e=n(r));t.isNullOrUndefined(this.model.templateRefresh)||e.find(".e-templatecell").length==0||this._refreshTemplateCell(e,this.model.currentViewData[e.index()])},_appendForm:function(n){var r=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"}),i;return r.addClass("e-display"),i=t.buildTag("div","",{display:"none"}),r.html(n),i=this.renderDiaglogButton(r,i),i.html()},_setEditDropdownValue:function(i){for(var s,h,e,l,f,u=i.find("select.e-field"),o,c=i.find("input.e-field.e-dropdownlist"),r=0;r<u.length;r++){if(s={},h="",u[r].name.indexOf(".")!=-1){for(f=1;f<u[r].name.split(".").length;f++)h=h.concat("(");s[this._id+"ddlTemp"]="{{:"+h+"#data['"+u[r].name.split(".").join("'] || {})['")+"']}}"}else s[this._id+"ddlTemp"]="{{:"+u[r].name.replace(/[^a-z0-9\s_]/gi,"")+"}}";n.templates(s);o=n.render[this._id+"ddlTemp"](this._currentData);e=i.find("select:eq("+r+') option[value="'+o+'"]');u.eq(r).data("ej-value",o);l=this.getColumnByField(u[r].name);this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&this._dataSource().adaptor.value.indexOf(l.field)!=-1&&(e=i.find("select:eq("+r+') option:contains("'+o+'")'),u.eq(r).val(e[0].value),u.eq(r).data("ej-value",e[0].value));e.attr("selected","selected")}for(f=0;f<c.length;f++)c.eq(f).data("ej-value",t.getObject(c.eq(f).attr("name"),this._currentData[0]))},_add:function(i){var u=document.createElement("div"),e,h,l,v,a,y,p,c,w,b,k,f,r,s;if(this._isLocalData&&this.model.groupSettings.groupedColumns.length==0&&this.model.scrollSettings.frozenColumns==0&&this.model.scrollSettings.frozenRows==0&&((this._dataSource()instanceof t.DataManager)?this._dataSource().dataSource.json.splice(0,1):this._dataSource().splice(0,1)),this._previousFilterCount=this._filteredRecordsCount,this.model.editSettings.editMode=="normal"){for(a=n(u),y=this.model.columns.length,u.innerHTML=["<table>",n.render[this._id+"_JSONEditingTemplate"](i.data,{groupedColumns:this.model.groupSettings.groupedColumns}),"<\/table>"].join(""),f=n(u).find("select.e-field"),r=0;r<f.length;r++)f.eq(r).val(i.data[f[r].name]),f.eq(r).data("ej-value",i.data[f[r].name]);if(this.model.scrollSettings.frozenColumns>0&&(p=a.find("table").first().find("tr").first(),a.prepend(["<table>",n.render[this._id+"_JSONFrozenEditingTemplate"](i.data,{groupedColumns:this.model.groupSettings.groupedColumns}),"<\/table>"].join("")),n(p).find("td").first().addClass("e-editcell")),v=a.find("tr").first(),c=n(u).find(".e-editcell").get(0),n(u).find("td").first().addClass("e-editcell"),this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&this.model.groupSettings.groupedColumns.length==0&&!this.model.editSettings.showAddNewRow&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&n(this.getContentTable().get(0).lastChild.lastChild).children(".e-detailrowexpand").length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),(this.model.currentViewData.length==0||this.getContentTable().find("td.e-rowcell").length==0)&&this.model.scrollSettings.frozenColumns==0?(this.getContentTable().find("tr").first().replaceWith(n(u).find("tr").first().addClass("e-addedrow e-normaledit")),this.getContentTable().find("tr").length==0&&this.getContentTable().append(n(u).find("tr").first().addClass("e-addedrow e-normaledit"))):(this.model.scrollSettings.frozenColumns>0&&this._renderByFrozenDesign(),w=this.getContentTable().first().find("tbody").first(),this.model.editSettings.rowPosition=="top"?w.prepend(v.addClass("e-addedrow e-normaledit")):this.model.editSettings.rowPosition=="bottom"&&w.append(v.addClass("e-addedrow e-normaledit")),this.model.scrollSettings.frozenColumns>0&&this.getContentTable().last().find("tbody").first().prepend(p.addClass("e-addedrow e-normaledit"))),e=this.getContentTable().find("tr.e-addedrow"),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&e.attr("name",0),(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&e.find("tr").first().prepend(t.buildTag("td.e-detailrowcollapse")),this.model.groupSettings.groupedColumns.length){for(r=0;r<this.model.groupSettings.groupedColumns.length;r++)r==0?e.prepend(t.buildTag("td.e-indentcell")):e.find("tr").prepend(t.buildTag("td.e-indentcell"));this.model.groupSettings.groupedColumns.length>0&&(this.model.detailsTemplate!=null||this.model.childGrid!=null)?e.find("td.e-editcell").prop("colspan",this.model.columns.length+this.model.groupSettings.groupedColumns.length-this._hiddenColumns.length):this.model.groupSettings.groupedColumns.length>=2?e.find("td.e-editcell").prop("colspan",this.model.columns.length+(this.model.groupSettings.groupedColumns.length-1)-this._hiddenColumns.length):e.find("td.e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length)}else this.model.detailsTemplate!=null||this.model.childGrid!=null?e.find(".e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length+1):(this.model.scrollSettings.frozenColumns>0&&(e.find(".e-editcell").last().prop("colspan",this.model.columns.length-this.model.scrollSettings.frozenColumns-this._hiddenColumns.length),y=this.model.scrollSettings.frozenColumns),e.find(".e-editcell").first().prop("colspan",y-this._hiddenColumns.length));e.is(":last-child")||e.find("td.e-rowcell").addClass("e-validError");t.isIOSWebView()||this.getBrowserDetails().browser!="msie"||this.model.editSettings.rowPosition!="bottom"||this._colgroupRefresh();this._refreshUnboundTemplate(e.find(".gridform"));this._gridRows=this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray();this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray()])}else if(this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"){this.model.editSettings.editMode=="inlineformtemplate"&&(h=this.model.editSettings.inlineFormTemplateID,l=!t.isNullOrUndefined(this.model.ngTemplateId)&&(h.startsWith("#")||h.startsWith(".")||typeof h=="object")?this.model.ngTemplateId+"gridedittemplate":null);u.innerHTML=this.model.editSettings.editMode=="inlineform"?n.render[this._id+"_JSONDialogEditingTemplate"](i.data):this._renderEjTemplate(this.model.editSettings.inlineFormTemplateID,i.data,0,null,l);this.model.editSettings.editMode=="inlineformtemplate"&&(u.innerHTML=this._appendForm(u.innerHTML));var d=0,o=t.buildTag("tr"),c=t.buildTag("td");for(o.addClass("e-addedrow"),c.addClass("e-inlineformedit e-editcell"),u=n(u).clone(!0).children(),f=n(u).find("select.e-field"),r=0;r<f.length;r++)f.eq(r).val(i.data[f[r].name]),f.eq(r).data("ej-value",i.data[f[r].name]);if(c.html(u),o.append(c),o.is(":last-child")||o.find(".e-rowcell").addClass("e-validError"),this.model.groupSettings.groupedColumns.length)for(r=0;r<this.model.groupSettings.groupedColumns.length;r++)o.prepend(t.buildTag("td.e-indentcell"));else o.find("td.e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length);this.model.scrollSettings.frozenColumns>0?(b=o.clone(),k=c.find(".gridform").children(),b.find("td").empty().prop("colSpan",this.model.scrollSettings.frozenColumns-this._getHiddenCount(k.slice(0,this.model.scrollSettings.frozenColumns))),c.prop("colSpan",this.model.columns.length-this.model.scrollSettings.frozenColumns-this._getHiddenCount(k.slice(this.model.scrollSettings.frozenColumns))),(this.model.currentViewData.length==0||this.getContentTable().find("td.e-rowcell").length==0)&&this._renderByFrozenDesign(),this.getContentTable().first().find("tbody").first().prepend(b),this.getContentTable().last().find("tbody").first().prepend(o)):((this.model.detailsTemplate!=null||this.model.childGrid!=null)&&d++,c.prop("colspan",this.model.columns.length-this._hiddenColumns.length+d),this.model.currentViewData.length==0||this.getContentTable().find("td.e-rowcell").length==0?this.getContentTable().find("tr").first().replaceWith(n(o)):this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&this.model.groupSettings.groupedColumns.length==0&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),this.model.editSettings.rowPosition=="top"?this.getContentTable().first().find("tbody").first().prepend(o):this.model.editSettings.rowPosition=="bottom"&&this.getContentTable().first().find("tbody").first().append(o));(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&n(this.getContentTable().get(0).lastChild.lastChild).children(".e-detailrowexpand").length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild);n("#"+this._id+"_inlineFormTitle").text(this.localizedLabels.AddFormTitle);this._refreshUnboundTemplate(n("#"+this._id+"EditForm"));this._gridRows=this.getContentTable().first().find(".e-rowcell,.e-inlineformedit").closest("tr.e-row, tr.e-alt_row").toArray();this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray()])}else{for(n(u).addClass("e-addedrow"),(this.model.editSettings.editMode=="dialogtemplate"||this.model.editSettings.editMode=="externalformtemplate")&&(h=this.model.editSettings.editMode=="dialogtemplate"?this.model.editSettings.dialogEditorTemplateID:this.model.editSettings.externalFormTemplateID,l=!t.isNullOrUndefined(this.model.ngTemplateId)&&(h.startsWith("#")||h.startsWith(".")||typeof h=="object")?this.model.ngTemplateId+"gridedittemplate":null),u.innerHTML=this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="externalform"?n.render[this._id+"_JSONDialogEditingTemplate"](i.data):this._renderEjTemplate(h,i.data,0,null,l),(this.model.editSettings.editMode=="dialogtemplate"||this.model.editSettings.editMode=="externalformtemplate")&&(u.innerHTML=this._appendForm(u.innerHTML)),f=n(u).find("select.e-field"),r=0;r<f.length;r++)f.eq(r).val(i.data[f[r].name]),f.eq(r).data("ej-value",i.data[f[r].name]);this.model.editSettings.editMode=="dialog"||this.model.editSettings.editMode=="dialogtemplate"?(n("#"+this._id+"_dialogEdit").html(n(u)),s={},s.cssClass=this.model.cssClass,s.width="auto",s.enableResize=this.phoneMode,s.content="#"+this._id,s.enableModal=!0,s.close=n.proxy(this._buttonClick,this),s.enableRTL=this.model.enableRTL,s.allowKeyboardNavigation=!1,s.title=this.localizedLabels.AddFormTitle,n("#"+this._id+"_dialogEdit").ejDialog(s),n("#"+this._id+"_dialogEdit").ejDialog("open")):(n("#"+this._id+"_externalEdit").css("display","block").css("z-index",this._maxZindex()+1),n("#"+this._id+"_externalForm").find(".e-externalformedit").html(n(u)),n("#"+this._id+"_eFormHeader").find(".e-form-title").text(this.localizedLabels.AddFormTitle),this._externalFormPosition())}this.model.editSettings.editMode!="normal"&&(e=n(u));t.isNullOrUndefined(this.model.templateRefresh)||e.find(".e-templatecell").length==0||this._refreshTemplateCell(e,i.data);this.model.allowPaging&&(this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:this._searchCount==null?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:this._searchCount==null?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()}),this._refreshGridPager())},editFormValidate:function(){var t,i,r;return n.isFunction(n.validator)?this.model.scrollSettings.frozenColumns>0?(t=this.element.find(".gridform"),t.length>1?(i=t.eq(0).validate().form(),r=t.eq(1).validate().form(),i&&r?!0:!1):t.validate().form()):this.model.editSettings.showAddNewRow?n(this.getRows()).hasClass("e-editedrow")?this.element.find(".e-editedrow .gridform").validate().form():this.element.find(".e-addedrow .gridform").validate().form():n("#"+this._id+"EditForm").validate().form():!0},_refreshAltRow:function(){for(var t,r=this._excludeDetailRows(),i=0;i<r.length;i++)t=n(r[i]),t.hasClass("e-alt_row")&&t.removeClass("e-alt_row"),i%2!=0?t.addClass("e-alt_row"):t.addClass("e-row")},_editCompleteAction:function(i){var o=this.element.find(".gridform"),s,h,u,r,f,e;if(this.model.isEdit=!0,s=this.getContentTable().children("colgroup").find("col"),h=this.element.width(),this.setWidthToColumns(),t.Grid.Actions.Add==i.requestType){for(u=o.find(".e-field:disabled"),r=0;r<u.length;r++)f=n(u[r]).attr("name"),n(u[r]).hasClass("e-identity")||(n.inArray(f,this._disabledEditableColumns)==-1||n.inArray(f,this._primaryKeys)!==-1)&&n(u[r]).prop("disabled",!1).removeClass("e-disable");for(e=0;e<this.model.groupSettings.groupedColumns.length-1;e++)o.find("colgroup").prepend(this._getIndentCol())}(this._tdsOffsetWidth.length==0||this.model.groupSettings.groupedColumns.length||n.inArray(0,this._tdsOffsetWidth)!=-1||this._hiddenColumns.length>0)&&this._setoffsetWidth();this._refreshEditForm(i);this.model.scrollSettings.frozenColumns>0&&(this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate")&&(i.requestType=="beginedit"?i.row.eq(0).next().find("td").height(i.row.eq(1).next().find("td").height()):this.getContentTable().first().find("tr").first().find("td").height(this.getContentTable().last().find("tr").first().find("td").height()));this.model.scrollSettings.frozenRows>0&&i.requestType=="beginedit"&&(this._initFrozenRows(),t.getObject("_vScrollbar._scrollData",this.getScrollObject())&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0));this.model.scrollSettings.frozenColumns>0&&(this.rowHeightRefresh(),this._refreshScroller(i));this.model.allowScrolling&&this.model.scrollSettings.frozenColumns<=0&&this.getScrollObject()&&this.getScrollObject().isHScroll()&&this.getScrollObject().refresh();n.isFunction(n.validator)&&this.initValidator()},_refreshEditForm:function(r){var nt,ot,rt,y,ut,e,k,tt,u,c,o,st,d,it,p,h,l,f,a,w,v,b,g,s,ht,ct;for(this.model.editSettings.showAddNewRow&&(nt=this.getContentTable().find(".e-editedrow")),ot=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):!t.isNullOrUndefined(nt)&&nt.length==1?nt[0].lastChild.lastChild:document.getElementById(this._id+"EditForm"),rt=!1,this.model.enableResponsiveRow&&n.isFunction(window.matchMedia)&&(ut=window.matchMedia("(max-width: 320px)")),e=n(ot).find("input,select,div.e-field,textarea"),k=86,(this._isUnboundColumn||this.getContentTable().find(".e-templatecell")!=null)&&this.model.editSettings.editMode!="batch"&&(e=e.filter(function(){return!n(this).closest(".e-rowcell").hasClass("e-unboundcell")&&!n(this).closest(".e-rowcell").hasClass("e-templatecell")})),tt=null,l=0;l<e.length;l++){if(u=e.eq(l),o=this.getColumnByField(t.isNullOrUndefined(u.prop("name"))?u.attr("name"):u.prop("name")),o!=null&&(y=n.inArray(o,this.model.columns)),this.model.editSettings.editMode=="batch"?k=95:this.model.editSettings.editMode=="normal"&&(k=96),this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate"||this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"?(u.parent().css("width",t.dataUtil.max(this._tdsOffsetWidth)+"px"),c=t.max(this._tdsOffsetWidth)*(k/100)):c=this._tdsOffsetWidth[l]*(k/100),(this.model.editSettings.editMode=="normal"||this.model.editSettings.editMode=="batch"||this.model.allowResizing||this.model.allowResizeToFit)&&!u.hasClass("e-checkbox")&&(c="100%"),o!=null&&y!==i&&y<this.model.columns.length&&this.model.columns[y].editTemplate)st={rowdata:r.rowData,column:this.model.columns,element:u,requestType:r.requestType,type:r.type},d=this.model.columns[y].editTemplate.write,typeof d=="string"&&(d=t.util.getObject(d,window)),d(st),this.model.columns[y].isPrimaryKey&&r.requestType=="beginedit"&&u.addClass("e-disable").attr("disabled","disabled");else if(u.hasClass("e-numerictextbox")||u.hasClass("e-datepicker")||u.hasClass("e-datetimepicker")||u.hasClass("e-dropdownlist"))it=this.getColumnByField(u.prop("name")),p=u.val(),(!t.isNullOrUndefined(ut)&&ut.matches||it.width&&typeof it.width=="string"&&it.width.indexOf("%")!=-1&&(this.model.editSettings.editMode=="normal"||this.model.editSettings.editMode=="batch"))&&(c="100%"),u.css("width",c),u.hasClass("e-numerictextbox")&&(p.length&&u.attr("value",parseFloat(p)),u.prop("name",u.prop("name").replace(this._id,""))),u.hasClass("e-disable")&&u.attr("disabled","disabled");else if(u.hasClass("e-save e-button")||u.hasClass("e-cancel e-button"))u.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,width:"100","text-align":"centre",height:"35px"});else switch(u.prop("tagName")){case"INPUT":if(!t.isNullOrUndefined(o)&&o.format&&u.val()!="")switch(o.type){case"date":var p=u.val(),vt=new Date(p),s=o.format.replace("{0:","").replace("}",""),yt=t.format(vt,s,this.model.locale);u.val(yt);break;case"number":p=u.val();s=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(o.format);s[2].toLowerCase().split("")[0]=="c"?s[2]=s[2].toLowerCase().replace("c","n"):s[2];u.val(t.format(parseFloat(p),s[2],this.model.locale))}u.attr("type")!="checkbox"?(u.css("text-align",u.attr("name")!=null&&this.getColumnByField(u.attr("name"))!=null?this.getColumnByField(u.attr("name")).textAlign:"center"),this.model.editSettings.editMode=="batch"?(u.css("width","100%").css("height","28px"),t.browserInfo().name=="msie"&&parseInt(t.browserInfo().version,10)==8&&u.css("line-height","22px")):this.model.editSettings.editMode=="normal"?(u.css("width","100%").css("height","30px"),t.browserInfo().name=="msie"&&parseInt(t.browserInfo().version,10)==8&&u.css("line-height","24px")):(u.outerWidth(c).height(28),t.browserInfo().name=="msie"&&parseInt(t.browserInfo().version,10)==8&&u.css("line-height","26px"))):u.width(c>0?u.width()>c?c:u.width():this.model.editSettings.editMode.indexOf("template")!=-1?u.width():1);this.model.editSettings.editMode!="batch"||this._tabKey||(u.is(":checked")?u.prop("checked",!1):u.prop("checked",!0));break;case"SELECT":u.width(c).height(28)}o==null||o.visible||!o.validationRules||this.model.editSettings.editMode=="dialogtemplate"||this.model.editSettings.editMode=="externalformtemplate"||this.model.editSettings.editMode=="inlineformtemplate"||u.addClass("e-hide");u.is(":disabled")||rt||u.is(":hidden")&&typeof(u.data("ejDropDownList")||u.data("ejNumericTextbox"))!="object"||(tt=u,rt=!0)}for(h={},h.enableRTL=this.model.enableRTL,h.cssClass=this.model.cssClass,h.watermarkText=this.localizedLabels.NumericTextBoxWaterMark,h.locale=this.model.locale,e.filter(".e-numerictextbox").ejNumericTextbox(n.extend({showSpinButton:!0},h)),h.watermarkText=this.localizedLabels.DatePickerWaterMark,e.filter(".e-datepicker").ejDatePicker(n.extend({displayDefaultDate:!0,showPopupButton:!1},h)),delete h.watermarkText,e.filter(".e-datetimepicker").ejDateTimePicker(n.extend({showPopupButton:!1},h)),e.filter(".e-dropdownlist").ejDropDownList(n.extend({enableIncrementalSearch:!0,htmlAttributes:{style:"width: 100%"}},h)),l=0;l<this.model.columns.length;l++){if(f=this.model.columns[l],!t.isNullOrUndefined(f.editParams)){a=f.field;a=/^[a-zA-Z0-9- ]*$/.test(a)?a:a.replace(/[^a-z0-9\s_]/gi,"");switch(f.editType){case t.Grid.EditingType.DateTimePicker:e.filter("#"+this._id+a+".e-datetimepicker").ejDateTimePicker(f.editParams);break;case t.Grid.EditingType.DatePicker:e.filter("#"+this._id+a+".e-datepicker").ejDatePicker(f.editParams);break;case t.Grid.EditingType.Numeric:e.filter("#"+this._id+a+".e-numerictextbox").ejNumericTextbox(f.editParams);break;case t.Grid.EditingType.Dropdown:e.filter("#"+this._id+a+".e-dropdownlist").ejDropDownList(f.editParams)}}if(f.editType==t.Grid.EditingType.Dropdown&&(w=-1,this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&(w=this._dataSource().adaptor.value.indexOf(f.field)),v=e.filter("#"+this._id+f.field.replace(/[^a-z0-9\s_]/gi,"")+".e-dropdownlist"),b=null,!t.isNullOrUndefined(f.dataSource)&&!t.isNullOrUndefined(f.editParams)&&t.isNullOrUndefined(f.foreignKeyField)&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&w!=-1?b=f.dataSource:t.isNullOrUndefined(f.dataSource)&&w!=-1&&!t.isNullOrUndefined(f.editParams)?b=this._dataSource().adaptor.foreignData[w]:!t.isNullOrUndefined(f.editParams)&&"fields"in f.editParams&&t.isNullOrUndefined(f.foreignKeyField)&&(b=f.dataSource),b!=null&&v.ejDropDownList({dataSource:b}),g=v.data("ej-value"),this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&w!=-1&&!t.isNullOrUndefined(f.editParams)?v.ejDropDownList("setSelectedText",r.requestType=="add"&&t.isNullOrUndefined(f.defaultValue)&&t.isNullOrUndefined(g)?v.val(""):g):v.ejDropDownList("setSelectedValue",r.requestType=="add"&&t.isNullOrUndefined(f.defaultValue)&&t.isNullOrUndefined(g)?v.val(""):g),f==null||f.visible||!f.validationRules||this.model.editSettings.editMode=="dialogtemplate"||this.model.editSettings.editMode=="externalformtemplate"||this.model.editSettings.editMode=="inlineformtemplate"||f.editType==t.Grid.EditingType.Dropdown&&v.closest(".e-rowcell").find("input").addClass("e-hide")),s=null,f.format!==i&&f.format.length>0&&(ht=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),ct=ht.exec(f.format),s=ct[2]),[t.Grid.EditingType.DatePicker,t.Grid.EditingType.DateTimePicker].indexOf(f.editType)!=-1){var lt=f.editType==t.Grid.EditingType.DatePicker?"datePicker":"dateTimePicker",at="ej"+lt.replace(/\b\w/g,function(n){return n.toUpperCase()}),pt=this._id+f.field,ft=e.filter(function(t,i){return i.id==pt&&(n(i).hasClass("e-datepicker")||n(i).hasClass("e-datetimepicker"))}),et={};s==null||!t.isNullOrUndefined(f.editParams)&&(f.editParams.dateFormat||f.editParams.dateTimeFormat)||(et[lt.replace("Picker","")+"Format"]=s);ft.hasClass("e-disable")&&(et.enabled=!1);ft[at](et);this.model.editSettings.editMode=="batch"&&ft[at]("show")}}tt!=null&&this._focusElements(tt)},_focusElements:function(n){if(n.length){var t=n;(t[0].tagName.toLowerCase()!="select"||t.hasClass("e-field e-dropdownlist"))&&(t[0].tagName.toLowerCase()!="input"||t.hasClass("e-numerictextbox"))?t.hasClass("e-field e-dropdownlist")?t.closest(".e-ddl").focus():t.hasClass("e-numerictextbox")?t.siblings("input:visible").first().select().focus():t.find("input:visible,select").first().select().focus():(t.focus().select(),t[0].focus())}},_renderToolBar:function(){var r=t.buildTag("div.e-gridtoolbar","",{},{id:this._id+"_toolbarItems"}),f=t.buildTag("ul"),u,i;return(!t.isNullOrUndefined(this.model.toolbarSettings.toolbarItems)&&this.model.toolbarSettings.toolbarItems.length||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this._renderLi(f),r.append(f),u=t.buildTag("ul"),r.append(u),!t.isNullOrUndefined(this.model.toolbarSettings.customToolbarItems)&&this.model.toolbarSettings.customToolbarItems.length&&this._renderCustomLi(u),i={},i.click=this._toolBarClick,i.cssClass=this.model.cssClass,i.enableRTL=this.model.enableRTL,i.enableSeprator=!1,r.ejToolbar(i),r.ejToolbar("disableItem",this._disabledToolItems),this._disabledToolItems=n(),r},_renderCustomLi:function(i){for(var u,o,f,e,r=0;r<this.model.toolbarSettings.customToolbarItems.length;r++){e=this.model.toolbarSettings.customToolbarItems[r].templateID?this.model.toolbarSettings.customToolbarItems[r].templateID.replace("#",""):this.model.toolbarSettings.customToolbarItems[r];f=t.buildTag("li","",{},{id:this._id+"_"+e,title:e});switch(typeof this.model.toolbarSettings.customToolbarItems[r]){case"string":o=t.buildTag("a.e-toolbaricons e-icon","",{}).addClass(this.model.toolbarSettings.customToolbarItems[r]);break;case"object":u=this.model.toolbarSettings.customToolbarItems[r];f.attr("title",t.isNullOrUndefined(u.tooltip)?u.templateID.replace("#",""):u.tooltip);o=n(u.templateID).hide().html()}f.html(o);i.append(f)}},_renderLi:function(i){var f,r,u,e;for(n.isFunction(window.matchMedia)&&this.model.enableResponsiveRow&&(f=this.model.toolbarSettings.toolbarItems.indexOf("search"),f!=-1&&this.model.toolbarSettings.toolbarItems.splice(f,1),this.model.allowFiltering&&this.model.toolbarSettings.toolbarItems.push("responsiveFilter"),this.model.allowSorting&&this.model.toolbarSettings.toolbarItems.push("responsiveSorting"),f!=-1&&this.model.toolbarSettings.toolbarItems.push("search")),r=0;r<this.model.toolbarSettings.toolbarItems.length;r++)u=t.buildTag("li","",{},{id:this._id+"_"+this.model.toolbarSettings.toolbarItems[r],title:this.localizedLabels[this.model.toolbarSettings.toolbarItems[r].slice(0,1).toUpperCase()+this.model.toolbarSettings.toolbarItems[r].slice(1)]}),this._renderLiContent(u,this.model.toolbarSettings.toolbarItems[r]),e=this.model.toolbarSettings.toolbarItems[r],this.model.enableResponsiveRow&&(e==="responsiveFilter"||e==="responsiveSorting")&&(u.addClass("e-gridresponsiveicons"),u.css("display","none")),i.append(u)},_renderLiContent:function(n,i){var r,u,f,e;switch(i){case"add":r=t.buildTag("a.e-addnewitem e-toolbaricons e-icon e-addnew","",{});break;case"edit":r=t.buildTag("a.e-edititem e-toolbaricons e-icon e-edit","",{});break;case"delete":r=t.buildTag("a.e-deleteitem e-toolbaricons e-icon e-delete","",{});break;case"update":r=t.buildTag("a.e-saveitem e-toolbaricons e-disabletool e-icon e-save","",{});this._disabledToolItems.push(n.get(0));break;case"cancel":r=t.buildTag("a.e-cancel e-toolbaricons e-disabletool e-icon e-gcancel","",{});this._disabledToolItems.push(n.get(0));break;case"search":r=t.buildTag("a.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{});this.model.enableResponsiveRow||(u=t.buildTag("input.e-ejinputtext e-gridsearchbar","",{},{type:"text",id:this._id+"_searchbar"}),e=t.buildTag("span.e-cancel e-icon e-hide","",{right:"1%"}),f=t.buildTag("div.e-filterdiv e-searchinputdiv","",{display:"inline-table",width:"83%"}),f.append(u).append(e),n.append(f),t.isNullOrUndefined(this.model.searchSettings.key)||u.val(this.model.searchSettings.key));this.model.allowSearching=!0;break;case"printGrid":r=t.buildTag("a.e-print e-toolbaricons e-icon","",{});break;case"excelExport":r=t.buildTag("a.e-toolbaricons e-excelIcon e-icon","",{});break;case"wordExport":r=t.buildTag("a.e-toolbaricons e-wordIcon e-icon","",{});break;case"pdfExport":r=t.buildTag("a.e-toolbaricons e-pdfIcon e-icon","",{});break;case"responsiveFilter":r=t.buildTag("a.e-toolbaricons e-filterset e-icon","",{});break;case"responsiveSorting":r=t.buildTag("a.e-toolbaricons e-respponsiveSorting e-icon","",{})}n.append(r);i=="search"&&(this._searchBar=n,n.css("display","flex"))},_toolBarClick:function(r){var c=n(this.itemsContainer).closest(".e-grid"),u=c.ejGrid("instance"),f=c.attr("id"),h,l,o;if(r.event!=i||r.target.tagName!="INPUT"||r.currentTarget.id!=f+"_search"){n.isFunction(n.fn.ejDatePicker)&&n("#"+f+"EditForm").find(".e-datepicker").ejDatePicker("hide");var s=r.currentTarget,y=r.target,p=n.extend({},u.model);if(u.ignoreOnToolbarServerClick.length)for(h=0;h<u.ignoreOnToolbarServerClick.length;h++)delete p[u.ignoreOnToolbarServerClick[h]];if(l={itemName:n(s).attr("data-content"),itemId:s.id,currentTarget:s,target:y,itemIndex:n(s).index(),itemCurrentTarget:s.outerHTML,gridModel:p,itemTarget:y.outerHTML,toolbarData:r},!c.ejGrid("instance")._trigger("toolbarClick",l)){switch(l.itemId){case f+"_add":u._toolbarOperation(f+"_add");break;case f+"_edit":u._toolbarOperation(f+"_edit");break;case f+"_delete":u._toolbarOperation(f+"_delete");break;case f+"_update":u._toolbarOperation(f+"_update");break;case f+"_cancel":u.model.editSettings.editMode=="batch"?u.model.editSettings.showConfirmDialog?u._confirmDialog.find(".e-content").html(u.localizedLabels.CancelEdit).end().ejDialog("open"):u.cancelEdit():u._toolbarOperation(f+"_cancel");break;case f+"_search":if(u.model.enableResponsiveRow)if(t.isNullOrUndefined(u.element.find(".e-responsesearch")[0])){var a=t.buildTag("div.e-gridtoolbar","",{},{id:this._id+"_toolbarItems"}),w=t.buildTag("div.e-responsesearch","",{width:"95%",height:"38px","margin-top":"7px","margin-left":"6px"}),v=t.buildTag("span.e-ttoltxt","",{width:"98%","margin-left":"2%"},{id:u._id+"_search"}),e=t.buildTag("span.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{position:"absolute",right:"2%","margin-top":"1%"});t.browserInfo().name==="webkit"&&e.css("margin-top","-2px");o=t.buildTag("input.e-ejinputtext","",{width:"97%",height:"30px"},{type:"search",id:u._id+"_searchInput"});t.isNullOrUndefined(u.model.searchSettings.key)||o.val(u.model.searchSettings.key);v.append(o);v.append(e);w.append(v);a.append(w);a.ejToolbar({click:function(t){u._toolbarOperation(f+"_search",n(t.currentTarget).find("input").val(),r)}});o.on("keyup",function(){o.val()!=""?(e.removeClass("e-searchfind"),e.addClass("e-cancel")):(e.removeClass("e-cancel"),e.addClass("e-searchfind"))});e.click(function(){e.hasClass("e-cancel")&&(o.val(""),e.removeClass("e-cancel"),e.addClass("e-searchfind"),u._toolbarOperation(f+"_search",n("#"+f+"_searchInput").val(),r))});a.insertBefore(u.getHeaderContent())}else u.element.find(".e-responsesearch").css("display")=="block"?u.element.find(".e-responsesearch").css("display","none"):u.element.find(".e-responsesearch").css("display","block");else u._toolbarOperation(f+"_search",n(r.target).hasClass("e-cancel")?"":n(r.currentTarget).find("input").val(),r);break;case f+"_printGrid":u._toolbarOperation(f+"_printGrid");break;case f+"_excelExport":u._toolbarOperation(f+"_excelExport");break;case f+"_wordExport":u._toolbarOperation(f+"_wordExport");break;case f+"_pdfExport":u._toolbarOperation(f+"_pdfExport");break;case f+"_responsiveFilter":u._toolbarOperation(f+"_responsiveFilter");break;case f+"_responsiveSorting":u._toolbarOperation(f+"_responsiveSorting")}return!1}}},_toolbarOperation:function(i,r,u){var c=this.element,f=c.ejGrid("instance"),s=f.model.editSettings.editMode=="batch",e=c.attr("id"),l,h,o,a,w;f._exportTo=f["export"];switch(i){case e+"_add":s?f._bulkAddRow():f._startAdd();break;case e+"_edit":if(s&&f.model.editSettings.allowEditing){if(f._bulkEditCellDetails.columnIndex==-1){alert(this.localizedLabels.EditOperationAlert);return}l=f.model.columns[f._bulkEditCellDetails.columnIndex].field;l&&f.editCell(f._bulkEditCellDetails.rowIndex,l)}else f.startEdit();break;case e+"_delete":if(this._selectedRow()==-1){alert(this.localizedLabels.DeleteOperationAlert);return}this.model.editSettings.showDeleteConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open"):s?this._bulkDelete():this.multiDeleteMode?this._multiRowDelete():this.deleteRow();break;case e+"_update":s&&n("#"+this._id+"EditForm").children().find(".e-field-validation-error").length==0?this.model.editSettings.showConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.BatchSaveConfirm).end().ejDialog("open"):this.batchSave():f.endEdit();break;case e+"_cancel":s?n("#"+e+"ConfirmDialog").ejDialog("isOpened")===!0?this._triggerConfirm():f.cancelEditCell():f.cancelEdit();break;case e+"_search":u.type=="click"&&(u.target.nodeName=="A"||u.target.nodeName=="SPAN")&&c.ejGrid("search",r);break;case e+"_printGrid":this.print();break;case e+"_excelExport":f._exportTo(f.model.exportToExcelAction,"excelExporting",f.model.allowMultipleExporting);break;case e+"_wordExport":f._exportTo(f.model.exportToWordAction,"wordExporting",f.model.allowMultipleExporting);break;case e+"_pdfExport":f._exportTo(f.model.exportToPdfAction,"pdfExporting",f.model.allowMultipleExporting);break;case e+"_responsiveFilter":n("#responsiveFilter").css("display","block");setTimeout(function(){f.element.css("display","none");0});break;case e+"_responsiveSorting":for(this._sortColumns=[],this._removeSortCol=[],h=0;h<this.model.sortSettings.sortedColumns.length;h++)this._sortColumns.push({field:this.model.sortSettings.sortedColumns[h].field,direction:this.model.sortSettings.sortedColumns[h].direction});if(t.isNullOrUndefined(n("#responsiveSort")[0])){o=n("#responsiveFilter").clone().css("display","block");o.insertAfter(this.element);o.attr("id","responsiveSort");f._setSortingButton();var v=t.buildTag("div.btnContainer","",{width:"100%",bottom:"0px",position:"absolute"}),y=t.buildTag("input.e-resposnsiveFilterBtnLeft e-flat e-btnsub","OK",{width:"45.6%"}),p=t.buildTag("input.e-resposnsiveFilterBtnRight e-flat e-btncan","Cancel",{width:"46%"}),b=t.buildTag("div.e-resFIlterRigthIcon"),k=t.buildTag("span.e-icon e-responsiveClose e-resIcon");o.find(".e-resFilterleftIcon").remove();o.find(".e-labelRes").text("Sorting");o.find(".e-resFilterDialogHeaderDiv").append(b.append(k));o.find(".e-resFilterDialogHeaderDiv").find(".e-resFIlterRigthIcon").click(function(){n("#responsiveSort").css("display","none");f.element.css("display","block")});a=t.buildTag("div.e-resFilterleftIcon","",{"margin-top":"3%"});w=t.buildTag("span.e-icon e-resIcon e-responsiveSortClear");a.click(function(){o.find(".e-responsivefilterColDiv").find(".e-button").remove();f._setSortingButton(!0);for(var n=0;n<f._sortColumns.length;n++)f._removeSortCol.indexOf(f._sortColumns[n].field)==-1&&f._removeSortCol.push(f._sortColumns[n].field);f._sortColumns=[];f._removeSortCol=[]});o.find(".e-resFilterDialogHeaderDiv").prepend(a.append(w));o.append(v);v.append(y).append(p);y.ejButton({text:"OK",type:"button",click:n.proxy(this._resSortOperation,this)});p.ejButton({text:"Cancel",type:"button",click:function(){n("#responsiveSort").css("display","none");f.element.css("display","block");f._sortColumns=[];o.find(".e-responsivefilterColDiv").find(".e-button").remove();f._setSortingButton()}})}else n("#responsiveSort").find(".e-responsivefilterColDiv").find(".e-button").remove(),this._setSortingButton();n("#responsiveSort").find(".e-responsivefilterColDiv").find(".e-filternone").remove();n("#responsiveSort").css("display","block");setTimeout(function(){f.element.css("display","none");0})}return!1},_resSortOperation:function(){for(var i=[],t=0;t<this.model.sortSettings.sortedColumns.length;t++)i.push(this.model.sortSettings.sortedColumns[t].field);for(t=0;t<i.length;t++)this.removeSortedColumns(i[t]);for(t=0;t<this._sortColumns.length;t++)this.model.allowMultiSorting&&(this.multiSortRequest=!0),this.sortColumn(this._sortColumns[t].field,this._sortColumns[t].direction);n("#responsiveSort").css("display","none");this.element.css("display","block")},_setSortingButton:function(i){var u=n("#responsiveSort"),r=this;this._sortCols=[];t.isNullOrUndefined(u.find(".e-responsivefilterColDiv").find(".e-button")[0])&&u.find(".e-responsivefilterColDiv").each(function(u,f){var l=t.buildTag("div","",{float:"right","margin-right":"2%","margin-top":"-1%"}),o=n(f).attr("data-ej-mappingname"),h=t.buildTag("button#"+o+".e-sortingBtn e-flat",""),e,c,s;if(n(f).append(l.append(h)),e="None",c="",i)h.ejButton({text:e,type:"button",height:28,width:120,id:o,showRoundedCorner:!0,click:n.proxy(r._resSortButClick,r)});else{for(s=0;s<r.model.sortSettings.sortedColumns.length;s++)r.model.sortSettings.sortedColumns[s].field==o&&(e=r.model.sortSettings.sortedColumns[s].direction=="ascending"?"Ascending":"Descending",c=e=="Ascending"?"e-resIcon e-respponsiveSortingAsc":"e-resIcon e-respponsiveSortingDesc");c!=""?h.ejButton({text:e,type:"button",height:28,width:120,cssClass:"e-resSortIconBtn",id:o,prefixIcon:c,imagePosition:"imageright",contentType:"textandimage",showRoundedCorner:!0,click:n.proxy(r._resSortButClick,r)}):h.ejButton({text:e,type:"button",height:28,cssClass:"e-resSortIconBtn",width:120,id:o,showRoundedCorner:!0,click:n.proxy(r._resSortButClick,r)})}})},_sortOperation:function(t,i){var r,u,f;for(this._removeSortCol.indexOf(t)!=-1&&(this._sortColumns.splice(this._removeSortCol.indexOf(t),0),this._removeSortCol.splice(this._removeSortCol.indexOf(t),0)),r=0;r<this._sortColumns.length;r++)if(this._sortColumns[r].field==t)break;this.model.allowMultiSorting?(this.multiSortRequest=!0,r!=-1&&(this._sortColumns.splice(r,1),this._removeSortCol.indexOf(t)==-1&&this._removeSortCol.push(t))):(n("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-button").removeClass("e-disable"),u=n("#responsiveFilter").find(".e-responsivefilterColDiv").not(".e-responsivefilterColDiv[data-ej-mappingname='"+t+"']"),f=u.find(".e-button").addClass("e-disable"),f.text("None"),this._sortColumns.length>0&&(this._removeSortCol.push(this._sortColumns[0].field),this._sortColumns=[]));this._sortColumns.push({field:t,direction:i})},_resSortButClick:function(t){var f="",e="",u=t.model.id,i=n("#"+t.model.id).ejButton("instance"),r;if(t.model.text=="None")f="Ascending",e="e-resIcon e-respponsiveSortingAsc",this._sortOperation(u,"ascending");else if(t.model.text=="Ascending")f="Descending",e="e-resIcon e-respponsiveSortingDesc",this._sortOperation(u,"descending");else{for(i.model.text="None",i.model.prefixIcon="",i.type="button",i.model.contentType="text",i._render(),r=0;r<this._sortColumns.length;r++)if(this._sortColumns[r].field==u)break;this._removeSortCol.push(u);this._sortColumns.splice(r,1);n("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-button").removeClass("e-disable");return}i.model.text=f;i.model.prefixIcon="e-resIcon "+e;i.model.imagePosition="imageright";i.model.contentType="textandimage";i._render()},renderDiaglogButton:function(n,i){var r,o,f,e,u;return this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate"?r="EditExternalForm_":this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"?(r="InlineEditForm_",o=t.buildTag("div","","",{id:this._id+"_inlineFormTitle","class":"e-inlineform-titlebar"}),o.appendTo(i)):r="EditDialog_",f=t.buildTag("input.e-save e-button e-btnsub e-flat","",{"margin-left":"30px"},{type:"button",id:r+this._id+"_Save"}),f.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:this.localizedLabels.SaveButton,width:"100"}),e=t.buildTag("input.e-cancel e-button e-btncan e-flat","",{"margin-left":"19px","margin-right":"13px"},{type:"button",id:r+this._id+"_Cancel"}),e.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:this.localizedLabels.CancelButton,width:"100"}),u=this.model.editSettings.editMode!="dialog"&&this.model.editSettings.editMode!="dialogtemplate"?t.buildTag("div","","",{"class":"e-editform-btn"}):t.buildTag("div"),u.append(f),u.append(e),n.appendTo(i),this.model.editSettings.editMode!="dialog"&&this.model.editSettings.editMode!="dialogtemplate"?u.appendTo(i):n.append(u),i},_externalFormPosition:function(){var t=n(this.element).offset(),r=n(this.element).width(),u=n(this.element).height(),i=n("#"+this._id+"_externalEdit");switch(this.model.editSettings.formPosition){case"topright":n(i).find(".e-form-toggle-icon").removeClass("e-bottomleft").addClass("e-topright");n(i).css({left:t.left+r+1+"px",top:t.top+"px",position:"absolute",width:"290px"});n("#"+this._id+"_eFormContent").height("auto");break;case"bottomleft":n(i).find(".e-form-toggle-icon").removeClass("e-topright").addClass("e-bottomleft");n(i).css({left:t.left+"px",top:t.top+u+1+"px"});n("#"+this._id+"_eFormContent").width("100%")}},_setoffsetWidth:function(){var u,r=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):n("#"+this._id+"EditForm"),i;if(this._gridRecordsCount!=0||this.model.groupSettings.groupedColumns.length!=0||this.model.scrollSettings.frozenColumns!=0||this.model.scrollSettings.frozenRows!=0||this.model.editSettings.editMode=="batch"||r.find(".e-checkbox").length>0&&this._dataSource()instanceof t.DataManager)for(u=this.model.editSettings.editMode=="batch"?r.closest("td"):this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate"||this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate"?r.find(".e-rowcell").not(".e-unboundcell,.e-templatecell"):r.find("tr").find(".e-rowcell").not(".e-unboundcell,.e-templatecell"),i=0;i<u.length;i++)this._tdsOffsetWidth[i]=u.get(i).offsetWidth},_bulkChangesAcquired:function(){return this.batchChanges.added.length>0||this.batchChanges.changed.length||this.batchChanges.deleted.length?!0:!1},_renderDialog:function(){return t.buildTag("div.e-dialog e-dialog-content e-shadow e-widget-content","",{display:"none"},{id:this._id+"_dialogEdit"})},getCurrentEditCellData:function(){var r,i,f,u,e,o;if(this.model.isEdit&&n("#"+this._id+"EditForm").length){r=n("#"+this._id+this._bulkEditCellDetails.fieldName.replace(/[^a-z0-9\s_]/gi,""));f=this.model.columns[this._bulkEditCellDetails.columnIndex];switch(this._bulkEditCellDetails.cellEditType){case t.Grid.EditingType.String:case t.Grid.EditingType.Numeric:i=r.val();break;case t.Grid.EditingType.Dropdown:i=this._bulkEditCellDetails.isForeignKey?{value:r.ejDropDownList("getSelectedValue"),text:r.ejDropDownList("getValue")}:r.ejDropDownList("getSelectedValue");this._bulkEditCellDetails.isForeignKey&&f.originalType=="number"&&i.value!=""&&(i.value=JSON.parse(i.value));break;case t.Grid.EditingType.Boolean:i=r.is(":checked");break;case t.Grid.EditingType.DatePicker:e=n.trim(r.val());o=r.ejDatePicker("instance");o._setDateValue(e);i=e==""?e:o.model.value;break;case t.Grid.EditingType.DateTimePicker:i=n.trim(r.val())==""?n.trim(r.val()):r.ejDateTimePicker("model.value");break;case"edittemplate":u=f.editTemplate.read;typeof u=="string"&&(u=t.util.getObject(u,window));i=u(r)}return typeof i=="string"&&i.length&&f.type=="number"&&(i=t.globalize.parseFloat(i,this.model.locale)),i}return null},cancelEditCell:function(){if(this.model.isEdit){var r=this.getRows()[this._bulkEditCellDetails.rowIndex],u={},i;t.createObject(this._bulkEditCellDetails.fieldName,this._bulkEditCellDetails.cellValue,u);i=n(r).hasClass("e-insertedrow")?n(r).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex+this.model.groupSettings.groupedColumns.length):n(r).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex);n(i).removeClass("e-validError");n(i).hasClass("e-updatedtd")&&n(i).addClass("e-gupdatenotify");n(i).removeClass("e-editedbatchcell").empty().html(n(n.templates[this._id+"_JSONTemplate"].render(u)).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex).innerHTML);this.model.isEdit=!1;this.element.focus()}},saveCell:function(i){var l,a,v,o,w,b,s;if(this.model.isEdit){if(!this.editFormValidate())return!0;var y=n("#"+this._id+"EditForm"),k=y.closest("tr"),d=y.closest("td"),f,e,r={},u=this.model.columns[this._bulkEditCellDetails.columnIndex],p=n("#"+this._id+this._bulkEditCellDetails.fieldName.replace(/[^a-z0-9\s_]/gi,"")),c,h;if(r={columnName:u.field,value:this.getCurrentEditCellData(),rowData:this._bulkEditCellDetails.rowData,previousValue:this._bulkEditCellDetails.cellValue,columnObject:u,cell:d,isForeignKey:this._bulkEditCellDetails.isForeignKey},!i&&this._trigger("cellSave",r)){this._focusElements(r.cell);this._bulkEditCellDetails.cancelSave=!0;return}if(this.model.allowTextWrap&&r.cell.addClass("e-nowrap"),(this._bulkEditCellDetails.cellEditType=="datetimepicker"||this._bulkEditCellDetails.cellEditType=="dropdownedit"||this._bulkEditCellDetails.cellEditType=="datepicker")&&p[p.data("ejWidgets")[0]]("destroy"),t.isNullOrUndefined(u.format)||(u.type!="date"&&u.type!="datetime"||t.isNullOrUndefined(r.value)||(r.isForeignKey?r.value.text=r.value.text.length>0?new Date(r.value.text):r.value.text:r.value=r.value.length>0?new Date(r.value):r.value),e=this.formatting(u.format,r.isForeignKey?!isNaN(parseFloat(r.value.text))&&isFinite(r.value.text)?parseFloat(r.value.text):r.value.text:r.value,this.model.locale),r.cell.empty().html(e)),t.createObject(this._bulkEditCellDetails.fieldName,r.isForeignKey?r.value.value:r.value,r.rowData),t.isNullOrUndefined(u.format)&&(e=r.isForeignKey?r.value.text:r.value),t.isNullOrUndefined(u.template)||(l=t.copyObject({},r.rowData),t.createObject(this._bulkEditCellDetails.fieldName,r.isForeignKey?r.value.value:r.value,l),e=n.templates(u.template).render(l)),this._bulkEditCellDetails.cellEditType=="edittemplate"?(r.value instanceof Array&&(e=r.value.join()),r.cell.empty().html(e)):r.columnObject.type=="boolean"||r.columnObject.editType=="booleanedit"?(a={},t.createObject(r.columnObject.field,r.value,a),r.cell.empty().html(n(n.templates[this._id+"_JSONTemplate"].render(a))[0].cells[this._bulkEditCellDetails.columnIndex].innerHTML)):r.columnObject.editType!="datepicker"&&r.columnObject.editType!="datetimepicker"||t.isNullOrUndefined(u.format)?r.columnObject.disableHtmlEncode?r.cell.text(e).html():r.cell.empty().html(e):r.cell.empty().html(e),r.cell.removeClass("e-validError"),r.cell.hasClass("e-updatedtd")&&r.cell.addClass("e-gupdatenotify"),r.previousValue=t.isNullOrUndefined(r.previousValue)?"":u.type=="date"||u.type=="datetime"?new Date(r.previousValue):r.previousValue,f=r.isForeignKey?r.value.value:r.value,v=!1,this.model.editSettings.rowPosition=="bottom"?o=this._currentJsonData.length==this._bulkEditCellDetails.rowIndex?this._currentJsonData[this._bulkEditCellDetails.rowIndex-1]:this._currentJsonData[r.cell.parent().index()]:(w=this.getBatchChanges().added.length?r.cell.parent().index()-this.getBatchChanges().added.length:r.cell.parent().index(),o=this._currentJsonData.length==this._bulkEditCellDetails.rowIndex?this._currentJsonData[this._bulkEditCellDetails.rowIndex-1]:this._currentJsonData[w]),v=this._currentJsonData.length>0?this._bulkEditCellDetails.type!="date"&&this._bulkEditCellDetails.type!="datetime"||t.isNullOrUndefined(this._bulkEditCellDetails.format)?t.isNullOrUndefined(t.getObject(r.columnName,o))?!t.isNullOrUndefined(f):(this._bulkEditCellDetails.cellEditType=="datepicker"||this._bulkEditCellDetails.cellEditType=="datetimepicker"||this._bulkEditCellDetails.cellEditType=="dropdownedit")&&f instanceof Date&&r.previousValue instanceof Date?f.getTime()!==t.getObject(r.columnName,o).getTime():typeof f=="number"?f!==parseFloat(t.getObject(r.columnName,o)):typeof f=="boolean"?f!=t.getObject(r.columnName,o):f!==t.getObject(r.columnName,o).toString():this._bulkEditCellDetails.cellValue instanceof Date?this.formatting(this._bulkEditCellDetails.format,f)!=this.formatting(this._bulkEditCellDetails.format,t.getObject(r.columnName,o)):!0:!0,this.model.isEdit=!1,v)r.cell.addClass("e-updatedtd e-icon e-gupdatenotify"),this._enableSaveCancel(),c=t.getObject(this._bulkEditCellDetails.fieldName,r.rowData),h=typeof c=="string"&&c.length?r.isForeignKey?r.value.value.toString():r.value.toString():r.isForeignKey?isNaN(parseInt(r.value.value))?r.value.value:parseInt(r.value.value):r.value,typeof r.value!="string"||h.length||(h=null),t.createObject(this._bulkEditCellDetails.fieldName,h,r.rowData),n.inArray(r.rowData,this.batchChanges.changed)==-1&&n.inArray(r.rowData,this.batchChanges.added)==-1&&this.batchChanges.changed.push(r.rowData),this.isejObservableArray&&(b=r.cell.closest("tr").hasClass("e-insertedrow")?"insert":"update",this._refreshViewModel(r,b));else if(r.cell.removeClass("e-updatedtd e-icon e-gupdatenotify"),this._enableSaveCancel(),this.batchChanges.changed.length>0&&!r.cell.hasClass("e-editedbatchcell e-updatedtd e-icon e-gupdatenotify")&&!r.cell.parent().children().hasClass("e-updatedtd e-icon e-gupdatenotify"))for(s=0;s<this.batchChanges.changed.length;s++)r.rowData[this._primaryKeys[0]]==this.batchChanges.changed[s][this._primaryKeys[0]]&&this.batchChanges.changed.splice(s,1);k.removeClass("e-editedrow").removeClass("e-batchrow");r.cell.removeClass("e-editedbatchcell")}},_refreshViewModel:function(r,u){var s,e,f;for(s=this._dataSource()instanceof t.DataManager?this._dataSource():t.DataManager(this._dataSource()),e=new t.Query,f=0;f<this._primaryKeys.length;f++)e=e.where(this._primaryKeys[f],t.FilterOperators.equal,this._primaryKeys.length?t.getObject(this._primaryKeys[f],r.rowData):null);var c=s.executeLocal(e),o=this._dataSource(i,!0),h=n.inArray(c[0],this._dataSource());this.model.editSettings.showConfirmDialog=!1;switch(u){case"update":o(r.rowData,h,u);break;case"remove":o(r.rowData,h,u);break;case"insert":o(r.rowData,0,u)}},_enableSaveCancel:function(){if(this.model.toolbarSettings.showToolbar){var n=this.getContentTable().find(".e-updatedtd.e-icon.e-gupdatenotify").length>0||this._isBatchDeleteApplied?"enableItemByID":"disableItemByID",t=this.element.find("#"+this._id+"_toolbarItems");t.ejToolbar(n,this._id+"_update");t.ejToolbar(n,this._id+"_cancel")}},setCellText:function(r,u,f){var y=typeof u=="string",ut=this._excludeDetailRows(),s,ft=this.model.groupSettings.groupedColumns.length!=0,c=this.model.scrollSettings.allowVirtualScrolling,e=this[y?"getColumnByField":"getColumnByIndex"](u),p=t.getObject(["currentViewData",ft?".records":""].join(""),this.model),l={},et=c?this._dataManager:new t.DataManager(p),a=this._primaryKeys[0],d=y||t.getObject(r+"."+a,c?this._dataManager.dataSource.json:p),ot=f,g=!1,v,nt,w,b,k,st,h,o,tt,it,rt;t.createObject(e.field,f,l);y&&(d=r,r=et.executeLocal((new t.Query).select(a)).indexOf(r),u=this.getColumnIndexByField(e.field));c&&(v=this.model.pageSettings.pageSize,b=r%v,nt=(r+v-b)/v,w=(nt-1)*v,k=n.inArray(w,this.virtualLoadedPages)!=-1,k&&(s=this.getContentTable().find("tr[name="+w+"]")[b].cells[u]));st=this._excludeDetailRows()[r];h=this;t.isNullOrUndefined(e)||e.isPrimaryKey||e.allowEditing==!1||(t.isNullOrUndefined(e.validationRules)||(o=t.buildTag("form","",{},{id:this._id+"EditForm"}),tt=t.buildTag("input","",{},{id:this._id+e.field,value:f,name:e.field}),o.addClass("gridform"),o.append(tt),this.element.append(o),o.validate({errorPlacement:function(t){return h._alertDialog||h._renderAlertDialog(),n("#"+h._id+"AlertDialog_wrapper").css("min-height",""),h._alertDialog.find(".e-content").text(t.text()),h._alertDialog.ejDialog("open"),h.element.find(o).remove(),g=!0,!0}}),this.setValidationToField(e.field,e.validationRules)),t.isNullOrUndefined(e.format)||(it=this.formatting(e.format,e.foreignKeyValue?!isNaN(parseFloat(f))&&isFinite(f)?parseFloat(f):f:f,this.model.locale),ot=it),t.isNullOrUndefined(e.validationRules)||(n(o).validate().form(),this.element.find(o).remove()),g||(rt=r==-1||u==-1||c&&!k||r>(c?this._dataSource():p).length||u>this.model.columns.length,rt||(s=this.model.scrollSettings.frozenColumns?this._frozenCell(r,u)[0]:s||this._excludeDetailCells(ut[r])[u],f=e.format===i?f:this.formatting(e.format,f,this.model.locale),t.isNullOrUndefined(e.foreignKeyField)||t.isNullOrUndefined(e.foreignKeyValue)||(f=this._getForeignKeyData(l)[e.foreignKeyField][e.foreignKeyValue]),e.disableHtmlEncode?n(s).text(f):s.innerHTML=f,this._trigger("queryCellInfo",{cell:s,text:s.innerHTML,column:e,data:l})),a&&(t.createObject(a,d,l),this._dataManager.update(a,l))))},_excludeDetailCells:function(i){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)?n(i.cells):n(i.cells).not(".e-detailrowexpand, .e-detailrowcollapse")},setCellValue:function(r,u,f){var s,p,w;if(n("#"+this._id+"EditForm").length>0&&n("#"+this._id+"EditForm").attr("id","EditForm1"),this.model.editSettings.editMode=="batch"&&!this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.frozenColumns){var l=this.getDataByIndex(r),a=this._excludeDetailRows()[r],v=this.getColumnIndexByField(u),h=this,c=f,y=!1,e=this.getColumnByField(u),o;if(o=n(a).hasClass("e-insertedrow")?n(a.cells).not(".e-detailrowcollapse, .e-detailrowexpand")[v+this.model.groupSettings.groupedColumns.length]:n(a.cells).not(".e-detailrowcollapse, .e-detailrowexpand")[v],!t.isNullOrUndefined(e)&&!e.isPrimaryKey&&e.allowEditing!=!1){if(t.isNullOrUndefined(e.validationRules)||(s=t.buildTag("form","",{},{id:this._id+"EditForm"}),p=t.buildTag("input","",{},{id:this._id+e.field,value:f,name:e.field}),s.append(p),this.element.append(s),s.validate({errorPlacement:function(t){return h._alertDialog||h._renderAlertDialog(),n("#"+h._id+"AlertDialog_wrapper").css("min-height",""),h._alertDialog.find(".e-content").text(t.text()),h._alertDialog.ejDialog("open"),h.element.find(s).remove(),y=!0,!0}}),this.setValidationToField(e.field,e.validationRules)),e.foreignKeyValue&&(c=this._foreignKeyBinding(v,f,this._id),c==i)){this._alertDialog||this._renderAlertDialog();n("#"+this._id+"AlertDialog_wrapper").css("min-height","");this._alertDialog.find(".e-content").text(this.localizedLabels.ForeignKeyAlert);this._alertDialog.ejDialog("open");t.isNullOrUndefined(e.validationRules)||this.element.find(s).remove();return}t.isNullOrUndefined(e.format)||(w=this.formatting(e.format,e.foreignKeyValue?!isNaN(parseFloat(f))&&isFinite(f)?parseFloat(f):f:f,this.model.locale),c=w);t.isNullOrUndefined(e.validationRules)||(n(s).validate().form(),this.element.find(s).remove());n("#EditForm1").attr("id",this._id+"EditForm");y||o.innerHTML==c||(n(o).has("form").length>0&&(this.model.isEdit=!1),n(o).hasClass("e-boolrowcell")?n(o).find("input").attr("checked",c):o.innerHTML=c,n(o).addClass("e-updatedtd e-icon e-gupdatenotify"),n(o).removeClass("e-validError e-editedbatchcell"),t.createObject(u,f,l),n.inArray(l,this.batchChanges.changed)==-1&&this.batchChanges.changed.push(l),this._enableSaveCancel())}}},setDefaultData:function(i){var e,h,o,u,f,c;if(t.isNullOrUndefined(i)){for(e=[],h=this.model.columns,o=0;o<this.model.columns.length;o++)e.push(this.model.columns[o].field);for(t.isNullOrUndefined(this._bulkEditCellDetails._data)&&(this._bulkEditCellDetails._data=[]),i={},u=function(n,r){t.createObject(n,r,i)},f=0;f<e.length;f++){var s=f,r=e[f],l=h[f].type,a=t.getObject(r,this._bulkEditCellDetails._data[0]),v=t.isNullOrUndefined(this.model.parentDetails)?null:this.model.parentDetails.parentKeyField;if(r===v&&(this.model.columns[s].defaultValue=this.model.parentDetails.parentKeyFieldValue),t.isNullOrUndefined(this.model.columns[s].defaultValue))switch(l){case"number":u(r,0);break;case"string":u(r,null);break;case"boolean":u(r,!1);break;case"object":n.isArray(a)?u(r,[]):u(r,null);case"datetime":case"date":u(r,null)}else u(r,this.model.columns[s].defaultValue)}t.isNullOrUndefined(this.model.queryString)||(c=this.model.foreignKeyField||this.model.queryString,i[c]=this.model.parentDetails.parentRowData[this.model.queryString])}this._bulkEditCellDetails.defaultData=i},_bulkDelete:function(i){if(this.model.editSettings.allowDeleting){if(t.isNullOrUndefined(i)&&(i=this._selectedRow()),i==-1){alert(this.localizedLabels.DeleteOperationAlert);return}var e,r,u,f={};if(this.multiDeleteMode&&this.selectedRowsIndexes.length>1?(u=[],r=this.getSelectedRows(),Array.prototype.push.apply(u,this.getSelectedRecords()),Array.prototype.push.apply(this.batchChanges.deleted,this.getSelectedRecords())):(e=this.getRows()[i],r=n(e),u=this.getDataByIndex(i)),f={primaryKey:this._primaryKeys,rowIndex:i,rowData:u,row:r},this._trigger("beforeBatchDelete",f))return;this.isejObservableArray&&this._refreshViewModel(f,"remove");this.model.isEdit&&this.cancelEditCell();r.hasClass("e-insertedrow")?(r.remove(),i=n.inArray(e,this._bulkEditCellDetails.insertedTrCollection),i!=-1&&(this._bulkEditCellDetails.insertedTrCollection.splice(i,1),this.batchChanges.added.splice(i,1))):(r.hide(),(f.rowIndex==0||r.hasClass("e-firstrow"))&&(r.hasClass("e-firstrow")&&this.getContentTable().find("tr").removeClass("e-firstrow"),this.getContentTable().find("tr:visible").first().addClass("e-firstrow")),n.isArray(u)||this.batchChanges.deleted.push(u));this._gridRows=this.getContentTable().find("td.e-rowcell").closest("tr").toArray();this.model.allowScrolling&&this._refreshScroller(f);this._isBatchDeleteApplied=!0;this._enableSaveCancel();this._selectedRow(-1);f={primaryKey:this._primaryKeys,rowIndex:i,rowData:u};this._trigger("batchDelete",f)}},_bulkAddRow:function(i){var h=n("#"+this._id+"EditForm"),r,u,f,e,o,s;if(h.length&&!this.editFormValidate())return!0;if(this.model.editSettings.allowAdding){if(this._isAddNew=!0,r={},e=this.getRows(),t.isNullOrUndefined(i)||(this._bulkEditCellDetails.defaultData=i),t.isNullOrUndefined(this._bulkEditCellDetails.defaultData)&&this.setDefaultData(),r={defaultData:n.extend(!0,{},this._bulkEditCellDetails.defaultData),primaryKey:this._primaryKeys},this._trigger("beforeBatchAdd",r))return;for(u=n(n.render[this._id+"_JSONTemplate"](r.defaultData)).addClass("e-insertedrow"),e!=null&&n(e[0]).hasClass("e-alt_row")&&u.removeClass("e-alt_row"),this.model.editSettings.rowPosition=="top"?this.getContentTable().first().find("tbody").first().prepend(u):this.model.editSettings.rowPosition=="bottom"&&this.getContentTable().first().find("tbody").first().append(u),this._gridRecordsCount===0&&this.getContentTable().find("tbody .emptyrecord").first().remove(),this._gridRows=this.getContentTable().find("td.e-rowcell").closest("tr").toArray(),o=0;o<this.model.groupSettings.groupedColumns.length;o++)u.prepend(t.buildTag("td.e-indentcell"));this._bulkEditCellDetails.insertedTrCollection.push(u.get(0));this.batchChanges.added.push(r.defaultData);s=this._gridRows.length-1;this.model.editSettings.rowPosition=="bottom"?(f=this._findNextEditableCell(0),this.selectRows(s),this.editCell(s,this.model.columns[f].field)):(f=this._findNextEditableCell(0),this.selectRows(0),this.editCell(0,this.model.columns[f].field));this.model.allowScrolling&&this._refreshScroller(r);u.find(".e-rowcell").addClass("e-updatedtd e-icon e-gupdatenotify");this._enableSaveCancel();r={defaultData:r.defaultData};n.extend(r,{columnObject:this.model.columns[f],columnIndex:f,row:u,primaryKey:this._primaryKeys,cell:n(u[0].cells[f])});this._trigger("batchAdd",r);this._trigger("refresh",r)}},getDataByIndex:function(t){var i=n(this._excludeDetailRows()[t]),r;return i.hasClass("e-insertedrow")?(r=n.inArray(i[0],this._bulkEditCellDetails.insertedTrCollection),this.batchChanges.added[r]):this._bulkEditCellDetails._data[this.model.editSettings.rowPosition=="top"?t-this._bulkEditCellDetails.insertedTrCollection.length:t]},refreshBatchEditChanges:function(){this._bulkEditCellDetails={cellValue:null,rowIndex:-1,_data:null,columnIndex:-1,fieldName:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null,isForeignKey:!1};this.batchChanges={added:[],deleted:[],changed:[]}},refreshBatchEditMode:function(){(this.model.editSettings.editMode=="batch"||this._enableCheckSelect)&&(this.refreshBatchEditChanges(),this._bulkEditCellDetails._data=n.extend(!0,[],this.getCurrentViewData()))},batchCancel:function(){this.cancelEdit()},batchSave:function(){var n={},i=this,t=this.model.editSettings.rowPosition=="top"||this._gridRows==null?0:this._gridRows.length-1;if(this._batchCellValidation(t),!this.saveCell()){if(n.batchChanges=this.getBatchChanges(),this._trigger("beforeBatchSave",n))return;n={};n.requestType="batchsave";this._isAddNew=!1;this._sendBulkReuqest(this.getBatchChanges(),n)}},_sendBulkReuqest:function(n,i){var r=this._dataManager.saveChanges(n,this._primaryKeys[0],this.model.query._fromTable,this.model.query),u=this;this._isBatchDeleteApplied=!1;this._dataManager instanceof t.DataManager&&!this._dataManager.dataSource.offline?(r.done(function(){u._processBindings(i)}),r.fail(function(n){var t={error:n.error};u._trigger("actionFailure",t)})):this._processBindings(i)},getBatchChanges:function(){return this.batchChanges},editCell:function(r,u){var c;if(!this.element.ejWaitingPopup("model.showOnInit")&&this.model.editSettings.allowEditing&&n.inArray(u,this._disabledEditableColumns)==-1){if(c=n("#"+this._id+"EditForm"),this.model.isEdit&&this.saveCell(),n.isFunction(n.validator)&&c.length&&c.validate().errorList.length)return;var o=n(this._excludeDetailRows()[r]),s=this.getColumnIndexByField(u),a=o.find(".e-rowcell").eq(s),e=this.model.columns[s],h=this.getDataByIndex(r),f={validationRules:t.isNullOrUndefined(e.validationRules)?{}:n.extend(!0,{},e.validationRules),columnName:e.field,value:t.getObject(t.isNullOrUndefined(u)?"":u,h),rowData:h,row:o,primaryKey:this._primaryKeys,columnObject:e,cell:a,isForeignKey:!t.isNullOrUndefined(e.foreignKeyValue)&&this.model.editSettings.editMode=="batch"?!0:!1},l=!0;if(this.model.allowTextWrap&&this.element.find(".e-rowcell").removeClass("e-nowrap"),this.model.allowScrolling&&this._refreshScroller(f),this._batchEditRowData=h,this._trigger("cellEdit",f))return;o.hasClass("e-insertedrow")&&(f.requestType="add");(n.inArray(u,this._primaryKeys)!=-1||f.columnObject.allowEditing===!1||(f.columnObject.template||f.columnObject.type=="checkbox")&&(f.columnObject.allowEditing==!1||!f.columnObject.field)||f.columnObject.commands)&&(n.extend(this._bulkEditCellDetails,{cellValue:f.value,rowIndex:r,fieldName:u,rowData:f.rowData,columnIndex:s,isForeignKey:t.isNullOrUndefined(f.columnObject.foreignKeyValue)?!1:!0}),l=!1);o.hasClass("e-insertedrow")&&f.columnObject.isPrimaryKey&&(l=!0);l&&(n.extend(this._bulkEditCellDetails,{rowIndex:r,cellValue:f.value,columnIndex:s,format:e.format==i?null:e.format,type:e.type,fieldName:u,cellEditType:f.columnObject.editType,rowData:h,isForeignKey:t.isNullOrUndefined(f.columnObject.foreignKeyValue)?!1:!0}),this._renderBulkEditObject(f,a),o.addClass("e-editedrow").addClass("e-batchrow"),f.cell.addClass("e-editedbatchcell"),f.columnObject.editType=="booleanedit"&&f.cell.addClass("e-boolrowcell"))}},_findNextEditableCell:function(n){for(var i=this.model.columns.length,t=n;t<i;t++)if(!this.model.columns[t].template&&!this.model.columns[t].commands&&this.model.columns[t].visible)return t;return-1},_findNextCell:function(i,r,u){var e,f=[],o,s=this.getRows();return this.model.columns[i].template&&(this.model.columns[i].__isTemplate=!0),this.model.columns[i].commands&&(this.model.columns[i].__isCommand=!0),o=t.isNullOrUndefined(u)||u.keyCode!=39&&u.keyCode!=37?t.Predicate("visible","equal",!0).and("__isTemplate","notequal",!0).and("__isCommand","notequal",!0).and("allowEditing","notequal",!1).and("isPrimaryKey","notequal",!0):t.Predicate("visible","equal",!0),e=r=="right"?this.model.columns.slice(i):this.model.columns.slice(0,i+1).reverse(),f=t.DataManager(e).executeLocal(t.Query().where(o)),f.length!=0||r=="left"&&this._bulkEditCellDetails.rowIndex==0||r=="right"&&this._bulkEditCellDetails.rowIndex+1==this.getRows().length||(e=r=="right"?this.model.columns.slice(0,i):this.model.columns.slice(i).reverse(),f=t.DataManager(e).executeLocal(t.Query().where(o)),this._bulkEditCellDetails.rowIndex=f.length&&r=="right"?this._bulkEditCellDetails.rowIndex+1:this._bulkEditCellDetails.rowIndex-1),f.length?n.inArray(f[0],this.model.columns):-1},_moveCurrentCell:function(i,r){var u,f=this._bulkEditCellDetails.rowIndex,e=n("#"+this._id+"EditForm"),o;if(this._bulkEditCellDetails.rowIndex==-1&&this._bulkEditCellDetails.columnIndex==-1)return!0;switch(i){case"right":if(this._bulkEditCellDetails.rowIndex==this.getRows().length-1&&this._bulkEditCellDetails.columnIndex==this.model.columns.length-1||!this.element.is(document.activeElement)&&e.length==0)return!0;this._bulkEditCellDetails.columnIndex==this.model.columns.length-1?(u=0,this._bulkEditCellDetails.rowIndex=this._bulkEditCellDetails.rowIndex+1):u=this._bulkEditCellDetails.columnIndex+1;(t.isNullOrUndefined(this.model.columns[u].template)||!t.isNullOrUndefined(this.model.columns[u].field))&&t.isNullOrUndefined(this.model.columns[u].commands)&&this.model.columns[u].visible!==!1&&this.model.columns[u].allowEditing!==!1||(u=this._findNextCell(u,i,r));this._bulkEditCellDetails.rowIndex!=f&&this.selectRows(this._bulkEditCellDetails.rowIndex);u!=-1&&this.editCell(this._bulkEditCellDetails.rowIndex,this.model.columns[u].field);break;case"left":if(this._bulkEditCellDetails.rowIndex==0&&this._bulkEditCellDetails.columnIndex==0||!this.element.is(document.activeElement)&&e.length==0)return!0;this._bulkEditCellDetails.columnIndex==0?(u=this.model.columns.length-1,this._bulkEditCellDetails.rowIndex=this._bulkEditCellDetails.rowIndex-1,this.selectRows(this._bulkEditCellDetails.rowIndex)):u=this._bulkEditCellDetails.columnIndex-1;(t.isNullOrUndefined(this.model.columns[u].template)||!t.isNullOrUndefined(this.model.columns[u].field))&&t.isNullOrUndefined(this.model.columns[u].commands)&&this.model.columns[u].visible!==!1&&this.model.columns[u].allowEditing!==!1||(u=this._findNextCell(u,i,r));this._bulkEditCellDetails.rowIndex!=f&&this.selectRows(this._bulkEditCellDetails.rowIndex);u!=-1&&this.editCell(this._bulkEditCellDetails.rowIndex,this.model.columns[u].field);break;case"up":if(this._bulkEditCellDetails.rowIndex==0)return;u=this._bulkEditCellDetails.columnIndex;this._enableCheckSelect||this.selectRows(this._bulkEditCellDetails.rowIndex-1);this.editCell(this._bulkEditCellDetails.rowIndex-1,this.model.columns[this._bulkEditCellDetails.columnIndex].field);break;case"down":if(this._bulkEditCellDetails.rowIndex==this.getRows().length-1){this.endEdit();return}u=this._bulkEditCellDetails.columnIndex;this._enableCheckSelect||this.selectRows(this._bulkEditCellDetails.rowIndex+1);this._bulkEditCellDetails.columnIndex!=-1&&(this.editCell(this._bulkEditCellDetails.rowIndex+1,this.model.columns[this._bulkEditCellDetails.columnIndex].field),this.selectCells([[this._bulkEditCellDetails.rowIndex,this._bulkEditCellDetails.columnIndex]]))}return o=!n(this.getRows()[this._bulkEditCellDetails.rowIndex]).hasClass("e-insertedrow"),u!=-1&&(this.model.columns[u].commands||this.model.columns[u].isPrimaryKey&&o||this.model.columns[u].template)&&this.element.focus(),!1},_renderBulkEditObject:function(i,r){var o=t.buildTag("form","",{},{id:this._id+"EditForm"}),c=this._bulkEditTemplate,l=this._id+i.columnObject.field,u,s,e={},h,f;t.createObject(i.columnObject.field,i.value,e);h={requestType:i.requestType,cell:i.cell,columnName:i.columnName,rowData:i.rowData,row:i.row};r.empty();r.parent().is(":last-child")||(r.addClass("e-validError"),r.removeClass("e-gupdatenotify"));s=c.find("#"+i.columnObject.field.replace(/[^a-z0-9\s_]/gi,t.pvt.consts.complexPropertyMerge)+"_BulkEdit").html();u=n(n.templates(s).render(e));u.get(0).tagName=="SELECT"&&(f=t.getObject(i.columnObject.field,e),u.val(t.isNullOrUndefined(f)?"":f.toString()),u.val()==null&&u.val(u.find("option").first().val()),u.data("ej-value",f));o.append(u);r.append(o);this._setoffsetWidth();this._refreshEditForm(h);n.isFunction(n.validator)&&!n.isEmptyObject(i.validationRules)&&(this.initValidator(),this.setValidationToField(i.columnObject.field,i.validationRules));this.model.isEdit=!0},_triggerConfirm:function(n){if(n!==i&&n.model.text==this._getDeprecatedLocalizedLabel("OKButton"))this._confirmDialog.find(".e-content").text()==this.localizedLabels.BatchSaveConfirm?this.batchSave():this._confirmDialog.find(".e-content").text()==this.localizedLabels.ConfirmDelete?this.model.editSettings.editMode=="batch"?this._bulkDelete():this.multiDeleteMode?this._multiRowDelete():t.isNullOrUndefined(this._cDeleteData)?this.deleteRow():(this.deleteRow(this._cDeleteData),this._cDeleteData=null):this._confirmDialog.find(".e-content").text()==this.localizedLabels.CancelEdit?this.cancelEdit():(this._confirmedValue=!0,this._processBindings(this._requestArgs)),this._isBatchDeleteApplied=!1,this.clearSelection();else{if(this._confirmDialog.find(".e-content").text()!=this.localizedLabels.BatchSaveConfirm&&this._confirmDialog.find(".e-content").text()!=this.localizedLabels.ConfirmDelete&&this._confirmDialog.find(".e-content").text()!=this.localizedLabels.CancelEdit)switch(this._requestArgs.requestType){case"grouping":this.model.groupSettings.groupedColumns.pop();break;case"ungrouping":this.model.groupSettings.groupedColumns.push(this._requestArgs.columnName);break;case"sorting":this._cSortedDirection=this._cSortedColumn=null;break;case"filtering":this.model.filterSettings.filteredColumns.reverse().splice(0,this._requestArgs.currentFilterObject);this.model.filterSettings.filteredColumns.reverse();break;case"paging":this._currentPage(this._requestArgs.previousPage);this.getPager().ejPager("model.currentPage",this._requestArgs.previousPage)}this._confirmedValue=!1}this._requestArgs=null;this._confirmDialog.ejDialog("close")},_batchCellValidation:function(n){var r=this.getRowByIndex(n),t,i;if(this.model.editSettings.editMode=="batch"&&this.model.isEdit&&r.hasClass("e-insertedrow"))for(t=0;t<this._validatedColumns.length;t++){if(i=this.getColumnIndexByField(this._validatedColumns[t]),!this.editFormValidate())return!0;this.editCell(n,this.model.columns[i].field)}},_saveCellHandler:function(t){var i=n(t.target),r;t.stopPropagation();r=this.model.editSettings.rowPosition=="top"||this._gridRows==null?0:this._gridRows.length-1;i.closest(".e-popup").length==0&&i.closest(".e-rowcell").find("#"+this._id+"EditForm").length==0&&(n(this.getRows()).hasClass("e-insertedrow")&&this._batchCellValidation(r),this.saveCell())},initValidator:function(){for(var r=this,i=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):n("#"+this._id+"EditForm"),t=0;t<i.length;t++)i.eq(t).validate({ignore:".e-hide",errorClass:"e-field-validation-error",errorElement:"div",wrapper:"div",errorPlacement:function(n,t){r._renderValidator(n,t)}})},_renderValidator:function(i,r){var y,b,p,g,nt,tt;if(r.is(":hidden")&&(r=r.siblings("input:visible")),r.length){var f=r.closest(".e-rowcell"),e=n(i).addClass("e-error"),l=t.buildTag("div.e-errortail e-toparrow"),v=this.model.isResponsive||this.model.allowScrolling,u=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),w=0;f=f.length?f:f=r.closest("td");f.find(".e-error").remove();r.parent().hasClass("e-in-wrap")?e.insertAfter(r.closest(".e-widget")):e.insertAfter(r);y=this.model.scrollSettings.frozenRows>0&&this._currentTrIndex>=this.model.scrollSettings.frozenRows?!0:!1;b=y?"append":"prepend";e[b](l);v&&!t.isNullOrUndefined(u)&&(u._hScrollbar||u._vScrollbar)&&(f.addClass("e-validError"),w=u._hScrollbar?u._hScrollbar.element[0].offsetTop:0);var o=f[0].offsetTop+f[0].offsetHeight+i[0].offsetHeight,a=!1,k=u&&u._hScrollbar?u._hScrollbar.model.height:0;if((u&&u.isHScroll()&&o>w||o>this.getContent()[0].offsetTop+this.getContent().find(".e-content").height())&&(a=!0),v&&!t.isNullOrUndefined(u)&&(u._hScrollbar||u._vScrollbar)||(i.width(i.width()),r.closest(".e-validError").removeClass("e-validError")),this.model.enableRTL?this.model.editSettings.editMode!="dialog"&&e.offset({top:r.offset().top+r.height()}):this.model.editSettings.editMode!="dialog"&&e.offset({left:r.offset().left,top:r.offset().top+r.height()}),this.model.scrollSettings.frozenRows<=0&&n.inArray(this.model.editSettings.editMode,["externalform","externalformtemplate","dialog","dialogtemplate"])==-1){var d=this.getContent(),h=d.find(".e-content"),c=h.height(),s=d[0].offsetTop;if(a&&u!=null&&u._vScrollbar&&this.model.scrollSettings.frozenColumns){var ut=u._vScrollbar.model.value-(o-(s+h[0].scrollHeight)),it=s+h[0].scrollHeight,rt=s+c;(!this.model.scrollSettings.frozenColumns&&o>it||this.model.scrollSettings.frozenColumns&&o>rt)&&(u._vScrollbar.model.maximum+=o-(s+c),u._vScrollbar.refresh(!0));this.model.scrollSettings.frozenColumns&&(p=this.getContent().find(".e-movablecontent"),p.height(p[0].scrollHeight));u.scrollY(r.offset().top-s+h[0].scrollTop)}else a&&v&&u!=null&&(u.isVScroll()?u.isVScroll()&&(u.refresh(),this._showHideScroller(),u._vScroll&&(nt=u._vScrollbar.model.value+(o-(s+c+k-k)),u.scrollY(nt))):(g=o-(s+c),h.height(c+g)))}else y&&(a?(tt=e.css("top"),l.addClass("e-bottomarrow"),e.css({bottom:tt,top:"auto"})):l.prependTo(l.parent()));e.show("slow")}},setValidation:function(){for(var n=0;n<this.model.columns.length;n++)t.isNullOrUndefined(this.model.columns[n].validationRules)||this.setValidationToField(this.model.columns[n].field,this.model.columns[n].validationRules)},setValidationToField:function(i,r){var f=i,u,e,s,o;t.isNullOrUndefined(i)||(f=f.replace(/[^a-z0-9\s_]/gi,""));e=this.model.editSettings.editMode=="batch"?this.element.find("#"+this._id+"EditForm"):this.model.editSettings.showAddNewRow?n(this.getRows()).hasClass("e-editedrow")?this.element.find(".e-editedrow .gridform"):this.element.find(".e-addedrow .gridform"):this.element.find(".gridform");u=/^[a-zA-Z0-9- ]*$/.test(i)?e.find("[name="+f+"]"):e.find("#"+this._id+f);t.isNullOrUndefined(u.attr("id"))||u.attr("id").indexOf("hidden")==-1||(u=e.find("#"+this._id+f));u.length==0&&(u=e.find("#"+f));r.regex&&(r[i+"regex"]=r.regex,delete r.regex,n.validator.addMethod(f+"regex",function(n,t,i){var r=i instanceof RegExp?i:new RegExp(i);return r.test(n)},t.getObject("messages.regex",r)||this.getColumnByField(i).headerText+" should match the given pattern"));u.attr("name")||u.attr("name",i);u.rules("add",r);s=n("#"+this._id+"EditForm").validate();s.settings.messages[i]=s.settings.messages[i]||{};t.isNullOrUndefined(r.required)||(o=t.isNullOrUndefined(r.messages&&r.messages.required)?n.validator.messages.required:r.messages.required,o.indexOf("This field")==0&&(o=o.replace("This field",this.getColumnByField(i).headerText)),s.settings.messages[i].required=o,u.hasClass("e-datepicker")&&u.ejDatePicker({watermarkText:""}))},_renderConfirmDialog:function(){var r=t.buildTag("div.e-content",this.localizedLabels.BatchSaveConfirm),i=t.buildTag("span.e-buttons",'<input type="button" class="e-flat e-btnsub" id='+this._id+'ConfirmDialogOK value="'+this._getDeprecatedLocalizedLabel("OKButton")+"\" /> <input type='button' class='e-flat e-btncan' id="+this._id+"ConfirmDialogCancel value='"+this.localizedLabels.CancelButton+"' />");this._confirmDialog=t.buildTag("div#"+this._id+"ConfirmDialog",{float:"left"});this._confirmDialog.append(r).append(i);this.element.append(this._confirmDialog);i.find("input").ejButton({cssClass:this.model.cssClass,showRoundedCorner:!0,size:"mini",click:n.proxy(this._triggerConfirm,this)});this._renderFDialog(this._id+"ConfirmDialog");this._confirmDialog.ejDialog({width:"auto",minWidth:0,minHeight:0,enableModal:!0})},_unboundClickHandler:function(i){var r=n(i.target).closest("button"),e,o,u,s,h,f,c,l;if((!r.hasClass("e-button")||!(r.hasClass("e-disable")||r.prop("disabled")))&&r.closest(".e-grid").attr("id")===this._id&&(e=0,o={},!n(i.target).hasClass("e-unboundcelldiv"))){if(u=r.hasClass("e-savebutton")?this.getIndexByRow(n(".e-editedrow")):this.getIndexByRow(r.closest("tr")),this.model.isEdit&&(!this._isLocalData||this._isRemoteSaveAdaptor)&&r.hasClass("e-editbutton")){this._unboundRow=r.closest("tr");return}if(s=this._currentJsonData[u],h=n(r).ejButton("instance"),(this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlinetemplate")&&(e=n("#"+this._id).find(".e-editedrow").length),this.model.allowSelection&&!this.model.isEdit&&this.selectRows(this.getIndexByRow(r.closest("tr"))-e),r.hasClass("e-cancelbutton")&&(this.model.isEdit=!1),n.isFunction(n.fn.ejDatePicker)&&n("#"+this._id+"EditForm").find(".e-datepicker").ejDatePicker("hide"),r.hasClass("e-editbutton")&&this.model.editSettings.editMode!="batch")this.model.isEdit&&this.cancelEdit(),f=this.getRowByIndex(u),this.startEdit(f);else if(r.hasClass("e-deletebutton")){if(f=this.getRowByIndex(u),this.model.editSettings.showDeleteConfirmDialog&&!this._isUnboundColumn){this._toolbarOperation(this._id+"_delete");return}this.deleteRow(f)}else r.hasClass("e-savebutton")?(this.endEdit(),s=this._currentJsonData[u]):r.hasClass("e-cancelbutton")&&this.cancelEdit();o={rowIndex:u,data:s,buttonModel:h.model,commandType:r.val()};t.raiseWebFormsServerEvents&&(c={model:this.model,originalEventType:"commandButtonClick"},l=o,t.isNullOrUndefined(this.model.serverEvents)||n.inArray("commandButtonClick",this.model.serverEvents)==-1||t.raiseWebFormsServerEvents("commandButtonClick",c,l))}},addRecord:function(n,i){var u,r;this.model.editSettings.allowAdding&&this.element.find(".e-gridcontent .gridform").length==0&&(n?((this.model.editSettings.editMode=="normal"||this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate")&&(u=t.buildTag("tr.e-addedrow"),this.getContentTable().find("tbody").first().prepend(u)),r={data:n},r.action="add",r.selectedRow=this._selectedRow(),this._cAddedRecord=n,r.requestType=t.Grid.Actions.Save,this._updateAction(r),r.selectedRow!=-1&&this.selectRows(r.selectedRow+1),this._isUnboundColumn&&this._refreshUnboundTemplate(this.getContentTable()),i||(this.model.editSettings.editMode=="normal"||this.model.editSettings.editMode=="inlineform"||this.model.editSettings.editMode=="inlineformtemplate")&&this.model.allowPaging&&this.model.pageSettings.pageSize<this.model.currentViewData.length&&this.model.groupSettings.groupedColumns.length==0&&!this.model.editSettings.showAddNewRow&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild)):this._startAdd())},updateRecord:function(n,t){this._updateDeleteRecord(n,t,"update")},_updateDeleteRecord:function(i,r,u){var v=t.DataManager(this._currentJsonData),s=[],o,c,l,e,a,h,f;t.isNullOrUndefined(i)||(s=v.executeLocal(t.Query().where(i,t.FilterOperators.equal,t.getObject(i,r))));s.length?(o=n.inArray(s[0],this._currentJsonData),e={data:r,rowData:r,requestType:t.Grid.Actions.Save,previousData:s[0],rowIndex:o},a=this._getForeignKeyData(e.data),t.isNullOrUndefined(a)||(e.foreignKeyData=a),this._trigger("actionBegin",e),o!=-1&&(c=this.getRowByIndex(o),u=="update"?(t.copyObject(s[0],r),l=n(n.render[this._id+"_JSONTemplate"](s)),c.hasClass("e-alt_row")?l.addClass("e-alt_row"):l.removeClass("e-alt_row"),c.replaceWith(l),this._isUnboundColumn&&this._refreshUnboundTemplate(this.getContentTable()),this.model.editSettings.editMode=="batch"?this.batchChanges.changed.push(s[0]):(h=this._dataManager[u](i,r),f=this,h&&n.isFunction(h.promise)?(h.done(function(){f.model.editSettings.editMode!="batch"&&(f.model.sortSettings.sortedColumns.length||f.model.summaryRows.length>0||f.model.groupSettings.groupedColumns.length||!t.isNullOrUndefined(f._searchCount)||f.filterColumnCollection.length)?f._processBindings(e):f._trigger("actionComplete",e)}),h.fail(function(){f._trigger("actionFailure",e)})):f.model.editSettings.editMode!="batch"&&(f.model.sortSettings.sortedColumns.length||f.model.summaryRows.length>0||f.model.groupSettings.groupedColumns.length||!t.isNullOrUndefined(f._searchCount)||f.filterColumnCollection.length)?f._processBindings(e):f._trigger("actionComplete",e)),this._isMapSelection&&(this._selectionByGrid=!0,this.multiSelectCtrlRequest=!0,r[this._selectionMapColumn]?this.selectRows(o):this.clearSelection(o),this._selectionByGrid=!1)):(n.inArray(o,this.selectedRowsIndexes)==-1&&this.selectedRowsIndexes.push(o),this.deleteRow(c)),this.model.editSettings.editMode=="batch"&&(this.batchSave(),this._confirmedValue=!0))):this.model.editSettings.editMode=="batch"?(this.batchChanges[u=="update"?"changed":"deleted"].push(r),this.batchSave(),this._confirmedValue=!0):this._dataManager[u](i,r)},deleteRecord:function(n,t){this._updateDeleteRecord(n,t,"remove")}}}(jQuery,Syncfusion),function($,ej,undefined){ej.gridFeatures=ej.gridFeatures||{};ej.gridFeatures.filter={getFilterBar:function(){return this._gridFilterBar},setGridFilterBar:function(n){this._gridFilterBar=n},filterColumn:function(n,t,i,r,u,f){var e,a,s,h,p,g,l,o,w,nt,y,b,d,v;if(this.model.allowFiltering)for(e=this.getColumnByField(n),(ej.isNullOrUndefined(e)||ej.isNullOrUndefined(e.filterBarTemplate)||e.type!="boolean"||i!="true")&&i!="false"||(i=JSON.parse(i)),e&&ej.isNullOrUndefined(e.format)?e.type=="date"?a=ej.preferredCulture().calendar.patterns.d:e.type=="datetime"&&(a=ej.preferredCulture().calendar.patterns.f):e&&(a=e.format.replace("{0:","").replace("}","")),!ej.isNullOrUndefined(e)&&!ej.isNullOrUndefined(e.filterBarTemplate)&&(e.type=="date"||e.type=="datetime")&&i.length>0&&(i=ej.parseDate(i,a,this.model.locale)),s=[],typeof n=="object"?s=n:s.push({field:n,operator:t,value:i,predicate:r,matchcase:u,actualFilterValue:f}),h=0;h<s.length;h++){var n=s[h].field,t=s[h].operator,i=s[h].value,r=s[h].predicate,u=ej.isNullOrUndefined(s[h].matchcase)?!1:s[h].matchcase,f=s[h].actualFilterValue,c={};for(c.requestType=ej.Grid.Actions.Filtering,c.currentFilterObject=[],this._$curFieldName=n,$.isArray(t)||(t=$.makeArray(t)),$.isArray(i)||(i=$.makeArray(i)),$.isArray(r)||(r=$.makeArray(r)),p=!1,g=this._filterCollection,ej.util.isNullOrUndefined(this._currentFilterColumn)&&(this._currentFilterColumn=this.getColumnByField(n)),l=0;l<t.length;l++){if(o={field:n,operator:t[l],value:i[l],matchcase:u,predicate:r[l],actualFilterValue:ej.getObject("value",f),actualOperator:ej.getObject("operator",f)},w=ej.getObject("ejpredicate",f),w&&(o=w),this._$colType!=null&&this.model.filterSettings.filterType!="filterbar"||ej.isNullOrUndefined(this._currentFilterColumn)||(this._$colType=this._currentFilterColumn.type),this.model.filterSettings.filteredColumns.length==0&&o.value!=="")(this._$colType=="date"||this._$colType=="datetime")&&this.model.filterSettings.filterType!=="excel"&&(t=="equal"||t=="notequal")&&typeof o.value!="string"?this._setDateFilters(o):this.model.filterSettings.filteredColumns.push(o);else{if(nt=this,!p){var tt=ej.DataManager(this.model.filterSettings.filteredColumns),it=(new ej.Query).where("field",ej.FilterOperators.equal,o.field),k=tt.executeLocal(it);for(y=0;y<k.length;y++)b=$.inArray(k[y],this.model.filterSettings.filteredColumns),b!=-1&&this.model.filterSettings.filteredColumns.splice(b,1)}o.value!==""&&((this._$colType=="date"||this._$colType=="datetime")&&this.model.filterSettings.filterType!=="excel"&&(t=="equal"||t=="notequal")&&typeof o.value!="string"?this._setDateFilters(o):this.model.filterSettings.filteredColumns.push(o))}p=!0;c.currentFilterObject.push(o)}c.filterCollection=this.model.filterSettings.filteredColumns;c.currentFilteringColumn=n;d=this._processBindings(c);d&&(this.model.filterSettings.filteredColumns.reverse().splice(0,t.length),this.model.filterSettings.filteredColumns.reverse());this.model.filterSettings.filterType=="filterbar"&&(v=this.getHeaderTable().find("#"+n.replace(/[^a-z0-9|s\_.]/gi,"")+"_filterBarcell"),v.val()!=""&&(v.val()==i||this._fltrBarcell)||(i[0]instanceof Date?v.val(ej.format(i[0],a,this.model.locale)):v.val(i[0]),this._currentFilterbarValue=i,this.filterStatusMsg="",this._showFilterMsg()));ej.isNullOrUndefined(e)||ej.isNullOrUndefined(e.filterBarTemplate)||(this.filterStatusMsg="",this._currentFilterbarValue=c.currentFilterObject[0].value,this._oldFilterColumn!=e&&this.filterColumnCollection.length>0&&$.inArray(e,this.filterColumnCollection)==-1&&this.filterColumnCollection.push(e),this._oldFilterColumn=this._currentFilterColumn=e,this._showFilterMsg());this._fltrBarcell=!1}},search:function(n){var t={};$("#"+this._id+"_search").find("input").val()!=n;$("#"+this._id+"_search").find("input").val(n);t.requestType=ej.Grid.Actions.Search;t.keyValue=n;this.model.searchSettings.fields=this.model.searchSettings.fields.length!=0?this.model.searchSettings.fields:this.getColumnFieldNames();(n!=""||this.model.searchSettings.key!="")&&(this.model.searchSettings.key=n.toLowerCase()==this.localizedLabels.True.toLowerCase()?"true":n.toLowerCase()==this.localizedLabels.False.toLowerCase()?"false":n,this._processBindings(t));this._primaryKeyValues=[]},_filterBarHandler:function(n){var f=n.keyCode,i=$(n.target),u,r,t;if(i.closest(".e-grid").attr("id")===this._id&&(this.model.filterSettings.filterBarMode=="immediate"||f==13)&&f!=9){for(i=$(n.target),this.filterStatusMsg="",u=i.prop("id").replace("_filterBarcell",""),t=0;t<this.model.columns.length;t++)if(ej.isNullOrUndefined(this.model.columns[t].foreignKeyValue)||u.indexOf("_"+this.model.columns[t].foreignKeyValue)==-1){if(this.model.columns[t].field.replace(/[^a-z0-9|s\_.]/gi,"")==u){r=this.model.columns[t];break}}else{r=this.model.columns[t];break}if(r==null)return;if(this._currentFilterColumn=r,this._$curFieldName=r.field,this._currentFilterColumn!=this._oldFilterColumn&&(this.filterValueOldLength=0),this._currentFilterbarValue=i.val().toLowerCase()==this.localizedLabels.True.toLowerCase()?"true":i.val().toLowerCase()==this.localizedLabels.False.toLowerCase()?"false":i.val(),this.filterValueCurrentLength=this._currentFilterbarValue.length,(this.filterValueCurrentLength==0&&this.filterValueOldLength==0||this._currentFilterbarValue==this.OldfilterValue)&&this._currentFilterColumn==this._oldFilterColumn&&!this.model.scrollSettings.enableVirtualization){this._showFilterMsg();return}if(this._skipFilterProcess=this._checkForSkipInput(),this._skipFilterProcess)if(this._currentFilterColumn.type=="string")this.filterStatusMsg="Invalid Filter Data",this._showFilterMsg();else{this._skipFilterProcess=!1;this.model.scrollSettings.enableVirtualization||this._showFilterMsg();return}else this._processFilter(n)}},_renderResponsiveFilter:function(){for(var i,r,n=ej.buildTag("div#responsiveFilter.e-resFilterDiv","",{width:"100%",padding:"0px"}),f=$(window).height()+1,h=f*(8/100),v=this.element.height()>f?$(window).width()+16.5:$(window).width(),e=ej.buildTag("div.columnDiv","",{width:"100%"}),t=0;t<this.model.columns.length;t++)i=ej.buildTag("div.e-responsivefilterColDiv","",{width:"100%"},{"data-ej-mappingname":this.model.columns[t].field}),r=ej.buildTag("span",this.model.columns[t].headerText,{"margin-left":"4%"}),i.append(r),e.append(i);n.append(e);this.element.append(n);var c=this,y=this.element.outerWidth(),u=ej.buildTag("div.e-resFilterDialogHeaderDiv","",{height:h}),r=ej.buildTag("div.e-labelRes","<span>Filter<\/span>"),o=ej.buildTag("div.e-resFilterleftIcon","",{"margin-top":"3%"}),l=ej.buildTag("span.e-icon e-responsiveFilterClear e-resIcon","",{"font-size":"23px"}),s=ej.buildTag("div.e-resFIlterRigthIcon","",{float:"right","margin-top":"3%"},{closeDialogue:"responsiveFilter",gridEle:!0}),a=ej.buildTag("span.e-icon e-responisveClose e-resIcon","",{"font-size":"23px"},{closeDialogue:"responsiveFilter",gridEle:!0});s.click(function(){$("#responsiveFilter").css("display","none");c.element.css("display","block")});o.click(function(){$("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-filternone").click()});u.append(o.append(l));u.append(r).append(s.append(a));n.prepend(u);n.insertAfter(this.element);$(".e-resFilterDiv").on("keydown",$.proxy(this._responsiveDialogueKeyUp,this));n.css("display","none");$(".e-responsivefilterColDiv").on("click",$.proxy(this._mouseClickHandler,this))},_closeDivIcon:function(n){var i=$(n.target),t;ej.isNullOrUndefined(i.attr("closeDialogue"))||(t=$("#"+i.attr("closeDialogue")),ej.isNullOrUndefined(t.data("ejDialog"))?t.css("display","none"):t.ejDialog("close"));ej.isNullOrUndefined(i.attr("gridEle"))||this.element.css("display","block");ej.isNullOrUndefined(i.attr("openDialogue"))||(this.model.enableResponsiveRow||i.attr("closeDialogue").indexOf("Custom")!=-1?(t=$("#"+i.attr("openDialogue")),ej.isNullOrUndefined(t.data("ejDialog"))?t.css("display","block"):t.ejDialog("open")):this.element.css("display","block"))},_setResponsiveFilterIcon:function(){var t=$("#responsiveFilter").find(".columnDiv"),i=this,n;for(t.find(".e-filtericon").remove(),n=0;n<this.model.filterSettings.filteredColumns.length;n++){var r=this.model.filterSettings.filteredColumns[n],u=t.find(".e-responsivefilterColDiv[data-ej-mappingname="+r.field+"]"),f=ej.buildTag("div.e-filtericon e-icon e-resIcon e-filterset e-filternone e-filterreset","",{float:"right",height:"22px",width:"21px","font-size":"20px","margin-right":"3%","margin-top":"2%"}),e=ej.buildTag("span.e-filtericon e-icon e-resIcon e-filterset e-filternone","",{},{colType:r.type});u.find(".e-filternone").remove();u.append(f);e.click(function(n){var t=n.target;i._$colType=t.attr("colType");i._fltrClrHandler();t.remove()})}},_renderExcelFilter:function(){var n=this.model.filterSettings.filteredColumns.length!=0?this.model.filterSettings.filteredColumns[0].field:null,t={instance:this,showSortOptions:this.model.allowSorting,allowFormatFiltering:this.model.filterSettings.allowFormatFiltering,allowCaseSensitive:this.model.filterSettings.enableCaseSensitivity,maxFilterLimit:this.model.filterSettings.maxFilterChoices,interDeterminateState:this.model.filterSettings.enableInterDeterminateState,enableComplexBlankFilter:this.model.filterSettings.enableComplexBlankFilter,blankValue:this.model.filterSettings.blankValue,filterHandler:ej.proxy(this._filterHandler,this),initFilterCol:n,actionBegin:"actionBegin",actionComplete:"actionComplete"};this._excelFilter=new ej.excelFilter(t);$.extend(this._excelFilter,this.model.filterSettings)},_filterHandler:function(n){var r={},o,s,h,u,f,i,t,e,c;if(r.requestType=n.action=="sorting"?n.action:"filtering",s=this.model.filterSettings.filteredColumns,n.action=="filtering"){for(o=ej.DataManager(this.model.filterSettings.filteredColumns),h=(new ej.Query).where("field",ej.FilterOperators.equal,n.fieldName),u=o.executeLocal(h),t=0;t<u.length;t++)f=$.inArray(u[t],this.model.filterSettings.filteredColumns),f!=-1&&this.model.filterSettings.filteredColumns.splice(f,1);ej.merge(this.model.filterSettings.filteredColumns,n.filterCollection);n.currentFilterCollection=n.filterCollection}else{if(n.action=="clearfiltering"){for(i=n.filterDetails,delete this._excelFilter._predicates[0][n.fieldName],this.filterColumn(i.field,i.operator,i.value,i.predicate),t=0;t<this.filterColumnCollection.length;t++)this.filterColumnCollection[t].field==i.field&&this.filterColumnCollection.splice(t,1);return}if(n.action=="sorting"){e=n.sortDetails;ej.gridFeatures.sort&&this.sortColumn(e.field,e.direction);this._excelFilter.closeXFDialog();return}}r.currentFilteringColumn=n.fieldName;r.filterCollection=n.filterCollection;r.predicated=n.ejpredicate;c=this._processBindings(r);c&&(this.model.filterSettings.filteredColumns=s)},_renderFiltering:function(){var c=this.getHeaderTable(),v,u,r=ej.buildTag("tr.e-filterbar"),y,l=[],i,n,e,s,t,a,h;for((this.model.detailsTemplate||this.model.childGrid)&&r.append(ej.buildTag("th.e-filterbarcell e-mastercell")),n=0;n<this.model.columns.length;n++){var o=ej.buildTag("th.e-filterbarcell"),f=ej.buildTag("div.e-filterdiv"),p=ej.buildTag("span.e-cancel e-icon e-hide"),e=ej.isNullOrUndefined(this.model.columns[n].field)?this.model.columns[n].field:this.model.columns[n].field.replace(/[^a-z0-9|s_]/gi,""),s=ej.isNullOrUndefined(this.model.columns[n].foreignKeyValue)?e+"_filterBarcell":e+"_"+this.model.columns[n].foreignKeyValue+"_filterBarcell";if(this.model.columns[n].allowFiltering==!1||ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)||ej.isNullOrUndefined(this.model.columns[n].field)?(f.addClass("e-fltrinputdiv"),e=this.model.columns[n].field,s=ej.isNullOrUndefined(this.model.columns[n].foreignKeyValue)?e+"_filterBarcell":e+"_"+this.model.columns[n].foreignKeyValue+"_filterBarcell",i=ej.buildTag("input.e-ejinputtext e-filtertext","",{},{title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,type:"search",id:s.replace(/[^a-z0-9|s\_.]/gi,"")})):(o.addClass("e-fltrtemp"),f.addClass("e-fltrtempdiv"),ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate.create)?i=ej.buildTag("input e-filtertext","",{},{title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,id:s,"class":"e-filterUi_input e-filtertext e-fltrTemp"}):(v={columnIndex:n,column:this.model.columns[n]},u=this.model.columns[n].filterBarTemplate.create,typeof u=="string"&&(u=ej.util.getObject(u,window)),i=u(v),i=$(i).attr({title:this.model.columns[n].headerText+this.localizedLabels.FilterbarTitle,id:s,"class":"e-filterUi_input e-filtertext e-fltrTemp"}))),this.model.filterSettings.filteredColumns.length>0&&this.model.filterSettings.filterType=="filterbar"&&$.inArray(this.model.columns[n].field,l)==-1)for(t=0;t<this.model.filterSettings.filteredColumns.length;t++)this.getColumnIndexByField(this.model.filterSettings.filteredColumns[t].field)==n&&(this.model.filterSettings.filteredColumns[t].operator=="greaterthan"?i.val(">"+this.model.filterSettings.filteredColumns[t].value):this.model.filterSettings.filteredColumns[t].operator=="lessthan"?i.val("<"+this.model.filterSettings.filteredColumns[t].value):this.model.filterSettings.filteredColumns[t].operator=="notequal"?i.val("!="+this.model.filterSettings.filteredColumns[t].value):i.val(this.model.filterSettings.filteredColumns[t].value),$.inArray(this.model.filterSettings.filteredColumns[t].field,l)==-1&&l.push(this.model.filterSettings.filteredColumns[t].field));(this.model.columns[n].allowFiltering===!1||this.model.columns[n].field==""||ej.isNullOrUndefined(this.model.columns[n].field))&&(i.attr("disabled",!0).addClass("e-disable"),this._disabledFilterableColumns.push(this.model.columns[n].headerText));this.model.columns[n].visible===!1&&o.addClass("e-hide");ej.isNullOrUndefined(this.model.columns[n].cssClass)||o.addClass(this.model.columns[n].cssClass);this.model.columns[n].allowFiltering==!1||ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)?f.append(i).append(p):f.append(i);r.append(o.append(f));n==this.model.scrollSettings.frozenColumns-1&&(y=r.clone(),c.find("thead").first().append(y),r.empty())}if(c.find("thead").last().append(r),ej.browserInfo().name=="msie"&&ej.browserInfo().version<10)for(a=c.find("thead").find(".e-ejinputtext.e-filtertext"),h=0;h<a.length;h++)ej.ieClearRemover(a[h]);this.setGridFilterBar(r)},_renderFilterBarTemplate:function(){for(var u,t,i,r,f=!1,n=0;n<this.model.columns.length;n++)if(this.model.columns[n].allowFiltering!=!1&&!ej.isNullOrUndefined(this.model.columns[n].filterBarTemplate)&&!ej.isNullOrUndefined(this.model.columns[n].field)){if(i=this.model.columns[n].filterBarTemplate.read,typeof i=="string"&&(i=ej.util.getObject(i,window)),t=this.model.columns[n].foreignKeyField?{element:this.getHeaderTable().find(".e-filterbar").find(".e-fltrtemp").find("#"+this.model.columns[n].field.replace(/[^a-z0-9|s_]/gi,"")+"_"+this.model.columns[n].foreignKeyValue.replace(/[^a-z0-9|s_]/gi,"")+"_filterBarcell"),columnIndex:n,column:this.model.columns[n]}:{element:this.getHeaderTable().find(".e-filterbar").find(".e-fltrtemp").find("#"+this.model.columns[n].field.replace(/[^a-z0-9|s_]/gi,"")+"_filterBarcell"),columnIndex:n,column:this.model.columns[n]},typeof t.column.filterBarTemplate.read=="string"&&(t.column.filterBarTemplate.read=i),r=this.model.columns[n].filterBarTemplate.write,typeof r=="string"&&(r=ej.util.getObject(r,window)),this.model.filterSettings.filteredColumns.length>0)for(u=0;u<this.model.filterSettings.filteredColumns.length;u++)this.model.columns[n].field==this.model.filterSettings.filteredColumns[u].field&&(t.modelVal=this.model.filterSettings.filteredColumns[u].value);r.call(this,t);f=!0}f&&(this.model.filterSettings.filterBarMode=ej.Grid.FilterBarMode.OnEnter)},_closeFilterDlg:function(){ej.isNullOrUndefined($("#"+this._id+"_"+this._$colType+"Dlg").data("ejDialog"))?$("#"+this._id+"_"+this._$colType+"Dlg").css("display","none"):$("#"+this._id+"_"+this._$colType+"Dlg").ejDialog("close");this._$fDlgIsOpen=!1;this._$menuDlgIsOpen=!1},_filterBarClose:function(n){var t=$(n.target),i;t.closest(".e-grid").attr("id")===this._id&&(n.type=="click"&&t.hasClass("e-cancel")&&(i=t.prev(),i.focus().val(""),i.trigger("keyup"),n.stopPropagation()),n.type=="focusin"&&t.hasClass("e-filtertext")&&(t=$(n.target).next(),this.getFilterBar().find(".e-cancel").addClass("e-hide"),t.removeClass("e-hide")))},_processFilter:function(n){this._alreadyFilterProcessed?(this._stopTimer(),this._startTimer(n)):(this._alreadyFilterProcessed=!0,this._startTimer(n))},_startTimer:function(n){var t=this,i=n.keyCode==13?0:t.model.filterSettings.immediateModeDelay;this._timer=window.setTimeout(function(){t._onTimerTick()},i)},_stopTimer:function(){this._timer!=null&&window.clearTimeout(this._timer)},_onTimerTick:function(){var n,t,i;this.OldfilterValue=this._currentFilterbarValue;this._oldFilterColumn=this._currentFilterColumn;this.filterValueOldLength=this.filterValueCurrentLength;this._findPredicate();var r=this._currentFilterColumn.type=="string"?!1:!0,u=$.extend([],this.model.filterSettings.filteredColumns);for(n=0;n<u.length;n++)this.getHeaderContent().find(".e-filterbar #"+u[n].field.replace(/[^a-z0-9|s\_.]/gi,"")+"_filterBarcell").val()==""&&($.inArray(this.model.filterSettings.filteredColumns[n],this.filterColumnCollection)!=-1&&this.filterColumnCollection.splice(n,1),this.model.filterSettings.filteredColumns.splice(n,1));if(this._currentFilterColumn.type=="date"||this._currentFilterColumn.type=="datetime")for(t=0;t<this.model.filterSettings.filteredColumns.length;t++)this.model.filterSettings.filteredColumns[t].isComplex&&(i=this.model.filterSettings.filteredColumns[t].predicates,this.model.filterSettings.filteredColumns.length==1?this.model.filterSettings.filteredColumns=i:(this.model.filterSettings.filteredColumns[t]=i[0],this.model.filterSettings.filteredColumns.push(i[1])));this._skipFilterProcess?this.filterStatusMsg="Invalid Filter Data":this._currentFilterColumn.foreignKeyValue&&this._currentFilterColumn.dataSource&&this._currentFilterbarValue!=""?this._fltrForeignKeyValue(this._operator,this._currentFilterbarValue,r,this._currentFilterColumn.dataSource,this._currentFilterColumn.foreignKeyField,this._currentFilterColumn.foreignKeyValue,this._currentFilterColumn.type):ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&(this._fltrBarcell=!0,this.filterColumn(this._currentFilterColumn.field,this._operator,this._currentFilterbarValue,this._predicate,r));!this.model.scrollSettings.enableVirtualization&&ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this._showFilterMsg();this._stopTimer()},_findPredicate:function(){var u=this._currentFilterbarValue.replace(/ && /i," and ").replace(" || "," or "),t=u.split(" "),n;if(this._predicate="and",t.length!=0)if($.isFunction(ej.Predicate[t[1]])){this._skipFilterProcess=!1;this._predicate=t[1];var i=u.split(" "+t[1]+" "),f=[],r=[];for(n=0;n<i.length;n++)this._validateFilterValue(i[n]),f.push(this._operator),this._currentFilterColumn.type=="number"?r.push(this._currentFilterbarValue):this._currentFilterColumn.type=="string"&&r.push(i[n]);this._currentFilterbarValue=r;this._operator=f}else this._validateFilterValue($.trim(this._currentFilterbarValue));else this._validateFilterValue($.trim(this._currentFilterbarValue))},_validateFilterValue:function(n){var r,t,i,u;switch(this._currentFilterColumn.type){case"number":for(this._operator=ej.FilterOperators.equal,r=[">","<","=","!"],t=0;t<n.length;t++)if(jQuery.inArray(n[t],r)!=-1)break;t!=n.length&&(this._getOperator(n.substring(t)),t!=0&&(this._currentFilterbarValue=n.substring(0,t)));this._currentFilterbarValue=this._currentFilterbarValue!=""&&n.length>=1?ej.parseFloat(this._currentFilterbarValue,this.model.locale):n.length>1?ej.parseFloat(n,this.model.locale):n;break;case"date":case"datetime":this._operator=ej.FilterOperators.equal;this._getOperator(n);i=ej.isNullOrUndefined(this._currentFilterColumn.format)?this._currentFilterColumn.type=="date"?ej.preferredCulture().calendar.patterns.d:ej.preferredCulture().calendar.patterns.f:this._currentFilterColumn.format.replace("{0:","").replace("}","");this._currentFilterbarValue!=""&&(u=ej.parseDate(this._currentFilterbarValue,i,this.model.locale),ej.isNullOrUndefined(u)?this.filterStatusMsg="Invalid Filter Data":this._currentFilterbarValue=ej.parseDate(this._currentFilterbarValue,i,this.model.locale));break;case"string":n.charAt(0)=="*"?(this._currentFilterbarValue=this._currentFilterbarValue.slice(1),this._operator=ej.FilterOperators.startsWith):n.charAt(n.length-1)=="%"?(this._currentFilterbarValue=this._currentFilterbarValue.slice(0,-1),this._operator=ej.FilterOperators.startsWith):n.charAt(0)=="%"?(this._currentFilterbarValue=this._currentFilterbarValue.slice(1),this._operator=ej.FilterOperators.endsWith):this._operator=ej.FilterOperators.startsWith;break;case"boolean":case"checkbox":this._currentFilterbarValue.toLowerCase()=="true"||this._currentFilterbarValue=="1"?this._currentFilterbarValue=!0:(this._currentFilterbarValue.toLowerCase()=="false"||this._currentFilterbarValue=="0")&&(this._currentFilterbarValue=!1);this._operator=ej.FilterOperators.equal;break;default:this._operator=ej.FilterOperators.equal}},_getOperator:function(n){n.charAt(0)=="="&&(this._operator=ej.FilterOperators.equal,this._currentFilterbarValue=n.substring(1));(ej.data.operatorSymbols[n.charAt(0)]!==undefined||ej.data.operatorSymbols[n.slice(0,2)]!==undefined)&&(this._operator=ej.data.operatorSymbols[n.charAt(0)],this._currentFilterbarValue=n.substring(1),this._operator===undefined&&(this._operator=ej.data.operatorSymbols[n.slice(0,2)],this._currentFilterbarValue=n.substring(2)));(this._operator==ej.FilterOperators.lessThan||this._operator==ej.FilterOperators.greaterThan)&&this._currentFilterbarValue.charAt(0)=="="&&(this._operator=this._operator+"orequal",this._currentFilterbarValue=this._currentFilterbarValue.substring(1))},_checkForSkipInput:function(){var t=!1,r=this,i,n;if(this._currentFilterColumn.type=="number"&&(ej.data.operatorSymbols[this._currentFilterbarValue]!==undefined||$.inArray(this._currentFilterbarValue,["="," ","!"])!=-1)&&(t=!0),this._currentFilterColumn.type=="string")for(i=[">","<","=","!"],n=0;n<this._currentFilterbarValue.length;n++)$.inArray(this._currentFilterbarValue[n],i)!=-1&&(t=!0);return t},_showFilterMsg:function(){var n=$.inArray(this._currentFilterColumn,this.filterColumnCollection),t,u,i,f,r;if(this._currentFilterbarValue!==""&&n==-1&&this.filterColumnCollection.push(this._currentFilterColumn),this._currentFilterbarValue===""&&n!=-1&&this.filterColumnCollection.splice(n,1),(!this._skipFilterProcess||this.filterColumnCollection.length>0)&&this.filterStatusMsg!="Invalid Filter Data")for(n=0;n<this.filterColumnCollection.length;n++)ej.isNullOrUndefined(this.filterColumnCollection[n])||(i=this.filterColumnCollection[n].headerText,this.filterColumnCollection[n].disableHtmlEncode&&(i=this._htmlEscape(i)),this.filterColumnCollection[n].field.indexOf(".")!=-1?(f=this.filterColumnCollection[n].field.replace(/[^a-z0-9|s\_.]/gi,"").split("."),u=f.join("\\."),t=$("#"+u+"_filterBarcell").val()):(r=ej.isNullOrUndefined(this.filterColumnCollection[n].foreignKeyValue)?this.filterColumnCollection[n].field.replace(/[^a-z0-9|s\_.]/gi,"")+"_filterBarcell":this.filterColumnCollection[n].field.replace(/[^a-z0-9|s\_.]/gi,"")+"_"+this.filterColumnCollection[n].foreignKeyValue+"_filterBarcell",t=this._currentFilterColumn.type=="boolean"&&!ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this.element.find("#"+r).hasClass("e-checkbox e-js")?this.element.find("#"+r).parent().attr("aria-checked"):this.element.find("#"+r).val()),t!=""&&(n>0&&this.filterStatusMsg!=""&&(this.filterStatusMsg+=" && "),this.filterStatusMsg+=i+": "+t));this.model.allowPaging?this.getPager().ejPager("model.externalMessage",this.filterStatusMsg):(this.model.scrollSettings.allowVirtualScrolling?this.$pagerStatusBarDiv.find(".e-pagerfiltermsg").html(this.filterStatusMsg).css("display","block"):this.$pagerStatusBarDiv.find("div").html(this.filterStatusMsg),this.filterStatusMsg.length?this.$pagerStatusBarDiv.css("display","block"):this.model.scrollSettings.allowVirtualScrolling?this.$pagerStatusBarDiv.find(".e-pagerfiltermsg").hide():this.$pagerStatusBarDiv.hide());this.filterStatusMsg=="Invalid Filter Data"&&(n=$.inArray(this._currentFilterColumn,this.filterColumnCollection),this.filterColumnCollection.splice(n,1));this.filterStatusMsg=""},_renderFilterDialogs:function(){var n,t,i,r,u,f;$.each(this.model.columns,ej.proxy(function(e,o){o.type!="string"||n&&ej.isNullOrUndefined(o.filterType)?o.type!="guid"||f&&ej.isNullOrUndefined(o.filterType)?o.type!="number"||t&&ej.isNullOrUndefined(o.filterType)?o.type!="date"||r&&ej.isNullOrUndefined(o.filterType)?o.type!="datetime"||u&&ej.isNullOrUndefined(o.filterType)?o.type!="boolean"||i&&ej.isNullOrUndefined(o.filterType)||(ej.isNullOrUndefined(o.filterType)&&(i=!0),this._renderFilters(o)):(ej.isNullOrUndefined(o.filterType)&&(u=!0),this._renderFilters(o)):(ej.isNullOrUndefined(o.filterType)&&(r=!0),this._renderFilters(o)):(ej.isNullOrUndefined(o.filterType)&&(t=!0),this._renderFilters(o)):(ej.isNullOrUndefined(o.filterType)&&(f=!0),this._renderFilters(o)):(ej.isNullOrUndefined(o.filterType)&&(n=!0),this._renderFilters(o))},this))},_renderFilters:function(col){this._isExcelFilter&&col.filterType!="menu"||col.filterType=="excel"?(ej.isNullOrUndefined(this._excelFilter)&&(this._renderExcelFilter(),this._excelFilterRendered=!0),this._excelFilter.renderDialog(col.type)):eval(this["_render"+col.type.substring(0,1).toUpperCase()+col.type.substring(1)+"Dialog"](col))},_renderStringDialog:function(){var n=this._id+"_stringDlg",t;$("#"+n).length>0||(t=ej.buildTag("div#"+n+".e-dlgcontainer e-filterDialog"),t.appendTo("body"),this._renderDlgContent(t,"string"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(n))},_renderBooleanDialog:function(){var n=this._id+"_booleanDlg",t;$("#"+n).length>0||(t=ej.buildTag("div#"+n+".e-dlgcontainer e-filterDialog"),t.appendTo("body"),this._renderDlgContent(t,"boolean"),this.model.isResponsive&&this._mediaStatus||(this._renderFDialog(n),this.model.filterSettings.showPredicate?$("#"+n).ejDialog({minHeight:136,width:"100%"}):$("#"+n).ejDialog({minHeight:90,width:"100%"})))},_renderGuidDialog:function(){var n=this._id+"_guidDlg",t;$("#"+n).length>0||(t=ej.buildTag("div#"+n+".e-dlgcontainer e-filterDialog"),t.appendTo("body"),this._renderDlgContent(t,"guid"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(n))},_renderNumberDialog:function(){var n=this._id+"_numberDlg",t;$("#"+n).length>0||(t=ej.buildTag("div#"+n+".e-dlgcontainer e-filterDialog"),t.appendTo("body"),this._renderDlgContent(t,"number"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(n))},_renderDateDialog:function(n){var t=this._id+"_dateDlg",i;$("#"+t).length>0||(i=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialog"),i.appendTo("body"),this._renderDlgContent(i,"date",n),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderDatetimeDialog:function(n){var t=this._id+"_datetimeDlg",i;$("#"+t).length>0||(i=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialog"),i.appendTo("body"),this._renderDlgContent(i,"datetime",n),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderFDialog:function(n){$("#"+n).ejDialog({showOnInit:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260,enableResize:!1,allowKeyboardNavigation:!1,content:"#"+this._id})},_closeFDialog:function(){(this._isExcelFilter||this._excelFilterRendered)&&this._excelFilter.closeXFDialog();this._$menuDlgIsOpen&&this._closeFilterDlg()},_renderDlgContent:function(n,t,i){var tt,y,e,o;n.addClass("e-grid");var s=ej.buildTag("div.e-predicate"),l=ej.buildTag("div.e-operator"),u=ej.buildTag("div.e-value"),f=ej.buildTag("div.e-value1"),it=this.localizedLabels.StringMenuOptions,a=this.localizedLabels.NumberMenuOptions,p=ej.buildTag("input#"+this._id+t+"_ddinput",{},{},{type:"text"}),w=ej.buildTag("div#"+this._id+t+"_dropdown"),v=ej.buildTag("ul"),b=ej.buildTag("input",{},{},{type:"radio",name:this._id+"_predicate"+t,value:"or"}),k=ej.buildTag("input",{},{},{type:"radio",name:this._id+"_predicate"+t,value:"and",checked:"checked"}),h;s.append(k).append(ej.buildTag("span.e-caption").html(this.localizedLabels.PredicateAnd)).append(b).append(ej.buildTag("span.e-caption").html(this.localizedLabels.PredicateOr));this.model.filterSettings.showPredicate||s.hide();t=="string"&&(h=ej.buildTag("input",{},{},{type:"checkbox"}),s.append(h).append(ej.buildTag("span.e-caption").html(this.localizedLabels.MatchCase)),$.each(it,function(n,t){v.append(ej.buildTag("li",{},{},{value:t.value}).html(t.text))}));(t=="number"||t=="date"||t=="datetime"||t=="guid")&&(t=="guid"&&(a=a.slice(4,6)),$.each(a,function(n,t){v.append(ej.buildTag("li",{},{},{value:t.value}).html(t.text))}));t!="boolean"&&(w.append(v),l.append(p),l.append(w));var r=ej.buildTag("input",{},{},{type:"text"}),c=ej.buildTag("input",{},{},{type:"text"}),d=ej.buildTag("input",{},{},{type:"checkbox"}),rt=this.model.enableResponsiveRow?"OKButton":"Filter",ut=this.model.enableResponsiveRow?"CancelButton":"Clear",g=ej.buildTag("input.e-filter e-flat e-btnsub",{},{},{type:"button",value:this.localizedLabels[rt]}),nt=ej.buildTag("input.e-clear e-flat e-btncan",{},{},{type:"button",value:this.localizedLabels[ut]});u.append(ej.buildTag("span.e-caption").html(this.localizedLabels.FilterMenuCaption));f.append(ej.buildTag("span.e-caption").html(this.localizedLabels.FilterMenuToCaption));n.append(s);t=="boolean"?(u.find("span.e-caption").css("top","1px"),u.append(d)):(u.append(ej.buildTag("br")).append(r),n.append(l));n.append(u);f.append(ej.buildTag("br")).append(c);n.append(f);f.addClass("e-hide");n.append(ej.buildTag("div.e-dlgBtns").append(g).append(nt));tt=[u,f];t!="boolean"&&p.ejDropDownList({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,targetID:this._id+t+"_dropdown",width:"100%",height:"26px",selectedItemIndex:0,select:ej.proxy(this._openfset,this,tt)});b.ejRadioButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL});k.ejRadioButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,checked:!0});h&&h.ejCheckBox({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL});n.css("display","none");this._createButton("filter",g);this._createButton("clear",nt);y={cssClass:this.model.cssClass,locale:this.model.locale,enableRTL:this.model.enableRTL,showSpinButton:!1,height:"26px",decimalPlaces:2,width:"100%",watermarkText:this.localizedLabels.NumericTextBoxWaterMark};t=="number"?(r.ejNumericTextbox(y),c.ejNumericTextbox(y)):t=="guid"?r.css({height:"26px",width:"100%"}):t=="date"||t=="datetime"?(e=t=="date"?"Date":"DateTime",r.attr("id",this._id+"_dp"+e),c.attr("id",this._id+"_dp"+e),o={cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableStrictMode:!0,width:"100%",locale:this.model.locale},t=="date"&&(o.watermarkText=this.localizedLabels.DatePickerWaterMark),ej.isNullOrUndefined(i.format)||(o.dateFormat=i.format.replace(/{0:|}/g,function(){return""})),r["ej"+e+"Picker"](o),c["ej"+e+"Picker"](o)):t=="boolean"?d.ejCheckBox({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}):t=="string"&&(r.attr("id",this._id+"_acString"),r.ejAutocomplete({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,dataSource:this._dataSource(),width:"100%",height:26,enableDistinct:!0,focusIn:function(){var n=this.element.closest(".e-dialog").find(".e-dropdownlist"),t=this.element.closest(".e-dialog").find(".e-checkbox").prop("checked");this.model.filterType=n.ejDropDownList("model.value");this.model.caseSensitiveSearch=t},open:function(){var n=!this.element.closest(".e-dialog").ejDialog("isOpened");this.suggestionList.css({visibility:n?"hidden":"visible"})}}))},_createButton:function(n,t){var i=n=="filter"?ej.proxy(this._fltrBtnHandler,this):ej.proxy(this._fltrClrHandler,this);t.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,click:i})},_getIdField:function(){var n;return $.each(this.model.columns,function(t,i){if(i.key)return n=i.field,!1}),n},_openfset:function(n,t){var r="5%",i="10px";t.value=="Between"?(n[0].find(".e-caption").eq(0).html(this.localizedLabels.FilterMenuFromCaption),n[1].removeClass("e-hide"),$(n[1]).css({"padding-top":i}),this.model.isResponsive&&this._mediaStatus&&(r=i="0px")):(n[1].addClass("e-hide"),n[0].find(".e-caption").eq(0).html(this.localizedLabels.FilterMenuCaption));$(".e-responsiveLabelDiv").css({"margin-top":r});$(".e-operator").css({"padding-top":i})},_filterCompleteAction:function(){var i,t;if(this.model.allowPaging&&this._refreshGridPager(),this.model.scrollSettings.allowVirtualScrolling&&(i=this._refreshVirtualPagerInfo(),this._showPagerInformation(i)),this.model.filterSettings.filterType=="menu"||this._isExcelFilter){this._closeFDialog();var u=this.getColumnByField(this._$curFieldName),f=$.inArray(u,this.model.columns),r=this,n=!1;$.each(this.model.filterSettings.filteredColumns,function(t,i){return i.field==r._$curFieldName?(n=!0,!1):i.isComplex==!0&&i.predicates[0].field==r._$curFieldName?(n=!0,!1):void 0});t=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell").eq(f).find(".e-filtericon");n?t.addClass("e-filteredicon e-filternone"):t.removeClass("e-filteredicon e-filternone")}},_refreshFilterIcon:function(){var r,n,u,t,i,f;if(this.model.filterSettings.filteredColumns.length)for(r=ej.distinct(this.model.filterSettings.filteredColumns,"field",!0),n=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell"),this.model.showStackedHeader&&(n=n.not(".e-stackedHeaderCell")),this.model.allowReordering&&n.find(".e-filtericon").removeClass("e-filteredicon e-filternone"),i=0,f=r.length;i<f;i++)t=r[i],u=this.getColumnIndexByField(t.isComplex===!0?t.predicates[0].field:t.field),n.eq(u).find(".e-filtericon").addClass("e-filteredicon e-filternone")},_setFilterFieldValues:function(n){var i="",t=this,r="",f=-1,e,u;$.each(this.model.filterSettings.filteredColumns,function(n,i){i.field==t._$curFieldName&&(f=n)});f==-1&&this._$colType!="boolean"&&(this._$colType=="string"&&$(".e-predicate input.e-js[type='checkbox']").ejCheckBox({checked:!1}),$(".e-predicate input[name ="+this._id+"_predicate"+this._$colType+"]:first").ejRadioButton({checked:!0}),$("#"+this._id+this._$colType+"_ddinput").ejDropDownList({selectedItemIndex:0,change:function(){this.element.closest(".e-dialog").find(".e-autocomplete").val(i)}}));e=$(this.model.filterSettings.filteredColumns).map(function(){return this.field}).get();(this._$curFieldName!=this._$prevFieldName||$.inArray(this._$curFieldName,e)!=-1)&&(u=0,$.each(this.model.filterSettings.filteredColumns,function(n,f){if(f.field==t._$curFieldName){for(var h=t._$colType=="number"||t._$colType=="date"||t._$colType=="datetime"?"Number":"String",s=t.localizedLabels[h+"MenuOptions"],o=ej.isNullOrUndefined(f.actualOperator)?f.operator:f.actualOperator,e=0;e<s.length;e++)if(s[e].value.toLowerCase()==o)break;if(t._$colType=="string"&&$(".e-predicate input.e-js[type='checkbox']").ejCheckBox({checked:f.matchcase}),$("input[value="+f.predicate+"]").ejRadioButton({checked:!0}),$("#"+t._id+t._$colType+"_ddinput").ejDropDownList({selectedItemIndex:e}),t.model.isResponsive&&t._mediaStatus&&o=="between"&&($(".e-responsiveLabelDiv").css({"margin-top":"0%"}),$(".e-operator").css({"padding-top":"0px"})),o=="between"&&u<=1)return u?r=f.value:i=f.value,u++,!0;i=f.actualFilterValue!=null?f.actualFilterValue:f.value}}));this._$colType=="boolean"?i&&i!=""?$(n).find(".e-value input:checkbox.e-js").ejCheckBox({checked:!0}):$(n).find(".e-value input:checkbox.e-js").ejCheckBox({checked:!1}):this._$colType=="date"||this._$colType=="datetime"?($(n).find(".e-value .e-datepicker")[this._$colType=="date"?"ejDatePicker":"ejDateTimePicker"]("model.value",i),$(n).find(".e-value1 .e-datepicker")[this._$colType=="date"?"ejDatePicker":"ejDateTimePicker"]("model.value",r)):this._$colType=="number"?($(n).find(".e-value .e-numerictextbox").ejNumericTextbox("model.value",i),$(n).find(".e-value1 .e-numerictextbox").ejNumericTextbox("model.value",r)):$(n).find(".e-value input").val(i);$(n).find(".e-value1 input1").val(r)},_fltrBtnHandler:function(){var e,o;this.model.isResponsive&&this._mediaStatus&&this._responsiveFilterClose();var c=this._id+"_"+this._$colType+"Dlg",t=$("#"+c),i=t.find(".e-value input.e-js"),r,s,h=t.find(".e-value1 input.e-js"),n=i.val(),u=undefined,f=h.val();this._$colType=="number"&&(i=i.filter(".e-numerictextbox"),n=parseFloat(i.ejNumericTextbox("getValue")),u=!0);this._$colType=="string"&&(u=t.find(".e-predicate input[type='checkbox']").is(":checked"));(this._$colType=="date"||this._$colType=="datetime")&&(n=ej.parseDate(n,this._$colFormat,this.model.locale),u=!0);this._$colType=="boolean"?(n=i.ejCheckBox("model.checked")!=null?i.ejCheckBox("model.checked"):!1,r="equal"):r=$("#"+this._id+this._$colType+"_ddinput").ejDropDownList("getSelectedValue").toLowerCase();s=t.find(".e-predicate input[type='radio']:checked");this._$colForeignKeyValue&&this._$colDropdownData?this._fltrForeignKeyValue(r,n,u,this._$colDropdownData,this._$colForeignKeyField,this._$colForeignKeyValue,this._$colType,s):this._$colType!="boolean"&&$("#"+this._id+this._$colType+"_ddinput").ejDropDownList("getSelectedValue").toLowerCase()=="between"&&((this._$colType=="datetime"||this._$colType=="date")&&(f=ej.parseDate(f,this._$colFormat,this.model.locale)),this._$colType=="number"&&(f=parseFloat(h.ejNumericTextbox("getValue"))),n=[n,f],r=["greaterthanorequal","lessthanorequal"],e={},e.operator="between");this.filterColumn(this._$curFieldName,r,n,t.find(".e-predicate input[type='radio']:checked").attr("value"),u,e);this.model.isResponsive&&(t.css("display","none"),this._setResponsiveFilterIcon(),this.element.css("display","block"),!this.model.allowScrolling||this.model.enableResponsiveRow&&this.model.minWidth||(o={},o.requestType="refresh",this._refreshScroller(o)))},_fltrClrHandler:function(){this.clearFiltering(this._$curFieldName)},_fltrForeignKeyValue:function(n,t,i,r,u,f,e,o){var v,y;ej.isNullOrUndefined(i)&&(i=!0);var w=[],a,c,d=o?o.css("display")=="none":!0,b=o?o.attr("value"):"and",l,p=r,h,s={mapFieldName:f,fieldName:u,operator:n,value:t,predicate:o,matchcase:i},k={requestType:ej.Grid.Actions.Filtering,action:"fetchingForeignKeyField",currentFilteringColumn:u,currentFilterObject:s};this._trigger("actionBegin",k);r instanceof ej.DataManager||(p=new ej.DataManager(r));e=="date"?(v=new Date(t.setDate(t.getDate()-1)),y=new Date(t.setDate(t.getDate()+2)),a=n=="equal"||n=="notequal"?n=="equal"?(new ej.Query).where(ej.Predicate(s.mapFieldName,">",v,!s.matchcase).and(s.mapFieldName,"<",y,!s.matchcase)).select(s.fieldName):(new ej.Query).where(ej.Predicate(s.mapFieldName,"<=",v,!s.matchcase).or(s.mapFieldName,">=",y,!s.matchcase)).select(s.fieldName):(new ej.Query).where(s.mapFieldName,s.operator,s.value,!s.matchcase).select(s.fieldName)):a=(new ej.Query).where(s.mapFieldName,s.operator,s.value,!s.matchcase).select(s.fieldName);c={actualFilterValue:s.value,actualOperator:s.operator,ejpredicate:undefined,predicate:b};p.executeQuery(a).done(ej.proxy(function(n){var t,o;h=n.result;var a=$.isPlainObject(h[0]),r=[],e=!1,f=this._$curFieldName;for(h=a?ej.distinct(h,u,!1):h,l=new ej.Predicate(f,"equal",h[0],i),t=1,o=h.length;t<o;t++)r.push(new ej.Predicate(f,"equal",h[t],i)),e=!0;e&&(r.unshift(l),l=ej.Predicate.or(r));$.extend(c,{ejpredicate:$.extend(l,{field:f},c)});this.filterColumn(s.fieldName,s.operator,s.value,w,s.matchcase,c)},this))},_setDateFilters:function(n,t){var u,f,s,o,e,r,i;if(t||ej.isNullOrUndefined(this.getColumnByField(n.field).format)?(u=new Date(n.value.setSeconds(n.value.getSeconds()-1)),f=new Date(n.value.setSeconds(n.value.getSeconds()+2))):(e=this.getColumnByField(n.field).format,e.indexOf("s")!=-1?(u=new Date(n.value.setSeconds(n.value.getSeconds()-1)),f=new Date(n.value.setSeconds(n.value.getSeconds()+2))):e.indexOf("m")!=-1?(u=new Date(n.value.setMinutes(n.value.getMinutes()-1)),f=new Date(n.value.setMinutes(n.value.getMinutes()+2))):e.indexOf("h")!=-1?(u=new Date(n.value.setHours(n.value.getHours()-1)),f=new Date(n.value.setHours(n.value.getHours()+2))):(u=new Date(n.value.setSeconds(n.value.getSeconds()-1)),f=new Date(n.value.setDate(n.value.getDate()+1)))),r=$.extend({},n),i=$.extend({},n),r.value=u,i.value=f,n.operator=="equal"?(r.operator="greaterthan",r.predicate="and",i.operator="lessthan",i.predicate="and"):(r.operator="lessthanorequal",r.predicate="or",i.operator="greaterthanorequal",i.predicate="or"),s=ej.Predicate(r.field,r.operator,r.value,!1),o=s[i.predicate](ej.Predicate(i.field,i.operator,i.value,!1)),n.value=new Date(n.value.setSeconds(i.value.getSeconds()-1)),t)return o;this.model.filterSettings.filteredColumns.push($.extend(o,{field:n.field,operator:n.operator,value:n.value}))}}}(jQuery,Syncfusion),function(n,t,i){t.gridFeatures=t.gridFeatures||{};t.gridFeatures.selection={selectRows:function(r,u,f){var s,wt,c,a,ht,dt,w,gt,ni,rt,ut,vt,ft,et,ti,g,ii,l,nt,tt,y,d,v,yt,ot,p,ri,ui,pt,fi,h,e;if(!this._allowrowSelection)return!1;if(this._traverseRow!=r&&n(".e-traverse").removeClass("e-traverse"),this._traverseRow=null,s=[],this.initialRender&&(this.model.currentIndex=r),this.model.scrollSettings.enableVirtualization&&(n.isArray(r)?this.model.currentIndex=r[0]:u&&(this.model.currentIndex=r>u?u:r)),!this.multiSelectCtrlRequest&&this.model.scrollSettings.allowVirtualScrolling&&(this._virtuaOtherPage?this._virtualScrollingSelection=!0:(this.clearSelection(),this._virtualScrollingSelection=!1)),n.isArray(r)&&(s=r,r=s[0],this._virtaulSel=[],this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization))for(this._virtualScrollingSelection=!0,this._virtualSelectedRows=s,wt=parseInt(r/this.model.pageSettings.pageSize)*this.model.pageSettings.pageSize,tt=(parseInt(r/this.model.pageSettings.pageSize)+1)*this.model.pageSettings.pageSize,this._virtaulSel.push(r),this._virtuaOtherPage||(this._virtaulUnSel=[]),e=1;e<s.length;e++)wt<s[e]&&s[e]<tt?this._virtaulSel.push(s[e]):this._virtaulUnSel.push(s[e]);if(w=n(this.getRows()),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns==0&&this.model.scrollSettings.frozenRows==0&&(a=w.eq(r)[0],!t.isNullOrUndefined(a)&&this.model.groupSettings.groupedColumns.length==0)){var bt=this.getScrollObject().scrollTop(),kt=bt+this.getScrollObject().content()[0].clientHeight,b=a.offsetTop+a.offsetHeight,st=a.offsetTop,ei=this.getScrollObject(),oi=f?parseInt(n(this._gridRows[r]).attr("name"),32):Math.ceil((r+1)/this._virtualRowCount);this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(b+=(t.min(this._currentLoadedIndexes)-1)*this._virtualRowCount*this._vRowHeight,st=this.model.currentIndex*this._vRowHeight+r+a.offsetHeight);ht=b-this._vRowHeight<=bt&&b<kt;(!t.isNullOrUndefined(a)&&kt<b||ht)&&(ht&&(st=b-a.offsetHeight),this.model.scrollSettings.enableVirtualization&&n.inArray(oi,this._currentLoadedIndexes)==-1||ei.scrollY(st))}var h={},it,ct=this._currentPage()-1,k=this.model.pageSettings.pageSize;this.model.scrollSettings.enableVirtualization||(y=this.getRowByIndex(r).attr("name"),d=t.isNullOrUndefined(y)?r:parseInt(y)/k+1);t.isNullOrUndefined(r)||(this.model.editSettings.editMode=="batch"&&n(w[r]).hasClass("e-insertedrow")?(dt=this.batchChanges.added.reverse(),c=dt[r],this.batchChanges.added.reverse()):c=this.model.editSettings.editMode=="batch"?this._currentJsonData[r-this.batchChanges.added.length]:this._currentJsonData[t.isNullOrUndefined(r)?u:r]);var o=r,lt=this._previousIndex,at=this.getRowByIndex(this._previousIndex);if(h={rowIndex:o,row:w.eq(r),data:c,selectedData:c,target:f,prevRow:at,prevRowIndex:lt},this.model.scrollSettings.allowVirtualScrolling){if(h=this._getVirtualRows(r,f,"selectRows",s),h==!1)return;this.model.scrollSettings.enableVirtualization?this._enableCheckSelect&&t.isNullOrUndefined(f)&&h.row.length&&(o=r=h.row.index()):o=r=h.rowIndex;c=h.data;lt=h.prevRowIndex;at=h.prevRow}if(this._trigger("rowSelecting",h)){this._enableCheckSelect&&!t.isNullOrUndefined(f)&&(h.target.parent(".e-checkcelldiv").length||f.hasClass("e-checkselectall"))&&f.prop("checked",this.model.enableTouch);return}if(f&&f.hasClass("e-checkselectall")&&this._isLocalData&&this._isMapSelection)return this._headerCheckUpdateAll(!f[0].checked);if(w=n(this.getRows()),this._isMapSelection&&!this._selectionByGrid&&t.isNullOrUndefined(u)&&!s.length){c[this._selectionMapColumn]=!h.row.find(".e-checkcelldiv input").prop("checked");this.updateRecord(this._primaryKeys[0],c,"update");return}if((this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this.model.isEdit&&this.model.enableAutoSaveOnSelectionChange&&(!(this.model.editSettings.showAddNewRow&&this.model.editSettings.editMode=="normal")||this.getContentTable().find(".e-editedrow").length!=0)){if(this.endEdit())return;(this.model.editSettings.editMode=="externalform"||this.model.editSettings.editMode=="externalformtemplate")&&n("#"+this._id+"_externalEdit").css("display","none")}if(this.checkSelectedRowsIndexes[ct]!=i||this._isMapSelection||(this.checkSelectedRowsIndexes[ct]=[]),s.length>0){for(e=0;e<s.length;e++)this.selectedRowsIndexes.indexOf(s[e])==-1&&this.selectedRowsIndexes.push(s[e]),this._selectedMultipleRows(this.selectedRowsIndexes),this._isMapSelection&&!this._selectionByGrid&&(p=this._currentJsonData[s[e]],p[this._selectionMapColumn]=!0,this.batchChanges.changed.push(p));if(!this.model.scrollSettings.enableVirtualization)for(gt=this._virtaulSel[0]-r,e=0;e<this._virtaulSel.length;e++)this._virtaulSel[e]-=gt;if(l=this.getRowByIndex(this.model.scrollSettings.allowVirtualScrolling?this._virtaulSel:s),n(l).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this._enableCheckSelect&&!this._isMapSelection&&n(l).find(".e-checkcelldiv input").prop("checked","checked"),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._isMapSelection&&!this._selectionByGrid){this.batchSave();return}}else if(t.isNullOrUndefined(u)||t.isNullOrUndefined(r)){r=t.isNullOrUndefined(r)?u:r;o=r;switch(this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){this.model.selectedRecords=[];ni=o;this.model.scrollSettings.enableVirtualization&&this._enableCheckSelect&&(ni=h.rowIndex);rt=n.inArray(o,this.selectedRowsIndexes);rt!=-1&&!this._isMapSelection&&this.clearSelection(o,f)&&this.selectedRowsIndexes.splice(rt,0);rt==-1&&(this.selectedRowsIndexes.push(o),this._selectedMultipleRows(this.selectedRowsIndexes),ut=this.getRowByIndex(r),this.model.scrollSettings.enableVirtualization&&this._enableCheckSelect&&(vt=parseInt(ut.attr("name"),32),ft=vt%(this.model.pageSettings.pageSize/this._virtualRowCount),ft==0&&(ft=this.model.pageSettings.pageSize/this._virtualRowCount),et=Math.ceil(vt*this._virtualRowCount/this.model.pageSettings.pageSize)-1,ti=h.rowIndex%this._virtualRowCount+(ft*this._virtualRowCount-this._virtualRowCount),this.checkSelectedRowsIndexes[et]!=i||this._isMapSelection||(this.checkSelectedRowsIndexes[et]=[]),this.checkSelectedRowsIndexes[et].push(ti)),ut.attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this.model.scrollSettings.enableVirtualization?this._virtualSelectedRecords[o]=this._getSelectedViewData(r,f).data:this._virtualSelectAction(d,r,k),(this._enableCheckSelect&&f&&!f.parent().hasClass("e-checkcelldiv")||t.isNullOrUndefined(f)&&this._enableCheckSelect)&&ut.find(".e-checkcelldiv input").prop("checked","checked"));Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords());break}case t.Grid.SelectionType.Single:this.clearSelection();this.clearColumnSelection();this.selectedRowsIndexes=[];this.model.selectedRecords=[];this._virtualSelectedRecords={};this.selectedRowsIndexes.push(o);this._selectedMultipleRows(this.selectedRowsIndexes);this.getRowByIndex(r).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active");this.model.scrollSettings.enableVirtualization?this._virtualSelectedRecords[o]=c:this._virtualSelectAction(d,r,k);Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords());this._enableCheckSelect&&this.getRowByIndex(r).find(".e-checkcelldiv [type=checkbox]").prop("checked",!0)}}else if(this.model.selectionType==t.Grid.SelectionType.Multiple&&(this._isMapSelection||this.clearSelection(),this.clearColumnSelection(),this.selectedRowsIndexes=[],this.model.selectedRecords=[],this._virtualSelectedRecords={},g=u,this._virtualUnSel=[],this._virtualUnSelIndexes=[],this._isMapSelection||!(f&&f.hasClass("e-checkselectall")&&f[0].checked)&&!this._isCheckboxUnchecked||this._isCheckboxChecked)){for(this.model.scrollSettings.enableVirtualization&&f&&!f.hasClass("e-checkselectall")&&(v=this._getSelectedViewData(u,f).viewIndex,ii=u%this._virtualRowCount,g=v*this._virtualRowCount-(this._virtualRowCount-ii),o!=this._prevSelIndex&&(o=this._prevSelIndex)),it=o-g<0,this.model.scrollSettings.enableVirtualization||(l=it?this.getRowByIndex(r,u+1):this.getRowByIndex(u,r+1)),this.model.scrollSettings.frozenColumns&&(l=n(l[0]).add(l[1])),nt=[],e=it?o:g,tt=it?g:o;e<=tt;e++)this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(v=this._getSelectedViewData(e).viewIndex,n.inArray(v,this._currentLoadedIndexes)!=-1?(yt=this._currentLoadedIndexes.indexOf(v),ot=e%this._virtualRowCount+yt*this._virtualRowCount,ot==0&&yt*this._virtualRowCount,nt.push(ot)):(this._virtualUnSel.push(e),n.inArray(v,this._virtualUnSelIndexes)==-1&&this._virtualUnSelIndexes.push(v))):(y=this.getRowByIndex(e).attr("name"),d=t.isNullOrUndefined(y)?r:parseInt(y)/k+1,this._virtualSelectedRecords[ot]=this._getSelectedViewData(e).data,this._virtualSelectAction(d,e,k))),this.model.scrollSettings.enableVirtualization&&this._enableCheckSelect&&!this.getRowByIndex(e).length||this.selectedRowsIndexes.push(e),this._selectedMultipleRows(this.selectedRowsIndexes),this._isMapSelection&&!this._selectionByGrid&&(p=this._currentJsonData[e],p[this._selectionMapColumn]=!0,this.batchChanges.changed.push(p));if(this._isMapSelection){this.batchSave();return}this.model.scrollSettings.enableVirtualization&&(l=this.getRowByIndex(nt[0],nt[nt.length-1]+1));n(l).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active");Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords());this._enableCheckSelect&&n(l).find(".e-checkcelldiv input").prop("checked","checked");this._isCheckboxChecked=!1;this._isCheckboxUnchecked=!1}for(this._enableCheckSelect&&(this.model.scrollSettings.enableVirtualization||(this.checkSelectedRowsIndexes[ct]=this.selectedRowsIndexes),this._selectAllCheck||(this.selectedRowsIndexes.length==this._currentJsonData.length||this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&[].concat.apply([],this.checkSelectedRowsIndexes).length>=this._gridRecordsCount?this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked","checked"):this._selectionByGrid&&this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked",!1))),this._selectedRow()!==o&&n(this.getRowByIndex(o)).attr("aria-selected")=="true"&&this._selectedRow(o),f&&f.hasClass("e-checkselectall")&&!this._isMapSelection&&(ri=this,ui=this._dataSource()instanceof t.DataManager&&this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&!this.model.scrollSettings.enableVirtualization?Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize):this.model.pageSettings.totalPages,this.checkSelectedRowsIndexes=f.is(":checked")?[]:n.map(Array(ui),function(){return Array(n.map(Array(ri.model.pageSettings.pageSize),function(n,t){return t}))}),pt=[].concat.apply([],this.checkSelectedRowsIndexes).length,!f.is(":checked")&&pt>this._gridRecordsCount&&this.checkSelectedRowsIndexes[this.checkSelectedRowsIndexes.length-1].splice(this._gridRecordsCount-pt)),c=this._virtualScrollingSelection?this._virtualSelRecords:c,fi=this.model.scrollSettings.enableVirtualization?o:this._selectedRow(),h={rowIndex:fi,row:this.getRowByIndex(this._selectedRow()),data:c,selectedData:c,target:f,prevRow:at,prevRowIndex:lt},this._previousIndex=this.selectedRowsIndexes.length?r:this._previousIndex,this.model.scrollSettings.enableVirtualization&&(this._prevSelIndex=o,this._prevSelRow=this.getRowByIndex(r)),e=0;e<this.checkSelectedRowsIndexes.length;e++)t.isNullOrUndefined(this.checkSelectedRowsIndexes[e])&&(this.checkSelectedRowsIndexes[e]=[]);this.model._checkSelectedRowsIndexes=this.checkSelectedRowsIndexes;n(this.getRowByIndex(r)).is('[data-role="row"]')&&n(this.getRowByIndex(o)).attr("aria-selected")=="true"&&this._trigger("rowSelected",h)},_getVirtualRows:function(i,r,u,f){var p=i,k=this._previousIndex,d=this.getRowByIndex(this._previousIndex),w,l,v={},rt=n(this.getRows()),g=!1,nt,s,tt,y,e,o,b;if(this.model.scrollSettings.enableVirtualization){var ut=this._virtualRowCount,a=r?parseInt(n(this._gridRows[i]).attr("name"),32):Math.ceil((i+1)/ut),ft=a>1?this._virtualRowCount:0;if(this.initialRender||a!=this._currentVirtualIndex&&!r){if(this._isThumbScroll=!0,t.isNullOrUndefined(this._virtualLoadedRecords[a])&&!this._isLocalData&&(this._dynamicSelectedRowIndex=i,g=!0),n.inArray(a,this._currentLoadedIndexes)==-1&&u!="clearSelection"&&this._refreshVirtualView(a,u,i),g)return!1;i=i!=0?i%this._virtualRowCount+ft:i}else!(i>this._virtualRowCount*3)&&(t.isNullOrUndefined(r)||n(r).parent().hasClass("e-headercelldiv")||t.isNullOrUndefined(r[0])||r[0].checked)?(s=parseInt(n(this._gridRows[i]).attr("name"),32),tt=n(this._gridRows[i]).prevAll("tr[name="+s+"]").length,p=s*this._virtualRowCount-this._virtualRowCount+tt):(y=this._getSelectedViewData(i,r).viewIndex,nt=i%this._virtualRowCount,p=y*this._virtualRowCount-(this._virtualRowCount-nt));if(f.length)for(o=0;o<f.length;o++)y=this._getSelectedViewData(f[o]).viewIndex,n.inArray(y,this._currentLoadedIndexes)!=-1&&this._virtaulSel.push(f[o]),this._virtualSelectedRecords[f[o]]||(this._virtualSelectedRecords[f[o]]=this._getSelectedViewData(f[o]).data);l=this._getSelectedViewData(i,r,a).data;k=this._prevSelIndex;d=this._prevSelRow}else{var h=this.model.pageSettings.pageSize,it=this.getRowByIndex(i).attr("name"),et=t.isNullOrUndefined(it)?i:parseInt(it)/h+1,s=i%h,c=parseInt(i/h),b=c*h;if(!t.isNullOrUndefined(c)&&c>0&&n.inArray(b,this.virtualLoadedPages)==-1&&t.isNullOrUndefined(r)&&!(this._requestType=="save"||this._requestType=="cancel"))if(s--,this._virIndex=!0,this._virtualTrIndex=s,this.gotoPage(c+1),e=this,this._dataSource()instanceof t.DataManager){if(this._queryPromise.done(function(n){var t;e._virtuaOtherPage=!0;e._virtualdata=e._currentJsonData;e._pageTo=c;e._virtualScrollingSelection&&(e._virtualSelRecords=n.virtualSelectRecords);var u=parseInt(i/e.model.pageSettings.pageSize)*e.model.pageSettings.pageSize,o=(parseInt(i/e.model.pageSettings.pageSize)+1)*e.model.pageSettings.pageSize,r=[];for(r.push(i),t=1;t<f.length;t++)u<f[t]&&f[t]<o&&r.push(f[t]);return e.selectRows(r),!1}),e._virtualScrollingSelection)return}else{if(e._virtualdata=e._currentJsonData,f.length>0)for(e._virtualSelRecords=[],o=0;o<f.length;o++)e._virtualSelRecords.push(this.model.dataSource[f[o]]);e._pageTo=c}for(this._virtuaOtherPage&&(this._virtuaOtherPage=!1),o=0;o<this._loadedJsonData.length;o++)this._loadedJsonData[o].pageIndex==et&&(w=this._loadedJsonData[o].data);l=t.isNullOrUndefined(w)?this._currentJsonData[s]:w[s];l=this._virtualScrollingSelection?this._virtualSelRecords:l;b=this._pageTo*h;!t.isNullOrUndefined(this._virtualdata)&&this._virtualdata.length>0?(i=n(document.getElementsByName(b)[s]).index(),l=this._virtualdata[s],this._virtualdata=[]):n(document.getElementsByName(c*h)).length>0&&!t.isNullOrUndefined(this._pageTo)&&(i=n(document.getElementsByName(c*h)[i%h]).index())}return v={rowIndex:this.model.scrollSettings.enableVirtualization?p:(this._requestType=="save"||this._requestType=="cancel")?i%h:i,row:rt.eq(i),data:l,selectedData:l},u=="selectRows"&&(v.prevRow=d,v.prevRowIndex=k),v},_selectingMultipleRows:function(n){this._modelMultiSelectedIndexes=n;this.clearSelection();this.multiSelectCtrlRequest=!0;for(var t=0;t<n.length;t++)this.selectRows(n[t]);this.multiSelectCtrlRequest=!1;this._modelMultiSelectedIndexes=[]},_virtualSelectAction:function(n,i,r){this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(i)&&(this._virtualSelectedRecords[i]=t.isNullOrUndefined(this._virtualLoadedRecords[n])?this._currentJsonData[i%r]:this._virtualLoadedRecords[n][i%r])},_getSelectedViewData:function(t,i,r){var o=t%this._virtualRowCount,u,f={},e;return u=i?parseInt(n(i).closest("tr").attr("name"),32):r?r:t>1?Math.ceil((t+1)/this._virtualRowCount):1,f.viewIndex=u,this._virtualLoadedRecords[u]&&(f.data=this._virtualLoadedRecords[u][o]),e=t%this._virtualRowCount,f.rowIndex=u*this._virtualRowCount-(this._virtualRowCount-e),f},selectCells:function(r){var y,tt,it,nt,p,e,k,h,c,l,u,v,f,ut,g,d;if(!this._allowcellSelection)return!1;if(y=null,nt=this._excludeDetailRows(),y=this.model.scrollSettings.frozenColumns?this._frozenCell(r[0][0],r[0][1][0]):nt.eq(r[0][0]).find(".e-rowcell:eq("+r[0][1]+")"),t.isNullOrUndefined(this._previousRowCellIndex)||this._previousRowCellIndex.length==0||(this.model.scrollSettings.enableVirtualization?(tt=this._prevRowCell,it=this._preVirRowCellIndex):(tt=n(this.getRowByIndex(this._previousRowCellIndex[0][0]).find(".e-rowcell:eq("+this._previousRowCellIndex[0][1]+")")),it=this._previousRowCellIndex)),p=this._currentJsonData[r[0][0]],e=r[0][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(k=this._getSelectedViewData(r[0][0],y),p=k.data,e=k.rowIndex),d={currentCell:y,cellIndex:r[0][1],data:p,selectedData:p,previousRowCellIndex:it,previousRowCell:tt},this.model.selectionType=="multiple"&&(d.isCtrlPressed=this.multiSelectCtrlRequest,d.isShiftPressed=this.multiSelectShiftRequest),!this._trigger("cellSelecting",d)){switch(this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){g=n.inArray(e,this._rowIndexesColl);g!=-1?this.selectedRowCellIndexes[g].cellIndex.push(parseInt(r[0][1].toString())):(n.inArray(e,this._rowIndexesColl)==-1&&this._rowIndexesColl.push(e),this.selectedRowCellIndexes.push({rowIndex:e,cellIndex:r[0][1]}));y.addClass("e-cellselectionbackground e-activecell");break}else if(this.multiSelectShiftRequest&&this._previousRowCellIndex!=i){this.clearCellSelection();this.clearColumnSelection();this.selectedRowCellIndexes=[];var w=this._previousRowCellIndex[0][0],s=parseInt(this._previousRowCellIndex[0][1]),a=r[0][0],o=parseInt(r[0][1]);if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(w=this._preVirRowCellIndex[0][0],a=this._getSelectedViewData(a,this.getRowByIndex(a).find(".e-rowcell")).rowIndex),h=[],this.model.selectionSettings.cellSelectionMode=="box"){var et=this.model.scrollSettings.frozenColumns?this.getRows()[0].length-1:this.getRows().length-1,rt=s<o?s:o,ft=rt==o?s:o,b=[],h=[];for(u=rt;u<=ft;u++){if(c=w,l=a,c<l)for(f=c;f<=l;f++)n.inArray(f,b)==-1&&b.push(f),this._selectMultipleCells(f,u,o,s);else for(f=l;f<=c;f++)n.inArray(f,b)==-1&&b.push(f),this._selectMultipleCells(f,u,o,s);h.push(u)}for(u=0;u<b.length;u++)this.selectedRowCellIndexes.push({rowIndex:b[u],cellIndex:h});this._rowIndexesColl=t.distinct(b)}else if(a>w)for(u=w;u<=a;u++){for(h=[],c=u==w?s:0,l=u==a?o:this.model.columns.length-1,f=c;f<=l;f++)h.push(f),this._selectMultipleCells(u,f,o,s);this.selectedRowCellIndexes.push({rowIndex:u,cellIndex:h});this._rowIndexesColl.push(u)}else for(u=w;u>=a;u--){if(h=[],c=u==w?s:this.model.columns.length-1,l=u==a?o:0,c>l)for(f=c;f>=l;f--)h.push(f),this._selectMultipleCells(u,f,o,s);else for(f=l;f>=c;f--)h.push(f),this._selectMultipleCells(u,f,o,s);this.selectedRowCellIndexes.push({rowIndex:u,cellIndex:h});this._rowIndexesColl.push(u)}break}else{for(this.clearCellSelection(),this._virtualRowCellSelIndex=[],u=0;u<r.length;u++)if(r[u][1].length>1)for(v=nt.eq(r[u][0]).find(".e-rowcell"),this.model.scrollSettings.frozenColumns&&(v=n(nt[0]).eq(r[u][0]).find(".e-rowcell").add(n(nt[1]).eq(r[u][0]).find(".e-rowcell"))),f=0;f<v.length;f++)ut=this.model.detailsTemplate!=null||this.model.childGrid!=null?v[f].cellIndex-1:f,n.inArray(ut,r[u][1])!=-1&&(n(v[f]).addClass("e-cellselectionbackground e-activecell"),g=n.inArray(r[u][0],this._rowIndexesColl),g!=-1?this.selectedRowCellIndexes[g].cellIndex.push(v[f].cellIndex):(e=r[u][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(k=this._getSelectedViewData(e,v),p=k.data,e=k.rowIndex),this.selectedRowCellIndexes.push({rowIndex:e,cellIndex:[v[f].cellIndex]}),this._rowIndexesColl.push(r[u][0])));else this.model.scrollSettings.frozenColumns?this._frozenCell(r[u][0],r[u][1][0]).addClass("e-cellselectionbackground e-activecell"):n(this.getRowByIndex(r[u][0]).find(".e-rowcell:eq("+r[u][1]+")")).addClass("e-cellselectionbackground e-activecell"),this.selectedRowCellIndexes.push({rowIndex:e,cellIndex:r[u][1]}),this._rowIndexesColl.push(e);break}case t.Grid.SelectionType.Single:this.clearCellSelection();this.clearColumnSelection();this.selectedRowCellIndexes=[];this._virtualRowCellSelIndex=[];n.inArray(e,this._rowIndexesColl)==-1&&this._rowIndexesColl.push(e);this.selectedRowCellIndexes.push({rowIndex:e,cellIndex:r[0][1]});this.model.scrollSettings.frozenColumns?this._frozenCell(r[0][0],r[0][1][0]).addClass("e-cellselectionbackground e-activecell"):n(this.getRowByIndex(r[0][0]).find(".e-rowcell:eq("+r[0][1]+")")).addClass("e-cellselectionbackground e-activecell")}d={currentCell:y,cellIndex:r[0][1],data:p,selectedData:p,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCellIndex:it,previousRowCell:tt};(!this.multiSelectShiftRequest||t.isNullOrUndefined(this._previousRowCellIndex))&&(this._previousRowCellIndex=r,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._preVirRowCellIndex=n.extend(!0,[],r),this._preVirRowCellIndex[0][0]=e),this._prevRowCell=y);t.isNullOrUndefined(r[0][1][0])?n.extend(this._bulkEditCellDetails,{rowIndex:r[0][0],columnIndex:r[0][1]}):n.extend(this._bulkEditCellDetails,{rowIndex:r[0][0],columnIndex:r[0][1][0]});this._trigger("cellSelected",d)}},_selectMultipleCells:function(t,i){var r,u,f;this.model.scrollSettings.frozenColumns?this._frozenCell(t,i).addClass("e-cellselectionbackground e-activecell"):this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?(r=this._getSelectedViewData(t).viewIndex,n.inArray(r,this._currentLoadedIndexes)!=-1&&(u=this._currentLoadedIndexes.indexOf(r),f=t%this._virtualRowCount+u*this._virtualRowCount,n(this.getRowByIndex(f).find(".e-rowcell:eq("+i+")")).addClass("e-cellselectionbackground e-activecell"),n.inArray(t,this._virtualRowCellSelIndex)==-1&&n.inArray(t,this._rowIndexesColl)!=-1&&t!=this._preVirRowCellIndex[0][0]&&this._virtualRowCellSelIndex.push(t))):n(this.getRowByIndex(t).find(".e-rowcell:eq("+i+")")).addClass("e-cellselectionbackground e-activecell")},selectColumns:function(r,u){var s,v,c,l,f,h,o;if(!this._allowcolumnSelection)return!1;this._allowcolumnSelection=!0;var e=this.getRows(),a=this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[this._previousColumnIndex],o={columnIndex:r==i?u:r,headerCell:n(this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[r]),column:this.model.columns[r],previousColumnIndex:this._previousColumnIndex,prevColumnHeaderCell:a},y=this._previousColumnIndex;if(this._previousColumnIndex=(o.isShiftPressed=this.multiSelectShiftRequest)==!0?r==i?u:r:u,this.model.selectionType=="multiple"&&(o.isCtrlPressed=this.multiSelectCtrlRequest,o.isShiftPressed=this.multiSelectShiftRequest),!this._trigger("columnSelecting",o)){if(t.isNullOrUndefined(u)||t.isNullOrUndefined(r)){r=t.isNullOrUndefined(r)?u:r;switch(this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){if(s=n.inArray(r,this.selectedColumnIndexes),s!=-1&&this.clearColumnSelection(r)&&this.selectedColumnIndexes.splice(s,0),s==-1){if(this.selectedColumnIndexes.push(r),this._previousColumnIndex=this.selectedColumnIndexes.length?r:i,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(e,r);else for(f=0;f<e.length;f++)n(this._excludeDetailCells(e[f])[r]).addClass("e-columnselection");n(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell,.e-detailheadercell)")[r]).addClass("e-columnselection")}break}case t.Grid.SelectionType.Single:if(this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.selectedColumnIndexes=[],this.selectedColumnIndexes.push(r),this._previousColumnIndex=this.selectedColumnIndexes.length?r:i,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(e,r);else for(f=0;f<e.length;f++)n(this._excludeDetailCells(e[f])[r]).addClass("e-columnselection");n(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell,.e-detailheadercell)")[r]).addClass("e-columnselection")}}else if(this.model.selectionType==t.Grid.SelectionType.Multiple)if(this.clearColumnSelection(),this.selectedColumnIndexes=[],v=0,(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&(v=1),c=r>u?u:r,l=r>u?r+1:u+1,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(e,c,l);else for(f=c;f<l;f++){for(h=0;h<e.length;h++)n(this._excludeDetailCells(e[h])[f]).addClass("e-columnselection");n(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell,.e-detailheadercell)")[f]).addClass("e-columnselection");this.selectedColumnIndexes.push(f)}o={columnIndex:r==i?u:r,headerCell:n(this.getHeaderTable().find(".e-columnheader").last().find("th").not(".e-detailheadercell")[r]),column:this.model.columns[r],selectedColumnIndex:this.selectedColumnIndexes,previousColumnIndex:y,prevColumnHeaderCell:a};this._trigger("columnSelected",o)}},clearSelection:function(r,u){var v=r,it=n(this.getRows()),e={},o=n(this.getRows()),r,y,b,h,c,p,u,k,l,d,g,f,nt,rt,tt,s,w,a;if(this._selectedRow()>=-1){if(o=this.model.scrollSettings.frozenColumns||!t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid)?this._excludeDetailRows():n(this.element.find("tr[aria-selected='true']")),y=o.find("td").hasClass("e-selectionbackground e-active"),y){if($gRows=n(this.getContent().find("tr[aria-selected='true']")),this.model.scrollSettings.allowVirtualScrolling)t.isNullOrUndefined(r)?(p=this.selectedRowsIndexes[0],u=this.getSelectedRecords().length&&this._enableCheckSelect&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?this.element.find(".e-headercheckcelldiv .e-checkselectall"):$gRows[0]):p=r,k=this.selectedRowsIndexes,e=this._getVirtualRows(p,u,"clearSelection",k);else{for(t.isNullOrUndefined(r)||(this.model.editSettings.editMode=="batch"&&n(o[r]).hasClass("e-insertedrow")?(b=this.batchChanges.added.reverse(),f=b[r],this.batchChanges.added.reverse()):f=this.model.editSettings.editMode=="batch"?this._currentJsonData[r-this.batchChanges.added.length]:this._currentJsonData[t.isNullOrUndefined(r)?toIndex:r]),h=[],c=0;c<this.selectedRowsIndexes.length;c++)h.push(this._currentJsonData[this.selectedRowsIndexes[c]]);e={rowIndex:r==i?this.selectedRowsIndexes:r,row:r==i?$gRows:it.eq(r),data:r==i?h:f,selectedData:r==i?h:f}}if(this._trigger("rowDeselecting",e))return}if(t.isNullOrUndefined(r)){if(nt=o,this.model.scrollSettings.enableVirtualization)for(tt in this._virtualLoadedRows)n.merge(nt,this._virtualLoadedRows[tt]);o.removeAttr("aria-selected").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-selectionbackground").removeClass("e-active");this._clearVirtualSelection||(this.selectedRowsIndexes=[],this.model.selectedRecords=[]);this._selectionByGrid||(o.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1),rt=null,this._isMapSelection&&this._headerCheckUpdateAll(!1),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()))}else this.getRowByIndex(r).removeAttr("aria-selected").find(".e-selectionbackground").removeClass("e-selectionbackground").removeClass("e-active"),l=this.getRowByIndex(r),this.model.scrollSettings.enableVirtualization&&this.multiSelectCtrlRequest&&!this._enableCheckSelect&&(d=parseInt(l.attr("name"),32)*this._virtualRowCount,g=this._virtualRowCount-l.index()%this._virtualRowCount,r=d-g),r=n.inArray(r,this.selectedRowsIndexes),r!=-1&&(this.selectedRowsIndexes.splice(r,1),this._selectedMultipleRows(this.selectedRowsIndexes),this.model.selectedRecords.splice(r,1)),this._enableCheckSelect&&!u&&l.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1),this._isMapSelection&&(this._selectionByGrid||t.isNullOrUndefined(r)||r==-1||(f=this._currentJsonData[v],f[this._selectionMapColumn]=!1,this.updateRecord(this._primaryKeys[0],f,"update")),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()));this._enableCheckSelect&&(!this._selectAllCheck&&(this.selectedRowsIndexes.length!=this._currentJsonData.length||this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&[].concat.apply([],this.checkSelectedRowsIndexes).length>=this._gridRecordsCount)&&this.getHeaderTable().find(".e-headercheckcelldiv .e-checkselectall").prop("checked",!1),s=this._currentPage()-1,this.model.scrollSettings.enableVirtualization&&e.row&&(w=parseInt(e.row.attr("name"),32),a=w%(this.model.pageSettings.pageSize/this._virtualRowCount),a==0&&(a=this.model.pageSettings.pageSize/this._virtualRowCount),s=Math.ceil(w*this._virtualRowCount/this.model.pageSettings.pageSize)-1,v=e.rowIndex%this._virtualRowCount+(a*this._virtualRowCount-this._virtualRowCount)),checkBoxIndex=n.inArray(v,this.checkSelectedRowsIndexes[s]),checkBoxIndex!=-1&&this.checkSelectedRowsIndexes[s].splice(checkBoxIndex,1),this.selectedRowsIndexes.length||this._isMapSelection||u||(this.checkSelectedRowsIndexes[s]=[],o.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1)));this.selectedRowsIndexes.length||this._selectedRow(-1)}return this.model._checkSelectedRowsIndexes=this.checkSelectedRowsIndexes,y&&this._trigger("rowDeselected",e)?!0:void 0},_excludeDetailRows:function(){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)||this.model.scrollSettings.frozenColumns?this.model.scrollSettings.frozenColumns>0&&this.getRows()!=null&&this.getRows().length>1?n(this.getRows()[0]).not(".e-detailrow,.e-gridSummaryRows").add(n(this.getRows()[1]).not(".e-detailrow,.e-gridSummaryRows")):n(this.getRows()):n(this.getRows()).not(".e-detailrow,.e-gridSummaryRows")},clearCellSelection:function(r,u){var e,l,a,h,o,s,f;if(this._allowcellSelection){if(e=t.isNullOrUndefined(r)&&t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid)?n(this.element.find(".e-cellselectionbackground")).parent():this._excludeDetailRows(),h=e.find("td").hasClass("e-cellselectionbackground e-activecell"),h){l=this.model.scrollSettings.frozenColumns&&!t.isNullOrUndefined(r)?this._frozenCell(r,u):this.getContent().find(".e-cellselectionbackground");var c=[],y=[u],v=[];for(o=0;o<this.selectedRowCellIndexes.length;o++)for(c.push(this._currentJsonData[this.selectedRowCellIndexes[o].rowIndex]),f=0;f<this.selectedRowCellIndexes[o].cellIndex.length;f++)v.push(this.selectedRowCellIndexes[o].cellIndex[f]);if(s={currentCell:(r||u)==i?l:e.eq(r).find(".e-rowcell").eq(u),cellIndex:(r||u)==i?v:y,data:(r||u)==i?c:this._currentJsonData[r],selectedData:(r||u)==i?c:this._currentJsonData[r]},this.model.selectionType=="multiple"&&(s.isCtrlPressed=this.multiSelectCtrlRequest,s.isShiftPressed=this.multiSelectShiftRequest),this._trigger("cellDeselecting",s))return!0}if(t.isNullOrUndefined(r))this.model.scrollSettings.frozenColumns&&(e=n(e[0]).add(e[1])),e.find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-cellselectionbackground").removeClass("e-activecell"),this.selectedRowCellIndexes=[],this._rowIndexesColl=[];else{for(f=0;f<this.selectedRowCellIndexes.length;f++)if(this.selectedRowCellIndexes[f].rowIndex==r){a=n.inArray(u,this.selectedRowCellIndexes[f].cellIndex);this.model.scrollSettings.frozenColumns?this._frozenCell(r,u).removeClass("e-cellselectionbackground").removeClass("e-activecell"):e.eq(r).find(".e-rowcell").eq(u).removeClass("e-cellselectionbackground").removeClass("e-activecell");break}f!=this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[f].cellIndex.splice(a,1),this.selectedRowCellIndexes[f].cellIndex.length==0&&(this.selectedRowCellIndexes.splice(f,1),this._rowIndexesColl.splice(n.inArray(r,this._rowIndexesColl),1)))}}if(h&&this._trigger("cellDeselected",s))return!0},clearColumnSelection:function(r){var s,h,e,c,l,u,o;if(this._allowcolumnSelection){var f=n(this._excludeDetailRows()),v=n(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")),a=v.hasClass("e-columnselection");if(a){for(s=[],h=[],u=0;u<this.selectedColumnIndexes.length;u++)s.push(this.model.columns[this.selectedColumnIndexes[u]]),h.push(n(this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[this.selectedColumnIndexes[u]]));if(e={columnIndex:r==i?this.selectedColumnIndexes:r,headerCell:r==i?h:n(this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[r]),column:r==i?s:this.model.columns[r]},this.model.selectionType=="multiple"&&(e.isCtrlPressed=this.multiSelectCtrlRequest,e.isShiftPressed=this.multiSelectShiftRequest),this._trigger("columnDeselecting",e))return}if(t.isNullOrUndefined(r))f.find(".e-rowcell").removeClass("e-columnselection"),n(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")).removeClass("e-columnselection"),this.selectedColumnIndexes=[];else{if(c=0,(this.model.detailsTemplate!=null||this.model.childGrid!=null)&&(++r,c=1),this.model.scrollSettings.frozenColumns)for(l=r,r>=this.model.scrollSettings.frozenColumns?(l=r-this.model.scrollSettings.frozenColumns,f=n(this.getContent).find(".e-movablecontent").find("tr")):f=n(this.getContent).find(".e-frozencontentdiv").find("tr"),u=0;u<f.length;u++)n(f[u].cells[l]).removeClass("e-columnselection");else for(o=0;o<f.length;o++)n(f[o].cells[r]).removeClass("e-columnselection");n(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[r]).removeClass("e-columnselection");this.selectedColumnIndexes.splice(0,r-c)}}if(a&&this._trigger("columnDeselected",e))return!0},getSelectedRows:function(){for(var i=n(),t=0;t<this.selectedRowsIndexes.length;t++)this.model.scrollSettings.frozenColumns>0?(i.push(this.getRowByIndex(this.selectedRowsIndexes[t])[0]),i.push(this.getRowByIndex(this.selectedRowsIndexes[t])[1])):i.push(this.getRowByIndex(this.selectedRowsIndexes[t])[0]);return i},getSelectedRecords:function(){var i=[],u=this.getRows(),t,r;if(this._virtualScrollingSelection)return this._virtualSelRecords;for(t=0;t<this.selectedRowsIndexes.length;t++)this.selectedRowsIndexes[t]!=-1&&(this.model.editSettings.editMode=="batch"&&n(u[this.selectedRowsIndexes[t]]).hasClass("e-insertedrow")?(r=this.batchChanges.added.reverse(),i.push(r[this.selectedRowsIndexes[t]]),this.batchChanges.added.reverse()):this.model.scrollSettings.allowVirtualScrolling?i.push(this._virtualSelectedRecords[this.selectedRowsIndexes[t]]):this.model.editSettings.editMode=="batch"?i.push(this._currentJsonData[this.selectedRowsIndexes[t]-this.batchChanges.added.length]):i.push(this._currentJsonData[this.selectedRowsIndexes[t]]));return i},_setCurrentRow:function(n){if((n==t.Grid.Actions.Refresh||n==t.Grid.Actions.Ungrouping||n==t.Grid.Actions.Grouping||n==t.Grid.Actions.Filtering||n==t.Grid.Actions.Sorting||n==t.Grid.Actions.Paging||n==t.Grid.Actions.Search||(n==t.Grid.Actions.Delete||n==t.Grid.Actions.Cancel)&&this.model.currentViewData!=null&&this.model.currentViewData.length==0)&&(this._selectedRow(-1),this._selectedMultipleRows([]),this._virtualDataRefresh&&n!=t.Grid.Actions.Refresh||(this.selectedRowsIndexes=[])),this._currentJsonData.length&&n==t.Grid.Actions.Delete&&this._selectedRow()>=this._currentJsonData.length){var i=this._currentJsonData.length-1;this._selectedRow(i);this._selectedMultipleRows([i]);this._virtualDataRefresh&&n!=t.Grid.Actions.Refresh||(this.selectedRowsIndexes=i)}n!=t.Grid.Actions.Delete&&(n!=t.Grid.Actions.Save||this._isMapSelection)||this.model.selectedRowIndex==-1||this.selectRows(this.model.selectedRowIndex);(n==t.Grid.Actions.Save||n==t.Grid.Actions.Cancel)&&this.element.focus()},_renderMultiTouchDialog:function(){var n,r,i;this._customPop=t.buildTag("div.e-gridpopup","",{display:"none"});n=t.buildTag("div.e-content");r=t.buildTag("div.e-downtail e-tail");this.model.allowMultiSorting&&(i=t.buildTag("span.e-sortdirect e-icon"),n.append(i));this.model.selectionType==t.Grid.SelectionType.Multiple&&(i=t.buildTag("span.e-rowselect e-icon"),n.append(i));this._customPop.append(n);this._customPop.append(r);this.element.append(this._customPop)}}}(jQuery,Syncfusion),function(n,t){t.gridFeatures=t.gridFeatures||{};t.gridFeatures.sort={_addSortElementToColumn:function(i,r){var a=t.DataManager(this.model.columns).executeLocal(t.Query().where("field","equal",i)),s,c,h,l;if(c=a.length>1?this.getColumnByHeaderText(this._$curSElementTarget.text()):this.getColumnByField(i),!t.isNullOrUndefined(c)){var v=n.inArray(c,this.model.columns),y=this.getsortColumnByField(i),p=n.inArray(y,this.model.sortSettings.sortedColumns),u=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").eq(v),f=u.find(".e-headercelldiv"),e=u.find(".e-filterset"),o=u.find(".e-gridgroupbutton");if(e.length&&o.length?this.model.enableRTL?f.addClass("e-headercelldivsortgroupfilter"):(u.addClass("e-headercellsortgroupfilter"),e.addClass("e-sortfiltergroupicon"),o.addClass("e-togglesortgroupfilter")):e.length?this.model.enableRTL?f.addClass("e-headercellsortfilter"):(u.addClass("e-headercellsortfilter"),e.addClass("e-sortfiltericon")):o.length?(this.model.enableRTL?f.addClass("e-headercellsortfilter"):(u.addClass("e-headercellsortfilter"),o.addClass("e-sortgroupicon")),this.model.enableRTL&&!e.length&&o.addClass("e-rtltoggle")):u.addClass("e-headercellsort"),r=t.isNullOrUndefined(r)?"ascending":r.toLowerCase(),u.find(".e-ascending,.e-descending").remove(),this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length!=0&&this.element.find(".e-groupdroparea").find("div[data-ej-mappingname='"+i+"']").find(".e-ascending,.e-descending").not(".e-ungroupbutton").remove(),s=r!="descending"?"e-rarrowup-2x":"e-rarrowdown-2x",h=1,this.model.allowSorting&&this.model.allowMultiSorting&&this.model.sortSettings.sortedColumns.length>1){for(l=1;l<=p;l++)h=h+1;f.css("text-align")=="right"?(f.prepend(this._createSortNumber(h,f).addClass("e-sortnumber")),u.append(this._createSortElement().addClass("e-"+(r||"ascending")+" "+s))):(f.prepend(this._createSortNumber(h,f).addClass("e-sortnumber")),u.append(this._createSortElement().addClass("e-"+(r||"ascending")+" "+s)))}else u.append(this._createSortElement().addClass("e-"+(r||"ascending")+" "+s));this.model.enableRTL?e.length&&o.length?u.find(".e-ascending,.e-descending").addClass("e-rtlsortfiltertoggle"):e.length||o.length?u.find(".e-ascending,.e-descending").addClass("e-rtlgrouporfilter"):u.find(".e-ascending,.e-descending").addClass("e-rtlsortadjust"):this.model.enableRTL||e.length||o.length||u.find(".e-ascending,.e-descending").addClass("e-sortadjust");this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length!=0&&this.element.find(".e-groupdroparea").find("div[data-ej-mappingname='"+i+"']").append(this._createSortElement().addClass("e-"+(r||"ascending")+" "+s));f.parent().attr("aria-sort",r)}},_removeSortElementFromColumn:function(t){var r=this.getColumnByField(t),u=n.inArray(r,this.model.columns),i=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell").eq(u).find(".e-headercelldiv");i.find(".e-ascending,.e-descending").remove();i.parent().prop("aria-sort",!1)},_sortCompleteAction:function(i){var e,o,r=this.getHeaderTable().find(".e-columnheader"),s,h,u,f;for(o=this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").parent().attr("data-ej-mappingname"),r.find(".e-headercell").find(".e-ascending,.e-descending,.e-number").remove(),s=r.find(".e-filterset"),h=r.find(".e-gridgroupbutton"),s.length||h.length?(r.find(".e-sortfiltericon").removeClass("e-sortfiltericon"),r.find(".e-headercellsortfilter").removeClass("e-headercellsortfilter"),r.find(".e-sortgroupicon").removeClass("e-sortgroupicon"),r.find(".e-headercellsortgroupfilter").removeClass("e-headercellsortgroupfilter"),r.find(".e-headercelldivsortgroupfilter").removeClass("e-headercelldivsortgroupfilter"),r.find(".e-sortfiltergroupicon").removeClass("e-sortfiltergroupicon"),r.find(".e-togglesortgroupfilter").removeClass("e-togglesortgroupfilter")):r.find(".e-headercellsort").removeClass("e-headercellsort"),n(this.getHeaderTable().find(".e-columnheader").find(".e-headercell:not(.e-stackedHeaderCell,.e-detailheadercell,.e-hide)")[this.getColumnIndexByField(o)]).removeAttr("aria-sort"),this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length!=0&&this.element.find(".e-groupdroparea").find("div[data-ej-mappingname='"+i.columnName+"']").find(".e-ascending,.e-descending,.e-number").not(".e-ungroupbutton").remove(),this.getHeaderTable().find("[aria-sort]").prop("aria-sort",!1),u=0;u<this.model.sortSettings.sortedColumns.length;u++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[u].field,this.model.sortSettings.sortedColumns[u].direction);this.model.groupSettings.groupedColumns.length&&this._$curSElementTarget!=null&&(f=this._checkEinGroupDrop(n.trim(this._$curSElementTarget.attr("data-ej-mappingname"))),t.isNullOrUndefined(f)||(e=(t.isNullOrUndefined(i.columnSortDirection)||i.columnSortDirection==""?this.getsortColumnByField(this._$curSElementTarget.attr("data-ej-mappingname")).direction.toLowerCase():i.columnSortDirection)=="ascending"?"e-rarrowup-2x":"e-rarrowdown-2x",f.find(".e-ascending,.e-descending").removeClass().addClass("e-icon e-"+(t.isNullOrUndefined(i.columnSortDirection)||i.columnSortDirection==""?this.getsortColumnByField(this._$curSElementTarget.attr("data-ej-mappingname")).direction.toLowerCase():i.columnSortDirection)+" "+e)));this.multiSortRequest=!1;(!this.model.allowScrolling||!this.initialRender||this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this.setWidthToColumns()},removeSortedColumns:function(t){if(n.isArray(t))for(var i=0;i<t.length;i++)this._removeSortedColumnFromCollection(t[i]);else this._removeSortedColumnFromCollection(t);this.multiSortRequest=!0;this.sortColumn(null,null)},_removeSortedColumnFromCollection:function(n){for(var t=0;t<this.model.sortSettings.sortedColumns.length;t++)if(this.model.sortSettings.sortedColumns[t].field==n){this.model.sortSettings.sortedColumns.splice(t,1);break}},clearSorting:function(){var t=this;this.model.sortSettings.sortedColumns=n.grep(this.model.sortSettings.sortedColumns,function(i){return n.inArray(i.field,t.model.groupSettings.groupedColumns)!=-1?!0:!1});this._$prevSElementTarget=null;this._$curSElementTarget=null;this.refreshContent()},sortColumn:function(i,r){var u,f,e;this.model.allowSorting&&n.inArray(i,this._disabledSortableColumns)==-1&&(i==null||i.length!=0)&&(u={},this.multiSortRequest||(f=this,this.model.sortSettings.sortedColumns=n.grep(this.model.sortSettings.sortedColumns,function(t){return n.inArray(t.field,f.model.groupSettings.groupedColumns)!=-1?!0:!1})),u.requestType=t.Grid.Actions.Sorting,this._cSortedColumn=u.columnName=i,this._cSortedDirection=u.columnSortDirection=t.isNullOrUndefined(r)?t.sortOrder.Ascending:r.toLowerCase(),this._cSortedColumn!==null&&(this._removeSortedColumnFromCollection(i),this.model.sortSettings.sortedColumns.push({field:this._cSortedColumn,direction:this._cSortedDirection})),e=this._processBindings(u),e&&(this._cSortedDirection=this._cSortedColumn=null),this._primaryKeyValues=[])},_createSortElement:function(){return t.buildTag("span.e-icon","&#160;")},_renderMultiTouchDialog:function(){var n,r,i;this._customPop=t.buildTag("div.e-gridpopup","",{display:"none"});n=t.buildTag("div.e-content");r=t.buildTag("div.e-downtail e-tail");this.model.allowMultiSorting&&(i=t.buildTag("span.e-sortdirect e-icon"),n.append(i));this.model.selectionType=="multiple"&&(i=t.buildTag("span.e-rowselect e-icon"),n.append(i));this._customPop.append(n);this._customPop.append(r);this.element.append(this._customPop)}}}(jQuery,Syncfusion),function(n,t){"use strict";t.RTE=t.RTE||{};t.RTE.FindAndReplace={_findObject:null,_selectedIndex:-1,_findAndReplaceClick:function(t){var r=this._findDialog.element,e=n.trim(n(r).find("[ej-function='findtxt']").val()),o=t.target.tagName=="SPAN"||t.target.tagName=="DIV"?n(t.target).closest("button")[0]:t.target,s=n(r).find("[ej-function='replacetxt']").val(),u=this.getDocument().body,f=n(r).find("[ej-function='replace'],[ej-function='replaceAll']"),i=n(r).find("[ej-function='prev'],[ej-function='next']"),h;if(n(this._findDialog.element).children("span").html(""),!n(o).hasClass("e-disable"))switch(o.getAttribute("ej-function")){case"find":e?(this._findObject.find(e,u,!n(r).find("[ej-function='matchCase']")[0].checked,n(r).find("[ej-function='wholeWords']")[0].checked),this._selectedIndex=-1,this._findObject.nodeCollection.length?(n("#"+this._id+"_rtefindcount").html(""),this._findObject.nodeCollection.length>0?f.ejButton("enable"):f.ejButton("disable"),this._highlightNode(++this._selectedIndex,u),this._updateBtnStatus(this._selectedIndex,i)):(n.merge(i,f).ejButton("disable"),this._findObject.revertAll(),n(this._findDialog.element).children("span").html(this._getLocalizedLabels("FindErrorMsg")))):this._findObject.nodeCollection.length&&this._findObject.revertAll();break;case"next":this._selectedIndex<this._findObject.nodeCollection.length&&(n("#"+this._id+"_rtefindcount").html(""),this._highlightNode(++this._selectedIndex,u));this._updateBtnStatus(this._selectedIndex,i);break;case"prev":this._selectedIndex>0&&(n("#"+this._id+"_rtefindcount").html(""),this._highlightNode(--this._selectedIndex,u));this._updateBtnStatus(this._selectedIndex,i);break;case"replace":this._findObject.replaceByIndex(this._selectedIndex,s);this._findObject.nodeCollection.length?this._selectedIndex>this._findObject.nodeCollection.length-1&&--this._selectedIndex:(n("#"+this._id+"_rtefindcount").html(""),this._selectedIndex=-1);this._selectedIndex>-1?(n("#"+this._id+"_rtefindcount").html(""),this._highlightNode(this._selectedIndex,u),this._updateBtnStatus(this._selectedIndex,i)):n.merge(i,f).ejButton("disable");this._setBackupData();break;case"replaceAll":h=this._findObject.replaceAll(s);this._selectedIndex=-1;n("#"+this._id+"_rteReplaceCount").append(h+this._getLocalizedLabels("ReplaceCount"));n.merge(i,f).ejButton("disable");this._setBackupData()}this._updateCount()},_updateBtnStatus:function(t,i){t<this._findObject.nodeCollection.length-1?n(i[1]).ejButton("enable"):n(i[1]).ejButton("disable");t>0?n(i[0]).ejButton("enable"):n(i[0]).ejButton("disable")},_highlightNode:function(i,r){var u,f;for(n(r).find(".e-highlight").removeClass("e-highlight"),u=0;u<this._findObject.nodeCollection.length;u++)if(i==u)for(f=0;f<this._findObject.nodeCollection[u].length;f++)n(this._findObject.nodeCollection[u][f].node).addClass("e-highlight"),n(t.browserInfo().name=="msie"||t.browserInfo().name=="mozilla"?r.parentElement:r).scrollTop(n(this._findObject.nodeCollection[u][f].node).offset().top-25);n("#"+this._id+"_rtefindcount").append(i+this._getLocalizedLabels("FindOf")+this._findObject.nodeCollection.length)},_renderFindDialog:function(i){var r="<div id='"+this._id+"_basicDialog' title='"+this._getLocalizedLabels("FindAndReplace")+"'><div class='e-maincontent'><div class='e-fd-findcontent'><div class='e-fd-lable'><span>"+this._getLocalizedLabels("Find")+"<\/span><\/div><div class='e-txtbox'><input type='text' ej-function='findtxt' id='"+this._id+"_findtxt' class='e-js e-input'><\/div><div id='"+this._id+"_rtefindcount' class='e-rtefindcount'><\/div><\/div><div class='e-fd-InnerContent'><div><input type='checkbox' ej-function='matchCase' id='"+this._id+"_matchCase' value='true'><label for='"+this._id+"_matchCase' class='e-fd-checkboxlable' style=''>"+this._getLocalizedLabels("MatchCase")+"<\/label><\/div><div class='e-checkbx'><input type='checkbox' ej-function='wholeWords' id='"+this._id+"_wholeWords' value='true'><label for='"+this._id+"_wholeWords' class='e-fd-checkboxlable'>"+this._getLocalizedLabels("WholeWord")+"<\/label><\/div><\/div><div class='e-fd-replacecontent'><div class='e-fd-lable'><span>"+this._getLocalizedLabels("ReplaceWith")+"<\/span><\/div><div class='e-txtbox'><input type='text' ej-function='replacetxt' id='"+this._id+"_replacetxt' class='e-js e-input'><\/div><\/div><\/div><div id='"+this._id+"_rteReplaceCount' class='e-rteReplaceCount'><\/div><span style='text-align: center;'><\/span><div class='e-fd-btncol'><div class='e-btn-left'><button id='"+this._id+"_find' ej-function='find'>"+this._getLocalizedLabels("Find")+"<\/button><button id='"+this._id+"_replace' ej-function='replace'>"+this._getLocalizedLabels("Replace")+"<\/button><button id='"+this._id+"_replaceAll' class='ejRTE-replaceAll' ej-function='replaceAll'>"+this._getLocalizedLabels("ReplaceAll")+"<\/button><\/div><div class='e-btn-right'><button id='"+this._id+"_prev' ej-function='prev'><\/button><button id='"+this._id+"_next' ej-function='next'><\/button><\/div><\/div><\/div>";i._findDialog=n(r).ejDialog({width:"auto",minWidth:"300px",maxWidth:"380px",isResponsive:!0,close:this._onCloseFindAndReplace,cssClass:"e-rte e-findandreplace",enableRTL:i.model.enableRTL,enableResize:!1,enableModal:!0}).data("ejDialog");n(i._findDialog.element).find("input[type=text]").val("");n(i._findDialog.element).find("button").ejButton({height:30});n(i._findDialog.element).find("[ej-function='replace'],[ej-function='replaceAll'],[ej-function='prev'],[ej-function='next']").ejButton("disable");n(i._findDialog.element).find("[ej-function='prev'],[ej-function='next']").ejButton({height:30,width:30,contentType:"imageonly"});n(i._findDialog.element).find("[ej-function='prev']").ejButton({prefixIcon:"e-icon e-chevron-left_02"}).next().ejButton({prefixIcon:"e-icon e-chevron-right_02"});n(i._findDialog.element).find("[ej-function='wholeWords'],[ej-function='matchCase']").ejCheckBox({enableRTL:i.model.enableRTL,checked:!1});this._findObject=new t.FindAndReplace;this._on(i._findDialog.element.find("button"),"click",this._findAndReplaceClick)},_onCloseFindAndReplace:function(){n("#"+this._id.replace("_basicDialog","")).data("ejRTE")._findObject.revertAll();this.element.find("[ej-function='replace'],[ej-function='replaceAll'],[ej-function='prev'],[ej-function='next']").ejButton("disable");this.element.find("input[type=text]").val("");this.element.find("[ej-function='wholeWords'],[ej-function='matchCase']").ejCheckBox({checked:!1});this.element.children("span").html("");n(".e-rteReplaceCount").html("");n(".e-rtefindcount").html("")},_showFindAndReplace:function(){this._findDialog?this._findDialog.open():this._renderFindDialog(this)}}}(jQuery,Syncfusion),function(){ej.FindAndReplace=function(){this.indexLength=0;this.elements=[];this.matches=[];this.nodeCollection=[];this.specialChar=/([{}()|[\]\/\\.*+?^=!:$])/g;this.escapeContent="\\$1"};ej.FindAndReplace.prototype._addContentEscape=function(n){return String(n).replace(this.specialChar,this.escapeContent)};ej.FindAndReplace.prototype.find=function(n,t,i,r){return this.nodeCollection.length&&this.revertAll(),this._validateTextContent(n,this._getFormatedText(t),i,r),this.matches.length?(this._iterateNodes(t),this.matches=[],!0):!1};ej.FindAndReplace.prototype._replace=function(n,t){for(var i=0;i<n.length;i++)!i||!t?this._elementDefragment(n[i].node,t):$(n[i].node).remove()};ej.FindAndReplace.prototype.replaceByIndex=function(n,t){for(var r=[],i=0;i<this.nodeCollection.length;i++)i==n?this._replace(this.nodeCollection[i],t):r.push(this.nodeCollection[i]);this.nodeCollection=r};ej.FindAndReplace.prototype.replaceAll=function(n){for(var t=0;t<this.nodeCollection.length;t++)this._replace(this.nodeCollection[t],n);return this.nodeCollection=[],t};ej.FindAndReplace.prototype.revertAll=function(){for(var n=0;n<this.nodeCollection.length;n++)this._replace(this.nodeCollection[n]);this.nodeCollection=[]};ej.FindAndReplace.prototype._elementDefragment=function(n,t){var i=n.nextSibling,r=n.previousSibling;i&&r&&i.nodeType==3&&r.nodeType==3?(i=n.previousSibling,i.data=i.data+(t!=undefined?t:n.firstChild.data)+n.nextSibling.data,$(n.nextSibling).remove(),$(n).remove()):i&&i.nodeType==3?(i=n.nextSibling,i.data=(t!=undefined?t:n.firstChild.data)+i.data,$(n).remove()):r&&r.nodeType==3?(i=n.previousSibling,i.data=i.data+(t!=undefined?t:n.firstChild.data),$(n).remove()):(i=t!=undefined?document.createTextNode(t):n.firstChild,$(n).replaceWith(i))};ej.FindAndReplace.prototype._validateTextContent=function(n,t,i,r){for(var u=this._addContentEscape(n),f=new RegExp(r?"\\b"+u+"\\b":u,i?"gi":"g");data=f.exec(t);)this.matches.push({startIndex:data.index,endIndex:data.index+n.length});return this.matches};ej.FindAndReplace.prototype._traverseNode=function(n,t){if(n.nodeType===3&&(out=this._validateData(n,t),out.curNode&&(n=out.curNode),out.status))return!0;if(n=n.firstChild)do if(n.nodeType===3){if(out=this._validateData(n,t),out.curNode&&(n=out.curNode),out.status)return!0}else if(this._traverseNode(n,t))return!0;while(n=n.nextSibling);return!1};ej.FindAndReplace.prototype._validateData=function(n,t){var i=this.indexLength,r=this.indexLength+n.length;return this.indexLength=this.indexLength+n.length,i>=t.startIndex||t.startIndex<r?this._elementFragment(t,{startIndex:i,endIndex:r},n):{status:!1}};ej.FindAndReplace.prototype._elementFragment=function(n,t,i){var u=i.data,r=i,f,e;if(n.startIndex<=t.startIndex&&n.endIndex>=t.endIndex)r=ej.buildTag("span.e-selected-node").append(document.createTextNode(i.data))[0],$(i).replaceWith(r),this.elements.push({node:r});else if(n.startIndex<=t.startIndex&&n.endIndex<t.endIndex)f=n.endIndex-n.startIndex,e=ej.buildTag("span.e-selected-node").append(document.createTextNode(u.substr(0,f)))[0],$(e).insertBefore(i),i.data=u.substr(f),this.elements.push({node:e});else if(n.startIndex>t.startIndex&&n.endIndex>=t.endIndex)f=n.startIndex-t.startIndex,r=ej.buildTag("span.e-selected-node").append(document.createTextNode(u.substr(f)))[0],$(r).insertAfter(i),i.data=u.substr(0,f),this.elements.push({node:r});else if(n.startIndex>t.startIndex&&n.endIndex<t.endIndex){var o=n.startIndex-t.startIndex,s=o+(n.endIndex-n.startIndex),e=ej.buildTag("span.e-selected-node").append(document.createTextNode(u.substring(o,s)))[0];r=document.createTextNode(u.substring(s));i.data=u.substr(0,o);$(r).insertAfter(i);$(e).insertAfter(i);this.elements.push({node:e})}return{status:n.endIndex>t.startIndex&&n.endIndex<=t.endIndex,curNode:r}};ej.FindAndReplace.prototype._getFormatedText=function(n){var t="";if(n.nodeType===3)return n.data.replace(/\n/g," ");if(n=n.firstChild)do t+=n.nodeType===3?n.data.replace(/\n/g," "):this._getFormatedText(n);while(n=n.nextSibling);return t};ej.FindAndReplace.prototype._iterateNodes=function(n){temp=this;$(this.matches).each(function(t,i){temp._traverseNode(n,i);temp.nodeCollection.push(temp.elements);temp.indexLength=0;temp.elements=[]})}}();ej.RTE.FindAndReplace&&$.extend(ej.RTE.prototype,ej.RTE.FindAndReplace);__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)};ejTooltip=function(n){function t(t,i){return n.call(this),this._rootCSS="e-tooltip",this._setFirst=!1,this.PluginName="ejTooltip",this.id="null",this.model=null,this.defaults={height:"auto",width:"auto",enabled:!0,content:null,containment:"body",target:null,title:null,closeMode:"none",autoCloseTimeout:4e3,position:{stem:{horizontal:"center",vertical:"bottom"},target:{horizontal:"center",vertical:"top"}},associate:"target",collision:"flipfit",showShadow:!1,cssClass:null,animation:{effect:"none",speed:0},isBalloon:!0,showRoundedCorner:!1,enableRTL:!1,allowKeyboardNavigation:!0,tip:{size:{width:20,height:10},adjust:{xValue:0,yValue:0}},trigger:"hover",create:null,click:null,destroy:null,hover:null,tracking:null,beforeOpen:null,beforeClose:null,open:null,close:null},this.dataTypes={enabled:"boolean",closeMode:"enum",autoCloseTimeout:"number",trigger:"enum",position:{stem:"data",target:"data"},associate:"enum",collision:"enum",showShadow:"boolean",animation:{effect:"enum",speed:"number"},isBalloon:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",allowKeyboardNavigation:"boolean",tip:{size:{width:"number",height:"number"},adjust:{xValue:"number",yValue:"number"}}},this.isTrack=!0,this._isCancel=!1,this._isHidden=!0,this.arrowValue={left:0,top:0,width:0,height:0,display:null},this.tooltipPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.targetPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.mouseTimer=null,this.positionTarget=null,this.positionTooltip=null,this.containerSize=null,this._createTitle=function(){this.tooltipTitle=ej.buildTag("div.e-def e-header"," ",{},{});this.tooltipHeader=ej.buildTag("div"," ",{},{});$(this.tooltipTitle).html(this.model.title).appendTo(this.tooltipHeader)},t&&(t.jquery||(t=$("#"+t)),t.length)?$(t).ejTooltip(i).data(this.PluginName):void 0}return __extends(t,n),t.prototype.setModel=function(n,t){this.setModel(n,t)},t.prototype.option=function(n,t){this.option(n,t)},t.prototype.triggerEvents=function(n,t){var i,r,u,f,e,o,s;switch(n){case"click":r=t;i=this._trigger(n,r);break;case"hover":u=t;i=this._trigger(n,u);break;case"tracking":f=t;i=this._trigger(n,f);break;case"beforeOpen":e=t;i=this._trigger(n,e);break;case"open":o=t;i=this._trigger(n,o);break;case"beforeClose":case"close":s=t;i=this._trigger(n,s)}return i},t.prototype.enable=function(){this.tooltip.hasClass("e-disable")&&(this.model.enabled=!0,this.tooltip.removeClass("e-disable"))},t.prototype.disable=function(){this.tooltip.hasClass("e-disable")||(this.model.enabled=!1,this.tooltip.addClass("e-disable"))},t.prototype.show=function(n,t){if(this.model.enabled){if(ej.isNullOrUndefined(n)){var i=this.model.target==null?this.element:$(this.element).find(this.model.target+":first");this._positionElement(i)}else this._positionElement(n);ej.isNullOrUndefined(t)?this._showTooltip():typeof t=="string"?$(this.tooltip).show(t):typeof t=="function"&&t.call.apply(this.tooltip)}},t.prototype.hide=function(n){this.model.enabled&&(ej.isNullOrUndefined(n)?this._hideTooltip():typeof n=="string"?$(this.tooltip).hide(n):typeof n=="function"&&n.call.apply(this.tooltip))},t.prototype._destroy=function(){this.mouseTimer&&clearTimeout(this.mouseTimer);this.timer&&clearTimeout(this.timer);$(this.tooltip).remove();this.tooltip=null},t.prototype._setModel=function(n){var t,i;for(t in n)switch(t){case"height":this._setHeight(n[t]);break;case"width":this._setWidth(n[t]);break;case"enabled":this._enabled(n[t]);break;case"content":this._setContent(n[t]);break;case"title":this.model.title=n[t];this.model.title==null?($(this.tooltipHeader).remove(),this.tooltipHeader=null,this.tooltipTitle=null,this.model.closeMode===ej.Tooltip.CloseMode.Sticky&&this._iconRender()):ej.isNullOrUndefined(this.tooltipHeader)?this._createHeader():$(this.tooltipTitle).html(this.model.title);this.tooltipPos.height=$(this.tooltip).outerHeight();break;case"associate":this.model.associate=n[t];this._wireMouseEvents(!1);this._wireMouseEvents(!0);break;case"position":this._setPosition(n[t]);break;case"collision":this.model.collision=n[t];break;case"closeMode":typeof n[t]!="undefined"&&(this.model.closeMode=n[t],this.model.closeMode==ej.Tooltip.CloseMode.Sticky?this._iconRender():($(this.tooltipClose).remove(),this.tooltipClose=null),this.tooltipPos.height=$(this.tooltip).outerHeight());break;case"cssClass":this._setSkin(n[t]);break;case"showShadow":this._shadowEffect(n[t],this.model.position);break;case"isBalloon":ej.isNullOrUndefined(n[t])||(this.model.isBalloon=n[t],this.model.isBalloon?this._renderArrow():($(this.tip).remove(),this.tip=null));break;case"animation":i=n[t];this.model.animation=$.extend(!0,this.model.animation,i);this.model.animation.effect!=ej.Tooltip.Effect.None?(this._off($(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._off($(this.tooltip),"mouseleave",this._onTooltipMouseLeave)):this.model.animation.effect==ej.Tooltip.Effect.None&&(this._on($(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._on($(this.tooltip),"mouseleave",this._onTooltipMouseLeave));break;case"enableRTL":this._setRTL(n[t]);break;case"target":this._wireTriggerEvents(!1);this.model.target=n[t];this._wireTriggerEvents(!0);this._renderTarget();break;case"trigger":this._setTrigger(n[t]);break;case"showRoundedCorner":this.model.showRoundedCorner=n[t];this._roundedCorner(n[t]);break;case"allowKeyboardNavigation":this.model.allowKeyboardNavigation=n[t];this.model.allowKeyboardNavigation?this._on($(window),"keydown",this._keyDown):this._off($(window),"keydown",this._keyDown)}},t.prototype._enabled=function(n){n?this.enable(n):this.disable(n);this.model.enabled=n},t.prototype._shadowEffect=function(n,t){this.model.showShadow=n;var i=null;if($(this.tooltip).removeClass("e-tooltipShadowLeft e-tooltipShadowRight"),this.model.showShadow){if(this.model.isBalloon)switch(t.stem.horizontal){case"center":i=t.stem.vertical=="top"?"e-tooltipShadowLeft":t.stem.vertical=="bottom"?"e-tooltipShadowRight":"e-tooltipShadowLeft";break;case"right":i=t.target.horizontal=="center"&&t.stem.vertical=="top"?"e-tooltipShadowLeft":"e-tooltipShadowRight";break;case"left":i=t.target.horizontal=="center"&&t.stem.vertical=="bottom"?"e-tooltipShadowRight":"e-tooltipShadowLeft"}else i="e-tooltipShadowLeft";$(this.tooltip).addClass(i)}},t.prototype._setContent=function(n){this.model.content=n;$(this.tooltipContent).html(this.model.content);this.tooltipPos.height=$(this.tooltip).outerHeight();this.tooltipPos.width=$(this.tooltip).outerWidth()},t.prototype._setPosition=function(n){this.model.position.stem=$.extend(!0,this.model.position.stem,n.stem);this.model.position.target=$.extend(!0,this.model.position.target,n.target)},t.prototype._setTrigger=function(n){this._wireTriggerEvents(!1);this.model.trigger=n;this._wireTriggerEvents(!0)},t.prototype._init=function(){this.id=this.element[0].id;this.positionTarget=$.extend(!0,{},this.model.position.target);this.positionTooltip=$.extend(!0,{},this.model.position.stem);this.tipSize=$.extend(!0,{},this.model.tip.size);this._initialize();this._render();this.enable(this.model.enabled);this._wireEvents(!0)},t.prototype._initialize=function(){ej.isNullOrUndefined(this.model.target)?ej.isNullOrUndefined(this.model.content)&&!ej.isNullOrUndefined(this.element.attr("title"))&&(this.model.content=this.element.attr("title"),this.element.attr("data-content",this.model.content),this.element.removeAttr("title")):this._renderTarget()},t.prototype._wireEvents=function(n){var t=n?"_on":"_off";this._wireTriggerEvents(n);this.model.allowKeyboardNavigation&&this[t]($(window),"keydown",this._keyDown);this.model.target!=null?this[t](this.element,"scroll",this.model.target,this._hideTooltip):this[t](this.element,"scroll",this._hideTooltip);this[t]($(this.tooltip),"mouseenter",this._onTooltipMouseEnter);this[t]($(this.tooltip),"mouseleave",this._onTooltipMouseLeave);this[t]($(window),"resize",this._hideTooltip);this[t]($(window),"touchend",this._docTouchEndHandler)},t.prototype._wireTriggerEvents=function(n){var t=n?"_on":"_off",i;this.model.trigger==ej.Tooltip.Trigger.Focus?this.model.target!=null?this[t](this.element,"blur",this.model.target,this._hideTooltip):this[t](this.element,"blur",this._hideTooltip):this.model.target!=null?this[t](this.element,ej.isDevice()?"touchstart":"mouseleave",this.model.target,this._onMouseOut):this[t](this.element,ej.isDevice()?"touchstart":"mouseleave",this._onMouseOut);this._wireMouseEvents(n);i=this.model.trigger==ej.Tooltip.Trigger.Click?ej.isDevice()?"touchstart":"click":this.model.trigger==ej.Tooltip.Trigger.Focus?ej.isDevice()?"touchstart":"focus":ej.isDevice()?"touchstart":"mouseenter";this.model.target!=null?this[t](this.element,i,this.model.target,this._targetHover):this[t](this.element,i,this._targetHover)},t.prototype._wireMouseEvents=function(n){var t=n?"_on":"_off";(this.model.associate==ej.Tooltip.Associate.MouseEnter||this.model.associate==ej.Tooltip.Associate.MouseFollow)&&(this.model.target!=null?this[t](this.element,ej.isDevice()?"touchstart":"mousemove",this.model.target,this._tooltipMove):this[t](this.element,ej.isDevice()?"touchstart":"mousemove",this._tooltipMove))},t.prototype._render=function(){this.tooltip=ej.buildTag("div.e-tooltip-wrap e-widget","",{},{role:"tooltip","aria-readonly":"true","aria-hidden":"true","aria-describedby":this.id+"_content",id:this.id+"_Main"});this.tooltipInter=ej.buildTag("div.e-tipContainer","",{},{});this.tooltip.append(this.tooltipInter);this.model.isBalloon&&this._renderArrow();$(this.model.containment).append(this.tooltip);this._setHeight(this.model.height);this._setWidth(this.model.width);this._createHeader();this._tooltipContent();this.model.cssClass&&this.tooltip.addClass(this.model.cssClass);this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner);this.model.enableRTL&&this._setRTL(this.model.enableRTL);$(this.tooltip).css({top:"auto",left:"auto"});this.tooltipPos={width:$(this.tooltip).outerWidth(),height:$(this.tooltip).outerHeight(),left:$(this.tooltip).offset().left,top:$(this.tooltip).offset().top,position:"absolute"};ej.isNullOrUndefined(this.model.target)&&(this._containerCalc(this.element),this._positionElement(this.element))},t.prototype._containerCalc=function(n){ej.isNullOrUndefined(n)&&(n=this.element);var t=$(n).offset();this.containerSize={height:this.model.containment=="body"?$(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight:$(this.model.containment).innerHeight(),width:this.model.containment=="body"?$(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth:$(this.model.containment).innerWidth()};this.containerSize.left=this.model.containment!="body"?$(this.model.containment).css("position")=="static"?$(this.model.containment).offset().left-$(this.model.containment).offsetParent().offset().left:0:0;this.containerSize.top=this.model.containment!="body"?$(this.model.containment).css("position")=="static"?$(this.model.containment).offset().top-$(this.model.containment).offsetParent().offset().top:0:0;t.left-=this.model.containment!="body"?$(this.model.containment).css("position")=="static"?$(this.model.containment).offsetParent().offset().left:$(this.model.containment).offset().left:0;t.top-=this.model.containment!="body"?$(this.model.containment).css("position")=="static"?$(this.model.containment).offsetParent().offset().top:$(this.model.containment).offset().top:0;this.targetPos.left=t.left;this.targetPos.top=t.top},t.prototype._setHeight=function(n){this.model.height=n;!isNaN(+n)&&isFinite(n)?$(this.tooltip).css("height",n+"px"):$(this.tooltip).css("height",n);this.tooltipPos.height=$(this.tooltip).outerHeight()},t.prototype._setWidth=function(n){this.model.width=n;this.model.width!="auto"&&(n=!isNaN(+n)&&isFinite(n)?n+"px":n,$(this.tooltip).css("max-width",n),$(this.tooltip).css("min-width","0px"));$(this.tooltip).css("width",n);this.tooltipPos.height=$(this.tooltip).outerHeight()},t.prototype._setRTL=function(n){this.model.enableRTL=n;n?this.tooltip.addClass("e-rtl"):this.tooltip.removeClass("e-rtl")},t.prototype._setSkin=function(n){this.model.cssClass!=n&&(this.tooltip.removeClass(this.model.cssClass).addClass(n),this.model.cssClass=n)},t.prototype._roundedCorner=function(){this.model.showRoundedCorner?this.tooltip.addClass("e-corner"):this.tooltip.removeClass("e-corner")},t.prototype._renderArrow=function(){ej.isNullOrUndefined(this.tip)&&(this.tip=ej.buildTag("div.e-arrowTip"," ",{id:this.id+"_eTip"},{}),$(this.tip).append("<div class='e-arrowTipOuter'><\/div>").append("<div class='e-arrowTipInner'><\/div>"),$(this.tip).insertBefore(this.tooltipInter))},t.prototype._adjustArrow=function(n){var r,u,f=$(this.tooltip).width(),i=$(this.tooltip).height(),t=n.stem,o=n.target,e={tipHeight:0,tipWidth:0};o.horizontal=="right"||o.horizontal=="left"?(r=t.horizontal=="left"?-this.model.tip.size.height:t.horizontal=="right"?f:f/2-this.tipSize.width/2,u=t.horizontal!="center"?t.vertical=="top"?5:t.vertical=="center"?i/2-this.tipSize.width/2:i-5-this.tipSize.width:t.vertical=="top"?-this.tipSize.height:t.vertical=="bottom"?i:this.tooltipPos.height/2-this.tipSize.width/2,e=this._arrowBinding(n,"horizontal")):(u=t.vertical=="top"?-this.tipSize.height:t.vertical=="bottom"?i:i/2-this.tipSize.width/2,r=t.vertical=="center"?t.horizontal=="left"?-this.model.tip.size.height:f:t.horizontal=="left"?10:t.horizontal=="center"?this.tooltipPos.width/2-this.tipSize.width/2:f-10-this.tipSize.width,e=this._arrowBinding(n,"vertical"));this.arrowValue.left=r;this.arrowValue.top=u;$(this.tip).css({height:e.tipHeight+"px",width:e.tipWidth+"px",left:r+"px",top:u+"px",display:t.horizontal=="center"&&t.vertical=="center"?"none":"block"})},t.prototype._arrowBinding=function(n,t){var f=n.stem,c=t=="horizontal"?f.horizontal!="center":f.vertical=="center",r,u,e=$(this.tooltip).css("border-top-color"),o=$(this.tooltip).css("background-color"),s=this.model.tip.size.height,h=this.model.tip.size.height-1,i={"border-top":"none","border-bottom":"none","border-right":"none","border-left":"none"};return c?(r=this.model.tip.size.height,u=this.model.tip.size.width,$(this.tip).find(".e-arrowTipOuter").css(this._arrow(n,s,e,i,"horizontal")),$(this.tip).find(".e-arrowTipInner").css(this._arrow(n,h,o,i,"horizontal"))):(r=this.model.tip.size.width,u=this.model.tip.size.height,$(this.tip).find(".e-arrowTipOuter").css(this._arrow(n,s,e,i,"vertical")),$(this.tip).find(".e-arrowTipInner").css(this._arrow(n,h,o,i,"vertical"))),{tipHeight:u,tipWidth:r}},t.prototype._arrow=function(n,t,i,r,u){var f=n.stem,e=u=="horizontal"?f.horizontal=="right"?"0px":"1px":"1px",o=u=="horizontal"?"1px":f.vertical=="bottom"?"0px":"1px";return r["border-top"]=u=="horizontal"?t+"px solid transparent":f.vertical=="bottom"?t+"px solid "+i:"none",r["border-bottom"]=u=="horizontal"?t+"px solid transparent":f.vertical=="top"?t+"px solid "+i:"none",r["border-right"]=u=="horizontal"?f.horizontal=="left"?t+"px solid "+i:"none":t+"px solid transparent",r["border-left"]=u=="horizontal"?f.horizontal=="right"?t+"px solid "+i:"none":t+"px solid transparent",t==this.model.tip.size.height-1&&(r.left=e,r.top=o),r},t.prototype._iconRender=function(){this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&(ej.isNullOrUndefined(this.tooltipClose)||$(this.tooltipClose).remove(),this.tooltipClose=ej.buildTag("div .e-icon"," ",{},{id:"_closeIcon"}),this.model.title!=null?$(this.tooltipClose).insertAfter(this.tooltipTitle).addClass("e-close"):$(this.tooltipClose).insertBefore(this.tooltipInter).addClass("e-cross-circle"),this._on($(this.tooltipClose),"click",this._hideTooltip))},t.prototype._renderTarget=function(){this.targetElement=$(this.element).find(this.model.target);for(var n=0;n<this.targetElement.length;n++)ej.isNullOrUndefined($(this.targetElement[n]).attr("title"))||(this.targetElement[n].setAttribute("data-content",this.targetElement[n].title),this.targetElement[n].removeAttribute("title"))},t.prototype._tooltipContent=function(){this.tooltipContent=ej.buildTag("div.e-tipcontent e-def","",{},{id:this.id+"_content"});$(this.tooltipContent).html(this.model.content).addClass("e-def");this.model.title!=null?$(this.tooltipContent).insertAfter(this.tooltipHeader):$(this.tooltipContent).appendTo(this.tooltipInter)},t.prototype._positionElement=function(n){this.tooltipPos.width=$(this.tooltip).outerWidth();this.tooltipPos.height=$(this.tooltip).outerHeight();this.targetPos.width=$(n).outerWidth();this.targetPos.height=$(n).outerHeight();this._containerCalc(n);this.model.associate==ej.Tooltip.Associate.Window?this._browserPosition():this.model.associate==ej.Tooltip.Associate.Axis?this._axisPosition():this.model.associate==ej.Tooltip.Associate.Target&&this._tooltipPosition(this.model.position);this.model.collision!=ej.Tooltip.Collision.None&&this.model.associate==ej.Tooltip.Associate.Target&&this._calcCollision(this.model.position,n)},t.prototype._browserPosition=function(){if(this.model.containment=="body"){this.containerSize={height:$(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight,width:$(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth};var t=$.extend(!0,{},this.model.position),n={position:"absolute",left:"auto",top:"auto",bottom:"auto",right:"auto"};ej.isNullOrUndefined(this.tip)||$(this.tip).css({display:"none"});this.model.position.target.horizontal=="right"?n.right=0:n.left=this.model.position.target.horizontal=="left"?0:this.containerSize.width/2-this.tooltipPos.width/2;this.model.position.target.vertical=="top"?n.top=0:this.model.position.target.vertical=="center"?n.top=this.containerSize.height/2-this.tooltipPos.height/2:n.bottom=0;this.model.showShadow&&this._shadowEffect(this.model.showShadow,t);$(this.tooltip).css(n)}},t.prototype._tooltipMove=function(n){if(this.model.closeMode==ej.Tooltip.CloseMode.None&&this.model.enabled){var t=this;if(this._isCancel)return;this.model.associate==ej.Tooltip.Associate.MouseFollow?this._mousePosition(n):this.model.associate==ej.Tooltip.Associate.MouseEnter&&(clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){t.isTrack&&t._mousePosition(n)},300))}},t.prototype._mousePosition=function(n){var r,u,w,h;n.type=="touchstart"?(n.preventDefault(),r=n.touches[0].pageX,u=n.touches[0].pageY):n.type=="mousemove"&&(r=n.pageX,u=n.pageY);this.isCollision=!0;this._containerCalc(n.currentTarget);var c=0,l=0,f=0,t=$.extend(!0,{},this.model.position.stem),e=$.extend(!0,{},this.model.position),o={left:0,top:0},i={left:r,top:u},s={left:r,top:u},a=this.containerSize.left,v=this.containerSize.top,y=this.model.containment!="body"?r-$(this.model.containment).offset().left:r,p=this.model.containment!="body"?u-$(this.model.containment).offset().top:u;for(e.target.horizontal=e.target.vertical="center",this.model.containment!="body"&&(o=$(this.model.containment).css("position")=="static"?$(this.model.containment).offsetParent().offset():$(this.model.containment).offset()),s.left-=o.left,s.top-=o.top;this.isCollision;)if(i=$.extend(!0,{},s),w=this.model.isBalloon?t.vertical=="top"||t.vertical=="bottom"?5+this.tipSize.height/2:0:0,h=this.model.isBalloon?t.horizontal=="right"||t.horizontal=="left"?10+this.tipSize.width/2:0:0,c=this.model.tip.adjust.xValue!=0?this.model.tip.adjust.xValue:7,l=this.model.tip.adjust.yValue!=0?this.model.tip.adjust.yValue:10,f=this.model.isBalloon?t.horizontal!="center"?this.model.tip.size.height:t.vertical!="center"?this.model.tip.size.height:0:2,i.left+=t.horizontal=="right"?-this.tooltipPos.width:t.horizontal=="left"?0:-(this.tooltipPos.width/2),i.top+=t.vertical=="bottom"?-this.tooltipPos.height:t.vertical=="top"?0:-(this.tooltipPos.height/2),i.left+=t.vertical!="center"?t.horizontal=="right"?h:t.horizontal=="left"?-h:0:0,i.left+=t.vertical=="center"?t.horizontal=="right"?-f:t.horizontal=="left"?+(f+c):0:0,i.top+=t.vertical=="top"?+(f+l):t.vertical=="bottom"?-f:0,this.targetElement!=n.currentTarget&&(this.targetElement=n.currentTarget,(i.left<a||i.left+this.tooltipPos.width>a+this.containerSize.width)&&(this.positionTooltip.horizontal=y>=this.tooltipPos.width?"right":this.containerSize.width-y>=this.tooltipPos.width?"left":"center"),(i.top<v||i.top+this.tooltipPos.height>this.containerSize.height+v)&&(this.positionTooltip.vertical=p>=this.tooltipPos.height?"bottom":this.containerSize.height-p>=this.tooltipPos.height?"top":"center")),this.positionTooltip.horizontal!=t.horizontal||this.positionTooltip.vertical!=t.vertical)this.isCollision=!0,t=$.extend(!0,{},this.positionTooltip);else if(this.isCollision=!1,$(this.tooltip).css({top:i.top+"px",left:i.left+"px",position:"absolute",right:"auto",bottom:"auto"}),e.stem=$.extend(!0,{},this.positionTooltip),this.model.showShadow&&this._shadowEffect(this.model.showShadow,e),this.model.isBalloon&&this._adjustArrow(e),this._showTooltip(),this.model.associate==ej.Tooltip.Associate.MouseEnter&&(this.isTrack=!1),this.model.associate==ej.Tooltip.Associate.MouseFollow&&this.triggerEvents("tracking",{position:this.model.position,event:n}))return},t.prototype._axisPosition=function(){var i=$.extend(!0,{},this.model.position),r,u,n,t;typeof this.model.position.target.horizontal=="number"&&(r=this.model.position.target.horizontal.toString());typeof this.model.position.target.vertical=="number"&&(u=this.model.position.target.vertical.toString());n=parseInt(r);t=parseInt(u);ej.isNullOrUndefined(this.tip)||$(this.tip).css({display:"none"});this.model.showShadow&&this._shadowEffect(this.model.showShadow,i);this.model.isBalloon&&this._adjustArrow(i);isFinite(n)&&isFinite(t)&&$(this.tooltip).css({top:t,left:n,position:"absolute"})},t.prototype._tooltipPosition=function(n){var u=0,t=$.extend(!0,{},n.stem),r=$.extend(!0,{},n.target),i=$.extend(!0,{},this.targetPos),o=t.vertical==="top"||t.vertical==="bottom"?5+this.tipSize.width/2:0,s=t.horizontal==="right"||t.horizontal==="left"?10+this.tipSize.width/2:0,u=this.model.isBalloon?t.horizontal!=="center"?this.model.tip.size.height:t.vertical!=="center"?this.model.tip.size.height:0:0,f=this.model.tip.adjust.xValue!=0?this.model.tip.adjust.xValue:this.model.isBalloon?0:2,e=this.model.tip.adjust.yValue!=0?this.model.tip.adjust.yValue:this.model.isBalloon?0:2;i.left+=r.horizontal==="right"?this.targetPos.width:r.horizontal==="left"?0:this.targetPos.width/2;i.top+=r.vertical==="bottom"?this.targetPos.height:r.vertical==="top"?0:this.targetPos.height/2;i.left+=t.horizontal==="right"?-this.tooltipPos.width:t.horizontal==="left"?0:-(this.tooltipPos.width/2);i.top+=t.vertical==="bottom"?-this.tooltipPos.height:t.vertical==="top"?0:-(this.tooltipPos.height/2);i.left+=r.horizontal!=="center"?t.horizontal==="right"?-u:t.horizontal==="left"?u:0:t.vertical==="center"?t.horizontal==="right"?-u:t.horizontal==="left"?u:0:0;i.top+=r.horizontal==="center"?t.vertical==="bottom"?-u:t.vertical==="top"?u:0:t.horizontal==="center"?t.vertical==="bottom"?-u:t.vertical==="top"?u:0:0;i.left+=r.horizontal==="center"&&t.vertical!=="center"?t.horizontal==="right"?s:t.horizontal==="left"?-s:0:0;i.top+=r.horizontal!=="center"&&t.horizontal!=="center"?t.vertical==="top"?-o:t.vertical==="bottom"?o:0:0;i.left+=r.horizontal!=="center"?t.horizontal==="right"?-f:t.horizontal==="left"?f:0:t.vertical==="center"?t.horizontal==="right"?-f:t.horizontal==="left"?f:0:0;i.top+=r.horizontal==="center"?t.vertical==="bottom"?-e:t.vertical==="top"?e:0:t.horizontal==="center"?t.vertical==="bottom"?-e:t.vertical==="top"?e:0:0;this.tooltipPos.left=i.left;this.tooltipPos.top=i.top;this.model.collision===ej.Tooltip.Collision.None&&(this.model.isBalloon&&this._adjustArrow(n),this._shadowEffect(this.model.showShadow,n),$(this.tooltip).css({top:i.top+"px",left:i.left+"px",position:"absolute"}))},t.prototype._calcCollision=function(n,t){var n=$.extend(!0,{},n),i=$.extend(!0,{},n),o=this.model.tip.size.height,f=!0,r=this.model.containment!="body"?$(t).offset().left-$(this.model.containment).offset().left:$(t).offset().left,u=this.model.containment!="body"?$(t).offset().top-$(this.model.containment).offset().top:$(t).offset().top,e={topSpace:u,rightSpace:this.containerSize.width-(r+this.targetPos.width),bottomSpace:this.containerSize.height-(u+this.targetPos.height),leftSpace:r,centerRight:this.containerSize.width-(r+this.targetPos.width/2),centerLeft:r+this.targetPos.width/2,centerTop:u+this.targetPos.height/2,centerBottom:this.containerSize.height-(u+this.targetPos.height/2),tooltipWidth:this.tooltipPos.width+o,tooltipHeight:this.tooltipPos.height+o};if(this.model.collision===ej.Tooltip.Collision.Fit)this._collisionFit(n,e);else{while(f)i=this._collisionFlip(i,e),i.target.horizontal!=n.target.horizontal||i.target.vertical!=n.target.vertical||i.stem.horizontal!=n.stem.horizontal||i.stem.vertical!=n.stem.vertical?(this._tooltipPosition(i),n=$.extend(!0,{},i)):f=!1;f||(this.model.collision==ej.Tooltip.Collision.FlipFit?this._collisionFit(i,e):(this._adjustArrow(i),this._shadowEffect(this.model.showShadow,i),$(this.tooltip).css({top:this.tooltipPos.top+"px",left:this.tooltipPos.left+"px",position:"absolute"})))}},t.prototype._collisionFlip=function(n,t){var r=$.extend(!0,{},this.tooltipPos),i=$.extend(!0,{},n),e=$(this.model.containment).scrollLeft(),o=$(this.model.containment).scrollTop(),u=this.containerSize.left,f=this.containerSize.top;return(r.left+r.width>u+this.containerSize.width+e||r.left<u)&&(n.target.horizontal!="center"?i.target.horizontal=t.leftSpace>=t.tooltipWidth?"left":t.rightSpace>=t.tooltipWidth?"right":"center":i.stem.horizontal=t.centerLeft>=t.tooltipWidth?"right":t.centerRight>=t.tooltipWidth?"left":"center"),r.top<f&&(i.target.vertical=t.bottomSpace>=t.tooltipHeight?"bottom":"center"),r.top+r.height>this.containerSize.height+o+f&&(i.target.vertical=t.topSpace>=t.tooltipHeight?"top":"center"),(i.target.horizontal!=n.target.horizontal||i.target.vertical!=n.target.vertical)&&(i.stem.horizontal=i.target.horizontal=="center"?t.centerLeft>=t.tooltipWidth?"right":t.centerRight>=t.tooltipWidth?"left":"center":i.target.horizontal=="right"?"left":"right"),(i.target.vertical!=n.target.vertical||i.target.horizontal!=n.target.horizontal)&&(i.stem.vertical=i.target.vertical=="center"?t.centerTop>=t.tooltipHeight?"bottom":t.centerBottom>=t.tooltipHeight?"top":t.centerTop>t.centerBottom?"bottom":"top":i.target.vertical=="top"?"bottom":"top"),i},t.prototype._collisionFit=function(n,t){var i=$.extend(!0,{},this.tooltipPos),o=!1,s=!1,f=1,e=1,c=null,l=$(this.model.containment).scrollLeft(),h,r,u,a,v;h=this.model.containment=="body"?document.documentElement.scrollTop||document.body.scrollTop:$(this.model.containment).scrollTop();r=this.containerSize.left;u=this.containerSize.top;(i.left<r||i.left+i.width>this.containerSize.width+l+r)&&(f=i.left<r?r:i.left+i.width>this.containerSize.width+l+r?i.left-(i.left+i.width-(this.containerSize.width+r)):1,o=!0);(i.top<u||i.top+i.height>this.containerSize.height+h+u)&&(e=i.top<u?u:i.top+i.height>this.containerSize.height+h+u?i.top-(i.top+i.height-(this.containerSize.height+u)):1,s=!0);$(this.tooltip).css({top:e!=1?e+"px":i.top+"px",left:f!=1?f+"px":i.left+"px",position:"absolute"});this._adjustArrow(n);c={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:$(this.tip).css("display")};this.tooltipPos.top=e=e!=1?e:i.top;this.tooltipPos.left=f=f!=1?f:i.left;a=$(this.tooltip).width();v=$(this.tooltip).height();(o||s&&c.display!="none")&&(this.model.isBalloon&&(o&&(this.arrowValue.left=this._horizontalAdjustment(n,t)),s&&(this.arrowValue.top=this._verticalAdjustment(n,t))),this.arrowValue.left==-this.model.tip.size.height||this.arrowValue.left==a?$(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"block"}):this.arrowValue.top==-this.model.tip.size.height||this.arrowValue.top==v?$(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"block"}):$(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"none"}));this._shadowEffect(this.model.showShadow,n)},t.prototype._horizontalAdjustment=function(n,t){var r={left:this.arrowValue.left,top:this.arrowValue.top},u,i;return $(this.tooltip).css({display:"block"}),u=n.target.horizontal!="center"?this.model.tip.size.height:this.model.tip.size.height,i=n.target.horizontal!="center"&&n.stem.horizontal=="left"?$(this.tip).offset().left:n.target.horizontal!="center"&&n.stem.horizontal=="right"?$(this.tip).offset().left+u:$(this.tip).offset().left,$(this.tooltip).css({display:"none"}),i>t.leftSpace&&i+u<t.leftSpace+this.targetPos.width?r.left:((i>t.leftSpace+this.targetPos.width||i<t.leftSpace)&&(r.left=t.leftSpace+this.targetPos.width/2-parseInt(this.tooltipPos.left.toString())),r.left)},t.prototype._verticalAdjustment=function(n,t){var r={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:this.arrowValue.display},u,i;return $(this.tooltip).css({display:"block"}),u=n.target.horizontal!="center"?this.model.tip.size.height:this.model.tip.size.height,i=n.target.horizontal=="center"&&n.stem.vertical=="top"?$(this.tip).offset().top:$(this.tip).offset().top+u,$(this.tooltip).css({display:"none"}),i>t.topSpace&&i<t.topSpace+this.targetPos.height?r.top:((i<t.topSpace||i+u>t.topSpace+this.targetPos.height)&&(r.top=t.topSpace+this.targetPos.height/2-parseInt(this.tooltipPos.top.toString())),r.top)},t.prototype._createHeader=function(){this.model.title!=null&&(ej.isNullOrUndefined(this.tooltipTitle)&&this._createTitle(),ej.isNullOrUndefined(this.tooltipContent)?$(this.tooltipHeader).appendTo(this.tooltipInter).addClass("e-tooltipHeader"):$(this.tooltipHeader).insertBefore(this.tooltipContent).addClass("e-tooltipHeader"));this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&this._iconRender()},t.prototype._hideTooltip=function(){var n;if(this._isHidden=!0,n=this.model.animation.speed!=0?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,this.model.enabled==!0&&$(this.tooltip).css("display")=="block"){if(this.triggerEvents("beforeClose",{}))return;if(this.model.animation.effect==ej.Tooltip.Effect.Fade?$(this.tooltip).fadeOut(n):this.model.animation.effect==ej.Tooltip.Effect.Slide?$(this.tooltip).slideUp(n):$(this.tooltip).css({display:"none"}),$(this.tooltip).css("display")=="none"&&$(this.tooltip).attr("aria-hidden","true").removeClass("e-customAnimation"),this.triggerEvents("close",{}))return}},t.prototype._showTooltip=function(){var n,t;this._isHidden&&(n=this.model.animation.speed!=0?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,this._isHidden=!1,$(this.tooltip).css("display")=="none"&&this.model.enabled==!0&&(this.model.animation.effect==ej.Tooltip.Effect.Fade?$(this.tooltip).fadeIn(n):this.model.animation.effect==ej.Tooltip.Effect.Slide?$(this.tooltip).slideDown(n):$(this.tooltip).css({display:"block"}),$(this.tooltip).css("display")=="block"&&($(this.tooltip).attr("aria-hidden","false").css({zIndex:ej.getMaxZindex()+1}),this.model.animation.effect==ej.Tooltip.Effect.None&&$(this.tooltip).addClass("e-customAnimation"),t=this._getScrollableParents(),this._on(t,"scroll",this._hideTooltip)),this.triggerEvents("open",{})))},t.prototype._getScrollableParents=function(){return $(this.element).parentsUntil("html").filter(function(){return $(this).css("overflow")!="visible"}).add($(window))},t.prototype._tooltipAuto=function(){var n=this;this.timer=setTimeout(function(){n._hideTooltip()},n.model.autoCloseTimeout)},t.prototype._beforeOpenTooltip=function(n){this.positionTooltip=$.extend(!0,{},this.model.position.stem);this.positionTarget=$.extend(!0,{},this.model.position.target);this.targetElement=this.element;ej.isNullOrUndefined(this.model.target)||ej.isNullOrUndefined($(n.currentTarget).attr("data-content"))||(this.model.content=$(n.currentTarget).attr("data-content"),this._setContent(this.model.content))},t.prototype._targetHover=function(n){if(this.isTrack=!0,this.model.enabled)if(this._isHidden||(ej.browserInfo().name=="msie"||ej.browserInfo().name=="edge")&&this.model.associate==ej.Tooltip.Associate.MouseFollow){if(this.tooltip.stop(!0,!0),this.triggerEvents("beforeOpen",{event:n})){this._isCancel=!0;return}this._isCancel=!1;this._beforeOpenTooltip(n);this.model.associate!=ej.Tooltip.Associate.MouseEnter&&this.model.associate!=ej.Tooltip.Associate.MouseFollow?(ej.isNullOrUndefined(this.model.target)?this._positionElement(this.element):this._positionElement(n.currentTarget),clearTimeout(this.timer),this._showTooltip(),this.model.closeMode==ej.Tooltip.CloseMode.Auto&&this._tooltipAuto(),n.type=="click"?this.triggerEvents("click",{event:n}):this.triggerEvents("hover",{event:n})):this.isTrack=!0}else ej.isNullOrUndefined(this.model.target)||this._positionElement(n.currentTarget)},t.prototype._onMouseOut=function(){this.model.enabled&&!this._isHidden&&(this.model.closeMode==ej.Tooltip.CloseMode.None&&this._hideTooltip(),clearTimeout(this.mouseTimer));this.isTrack=!1},t.prototype._onTooltipMouseEnter=function(){var n=this;this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&$(n.tooltip).css({display:"block"})},t.prototype._onTooltipMouseLeave=function(){var n=this;this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&n.model.closeMode==ej.Tooltip.CloseMode.None&&$(n.tooltip).css({display:"none"})},t.prototype._docTouchEndHandler=function(n){$(n.target).closest(".e-tooltip").length||this.model.closeMode!=ej.Tooltip.CloseMode.None||this._hideTooltip()},t.prototype._keyDown=function(n){var t=n.keyCode?n.keyCode:n.which?n.which:n.charCode;if(this.model.enabled)switch(t){case 27:n.preventDefault();this._hideTooltip()}},t}(ej.WidgetBase);window.ej.widget("ejTooltip","ej.Tooltip",new ejTooltip);window.ejTooltip=null;ej.Tooltip.CloseMode={Auto:"auto",None:"none",Sticky:"sticky"};ej.Tooltip.Effect={Slide:"slide",Fade:"fade",None:"none"};ej.Tooltip.Trigger={Hover:"hover",Click:"click",Focus:"focus"};ej.Tooltip.Collision={Flip:"flip",FlipFit:"flipfit",None:"none",Fit:"fit"};ej.Tooltip.Associate={Window:"window",MouseFollow:"mousefollow",MouseEnter:"mouseenter",Target:"target",Axis:"axis"},function(n){var u=function(){function n(n,t){this.formatInfo=new o;this._nodeCollection=[];this._iterationStatus=!1;this.filterNode=["div","p","h1","h2","h3","h4","h5","h6","address","applet","blockquote","button","center","dd","dir","dl","dt","fieldset","form","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","script","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"];this.advanceFilterNode=["img","video","table","tbody","tr","td","th"];this.indentFilter=["img","video"];this._junkSpanNodes=[];this.currentDocument=n;this.currentWindow=t;this._rangeExtract=new s(this.currentDocument);this._bindEvent()}return n.prototype._bindEvent=function(){$(this.currentDocument.body).on("keydown",$.proxy(this._editorKeyUpEvent,this))},n.prototype._editorKeyUpEvent=function(n){if(this._junkContentStatus){var t=this._getRangy(this.currentWindow,this.currentDocument),i=t.startContainer,r=t.startOffset;!n.shiftKey&&n.which>=37&&n.which<=40&&i.nodeType==3&&(this._junkContentStatus=!1,this._iterateCompleteNode(i,n,r))}},n.prototype._iterateCompleteNode=function(n,t,i){var r=n.data.length;this._junkSpanNodes=[];this._removeJunkContent(this.currentDocument.body);this._collectJunkSpanNodes(this.currentDocument.body);this._removeJunkSpanNodes();r>n.data.length&&i--;n.data||$(n).remove();n.data.trim()&&this._updateCursor(n,i)},n.prototype._collectJunkSpanNodes=function(n){var t=n;if($(t).is("span")&&!$(t).attr("style")&&this._junkSpanNodes.push(t),t=t.firstChild)do $(t).is("span")&&!$(t).attr("style")&&this._junkSpanNodes.push(t),this._collectJunkSpanNodes(t);while(t=t.nextSibling)},n.prototype._removeJunkSpanNodes=function(){for(var n;n=this._junkSpanNodes.shift();)n.childNodes.length?$(n).replaceWith(n.childNodes):$(n).remove()},n.prototype._removeJunkContent=function(n){var t=n;if(t.nodeType==3&&this._removeCursorText(t),t=t.firstChild)do t.nodeType==3?this._removeCursorText(t):this._removeJunkContent(t);while(t=t.nextSibling)},n.prototype._removeCursorText=function(n){n.data=n.data.replace(String.fromCharCode(65279),"")},n.prototype.focus=function(){var n=this;setTimeout(function(){var t=ej.browserInfo();t.name=="webkit"?n.currentWindow.focus():n.currentWindow.document.body.focus()},100)},n.prototype._justifyContent=function(n){this._backUpRange(this.currentDocument,this.currentWindow);this._getModifedRange(this._getRangy(this.currentWindow,this.currentDocument));this._onApplyjustify(n,this.currentDocument,this.currentWindow);this._resetRange(this.currentDocument,this.currentWindow)},n.prototype._applyFormateBlock=function(n){var t=this._getRangy(this.currentWindow,this.currentDocument);this._backUpRange(this.currentDocument,this.currentWindow);this._applyChanges(n,this.currentDocument,this.currentWindow);this._resetRange(this.currentDocument,this.currentWindow);this._selectionRange=this._getRangy(this.currentWindow,this.currentDocument)},n.prototype._applyList=function(n,t){this._backUpRange(this.currentDocument,this.currentWindow);this._getModifedRange(this._getRangy(this.currentWindow,this.currentDocument));this._applyOrderedList(n.toLowerCase()=="orderlist"?"ol":"ul",this.currentDocument,this.currentWindow,t);this._resetRange(this.currentDocument,this.currentWindow)},n.prototype._applyIndent=function(n){this._backUpRange(this.currentDocument,this.currentWindow);this._getModifedRange(this._getRangy(this.currentWindow,this.currentDocument));n?this._onApplyIndent(this.currentDocument,this.currentWindow):this._onApplyDecreaseIndent(this.currentDocument,this.currentWindow);this._resetRange(this.currentDocument,this.currentWindow)},n.prototype._getRangy=function(n,t){if(n.getSelection()&&n.getSelection().rangeCount>0)return n.getSelection().getRangeAt(0);var i;try{i=n.document.createRange();i.setStart(n.document.body,0);i.setEnd(n.document.body,0)}catch(r){i=t.createRange();i.setStart(t.body,0);i.setEnd(t.body,0)}return i},n.prototype._getexactSelectedNode=function(n,t){function e(n){if(n.nodeType==3&&($.trim(n.nodeValue)!=""||n.nodeValue=="ï»¿"||$.trim(n.nodeValue)==""&&n.nextSibling==f[0]))i.push(n);else if(n.nodeValue&&n.nodeName!="#comment"&&n.nodeValue.trim()==""&&r.range.endContainer.parentNode.nextSibling!=r._next)$.inArray(n.previousElementSibling,u)<0&&u.push(n.previousElementSibling);else if((n.nodeName.toLowerCase()=="br"||$.inArray(n.nodeName.toLowerCase(),r.filterNode)<0)&&$.inArray(n.parentNode,i)<0&&n.nodeName.toLowerCase()!="body"&&$.inArray(n.nodeName.toLowerCase(),r.advanceFilterNode)<0&&!ej.isNullOrUndefined(i[i.length-1])&&i[i.length-1].parentNode!=n.parentNode&&n.previousSibling&&n.previousSibling.parentNode!=n.parentNode)i.push(n.parentNode);else if($.inArray(n.nodeName.toLowerCase(),r.advanceFilterNode)>=0&&ej.isNullOrUndefined(n.firstChild))i.push(n);else for(n=n.firstChild;n;)e(n),n=n.nextSibling}var i=[],u=[],f,r;return this._parentDoc=t,f=$(this._parentDoc.body).find("span#startRange"),r=this,this._generateRange(n),this._traverse(e),i},n.prototype._getStartEndElement=function(n,t){if(this._isAncestor(t,n))while(n&&n.parentNode!=t)n=n.parentNode;return n},n.prototype._generateRange=function(n){var t=n.commonAncestorContainer;this._next=n.startContainer==t&&!this._isTextNode(n.startContainer)?n.startContainer.childNodes[n.startOffset]:this._getStartEndElement(n.startContainer,t);this._end=n.endContainer==t&&!this._isTextNode(n.endContainer)?n.endContainer.childNodes[n.endOffset]:this._getStartEndElement(n.endContainer,t).nodeName.toLowerCase()!="body"&&this._getStartEndElement(n.endContainer,t).nextSibling},n.prototype._traverse=function(n){function u(){return t._next!=(t._isTextNode(t.range.endContainer)?t.range.endContainer.parentNode.nextSibling:t.range.endContainer.nextElementSibling)&&t.range.endContainer.parentNode.nextSibling!=t._next?(t._current=t._next,t._next=t._current&&t._current.nextSibling!=$(t._parentDoc.body).find("span#endRange")[0]&&t._current.nextSibling!=(ej.isNullOrUndefined(t._end)?t.range.endContainer.nextSibling:t._end)?t._current.nextSibling:null,t._current):null}for(var t=this,r,i;r=u();)if(t._hasSubNodes())t._getSubtree(t._getRangy(t.currentWindow,t.currentDocument)),t._traverse(n);else{if(i=r,t.range.startContainer.nodeName.toLowerCase()!="body"&&t._next==null&&i!=t.range.endContainer)while(ej.isNullOrUndefined(t._next)&&!ej.isNullOrUndefined(i))i=i.parentNode,ej.isNullOrUndefined(i)||t._current.nextSibling==$(t._parentDoc.body).find("span#endRange")[0]||(t._next=i.nextSibling);n(r)}return r},n.prototype._hasSubNodes=function(){return!this._isTextNode(this._current)&&(this._isAncestorItself(this._current,this.range.startContainer)||this._isAncestorItself(this._current,this.range.endContainer))},n.prototype._isTextNode=function(n){return n&&n.nodeValue!==null&&n.data!==null},n.prototype._isAncestor=function(n,t){try{return!this._isTextNode(n)&&($.contains(n,this._isTextNode(t)?t.parentNode:t)||t.parentNode==n)}catch(i){return!1}},n.prototype._isAncestorItself=function(n,t){return this._isAncestor(n,t)||n==t},n.prototype._getSubtree=function(){var n=this,t=n.range.cloneRange();return t.selectNodeContents(n._current),n._isAncestorItself(n._current,n.range.startContainer)&&t.setStart(n.range.startContainer,n.range.startOffset),n._isAncestorItself(n._current,n.range.endContainer)&&t.setEnd(n.range.endContainer,n.range.endOffset),this._generateRange(t)},n.prototype._getModifedRange=function(n){if(n.endOffset==0&&n.startContainer!=n.endContainer){var t=n.endContainer;do t=ej.isNullOrUndefined(n.endContainer.previousSibling)?t.parentNode:t;while(ej.isNullOrUndefined(t.previousSibling));this._isTextNode(t.previousSibling)&&$.trim(t.previousSibling.textContent).length!=0?n.setEnd(t.previousSibling,t.previousSibling.childNodes.length):n.setEnd(t.previousSibling,t.previousSibling.childNodes.length)}},n.prototype._getSelectedParent=function(n){for(var r=[],i=n,t=0;t<i.length;t++){if(this._isTextNode(i[t])){while(i[t]&&i[t].parentNode&&i[t].parentNode.nodeName.toLowerCase()!="body"&&$.inArray(i[t].parentNode.nodeName.toLowerCase(),this.filterNode)<0)i[t]=i[t].parentNode;i[t].parentNode.nodeName.toLowerCase()=="body"&&r.push(this._updateParent(i[t]))}i[t]&&i[t].parentNode&&i[t].parentNode.nodeName.toLowerCase()!="body"&&$.inArray(i[t].parentNode,r)<0&&(i[t].parentNode.nodeName.toLowerCase()!="body"&&i[t].nodeName.toLowerCase()!="img"&&i[t].nodeName.toLowerCase()!="video"?r.push(i[t].parentNode):r.push(i[t]))}return r},n.prototype._updateParent=function(n){for(var i=[n],t=n,u,f,r=document.createElement("div");t=t.previousSibling;)if($.inArray(t.nodeName.toLowerCase(),this.filterNode)!=-1){u=t;break}else i.push(t);for(i=i.reverse(),t=n;t=t.nextSibling;)if($.inArray(t.nodeName.toLowerCase(),this.filterNode)!=-1){f=t;break}else i.push(t);return $(i).appendTo(r),u?$(r).insertAfter(u):f?$(r).insertBefore(f):$(r).appendTo(this.currentDocument.body),r},n.prototype._applyChanges=function(n,t,i){var h,o;this.range=this._getRangy(i,t);var y=this._getexactSelectedNode(this.range,t),l=y.slice(),u=document.createElement(n.substring(n.indexOf("<")+1,n.indexOf(">")));if(l.length==0&&this.range.startContainer.nodeName.toLowerCase()=="body"&&this.range.endContainer.nodeName.toLowerCase()=="body"&&this.range.commonAncestorContainer.nodeName.toLowerCase()=="body"&&this._parentDoc.body.innerHTML=="")this.focus(),u.innerHTML="&nbsp;",this._parentDoc.body.innerHTML=u.outerHTML;else{h=this._getSelectedParent(l);o=[];o.push(l[0]);for(var a=this._getSelectedParent(o)[0],f=[],e=0,c=document.createElement("div"),d=document.createElement("div"),g=this._getSelectedParent(o)[0],p,r,w,b,v,k,s=0;s<h.length;s++){if(o=[],o.push(h[s]),a=this._getSelectedParent(o)[0],$(h[s]).attr("style")&&$(u).attr("style",$(h[s]).attr("style")),$.inArray(a,f)>=0||(f.push(a),u.innerHTML.length!=0&&(f[e].nodeName.toLowerCase()!="td"&&f[e].nodeName.toLowerCase()!="tr"&&f[e].nodeName.toLowerCase()!="tbody"&&f[e].nodeName.toLowerCase()!="li"&&f[e].nodeName.toLowerCase()!="body"?$(f[e]).replaceWith(u.outerHTML):f[e].nodeName.toLowerCase()!="tr"&&f[e].nodeName.toLowerCase()!="tbody"&&($(f[e]).prepend("<div><\/div>"),c.innerHTML=u.outerHTML,f[e].replaceChild(c.firstChild,f[e].firstChild)),e++),u.innerHTML="",c.innerHTML=""),r=h[s],b=!1,ej.isNullOrUndefined(r.parentNode)||(w=r.nodeName.toLowerCase()=="li"),!ej.isNullOrUndefined(r)){for(v=r;v.childNodes.length!=0;)if($.inArray(r.firstChild.nodeName.toLowerCase(),this.filterNode)<0)while(r.firstChild&&$.inArray(r.firstChild.nodeName.toLowerCase(),this.filterNode)<0)$(u).append(v.childNodes[0]);else break;k=r.previousSibling}p=r.parentNode;u.innerHTML.length!=0&&(r.nodeName.toLowerCase()!="td"&&r.nodeName.toLowerCase()!="tr"&&r.nodeName.toLowerCase()!="tbody"&&r.nodeName.toLowerCase()!="li"&&r.nodeName.toLowerCase()!="body"?$(r).replaceWith(u.outerHTML):r.nodeName.toLowerCase()!="tr"&&r.nodeName.toLowerCase()!="tbody"&&($(r).prepend("<div><\/div>"),c.innerHTML=u.outerHTML,r.replaceChild(c.firstChild,r.firstChild)),e++);u.innerHTML="";c.innerHTML="";$(u).removeAttr("style")}}},n.prototype._validateIndent=function(n){var t=!1;do $(n).attr("style")&&parseInt($(n).css("margin-left"))>0&&(t=!0);while((n=n.parentNode)&&!$(n).is("body"));return t},n.prototype._validateFontSize=function(n){var t=parseInt($(n.nodeType==3?n.parentNode:n).css("font-size"));return Math.round(t*(3/4))+"pt"},n.prototype._onApplyIndent=function(n,t){var i;this.range=this._getRangy(t,n);var e=this._getexactSelectedNode(this.range,n),u,f=e.slice(),r=this._getSelectedParent(f);if(f.length!=0||this.range.startContainer.nodeName.toLowerCase()!="body"||this.range.endContainer.nodeName.toLowerCase()!="body"||this.range.commonAncestorContainer.nodeName.toLowerCase()!="body"||this._parentDoc.body.innerHTML!="")for(i=0;i<=r.length-1;i++)r[i].nodeName.toLowerCase()=="td"&&($(r[i]).append($(u=document.createElement("p")).append(r[i].childNodes)),r[i]=u),r[i].nodeName.toLowerCase()!="li"?$(r[i]).css("margin-left",40+parseInt($(r[i]).css("margin-left"))+"px"):$(r[i]).prev().length==0?$(r[i].parentNode).css("margin-left",parseInt($(r[i].parentNode).css("margin-left"))+40+"px"):$(r[i]).css("margin-left",parseInt($(r[i]).css("margin-left"))+40+"px")},n.prototype._onApplyDecreaseIndent=function(n,t){var i;this.range=this._getRangy(t,n);var u=this._getexactSelectedNode(this.range,n),f=u.slice(),r=this._getSelectedParent(f);for(i=0;i<=r.length-1;i++)parseInt($(r[i]).css("margin-left"))>=40&&r[i].nodeName.toLowerCase()!="li"?$(r[i]).css("margin-left",parseInt($(r[i]).css("margin-left"))-40):$(r[i]).prev().length==0&&parseInt($(r[i].parentNode).css("margin-left"))>=40?$(r[i].parentNode).css("margin-left",parseInt($(r[i].parentNode).css("margin-left"))-40):parseInt($(r[i]).css("margin-left"))>=40&&$(r[i]).css("margin-left",parseInt($(r[i]).css("margin-left"))-40)},n.prototype._getNodeName=function(n){return this._isTextNode(n)?"#text":n.nodeName.toLowerCase()},n.prototype._onApplyjustify=function(n,t,i){var h,u,r,f,s,e,o;for(this.range=this._getRangy(i,t),h=this._getexactSelectedNode(this.range,t),u=this._getSelectedParent(h),r=0;r<u.length;r++)if(f=document.createElement("div"),u[r].nodeName.toLowerCase()=="li"){for(s=$(u[r]).children(),e=0,o=0;o<s.length;o++)$.inArray(this._getNodeName(s[o]),this.filterNode)>0&&e++;if(e>0)while(u[r].childNodes.length>0)if(this._isTextNode(u[r].childNodes[0])||$.inArray(this._getNodeName(u[r].childNodes[0]),this.filterNode)<0)f.appendChild(u[r].childNodes[0]);else break;else $(u[r]).css("text-align",n);f.childNodes.length>0&&($(f).css("text-align",n),u[r].insertBefore(f,u[r].childNodes[0]),e=0)}else $(u[r]).css("text-align",n)},n.prototype._getParentNodeCollection=function(n){var t=n,i=t.parentNode.nodeName.toLowerCase(),r=[];for(r.push(t);i!="body"&&(i=="li"||i=="ol"||i=="ul");)t=t.parentNode,i=t.parentNode.nodeName.toLowerCase(),r.push(t);return r},n.prototype._generateListParentTag=function(n,t,i){var r=document.createElement(n);return $(r).css("list-style-type",i),t.nodeName.toLowerCase()!="li"?$(r).insertBefore(t):$(r).insertBefore(t.parentNode),r},n.prototype._applyOrderedList=function(n,t,i,r){var e,w,at,l,d,g,nt,ot,a,rt;this.range=this._getRangy(i,t);var ut=this._getexactSelectedNode(this.range,t),st=document.createElement(n),tt=document.createElement(n),f=this._getSelectedParent(ut),ft=this._getParentNodeCollection(f[0]),vt=document.createElement("p"),s,y,c,h,o,v,u,p=ft[ft.length-1];for(r!="none"&&(h=this._generateListParentTag(n,f[0],r)),e=0;e<=f.length-1;e++)if(c=document.createElement("li"),f[e].parentNode.nodeName.toLowerCase()=="li"&&(f[e]=f[e].parentNode),r=="none"){if($(f[e]).closest("ul,ol").length<1)continue;if($(f[e]).find("ol").length!=0||$(f[e]).find("ul").length!=0){s=$(f[e]).parents(n).first();var ht=s.parents("li:last"),ct=s.parents("li:last").prevAll(),lt=s.parents("li:last").nextAll();u=$(f[e]).parents("li:last")[0]}else{s=$(f[e]);var ht=s,ct=s.prevAll(),lt=s.nextAll();u=$(f[e])[0]}y=$(f[e]).parents(n).last();w=0;ct.length!=0&&($(tt).append(ht),$(tt).append(lt),$(tt).insertAfter(y));at=document.createElement("p");l=o=document.createElement("li");st.appendChild(l);for(var b=y,it=[],et=!1,k;u;){if($.inArray(u,f)>=0||$.inArray(u.firstChild,f)>=0||$.inArray(u.firstChild,ut)>=0){for(w==0&&l.firstChild&&l.firstChild.innerHTML!=""&&(y.append(l),l=o=document.createElement("li")),k=document.createElement("p");u.firstChild&&$.inArray(u.firstChild.nodeName.toLowerCase(),this.filterNode)<0;)k.appendChild(u.firstChild),et=!0;if(et&&(w++,$(k).insertAfter(b),b=$(k),$(u).children().length==0&&it.push(u)),w==f.length){for(d=document.createElement(n),$(u).children().length!=0?$(d).append($(u).parents("li:last").nextAll()):$(d).append($(u).nextAll()),u.nodeName.toLowerCase()=="ol"||u.nodeName.toLowerCase()=="ul"?$(u).insertAfter(b):u.nodeName.toLowerCase()=="li"&&(g=document.createElement(n),$(g).append(u),$(g).insertAfter(b),u=g),$(d).insertAfter(u),nt=0;nt<it.length;nt++)for(v=it[nt];v.nodeName.toLowerCase()!="body";)ot=v.parentNode,$(v).remove(),v=ot;e=f.length;break}}if(this._isTextNode(u.firstChild)||u.firstChild&&$.inArray(u.firstChild.nodeName.toLowerCase(),this.filterNode)<0)o.appendChild(u.firstChild),ej.isNullOrUndefined(u.firstChild)&&(u=u.nextSibling);else if(this._isTextNode(u)){if(a=0,rt=u,u=u.nextSibling,ej.isNullOrUndefined(u)){for(u=rt;$(u.parentNode).next().length==0;)u=u.parentNode,a++;a>0&&(u=$(u.parentNode).next()[0])}o.appendChild(rt);o=a!=0||this._isTextNode(u)?this._createElement(u.nodeName.toLowerCase(),this._getParentnodeName(a,o),"after"):this._createElement(u.nodeName.toLowerCase(),o.parentNode,null);a=0}else u.firstChild?(o=this._createElement(u.firstChild.nodeName.toLowerCase(),o,null),u=u.firstChild):u=u.nextSibling}}else f[e].nodeName.toLowerCase()!="li"?$(f[e]).is("h1,h2,h3,h4,h5,h6,p,blockquote")?($(c).append(f[e]),h.appendChild(c)):($(f[e]).attr("style")&&$(c).attr("style",$(f[e]).attr("style")),$(c).append(f[e].childNodes),h.appendChild(c),$(f[e]).remove()):(f[e]=$(f[e]).closest("li"))&&(h=document.createElement(n),$(h).css("list-style-type",r),$(h).append(f[e].parentNode.childNodes),$(f[e].parentNode).replaceWith(h));r!="none"&&p.childNodes.length==0&&(p.nodeName.toLowerCase()=="ol"||p.nodeName.toLowerCase()=="ul")&&$(p).remove()},n.prototype._getParentnodeName=function(n,t){for(var i=t,r=0;r<=n;r++)i=i.parentNode;return i},n.prototype._createElement=function(n,t,i){var r=document.createElement(n);return i!="after"?t.appendChild(r):$(r).insertAfter(t),r},n.prototype._backUpRange=function(n,t){var u=n.createElement("span"),r,i;u.id="startRange";r=n.createElement("span");r.id="endRange";i=this._getRangy(t,n).cloneRange();i.collapse(!1);i.insertNode(r);i=this._getRangy(t,n).cloneRange();i.collapse(!0);i.insertNode(u)},n.prototype._resetRange=function(n,t){var u=$(n.body).find("span#startRange"),i=$(n.body).find("span#endRange"),f=ej.isNullOrUndefined(i[0].previousSibling)?0:this._isTextNode(i[0].previousSibling)?i[0].previousSibling.length:i[0].previousSibling.childNodes.length>0?i[0].previousSibling.childNodes.length:0,r=this._getRangy(t,n);u[0].nextSibling!=i[0]?r.setStart(u[0].nextSibling,0):r.setStart(u[0].nextSibling.nextSibling,0);i[0].previousSibling!=u[0]?ej.isNullOrUndefined(i[0].previousSibling)?r.setEnd(i[0].parentNode,f):r.setEnd(i[0].previousSibling,f):r.setEnd(i[0].nextSibling,0);u.remove();i.remove();this._selectRange(r,n)},n.prototype._selectRange=function(n,t){var i=t.getSelection();i.removeAllRanges();i.addRange(n)},n.prototype._validateFormatData=function(n,t){var r=[],i=n.parentNode,u=n,s=[],e,o;if(i)do s.push(u),((e=this._tagCheck(i,t))||(o=this._styleCheck(i,t)))&&r.push(new f(i,n,e,o));while(!$(i).is("body")&&(u=i)&&(i=i.parentNode));return r},n.prototype._tagCheck=function(n,t){return this.formatInfo.getFormatData(t).Value.tag?$(n).is(this.formatInfo.getFormatData(t).Value.tag):!1},n.prototype._styleCheck=function(n,t){var r,i;return!$(n).is(this.formatInfo.filterNode)&&this.formatInfo.getFormatData(t).Value.css&&n.getAttribute("style")?(i=!0,r=this.formatInfo.getFormatData(t).Value.css.split(";"),$(r).each(function(t,r){r&&n.getAttribute("style").replace(/\s/g,"").indexOf(r)==-1&&(i=!1)}),i):!1},n.prototype._validateFormat=function(n,t){var i=[],r={Info:null,status:null};return t=t.toLowerCase(),$.inArray(t,this.formatInfo.actionList)!=-1&&((i=this._validateFormatData(n,t))&&i.length&&(r.Info=i),r.status=i.length>0),r},n.prototype._CurrentformateStatus=function(n,t){for(var r={Info:null,status:null},u=!0,i=0;i<n.length;i++)r=this._validateFormat(n[i],t),r.status||(u=!1);return u},n.prototype._getSelectNode=function(){return this._rangeExtract.ProcessRange()},n.prototype._getFormatedTagOrder=function(n,t){return n[t].currentNode=this._getNodeOrder(n[t].textNode,n[t].node),t?n.slice(t,t+1):n},n.prototype._getNodeOrder=function(n,t){var i=n,r=[];do r.push(i);while((i=i.parentNode)&&i!=t);return r},n.prototype._splitNode=function(n){for(var t=n,i={rightSide:[],leftSide:[]};t=t.nextSibling;)this._validateCommentNode(t)&&i.rightSide.push(t);for(t=n;t=t.previousSibling;)this._validateCommentNode(t)&&i.leftSide.push(t);return i},n.prototype._validateCommentNode=function(n){return n.nodeType!=8},n.prototype._validateTextNode=function(n){return n.nodeType==3},n.prototype._validateType=function(n){return this._validateTextNode(n)&&n.data.length},n.prototype._formatechildNodes=function(n,t,i){for(var r={rightSide:[],leftSide:[]},f,u=n.length-1;u>=0;u--)r=this._splitNode(n[u]),r.rightSide.length&&$($(i.cloneNode(!1)).append(r.rightSide)).insertAfter(n[u]),f=i,r.leftSide.length&&$($(i.cloneNode(!1)).append(r.leftSide.reverse())).insertBefore(n[u])},n.prototype._removeFormat=function(n,t,i){var r=this._getFormatedTagOrder(n.Info,i),u,f=r[0].currentNode.slice(r[0].currentNode.length-1),o=document.createElement("span"),e;return r[0].currentNode=r[0].currentNode.slice(0,r[0].currentNode.length-1),e=this._splitNode(f[0]),e.rightSide.length&&$($(r[0].node.cloneNode(!1)).append(e.rightSide)).insertAfter(r[0].node),r[0].tag?(this._rangeExtract.cursorBasedCollection&&!r[0].textNode.data.trim().length?$(o).append(f).insertAfter($(r[0].node)):$(f).insertAfter(r[0].node),u=r[0].textNode,this._rangeExtract.cursorBasedCollection&&this._setCursorOnNode(u,r[0].textNode)):(u=$(r[0].node.cloneNode(!1)),u.css(this.formatInfo.getFormatData(t).Value.removeCSS),u[0].getAttribute("style")?$(u.append(f)).insertAfter(r[0].node):$(f).insertAfter(r[0].node),u=f),r[0].currentNode.length&&this._formatechildNodes(r[0].currentNode,t,r[0].node),e.leftSide.length||$(r[0].node).remove(),u[0]?u[0]:u},n.prototype._applyFormat=function(n,t,i){var r=this._splitNode(n),u,e=n,f=document.createElement("span");return r.leftSide.length&&r.leftSide[0].nodeType!=3&&(this._tagCheck(r.leftSide[0],t)||this._compareCSS(r.leftSide[0],i?this.formatInfo.getFormatData(t).Value.css+":"+i+";":this.formatInfo.getFormatData(t).Value.css))?$(r.leftSide[0]).append(n):r.rightSide.length&&r.rightSide[0].nodeType!=3&&(this._tagCheck(r.rightSide[0],t)||this._compareCSS(r.rightSide[0],i?this.formatInfo.getFormatData(t).Value.css+":"+i+";":this.formatInfo.getFormatData(t).Value.css))?$(r.rightSide[0]).prepend(n):r.leftSide.length||r.rightSide.length||!$(n.parentNode).is(this.formatInfo.getFormatData(t).Value.styleParent)?(u=document.createElement(this.formatInfo.getFormatData(t).Value.result),this._rangeExtract.cursorBasedCollection?this._validateTextNode(n)?(!$(u).is("span")&&this._rangeExtract._noContent?$(f).append(u):f=u,u.appendChild(e=document.createTextNode(n.data)),this._rangeExtract.cursorBasedCollection&&this._setCursorOnNode(n,e),$(n).replaceWith(f)):(u.innerHTML="&#65279;",$(f).append(u),n.firstChild&&$(n.firstChild).is("br")?$(f).insertBefore(n.firstChild):$(n).append(f),this._rangeExtract.cursorBasedCollection&&this._setCursorOnNode(n,u.firstChild),e=u):(u.appendChild(e=document.createTextNode(n.data)),$(n).replaceWith(u)),i&&$(u).css(this.formatInfo.getFormatData(t).Value.css,i)):i?$(n.parentNode).css(this.formatInfo.getFormatData(t).Value.css,i):$(n.parentNode).css(this._collectStyleData(this.formatInfo.getFormatData(t).Value.css)),e},n.prototype._setCursorOnNode=function(n,t){this._rangeExtract._cursorData.node==n&&(this._rangeExtract._cursorData.node=t)},n.prototype._compareCSS=function(n,t){return n.getAttribute("style")&&n.getAttribute("style").toLowerCase().trim().replace(/\s/g,"")==t.toLowerCase().trim().replace(/\s/g,"")},n.prototype._collectStyleData=function(n){var i=n.replace(/\s/g,"").split(";"),r={},t;return $(i).each(function(n){var u=i[n];t=u.split(":");t.length>1&&(r[t[0].toLowerCase().trim()]=t[1].toLowerCase().trim())}),r},n.prototype._validateStyleData=function(n,t,i){var r=n.getAttribute("style").split(";"),u=!1;return $(r).each(function(n){var e=r[n],f=e.split(":");if(f[0].toLowerCase().trim()==t.toLowerCase().trim()&&f[1].toLowerCase().trim()==i.toLowerCase().trim())return u=!0,!1}),u},n.prototype._caseConvert=function(n){var i=this._getSelectNode(),u,f,e,t,r;if(i.length&&(i.length!=1||i[0].data.length)){for(r=0;r<i.length;r++)u=i[r],t=document.createTextNode(u.data[this.formatInfo.captionConvert[n]]()),this._rangeExtract._cursorData.node==u&&(this._rangeExtract._cursorData.node=t),u.data&&$(u).replaceWith(t),t&&i.length==1?(f=t)&&(e=t):r==0?f=t:r==i.length-1?e=t:null;f&&e&&this._refreshRange(f,e)}},n.prototype._validateSelectedNode=function(n){return!n.length||n.length==1&&n[0].data&&!n[0].data.length},n.prototype._tagFormatProcess=function(n,t){var u=this._getSelectNode(),c,e,r,i,o,s,f,h;if(!this._validateSelectedNode(u)){for(c=this._CurrentformateStatus(u,n),r={Info:null,status:null},f=0;f<u.length;f++){if(e=u[f],r=this._validateFormat(e,n),i=null,(t||c)&&r.status)for(h=0;h<r.Info.length;h++)i=this._removeFormat(r,n,h);else i=r.status||t?e:this._applyFormat(e,n,null);i&&(u.length==1?(o=i)&&(s=i):f==0?o=i:f==u.length-1?s=i:null)}return o&&s&&this._refreshRange(o,s),this.focus(),{data:r,nodeStatus:c}}},n.prototype._refreshRange=function(n,t){var u=this.currentDocument.createRange(),f=this.currentDocument.getSelection(),i,r;this._rangeExtract&&(i=this._rangeExtract._cursorData.node)&&(r=this._rangeExtract._cursorData.offSet);this._rangeExtract.cursorBasedCollection&&i&&r>-1?(r=this._validateTextNode(i)?r>i.data.length?i.data.length:r:0,i.nodeType!=3||i.data.trim()||(i.data=String.fromCharCode(65279)+i.data,r++),this._updateCursor(i,r)):n&&t&&(n.data&&!n.data.trim()&&n.data.indexOf(String.fromCharCode(65279))==-1&&(n.data=String.fromCharCode(65279)+n.data),t.data&&!t.data.trim()&&t.data.indexOf(String.fromCharCode(65279))==-1&&(t.data=String.fromCharCode(65279)),f.removeAllRanges(),u.setStart(n,0),u.setEnd(t,t.data?t.data.length:0),f.addRange(u));$(this.currentWindow).focus()},n.prototype._updateCursor=function(n,t){var i=this.currentDocument.createRange(),r=this.currentDocument.getSelection();i.setStart(n,t);i.setEnd(n,t);r.removeAllRanges();r.addRange(i)},n.prototype._cssFormatProcess=function(n,t,i){var f=this._getSelectNode(),s,e={Info:null,status:null},r,h,c,u,o;if(!this._validateSelectedNode(f)){for(u=0;u<f.length;u++){if(s=f[u],e=this._validateFormat(s,n),e.status)for(o=0;o<e.Info.length;o++)(i||!this._validateStyleData(e.Info[o].node,this.formatInfo.getFormatData(n).Value.css,t))&&(r=this._removeFormat(e,n,o));i||(r=this._applyFormat(s,n,t));r&&(f.length==1?(h=r)&&(c=r):u==0?h=r:u==f.length-1?c=r:null)}this._refreshRange(h,c);this.focus()}},n.prototype.execCommand=function(n,i){try{switch(n){case t.bold:this._tagFormatProcess("bold",!1);break;case t.italic:this._tagFormatProcess("italic",!1);break;case t.underline:this._tagFormatProcess("underline",!1);break;case t.strikethrough:this._tagFormatProcess("strikethrough",!1);break;case t.superscript:this._tagFormatProcess("subscript",!0);this._tagFormatProcess("superscript",!1);break;case t.subscript:this._tagFormatProcess("superscript",!0);this._tagFormatProcess("subscript",!1);break;case t.fontsize:this._cssFormatProcess("fontsize",i,!1);break;case t.fontname:this._cssFormatProcess("fontname",i,!1);break;case t.forecolor:this._cssFormatProcess("forecolor",i,!1);break;case t.backcolor:this._cssFormatProcess("backcolor",i,!1);break;case t.uppercase:this._caseConvert("uppercase");break;case t.lowercase:this._caseConvert("lowercase");break;case t.indent:this._applyIndent(!0);break;case t.outdent:this._applyIndent(!1);break;case t.justifyleft:this._justifyContent("left");break;case t.justifycenter:this._justifyContent("center");break;case t.justifyright:this._justifyContent("right");break;case t.justifyfull:this._justifyContent("justify");break;case t.formatblock:this._applyFormateBlock(i)}this._junkContentStatus=!0}catch(r){}},n}();n.editorManager=u,function(n){n[n.bold=0]="bold";n[n.italic=1]="italic";n[n.underline=2]="underline";n[n.strikethrough=3]="strikethrough";n[n.superscript=4]="superscript";n[n.subscript=5]="subscript";n[n.fontsize=6]="fontsize";n[n.fontname=7]="fontname";n[n.forecolor=8]="forecolor";n[n.backcolor=9]="backcolor";n[n.uppercase=10]="uppercase";n[n.lowercase=11]="lowercase";n[n.indent=12]="indent";n[n.outdent=13]="outdent";n[n.justifyleft=14]="justifyleft";n[n.justifycenter=15]="justifycenter";n[n.justifyright=16]="justifyright";n[n.justifyfull=17]="justifyfull";n[n.formatblock=18]="formatblock"}(n.execCommand||(n.execCommand={}));var t=n.execCommand,f=function(){function n(n,t,i,r){this.textNode=t;this.node=n;this.css=r;this.tag=i}return n}(),i=function(){function n(n,t,i,r,u){this.tag=n;this.css=t;this.result=i;this.removeCSS=r;this.styleParent=u}return n}(),e=function(){function n(){this.uppercase="toUpperCase";this.lowercase="toLowerCase"}return n}(),r=function(){function n(n,t){this.Key=n;this.Value=t}return n}(),o=function(){function n(){this.filterNode=["div","p","h1","h2","h3","h4","h5","h6","address","applet","blockquote","button","center","dd","dir","dl","dt","fieldset","form","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","script","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"];this.actionList=["bold","italic","underline","strikethrough","superscript","subscript","fontsize","fontname","forecolor","backcolor"];this.captionConvert=new e;this._updateData()}return n.prototype._updateData=function(){var n=Array();n.push(new r("bold",new i("b,strong","font-weight:bold;","b",{"font-weight":""},"span")));n.push(new r("italic",new i("i, cite, em, var, address, dfn","font-style:italic","i",{"font-style":""},"span")));n.push(new r("underline",new i("u,ins","text-decoration:underline;","u",{"text-decoration":""},"span")));n.push(new r("strikethrough",new i("s, strike, del","text-decoration:line-through;","s",{"text-decoration":""},"span")));n.push(new r("superscript",new i("sup","vertical-align:super;font-size:smaller;","sup",{"vertical-align":"","font-size":""},"span")));n.push(new r("subscript",new i("sub","vertical-align:sub;font-size:smaller;","sub",{"vertical-align":"","font-size":""},"span")));n.push(new r("fontsize",new i(null,"font-size","span",{"font-size":""},"span")));n.push(new r("fontname",new i(null,"font-family","span",{"font-family":""},"span")));n.push(new r("forecolor",new i(null,"color","span",{color:""},"span")));n.push(new r("backcolor",new i(null,"background-color","span",{"background-color":""},"span")));this.tempCollection=n},n.prototype.getFormatData=function(n){for(var i,t=0;t<this.tempCollection.length;t++)if(i=this.tempCollection[t],i.Key==n)return this.tempCollection[t]},n}(),s=function(){function n(n){this.exp=/\s/g;this._findStatus={leftSide:null,rightSide:null};this._iterationStatus=!1;this._cursorData={node:null,offSet:null};this._nodeCollection=[];this._traverseData={leftSide:{childNode:"lastChild",sibling:"previousSibling"},rightSide:{childNode:"firstChild",sibling:"nextSibling"}};this._blockNodes=["div","p","h1","h2","h3","h4","h5","h6","address","applet","blockquote","button","center","dd","dir","dl","dt","fieldset","form","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","script","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"];this._noContent=!1;this.nodeCollection={leftSide:[],rightSide:[]};this.currentDocument=n}return n.prototype.ProcessRange=function(){var n=this._getRange();return $(this.currentDocument.body).attr("contenteditable")=="true"&&n&&(this._nodeCollection=[],this._noContent=!1,this._iterationStatus=!1,this._cursorData={node:null,offSet:null},n.startContainer==n.endContainer&&n.startOffset==n.endOffset?(this._collectCursorBasedTextNode(n.startContainer,n.startOffset),this.cursorBasedCollection=!0):(this._collectSelectionBasedTextNode(n),this.cursorBasedCollection=!1)),this._nodeCollection},n.prototype._insertCursor=function(n,t){var r=n.data.substring(0,t),u=n.data.substr(t),i;r.replace(String.fromCharCode(65279),"")&&$(document.createTextNode(r)).insertBefore(n);u.replace(String.fromCharCode(65279),"")&&$(document.createTextNode(u)).insertAfter(n);$(n).replaceWith(i=document.createTextNode(""));this._cursorData={node:i,offSet:0};this._nodeCollection.push(i);this._noContent=!0},n.prototype._collectCursorBasedTextNode=function(n,t){for(var r,f,i,u,c=new RegExp(this.exp),s,h,e,o;f=c.exec(n.data);)n.data.substring(f.index,f.index+1).indexOf(" ")!=-1&&(f.index<t&&(r=f),!u&&t<=f.index&&(u=f));return r&&u?t-(r.index+1)==0||t-(r.index+1)==n.data.substring(r.index+1,u.index).replace("\n","").length?this._insertCursor(n,t):(s=n.data.substring(0,r.index+1),h=n.data.substring(u.index),$(document.createTextNode(s)).insertBefore(n),$(document.createTextNode(h)).insertAfter(n),$(n).replaceWith(i=document.createTextNode(n.data.substring(r.index+1,u.index))),this._cursorData={node:i,offSet:t-(r.index+1)},this._nodeCollection.push(i)):r?(this._collectNodeData(n,!1),e=this._nodeCollection,this._nodeCollection=[],e.length==0&&(t-(r.index+1)==0||t-(r.index+1)==n.data.substring(r.index+1).replace("\n","").length)?this._insertCursor(n,t):(s=n.data.substring(0,r.index+1),$(document.createTextNode(s)).insertBefore(n),$(n).replaceWith(i=document.createTextNode(n.data.substring(r.index+1))),this._cursorData={node:i,offSet:t-(r.index+1)},this._nodeCollection.push(i),this._nodeCollection.concat(e))):u?(this._collectNodeData(n,!0),o=this._nodeCollection,this._nodeCollection=[],o.length==0&&(t==n.data.substring(0,u.index).replace("\n","").length||t==0)?this._insertCursor(n,t):(h=n.data.substring(u.index),$(document.createTextNode(h)).insertAfter(n),$(n).replaceWith(i=document.createTextNode(n.data.substring(0,u.index))),this._cursorData={node:i,offSet:t},this._nodeCollection=o.reverse(),this._nodeCollection.push(i))):n.nodeType!=3?(i=document.createTextNode(""),n.firstChild?$(i).insertBefore(n.firstChild):$(i).appendTo(n),this._nodeCollection.push(i),this._cursorData={node:i,offSet:t},this._noContent=!0):(this._collectNodeData(i=n,!1),e=this._nodeCollection,this._nodeCollection=[],this._collectNodeData(i,!0),o=this._nodeCollection,this._nodeCollection=[],i.data==String.fromCharCode(65279)||o.length==0&&t==0||e.length==0&&i.data.replace(String.fromCharCode(65279),"").replace("\n","").length==t?this._insertCursor(n,t):(this._nodeCollection=o.reverse(),this._nodeCollection.push(i),this._nodeCollection=this._nodeCollection.concat(e),this._cursorData={node:i,offSet:t})),this._nodeCollection},n.prototype._validateContent=function(n,t){for(var e=new RegExp(this.exp),i,r=[],u,f;i=e.exec(n.data);)r.push(i);r.length?(i=r[t=="leftSide"?r.length-1:0],f=t=="leftSide"?i.index+1:i.index,$(u=document.createTextNode(n.data.substring(f))).insertAfter(n),n.data=n.data.substring(0,f),t=="rightSide"&&$.trim(n.data)?this._nodeCollection.push(n):t=="leftSide"&&$.trim(u.data)&&this._nodeCollection.push(u),this._findStatus[t]=!0):this._nodeCollection.push(n)},n.prototype._iterateNodes=function(n,t){if(!this._findStatus[t])if(n.nodeType==3&&n.data)this._validateContent(n,t);else if((n=n[this._traverseData[t].childNode])&&!this._findStatus[t])do n.nodeType==3&&n.data?this._validateContent(n,t):this._iterateNodes(n,t);while((n=n[this._traverseData[t].sibling])&&!this._findStatus[t])},n.prototype._collectNodeData=function(n,t){this._findStatus={leftSide:undefined,rightSide:undefined};var r=this,i=t?"leftSide":"rightSide";do this.nodeCollection=this._splitSiblingNode(n),$(this.nodeCollection[i]).each(function(n,t){r._iterateNodes(t,i)});while(!this._validateBlockType(n.parentNode)&&(n=n.parentNode)&&!this._findStatus[i])},n.prototype._validateBlockType=function(n){return $.inArray(n.tagName.toLowerCase(),this._blockNodes.concat("body"))!=-1},n.prototype._validateTextNode=function(n){return n.nodeType==3},n.prototype._splitSiblingNode=function(n){for(var t=n,i={leftSide:[],rightSide:[]};t=t.nextSibling;)t.tagName&&this._validateBlockType(t)||i.rightSide.push(t);for(t=n;t=t.previousSibling;)t.tagName&&this._validateBlockType(t)||i.leftSide.push(t);return i},n.prototype._getRange=function(){var n=this.currentDocument.getSelection(),t=null;return n.rangeCount&&(t=n.getRangeAt(0)),t},n.prototype._collectSelectionBasedTextNode=function(n){var t,i,f,o,s,e,r=n.startContainer,u=n.endContainer;this._nodeCollection=[];n.startContainer==n.endContainer?this._validateTextNode(n.endContainer)?(n.startOffset&&(t=n.startContainer.data.substr(0,n.startOffset)),n.startContainer.data.length!=n.endOffset&&(i=n.startContainer.data.substr(n.endOffset)),f=n.startContainer.data.substr(n.startOffset,n.endOffset-n.startOffset),t&&$(o=document.createTextNode(t)).insertBefore(n.startContainer),i&&$(s=document.createTextNode(i)).insertAfter(n.startContainer),f&&$(n.startContainer).replaceWith(e=document.createTextNode(f))&&this._nodeCollection.push(e)):this._updateNodeCollection(n.startContainer.nodeName.toLowerCase()=="html"?$(n.startContainer).find("body")[0]:n.startContainer,r,null):(n.startContainer.nodeType==3&&n.startOffset&&(t=n.startContainer.data.substr(0,n.startOffset),i=n.startContainer.data.substr(n.startOffset),$(document.createTextNode(t)).insertBefore(n.startContainer),$(r).replaceWith(r=document.createTextNode(i))),n.endContainer.nodeType==3&&n.endContainer.data.length!=n.endOffset?(i=n.endContainer.data.substr(n.endOffset),t=n.endContainer.data.substr(0,n.endOffset),$(document.createTextNode(i)).insertAfter(n.endContainer),$(u).replaceWith(u=document.createTextNode(t))):n.endOffset&&n.endContainer.lastChild&&(u=n.endContainer.lastChild),this._updateNodeCollection(n.commonAncestorContainer,r,u))},n.prototype._updateNodeCollection=function(n,t,i){if(this._updateIterationStatus(n,t,i),n=n.firstChild)do this._updateNodeCollection(n,t,i);while(n=n.nextSibling)},n.prototype._updateIterationStatus=function(n,t,i){n!=t||this._iterationStatus||(this._iterationStatus=!0);n.nodeType==3&&this._iterationStatus&&this._nodeCollection.push(n);n==i&&this._iterationStatus&&(this._iterationStatus=!1)},n}()}(documentManager||(documentManager={}));$.extend(ej,documentManager);window.documentManager=null;clipboardCleaner=function(){function n(n,t,i){function u(n){if(r.CleanerState&&(r._pasteHandler(n),r.syncLoad))return n.preventDefault(),n.stopPropagation(),!1}function f(n){r.CleanerState&&r._keydownHandler(n)}this.CleanerState=!0;this.syncLoad=!1;this.listContents=[];this.blockNode=["div","p","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"];this.flagState=!0;this.content=null;this.htmlContent="";this.insertCleanedContent=!0;this.filterOptions={listConversion:!0,cleanCSS:!0,removeStyles:!1,cleanElements:!0};this.Collection=[];this.blockqouteNodes=[];this.tempCleaner=[];this.ignorableNodes=["A","APPLET","B","BLOCKQUOTE","BR","BUTTON","CENTER","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HR","I","IMG","IFRAME","INPUT","INS","LABEL","LI","OL","OPTION","P","PARAM","PRE","Q","S","SELECT","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL"];this.listNodes=[];this.ulData=["disc","square","circle","disc","square","circle"];this.olData=["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman","lower-greek"];var r=this;this.callback=t;this.env=i;this.currentDocument=n;this._isIE()&&(this.currentDocument.body.addEventListener?this.currentDocument.body.addEventListener("keydown",f):this.currentDocument.body.attachEvent("onkeydown",f));this.currentDocument.body.addEventListener?this.currentDocument.body.addEventListener("paste",u):this.currentDocument.body.attachEvent("onpaste",u)}return n.prototype._keydownHandler=function(n,t){t===void 0&&(t=!1);(this._isIE()&&n.ctrlKey&&!n.shiftKey&&n.keyCode==86&&this.flagState||t)&&(this.flagState=!1,this._setContent())},n.prototype._setContent=function(){var u=this,n,i,r,t;this.content=this.currentDocument.createElement("div");i=this.currentDocument.createElement("P");this.content.id="ClipboardData";this.content.style.position="absolute";this.content.style.height="10px";this.content.style.width="10px";this.content.style.overflow="hidden";this.content.style.top="-3000px";n=this.currentDocument.createTextNode("PastedContent");ej.browserInfo().name=="chrome"?(i.appendChild(n),this.content.appendChild(i)):this.content.appendChild(n);window.getSelection&&(r=this.currentDocument.getSelection(),r.rangeCount>0&&(t=r.getRangeAt(0),t.deleteContents(),t.collapse(!0),t.insertNode(this.content),this._updateRange(n,0,n.textContent.length),this.content.focus(),this.syncLoad=!1))},n.prototype._insertContent=function(n){var t;n===void 0&&(n=!0);var r=this.currentDocument.createElement("span"),i=[],u,f=this.currentDocument.createElement("p");if(r.appendChild(u=this.currentDocument.createTextNode(String.fromCharCode(65279))),f.appendChild(r),this._finalCleanup(this.Container),this.Container.appendChild(f),this._isIE()&&n){for(i=[],t=this.Container.childNodes.length-1;t>-1;t--)i.push(this.Container.childNodes.item(t));for(t=0;t<i.length;t++)this._insertAfter(this.content,i[t]);this.content.removeNode(!0)}else this._contentPositionHandler();$(ej.browserInfo().name=="msie"||ej.browserInfo().name=="mozilla"?this.currentDocument.body.parentNode:this.currentDocument.body).scrollTop($(r).offset().top-25);this.callback.call(this.env);this._updateRange(u,0,u.textContent.length)},n.prototype._insertAfter=function(n,t){n.nextSibling?n.parentElement.insertBefore(t,n.nextSibling):n.parentElement.appendChild(t)},n.prototype._findValidListType=function(n){if(n.nodeType==3&&n.textContent.trim().length>0&&this.listContents.push(n.textContent),n=n.firstChild)do this._findValidListType(n);while(n=n.nextSibling)},n.prototype._createNodeCollection=function(n){for(var t=this.currentDocument.createElement(n.shift()),r,i=t;r=n.shift();)t=this.currentDocument.createElement(r).appendChild(t);return{leaf:i,root:t}},n.prototype._contentPositionHandler=function(){var s=this.currentDocument.getSelection(),n,r,h=[],u=[],f,e,o,t,i;if(s.rangeCount>0)if(this.content&&(e=this.currentDocument.createRange(),o=this.currentDocument.getSelection(),e.selectNode(this.content),o.removeAllRanges(),o.addRange(e)),t=s.getRangeAt(0),t.startContainer==t.endContainer){if(t.startOffset!=t.endOffset&&t.deleteContents(),t.insertNode(this.Container),n=this.Container.parentNode,n.nodeName.toLowerCase()!="body"){do h.push(n.nodeName.toLowerCase());while(this.blockNode.indexOf(n.nodeName.toLowerCase())==-1&&(n=n.parentElement));for(f=this._createNodeCollection(h),n&&(n.nextSibling?n.parentElement.insertBefore(f.root,n.nextSibling):n.parentElement.appendChild(f.root)),n=this.Container;n=n.nextSibling;)f.leaf.appendChild(n);this._insertAfter(this.Container.parentElement,this.Container)}for(i=0;i<this.Container.childNodes.length;i++)u.push(this.Container.childNodes[i]);while(r=u.shift())this.Container.parentElement.insertBefore(r,this.Container)}else{for(t.deleteContents(),t.insertNode(this.Container),i=0;i<this.Container.childNodes.length;i++)u.push(this.Container.childNodes[i]);while(r=u.shift())this.Container.parentElement.insertBefore(r,this.Container)}this._remove(this.Container);this._remove(this.content);this.content=null},n.prototype._updateRange=function(n,t,i){var r=this.currentDocument.createRange(),u=this.currentDocument.getSelection();r.setStart(n,t);r.setEnd(n,i);u.removeAllRanges();u.addRange(r)},n.prototype._pasteHandler=function(n){this.clipboardData={plain:null,rtf:null,html:null};this.syncLoad=!1;this._isIE()?this._extractClipboardIE(n):(this._fillClipboard(n),this._extractClipboardNonIE(n))},n.prototype._isIE=function(){return navigator.userAgent.match(/Trident|msie/i)!=null},n.prototype._extractClipboardNonIE=function(n){if(this.clipboardData.html)this.content=null,this.htmlContent=this.clipboardData.html,this._processContent(n);else if(ej.browserInfo().name=="chrome"&&this.clipboardData.plain){var u=this.currentDocument.createElement("div"),r,i=this.clipboardData.plain.split("\n"),t=this.currentDocument.createElement("p");if(i.length)while(r=i.shift())t.appendChild(this.currentDocument.createTextNode(r)),i.length&&t.appendChild(this.currentDocument.createElement("br"));else t.appendChild(this.currentDocument.createTextNode(this.clipboardData.plain));this.htmlContent=t.innerHTML;this._processContent(n,!1)}else n&&n.clipboardData&&n.clipboardData.items.length?this.callback.call(this.env,n):(this._setContent(),this._contentUpdater())},n.prototype._extractClipboardIE=function(){this._contentUpdater()},n.prototype._contentUpdater=function(){var n=this;setTimeout(function(){n.content&&(n.clipboardData.html=n.htmlContent=n.content.innerHTML);n.flagState||(n.flagState=!0);n._processContent()},0)},n.prototype._fillClipboard=function(n){this.clipboardData.html=n.clipboardData.getData("text/html")?n.clipboardData.getData("text/html"):null;this.clipboardData.plain=n.clipboardData.getData("text/plain")?n.clipboardData.getData("text/plain"):null;this.clipboardData.rtf=n.clipboardData.getData("text/rtf")?n.clipboardData.getData("text/rtf"):null},n.prototype._processContent=function(n,t){var r;n===void 0&&(n=null);t===void 0&&(t=!0);var i=this.currentDocument.createElement("p"),e=this,u=!0,f=this.currentDocument.createElement("p");if(/class="?Mso|style="[^ ]*\bmso-/i.test(this.htmlContent)&&t)this.htmlContent=this.htmlContent.replace(/<img[^>]+>/i,""),i.innerHTML=this.htmlContent,this.syncLoad=!0,this.Collection=[],this.blockqouteNodes=[],this.listNodes=[],this._cleanup(i),this._flush(),this.filterOptions.listConversion&&this._listConverter(),this.filterOptions.cleanElements&&(this._blockquoteConvert(),this._cleanElement(i),this._flush()),this.filterOptions.cleanCSS&&(this._cleanStyles(i),this._flush(!1)),this.Container=i,this.insertCleanedContent&&this._insertContent();else{if(this.syncLoad=!0,i.innerHTML=this.htmlContent,this.filterOptions.cleanCSS&&(this._cleanStyles(i),this._flush(!1)),i.childNodes.length){for(r=0;r<i.childNodes.length;r++)this.blockNode.indexOf(i.childNodes[r].nodeName.toLowerCase())!=-1&&(u=!1);u&&(f.appendChild(i),i=f)}this.Container=i;this.insertCleanedContent&&this._insertContent(!u)}},n.prototype._flush=function(n){var t,r,i;if(n===void 0&&(n=!0),r=[],n)while(t=this.tempCleaner.shift())this._remove(t);else while(t=this.tempCleaner.shift()){if(t.childNodes.length){for(r=[],i=0;i<t.childNodes.length;i++)r.push(t.childNodes[i]);for(i=0;i<r.length;i++)t.parentElement.insertBefore(r[i],t)}this._remove(t)}},n.prototype._makeConvertion=function(){for(var u=this.currentDocument.createElement("div"),i,f=1,t,e=0,r,n=0;n<this.Collection.length;n++){if(this.Collection[n].level==1&&e==0)this.Collection[n].content&&(u.appendChild(i=this.currentDocument.createElement(this.Collection[n].type)),t=this.currentDocument.createElement("li"),t.appendChild(this.currentDocument.createTextNode(this.Collection[n].content.textContent)),i.appendChild(t),i.setAttribute("level",this.Collection[n].level.toString()),i.style.listStyle=this._getlistStyle(this.Collection[n].type,this.Collection[n].level));else if(this.Collection[n].level==f)t.parentElement.tagName.toLowerCase()==this.Collection[n].type?(t.parentElement.appendChild(t=this.currentDocument.createElement("li")),t.appendChild(this.currentDocument.createTextNode(this.Collection[n].content.textContent))):(i=this.currentDocument.createElement(this.Collection[n].type),this._insertAfter(t.parentElement,i),t=this.currentDocument.createElement("li"),t.appendChild(this.currentDocument.createTextNode(this.Collection[n].content.textContent)),i.appendChild(t),i.setAttribute("level",this.Collection[n].level.toString()));else if(this.Collection[n].level>f)t.appendChild(i=this.currentDocument.createElement(this.Collection[n].type)),t=this.currentDocument.createElement("li"),t.appendChild(this.currentDocument.createTextNode(this.Collection[n].content.textContent)),i.appendChild(t),t.style.marginLeft=(this.Collection[n].level-f-1)*40+"px",i.setAttribute("level",this.Collection[n].level.toString()),i.style.listStyle=this._getlistStyle(this.Collection[n].type,this.Collection[n].level);else if(this.Collection[n].level==1)u.lastChild.tagName.toLowerCase()==this.Collection[n].type?i=u.lastChild:u.appendChild(i=this.currentDocument.createElement(this.Collection[n].type)),t=this.currentDocument.createElement("li"),t.appendChild(this.currentDocument.createTextNode(this.Collection[n].content.textContent)),i.appendChild(t),i.setAttribute("level",this.Collection[n].level.toString()),i.style.listStyle=this._getlistStyle(this.Collection[n].type,this.Collection[n].level);else for(r=t;r=r.parentElement;){if(r.attributes.getNamedItem("level"))if(parseInt(r.attributes.getNamedItem("level").textContent)==this.Collection[n].level){r.tagName.toLowerCase()==this.Collection[n].type?(t=this.currentDocument.createElement("li"),t.appendChild(this.currentDocument.createTextNode(this.Collection[n].content.textContent)),r.appendChild(t)):(i=this.currentDocument.createElement(this.Collection[n].type),this._insertAfter(t.parentElement,i),t=this.currentDocument.createElement("li"),t.appendChild(this.currentDocument.createTextNode(this.Collection[n].content.textContent)),i.appendChild(t),i.setAttribute("level",this.Collection[n].level.toString()),i.style.listStyle=this._getlistStyle(this.Collection[n].type,this.Collection[n].level));break}else if(this.Collection[n].level>parseInt(r.attributes.getNamedItem("level").textContent)){r.appendChild(i=this.currentDocument.createElement(this.Collection[n].type));t=this.currentDocument.createElement("li");t.appendChild(this.currentDocument.createTextNode(this.Collection[n].content.textContent));i.appendChild(t);t.style.marginLeft=(this.Collection[n].level-parseInt(r.attributes.getNamedItem("level").textContent)-1)*40+"px";i.setAttribute("level",this.Collection[n].level.toString());i.style.listStyle=this._getlistStyle(this.Collection[n].type,this.Collection[n].level);break}continue}f=this.Collection[n].level;e++}return u},n.prototype._listConverter=function(){for(var i,r,e,o,t,s,u=[],f=[],n=0;n<this.listNodes.length;n++){if(this.listNodes[n]==null){u.push({content:this._makeConvertion(),node:this.listNodes[n-1]});this.Collection=[];continue}r=this.listNodes[n].attributes.getNamedItem("style").textContent;e=r&&r.indexOf("level")!=-1?parseInt(r.charAt(r.indexOf("level")+5)):1;this.listContents=[];this._findValidListType(this.listNodes[n]);o=this.listContents[0].length>1?"ol":"ul";s=this.listContents[1]?this.currentDocument.createTextNode(this.listContents[1]):this.currentDocument.createTextNode("");this.Collection.push({type:o,content:s,level:e})}while((t=this.listNodes.shift())?t:t=this.listNodes.shift()){for(f=[],i=0;i<u.length;i++)if(u[i].node==t){for(n=0;n<u[i].content.childNodes.length;n++)f.push(u[i].content.childNodes[n]);for(n=0;n<f.length;n++)t.parentElement.insertBefore(f[n],t);break}t.remove&&t.remove();t.removeNode&&t.removeNode(!0)}},n.prototype._blockquoteConvert=function(){for(var t,r,i=[],n=0;n<this.blockqouteNodes.length;n++){if(r=this.currentDocument.createElement("blockquote"),i=[],this.blockqouteNodes[n].childNodes&&this.blockqouteNodes[n].childNodes.length){for(t=0;t<this.blockqouteNodes[n].childNodes.length;t++)i.push(this.blockqouteNodes[n].childNodes.item(t));for(t=0;t<i.length;t++)r.appendChild(i[t])}this.blockqouteNodes[n].parentElement.insertBefore(r,this.blockqouteNodes[n]);this.blockqouteNodes[n].remove&&this.blockqouteNodes[n].remove();this.blockqouteNodes[n].removeNode&&this.blockqouteNodes[n].removeNode(!0)}},n.prototype._cleanup=function(n){for(var i,t=0;t<n.childNodes.length;t++){if(this.ignorableNodes.indexOf(n.childNodes[t].nodeName)==-1||n.childNodes[t].nodeType==3&&n.childNodes[t].textContent.trim()==""){this.tempCleaner.push(n.childNodes[t]);continue}else n.childNodes[t].className&&n.childNodes[t].className.toLowerCase().indexOf("msoquote")!=-1?this.blockqouteNodes.push(n.childNodes[t]):n.childNodes[t].className&&n.childNodes[t].className.toLowerCase().indexOf("msolistparagraph")!=-1&&this.listNodes.push(n.childNodes[t]);!i||this.blockNode.indexOf(n.childNodes[t].nodeName.toLowerCase())==-1||n.childNodes[t].className&&n.childNodes[t].className.toLowerCase().indexOf("msolistparagraph")!=-1||this.listNodes.push(null);this.blockNode.indexOf(n.childNodes[t].nodeName.toLowerCase())!=-1&&(i=n.childNodes[t].className&&n.childNodes[t].className.toLowerCase().indexOf("msolistparagraph")!=-1?!0:!1)}this.listNodes.length&&this.listNodes[this.listNodes.length-1]!=null&&this.listNodes.push(null)},n.prototype._finalCleanup=function(n){for(var i,r=[],t=0;t<n.childNodes.length;t++)n.childNodes[t]&&n.childNodes[t].nodeType!=3&&this.blockNode.indexOf(n.childNodes[t].nodeName.toLowerCase())!=-1&&n.childNodes[t].innerHTML&&n.childNodes[t].innerHTML.trim()==""&&r.push(n.childNodes[t]);while(i=r.shift())this._remove(i)},n.prototype._getlistStyle=function(n,t){return t=t>0?t-1:t,n=="ol"?t<this.olData.length?this.olData[t]:this.olData[0]:t<this.ulData.length?this.ulData[t]:this.ulData[0]},n.prototype._cleanElement=function(n){if(n.nodeType==3?n.textContent.trim()==""&&this.tempCleaner.push(n):n&&this.ignorableNodes.indexOf(n.nodeName)==-1&&this.tempCleaner.push(n),n=n.firstChild)do this._cleanElement(n);while(n=n.nextSibling)},n.prototype._cleanStyles=function(n){if(n&&n.nodeType!=3&&(this._cleanCSSClass(n),this._cleanCSSStyle(n),n.nodeName!="SPAN"||n.attributes.getNamedItem("style")||n.attributes.getNamedItem("class")?n.nodeName=="FONT"&&this.filterOptions.removeStyles&&this.tempCleaner.push(n):this.tempCleaner.push(n)),n=n.firstChild)do this._cleanStyles(n);while(n=n.nextSibling)},n.prototype._cleanCSSClass=function(n){var t;if(n.attributes&&n.attributes.getNamedItem("class")&&(this.filterOptions.cleanCSS||this.filterOptions.removeStyles)){var i=n.className.split(" "),r="",u=void 0;for(t=0;t<i.length;t++)i[t].toLowerCase().indexOf("mso")==-1&&this.filterOptions.cleanCSS&&(r+=i[t]+" ");r.length&&!this.filterOptions.removeStyles?(u=this.currentDocument.createAttribute("class"),u.value=r,n.attributes.setNamedItem(u)):n.attributes.removeNamedItem("class")}},n.prototype._cleanCSSStyle=function(n){var t;if(n.attributes&&n.attributes.getNamedItem("style")&&(this.filterOptions.cleanCSS||this.filterOptions.removeStyles)){var i=n.attributes.getNamedItem("style").textContent.split(";"),r="",u=void 0;for(t=0;t<i.length;t++)i[t].toLowerCase().indexOf("mso")==-1&&(r+=i[t]+";");r.length&&!this.filterOptions.removeStyles?(u=this.currentDocument.createAttribute("style"),u.value=r,n.attributes.setNamedItem(u)):n.attributes.removeNamedItem("style");!n.attributes.getNamedItem("align")||n.tagName==="FONT"||n.attributes.removeNamedItem("align")}},n.prototype._remove=function(n){n&&(n.remove?n.remove():n.removeNode?n.removeNode(!0):n.textContent&&(n.textContent=""))},n}();$.extend(ej,{clipboardCleaner:clipboardCleaner});window.ClipboardCleaner=undefined;
